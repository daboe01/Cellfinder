@STATIC;1.0;p;19;_CPAttachedWindow.jt;10281;@STATIC;1.0;I;21;Foundation/CPObject.ji;10;CPButton.ji;10;CPWindow.jt;10205;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPWindow.j",YES);
CPClosableOnBlurWindowMask=1<<4;
CPPopoverAppearanceMinimal=0;
CPPopoverAppearanceHUD=1;
var _1=1<<0,_2=1<<1;
var _3=objj_allocateClassPair(CPWindow,"_CPAttachedWindow"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_animates"),new objj_ivar("_targetView"),new objj_ivar("_appearance"),new objj_ivar("_isClosing"),new objj_ivar("_closeOnBlur"),new objj_ivar("_browserAnimates"),new objj_ivar("_shouldPerformAnimation"),new objj_ivar("_implementedDelegateMethods")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("animates"),function(_5,_6){
with(_5){
return _animates;
}
}),new objj_method(sel_getUid("setAnimates:"),function(_7,_8,_9){
with(_7){
_animates=_9;
}
}),new objj_method(sel_getUid("targetView"),function(_a,_b){
with(_a){
return _targetView;
}
}),new objj_method(sel_getUid("setTargetView:"),function(_c,_d,_e){
with(_c){
_targetView=_e;
}
}),new objj_method(sel_getUid("appearance"),function(_f,_10){
with(_f){
return _appearance;
}
}),new objj_method(sel_getUid("_setAppearance:"),function(_11,_12,_13){
with(_11){
_appearance=_13;
}
}),new objj_method(sel_getUid("isClosing"),function(_14,_15){
with(_14){
return _isClosing;
}
}),new objj_method(sel_getUid("setIsClosing:"),function(_16,_17,_18){
with(_16){
_isClosing=_18;
}
}),new objj_method(sel_getUid("initWithContentRect:"),function(_19,_1a,_1b){
with(_19){
_19=objj_msgSend(_19,"initWithContentRect:styleMask:",_1b,0);
return _19;
}
}),new objj_method(sel_getUid("initWithContentRect:styleMask:"),function(_1c,_1d,_1e,_1f){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("_CPAttachedWindow").super_class},"initWithContentRect:styleMask:",_1e,_1f)){
_animates=YES;
_closeOnBlur=(_1f&CPClosableOnBlurWindowMask);
_isClosing=NO;
_browserAnimates=objj_msgSend(_1c,"browserSupportsAnimation");
_shouldPerformAnimation=YES;
objj_msgSend(_1c,"setLevel:",CPStatusWindowLevel);
objj_msgSend(_1c,"setMovableByWindowBackground:",YES);
objj_msgSend(_1c,"setHasShadow:",NO);
objj_msgSend(_1c,"setCSS3Property:value:","TransitionProperty","-webkit-transform, opacity");
objj_msgSend(_windowView,"setNeedsDisplay:",YES);
}
return _1c;
}
}),new objj_method(sel_getUid("setAppearance:"),function(_20,_21,_22){
with(_20){
if(_appearance===_22){
return;
}
objj_msgSend(_windowView,"setAppearance:",_22);
}
}),new objj_method(sel_getUid("setStyleMask:"),function(_23,_24,_25){
with(_23){
_closeOnBlur=(_25&CPClosableOnBlurWindowMask);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_26,_27,_28){
with(_26){
if(_delegate===_28){
return;
}
_delegate=_28;
_implementedDelegateMethods=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("attachedWindowShouldClose:"))){
_implementedDelegateMethods|=_1;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("attachedWindowDidClose:"))){
_implementedDelegateMethods|=_2;
}
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_29,_2a,_2b,_2c,_2d,_2e){
with(_29){
if(objj_msgSend(_2b,"isEqual:","frame")){
var _2f=objj_msgSend(_windowView,"preferredEdge");
objj_msgSend(_29,"positionRelativeToRect:ofView:preferredEdge:",nil,_targetView,_2f);
}
}
}),new objj_method(sel_getUid("computeOriginFromRect:ofView:preferredEdge:"),function(_30,_31,_32,_33,_34){
with(_30){
var _35=objj_msgSend(CPApp,"mainWindow"),_36=objj_msgSend(_35,"platformWindow"),_37=objj_msgSend(_36,"nativeContentRect"),_38=objj_msgSend(_33,"convertPointToBase:",_32.origin),_39=objj_msgSend(_35,"convertBaseToPlatformWindow:",_38),_3a={origin:{x:_39.x,y:_39.y},size:{width:_32.size.width,height:_32.size.height}},_3b={x:_39.x,y:_39.y},_3c={x:_39.x,y:_39.y},_3d={x:_39.x,y:_39.y},_3e={x:_39.x,y:_39.y},_3f=objj_msgSend(_30,"frame").size;
_3c.x+=_3a.size.width;
_3c.y+=(_3a.size.height/2)-(_3f.height/2);
_3b.x-=_3f.width;
_3b.y+=(_3a.size.height/2)-(_3f.height/2);
_3e.x+=_3a.size.width/2-_3f.width/2;
_3e.y+=_3a.size.height;
_3d.x+=_3a.size.width/2-_3f.width/2;
_3d.y-=_3f.height;
var _40=(_34!==nil)?_34:CPMaxXEdge,_41;
switch(_40){
case CPMaxXEdge:
_41=_3c;
break;
case CPMinXEdge:
_41=_3b;
break;
case CPMinYEdge:
_41=_3d;
break;
case CPMaxYEdge:
_41=_3e;
break;
}
var _42=[_41,_3c,_3b,_3d,_3e],_43=[_40,CPMaxXEdge,CPMinXEdge,CPMinYEdge,CPMaxYEdge];
for(var i=0;i<_42.length;i++){
var _44=_42[i],_45=_43[i];
objj_msgSend(_windowView,"setArrowOffsetX:",0);
objj_msgSend(_windowView,"setArrowOffsetY:",0);
objj_msgSend(_windowView,"setPreferredEdge:",_45);
if(_44.x<0){
objj_msgSend(_windowView,"setArrowOffsetX:",_44.x);
_44.x=0;
}
if(_44.x+_3f.width>_37.size.width){
objj_msgSend(_windowView,"setArrowOffsetX:",(_44.x+_3f.width-_37.size.width));
_44.x=_37.size.width-_3f.width;
}
if(_44.y<0){
objj_msgSend(_windowView,"setArrowOffsetY:",_44.y);
_44.y=0;
}
if(_44.y+_3f.height>_37.size.height){
objj_msgSend(_windowView,"setArrowOffsetY:",(_3f.height+_44.y-_37.size.height));
_44.y=_37.size.height-_3f.height;
}
switch(_45){
case CPMaxXEdge:
if(_44.x>=(_3a.origin.x+_3a.size.width)){
return _44;
}
break;
case CPMinXEdge:
if((_44.x+_3f.width)<=_3a.origin.x){
return _44;
}
break;
case CPMaxYEdge:
if(_44.y>=(_3a.origin.y+_3a.size.height)){
return _44;
}
break;
case CPMinYEdge:
if((_44.y+_3f.height)<=_3a.origin.y){
return _44;
}
break;
}
}
objj_msgSend(_windowView,"setPreferredEdge:",nil);
return _41;
}
}),new objj_method(sel_getUid("positionRelativeToView:"),function(_46,_47,_48){
with(_46){
objj_msgSend(_46,"positionRelativeToRect:ofView:preferredEdge:",nil,_48,nil);
}
}),new objj_method(sel_getUid("positionRelativeToRect:ofView:preferredEdge:"),function(_49,_4a,_4b,_4c,_4d){
with(_49){
if(!_4b||(_4b.size.width<=0||_4b.size.height<=0)){
_4b=objj_msgSend(_4c,"bounds");
}
var _4e=objj_msgSend(_49,"computeOriginFromRect:ofView:preferredEdge:",_4b,_4c,_4d);
objj_msgSend(_49,"setFrameOrigin:",_4e);
objj_msgSend(_windowView,"showCursor");
objj_msgSend(_49,"setLevel:",CPStatusWindowLevel);
objj_msgSend(_windowView,"setNeedsDisplay:",YES);
objj_msgSend(_49,"makeKeyAndOrderFront:",nil);
if(_4c!==_targetView){
objj_msgSend(_targetView,"removeObserver:forKeyPath:",_49,"frame");
_targetView=_4c;
objj_msgSend(_targetView,"addObserver:forKeyPath:options:context:",_49,"frame",0,nil);
}
}
}),new objj_method(sel_getUid("setCSS3Property:value:"),function(_4f,_50,_51,_52){
with(_4f){
_DOMElement.style["webkit"+_51]=_52;
}
}),new objj_method(sel_getUid("browserSupportsAnimation"),function(_53,_54){
with(_53){
return typeof (_DOMElement.style.webkitTransition)!=="undefined";
}
}),new objj_method(sel_getUid("close:"),function(_55,_56,_57){
with(_55){
objj_msgSend(_55,"close");
}
}),new objj_method(sel_getUid("resignMainWindow"),function(_58,_59){
with(_58){
if(_closeOnBlur&&!_isClosing){
if(!_delegate||((_implementedDelegateMethods&_1)&&objj_msgSend(_delegate,"attachedWindowShouldClose:",_58))){
objj_msgSend(_58,"close");
}
}
}
}),new objj_method(sel_getUid("orderFront:"),function(_5a,_5b,_5c){
with(_5a){
if(!objj_msgSend(_5a,"isMainWindow")){
objj_msgSendSuper({receiver:_5a,super_class:objj_getClass("_CPAttachedWindow").super_class},"orderFront:",_5c);
if(_animates&&_browserAnimates&&_shouldPerformAnimation){
var _5d="50% 100%",_5e=objj_msgSend(_5a,"frame"),_5f=objj_msgSend(_windowView,"preferredEdge"),_60;
switch(_5f){
case CPMaxYEdge:
case CPMinYEdge:
_60=50+((objj_msgSend(_windowView,"arrowOffsetX")*100)/_5e.size.width);
_5d=_60+"% "+(_5f===CPMaxYEdge?"0%":"100%");
break;
case CPMinXEdge:
case CPMaxXEdge:
posY=50+((objj_msgSend(_windowView,"arrowOffsetY")*100)/_5e.size.height);
_5d=(_5f===CPMaxXEdge?"0% ":"100% ")+posY+"%";
break;
}
objj_msgSend(_5a,"setCSS3Property:value:","Transform","scale(0)");
objj_msgSend(_5a,"setCSS3Property:value:","TransformOrigin",_5d);
objj_msgSend(_5a,"setCSS3Property:value:","Transition","opacity 0 linear");
window.setTimeout(function(){
_DOMElement.style.opacity=1;
_DOMElement.style.height=_5e.size.height+"px";
_DOMElement.style.width=_5e.size.width+"px";
objj_msgSend(_5a,"setCSS3Property:value:","Transform","scale(1.1)");
objj_msgSend(_5a,"setCSS3Property:value:","Transition","-webkit-transform 200ms ease-in");
var _61=function(){
_DOMElement.removeEventListener("webkitTransitionEnd",_61,YES);
objj_msgSend(_5a,"setCSS3Property:value:","Transform","scale(1)");
objj_msgSend(_5a,"setCSS3Property:value:","Transition","-webkit-transform 50ms linear");
};
_DOMElement.addEventListener("webkitTransitionEnd",_61,YES);
},0);
}else{
objj_msgSend(_5a,"setCSS3Property:value:","Transition","");
_DOMElement.style.opacity=1;
}
}
_shouldPerformAnimation=NO;
_isClosing=NO;
}
}),new objj_method(sel_getUid("close"),function(_62,_63){
with(_62){
if(!objj_msgSend(_62,"isVisible")){
return;
}
_isClosing=YES;
if(_animates&&_browserAnimates){
objj_msgSend(_62,"setCSS3Property:value:","Transition","opacity 250ms linear");
_DOMElement.style.opacity=0;
var _64=function(){
_DOMElement.removeEventListener("webkitTransitionEnd",_64,YES);
objj_msgSend(_62,"_close");
};
_DOMElement.addEventListener("webkitTransitionEnd",_64,YES);
}else{
objj_msgSend(_62,"_close");
}
}
}),new objj_method(sel_getUid("_close"),function(_65,_66){
with(_65){
objj_msgSendSuper({receiver:_65,super_class:objj_getClass("_CPAttachedWindow").super_class},"close");
objj_msgSend(_targetView,"removeObserver:forKeyPath:",_65,"frame");
_shouldPerformAnimation=YES;
_isClosing=NO;
if(_implementedDelegateMethods&_2){
objj_msgSend(_delegate,"attachedWindowDidClose:",_65);
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("_windowViewClassForStyleMask:"),function(_67,_68,_69){
with(_67){
return _CPAttachedWindowView;
}
}),new objj_method(sel_getUid("attachedWindowWithSize:forView:"),function(_6a,_6b,_6c,_6d){
with(_6a){
return objj_msgSend(_CPAttachedWindow,"attachedWindowWithSize:forView:styleMask:",_6c,_6d,0);
}
}),new objj_method(sel_getUid("attachedWindowWithSize:forView:styleMask:"),function(_6e,_6f,_70,_71,_72){
with(_6e){
var _73=objj_msgSend(objj_msgSend(_CPAttachedWindow,"alloc"),"initWithContentRect:styleMask:",{origin:{x:0,y:0},size:{width:_70.width,height:_70.height}},_72);
objj_msgSend(_73,"attachToView:",_71);
return _73;
}
})]);
p;15;_CPCornerView.jt;1952;@STATIC;1.0;i;8;CPView.jt;1921;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPCornerView"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("drawRect:"),function(_3,_4,_5){
with(_3){
var _6=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_7=objj_msgSend(_3,"currentValueForThemeAttribute:","divider-color");
CGContextSetLineWidth(_6,1);
CGContextSetStrokeColor(_6,objj_msgSend(_3,"currentValueForThemeAttribute:","divider-color"));
CGContextMoveToPoint(_6,(_5.origin.x)+0.5,ROUND((_5.origin.y)));
CGContextAddLineToPoint(_6,(_5.origin.x)+0.5,ROUND((_5.origin.y+_5.size.height))-1);
CGContextClosePath(_6);
CGContextStrokePath(_6);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_8,_9){
with(_8){
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("_init"),function(_a,_b){
with(_a){
objj_msgSend(_a,"setBackgroundColor:",objj_msgSend(_a,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPCornerView").super_class},"initWithFrame:",_e);
if(_c){
objj_msgSend(_c,"_init");
}
return _c;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_f,_10,_11){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("_CPCornerView").super_class},"initWithCoder:",_11);
if(_f){
objj_msgSend(_f,"_init");
}
return _f;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_12,_13){
with(_12){
return "cornerview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_14,_15){
with(_14){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["background-color","divider-color"]);
}
})]);
p;18;_CPDisplayServer.jt;1218;@STATIC;1.0;I;22;Foundation/CPRunLoop.jt;1172;
objj_executeFile("Foundation/CPRunLoop.j",NO);
var _1=[],_2={},_3=[],_4={},_5=objj_msgSend(CPRunLoop,"mainRunLoop");
_CPDisplayServerAddDisplayObject=function(_6){
var _7=objj_msgSend(_6,"UID");
if(typeof _2[_7]!=="undefined"){
return;
}
var _8=_1.length;
_2[_7]=_8;
_1[_8]=_6;
};
_CPDisplayServerAddLayoutObject=function(_9){
var _a=objj_msgSend(_9,"UID");
if(typeof _4[_a]!=="undefined"){
return;
}
var _b=_3.length;
_4[_a]=_b;
_3[_b]=_9;
};
var _c=objj_allocateClassPair(CPObject,"_CPDisplayServer"),_d=_c.isa;
objj_registerClassPair(_c);
class_addMethods(_d,[new objj_method(sel_getUid("run"),function(_e,_f){
with(_e){
while(_3.length||_1.length){
var _10=0;
for(;_10<_3.length;++_10){
var _11=_3[_10];
delete _4[objj_msgSend(_11,"UID")];
objj_msgSend(_11,"layoutIfNeeded");
}
_3=[];
_4={};
_10=0;
for(;_10<_1.length;++_10){
if(_3.length){
break;
}
var _11=_1[_10];
delete _2[objj_msgSend(_11,"UID")];
objj_msgSend(_11,"displayIfNeeded");
}
if(_10===_1.length){
_1=[];
_2={};
}else{
_1.splice(0,_10);
}
}
objj_msgSend(_5,"performSelector:target:argument:order:modes:",sel_getUid("run"),_e,nil,0,[CPDefaultRunLoopMode]);
}
})]);
objj_msgSend(_CPDisplayServer,"run");
p;21;_CPImageAndTextView.jt;14395;@STATIC;1.0;I;21;Foundation/CPString.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;8;CPView.ji;11;CPControl.jt;14283;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPControl.j",YES);
var _1=1<<0,_2=1<<1,_3=1<<2,_4=1<<3,_5=1<<4,_6=1<<5,_7=1<<6,_8=1<<7,_9=1<<8,_a=1<<9,_b=1<<10;
var _c=objj_allocateClassPair(CPView,"_CPImageAndTextView"),_d=_c.isa;
class_addIvars(_c,[new objj_ivar("_alignment"),new objj_ivar("_verticalAlignment"),new objj_ivar("_lineBreakMode"),new objj_ivar("_textColor"),new objj_ivar("_font"),new objj_ivar("_textShadowColor"),new objj_ivar("_textShadowOffset"),new objj_ivar("_imagePosition"),new objj_ivar("_imageScaling"),new objj_ivar("_imageOffset"),new objj_ivar("_shouldDimImage"),new objj_ivar("_image"),new objj_ivar("_text"),new objj_ivar("_textSize"),new objj_ivar("_flags"),new objj_ivar("_DOMImageElement"),new objj_ivar("_DOMTextElement"),new objj_ivar("_DOMTextShadowElement")]);
objj_registerClassPair(_c);
class_addMethods(_c,[new objj_method(sel_getUid("initWithFrame:control:"),function(_e,_f,_10,_11){
with(_e){
_e=objj_msgSendSuper({receiver:_e,super_class:objj_getClass("_CPImageAndTextView").super_class},"initWithFrame:",_10);
if(_e){
_textShadowOffset={width:0,height:0};
objj_msgSend(_e,"setVerticalAlignment:",CPTopVerticalTextAlignment);
if(_11){
objj_msgSend(_e,"setLineBreakMode:",objj_msgSend(_11,"lineBreakMode"));
objj_msgSend(_e,"setTextColor:",objj_msgSend(_11,"textColor"));
objj_msgSend(_e,"setAlignment:",objj_msgSend(_11,"alignment"));
objj_msgSend(_e,"setVerticalAlignment:",objj_msgSend(_11,"verticalAlignment"));
objj_msgSend(_e,"setFont:",objj_msgSend(_11,"font"));
objj_msgSend(_e,"setImagePosition:",objj_msgSend(_11,"imagePosition"));
objj_msgSend(_e,"setImageScaling:",objj_msgSend(_11,"imageScaling"));
objj_msgSend(_e,"setImageOffset:",objj_msgSend(_11,"imageOffset"));
}else{
objj_msgSend(_e,"setLineBreakMode:",CPLineBreakByClipping);
objj_msgSend(_e,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_e,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",12));
objj_msgSend(_e,"setImagePosition:",CPNoImage);
objj_msgSend(_e,"setImageScaling:",CPImageScaleNone);
}
_textSize=nil;
}
return _e;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_12,_13,_14){
with(_12){
return objj_msgSend(_12,"initWithFrame:control:",_14,nil);
}
}),new objj_method(sel_getUid("setAlignment:"),function(_15,_16,_17){
with(_15){
if(_alignment===_17){
return;
}
_alignment=_17;
switch(_alignment){
case CPLeftTextAlignment:
_DOMElement.style.textAlign="left";
break;
case CPRightTextAlignment:
_DOMElement.style.textAlign="right";
break;
case CPCenterTextAlignment:
_DOMElement.style.textAlign="center";
break;
case CPJustifiedTextAlignment:
_DOMElement.style.textAlign="justify";
break;
case CPNaturalTextAlignment:
_DOMElement.style.textAlign="";
break;
}
}
}),new objj_method(sel_getUid("alignment"),function(_18,_19){
with(_18){
return _alignment;
}
}),new objj_method(sel_getUid("setVerticalAlignment:"),function(_1a,_1b,_1c){
with(_1a){
if(_verticalAlignment===_1c){
return;
}
_verticalAlignment=_1c;
_flags|=_5;
objj_msgSend(_1a,"setNeedsLayout");
}
}),new objj_method(sel_getUid("verticalAlignment"),function(_1d,_1e){
with(_1d){
return _verticalAlignment;
}
}),new objj_method(sel_getUid("setLineBreakMode:"),function(_1f,_20,_21){
with(_1f){
if(_lineBreakMode===_21){
return;
}
_lineBreakMode=_21;
_flags|=_6;
objj_msgSend(_1f,"setNeedsLayout");
}
}),new objj_method(sel_getUid("lineBreakMode"),function(_22,_23){
with(_22){
return _lineBreakMode;
}
}),new objj_method(sel_getUid("setImagePosition:"),function(_24,_25,_26){
with(_24){
if(_imagePosition==_26){
return;
}
if(_imagePosition==CPNoImage){
_flags|=_2;
}
_imagePosition=_26;
_flags|=_a;
objj_msgSend(_24,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imagePosition"),function(_27,_28){
with(_27){
return _imagePosition;
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_29,_2a,_2b){
with(_29){
if(_imageScaling==_2b){
return;
}
_imageScaling=_2b;
_flags|=_b;
objj_msgSend(_29,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imageScaling"),function(_2c,_2d){
with(_2c){
return _imageScaling;
}
}),new objj_method(sel_getUid("setDimsImage:"),function(_2e,_2f,_30){
with(_2e){
_30=!!_30;
if(_shouldDimImage!==_30){
_shouldDimImage=_30;
objj_msgSend(_2e,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("setTextColor:"),function(_31,_32,_33){
with(_31){
if(_textColor===_33){
return;
}
_textColor=_33;
_DOMElement.style.color=objj_msgSend(_textColor,"cssString");
}
}),new objj_method(sel_getUid("textColor"),function(_34,_35){
with(_34){
return _textColor;
}
}),new objj_method(sel_getUid("setFont:"),function(_36,_37,_38){
with(_36){
if(_font===_38){
return;
}
_font=_38;
_flags|=_8;
_textSize=nil;
objj_msgSend(_36,"setNeedsLayout");
}
}),new objj_method(sel_getUid("font"),function(_39,_3a){
with(_39){
return _font;
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_3b,_3c,_3d){
with(_3b){
if(_textShadowColor===_3d){
return;
}
_textShadowColor=_3d;
_flags|=_9;
objj_msgSend(_3b,"setNeedsLayout");
}
}),new objj_method(sel_getUid("textShadowColor"),function(_3e,_3f){
with(_3e){
return _textShadowColor;
}
}),new objj_method(sel_getUid("setTextShadowOffset:"),function(_40,_41,_42){
with(_40){
if((_textShadowOffset.width==_42.width&&_textShadowOffset.height==_42.height)){
return;
}
_textShadowOffset={width:_42.width,height:_42.height};
objj_msgSend(_40,"setNeedsLayout");
}
}),new objj_method(sel_getUid("textShadowOffset"),function(_43,_44){
with(_43){
return _textShadowOffset;
}
}),new objj_method(sel_getUid("textFrame"),function(_45,_46){
with(_45){
objj_msgSend(_45,"layoutIfNeeded");
var _47=CGRectMakeZero();
if(_DOMTextElement){
var _48=_DOMTextElement.style;
_47.origin.y=parseInt(_48.top.substr(0,_48.top.length-2),10),_47.origin.x=parseInt(_48.left.substr(0,_48.left.length-2),10),_47.size.width=parseInt(_48.width.substr(0,_48.width.length-2),10),_47.size.height=parseInt(_48.height.substr(0,_48.height.length-2),10);
_47.size.width+=_textShadowOffset.width;
_47.size.height+=_textShadowOffset.height;
}
return _47;
}
}),new objj_method(sel_getUid("setImage:"),function(_49,_4a,_4b){
with(_49){
if(_image==_4b){
return;
}
if(objj_msgSend(_image,"delegate")===_49){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_49,CPImageDidLoadNotification,_image);
}
_image=_4b;
_flags|=_2;
if(objj_msgSend(_image,"loadStatus")!==CPImageLoadStatusCompleted){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_49,sel_getUid("imageDidLoad:"),CPImageDidLoadNotification,_image);
}
objj_msgSend(_49,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setImageOffset:"),function(_4c,_4d,_4e){
with(_4c){
if(_imageOffset===_4e){
return;
}
_imageOffset=_4e;
objj_msgSend(_4c,"setNeedsLayout");
}
}),new objj_method(sel_getUid("imageOffset"),function(_4f,_50){
with(_4f){
return _imageOffset;
}
}),new objj_method(sel_getUid("imageDidLoad:"),function(_51,_52,_53){
with(_51){
_flags|=_2;
objj_msgSend(_51,"setNeedsLayout");
}
}),new objj_method(sel_getUid("image"),function(_54,_55){
with(_54){
return _image;
}
}),new objj_method(sel_getUid("setText:"),function(_56,_57,_58){
with(_56){
if(_text===_58){
return;
}
_text=_58;
_flags|=_3;
_textSize=nil;
objj_msgSend(_56,"setNeedsLayout");
}
}),new objj_method(sel_getUid("text"),function(_59,_5a){
with(_59){
return _text;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_5b,_5c){
with(_5b){
var _5d=_imagePosition!==CPImageOnly&&(objj_msgSend(_text,"length")>0),_5e=!!_DOMTextElement;
if(_5d!==_5e){
if(_5e){
_DOMElement.removeChild(_DOMTextElement);
_DOMTextElement=nil;
_5e=NO;
}else{
_DOMTextElement=document.createElement("div");
var _5f=_DOMTextElement.style;
_5f.position="absolute";
_5f.whiteSpace="pre";
_5f.zIndex=200;
_5f.overflow="hidden";
_DOMElement.appendChild(_DOMTextElement);
_5e=YES;
_flags|=_3|_8|_6;
}
}
var _5f=_5e?_DOMTextElement.style:nil;
var _60=_5e&&objj_msgSend(_textShadowColor,"alphaComponent")>0,_61=!!_DOMTextShadowElement;
if(_60!==_61){
if(_61){
_DOMElement.removeChild(_DOMTextShadowElement);
_DOMTextShadowElement=nil;
_61=NO;
}else{
_DOMTextShadowElement=document.createElement("div");
var _62=_DOMTextShadowElement.style;
_62.font=objj_msgSend(_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12),"cssString");
_62.position="absolute";
_62.whiteSpace=_5f.whiteSpace;
_62.wordWrap=_5f.wordWrap;
_62.color=objj_msgSend(_textShadowColor,"cssString");
_62.zIndex=150;
_62.textOverflow=_5f.textOverflow;
if(document.attachEvent){
_62.overflow=_5f.overflow;
}else{
_62.overflowX=_5f.overflowX;
_62.overflowY=_5f.overflowY;
}
_DOMElement.appendChild(_DOMTextShadowElement);
_61=YES;
_flags|=_3;
}
}
var _62=_61?_DOMTextShadowElement.style:nil;
if(_5e){
if(_flags&_3){
if(CPFeatureIsCompatible(CPJavaScriptInnerTextFeature)){
_DOMTextElement.innerText=_text;
if(_DOMTextShadowElement){
_DOMTextShadowElement.innerText=_text;
}
}else{
if(CPFeatureIsCompatible(CPJavaScriptTextContentFeature)){
_DOMTextElement.textContent=_text;
if(_DOMTextShadowElement){
_DOMTextShadowElement.textContent=_text;
}
}
}
}
if(_flags&_8){
var _63=objj_msgSend((_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12)),"cssString");
_5f.font=_63;
if(_62){
_62.font=_63;
}
}
if(_flags&_6){
switch(_lineBreakMode){
case CPLineBreakByClipping:
_5f.overflow="hidden";
_5f.textOverflow="clip";
_5f.whiteSpace="pre";
_5f.wordWrap="normal";
break;
case CPLineBreakByTruncatingHead:
case CPLineBreakByTruncatingMiddle:
case CPLineBreakByTruncatingTail:
_5f.textOverflow="ellipsis";
_5f.whiteSpace="nowrap";
_5f.overflow="hidden";
_5f.wordWrap="normal";
break;
case CPLineBreakByCharWrapping:
case CPLineBreakByWordWrapping:
_5f.wordWrap="break-word";
try{
_5f.whiteSpace="pre";
_5f.whiteSpace="-o-pre-wrap";
_5f.whiteSpace="-pre-wrap";
_5f.whiteSpace="-moz-pre-wrap";
_5f.whiteSpace="pre-wrap";
}
catch(e){
_5f.whiteSpace="pre";
}
_5f.overflow="hidden";
_5f.textOverflow="clip";
break;
}
if(_62){
if(document.attachEvent){
_62.overflow=_5f.overflow;
}else{
_62.overflowX=_5f.overflowX;
_62.overflowY=_5f.overflowY;
}
_62.wordWrap=_5f.wordWrap;
_62.whiteSpace=_5f.whiteSpace;
_62.textOverflow=_5f.textOverflow;
}
}
}
var _64=_image!==nil&&_imagePosition!==CPNoImage,_65=!!_DOMImageElement;
if(_64!==_65){
if(_65){
_DOMElement.removeChild(_DOMImageElement);
_DOMImageElement=nil;
_65=NO;
}else{
_DOMImageElement=document.createElement("img");
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
var _66=_DOMImageElement.style;
_66.top="0px";
_66.left="0px";
_66.position="absolute";
_66.zIndex=100;
_DOMElement.appendChild(_DOMImageElement);
_65=YES;
}
}
var _67=objj_msgSend(_5b,"bounds").size,_68={origin:{x:0,y:0},size:{width:_67.width,height:_67.height}};
if(_65){
if(!_66){
var _66=_DOMImageElement.style;
}
if(_flags&_2){
_DOMImageElement.src=objj_msgSend(_image,"filename");
}
var _69=_67.width/2,_6a=_67.height/2,_6b=objj_msgSend(_image,"size"),_6c=_6b.width,_6d=_6b.height;
if(_imageScaling===CPImageScaleAxesIndependently){
_6c=_67.width;
_6d=_67.height;
}else{
if(_imageScaling===CPImageScaleProportionallyDown){
var _6e=MIN(MIN(_67.width,_6c)/_6c,MIN(_67.height,_6d)/_6d);
_6c*=_6e;
_6d*=_6e;
}
}
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
_66.filter="alpha(opacity="+_shouldDimImage?35:100+")";
}else{
_66.opacity=_shouldDimImage?0.35:1;
}
_DOMImageElement.width=_6c;
_DOMImageElement.height=_6d;
_66.width=MAX(_6c,0)+"px";
_66.height=MAX(_6d,0)+"px";
if(_imagePosition===CPImageBelow){
_66.left=FLOOR(_69-_6c/2)+"px";
_66.top=FLOOR(_67.height-_6d)+"px";
_68.size.height=_67.height-_6d-_imageOffset;
}else{
if(_imagePosition===CPImageAbove){
_66.left=FLOOR(_69-_6c/2)+"px";
_66.top=0+"px";
_68.origin.y+=_6d+_imageOffset;
_68.size.height=_67.height-_6d-_imageOffset;
}else{
if(_imagePosition===CPImageLeft){
_66.top=FLOOR(_6a-_6d/2)+"px";
_66.left="0px";
_68.origin.x=_6c+_imageOffset;
_68.size.width-=_6c+_imageOffset;
}else{
if(_imagePosition===CPImageRight){
_66.top=FLOOR(_6a-_6d/2)+"px";
_66.left=FLOOR(_67.width-_6c)+"px";
_68.size.width-=_6c+_imageOffset;
}else{
if(_imagePosition===CPImageOnly||_imagePosition==CPImageOverlaps){
_66.top=FLOOR(_6a-_6d/2)+"px";
_66.left=FLOOR(_69-_6c/2)+"px";
}
}
}
}
}
}
if(_5e){
var _6f=(_68.origin.x),_70=(_68.origin.y),_71=(_68.size.width),_72=(_68.size.height);
if(_verticalAlignment!==CPTopVerticalTextAlignment){
if(!_textSize){
if(_lineBreakMode===CPLineBreakByCharWrapping||_lineBreakMode===CPLineBreakByWordWrapping){
_textSize=objj_msgSend(_text,"sizeWithFont:inWidth:",_font,_71);
}else{
_textSize=objj_msgSend(_text,"sizeWithFont:",_font);
}
}
if(_verticalAlignment===CPCenterVerticalTextAlignment){
_70=_70+(_72-_textSize.height)/2;
_72=_textSize.height;
}else{
_70=_70+_72-_textSize.height;
_72=_textSize.height;
}
}
_5f.top=ROUND(_70)+"px";
_5f.left=ROUND(_6f)+"px";
_5f.width=MAX(ROUND(_71),0)+"px";
_5f.height=MAX(ROUND(_72),0)+"px";
if(_62){
if(_flags&_9){
_62.color=objj_msgSend(_textShadowColor,"cssString");
}
_62.top=ROUND(_70+_textShadowOffset.height)+"px";
_62.left=ROUND(_6f+_textShadowOffset.width)+"px";
_62.width=MAX(ROUND(_71),0)+"px";
_62.height=MAX(ROUND(_72),0)+"px";
}
}
_flags=0;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_73,_74){
with(_73){
var _75=CGSizeMakeZero();
if((_imagePosition!==CPNoImage)&&_image){
var _76=objj_msgSend(_image,"size");
_75.width+=_76.width;
_75.height+=_76.height;
}
if((_imagePosition!==CPImageOnly)&&objj_msgSend(_text,"length")>0){
if(!_textSize){
_textSize=objj_msgSend(_text,"sizeWithFont:",_font?_font:objj_msgSend(CPFont,"systemFontOfSize:",12));
}
if(!_image||_imagePosition===CPImageOverlaps){
_75.width=MAX(_75.width,_textSize.width);
_75.height=MAX(_75.height,_textSize.height);
}else{
if(_imagePosition===CPImageLeft||_imagePosition===CPImageRight){
_75.width+=_textSize.width+_imageOffset;
_75.height=MAX(_75.height,_textSize.height);
}else{
if(_imagePosition===CPImageAbove||_imagePosition===CPImageBelow){
_75.width=MAX(_75.width,_textSize.width);
_75.height+=_textSize.height+_imageOffset;
}
}
}
}
objj_msgSend(_73,"setFrameSize:",_75);
}
})]);
p;29;_CPToolbarFlexibleSpaceItem.jt;794;@STATIC;1.0;i;15;CPToolbarItem.jt;756;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarFlexibleSpaceItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarFlexibleSpaceItem").super_class},"initWithItemIdentifier:",CPToolbarFlexibleSpaceItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(10000,32));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;25;_CPToolbarSeparatorItem.jt;780;@STATIC;1.0;i;15;CPToolbarItem.jt;742;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarSeparatorItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarSeparatorItem").super_class},"initWithItemIdentifier:",CPToolbarSeparatorItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(2,0));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(2,100000));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;26;_CPToolbarShowColorsItem.jt;1291;@STATIC;1.0;i;15;CPApplication.ji;15;CPToolbarItem.jt;1232;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarShowColorsItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarShowColorsItem").super_class},"initWithItemIdentifier:",CPToolbarShowColorsItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setLabel:","Colors");
objj_msgSend(_3,"setPaletteLabel:","Show Colors");
objj_msgSend(_3,"setTarget:",CPApp);
objj_msgSend(_3,"setAction:",sel_getUid("orderFrontColorPanel:"));
objj_msgSend(_3,"setImage:",objj_msgSend(CPImage,"imageNamed:",CPImageNameColorPanel));
objj_msgSend(_3,"setAlternateImage:",objj_msgSend(CPImage,"imageNamed:",CPImageNameColorPanelHighlighted));
objj_msgSend(_3,"setToolTip:","Show the Colors panel.");
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;21;_CPToolbarSpaceItem.jt;767;@STATIC;1.0;i;15;CPToolbarItem.jt;729;
objj_executeFile("CPToolbarItem.j",YES);
var _1=objj_allocateClassPair(CPToolbarItem,"_CPToolbarSpaceItem"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithItemIdentifier:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPToolbarSpaceItem").super_class},"initWithItemIdentifier:",CPToolbarSpaceItemIdentifier);
if(_3){
objj_msgSend(_3,"setMinSize:",CGSizeMake(32,32));
objj_msgSend(_3,"setMaxSize:",CGSizeMake(32,32));
}
return _3;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"init");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
}
})]);
p;12;_CPToolTip.jt;3446;@STATIC;1.0;i;13;CPTextField.ji;8;CPView.ji;10;CPWindow.jt;3382;
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPWindow.j",YES);
_CPToolTipWindowMask=1<<27;
var _1=24,_2=11;
var _3=objj_allocateClassPair(CPWindow,"_CPToolTip"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_content")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("initWithString:styleMask:"),function(_5,_6,_7,_8){
with(_5){
var _9=CPRectMake(0,0,250,_1),_a=objj_msgSend(_CPToolTip,"computeCorrectSize:text:",_9.size,_7),_b=_a[1];
_9.size=_a[0];
if(_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("_CPToolTip").super_class},"initWithContentRect:styleMask:",_9,_8)){
_b.height+=4;
_content=objj_msgSend(CPTextField,"labelWithTitle:",_7);
objj_msgSend(_content,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",_2));
objj_msgSend(_content,"setLineBreakMode:",CPLineBreakByCharWrapping);
objj_msgSend(_content,"setAlignment:",CPJustifiedTextAlignment);
objj_msgSend(_content,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_content,"setFrameOrigin:",CPPointMake(0,0));
objj_msgSend(_content,"setFrameSize:",_b);
objj_msgSend(_content,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_content,"setTextColor:",objj_msgSend(objj_msgSend(objj_msgSend(CPTheme,"defaultTheme"),"attributeWithName:forClass:","color",_CPToolTipWindowView),"value"));
objj_msgSend(objj_msgSend(_5,"contentView"),"addSubview:",_content);
objj_msgSend(_5,"setLevel:",CPStatusWindowLevel);
objj_msgSend(_5,"setAlphaValue:",0.9);
objj_msgSend(_windowView,"setNeedsDisplay:",YES);
}
return _5;
}
}),new objj_method(sel_getUid("showToolTip"),function(_c,_d){
with(_c){
var _e=objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"globalLocation"),_f=objj_msgSend(objj_msgSend(objj_msgSend(CPApp,"mainWindow"),"platformWindow"),"nativeContentRect");
_e.y+=20;
if(_e.x<0){
_e.x=5;
}
if(_e.x+CPRectGetWidth(objj_msgSend(_c,"frame"))>_f.size.width){
_e.x=_f.size.width-CPRectGetWidth(objj_msgSend(_c,"frame"))-5;
}
if(_e.y<0){
_e.y=5;
}
if(_e.y+CPRectGetHeight(objj_msgSend(_c,"frame"))>_f.size.height){
_e.y=_e.y-CPRectGetHeight(objj_msgSend(_c,"frame"))-40;
}
objj_msgSend(_c,"setFrameOrigin:",_e);
objj_msgSend(_c,"orderFront:",nil);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("toolTipWithString:"),function(_10,_11,_12){
with(_10){
var _13=objj_msgSend(objj_msgSend(_CPToolTip,"alloc"),"initWithString:styleMask:",_12,_CPToolTipWindowMask);
objj_msgSend(_13,"showToolTip");
return _13;
}
}),new objj_method(sel_getUid("computeCorrectSize:text:"),function(_14,_15,_16,_17){
with(_14){
var _18=objj_msgSend(CPFont,"systemFontOfSize:",_2),_19=objj_msgSend(_17,"sizeWithFont:",_18),_1a=objj_msgSend(_17,"sizeWithFont:inWidth:",_18,(_16.width));
if(_19.width<_16.width){
var _1b=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero()),_1c=objj_msgSend(_1b,"currentValueForThemeAttribute:","content-inset")||CGInsetMakeZero();
_1a=_19;
_1a.width+=_1c.left+_1c.right;
_16.width=_1a.width;
}
if(_1a.height<100){
_16.height=_1a.height+4;
return [_16,_1a];
}
var _1d=_16.width+((parseInt(_1a.height-100)/_1)*_1);
_1a=objj_msgSend(_17,"sizeWithFont:inWidth:",_18,_1d-4);
_16.width=_1d+2;
_16.height=_1a.height+4;
return [_16,_1a];
}
}),new objj_method(sel_getUid("_windowViewClassForStyleMask:"),function(_1e,_1f,_20){
with(_1e){
return _CPToolTipWindowView;
}
})]);
p;8;AppKit.jt;5208;@STATIC;1.0;i;9;CALayer.ji;17;CPAccordionView.ji;9;CPAlert.ji;13;CPAnimation.ji;15;CPApplication.ji;19;CPArrayController.ji;14;CPBezierPath.ji;7;CPBox.ji;11;CPBrowser.ji;10;CPButton.ji;13;CPButtonBar.ji;12;CPCheckBox.ji;7;CPCib.ji;23;CPCibBindingConnector.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;14;CPCibLoading.ji;22;CPCibOutletConnector.ji;33;CPCibRuntimeAttributesConnector.ji;20;CPCibHelpConnector.ji;12;CPClipView.ji;18;CPCollectionView.ji;22;CPCollectionViewItem.ji;9;CPColor.ji;14;CPColorPanel.ji;14;CPColorSpace.ji;13;CPColorWell.ji;17;CPCompatibility.ji;11;CPControl.ji;14;CPController.ji;10;CPCookie.ji;10;CPCursor.ji;12;CPDocument.ji;22;CPDocumentController.ji;9;CPEvent.ji;14;CPFlashMovie.ji;13;CPFlashView.ji;8;CPFont.ji;15;CPFontManager.ji;12;CPGeometry.ji;12;CPGradient.ji;12;CPGraphics.ji;9;CPImage.ji;13;CPImageView.ji;14;CPKeyBinding.ji;18;CPLevelIndicator.ji;8;CPMenu.ji;12;CPMenuItem.ji;13;CPOpenPanel.ji;15;CPOutlineView.ji;9;CPPanel.ji;14;CPPasteboard.ji;11;CPPopover.ji;15;CPPopUpButton.ji;19;CPPredicateEditor.ji;30;CPPredicateEditorRowTemplate.ji;21;CPProgressIndicator.ji;9;CPRadio.ji;13;CPResponder.ji;14;CPRuleEditor.ji;12;CPScroller.ji;14;CPScrollView.ji;15;CPSearchField.ji;19;CPSecureTextField.ji;20;CPSegmentedControl.ji;10;CPShadow.ji;10;CPSlider.ji;9;CPSound.ji;13;CPSplitView.ji;11;CPStepper.ji;15;CPTableColumn.ji;13;CPTableView.ji;11;CPTabView.ji;8;CPText.ji;13;CPTextField.ji;14;CPTokenField.ji;11;CPToolbar.ji;15;CPToolbarItem.ji;12;_CPToolTip.ji;12;CPTreeNode.ji;26;CPUserDefaultsController.ji;8;CPView.ji;17;CPViewAnimation.ji;18;CPViewController.ji;11;CPWebView.ji;13;CPWorkspace.ji;10;CPWindow.ji;20;CPWindowController.jt;3526;
objj_executeFile("CALayer.j",YES);
objj_executeFile("CPAccordionView.j",YES);
objj_executeFile("CPAlert.j",YES);
objj_executeFile("CPAnimation.j",YES);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPArrayController.j",YES);
objj_executeFile("CPBezierPath.j",YES);
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPBrowser.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPButtonBar.j",YES);
objj_executeFile("CPCheckBox.j",YES);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPCibBindingConnector.j",YES);
objj_executeFile("CPCibConnector.j",YES);
objj_executeFile("CPCibControlConnector.j",YES);
objj_executeFile("CPCibLoading.j",YES);
objj_executeFile("CPCibOutletConnector.j",YES);
objj_executeFile("CPCibRuntimeAttributesConnector.j",YES);
objj_executeFile("CPCibHelpConnector.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPCollectionView.j",YES);
objj_executeFile("CPCollectionViewItem.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPColorPanel.j",YES);
objj_executeFile("CPColorSpace.j",YES);
objj_executeFile("CPColorWell.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPController.j",YES);
objj_executeFile("CPCookie.j",YES);
objj_executeFile("CPCursor.j",YES);
objj_executeFile("CPDocument.j",YES);
objj_executeFile("CPDocumentController.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPFlashMovie.j",YES);
objj_executeFile("CPFlashView.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPFontManager.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPGradient.j",YES);
objj_executeFile("CPGraphics.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPKeyBinding.j",YES);
objj_executeFile("CPLevelIndicator.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPMenuItem.j",YES);
objj_executeFile("CPOpenPanel.j",YES);
objj_executeFile("CPOutlineView.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPPasteboard.j",YES);
objj_executeFile("CPPopover.j",YES);
objj_executeFile("CPPopUpButton.j",YES);
objj_executeFile("CPPredicateEditor.j",YES);
objj_executeFile("CPPredicateEditorRowTemplate.j",YES);
objj_executeFile("CPProgressIndicator.j",YES);
objj_executeFile("CPRadio.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPRuleEditor.j",YES);
objj_executeFile("CPScroller.j",YES);
objj_executeFile("CPScrollView.j",YES);
objj_executeFile("CPSearchField.j",YES);
objj_executeFile("CPSecureTextField.j",YES);
objj_executeFile("CPSegmentedControl.j",YES);
objj_executeFile("CPShadow.j",YES);
objj_executeFile("CPSlider.j",YES);
objj_executeFile("CPSound.j",YES);
objj_executeFile("CPSplitView.j",YES);
objj_executeFile("CPStepper.j",YES);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPTabView.j",YES);
objj_executeFile("CPText.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPTokenField.j",YES);
objj_executeFile("CPToolbar.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
objj_executeFile("_CPToolTip.j",YES);
objj_executeFile("CPTreeNode.j",YES);
objj_executeFile("CPUserDefaultsController.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPViewAnimation.j",YES);
objj_executeFile("CPViewController.j",YES);
objj_executeFile("CPWebView.j",YES);
objj_executeFile("CPWorkspace.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("CPWindowController.j",YES);
p;17;CPAccordionView.jt;10983;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;32;Foundation/CPKeyValueObserving.jI;23;Foundation/CPIndexSet.jI;21;Foundation/CPString.ji;8;CPView.ji;10;CPButton.jt;10794;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPKeyValueObserving.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPButton.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPAccordionViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier"),new objj_ivar("_view"),new objj_ivar("_label")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("identifier"),function(_3,_4){
with(_3){
return _identifier;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_5,_6,_7){
with(_5){
_identifier=_7;
}
}),new objj_method(sel_getUid("view"),function(_8,_9){
with(_8){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_a,_b,_c){
with(_a){
_view=_c;
}
}),new objj_method(sel_getUid("label"),function(_d,_e){
with(_d){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_f,_10,_11){
with(_f){
_label=_11;
}
}),new objj_method(sel_getUid("init"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_14,_15,_16){
with(_14){
_14=objj_msgSendSuper({receiver:_14,super_class:objj_getClass("CPAccordionViewItem").super_class},"init");
if(_14){
objj_msgSend(_14,"setIdentifier:",_16);
}
return _14;
}
})]);
var _1=objj_allocateClassPair(CPView,"CPAccordionView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_dirtyItemIndex"),new objj_ivar("_itemHeaderPrototype"),new objj_ivar("_items"),new objj_ivar("_itemViews"),new objj_ivar("_expandedItemIndexes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_17,_18,_19){
with(_17){
_17=objj_msgSendSuper({receiver:_17,super_class:objj_getClass("CPAccordionView").super_class},"initWithFrame:",_19);
if(_17){
_items=[];
_itemViews=[];
_expandedItemIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_17,"setItemHeaderPrototype:",objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:100,height:24}}));
}
return _17;
}
}),new objj_method(sel_getUid("setItemHeaderPrototype:"),function(_1a,_1b,_1c){
with(_1a){
_itemHeaderPrototype=_1c;
}
}),new objj_method(sel_getUid("itemHeaderPrototype"),function(_1d,_1e){
with(_1d){
return _itemHeaderPrototype;
}
}),new objj_method(sel_getUid("items"),function(_1f,_20){
with(_1f){
return _items;
}
}),new objj_method(sel_getUid("addItem:"),function(_21,_22,_23){
with(_21){
objj_msgSend(_21,"insertItem:atIndex:",_23,_items.length);
}
}),new objj_method(sel_getUid("insertItem:atIndex:"),function(_24,_25,_26,_27){
with(_24){
objj_msgSend(_expandedItemIndexes,"addIndex:",_27);
var _28=objj_msgSend(objj_msgSend(_CPAccordionItemView,"alloc"),"initWithAccordionView:",_24);
objj_msgSend(_28,"setIndex:",_27);
objj_msgSend(_28,"setLabel:",objj_msgSend(_26,"label"));
objj_msgSend(_28,"setContentView:",objj_msgSend(_26,"view"));
objj_msgSend(_24,"addSubview:",_28);
objj_msgSend(_items,"insertObject:atIndex:",_26,_27);
objj_msgSend(_itemViews,"insertObject:atIndex:",_28,_27);
objj_msgSend(_24,"_invalidateItemsStartingAtIndex:",_27);
objj_msgSend(_24,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeItem:"),function(_29,_2a,_2b){
with(_29){
objj_msgSend(_29,"removeItemAtIndex:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_2b));
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_expandedItemIndexes,"removeIndex:",_2e);
objj_msgSend(_itemViews[_2e],"removeFromSuperview");
objj_msgSend(_items,"removeObjectAtIndex:",_2e);
objj_msgSend(_itemViews,"removeObjectAtIndex:",_2e);
objj_msgSend(_2c,"_invalidateItemsStartingAtIndex:",_2e);
objj_msgSend(_2c,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeAllItems"),function(_2f,_30){
with(_2f){
var _31=_items.length;
while(_31--){
objj_msgSend(_2f,"removeItemAtIndex:",_31);
}
}
}),new objj_method(sel_getUid("expandItemAtIndex:"),function(_32,_33,_34){
with(_32){
if(!objj_msgSend(_itemViews[_34],"isCollapsed")){
return;
}
objj_msgSend(_expandedItemIndexes,"addIndex:",_34);
objj_msgSend(_itemViews[_34],"setCollapsed:",NO);
objj_msgSend(_32,"_invalidateItemsStartingAtIndex:",_34);
}
}),new objj_method(sel_getUid("collapseItemAtIndex:"),function(_35,_36,_37){
with(_35){
if(objj_msgSend(_itemViews[_37],"isCollapsed")){
return;
}
objj_msgSend(_expandedItemIndexes,"removeIndex:",_37);
objj_msgSend(_itemViews[_37],"setCollapsed:",YES);
objj_msgSend(_35,"_invalidateItemsStartingAtIndex:",_37);
}
}),new objj_method(sel_getUid("toggleItemAtIndex:"),function(_38,_39,_3a){
with(_38){
var _3b=_itemViews[_3a];
if(objj_msgSend(_3b,"isCollapsed")){
objj_msgSend(_38,"expandItemAtIndex:",_3a);
}else{
objj_msgSend(_38,"collapseItemAtIndex:",_3a);
}
}
}),new objj_method(sel_getUid("expandedItemIndexes"),function(_3c,_3d){
with(_3c){
return _expandedItemIndexes;
}
}),new objj_method(sel_getUid("collapsedItemIndexes"),function(_3e,_3f){
with(_3e){
var _40=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,_items.length));
objj_msgSend(_40,"removeIndexes:",_expandedIndexes);
return _40;
}
}),new objj_method(sel_getUid("setEnabled:forItemAtIndex:"),function(_41,_42,_43,_44){
with(_41){
var _45=_itemViews[_44];
if(!_45){
return;
}
if(!_43){
objj_msgSend(_41,"collapseItemAtIndex:",_44);
}else{
objj_msgSend(_41,"expandItemAtIndex:",_44);
}
objj_msgSend(_45,"setEnabled:",_43);
}
}),new objj_method(sel_getUid("_invalidateItemsStartingAtIndex:"),function(_46,_47,_48){
with(_46){
if(_dirtyItemIndex===CPNotFound){
_dirtyItemIndex=_48;
}
_dirtyItemIndex=MIN(_dirtyItemIndex,_48);
objj_msgSend(_46,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_49,_4a,_4b){
with(_49){
var _4c=(objj_msgSend(_49,"frame").size.width);
objj_msgSendSuper({receiver:_49,super_class:objj_getClass("CPAccordionView").super_class},"setFrameSize:",_4b);
if(_4c!==(objj_msgSend(_49,"frame").size.width)){
objj_msgSend(_49,"_invalidateItemsStartingAtIndex:",0);
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_4d,_4e){
with(_4d){
if(_items.length<=0){
return objj_msgSend(_4d,"setFrameSize:",{width:(objj_msgSend(_4d,"frame").size.width),height:0});
}
if(_dirtyItemIndex===CPNotFound){
return;
}
_dirtyItemIndex=MIN(_dirtyItemIndex,_items.length-1);
var _4f=_dirtyItemIndex,_50=_itemViews.length,_51=(objj_msgSend(_4d,"bounds").size.width),y=_4f>0?CGRectGetMaxY(objj_msgSend(_itemViews[_4f-1],"frame")):0;
_dirtyItemIndex=CPNotFound;
for(;_4f<_50;++_4f){
var _52=_itemViews[_4f];
objj_msgSend(_52,"setFrameY:width:",y,_51);
y=CGRectGetMaxY(objj_msgSend(_52,"frame"));
}
objj_msgSend(_4d,"setFrameSize:",{width:(objj_msgSend(_4d,"frame").size.width),height:y});
}
})]);
var _1=objj_allocateClassPair(CPView,"_CPAccordionItemView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_accordionView"),new objj_ivar("_isCollapsed"),new objj_ivar("_index"),new objj_ivar("_headerView"),new objj_ivar("_contentView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isCollapsed"),function(_53,_54){
with(_53){
return _isCollapsed;
}
}),new objj_method(sel_getUid("setCollapsed:"),function(_55,_56,_57){
with(_55){
_isCollapsed=_57;
}
}),new objj_method(sel_getUid("index"),function(_58,_59){
with(_58){
return _index;
}
}),new objj_method(sel_getUid("setIndex:"),function(_5a,_5b,_5c){
with(_5a){
_index=_5c;
}
}),new objj_method(sel_getUid("initWithAccordionView:"),function(_5d,_5e,_5f){
with(_5d){
_5d=objj_msgSendSuper({receiver:_5d,super_class:objj_getClass("_CPAccordionItemView").super_class},"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
if(_5d){
_accordionView=_5f;
_isCollapsed=NO;
var _60=objj_msgSend(_5d,"bounds");
_headerView=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",objj_msgSend(_accordionView,"itemHeaderPrototype")));
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setTarget:"))&&objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_headerView,"setTarget:",_5d);
objj_msgSend(_headerView,"setAction:",sel_getUid("toggle:"));
}
objj_msgSend(_5d,"addSubview:",_headerView);
}
return _5d;
}
}),new objj_method(sel_getUid("toggle:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_accordionView,"toggleItemAtIndex:",objj_msgSend(_61,"index"));
}
}),new objj_method(sel_getUid("setLabel:"),function(_64,_65,_66){
with(_64){
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setTitle:"))){
objj_msgSend(_headerView,"setTitle:",_66);
}else{
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setLabel:"))){
objj_msgSend(_headerView,"setLabel:",_66);
}else{
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setStringValue:"))){
objj_msgSend(_headerView,"setStringValue:",_66);
}
}
}
}
}),new objj_method(sel_getUid("setEnabled:"),function(_67,_68,_69){
with(_67){
if(objj_msgSend(_headerView,"respondsToSelector:",sel_getUid("setEnabled:"))){
objj_msgSend(_headerView,"setEnabled:",_69);
}
}
}),new objj_method(sel_getUid("setContentView:"),function(_6a,_6b,_6c){
with(_6a){
if(_contentView===_6c){
return;
}
objj_msgSend(_contentView,"removeObserver:forKeyPath:",_6a,"frame");
objj_msgSend(_contentView,"removeFromSuperview");
_contentView=_6c;
objj_msgSend(_contentView,"addObserver:forKeyPath:options:context:",_6a,"frame",CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,NULL);
objj_msgSend(_6a,"addSubview:",_contentView);
objj_msgSend(_accordionView,"_invalidateItemsStartingAtIndex:",objj_msgSend(_6a,"index"));
}
}),new objj_method(sel_getUid("setFrameY:width:"),function(_6d,_6e,aY,_6f){
with(_6d){
var _70=(objj_msgSend(_headerView,"frame").size.height);
objj_msgSend(_headerView,"setFrameSize:",{width:_6f,height:_70});
objj_msgSend(_contentView,"setFrameOrigin:",{x:0,y:_70});
if(objj_msgSend(_6d,"isCollapsed")){
objj_msgSend(_6d,"setFrame:",{origin:{x:0,y:aY},size:{width:_6f,height:_70}});
}else{
var _71=(objj_msgSend(_contentView,"frame").size.height);
objj_msgSend(_contentView,"setFrameSize:",{width:_6f,height:_71});
objj_msgSend(_6d,"setFrame:",{origin:{x:0,y:aY},size:{width:_6f,height:_71+_70}});
}
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_72,_73,_74){
with(_72){
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_75,_76,_77,_78,_79,_7a){
with(_75){
if(_77==="frame"&&!CGRectEqualToRect(objj_msgSend(_79,"objectForKey:",CPKeyValueChangeOldKey),objj_msgSend(_79,"objectForKey:",CPKeyValueChangeNewKey))){
objj_msgSend(_accordionView,"_invalidateItemsStartingAtIndex:",objj_msgSend(_75,"index"));
}
}
})]);
p;9;CPAlert.jt;19202;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;15;CPApplication.ji;10;CPButton.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;13;CPImageView.ji;9;CPPanel.ji;13;CPTextField.jt;19008;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPTextField.j",YES);
CPWarningAlertStyle=0;
CPInformationalAlertStyle=1;
CPCriticalAlertStyle=2;
var _1=objj_allocateClassPair(CPView,"CPAlert"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_showHelp"),new objj_ivar("_showSuppressionButton"),new objj_ivar("_alertStyle"),new objj_ivar("_title"),new objj_ivar("_accessoryView"),new objj_ivar("_icon"),new objj_ivar("_buttons"),new objj_ivar("_suppressionButton"),new objj_ivar("_delegate"),new objj_ivar("_modalDelegate"),new objj_ivar("_didEndSelector"),new objj_ivar("_window"),new objj_ivar("_defaultWindowStyle"),new objj_ivar("_alertImageView"),new objj_ivar("_informativeLabel"),new objj_ivar("_messageLabel"),new objj_ivar("_alertHelpButton"),new objj_ivar("_needsLayout")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("showsHelp"),function(_3,_4){
with(_3){
return _showHelp;
}
}),new objj_method(sel_getUid("setShowsHelp:"),function(_5,_6,_7){
with(_5){
_showHelp=_7;
}
}),new objj_method(sel_getUid("showsSuppressionButton"),function(_8,_9){
with(_8){
return _showSuppressionButton;
}
}),new objj_method(sel_getUid("setShowsSuppressionButton:"),function(_a,_b,_c){
with(_a){
_showSuppressionButton=_c;
}
}),new objj_method(sel_getUid("alertStyle"),function(_d,_e){
with(_d){
return _alertStyle;
}
}),new objj_method(sel_getUid("setAlertStyle:"),function(_f,_10,_11){
with(_f){
_alertStyle=_11;
}
}),new objj_method(sel_getUid("title"),function(_12,_13){
with(_12){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_14,_15,_16){
with(_14){
_title=_16;
}
}),new objj_method(sel_getUid("accessoryView"),function(_17,_18){
with(_17){
return _accessoryView;
}
}),new objj_method(sel_getUid("setAccessoryView:"),function(_19,_1a,_1b){
with(_19){
_accessoryView=_1b;
}
}),new objj_method(sel_getUid("icon"),function(_1c,_1d){
with(_1c){
return _icon;
}
}),new objj_method(sel_getUid("setIcon:"),function(_1e,_1f,_20){
with(_1e){
_icon=_20;
}
}),new objj_method(sel_getUid("buttons"),function(_21,_22){
with(_21){
return _buttons;
}
}),new objj_method(sel_getUid("suppressionButton"),function(_23,_24){
with(_23){
return _suppressionButton;
}
}),new objj_method(sel_getUid("delegate"),function(_25,_26){
with(_25){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_27,_28,_29){
with(_27){
_delegate=_29;
}
}),new objj_method(sel_getUid("window"),function(_2a,_2b){
with(_2a){
return _window;
}
}),new objj_method(sel_getUid("init"),function(_2c,_2d){
with(_2c){
_2c=objj_msgSendSuper({receiver:_2c,super_class:objj_getClass("CPAlert").super_class},"init");
if(_2c){
_buttons=[];
_alertStyle=CPWarningAlertStyle;
_showHelp=NO;
_needsLayout=YES;
_defaultWindowStyle=CPTitledWindowMask;
_messageLabel=objj_msgSend(CPTextField,"labelWithTitle:","Alert");
_alertImageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"init");
_informativeLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"init");
_suppressionButton=objj_msgSend(CPCheckBox,"checkBoxWithTitle:","Do not show this message again");
_alertHelpButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,16,16));
objj_msgSend(_alertHelpButton,"setTarget:",_2c);
objj_msgSend(_alertHelpButton,"setAction:",sel_getUid("_showHelp:"));
}
return _2c;
}
}),new objj_method(sel_getUid("setTheme:"),function(_2e,_2f,_30){
with(_2e){
if(_30===objj_msgSend(_2e,"theme")){
return;
}
if(_30===objj_msgSend(CPTheme,"defaultHudTheme")){
_defaultWindowStyle=CPTitledWindowMask|CPHUDBackgroundWindowMask;
}else{
_defaultWindowStyle=CPTitledWindowMask;
}
_window=nil;
_needsLayout=YES;
objj_msgSendSuper({receiver:_2e,super_class:objj_getClass("CPAlert").super_class},"setTheme:",_30);
}
}),new objj_method(sel_getUid("setWindowStyle:"),function(_31,_32,_33){
with(_31){
CPLog.warn("DEPRECATED: setWindowStyle: is deprecated. use setTheme: instead");
objj_msgSend(_31,"setTheme:",(_33===CPHUDBackgroundWindowMask)?objj_msgSend(CPTheme,"defaultHudTheme"):objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("windowStyle"),function(_34,_35){
with(_34){
CPLog.warn("DEPRECATED: windowStyle: is deprecated. use theme instead");
return _defaultWindowStyle;
}
}),new objj_method(sel_getUid("setMessageText:"),function(_36,_37,_38){
with(_36){
objj_msgSend(_messageLabel,"setStringValue:",_38);
_needsLayout=YES;
}
}),new objj_method(sel_getUid("messageText"),function(_39,_3a){
with(_39){
return objj_msgSend(_messageLabel,"stringValue");
}
}),new objj_method(sel_getUid("setInformativeText:"),function(_3b,_3c,_3d){
with(_3b){
objj_msgSend(_informativeLabel,"setStringValue:",_3d);
_needsLayout=YES;
}
}),new objj_method(sel_getUid("informativeText"),function(_3e,_3f){
with(_3e){
return objj_msgSend(_informativeLabel,"stringValue");
}
}),new objj_method(sel_getUid("setTitle:"),function(_40,_41,_42){
with(_40){
_title=_42;
objj_msgSend(_window,"setTitle:",_42);
}
}),new objj_method(sel_getUid("setAccessoryView:"),function(_43,_44,_45){
with(_43){
_accessoryView=_45;
_needsLayout=YES;
}
}),new objj_method(sel_getUid("setShowsSuppressionButton:"),function(_46,_47,_48){
with(_46){
_showSuppressionButton=_48;
_needsLayout=YES;
}
}),new objj_method(sel_getUid("addButtonWithTitle:"),function(_49,_4a,_4b){
with(_49){
var _4c=objj_msgSend(objj_msgSend(_window,"contentView"),"bounds"),_4d=objj_msgSend(_buttons,"count"),_4e=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_4e,"setTitle:",_4b);
objj_msgSend(_4e,"setTag:",_4d);
objj_msgSend(_4e,"setTarget:",_49);
objj_msgSend(_4e,"setAction:",sel_getUid("_takeReturnCodeFrom:"));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_4e);
if(_4d==0){
objj_msgSend(_4e,"setKeyEquivalent:",CPCarriageReturnCharacter);
}else{
if(objj_msgSend(_4b,"lowercaseString")==="cancel"){
objj_msgSend(_4e,"setKeyEquivalent:",CPEscapeFunctionKey);
}
}
objj_msgSend(_buttons,"insertObject:atIndex:",_4e,0);
}
}),new objj_method(sel_getUid("_layoutMessageView"),function(_4f,_50){
with(_4f){
var _51=objj_msgSend(_4f,"currentValueForThemeAttribute:","content-inset"),_52=6,_53,_54;
objj_msgSend(_messageLabel,"setTextColor:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-color"));
objj_msgSend(_messageLabel,"setFont:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-font"));
objj_msgSend(_messageLabel,"setTextShadowColor:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-shadow-color"));
objj_msgSend(_messageLabel,"setTextShadowOffset:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-shadow-offset"));
objj_msgSend(_messageLabel,"setAlignment:",objj_msgSend(_4f,"currentValueForThemeAttribute:","message-text-alignment"));
objj_msgSend(_messageLabel,"setLineBreakMode:",CPLineBreakByWordWrapping);
_53=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_51.left-_51.right;
_54=objj_msgSend(objj_msgSend(_messageLabel,"stringValue"),"sizeWithFont:inWidth:",objj_msgSend(_messageLabel,"font"),_53);
objj_msgSend(_messageLabel,"setFrame:",CGRectMake(_51.left,_51.top,_54.width,_54.height+_52));
}
}),new objj_method(sel_getUid("_layoutInformativeView"),function(_55,_56){
with(_55){
var _57=objj_msgSend(_55,"currentValueForThemeAttribute:","content-inset"),_58=objj_msgSend(_55,"currentValueForThemeAttribute:","default-elements-margin"),_59=6,_5a,_5b,_5c;
objj_msgSend(_informativeLabel,"setTextColor:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-color"));
objj_msgSend(_informativeLabel,"setFont:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-font"));
objj_msgSend(_informativeLabel,"setTextShadowColor:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-shadow-color"));
objj_msgSend(_informativeLabel,"setTextShadowOffset:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-shadow-offset"));
objj_msgSend(_informativeLabel,"setAlignment:",objj_msgSend(_55,"currentValueForThemeAttribute:","informative-text-alignment"));
objj_msgSend(_informativeLabel,"setLineBreakMode:",CPLineBreakByWordWrapping);
_5a=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_57.left-_57.right;
_5b=objj_msgSend(_messageLabel,"frameOrigin").y+objj_msgSend(_messageLabel,"frameSize").height+_58;
_5c=objj_msgSend(objj_msgSend(_informativeLabel,"stringValue"),"sizeWithFont:inWidth:",objj_msgSend(_informativeLabel,"font"),_5a);
objj_msgSend(_informativeLabel,"setFrame:",CGRectMake(_57.left,_5b,_5c.width,_5c.height+_59));
}
}),new objj_method(sel_getUid("_layoutAccessoryView"),function(_5d,_5e){
with(_5d){
if(!_accessoryView){
return;
}
var _5f=objj_msgSend(_5d,"currentValueForThemeAttribute:","content-inset"),_60=objj_msgSend(_5d,"currentValueForThemeAttribute:","default-elements-margin"),_61=CGRectGetWidth(objj_msgSend(objj_msgSend(_window,"contentView"),"frame"))-_5f.left-_5f.right,_62=CGRectGetMaxY(objj_msgSend(_informativeLabel,"frame"))+_60;
objj_msgSend(_accessoryView,"setFrameOrigin:",CGPointMake(_5f.left,_62));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_accessoryView);
}
}),new objj_method(sel_getUid("_layoutSuppressionButton"),function(_63,_64){
with(_63){
if(!_showSuppressionButton){
return;
}
var _65=objj_msgSend(_63,"currentValueForThemeAttribute:","content-inset"),_66=objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-x-offset"),_67=objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-y-offset"),_68=objj_msgSend(_63,"currentValueForThemeAttribute:","default-elements-margin"),_69=CGRectGetMaxY(objj_msgSend((_accessoryView||_informativeLabel),"frame"))+_68+_67;
objj_msgSend(_suppressionButton,"setTextColor:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-color"));
objj_msgSend(_suppressionButton,"setFont:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-font"));
objj_msgSend(_suppressionButton,"setTextShadowColor:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-shadow-color"));
objj_msgSend(_suppressionButton,"setTextShadowOffset:",objj_msgSend(_63,"currentValueForThemeAttribute:","suppression-button-text-shadow-offset"));
objj_msgSend(_suppressionButton,"sizeToFit");
objj_msgSend(_suppressionButton,"setFrameOrigin:",CGPointMake(_65.left+_66,_69));
objj_msgSend(objj_msgSend(_window,"contentView"),"addSubview:",_suppressionButton);
}
}),new objj_method(sel_getUid("_layoutButtonsFromView:"),function(_6a,_6b,_6c){
with(_6a){
var _6d=objj_msgSend(_6a,"currentValueForThemeAttribute:","content-inset"),_6e=objj_msgSend(_6a,"currentValueForThemeAttribute:","size"),_6f=objj_msgSend(_6a,"currentValueForThemeAttribute:","button-offset"),_70=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image-left-offset"),_71=objj_msgSend(_buttons,"objectAtIndex:",0),_72=objj_msgSend(_6a,"currentValueForThemeAttribute:","default-elements-margin"),_73=objj_msgSend(objj_msgSend(_window,"contentView"),"frame").size,_74,_75;
objj_msgSend(_71,"setTheme:",objj_msgSend(_6a,"theme"));
objj_msgSend(_71,"sizeToFit");
_73.height=CGRectGetMaxY(objj_msgSend(_6c,"frame"))+_72+objj_msgSend(_71,"frameSize").height;
if(_73.height<_6e.height){
_73.height=_6e.height;
}
_74=_73.height-objj_msgSend(_71,"frameSize").height+_6f;
_75=_73.width-_6d.right;
for(var i=objj_msgSend(_buttons,"count")-1;i>=0;i--){
var _76=_buttons[i];
objj_msgSend(_76,"setTheme:",objj_msgSend(_6a,"theme"));
objj_msgSend(_76,"sizeToFit");
var _77=objj_msgSend(_76,"frame"),_78=MAX(80,CGRectGetWidth(_77)),_79=CGRectGetHeight(_77);
_75-=_78;
objj_msgSend(_76,"setFrame:",CGRectMake(_75,_74,_78,_79));
_75-=10;
}
if(_showHelp){
var _7a=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image"),_7b=objj_msgSend(_6a,"currentValueForThemeAttribute:","help-image-pressed"),_7c=_7a?objj_msgSend(_7a,"size"):CGSizeMakeZero(),_7d=CGRectMake(_70,_74,_7c.width,_7c.height);
objj_msgSend(_alertHelpButton,"setImage:",_7a);
objj_msgSend(_alertHelpButton,"setAlternateImage:",_7b);
objj_msgSend(_alertHelpButton,"setBordered:",NO);
objj_msgSend(_alertHelpButton,"setFrame:",_7d);
}
_73.height+=objj_msgSend(_71,"frameSize").height+_6d.bottom+_6f;
return _73;
}
}),new objj_method(sel_getUid("layout"),function(_7e,_7f){
with(_7e){
if(!_needsLayout){
return;
}
if(!_window){
objj_msgSend(_7e,"_createWindowWithStyle:",nil);
}
var _80=objj_msgSend(_7e,"currentValueForThemeAttribute:","image-offset"),_81=_icon,_82;
if(!_81){
switch(_alertStyle){
case CPWarningAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","warning-image");
break;
case CPInformationalAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","information-image");
break;
case CPCriticalAlertStyle:
_81=objj_msgSend(_7e,"currentValueForThemeAttribute:","error-image");
break;
}
}
objj_msgSend(_alertImageView,"setImage:",_81);
var _83=_81?objj_msgSend(_81,"size"):CGSizeMakeZero();
objj_msgSend(_alertImageView,"setFrame:",CGRectMake(_80.x,_80.y,_83.width,_83.height));
objj_msgSend(_7e,"_layoutMessageView");
objj_msgSend(_7e,"_layoutInformativeView");
objj_msgSend(_7e,"_layoutAccessoryView");
objj_msgSend(_7e,"_layoutSuppressionButton");
var _84=_informativeLabel;
if(_showSuppressionButton){
_84=_suppressionButton;
}else{
if(_accessoryView){
_84=_accessoryView;
}
}
_82=objj_msgSend(_7e,"_layoutButtonsFromView:",_84);
if(objj_msgSend(_window,"styleMask")&CPDocModalWindowMask){
_82.height-=26;
}
objj_msgSend(_window,"setFrameSize:",_82);
objj_msgSend(_window,"center");
_needsLayout=NO;
}
}),new objj_method(sel_getUid("runModal"),function(_85,_86){
with(_85){
if(!(objj_msgSend(_window,"styleMask")&_defaultWindowStyle)){
_needsLayout=YES;
objj_msgSend(_85,"_createWindowWithStyle:",_defaultWindowStyle);
}
objj_msgSend(_85,"layout");
objj_msgSend(CPApp,"runModalForWindow:",_window);
}
}),new objj_method(sel_getUid("beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:"),function(_87,_88,_89,_8a,_8b,_8c){
with(_87){
if(!(objj_msgSend(_window,"styleMask")&CPDocModalWindowMask)){
_needsLayout=YES;
objj_msgSend(_87,"_createWindowWithStyle:",CPDocModalWindowMask);
}
objj_msgSend(_87,"layout");
_modalDelegate=_8a;
_didEndSelector=_8b;
objj_msgSend(CPApp,"beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:",_window,_89,_87,sel_getUid("_alertDidEnd:returnCode:contextInfo:"),_8c);
}
}),new objj_method(sel_getUid("beginSheetModalForWindow:"),function(_8d,_8e,_8f){
with(_8d){
objj_msgSend(_8d,"beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:",_8f,nil,nil,nil);
}
}),new objj_method(sel_getUid("_createWindowWithStyle:"),function(_90,_91,_92){
with(_90){
var _93=CGRectMakeZero();
_93.size=objj_msgSend(_90,"currentValueForThemeAttribute:","size");
_window=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",_93,_92||_defaultWindowStyle);
if(_title){
objj_msgSend(_window,"setTitle:",_title);
}
var _94=objj_msgSend(_window,"contentView"),_95=objj_msgSend(_buttons,"count");
if(_95){
while(_95--){
objj_msgSend(_94,"addSubview:",_buttons[_95]);
}
}else{
objj_msgSend(_90,"addButtonWithTitle:","OK");
}
objj_msgSend(_94,"addSubview:",_messageLabel);
objj_msgSend(_94,"addSubview:",_alertImageView);
objj_msgSend(_94,"addSubview:",_informativeLabel);
if(_showHelp){
objj_msgSend(_94,"addSubview:",_alertHelpButton);
}
}
}),new objj_method(sel_getUid("_showHelp:"),function(_96,_97,_98){
with(_96){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("alertShowHelp:"))){
objj_msgSend(_delegate,"alertShowHelp:",_96);
}
}
}),new objj_method(sel_getUid("_takeReturnCodeFrom:"),function(_99,_9a,_9b){
with(_99){
if(objj_msgSend(_window,"isSheet")){
objj_msgSend(CPApp,"endSheet:returnCode:",_window,objj_msgSend(_9b,"tag"));
}else{
objj_msgSend(CPApp,"abortModal");
objj_msgSend(_window,"close");
objj_msgSend(_99,"_alertDidEnd:returnCode:contextInfo:",_window,objj_msgSend(_9b,"tag"),nil);
}
}
}),new objj_method(sel_getUid("_alertDidEnd:returnCode:contextInfo:"),function(_9c,_9d,_9e,_9f,_a0){
with(_9c){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("alertDidEnd:returnCode:"))){
objj_msgSend(_delegate,"alertDidEnd:returnCode:",_9c,_9f);
}
if(_didEndSelector){
objj_msgSend(_modalDelegate,_didEndSelector,_9c,_9f,_a0);
}
_modalDelegate=nil;
_didEndSelector=nil;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("alertWithMessageText:defaultButton:alternateButton:otherButton:informativeTextWithFormat:"),function(_a1,_a2,_a3,_a4,_a5,_a6,_a7){
with(_a1){
var _a8=objj_msgSend(objj_msgSend(_a1,"alloc"),"init");
objj_msgSend(_a8,"setMessageText:",_a3);
objj_msgSend(_a8,"addButtonWithTitle:",_a4);
if(_a5){
objj_msgSend(_a8,"addButtonWithTitle:",_a5);
}
if(_a6){
objj_msgSend(_a8,"addButtonWithTitle:",_a6);
}
if(_a7){
objj_msgSend(_a8,"setInformativeText:",_a7);
}
return _a8;
}
}),new objj_method(sel_getUid("alertWithError:"),function(_a9,_aa,_ab){
with(_a9){
var _ac=objj_msgSend(objj_msgSend(_a9,"alloc"),"init");
objj_msgSend(_ac,"setMessageText:",_ab);
objj_msgSend(_ac,"setAlertStyle:",CPCriticalAlertStyle);
return _ac;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_ad,_ae){
with(_ad){
return "alert";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_af,_b0){
with(_af){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CGSizeMake(400,110),CGInsetMake(15,15,15,50),6,10,CPJustifiedTextAlignment,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"boldSystemFontOfSize:",13),objj_msgSend(CPNull,"null"),CGSizeMakeZero(),CPJustifiedTextAlignment,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),CGSizeMakeZero(),CGPointMake(15,12),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),0,0,3,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),0],["size","content-inset","informative-offset","button-offset","message-text-alignment","message-text-color","message-text-font","message-text-shadow-color","message-text-shadow-offset","informative-text-alignment","informative-text-color","informative-text-font","informative-text-shadow-color","informative-text-shadow-offset","image-offset","information-image","warning-image","error-image","help-image","help-image-left-offset","help-image-pressed","suppression-button-y-offset","suppression-button-x-offset","default-elements-margin","suppression-button-text-color","suppression-button-text-font","suppression-button-text-shadow-color","suppression-button-text-shadow-offset"]);
}
})]);
p;13;CPAnimation.jt;5473;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPTimer.ji;23;CAMediaTimingFunction.jt;5375;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPTimer.j",NO);
objj_executeFile("CAMediaTimingFunction.j",YES);
CPAnimationEaseInOut=0;
CPAnimationEaseIn=1;
CPAnimationEaseOut=2;
CPAnimationLinear=3;
ACTUAL_FRAME_RATE=0;
var _1=objj_allocateClassPair(CPObject,"CPAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_lastTime"),new objj_ivar("_duration"),new objj_ivar("_animationCurve"),new objj_ivar("_timingFunction"),new objj_ivar("_frameRate"),new objj_ivar("_progress"),new objj_ivar("_delegate"),new objj_ivar("_timer")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithDuration:animationCurve:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPAnimation").super_class},"init");
if(_3){
_progress=0;
_duration=MAX(0,_5);
_frameRate=60;
objj_msgSend(_3,"setAnimationCurve:",_6);
}
return _3;
}
}),new objj_method(sel_getUid("setAnimationCurve:"),function(_7,_8,_9){
with(_7){
var _a;
switch(_9){
case CPAnimationEaseInOut:
_a=kCAMediaTimingFunctionEaseInEaseOut;
break;
case CPAnimationEaseIn:
_a=kCAMediaTimingFunctionEaseIn;
break;
case CPAnimationEaseOut:
_a=kCAMediaTimingFunctionEaseOut;
break;
case CPAnimationLinear:
_a=kCAMediaTimingFunctionLinear;
break;
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Invalid value provided for animation curve");
break;
}
_animationCurve=_9;
_timingFunction=objj_msgSend(CAMediaTimingFunction,"functionWithName:",_a);
}
}),new objj_method(sel_getUid("animationCurve"),function(_b,_c){
with(_b){
return _animationCurve;
}
}),new objj_method(sel_getUid("setDuration:"),function(_d,_e,_f){
with(_d){
if(_f<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"aDuration can't be negative");
}
_duration=_f;
}
}),new objj_method(sel_getUid("duration"),function(_10,_11){
with(_10){
return _duration;
}
}),new objj_method(sel_getUid("setFrameRate:"),function(_12,_13,_14){
with(_12){
if(_14<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"frameRate can't be negative");
}
_frameRate=_14;
}
}),new objj_method(sel_getUid("frameRate"),function(_15,_16){
with(_15){
return _frameRate;
}
}),new objj_method(sel_getUid("delegate"),function(_17,_18){
with(_17){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_19,_1a,_1b){
with(_19){
_delegate=_1b;
}
}),new objj_method(sel_getUid("startAnimation"),function(_1c,_1d){
with(_1c){
if(_timer||_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationShouldStart:"))&&!objj_msgSend(_delegate,"animationShouldStart:",_1c)){
return;
}
if(_progress===1){
_progress=0;
}
ACTUAL_FRAME_RATE=0;
_lastTime=new Date();
_timer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_1c,sel_getUid("animationTimerDidFire:"),nil,YES);
}
}),new objj_method(sel_getUid("animationTimerDidFire:"),function(_1e,_1f,_20){
with(_1e){
var _21=new Date(),_22=MIN(1,objj_msgSend(_1e,"currentProgress")+(_21-_lastTime)/(_duration*1000));
_lastTime=_21;
++ACTUAL_FRAME_RATE;
objj_msgSend(_1e,"setCurrentProgress:",_22);
if(_22===1){
objj_msgSend(_timer,"invalidate");
_timer=nil;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationDidEnd:"))){
objj_msgSend(_delegate,"animationDidEnd:",_1e);
}
}
}
}),new objj_method(sel_getUid("stopAnimation"),function(_23,_24){
with(_23){
if(!_timer){
return;
}
objj_msgSend(_timer,"invalidate");
_timer=nil;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animationDidStop:"))){
objj_msgSend(_delegate,"animationDidStop:",_23);
}
}
}),new objj_method(sel_getUid("isAnimating"),function(_25,_26){
with(_25){
return _timer;
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(_27,_28,_29){
with(_27){
_progress=_29;
}
}),new objj_method(sel_getUid("currentProgress"),function(_2a,_2b){
with(_2a){
return _progress;
}
}),new objj_method(sel_getUid("currentValue"),function(_2c,_2d){
with(_2c){
var t=objj_msgSend(_2c,"currentProgress");
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("animation:valueForProgress:"))){
return objj_msgSend(_delegate,"animation:valueForProgress:",_2c,t);
}
if(_animationCurve==CPAnimationLinear){
return t;
}
var c1=[],c2=[];
objj_msgSend(_timingFunction,"getControlPointAtIndex:values:",1,c1);
objj_msgSend(_timingFunction,"getControlPointAtIndex:values:",2,c2);
return _2e(t,c1[0],c1[1],c2[0],c2[1],_duration);
}
})]);
var _2e=_2e=function(t,p1x,p1y,p2x,p2y,_2f){
var ax=0,bx=0,cx=0,ay=0,by=0,cy=0;
sampleCurveX=function(t){
return ((ax*t+bx)*t+cx)*t;
};
sampleCurveY=function(t){
return ((ay*t+by)*t+cy)*t;
};
sampleCurveDerivativeX=function(t){
return (3*ax*t+2*bx)*t+cx;
};
solveEpsilon=function(_30){
return 1/(200*_30);
};
solve=function(x,_31){
return sampleCurveY(solveCurveX(x,_31));
};
solveCurveX=function(x,_32){
var t0,t1,t2=x,x2,d2,i=0;
for(;i<8;i++){
x2=sampleCurveX(t2)-x;
if(ABS(x2)<_32){
return t2;
}
d2=sampleCurveDerivativeX(t2);
if(ABS(d2)<0.000001){
break;
}
t2=t2-x2/d2;
}
t0=0;
t1=1;
t2=x;
if(t2<t0){
return t0;
}
if(t2>t1){
return t1;
}
while(t0<t1){
x2=sampleCurveX(t2);
if(ABS(x2-x)<_32){
return t2;
}
if(x>x2){
t0=t2;
}else{
t1=t2;
}
t2=(t1-t0)*0.5+t0;
}
return t2;
};
cx=3*p1x;
bx=3*(p2x-p1x)-cx;
ax=1-cx-bx;
cy=3*p1y;
by=3*(p2y-p1y)-cy;
ay=1-cy-by;
return solve(t,solveEpsilon(_2f));
};
p;15;CPApplication.jt;29917;@STATIC;1.0;I;21;Foundation/CPBundle.ji;17;CPCompatibility.ji;9;CPEvent.ji;8;CPMenu.ji;13;CPResponder.ji;22;CPDocumentController.ji;14;CPThemeBlend.ji;14;CPCibLoading.ji;12;CPPlatform.jt;29724;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPDocumentController.j",YES);
objj_executeFile("CPThemeBlend.j",YES);
objj_executeFile("CPCibLoading.j",YES);
objj_executeFile("CPPlatform.j",YES);
var _1="CPMainCibFile",_2="Main cib file base name";
CPApp=nil;
CPApplicationWillFinishLaunchingNotification="CPApplicationWillFinishLaunchingNotification";
CPApplicationDidFinishLaunchingNotification="CPApplicationDidFinishLaunchingNotification";
CPApplicationWillTerminateNotification="CPApplicationWillTerminateNotification";
CPApplicationWillBecomeActiveNotification="CPApplicationWillBecomeActiveNotification";
CPApplicationDidBecomeActiveNotification="CPApplicationDidBecomeActiveNotification";
CPApplicationWillResignActiveNotification="CPApplicationWillResignActiveNotification";
CPApplicationDidResignActiveNotification="CPApplicationDidResignActiveNotification";
CPTerminateNow=YES;
CPTerminateCancel=NO;
CPTerminateLater=-1;
CPRunStoppedResponse=-1000;
CPRunAbortedResponse=-1001;
CPRunContinuesResponse=-1002;
var _3=objj_allocateClassPair(CPResponder,"CPApplication"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_eventListeners"),new objj_ivar("_currentEvent"),new objj_ivar("_windows"),new objj_ivar("_keyWindow"),new objj_ivar("_mainWindow"),new objj_ivar("_previousKeyWindow"),new objj_ivar("_previousMainWindow"),new objj_ivar("_documentController"),new objj_ivar("_currentSession"),new objj_ivar("_delegate"),new objj_ivar("_finishedLaunching"),new objj_ivar("_isActive"),new objj_ivar("_namedArgs"),new objj_ivar("_args"),new objj_ivar("_fullArgsString"),new objj_ivar("_applicationIconImage"),new objj_ivar("_aboutPanel"),new objj_ivar("_themeBlend")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("themeBlend"),function(_5,_6){
with(_5){
return _themeBlend;
}
}),new objj_method(sel_getUid("setThemeBlend:"),function(_7,_8,_9){
with(_7){
_themeBlend=_9;
}
}),new objj_method(sel_getUid("init"),function(_a,_b){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPApplication").super_class},"init");
CPApp=_a;
if(_a){
_eventListeners=[];
_windows=[];
objj_msgSend(_windows,"addObject:",nil);
}
return _a;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_c,_d,_e){
with(_c){
if(_delegate==_e){
return;
}
var _f=objj_msgSend(CPNotificationCenter,"defaultCenter"),_10=[CPApplicationWillFinishLaunchingNotification,sel_getUid("applicationWillFinishLaunching:"),CPApplicationDidFinishLaunchingNotification,sel_getUid("applicationDidFinishLaunching:"),CPApplicationWillBecomeActiveNotification,sel_getUid("applicationWillBecomeActive:"),CPApplicationDidBecomeActiveNotification,sel_getUid("applicationDidBecomeActive:"),CPApplicationWillResignActiveNotification,sel_getUid("applicationWillResignActive:"),CPApplicationDidResignActiveNotification,sel_getUid("applicationDidResignActive:"),CPApplicationWillTerminateNotification,sel_getUid("applicationWillTerminate:")],_11=objj_msgSend(_10,"count");
if(_delegate){
var _12=0;
for(;_12<_11;_12+=2){
var _13=_10[_12],_14=_10[_12+1];
if(objj_msgSend(_delegate,"respondsToSelector:",_14)){
objj_msgSend(_f,"removeObserver:name:object:",_delegate,_13,_c);
}
}
}
_delegate=_e;
var _12=0;
for(;_12<_11;_12+=2){
var _13=_10[_12],_14=_10[_12+1];
if(objj_msgSend(_delegate,"respondsToSelector:",_14)){
objj_msgSend(_f,"addObserver:selector:name:object:",_delegate,_14,_13,_c);
}
}
}
}),new objj_method(sel_getUid("delegate"),function(_15,_16){
with(_15){
return _delegate;
}
}),new objj_method(sel_getUid("finishLaunching"),function(_17,_18){
with(_17){
window.status=" ";
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
var _19=objj_msgSend(CPBundle,"mainBundle"),_1a=objj_msgSend(_19,"objectForInfoDictionaryKey:","CPApplicationDelegateClass");
if(_1a){
var _1b=objj_getClass(_1a);
if(_1b){
objj_msgSend(_17,"setDelegate:",objj_msgSend(objj_msgSend(_1b,"alloc"),"init"));
}
}
var _1c=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_1c,"postNotificationName:object:",CPApplicationWillFinishLaunchingNotification,_17);
var _1d=objj_msgSend(_19,"objectForInfoDictionaryKey:","CPBundleDocumentTypes");
if(objj_msgSend(_1d,"count")>0){
_documentController=objj_msgSend(CPDocumentController,"sharedDocumentController");
}
var _1e=!!_documentController,_1f=window.cpOpeningURLStrings&&window.cpOpeningURLStrings(),_20=0,_21=objj_msgSend(_1f,"count");
for(;_20<_21;++_20){
_1e=!objj_msgSend(_17,"_openURL:",objj_msgSend(CPURL,"URLWithString:",_1f[_20]))||_1e;
}
if(_1e&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("applicationShouldOpenUntitledFile:"))){
_1e=objj_msgSend(_delegate,"applicationShouldOpenUntitledFile:",_17);
}
if(_1e){
objj_msgSend(_documentController,"newDocument:",_17);
}
objj_msgSend(_documentController,"_updateRecentDocumentsMenu");
objj_msgSend(_1c,"postNotificationName:object:",CPApplicationDidFinishLaunchingNotification,_17);
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
_finishedLaunching=YES;
}
}),new objj_method(sel_getUid("terminate:"),function(_22,_23,_24){
with(_22){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPApplicationWillTerminateNotification,_22);
if(!objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(objj_msgSend(CPDocumentController,"sharedDocumentController"),"closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:",_22,sel_getUid("_documentController:didCloseAll:context:"),nil);
}else{
objj_msgSend(objj_msgSend(objj_msgSend(_22,"keyWindow"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}),new objj_method(sel_getUid("setApplicationIconImage:"),function(_25,_26,_27){
with(_25){
_applicationIconImage=_27;
}
}),new objj_method(sel_getUid("applicationIconImage"),function(_28,_29){
with(_28){
if(_applicationIconImage){
return _applicationIconImage;
}
var _2a=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPApplicationIcon");
if(_2a){
_applicationIconImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",_2a);
}
return _applicationIconImage;
}
}),new objj_method(sel_getUid("orderFrontStandardAboutPanel:"),function(_2b,_2c,_2d){
with(_2b){
objj_msgSend(_2b,"orderFrontStandardAboutPanelWithOptions:",nil);
}
}),new objj_method(sel_getUid("orderFrontStandardAboutPanelWithOptions:"),function(_2e,_2f,_30){
with(_2e){
if(!_aboutPanel){
var _31=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"infoDictionary"),_32=objj_msgSend(_30,"objectForKey:","ApplicationName")||objj_msgSend(_31,"objectForKey:","CPBundleName"),_33=objj_msgSend(_30,"objectForKey:","ApplicationIcon")||objj_msgSend(_2e,"applicationIconImage"),_34=objj_msgSend(_30,"objectForKey:","Version")||objj_msgSend(_31,"objectForKey:","CPBundleVersion"),_35=objj_msgSend(_30,"objectForKey:","ApplicationVersion")||objj_msgSend(_31,"objectForKey:","CPBundleShortVersionString"),_36=objj_msgSend(_30,"objectForKey:","Copyright")||objj_msgSend(_31,"objectForKey:","CPHumanReadableCopyright");
var _37=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindowController,"class")),"pathForResource:","AboutPanel.cib"),_38=objj_msgSend(CPWindowController,"alloc"),_38=objj_msgSend(_38,"initWithWindowCibPath:owner:",_37,_38),_39=objj_msgSend(_38,"window"),_3a=objj_msgSend(_39,"contentView"),_3b=objj_msgSend(_3a,"viewWithTag:",1),_3c=objj_msgSend(_3a,"viewWithTag:",2),_3d=objj_msgSend(_3a,"viewWithTag:",3),_3e=objj_msgSend(_3a,"viewWithTag:",4),_3f=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_2e,"class")),"pathForResource:","standardApplicationIcon.png");
objj_msgSend(_3c,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",14));
objj_msgSend(_3c,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3d,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3e,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_3b,"setImage:",_33||objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",_3f,CGSizeMake(256,256)));
objj_msgSend(_3c,"setStringValue:",_32||"");
if(_35&&_34){
objj_msgSend(_3d,"setStringValue:","Version "+_35+" ("+_34+")");
}else{
if(_35||_34){
objj_msgSend(_3d,"setStringValue:","Version "+(_35||_34));
}else{
objj_msgSend(_3d,"setStringValue:","");
}
}
objj_msgSend(_3e,"setStringValue:",_36||"");
objj_msgSend(_39,"center");
_aboutPanel=_39;
}
objj_msgSend(_aboutPanel,"orderFront:",_2e);
}
}),new objj_method(sel_getUid("_documentController:didCloseAll:context:"),function(_40,_41,_42,_43,_44){
with(_40){
if(_43){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("applicationShouldTerminate:"))){
objj_msgSend(_40,"replyToApplicationShouldTerminate:",objj_msgSend(_delegate,"applicationShouldTerminate:",_40));
}else{
objj_msgSend(_40,"replyToApplicationShouldTerminate:",YES);
}
}
}
}),new objj_method(sel_getUid("replyToApplicationShouldTerminate:"),function(_45,_46,_47){
with(_45){
if(_47==CPTerminateNow){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPApplicationWillTerminateNotification,_45);
objj_msgSend(CPPlatform,"terminateApplication");
}
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(_48,"_willBecomeActive");
objj_msgSend(CPPlatform,"activateIgnoringOtherApps:",_4a);
_isActive=YES;
objj_msgSend(_48,"_willResignActive");
}
}),new objj_method(sel_getUid("deactivate"),function(_4b,_4c){
with(_4b){
objj_msgSend(_4b,"_willResignActive");
objj_msgSend(CPPlatform,"deactivate");
_isActive=NO;
objj_msgSend(_4b,"_didResignActive");
}
}),new objj_method(sel_getUid("isActive"),function(_4d,_4e){
with(_4d){
return _isActive;
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(CPPlatform,"hideOtherApplications:",_4f);
}
}),new objj_method(sel_getUid("run"),function(_52,_53){
with(_52){
objj_msgSend(_52,"finishLaunching");
}
}),new objj_method(sel_getUid("runModalForWindow:"),function(_54,_55,_56){
with(_54){
objj_msgSend(_54,"runModalSession:",objj_msgSend(_54,"beginModalSessionForWindow:",_56));
}
}),new objj_method(sel_getUid("stopModalWithCode:"),function(_57,_58,_59){
with(_57){
if(!_currentSession){
return;
}
_currentSession._state=_59;
_currentSession=_currentSession._previous;
objj_msgSend(_57,"_removeRunModalLoop");
}
}),new objj_method(sel_getUid("_removeRunModalLoop"),function(_5a,_5b){
with(_5a){
var _5c=_eventListeners.length;
while(_5c--){
if(_eventListeners[_5c]._callback===_CPRunModalLoop){
_eventListeners.splice(_5c,1);
return;
}
}
}
}),new objj_method(sel_getUid("stopModal"),function(_5d,_5e){
with(_5d){
objj_msgSend(_5d,"stopModalWithCode:",CPRunStoppedResponse);
}
}),new objj_method(sel_getUid("abortModal"),function(_5f,_60){
with(_5f){
objj_msgSend(_5f,"stopModalWithCode:",CPRunAbortedResponse);
}
}),new objj_method(sel_getUid("beginModalSessionForWindow:"),function(_61,_62,_63){
with(_61){
return _64(_63,0);
}
}),new objj_method(sel_getUid("runModalSession:"),function(_65,_66,_67){
with(_65){
_67._previous=_currentSession;
_currentSession=_67;
var _68=_67._window;
objj_msgSend(_68,"center");
objj_msgSend(_68,"makeKeyWindow");
objj_msgSend(_68,"orderFront:",_65);
objj_msgSend(CPApp,"setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:",_CPRunModalLoop,CPAnyEventMask,nil,0,NO);
}
}),new objj_method(sel_getUid("modalWindow"),function(_69,_6a){
with(_69){
if(!_currentSession){
return nil;
}
return _currentSession._window;
}
}),new objj_method(sel_getUid("_handleKeyEquivalent:"),function(_6b,_6c,_6d){
with(_6b){
return objj_msgSend(objj_msgSend(_6b,"keyWindow"),"performKeyEquivalent:",_6d)||objj_msgSend(objj_msgSend(_6b,"mainMenu"),"performKeyEquivalent:",_6d);
}
}),new objj_method(sel_getUid("sendEvent:"),function(_6e,_6f,_70){
with(_6e){
_currentEvent=_70;
var _71=objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_willPropagateCurrentDOMEvent");
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",NO);
if(objj_msgSend(_70,"_couldBeKeyEquivalent")&&objj_msgSend(_6e,"_handleKeyEquivalent:",_70)){
var _72=objj_msgSend(_70,"characters"),_73=objj_msgSend(_70,"modifierFlags");
if((_72=="c"||_72=="x"||_72=="v")&&(_73&CPPlatformActionKeyMask)){
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
return;
}
objj_msgSend(objj_msgSend(objj_msgSend(_70,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",_71);
if(_eventListeners.length){
if(_eventListeners[_eventListeners.length-1]._mask&(1<<objj_msgSend(_70,"type"))){
_eventListeners.pop()._callback(_70);
}
return;
}
objj_msgSend(objj_msgSend(_70,"window"),"sendEvent:",_70);
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_74,_75,_76){
with(_74){
if(objj_msgSend(_delegate,"respondsToSelector:",_76)){
objj_msgSend(_delegate,"performSelector:",_76);
}else{
objj_msgSendSuper({receiver:_74,super_class:objj_getClass("CPApplication").super_class},"doCommandBySelector:",_76);
}
}
}),new objj_method(sel_getUid("keyWindow"),function(_77,_78){
with(_77){
return _keyWindow;
}
}),new objj_method(sel_getUid("mainWindow"),function(_79,_7a){
with(_79){
return _mainWindow;
}
}),new objj_method(sel_getUid("windowWithWindowNumber:"),function(_7b,_7c,_7d){
with(_7b){
return _windows[_7d];
}
}),new objj_method(sel_getUid("windows"),function(_7e,_7f){
with(_7e){
return _windows;
}
}),new objj_method(sel_getUid("orderedWindows"),function(_80,_81){
with(_80){
return CPWindowObjectList();
}
}),new objj_method(sel_getUid("hide:"),function(_82,_83,_84){
with(_82){
objj_msgSend(CPPlatform,"hide:",_82);
}
}),new objj_method(sel_getUid("mainMenu"),function(_85,_86){
with(_85){
return objj_msgSend(_85,"menu");
}
}),new objj_method(sel_getUid("setMainMenu:"),function(_87,_88,_89){
with(_87){
objj_msgSend(_87,"setMenu:",_89);
}
}),new objj_method(sel_getUid("setMenu:"),function(_8a,_8b,_8c){
with(_8a){
if(objj_msgSend(_8c,"_menuName")==="CPMainMenu"){
if(objj_msgSend(_8a,"menu")===_8c){
return;
}
objj_msgSendSuper({receiver:_8a,super_class:objj_getClass("CPApplication").super_class},"setMenu:",_8c);
if(objj_msgSend(CPPlatform,"supportsNativeMainMenu")){
window.cpSetMainMenu(objj_msgSend(_8a,"menu"));
}
}else{
objj_msgSend(_8c,"_setMenuName:","CPMainMenu");
}
}
}),new objj_method(sel_getUid("orderFrontColorPanel:"),function(_8d,_8e,_8f){
with(_8d){
objj_msgSend(objj_msgSend(CPColorPanel,"sharedColorPanel"),"orderFront:",_8d);
}
}),new objj_method(sel_getUid("tryToPerform:with:"),function(_90,_91,_92,_93){
with(_90){
if(!_92){
return NO;
}
if(objj_msgSendSuper({receiver:_90,super_class:objj_getClass("CPApplication").super_class},"tryToPerform:with:",_92,_93)){
return YES;
}
if(objj_msgSend(_delegate,"respondsToSelector:",_92)){
objj_msgSend(_delegate,"performSelector:withObject:",_92,_93);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("sendAction:to:from:"),function(_94,_95,_96,_97,_98){
with(_94){
var _99=objj_msgSend(_94,"targetForAction:to:from:",_96,_97,_98);
if(!_99){
return NO;
}
objj_msgSend(_99,"performSelector:withObject:",_96,_98);
return YES;
}
}),new objj_method(sel_getUid("targetForAction:to:from:"),function(_9a,_9b,_9c,_9d,_9e){
with(_9a){
if(!_9c){
return nil;
}
if(_9d){
return _9d;
}
return objj_msgSend(_9a,"targetForAction:",_9c);
}
}),new objj_method(sel_getUid("_targetForWindow:action:"),function(_9f,_a0,_a1,_a2){
with(_9f){
var _a3=objj_msgSend(_a1,"firstResponder"),_a4=YES;
while(_a3){
if(objj_msgSend(_a3,"respondsToSelector:",_a2)){
return _a3;
}
if(_a3==_a1){
_a4=NO;
}
_a3=objj_msgSend(_a3,"nextResponder");
}
if(_a4&&objj_msgSend(_a1,"respondsToSelector:",_a2)){
return _a1;
}
var _a5=objj_msgSend(_a1,"delegate");
if(objj_msgSend(_a5,"respondsToSelector:",_a2)){
return _a5;
}
var _a6=objj_msgSend(_a1,"windowController");
if(objj_msgSend(_a6,"respondsToSelector:",_a2)){
return _a6;
}
var _a7=objj_msgSend(_a6,"document");
if(_a7!==_a5&&objj_msgSend(_a7,"respondsToSelector:",_a2)){
return _a7;
}
return nil;
}
}),new objj_method(sel_getUid("targetForAction:"),function(_a8,_a9,_aa){
with(_a8){
if(!_aa){
return nil;
}
var _ab=objj_msgSend(_a8,"_targetForWindow:action:",objj_msgSend(_a8,"keyWindow"),_aa);
if(_ab){
return _ab;
}
_ab=objj_msgSend(_a8,"_targetForWindow:action:",objj_msgSend(_a8,"mainWindow"),_aa);
if(_ab){
return _ab;
}
if(objj_msgSend(_a8,"respondsToSelector:",_aa)){
return _a8;
}
if(objj_msgSend(_delegate,"respondsToSelector:",_aa)){
return _delegate;
}
if(objj_msgSend(_documentController,"respondsToSelector:",_aa)){
return _documentController;
}
return nil;
}
}),new objj_method(sel_getUid("setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:"),function(_ac,_ad,_ae,_af,_b0,_b1,_b2){
with(_ac){
_eventListeners.push(_b3(_af,_ae));
}
}),new objj_method(sel_getUid("setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:"),function(_b4,_b5,_b6,_b7,_b8,_b9,_ba,_bb){
with(_b4){
_eventListeners.push(_b3(_b8,function(_bc){
objj_msgSend(_b6,_b7,_bc);
}));
}
}),new objj_method(sel_getUid("currentEvent"),function(_bd,_be){
with(_bd){
return _currentEvent;
}
}),new objj_method(sel_getUid("beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:"),function(_bf,_c0,_c1,_c2,_c3,_c4,_c5){
with(_bf){
var _c6=objj_msgSend(_c1,"styleMask");
if(!(_c6&CPDocModalWindowMask)){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Currently only CPDocModalWindowMask style mask is supported for attached sheets");
return;
}
objj_msgSend(_c2,"orderFront:",_bf);
objj_msgSend(_c1,"setPlatformWindow:",objj_msgSend(_c2,"platformWindow"));
objj_msgSend(_c2,"_attachSheet:modalDelegate:didEndSelector:contextInfo:",_c1,_c3,_c4,_c5);
}
}),new objj_method(sel_getUid("endSheet:returnCode:"),function(_c7,_c8,_c9,_ca){
with(_c7){
var _cb=objj_msgSend(_windows,"count");
while(--_cb>=0){
var _cc=objj_msgSend(_windows,"objectAtIndex:",_cb),_cd=_cc._sheetContext;
if(_cd!=nil&&_cd["sheet"]===_c9){
_cd["returnCode"]=_ca;
objj_msgSend(_cc,"_detachSheetWindow");
return;
}
}
}
}),new objj_method(sel_getUid("endSheet:"),function(_ce,_cf,_d0){
with(_ce){
objj_msgSend(_ce,"endSheet:returnCode:",_d0,0);
}
}),new objj_method(sel_getUid("arguments"),function(_d1,_d2){
with(_d1){
if(_fullArgsString!==window.location.hash){
objj_msgSend(_d1,"_reloadArguments");
}
return _args;
}
}),new objj_method(sel_getUid("setArguments:"),function(_d3,_d4,_d5){
with(_d3){
if(!_d5||_d5.length==0){
_args=[];
window.location.hash="#";
return;
}
if(!objj_msgSend(_d5,"isKindOfClass:",CPArray)){
_d5=objj_msgSend(CPArray,"arrayWithObject:",_d5);
}
_args=_d5;
var _d6=objj_msgSend(_args,"copy");
for(var i=0,_d7=_d6.length;i<_d7;i++){
_d6[i]=encodeURIComponent(_d6[i]);
}
var _d8=objj_msgSend(_d6,"componentsJoinedByString:","/");
window.location.hash="#"+_d8;
}
}),new objj_method(sel_getUid("_reloadArguments"),function(_d9,_da){
with(_d9){
_fullArgsString=window.location.hash;
if(_fullArgsString.length){
var _db=_fullArgsString.substring(1).split("/");
for(var i=0,_dc=_db.length;i<_dc;i++){
_db[i]=decodeURIComponent(_db[i]);
}
_args=_db;
}else{
_args=[];
}
}
}),new objj_method(sel_getUid("namedArguments"),function(_dd,_de){
with(_dd){
return _namedArgs;
}
}),new objj_method(sel_getUid("_openURL:"),function(_df,_e0,_e1){
with(_df){
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("application:openFile:"))){
CPLog.warn("application:openFile: is deprecated, use application:openURL: instead.");
return objj_msgSend(_delegate,"application:openFile:",_df,objj_msgSend(_e1,"absoluteString"));
}
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("application:openURL:"))){
return objj_msgSend(_delegate,"application:openURL:",_df,_e1);
}
return !!objj_msgSend(_documentController,"openDocumentWithContentsOfURL:display:error:",_e1,YES,NULL);
}
}),new objj_method(sel_getUid("_willBecomeActive"),function(_e2,_e3){
with(_e2){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationWillBecomeActiveNotification,_e2,nil);
}
}),new objj_method(sel_getUid("_didBecomeActive"),function(_e4,_e5){
with(_e4){
if(!objj_msgSend(_e4,"keyWindow")&&_previousKeyWindow&&objj_msgSend(objj_msgSend(_e4,"windows"),"indexOfObjectIdenticalTo:",_previousKeyWindow)!==CPNotFound){
objj_msgSend(_previousKeyWindow,"makeKeyWindow");
}
if(!objj_msgSend(_e4,"mainWindow")&&_previousMainWindow&&objj_msgSend(objj_msgSend(_e4,"windows"),"indexOfObjectIdenticalTo:",_previousMainWindow)!==CPNotFound){
objj_msgSend(_previousMainWindow,"makeMainWindow");
}
if(objj_msgSend(_e4,"keyWindow")){
objj_msgSend(objj_msgSend(_e4,"keyWindow"),"orderFront:",_e4);
}else{
if(objj_msgSend(_e4,"mainWindow")){
objj_msgSend(objj_msgSend(_e4,"mainWindow"),"makeKeyAndOrderFront:",_e4);
}else{
objj_msgSend(objj_msgSend(_e4,"mainMenu")._menuWindow,"makeKeyWindow");
}
}
_previousKeyWindow=nil;
_previousMainWindow=nil;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationDidBecomeActiveNotification,_e4,nil);
}
}),new objj_method(sel_getUid("_willResignActive"),function(_e6,_e7){
with(_e6){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationWillResignActiveNotification,_e6,nil);
}
}),new objj_method(sel_getUid("_didResignActive"),function(_e8,_e9){
with(_e8){
if(_e8._activeMenu){
objj_msgSend(_e8._activeMenu,"cancelTracking");
}
if(objj_msgSend(_e8,"keyWindow")){
_previousKeyWindow=objj_msgSend(_e8,"keyWindow");
objj_msgSend(_previousKeyWindow,"resignKeyWindow");
}
if(objj_msgSend(_e8,"mainWindow")){
_previousMainWindow=objj_msgSend(_e8,"mainWindow");
objj_msgSend(_previousMainWindow,"resignMainWindow");
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPApplicationDidResignActiveNotification,_e8,nil);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedApplication"),function(_ea,_eb){
with(_ea){
if(!CPApp){
CPApp=objj_msgSend(objj_msgSend(CPApplication,"alloc"),"init");
}
return CPApp;
}
}),new objj_method(sel_getUid("defaultThemeName"),function(_ec,_ed){
with(_ec){
return (objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPDefaultTheme")||"Aristo");
}
})]);
var _64=function(_ee,_ef){
return {_window:_ee,_state:CPRunContinuesResponse,_previous:nil};
};
var _b3=function(_f0,_f1){
return {_mask:_f0,_callback:_f1};
};
_CPRunModalLoop=function(_f2){
objj_msgSend(CPApp,"setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:",_CPRunModalLoop,CPAnyEventMask,nil,0,NO);
var _f3=objj_msgSend(_f2,"window"),_f4=CPApp._currentSession;
if(_f3==_f4._window||objj_msgSend(_f3,"worksWhenModal")){
objj_msgSend(_f3,"sendEvent:",_f2);
}
};
CPApplicationMain=function(_f5,_f6){
if(window.parent!==window&&typeof window.parent._childAppIsStarting==="function"){
window.parent._childAppIsStarting(window);
}
var _f7=objj_msgSend(CPBundle,"mainBundle"),_f8=objj_msgSend(_f7,"principalClass");
if(!_f8){
_f8=objj_msgSend(CPApplication,"class");
}
objj_msgSend(_f8,"sharedApplication");
if(objj_msgSend(_f5,"containsObject:","debug")){
CPLogRegister(CPLogPopup);
}
CPApp._args=_f5;
CPApp._namedArgs=_f6;
objj_msgSend(_CPAppBootstrapper,"performActions");
};
var _f9=nil;
var _3=objj_allocateClassPair(CPObject,"_CPAppBootstrapper"),_4=_3.isa;
objj_registerClassPair(_3);
class_addMethods(_4,[new objj_method(sel_getUid("actions"),function(_fa,_fb){
with(_fa){
return [sel_getUid("bootstrapPlatform"),sel_getUid("loadDefaultTheme"),sel_getUid("loadMainCibFile")];
}
}),new objj_method(sel_getUid("performActions"),function(_fc,_fd){
with(_fc){
if(!_f9){
_f9=objj_msgSend(_fc,"actions");
}
while(_f9.length){
var _fe=_f9.shift();
if(objj_msgSend(_fc,_fe)){
return;
}
}
objj_msgSend(CPApp,"run");
}
}),new objj_method(sel_getUid("bootstrapPlatform"),function(_ff,_100){
with(_ff){
return objj_msgSend(CPPlatform,"bootstrap");
}
}),new objj_method(sel_getUid("loadDefaultTheme"),function(self,_101){
with(self){
var _102=objj_msgSend(CPApplication,"defaultThemeName"),_103=nil;
if(_102==="Aristo"){
_103=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPApplication,"class")),"pathForResource:",_102+".blend");
}else{
_103=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_102+".blend");
}
var _104=objj_msgSend(objj_msgSend(CPThemeBlend,"alloc"),"initWithContentsOfURL:",_103);
objj_msgSend(_104,"loadWithDelegate:",self);
return YES;
}
}),new objj_method(sel_getUid("blendDidFinishLoading:"),function(self,_105,_106){
with(self){
objj_msgSend(objj_msgSend(CPApplication,"sharedApplication"),"setThemeBlend:",_106);
objj_msgSend(CPTheme,"setDefaultTheme:",objj_msgSend(CPTheme,"themeNamed:",objj_msgSend(CPApplication,"defaultThemeName")));
objj_msgSend(self,"performActions");
}
}),new objj_method(sel_getUid("loadMainCibFile"),function(self,_107){
with(self){
var _108=objj_msgSend(CPBundle,"mainBundle"),_109=objj_msgSend(_108,"objectForInfoDictionaryKey:",_1)||objj_msgSend(_108,"objectForInfoDictionaryKey:",_2);
if(_109){
objj_msgSend(_108,"loadCibFile:externalNameTable:loadDelegate:",_109,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",CPApp,CPCibOwner),self);
return YES;
}else{
objj_msgSend(self,"loadCiblessBrowserMainMenu");
}
return NO;
}
}),new objj_method(sel_getUid("loadCiblessBrowserMainMenu"),function(self,_10a){
with(self){
var _10b=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","MainMenu");
objj_msgSend(_10b,"setAutoenablesItems:",NO);
var _10c=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPApplication,"class")),_10d=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","New",sel_getUid("newDocument:"),"n");
objj_msgSend(_10d,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/New.png"),CGSizeMake(16,16)));
objj_msgSend(_10d,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/NewHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10b,"addItem:",_10d);
var _10e=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Open",sel_getUid("openDocument:"),"o");
objj_msgSend(_10e,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/Open.png"),CGSizeMake(16,16)));
objj_msgSend(_10e,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/OpenHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10b,"addItem:",_10e);
var _10f=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","Save"),_110=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save",sel_getUid("saveDocument:"),nil);
objj_msgSend(_110,"setImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/Save.png"),CGSizeMake(16,16)));
objj_msgSend(_110,"setAlternateImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_10c,"pathForResource:","CPApplication/SaveHighlighted.png"),CGSizeMake(16,16)));
objj_msgSend(_10f,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save",sel_getUid("saveDocument:"),"s"));
objj_msgSend(_10f,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Save As",sel_getUid("saveDocumentAs:"),nil));
objj_msgSend(_110,"setSubmenu:",_10f);
objj_msgSend(_10b,"addItem:",_110);
var _111=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Edit",nil,nil),_112=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:","Edit"),_113=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Undo",sel_getUid("undo:"),CPUndoKeyEquivalent),_114=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Redo",sel_getUid("redo:"),CPRedoKeyEquivalent);
objj_msgSend(_113,"setKeyEquivalentModifierMask:",CPUndoKeyEquivalentModifierMask);
objj_msgSend(_114,"setKeyEquivalentModifierMask:",CPRedoKeyEquivalentModifierMask);
objj_msgSend(_112,"addItem:",_113);
objj_msgSend(_112,"addItem:",_114);
objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Cut",sel_getUid("cut:"),"x"));
objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Copy",sel_getUid("copy:"),"c"));
objj_msgSend(_112,"addItem:",objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Paste",sel_getUid("paste:"),"v"));
objj_msgSend(_111,"setSubmenu:",_112);
objj_msgSend(_111,"setHidden:",YES);
objj_msgSend(_10b,"addItem:",_111);
objj_msgSend(_10b,"addItem:",objj_msgSend(CPMenuItem,"separatorItem"));
objj_msgSend(CPApp,"setMainMenu:",_10b);
}
}),new objj_method(sel_getUid("cibDidFinishLoading:"),function(self,_115,aCib){
with(self){
objj_msgSend(self,"performActions");
}
}),new objj_method(sel_getUid("cibDidFailToLoad:"),function(self,_116,aCib){
with(self){
throw new Error("Could not load main cib file (Did you forget to nib2cib it?).");
}
}),new objj_method(sel_getUid("reset"),function(self,_117){
with(self){
_f9=nil;
}
})]);
p;19;CPArrayController.jt;24668;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;20;CPObjectController.ji;19;CPKeyValueBinding.jt;24571;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPObjectController.j",YES);
objj_executeFile("CPKeyValueBinding.j",YES);
var _1=objj_allocateClassPair(CPObjectController,"CPArrayController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_avoidsEmptySelection"),new objj_ivar("_clearsFilterPredicateOnInsertion"),new objj_ivar("_filterRestrictsInsertion"),new objj_ivar("_preservesSelection"),new objj_ivar("_selectsInsertedObjects"),new objj_ivar("_alwaysUsesMultipleValuesMarker"),new objj_ivar("_automaticallyRearrangesObjects"),new objj_ivar("_selectionIndexes"),new objj_ivar("_sortDescriptors"),new objj_ivar("_filterPredicate"),new objj_ivar("_arrangedObjects"),new objj_ivar("_disableSetContent")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPArrayController").super_class},"init");
if(_3){
_preservesSelection=YES;
_selectsInsertedObjects=YES;
_avoidsEmptySelection=YES;
_clearsFilterPredicateOnInsertion=YES;
_alwaysUsesMultipleValuesMarker=NO;
_automaticallyRearrangesObjects=NO;
_filterRestrictsInsertion=YES;
objj_msgSend(_3,"_init");
}
return _3;
}
}),new objj_method(sel_getUid("_init"),function(_5,_6){
with(_5){
_sortDescriptors=objj_msgSend(CPArray,"array");
_filterPredicate=nil;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_5,"__setArrangedObjects:",objj_msgSend(CPArray,"array"));
}
}),new objj_method(sel_getUid("prepareContent"),function(_7,_8){
with(_7){
objj_msgSend(_7,"_setContentArray:",[objj_msgSend(_7,"newObject")]);
}
}),new objj_method(sel_getUid("preservesSelection"),function(_9,_a){
with(_9){
return _preservesSelection;
}
}),new objj_method(sel_getUid("setPreservesSelection:"),function(_b,_c,_d){
with(_b){
_preservesSelection=_d;
}
}),new objj_method(sel_getUid("selectsInsertedObjects"),function(_e,_f){
with(_e){
return _selectsInsertedObjects;
}
}),new objj_method(sel_getUid("setSelectsInsertedObjects:"),function(_10,_11,_12){
with(_10){
_selectsInsertedObjects=_12;
}
}),new objj_method(sel_getUid("avoidsEmptySelection"),function(_13,_14){
with(_13){
return _avoidsEmptySelection;
}
}),new objj_method(sel_getUid("setAvoidsEmptySelection:"),function(_15,_16,_17){
with(_15){
_avoidsEmptySelection=_17;
}
}),new objj_method(sel_getUid("clearsFilterPredicateOnInsertion"),function(_18,_19){
with(_18){
return _clearsFilterPredicateOnInsertion;
}
}),new objj_method(sel_getUid("setClearsFilterPredicateOnInsertion:"),function(_1a,_1b,_1c){
with(_1a){
_clearsFilterPredicateOnInsertion=_1c;
}
}),new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"),function(_1d,_1e){
with(_1d){
return _alwaysUsesMultipleValuesMarker;
}
}),new objj_method(sel_getUid("setAlwaysUsesMultipleValuesMarker:"),function(_1f,_20,_21){
with(_1f){
_alwaysUsesMultipleValuesMarker=_21;
}
}),new objj_method(sel_getUid("automaticallyRearrangesObjects"),function(_22,_23){
with(_22){
return _automaticallyRearrangesObjects;
}
}),new objj_method(sel_getUid("setAutomaticallyRearrangesObjects:"),function(_24,_25,_26){
with(_24){
_automaticallyRearrangesObjects=_26;
}
}),new objj_method(sel_getUid("setContent:"),function(_27,_28,_29){
with(_27){
if(_disableSetContent){
return;
}
if(_29===nil){
_29=[];
}
if(!objj_msgSend(_29,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
_29=[_29];
}
var _2a=nil,_2b=nil;
if(objj_msgSend(_27,"preservesSelection")){
_2a=objj_msgSend(_27,"selectedObjects");
}else{
_2b=objj_msgSend(_27,"selectionIndexes");
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_27,"willChangeValueForKey:","filterPredicate");
}
_contentObject=_29;
if(_clearsFilterPredicateOnInsertion&&_filterPredicate!=nil){
objj_msgSend(_27,"__setFilterPredicate:",nil);
}else{
objj_msgSend(_27,"_rearrangeObjects");
}
if(objj_msgSend(_27,"preservesSelection")){
objj_msgSend(_27,"__setSelectedObjects:",_2a);
}else{
objj_msgSend(_27,"__setSelectionIndexes:",_2b);
}
if(_clearsFilterPredicateOnInsertion){
objj_msgSend(_27,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("_setContentArray:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_2c,"setContent:",_2e);
}
}),new objj_method(sel_getUid("_setContentSet:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"setContent:",objj_msgSend(_31,"allObjects"));
}
}),new objj_method(sel_getUid("contentArray"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"content");
}
}),new objj_method(sel_getUid("contentSet"),function(_34,_35){
with(_34){
return objj_msgSend(CPSet,"setWithArray:",objj_msgSend(_34,"content"));
}
}),new objj_method(sel_getUid("arrangeObjects:"),function(_36,_37,_38){
with(_36){
var _39=objj_msgSend(_36,"filterPredicate"),_3a=objj_msgSend(_36,"sortDescriptors");
if(_39&&objj_msgSend(_3a,"count")>0){
var _3b=objj_msgSend(_38,"filteredArrayUsingPredicate:",_39);
objj_msgSend(_3b,"sortUsingDescriptors:",_3a);
return _3b;
}else{
if(_39){
return objj_msgSend(_38,"filteredArrayUsingPredicate:",_39);
}else{
if(objj_msgSend(_3a,"count")>0){
return objj_msgSend(_38,"sortedArrayUsingDescriptors:",_3a);
}
}
}
return objj_msgSend(_38,"copy");
}
}),new objj_method(sel_getUid("rearrangeObjects"),function(_3c,_3d){
with(_3c){
objj_msgSend(_3c,"willChangeValueForKey:","arrangedObjects");
objj_msgSend(_3c,"_rearrangeObjects");
objj_msgSend(_3c,"didChangeValueForKey:","arrangedObjects");
}
}),new objj_method(sel_getUid("_rearrangeObjects"),function(_3e,_3f){
with(_3e){
var _40=nil,_41=nil;
if(objj_msgSend(_3e,"preservesSelection")){
_40=objj_msgSend(_3e,"selectedObjects");
}else{
_41=objj_msgSend(_3e,"selectionIndexes");
}
objj_msgSend(_3e,"__setArrangedObjects:",objj_msgSend(_3e,"arrangeObjects:",objj_msgSend(_3e,"contentArray")));
if(objj_msgSend(_3e,"preservesSelection")){
objj_msgSend(_3e,"__setSelectedObjects:",_40);
}else{
objj_msgSend(_3e,"__setSelectionIndexes:",_41);
}
}
}),new objj_method(sel_getUid("__setArrangedObjects:"),function(_42,_43,_44){
with(_42){
if(_arrangedObjects===_44){
return;
}
_arrangedObjects=objj_msgSend(objj_msgSend(_CPObservableArray,"alloc"),"initWithArray:",_44);
}
}),new objj_method(sel_getUid("arrangedObjects"),function(_45,_46){
with(_45){
return _arrangedObjects;
}
}),new objj_method(sel_getUid("sortDescriptors"),function(_47,_48){
with(_47){
return _sortDescriptors;
}
}),new objj_method(sel_getUid("setSortDescriptors:"),function(_49,_4a,_4b){
with(_49){
if(_sortDescriptors===_4b){
return;
}
_sortDescriptors=objj_msgSend(_4b,"copy");
objj_msgSend(_49,"_rearrangeObjects");
}
}),new objj_method(sel_getUid("filterPredicate"),function(_4c,_4d){
with(_4c){
return _filterPredicate;
}
}),new objj_method(sel_getUid("setFilterPredicate:"),function(_4e,_4f,_50){
with(_4e){
if(_filterPredicate===_50){
return;
}
objj_msgSend(_4e,"willChangeValueForKey:","arrangedObjects");
objj_msgSend(_4e,"__setFilterPredicate:",_50);
objj_msgSend(_4e,"didChangeValueForKey:","arrangedObjects");
}
}),new objj_method(sel_getUid("__setFilterPredicate:"),function(_51,_52,_53){
with(_51){
if(_filterPredicate===_53){
return;
}
_filterPredicate=_53;
objj_msgSend(_51,"_rearrangeObjects");
}
}),new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"),function(_54,_55){
with(_54){
return _alwaysUsesMultipleValuesMarker;
}
}),new objj_method(sel_getUid("selectionIndex"),function(_56,_57){
with(_56){
return objj_msgSend(_selectionIndexes,"firstIndex");
}
}),new objj_method(sel_getUid("setSelectionIndex:"),function(_58,_59,_5a){
with(_58){
return objj_msgSend(_58,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_5a));
}
}),new objj_method(sel_getUid("selectionIndexes"),function(_5b,_5c){
with(_5b){
return _selectionIndexes;
}
}),new objj_method(sel_getUid("setSelectionIndexes:"),function(_5d,_5e,_5f){
with(_5d){
objj_msgSend(_5d,"_selectionWillChange");
var r=objj_msgSend(_5d,"__setSelectionIndexes:avoidEmpty:",_5f,NO);
objj_msgSend(_5d,"_selectionDidChange");
return r;
}
}),new objj_method(sel_getUid("__setSelectionIndex:"),function(_60,_61,_62){
with(_60){
return objj_msgSend(_60,"__setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_62));
}
}),new objj_method(sel_getUid("__setSelectionIndexes:"),function(_63,_64,_65){
with(_63){
return objj_msgSend(_63,"__setSelectionIndexes:avoidEmpty:",_65,_avoidsEmptySelection);
}
}),new objj_method(sel_getUid("__setSelectionIndexes:avoidEmpty:"),function(_66,_67,_68,_69){
with(_66){
var _6a=_68;
if(!_6a){
_6a=objj_msgSend(CPIndexSet,"indexSet");
}
if(!objj_msgSend(_6a,"count")){
if(_69&&objj_msgSend(objj_msgSend(_66,"arrangedObjects"),"count")){
_6a=objj_msgSend(CPIndexSet,"indexSetWithIndex:",0);
}
}else{
var _6b=objj_msgSend(objj_msgSend(_66,"arrangedObjects"),"count");
_6a=objj_msgSend(_6a,"copy");
objj_msgSend(_6a,"removeIndexesInRange:",CPMakeRange(_6b,objj_msgSend(_6a,"lastIndex")+1));
if(!objj_msgSend(_6a,"count")&&_69&&_6b){
_6a=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_6b-1);
}
}
if(objj_msgSend(_selectionIndexes,"isEqualToIndexSet:",_6a)){
return NO;
}
_selectionIndexes=_68===_6a?objj_msgSend(_68,"copy"):_6a;
var _6c=objj_msgSend(objj_msgSend(_66,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_6c,"getBinding:forObject:","selectionIndexes",_66),"reverseSetValueFor:","selectionIndexes");
return YES;
}
}),new objj_method(sel_getUid("selectedObjects"),function(_6d,_6e){
with(_6d){
var _6f=objj_msgSend(objj_msgSend(_6d,"arrangedObjects"),"objectsAtIndexes:",objj_msgSend(_6d,"selectionIndexes"));
return objj_msgSend(_CPObservableArray,"arrayWithArray:",(_6f||[]));
}
}),new objj_method(sel_getUid("setSelectedObjects:"),function(_70,_71,_72){
with(_70){
objj_msgSend(_70,"willChangeValueForKey:","selectionIndexes");
objj_msgSend(_70,"_selectionWillChange");
var r=objj_msgSend(_70,"__setSelectedObjects:avoidEmpty:",_72,NO);
objj_msgSend(_70,"didChangeValueForKey:","selectionIndexes");
objj_msgSend(_70,"_selectionDidChange");
return r;
}
}),new objj_method(sel_getUid("__setSelectedObjects:"),function(_73,_74,_75){
with(_73){
objj_msgSend(_73,"__setSelectedObjects:avoidEmpty:",_75,_avoidsEmptySelection);
}
}),new objj_method(sel_getUid("__setSelectedObjects:avoidEmpty:"),function(_76,_77,_78,_79){
with(_76){
var set=objj_msgSend(CPIndexSet,"indexSet"),_7a=objj_msgSend(_78,"count"),_7b=objj_msgSend(_76,"arrangedObjects");
for(var i=0;i<_7a;i++){
var _7c=objj_msgSend(_7b,"indexOfObject:",objj_msgSend(_78,"objectAtIndex:",i));
if(_7c!==CPNotFound){
objj_msgSend(set,"addIndex:",_7c);
}
}
objj_msgSend(_76,"__setSelectionIndexes:avoidEmpty:",set,_79);
return YES;
}
}),new objj_method(sel_getUid("canSelectPrevious"),function(_7d,_7e){
with(_7d){
return objj_msgSend(objj_msgSend(_7d,"selectionIndexes"),"firstIndex")>0;
}
}),new objj_method(sel_getUid("selectPrevious:"),function(_7f,_80,_81){
with(_7f){
var _82=objj_msgSend(objj_msgSend(_7f,"selectionIndexes"),"firstIndex")-1;
if(_82>=0){
objj_msgSend(_7f,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_82));
}
}
}),new objj_method(sel_getUid("canSelectNext"),function(_83,_84){
with(_83){
return objj_msgSend(objj_msgSend(_83,"selectionIndexes"),"firstIndex")<objj_msgSend(objj_msgSend(_83,"arrangedObjects"),"count")-1;
}
}),new objj_method(sel_getUid("selectNext:"),function(_85,_86,_87){
with(_85){
var _88=objj_msgSend(objj_msgSend(_85,"selectionIndexes"),"firstIndex")+1;
if(_88<objj_msgSend(objj_msgSend(_85,"arrangedObjects"),"count")){
objj_msgSend(_85,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_88));
}
}
}),new objj_method(sel_getUid("addObject:"),function(_89,_8a,_8b){
with(_89){
if(!objj_msgSend(_89,"canAdd")){
return;
}
var _8c=NO;
if(_clearsFilterPredicateOnInsertion&&_filterPredicate){
objj_msgSend(_89,"willChangeValueForKey:","filterPredicate");
_8c=YES;
}
objj_msgSend(_89,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"addObject:",_8b);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_89),"_contentArrayDidChange");
_disableSetContent=NO;
if(_8c){
_filterPredicate=nil;
objj_msgSend(_89,"_rearrangeObjects");
}else{
if(_filterPredicate===nil||objj_msgSend(_filterPredicate,"evaluateWithObject:",_8b)){
var pos=objj_msgSend(_arrangedObjects,"insertObject:inArraySortedByDescriptors:",_8b,_sortDescriptors);
if(_selectsInsertedObjects){
objj_msgSend(_89,"__setSelectionIndex:",pos);
}else{
objj_msgSend(_selectionIndexes,"shiftIndexesStartingAtIndex:by:",pos,1);
}
}
}
objj_msgSend(_89,"didChangeValueForKey:","content");
if(_8c){
objj_msgSend(_89,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("insertObject:atArrangedObjectIndex:"),function(_8d,_8e,_8f,_90){
with(_8d){
if(!objj_msgSend(_8d,"canAdd")){
return;
}
var _91=NO;
if(_clearsFilterPredicateOnInsertion&&_filterPredicate){
objj_msgSend(_8d,"willChangeValueForKey:","filterPredicate");
_91=YES;
}
objj_msgSend(_8d,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"addObject:",_8f);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_8d),"_contentArrayDidChange");
_disableSetContent=NO;
if(_91){
objj_msgSend(_8d,"__setFilterPredicate:",nil);
}
objj_msgSend(objj_msgSend(_8d,"arrangedObjects"),"insertObject:atIndex:",_8f,_90);
if(objj_msgSend(_8d,"selectsInsertedObjects")){
objj_msgSend(_8d,"__setSelectionIndex:",_90);
}else{
objj_msgSend(objj_msgSend(_8d,"selectionIndexes"),"shiftIndexesStartingAtIndex:by:",_90,1);
}
if(objj_msgSend(_8d,"avoidsEmptySelection")&&objj_msgSend(objj_msgSend(_8d,"selectionIndexes"),"count")<=0&&objj_msgSend(_contentObject,"count")>0){
objj_msgSend(_8d,"__setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",0));
}
objj_msgSend(_8d,"didChangeValueForKey:","content");
if(_91){
objj_msgSend(_8d,"didChangeValueForKey:","filterPredicate");
}
}
}),new objj_method(sel_getUid("removeObject:"),function(_92,_93,_94){
with(_92){
objj_msgSend(_92,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"removeObject:",_94);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_92),"_contentArrayDidChange");
_disableSetContent=NO;
if(_filterPredicate===nil||objj_msgSend(_filterPredicate,"evaluateWithObject:",_94)){
var pos=objj_msgSend(_arrangedObjects,"indexOfObject:",_94);
objj_msgSend(_arrangedObjects,"removeObjectAtIndex:",pos);
objj_msgSend(_selectionIndexes,"shiftIndexesStartingAtIndex:by:",pos,-1);
}
objj_msgSend(_92,"didChangeValueForKey:","content");
}
}),new objj_method(sel_getUid("add:"),function(_95,_96,_97){
with(_95){
if(!objj_msgSend(_95,"canAdd")){
return;
}
objj_msgSend(_95,"insert:",_97);
}
}),new objj_method(sel_getUid("insert:"),function(_98,_99,_9a){
with(_98){
if(!objj_msgSend(_98,"canInsert")){
return;
}
var _9b=objj_msgSend(_98,"automaticallyPreparesContent")?objj_msgSend(_98,"newObject"):objj_msgSend(_98,"_defaultNewObject");
objj_msgSend(_98,"addObject:",_9b);
}
}),new objj_method(sel_getUid("remove:"),function(_9c,_9d,_9e){
with(_9c){
objj_msgSend(_9c,"removeObjectsAtArrangedObjectIndexes:",_selectionIndexes);
}
}),new objj_method(sel_getUid("removeObjectAtArrangedObjectIndex:"),function(_9f,_a0,_a1){
with(_9f){
objj_msgSend(_9f,"removeObjectsAtArrangedObjectIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_a1));
}
}),new objj_method(sel_getUid("removeObjectsAtArrangedObjectIndexes:"),function(_a2,_a3,_a4){
with(_a2){
objj_msgSend(_a2,"willChangeValueForKey:","content");
_disableSetContent=YES;
var _a5=objj_msgSend(_a2,"arrangedObjects"),_a6=objj_msgSend(_a4,"lastIndex"),_a7=CPNotFound,_a8=objj_msgSend(_selectionIndexes,"copy");
while(_a6!==CPNotFound){
var _a9=objj_msgSend(_a5,"objectAtIndex:",_a6);
if(objj_msgSend(_contentObject,"objectAtIndex:",_a6)===_a9){
objj_msgSend(_contentObject,"removeObjectAtIndex:",_a6);
}else{
contentIndex=objj_msgSend(_contentObject,"indexOfObjectIdenticalTo:",_a9);
objj_msgSend(_contentObject,"removeObjectAtIndex:",contentIndex);
}
objj_msgSend(_a5,"removeObjectAtIndex:",_a6);
objj_msgSend(_a8,"removeIndex:",_a6);
objj_msgSend(_a8,"shiftIndexesStartingAtIndex:by:",_a6,-1);
_a6=objj_msgSend(_a4,"indexLessThanIndex:",_a6);
}
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_a2),"_contentArrayDidChange");
_disableSetContent=NO;
objj_msgSend(_a2,"__setSelectionIndexes:",_a8);
objj_msgSend(_a2,"didChangeValueForKey:","content");
}
}),new objj_method(sel_getUid("addObjects:"),function(_aa,_ab,_ac){
with(_aa){
if(!objj_msgSend(_aa,"canAdd")){
return;
}
var _ad=objj_msgSend(_aa,"contentArray"),_ae=objj_msgSend(_ac,"count");
for(var i=0;i<_ae;i++){
objj_msgSend(_ad,"addObject:",objj_msgSend(_ac,"objectAtIndex:",i));
}
objj_msgSend(_aa,"setContent:",_ad);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_aa),"_contentArrayDidChange");
}
}),new objj_method(sel_getUid("removeObjects:"),function(_af,_b0,_b1){
with(_af){
objj_msgSend(_af,"_removeObjects:",_b1);
}
}),new objj_method(sel_getUid("_removeObjects:"),function(_b2,_b3,_b4){
with(_b2){
objj_msgSend(_b2,"willChangeValueForKey:","content");
_disableSetContent=YES;
objj_msgSend(_contentObject,"removeObjectsInArray:",_b4);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_b2),"_contentArrayDidChange");
_disableSetContent=NO;
var _b5=objj_msgSend(_b2,"arrangedObjects"),_b6=objj_msgSend(_b5,"indexOfObject:",objj_msgSend(_b4,"objectAtIndex:",0));
objj_msgSend(_b5,"removeObjectsInArray:",_b4);
var _b7=objj_msgSend(_b5,"count"),_b8=objj_msgSend(CPIndexSet,"indexSet");
if(objj_msgSend(_b2,"preservesSelection")||objj_msgSend(_b2,"avoidsEmptySelection")){
_b8=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_b6);
if(_b7<=0){
_b8=objj_msgSend(CPIndexSet,"indexSet");
}else{
if(_b6>=_b7){
_b8=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_b7-1);
}
}
}
_selectionIndexes=_b8;
objj_msgSend(_b2,"didChangeValueForKey:","content");
}
}),new objj_method(sel_getUid("canInsert"),function(_b9,_ba){
with(_b9){
return objj_msgSend(_b9,"isEditable");
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_bb,_bc){
with(_bb){
if(_bb!==objj_msgSend(CPArrayController,"class")){
return;
}
objj_msgSend(_bb,"exposeBinding:","contentArray");
objj_msgSend(_bb,"exposeBinding:","contentSet");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingContentArray"),function(_bd,_be){
with(_bd){
return objj_msgSend(CPSet,"setWithObjects:","content");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingArrangedObjects"),function(_bf,_c0){
with(_bf){
return objj_msgSend(CPSet,"setWithObjects:","content","sortDescriptors");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelection"),function(_c1,_c2){
with(_c1){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndex"),function(_c3,_c4){
with(_c3){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndexes"),function(_c5,_c6){
with(_c5){
return objj_msgSend(CPSet,"setWithObjects:","arrangedObjects");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedObjects"),function(_c7,_c8){
with(_c7){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"),function(_c9,_ca){
with(_c9){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectNext"),function(_cb,_cc){
with(_cb){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectPrevious"),function(_cd,_ce){
with(_cd){
return objj_msgSend(CPSet,"setWithObjects:","selectionIndexes");
}
})]);
var _1=objj_getClass("CPArrayController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
}
var _2=_1.isa;
class_addMethods(_2,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_cf,_d0,_d1){
with(_cf){
if(_d1=="contentArray"){
return objj_msgSend(_CPArrayControllerContentBinder,"class");
}
return objj_msgSendSuper({receiver:_cf,super_class:objj_getMetaClass("CPArrayController").super_class},"_binderClassForBinding:",_d1);
}
})]);
var _1=objj_allocateClassPair(CPBinder,"_CPArrayControllerContentBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setValueFor:"),function(_d2,_d3,_d4){
with(_d2){
var _d5=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_d6=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_d7=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_d8=objj_msgSend(_d2,"handlesContentAsCompoundValue"),_d9=_d6.lastIndexOf("."),_da=_d9!==CPNotFound?_d6.substring(0,_d9):nil,_db=_da&&objj_msgSend(objj_msgSend(_d5,"valueForKeyPath:",_da),"isKindOfClass:",CPControllerSelectionProxy);
if(!_d8&&!_db){
newValue=objj_msgSend(_d5,"mutableArrayValueForKeyPath:",_d6);
}else{
newValue=objj_msgSend(_d5,"valueForKeyPath:",_d6);
}
var _dc=CPIsControllerMarker(newValue);
if(_dc){
if(newValue===CPNotApplicableMarker&&objj_msgSend(_d7,"objectForKey:",CPRaisesForNotApplicableKeysBindingOption)){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"can't transform non applicable key on: "+_source+" value: "+newValue);
}
newValue=objj_msgSend(_d2,"_placeholderForMarker:",newValue);
if(!newValue){
newValue=objj_msgSend(CPMutableArray,"array");
}
}else{
newValue=objj_msgSend(_d2,"transformValue:withOptions:",newValue,_d7);
}
if(_d8){
newValue=objj_msgSend(newValue,"mutableCopy");
}
objj_msgSend(_source,"setValue:forKey:",newValue,_d4);
}
}),new objj_method(sel_getUid("_contentArrayDidChange"),function(_dd,_de){
with(_dd){
if(objj_msgSend(_dd,"handlesContentAsCompoundValue")){
var _df=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_e0=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey);
objj_msgSend(_dd,"suppressSpecificNotificationFromObject:keyPath:",_df,_e0);
objj_msgSend(_dd,"reverseSetValueFor:","contentArray");
objj_msgSend(_dd,"unsuppressSpecificNotificationFromObject:keyPath:",_df,_e0);
}
}
})]);
var _e1="CPArrayControllerAvoidsEmptySelection",_e2="CPArrayControllerClearsFilterPredicateOnInsertion",_e3="CPArrayControllerFilterRestrictsInsertion",_e4="CPArrayControllerPreservesSelection",_e5="CPArrayControllerSelectsInsertedObjects",_e6="CPArrayControllerAlwaysUsesMultipleValuesMarker",_e7="CPArrayControllerAutomaticallyRearrangesObjects";
var _1=objj_getClass("CPArrayController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_e8,_e9,_ea){
with(_e8){
_e8=objj_msgSendSuper({receiver:_e8,super_class:objj_getClass("CPArrayController").super_class},"initWithCoder:",_ea);
if(_e8){
_avoidsEmptySelection=objj_msgSend(_ea,"decodeBoolForKey:",_e1);
_clearsFilterPredicateOnInsertion=objj_msgSend(_ea,"decodeBoolForKey:",_e2);
_filterRestrictsInsertion=objj_msgSend(_ea,"decodeBoolForKey:",_e3);
_preservesSelection=objj_msgSend(_ea,"decodeBoolForKey:",_e4);
_selectsInsertedObjects=objj_msgSend(_ea,"decodeBoolForKey:",_e5);
_alwaysUsesMultipleValuesMarker=objj_msgSend(_ea,"decodeBoolForKey:",_e6);
_automaticallyRearrangesObjects=objj_msgSend(_ea,"decodeBoolForKey:",_e7);
_sortDescriptors=objj_msgSend(CPArray,"array");
if(!objj_msgSend(_e8,"content")&&objj_msgSend(_e8,"automaticallyPreparesContent")){
objj_msgSend(_e8,"prepareContent");
}else{
if(!objj_msgSend(_e8,"content")){
objj_msgSend(_e8,"_setContentArray:",[]);
}
}
}
return _e8;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_eb,_ec,_ed){
with(_eb){
objj_msgSendSuper({receiver:_eb,super_class:objj_getClass("CPArrayController").super_class},"encodeWithCoder:",_ed);
objj_msgSend(_ed,"encodeBool:forKey:",_avoidsEmptySelection,_e1);
objj_msgSend(_ed,"encodeBool:forKey:",_clearsFilterPredicateOnInsertion,_e2);
objj_msgSend(_ed,"encodeBool:forKey:",_filterRestrictsInsertion,_e3);
objj_msgSend(_ed,"encodeBool:forKey:",_preservesSelection,_e4);
objj_msgSend(_ed,"encodeBool:forKey:",_selectsInsertedObjects,_e5);
objj_msgSend(_ed,"encodeBool:forKey:",_alwaysUsesMultipleValuesMarker,_e6);
objj_msgSend(_ed,"encodeBool:forKey:",_automaticallyRearrangesObjects,_e7);
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_ee,_ef){
with(_ee){
objj_msgSend(_ee,"_selectionWillChange");
objj_msgSend(_ee,"_selectionDidChange");
}
})]);
p;14;CPBezierPath.jt;4439;@STATIC;1.0;I;21;Foundation/CPObject.ji;19;CPGraphicsContext.jt;4370;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPGraphicsContext.j",YES);
var _1=1;
var _2=objj_allocateClassPair(CPObject,"CPBezierPath"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_path"),new objj_ivar("_lineWidth")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
if(_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPBezierPath").super_class},"init")){
_path=CGPathCreateMutable();
_lineWidth=objj_msgSend(objj_msgSend(_4,"class"),"defaultLineWidth");
}
return _4;
}
}),new objj_method(sel_getUid("moveToPoint:"),function(_6,_7,_8){
with(_6){
CGPathMoveToPoint(_path,nil,_8.x,_8.y);
}
}),new objj_method(sel_getUid("lineToPoint:"),function(_9,_a,_b){
with(_9){
CGPathAddLineToPoint(_path,nil,_b.x,_b.y);
}
}),new objj_method(sel_getUid("curveToPoint:controlPoint1:controlPoint2:"),function(_c,_d,_e,_f,_10){
with(_c){
CGPathAddCurveToPoint(_path,nil,_f.x,_f.y,_10.x,_10.y,_e.x,_e.y);
}
}),new objj_method(sel_getUid("closePath"),function(_11,_12){
with(_11){
CGPathCloseSubpath(_path);
}
}),new objj_method(sel_getUid("stroke"),function(_13,_14){
with(_13){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(ctx);
CGContextAddPath(ctx,_path);
CGContextSetLineWidth(ctx,objj_msgSend(_13,"lineWidth"));
CGContextStrokePath(ctx);
}
}),new objj_method(sel_getUid("fill"),function(_15,_16){
with(_15){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(ctx);
CGContextAddPath(ctx,_path);
CGContextSetLineWidth(ctx,objj_msgSend(_15,"lineWidth"));
CGContextClosePath(ctx);
CGContextFillPath(ctx);
}
}),new objj_method(sel_getUid("lineWidth"),function(_17,_18){
with(_17){
return _lineWidth;
}
}),new objj_method(sel_getUid("setLineWidth:"),function(_19,_1a,_1b){
with(_19){
_lineWidth=_1b;
}
}),new objj_method(sel_getUid("elementCount"),function(_1c,_1d){
with(_1c){
return _path.count;
}
}),new objj_method(sel_getUid("isEmpty"),function(_1e,_1f){
with(_1e){
return CGPathIsEmpty(_path);
}
}),new objj_method(sel_getUid("currentPoint"),function(_20,_21){
with(_20){
return CGPathGetCurrentPoint(_path);
}
}),new objj_method(sel_getUid("appendBezierPathWithPoints:count:"),function(_22,_23,_24,_25){
with(_22){
CGPathAddLines(_path,nil,_24,_25);
}
}),new objj_method(sel_getUid("appendBezierPathWithRect:"),function(_26,_27,_28){
with(_26){
CGPathAddRect(_path,nil,_28);
}
}),new objj_method(sel_getUid("appendBezierPathWithOvalInRect:"),function(_29,_2a,_2b){
with(_29){
CGPathAddPath(_path,nil,CGPathWithEllipseInRect(_2b));
}
}),new objj_method(sel_getUid("appendBezierPathWithRoundedRect:xRadius:yRadius:"),function(_2c,_2d,_2e,_2f,_30){
with(_2c){
CGPathAddPath(_path,nil,CGPathWithRoundedRectangleInRect(_2e,_2f,_30,YES,YES,YES,YES));
}
}),new objj_method(sel_getUid("appendBezierPath:"),function(_31,_32,_33){
with(_31){
CGPathAddPath(_path,nil,_33._path);
}
}),new objj_method(sel_getUid("removeAllPoints"),function(_34,_35){
with(_34){
_path=CGPathCreateMutable();
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("bezierPath"),function(_36,_37){
with(_36){
return objj_msgSend(objj_msgSend(_36,"alloc"),"init");
}
}),new objj_method(sel_getUid("bezierPathWithOvalInRect:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(_38,"bezierPath");
objj_msgSend(_3b,"appendBezierPathWithOvalInRect:",_3a);
return _3b;
}
}),new objj_method(sel_getUid("bezierPathWithRect:"),function(_3c,_3d,_3e){
with(_3c){
var _3f=objj_msgSend(_3c,"bezierPath");
objj_msgSend(_3f,"appendBezierPathWithRect:",_3e);
return _3f;
}
}),new objj_method(sel_getUid("defaultLineWidth"),function(_40,_41){
with(_40){
return _1;
}
}),new objj_method(sel_getUid("setDefaultLineWidth:"),function(_42,_43,_44){
with(_42){
_1=_44;
}
}),new objj_method(sel_getUid("fillRect:"),function(_45,_46,_47){
with(_45){
objj_msgSend(objj_msgSend(_45,"bezierPathWithRect:",_47),"fill");
}
}),new objj_method(sel_getUid("strokeRect:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(objj_msgSend(_48,"bezierPathWithRect:",_4a),"stroke");
}
}),new objj_method(sel_getUid("strokeLineFromPoint:toPoint:"),function(_4b,_4c,_4d,_4e){
with(_4b){
var _4f=objj_msgSend(_4b,"bezierPath");
objj_msgSend(_4f,"moveToPoint:",_4d);
objj_msgSend(_4f,"lineToPoint:",_4e);
objj_msgSend(_4f,"stroke");
}
})]);
p;7;CPBox.jt;12516;@STATIC;1.0;i;8;CPView.jt;12484;
objj_executeFile("CPView.j",YES);
CPBoxPrimary=0;
CPBoxSecondary=1;
CPBoxSeparator=2;
CPBoxOldStyle=3;
CPBoxCustom=4;
CPNoBorder=0;
CPLineBorder=1;
CPBezelBorder=2;
CPGrooveBorder=3;
CPNoTitle=0;
CPAboveTop=1;
CPAtTop=2;
CPBelowTop=3;
CPAboveBottom=4;
CPAtBottom=5;
CPBelowBottom=6;
var _1=objj_allocateClassPair(CPView,"CPBox"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_boxType"),new objj_ivar("_borderType"),new objj_ivar("_borderColor"),new objj_ivar("_fillColor"),new objj_ivar("_cornerRadius"),new objj_ivar("_borderWidth"),new objj_ivar("_contentMargin"),new objj_ivar("_contentView"),new objj_ivar("_title"),new objj_ivar("_titlePosition"),new objj_ivar("_titleView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("title"),function(_3,_4){
with(_3){
return _title;
}
}),new objj_method(sel_getUid("_setTitle:"),function(_5,_6,_7){
with(_5){
_title=_7;
}
}),new objj_method(sel_getUid("titlePosition"),function(_8,_9){
with(_8){
return _titlePosition;
}
}),new objj_method(sel_getUid("_setTitlePosition:"),function(_a,_b,_c){
with(_a){
_titlePosition=_c;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_d,_e,_f){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPBox").super_class},"initWithFrame:",_f);
if(_d){
_borderType=CPBezelBorder;
_fillColor=objj_msgSend(CPColor,"clearColor");
_borderColor=objj_msgSend(CPColor,"blackColor");
_borderWidth=1;
_contentMargin=CGSizeMake(0,0);
_titlePosition=CPNoTitle;
_titleView=objj_msgSend(CPTextField,"labelWithTitle:","");
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",objj_msgSend(_d,"bounds"));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_d,"setAutoresizesSubviews:",YES);
objj_msgSend(_d,"addSubview:",_contentView);
}
return _d;
}
}),new objj_method(sel_getUid("borderRect"),function(_10,_11){
with(_10){
return objj_msgSend(_10,"bounds");
}
}),new objj_method(sel_getUid("borderType"),function(_12,_13){
with(_12){
return _borderType;
}
}),new objj_method(sel_getUid("setBorderType:"),function(_14,_15,_16){
with(_14){
if(_borderType===_16){
return;
}
_borderType=_16;
objj_msgSend(_14,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("boxType"),function(_17,_18){
with(_17){
return _boxType;
}
}),new objj_method(sel_getUid("setBoxType:"),function(_19,_1a,_1b){
with(_19){
if(_boxType===_1b){
return;
}
_boxType=_1b;
objj_msgSend(_19,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("borderColor"),function(_1c,_1d){
with(_1c){
return _borderColor;
}
}),new objj_method(sel_getUid("setBorderColor:"),function(_1e,_1f,_20){
with(_1e){
if(objj_msgSend(_20,"isEqual:",_borderColor)){
return;
}
_borderColor=_20;
objj_msgSend(_1e,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("borderWidth"),function(_21,_22){
with(_21){
return _borderWidth;
}
}),new objj_method(sel_getUid("setBorderWidth:"),function(_23,_24,_25){
with(_23){
if(_25===_borderWidth){
return;
}
_borderWidth=_25;
objj_msgSend(_23,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("cornerRadius"),function(_26,_27){
with(_26){
return _cornerRadius;
}
}),new objj_method(sel_getUid("setCornerRadius:"),function(_28,_29,_2a){
with(_28){
if(_2a===_cornerRadius){
return;
}
_cornerRadius=_2a;
objj_msgSend(_28,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("fillColor"),function(_2b,_2c){
with(_2b){
return _fillColor;
}
}),new objj_method(sel_getUid("setFillColor:"),function(_2d,_2e,_2f){
with(_2d){
if(objj_msgSend(_2f,"isEqual:",_fillColor)){
return;
}
_fillColor=_2f;
objj_msgSend(_2d,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("contentView"),function(_30,_31){
with(_30){
return _contentView;
}
}),new objj_method(sel_getUid("setContentView:"),function(_32,_33,_34){
with(_32){
if(_34===_contentView){
return;
}
objj_msgSend(_34,"setFrame:",CGRectInset(objj_msgSend(_32,"bounds"),_contentMargin.width+_borderWidth,_contentMargin.height+_borderWidth));
objj_msgSend(_34,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_32,"replaceSubview:with:",_contentView,_34);
_contentView=_34;
}
}),new objj_method(sel_getUid("contentViewMargins"),function(_35,_36){
with(_35){
return _contentMargin;
}
}),new objj_method(sel_getUid("setContentViewMargins:"),function(_37,_38,_39){
with(_37){
if(_39.width<0||_39.height<0){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"Margins must be positive");
}
_contentMargin=CGSizeMakeCopy(_39);
objj_msgSend(_37,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setFrameFromContentFrame:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(_3a,"_titleHeightOffset");
objj_msgSend(_3a,"setFrame:",CGRectInset(_3c,-(_contentMargin.width+_borderWidth),-(_contentMargin.height+_3d[0]+_borderWidth)));
objj_msgSend(_3a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setTitle:"),function(_3e,_3f,_40){
with(_3e){
if(_40==_title){
return;
}
_title=_40;
objj_msgSend(_3e,"_manageTitlePositioning");
}
}),new objj_method(sel_getUid("setTitlePosition:"),function(_41,_42,_43){
with(_41){
if(_43==_titlePosition){
return;
}
_titlePosition=_43;
objj_msgSend(_41,"_manageTitlePositioning");
}
}),new objj_method(sel_getUid("_manageTitlePositioning"),function(_44,_45){
with(_44){
if(_titlePosition==CPNoTitle){
objj_msgSend(_titleView,"removeFromSuperview");
objj_msgSend(_44,"setNeedsDisplay:",YES);
return;
}
objj_msgSend(_titleView,"setStringValue:",_title);
objj_msgSend(_titleView,"sizeToFit");
objj_msgSend(_44,"addSubview:",_titleView);
switch(_titlePosition){
case CPAtTop:
case CPAboveTop:
case CPBelowTop:
objj_msgSend(_titleView,"setFrameOrigin:",CPPointMake(5,0));
objj_msgSend(_titleView,"setAutoresizingMask:",CPViewNotSizable);
break;
case CPAboveBottom:
case CPAtBottom:
case CPBelowBottom:
var h=objj_msgSend(_titleView,"frameSize").height;
objj_msgSend(_titleView,"setFrameOrigin:",CPPointMake(5,objj_msgSend(_44,"frameSize").height-h));
objj_msgSend(_titleView,"setAutoresizingMask:",CPViewMinYMargin);
break;
}
objj_msgSend(_44,"sizeToFit");
objj_msgSend(_44,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("sizeToFit"),function(_46,_47){
with(_46){
var _48=objj_msgSend(_contentView,"frame"),_49=objj_msgSend(_46,"_titleHeightOffset");
if(!_48){
return;
}
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewNotSizable);
objj_msgSend(_46,"setFrameSize:",CGSizeMake(_48.size.width+_contentMargin.width*2,_48.size.height+_contentMargin.height*2+_49[0]));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_contentView,"setFrameOrigin:",CGPointMake(_contentMargin.width,_contentMargin.height+_49[1]));
}
}),new objj_method(sel_getUid("_titleHeightOffset"),function(_4a,_4b){
with(_4a){
if(_titlePosition==CPNoTitle){
return [0,0];
}
switch(_titlePosition){
case CPAtTop:
return [objj_msgSend(_titleView,"frameSize").height,objj_msgSend(_titleView,"frameSize").height];
case CPAtBottom:
return [objj_msgSend(_titleView,"frameSize").height,0];
default:
return [0,0];
}
}
}),new objj_method(sel_getUid("drawRect:"),function(_4c,_4d,_4e){
with(_4c){
if(_borderType===CPNoBorder){
return;
}
var _4f=CGRectMakeCopy(objj_msgSend(_4c,"bounds"));
switch(_boxType){
case CPBoxSeparator:
if(CGRectGetWidth(_4f)===5){
return objj_msgSend(_4c,"_drawVerticalSeperatorInRect:",_4f);
}else{
if(CGRectGetHeight(_4f)===5){
return objj_msgSend(_4c,"_drawHorizontalSeperatorInRect:",_4f);
}
}
break;
}
if(_titlePosition==CPAtTop){
_4f.origin.y+=objj_msgSend(_titleView,"frameSize").height;
_4f.size.height-=objj_msgSend(_titleView,"frameSize").height;
}
if(_titlePosition==CPAtBottom){
_4f.size.height-=objj_msgSend(_titleView,"frameSize").height;
}
switch(_borderType){
case CPBezelBorder:
objj_msgSend(_4c,"_drawBezelBorderInRect:",_4f);
break;
default:
case CPLineBorder:
objj_msgSend(_4c,"_drawLineBorderInRect:",_4f);
break;
}
}
}),new objj_method(sel_getUid("_drawHorizontalSeperatorInRect:"),function(_50,_51,_52){
with(_50){
var _53=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_53,objj_msgSend(_50,"borderColor"));
CGContextSetLineWidth(_53,1);
CGContextMoveToPoint(_53,CGRectGetMinX(_52),CGRectGetMinY(_52)+0.5);
CGContextAddLineToPoint(_53,CGRectGetWidth(_52),CGRectGetMinY(_52)+0.5);
CGContextStrokePath(_53);
}
}),new objj_method(sel_getUid("_drawVerticalSeperatorInRect:"),function(_54,_55,_56){
with(_54){
var _57=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_57,objj_msgSend(_54,"borderColor"));
CGContextSetLineWidth(_57,1);
CGContextMoveToPoint(_57,CGRectGetMinX(_56)+0.5,CGRectGetMinY(_56));
CGContextAddLineToPoint(_57,CGRectGetMinX(_56)+0.5,CGRectGetHeight(_56));
CGContextStrokePath(_57);
}
}),new objj_method(sel_getUid("_drawBezelBorderInRect:"),function(_58,_59,_5a){
with(_58){
var _5b=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_5c=[CPMinYEdge,CPMaxXEdge,CPMaxYEdge,CPMinXEdge],_5d=190/255,_5e=[142/255,_5d,_5d,_5d],_5f=_borderWidth;
while(_5f--){
_5a=CPDrawTiledRects(_5a,_5a,_5c,_5e);
}
CGContextSetFillColor(_5b,objj_msgSend(_58,"fillColor"));
CGContextFillRect(_5b,_5a);
}
}),new objj_method(sel_getUid("_drawLineBorderInRect:"),function(_60,_61,_62){
with(_60){
var _63=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
_62=CGRectInset(_62,_borderWidth/2,_borderWidth/2);
CGContextSetFillColor(_63,objj_msgSend(_60,"fillColor"));
CGContextSetStrokeColor(_63,objj_msgSend(_60,"borderColor"));
CGContextSetLineWidth(_63,_borderWidth);
CGContextFillRoundedRectangleInRect(_63,_62,_cornerRadius,YES,YES,YES,YES);
CGContextStrokeRoundedRectangleInRect(_63,_62,_cornerRadius,YES,YES,YES,YES);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("boxEnclosingView:"),function(_64,_65,_66){
with(_64){
var box=objj_msgSend(objj_msgSend(_64,"alloc"),"initWithFrame:",CGRectMakeZero()),_67=objj_msgSend(_66,"superview");
objj_msgSend(box,"setAutoresizingMask:",objj_msgSend(_66,"autoresizingMask"));
objj_msgSend(box,"setFrameFromContentFrame:",objj_msgSend(_66,"frame"));
objj_msgSend(_67,"replaceSubview:with:",_66,box);
objj_msgSend(box,"setContentView:",_66);
return box;
}
})]);
var _68="CPBoxTypeKey",_69="CPBoxBorderTypeKey",_6a="CPBoxBorderColorKey",_6b="CPBoxFillColorKey",_6c="CPBoxCornerRadiusKey",_6d="CPBoxBorderWidthKey",_6e="CPBoxContentMarginKey",_6f="CPBoxTitle",_70="CPBoxTitlePosition",_71="CPBoxTitleView";
var _1=objj_getClass("CPBox");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPBox\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_72,_73,_74){
with(_72){
_72=objj_msgSendSuper({receiver:_72,super_class:objj_getClass("CPBox").super_class},"initWithCoder:",_74);
if(_72){
_boxType=objj_msgSend(_74,"decodeIntForKey:",_68);
_borderType=objj_msgSend(_74,"decodeIntForKey:",_69);
_borderColor=objj_msgSend(_74,"decodeObjectForKey:",_6a);
_fillColor=objj_msgSend(_74,"decodeObjectForKey:",_6b);
_cornerRadius=objj_msgSend(_74,"decodeFloatForKey:",_6c);
_borderWidth=objj_msgSend(_74,"decodeFloatForKey:",_6d);
_contentMargin=objj_msgSend(_74,"decodeSizeForKey:",_6e);
_title=objj_msgSend(_74,"decodeObjectForKey:",_6f);
_titlePosition=objj_msgSend(_74,"decodeIntForKey:",_70);
_titleView=objj_msgSend(_74,"decodeObjectForKey:",_71)||objj_msgSend(CPTextField,"labelWithTitle:",_title);
_contentView=objj_msgSend(_72,"subviews")[0];
objj_msgSend(_72,"setAutoresizesSubviews:",YES);
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_72,"_manageTitlePositioning");
}
return _72;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_75,_76,_77){
with(_75){
objj_msgSendSuper({receiver:_75,super_class:objj_getClass("CPBox").super_class},"encodeWithCoder:",_77);
objj_msgSend(_77,"encodeInt:forKey:",_boxType,_68);
objj_msgSend(_77,"encodeInt:forKey:",_borderType,_69);
objj_msgSend(_77,"encodeObject:forKey:",_borderColor,_6a);
objj_msgSend(_77,"encodeObject:forKey:",_fillColor,_6b);
objj_msgSend(_77,"encodeFloat:forKey:",_cornerRadius,_6c);
objj_msgSend(_77,"encodeFloat:forKey:",_borderWidth,_6d);
objj_msgSend(_77,"encodeObject:forKey:",_title,_6f);
objj_msgSend(_77,"encodeInt:forKey:",_titlePosition,_70);
objj_msgSend(_77,"encodeObject:forKey:",_titleView,_71);
objj_msgSend(_77,"encodeSize:forKey:",_contentMargin,_6e);
}
})]);
p;11;CPBrowser.jt;36814;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;11;CPControl.ji;9;CPImage.ji;13;CPTableView.ji;13;CPTextField.ji;14;CPScrollView.jI;21;Foundation/CPObject.jt;36656;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPScrollView.j",YES);
var _1=objj_allocateClassPair(CPControl,"CPBrowser"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_delegate"),new objj_ivar("_pathSeparator"),new objj_ivar("_contentView"),new objj_ivar("_horizontalScrollView"),new objj_ivar("_prototypeView"),new objj_ivar("_tableViews"),new objj_ivar("_tableDelegates"),new objj_ivar("_rootItem"),new objj_ivar("_delegateSupportsImages"),new objj_ivar("_doubleAction"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_tableViewClass"),new objj_ivar("_rowHeight"),new objj_ivar("_imageWidth"),new objj_ivar("_leafWidth"),new objj_ivar("_minColumnWidth"),new objj_ivar("_defaultColumnWidth"),new objj_ivar("_columnWidths")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("doubleAction"),function(_3,_4){
with(_3){
return _doubleAction;
}
}),new objj_method(sel_getUid("setDoubleAction:"),function(_5,_6,_7){
with(_5){
_doubleAction=_7;
}
}),new objj_method(sel_getUid("tableViewClass"),function(_8,_9){
with(_8){
return _tableViewClass;
}
}),new objj_method(sel_getUid("setTableViewClass:"),function(_a,_b,_c){
with(_a){
_tableViewClass=_c;
}
}),new objj_method(sel_getUid("defaultColumnWidth"),function(_d,_e){
with(_d){
return _defaultColumnWidth;
}
}),new objj_method(sel_getUid("setDefaultColumnWidth:"),function(_f,_10,_11){
with(_f){
_defaultColumnWidth=_11;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_12,_13,_14){
with(_12){
if(_12=objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPBrowser").super_class},"initWithFrame:",_14)){
objj_msgSend(_12,"_init");
}
return _12;
}
}),new objj_method(sel_getUid("_init"),function(_15,_16){
with(_15){
_rowHeight=23;
_defaultColumnWidth=140;
_minColumnWidth=80;
_imageWidth=23;
_leafWidth=13;
_columnWidths=[];
_pathSeparator="/";
_tableViews=[];
_tableDelegates=[];
_allowsMultipleSelection=YES;
_allowsEmptySelection=YES;
_tableViewClass=objj_msgSend(_CPBrowserTableView,"class");
_prototypeView=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_prototypeView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_prototypeView,"setValue:forThemeAttribute:inState:",objj_msgSend(CPColor,"whiteColor"),"text-color",CPThemeStateSelectedDataView);
objj_msgSend(_prototypeView,"setLineBreakMode:",CPLineBreakByTruncatingTail);
_horizontalScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",objj_msgSend(_15,"bounds"));
objj_msgSend(_horizontalScrollView,"setHasVerticalScroller:",NO);
objj_msgSend(_horizontalScrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_horizontalScrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,CGRectGetHeight(objj_msgSend(_15,"bounds"))));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewHeightSizable);
objj_msgSend(_horizontalScrollView,"setDocumentView:",_contentView);
objj_msgSend(_15,"addSubview:",_horizontalScrollView);
}
}),new objj_method(sel_getUid("setPrototypeView:"),function(_17,_18,_19){
with(_17){
_prototypeView=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_19));
}
}),new objj_method(sel_getUid("prototypeView"),function(_1a,_1b){
with(_1a){
return objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_prototypeView));
}
}),new objj_method(sel_getUid("setDelegate:"),function(_1c,_1d,_1e){
with(_1c){
_delegate=_1e;
_delegateSupportsImages=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:imageValueForItem:"));
objj_msgSend(_1c,"loadColumnZero");
}
}),new objj_method(sel_getUid("delegate"),function(_1f,_20){
with(_1f){
return _delegate;
}
}),new objj_method(sel_getUid("tableViewInColumn:"),function(_21,_22,_23){
with(_21){
return _tableViews[_23];
}
}),new objj_method(sel_getUid("columnOfTableView:"),function(_24,_25,_26){
with(_24){
return objj_msgSend(_tableViews,"indexOfObject:",_26);
}
}),new objj_method(sel_getUid("loadColumnZero"),function(_27,_28){
with(_27){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("rootItemForBrowser:"))){
_rootItem=objj_msgSend(_delegate,"rootItemForBrowser:",_27);
}else{
_rootItem=nil;
}
objj_msgSend(_27,"setLastColumn:",-1);
objj_msgSend(_27,"addColumn");
}
}),new objj_method(sel_getUid("setLastColumn:"),function(_29,_2a,_2b){
with(_29){
if(_2b>=_tableViews.length){
return;
}
var _2c=_tableViews.length-1,_2d=_2b+1;
objj_msgSend(objj_msgSend(_tableViews.slice(_2d),"valueForKey:","enclosingScrollView"),"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
_tableViews=_tableViews.slice(0,_2d);
_tableDelegates=_tableDelegates.slice(0,_2d);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:didChangeLastColumn:toColumn:"))){
objj_msgSend(_delegate,"browser:didChangeLastColumn:toColumn:",_29,_2c,_2b);
}
objj_msgSend(_29,"tile");
}
}),new objj_method(sel_getUid("lastColumn"),function(_2e,_2f){
with(_2e){
return _tableViews.length-1;
}
}),new objj_method(sel_getUid("addColumn"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"lastColumn"),_33=_tableViews[_32],_34=objj_msgSend(_33,"selectedRowIndexes");
if(_32>=0&&objj_msgSend(_34,"count")>1){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Can't add column, column "+_32+" has invalid selection.");
}
var _35=_32+1,_36=_35===0?_rootItem:objj_msgSend(_tableDelegates[_32],"childAtIndex:",objj_msgSend(_34,"firstIndex"));
if(_35>0&&_36&&objj_msgSend(_30,"isLeafItem:",_36)){
return;
}
var _37=objj_msgSend(objj_msgSend(_tableViewClass,"alloc"),"initWithFrame:browser:",CGRectMakeZero(),_30);
objj_msgSend(_37,"setHeaderView:",nil);
objj_msgSend(_37,"setCornerView:",nil);
objj_msgSend(_37,"setAllowsMultipleSelection:",_allowsMultipleSelection);
objj_msgSend(_37,"setAllowsEmptySelection:",_allowsEmptySelection);
objj_msgSend(_37,"registerForDraggedTypes:",objj_msgSend(_30,"registeredDraggedTypes"));
objj_msgSend(_30,"_addTableColumnsToTableView:forColumnIndex:",_37,_35);
var _38=objj_msgSend(objj_msgSend(_CPBrowserTableDelegate,"alloc"),"init");
objj_msgSend(_38,"_setDelegate:",_delegate);
objj_msgSend(_38,"_setBrowser:",_30);
objj_msgSend(_38,"_setIndex:",_35);
objj_msgSend(_38,"_setItem:",_36);
_tableViews[_35]=_37;
_tableDelegates[_35]=_38;
objj_msgSend(_37,"setDelegate:",_38);
objj_msgSend(_37,"setDataSource:",_38);
objj_msgSend(_37,"setTarget:",_38);
objj_msgSend(_37,"setAction:",sel_getUid("_tableViewClicked:"));
objj_msgSend(_37,"setDoubleAction:",sel_getUid("_tableViewDoubleClicked:"));
objj_msgSend(_37,"setDraggingDestinationFeedbackStyle:",CPTableViewDraggingDestinationFeedbackStyleRegular);
var _39=objj_msgSend(objj_msgSend(_CPBrowserScrollView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_39,"_setBrowser:",_30);
objj_msgSend(_39,"setDocumentView:",_37);
objj_msgSend(_39,"setHasHorizontalScroller:",NO);
objj_msgSend(_39,"setAutoresizingMask:",CPViewHeightSizable);
objj_msgSend(_contentView,"addSubview:",_39);
objj_msgSend(_30,"tile");
objj_msgSend(_30,"scrollColumnToVisible:",_35);
}
}),new objj_method(sel_getUid("_addTableColumnsToTableView:forColumnIndex:"),function(_3a,_3b,_3c,_3d){
with(_3a){
if(_delegateSupportsImages){
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Image"),_3f=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_3f,"setImageScaling:",CPImageScaleProportionallyDown);
objj_msgSend(_3e,"setDataView:",_3f);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
}
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Content");
objj_msgSend(_3e,"setDataView:",_prototypeView);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
var _3e=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:","Leaf"),_3f=objj_msgSend(objj_msgSend(_CPBrowserLeafView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_3f,"setBranchImage:",objj_msgSend(objj_msgSend(_3a,"class"),"branchImage"));
objj_msgSend(_3f,"setHighlightedBranchImage:",objj_msgSend(objj_msgSend(_3a,"class"),"highlightedBranchImage"));
objj_msgSend(_3e,"setDataView:",_3f);
objj_msgSend(_3e,"setResizingMask:",CPTableColumnNoResizing);
objj_msgSend(_3c,"addTableColumn:",_3e);
}
}),new objj_method(sel_getUid("reloadColumn:"),function(_40,_41,_42){
with(_40){
objj_msgSend(objj_msgSend(_40,"tableViewInColumn:",_42),"reloadData");
}
}),new objj_method(sel_getUid("tile"),function(_43,_44){
with(_43){
var _45=0,_46=objj_msgSend(CPScroller,"scrollerWidth"),_47=CGRectGetHeight(objj_msgSend(_contentView,"bounds"));
for(var i=0,_48=_tableViews.length;i<_48;i++){
var _49=_tableViews[i],_4a=objj_msgSend(_49,"enclosingScrollView"),_4b=objj_msgSend(_43,"widthOfColumn:",i),_4c=CGRectGetHeight(objj_msgSend(_49,"bounds"));
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Image"),"setWidth:",_imageWidth);
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Content"),"setWidth:",objj_msgSend(_43,"columnContentWidthForColumnWidth:",_4b));
objj_msgSend(objj_msgSend(_49,"tableColumnWithIdentifier:","Leaf"),"setWidth:",_leafWidth);
objj_msgSend(_49,"setRowHeight:",_rowHeight);
objj_msgSend(_49,"setFrameSize:",CGSizeMake(_4b-_46,_4c));
objj_msgSend(_4a,"setFrameOrigin:",CGPointMake(_45,0));
objj_msgSend(_4a,"setFrameSize:",CGSizeMake(_4b,_47));
_45+=_4b;
}
objj_msgSend(_contentView,"setFrameSize:",CGSizeMake(_45,_47));
}
}),new objj_method(sel_getUid("rowAtPoint:"),function(_4d,_4e,_4f){
with(_4d){
var _50=objj_msgSend(_4d,"columnAtPoint:",_4f);
if(_50===-1){
return -1;
}
var _51=_tableViews[_50];
return objj_msgSend(_51,"rowAtPoint:",objj_msgSend(_51,"convertPoint:fromView:",_4f,_4d));
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(_52,_53,_54){
with(_52){
var _55=objj_msgSend(_contentView,"convertPoint:fromView:",_54,_52);
for(var i=0,_56=_tableViews.length;i<_56;i++){
var _57=objj_msgSend(objj_msgSend(_tableViews[i],"enclosingScrollView"),"frame");
if(CGRectContainsPoint(_57,_55)){
return i;
}
}
return -1;
}
}),new objj_method(sel_getUid("rectOfRow:inColumn:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=_tableViews[_5b],_5d=objj_msgSend(_5c,"rectOfRow:",_5a);
_5d.origin=objj_msgSend(_58,"convertPoint:fromView:",_5d.origin,_5c);
return _5d;
}
}),new objj_method(sel_getUid("itemAtRow:inColumn:"),function(_5e,_5f,row,_60){
with(_5e){
return objj_msgSend(_tableDelegates[_60],"childAtIndex:",row);
}
}),new objj_method(sel_getUid("isLeafItem:"),function(_61,_62,_63){
with(_61){
return objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:isLeafItem:"))&&objj_msgSend(_delegate,"browser:isLeafItem:",_61,_63);
}
}),new objj_method(sel_getUid("parentForItemsInColumn:"),function(_64,_65,_66){
with(_64){
return objj_msgSend(_tableDelegates[_66],"_item");
}
}),new objj_method(sel_getUid("selectedItems"),function(_67,_68){
with(_67){
var _69=objj_msgSend(_67,"selectedColumn"),_6a=objj_msgSend(_67,"selectedRowIndexesInColumn:",_69),set=objj_msgSend(CPSet,"set"),_6b=objj_msgSend(_6a,"firstIndex");
while(_6b!==CPNotFound){
objj_msgSend(set,"addObject:",objj_msgSend(_67,"itemAtRow:inColumn:",_6b,_69));
_6b=objj_msgSend(_6a,"indexGreaterThanIndex:",_6b);
}
return set;
}
}),new objj_method(sel_getUid("selectedItem"),function(_6c,_6d){
with(_6c){
var _6e=objj_msgSend(_6c,"selectedColumn"),_6f=objj_msgSend(_6c,"selectedRowInColumn:",_6e);
return objj_msgSend(_6c,"itemAtRow:inColumn:",_6f,_6e);
}
}),new objj_method(sel_getUid("trackMouse:"),function(_70,_71,_72){
with(_70){
}
}),new objj_method(sel_getUid("_column:clickedRow:"),function(_73,_74,_75,_76){
with(_73){
objj_msgSend(_73,"setLastColumn:",_75);
if(_76>=0){
objj_msgSend(_73,"addColumn");
}
objj_msgSend(_73,"doClick:",_73);
}
}),new objj_method(sel_getUid("sendAction"),function(_77,_78){
with(_77){
objj_msgSend(_77,"sendAction:to:",_action,_target);
}
}),new objj_method(sel_getUid("doClick:"),function(_79,_7a,_7b){
with(_79){
objj_msgSend(_79,"sendAction:to:",_action,_target);
}
}),new objj_method(sel_getUid("doDoubleClick:"),function(_7c,_7d,_7e){
with(_7c){
objj_msgSend(_7c,"sendAction:to:",_doubleAction,_target);
}
}),new objj_method(sel_getUid("keyDown:"),function(_7f,_80,_81){
with(_7f){
var _82=objj_msgSend(_7f,"selectedColumn");
if(_82===-1){
return;
}
objj_msgSend(_tableViews[_82],"keyDown:",_81);
}
}),new objj_method(sel_getUid("columnContentWidthForColumnWidth:"),function(_83,_84,_85){
with(_83){
var _86=objj_msgSend(_tableViews[0],"intercellSpacing").width;
return _85-(_leafWidth+_86+(_delegateSupportsImages?_imageWidth+_86:0))-_86-objj_msgSend(CPScroller,"scrollerWidth");
}
}),new objj_method(sel_getUid("columnWidthForColumnContentWidth:"),function(_87,_88,_89){
with(_87){
var _8a=objj_msgSend(_tableViews[0],"intercellSpacing").width;
return _89+(_leafWidth+_8a+(_delegateSupportsImages?_imageWidth+_8a:0))+_8a+objj_msgSend(CPScroller,"scrollerWidth");
}
}),new objj_method(sel_getUid("setImageWidth:"),function(_8b,_8c,_8d){
with(_8b){
_imageWidth=_8d;
objj_msgSend(_8b,"tile");
}
}),new objj_method(sel_getUid("imageWidth"),function(_8e,_8f){
with(_8e){
return _imageWidth;
}
}),new objj_method(sel_getUid("setMinColumnWidth:"),function(_90,_91,_92){
with(_90){
_minColumnWidth=_92;
objj_msgSend(_90,"tile");
}
}),new objj_method(sel_getUid("minColumnWidth"),function(_93,_94){
with(_93){
return _minColumnWidth;
}
}),new objj_method(sel_getUid("setWidth:ofColumn:"),function(_95,_96,_97,_98){
with(_95){
_columnWidths[_98]=_97;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:didResizeColumn:"))){
objj_msgSend(_delegate,"browser:didResizeColumn:",_95,_98);
}
objj_msgSend(_95,"tile");
}
}),new objj_method(sel_getUid("widthOfColumn:"),function(_99,_9a,_9b){
with(_99){
var _9c=_columnWidths[_9b];
if(_9c==null){
_9c=_defaultColumnWidth;
}
return MAX(objj_msgSend(CPScroller,"scrollerWidth"),MAX(_minColumnWidth,_9c));
}
}),new objj_method(sel_getUid("setRowHeight:"),function(_9d,_9e,_9f){
with(_9d){
_rowHeight=_9f;
}
}),new objj_method(sel_getUid("rowHeight"),function(_a0,_a1){
with(_a0){
return _rowHeight;
}
}),new objj_method(sel_getUid("scrollColumnToVisible:"),function(_a2,_a3,_a4){
with(_a2){
objj_msgSend(_contentView,"scrollRectToVisible:",objj_msgSend(objj_msgSend(objj_msgSend(_a2,"tableViewInColumn:",_a4),"enclosingScrollView"),"frame"));
}
}),new objj_method(sel_getUid("scrollRowToVisible:inColumn:"),function(_a5,_a6,_a7,_a8){
with(_a5){
objj_msgSend(_a5,"scrollColumnToVisible:",_a8);
objj_msgSend(objj_msgSend(_a5,"tableViewInColumn:",_a8),"scrollRowToVisible:",_a7);
}
}),new objj_method(sel_getUid("autohidesScroller"),function(_a9,_aa){
with(_a9){
return objj_msgSend(_horizontalScrollView,"autohidesScrollers");
}
}),new objj_method(sel_getUid("setAutohidesScroller:"),function(_ab,_ac,_ad){
with(_ab){
objj_msgSend(_horizontalScrollView,"setAutohidesScrollers:",_ad);
}
}),new objj_method(sel_getUid("selectedRowInColumn:"),function(_ae,_af,_b0){
with(_ae){
if(_b0>objj_msgSend(_ae,"lastColumn")||_b0<0){
return -1;
}
return objj_msgSend(_tableViews[_b0],"selectedRow");
}
}),new objj_method(sel_getUid("selectedColumn"),function(_b1,_b2){
with(_b1){
var _b3=objj_msgSend(_b1,"lastColumn"),row=objj_msgSend(_b1,"selectedRowInColumn:",_b3);
if(row>=0){
return _b3;
}else{
return _b3-1;
}
}
}),new objj_method(sel_getUid("selectRow:inColumn:"),function(_b4,_b5,row,_b6){
with(_b4){
var _b7=row===-1?objj_msgSend(CPIndexSet,"indexSet"):objj_msgSend(CPIndexSet,"indexSetWithIndex:",row);
objj_msgSend(_b4,"selectRowIndexes:inColumn:",_b7,_b6);
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_b8,_b9){
with(_b8){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_ba,_bb,_bc){
with(_ba){
if(_allowsMultipleSelection===_bc){
return;
}
_allowsMultipleSelection=_bc;
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setAllowsMultipleSelection:"),_bc);
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_bd,_be){
with(_bd){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_bf,_c0,_c1){
with(_bf){
if(_allowsEmptySelection===_c1){
return;
}
_allowsEmptySelection=_c1;
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setAllowsEmptySelection:"),_c1);
}
}),new objj_method(sel_getUid("selectedRowIndexesInColumn:"),function(_c2,_c3,_c4){
with(_c2){
if(_c4<0||_c4>objj_msgSend(_c2,"lastColumn")+1){
return objj_msgSend(CPIndexSet,"indexSet");
}
return objj_msgSend(objj_msgSend(_c2,"tableViewInColumn:",_c4),"selectedRowIndexes");
}
}),new objj_method(sel_getUid("selectRowIndexes:inColumn:"),function(_c5,_c6,_c7,_c8){
with(_c5){
if(_c8<0||_c8>objj_msgSend(_c5,"lastColumn")+1){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:selectionIndexesForProposedSelection:inColumn:"))){
_c7=objj_msgSend(_delegate,"browser:selectionIndexesForProposedSelection:inColumn:",_c5,_c7,_c8);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:shouldSelectRowIndexes:inColumn:"))&&!objj_msgSend(_delegate,"browser:shouldSelectRowIndexes:inColumn:",_c5,_c7,_c8)){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browserSelectionIsChanging:"))){
objj_msgSend(_delegate,"browserSelectionIsChanging:",_c5);
}
if(_c8>objj_msgSend(_c5,"lastColumn")){
objj_msgSend(_c5,"addColumn");
}
objj_msgSend(_c5,"setLastColumn:",_c8);
objj_msgSend(objj_msgSend(_c5,"tableViewInColumn:",_c8),"selectRowIndexes:byExtendingSelection:",_c7,NO);
objj_msgSend(_c5,"scrollColumnToVisible:",_c8);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browserSelectionDidChange:"))){
objj_msgSend(_delegate,"browserSelectionDidChange:",_c5);
}
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_c9,_ca,_cb){
with(_c9){
objj_msgSendSuper({receiver:_c9,super_class:objj_getClass("CPBrowser").super_class},"setBackgroundColor:",_cb);
objj_msgSend(_contentView,"setBackgroundColor:",_cb);
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_cc,_cd){
with(_cc){
return YES;
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(_ce,_cf,_d0){
with(_ce){
objj_msgSendSuper({receiver:_ce,super_class:objj_getClass("CPBrowser").super_class},"registerForDraggedTypes:",_d0);
objj_msgSend(_tableViews,"makeObjectsPerformSelector:withObject:",sel_getUid("registerForDraggedTypes:"),_d0);
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:inColumn:withEvent:"),function(_d1,_d2,_d3,_d4,_d5){
with(_d1){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:canDragRowsWithIndexes:inColumn:withEvent:"))){
return objj_msgSend(_delegate,"browser:canDragRowsWithIndexes:inColumn:withEvent:",_d1,_d3,_d4,_d5);
}
return YES;
}
}),new objj_method(sel_getUid("draggingImageForRowsWithIndexes:inColumn:withEvent:offset:"),function(_d6,_d7,_d8,_d9,_da,_db){
with(_d6){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:"))){
return objj_msgSend(_delegate,"browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:",_d6,_d8,_d9,_da,_db);
}
return nil;
}
}),new objj_method(sel_getUid("draggingViewForRowsWithIndexes:inColumn:withEvent:offset:"),function(_dc,_dd,_de,_df,_e0,_e1){
with(_dc){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:"))){
return objj_msgSend(_delegate,"browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:",_dc,_de,_df,_e0,_e1);
}
return nil;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("branchImage"),function(_e2,_e3){
with(_e2){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPBrowser,"class")),"pathForResource:","browser-leaf.png"),CGSizeMake(9,9));
}
}),new objj_method(sel_getUid("highlightedBranchImage"),function(_e4,_e5){
with(_e4){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPBrowser,"class")),"pathForResource:","browser-leaf-highlighted.png"),CGSizeMake(9,9));
}
})]);
var _1=objj_getClass("CPBrowser");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPBrowser\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_e6,_e7,_e8){
with(_e6){
_e6=objj_msgSendSuper({receiver:_e6,super_class:objj_getClass("CPBrowser").super_class},"initWithCoder:",_e8);
if(_e6){
objj_msgSend(_e6,"_init");
_allowsEmptySelection=objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAllowsEmptySelectionKey");
_allowsMultipleSelection=objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAllowsMultipleSelectionKey");
_prototypeView=objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserPrototypeViewKey");
_rowHeight=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserRowHeightKey");
_imageWidth=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserImageWidthKey");
_minColumnWidth=objj_msgSend(_e8,"decodeFloatForKey:","CPBrowserMinColumnWidthKey");
_columnWidths=objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserColumnWidthsKey");
objj_msgSend(_e6,"setDelegate:",objj_msgSend(_e8,"decodeObjectForKey:","CPBrowserDelegateKey"));
objj_msgSend(_e6,"setAutohidesScroller:",objj_msgSend(_e8,"decodeBoolForKey:","CPBrowserAutohidesScrollerKey"));
}
return _e6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e9,_ea,_eb){
with(_e9){
var _ec=_subviews;
_subviews=[];
objj_msgSendSuper({receiver:_e9,super_class:objj_getClass("CPBrowser").super_class},"encodeWithCoder:",_eb);
_subviews=_ec;
objj_msgSend(_eb,"encodeBool:forKey:",objj_msgSend(_e9,"autohidesScroller"),"CPBrowserAutohidesScrollerKey");
objj_msgSend(_eb,"encodeBool:forKey:",_allowsEmptySelection,"CPBrowserAllowsEmptySelectionKey");
objj_msgSend(_eb,"encodeBool:forKey:",_allowsMultipleSelection,"CPBrowserAllowsMultipleSelectionKey");
objj_msgSend(_eb,"encodeObject:forKey:",_delegate,"CPBrowserDelegateKey");
objj_msgSend(_eb,"encodeObject:forKey:",_prototypeView,"CPBrowserPrototypeViewKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_rowHeight,"CPBrowserRowHeightKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_imageWidth,"CPBrowserImageWidthKey");
objj_msgSend(_eb,"encodeFloat:forKey:",_minColumnWidth,"CPBrowserMinColumnWidthKey");
objj_msgSend(_eb,"encodeObject:forKey:",_columnWidths,"CPBrowserColumnWidthsKey");
}
})]);
var _ed=nil;
var _1=objj_allocateClassPair(CPView,"_CPBrowserResizeControl"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownX"),new objj_ivar("_browser"),new objj_ivar("_index"),new objj_ivar("_width")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_ee,_ef,_f0){
with(_ee){
if(_ee=objj_msgSendSuper({receiver:_ee,super_class:objj_getClass("_CPBrowserResizeControl").super_class},"initWithFrame:",_f0)){
objj_msgSend(_ee,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(_ee,"class"),"backgroundImage")));
}
return _ee;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_f1,_f2,_f3){
with(_f1){
_mouseDownX=objj_msgSend(_f3,"locationInWindow").x;
_browser=objj_msgSend(objj_msgSend(_f1,"superview"),"_browser");
_index=objj_msgSend(_browser,"columnOfTableView:",objj_msgSend(objj_msgSend(_f1,"superview"),"documentView"));
_width=objj_msgSend(_browser,"widthOfColumn:",_index);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_f4,_f5,_f6){
with(_f4){
var _f7=objj_msgSend(_f6,"locationInWindow").x-_mouseDownX;
objj_msgSend(_browser,"setWidth:ofColumn:",_width+_f7,_index);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_f8,_f9,_fa){
with(_f8){
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("backgroundImage"),function(_fb,_fc){
with(_fb){
if(!_ed){
var _fd=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_fb,"class")),"pathForResource:","browser-resize-control.png");
_ed=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",_fd,CGSizeMake(15,14));
}
return _ed;
}
})]);
var _1=objj_allocateClassPair(CPScrollView,"_CPBrowserScrollView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_resizeControl"),new objj_ivar("_browser")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_browser"),function(_fe,_ff){
with(_fe){
return _browser;
}
}),new objj_method(sel_getUid("_setBrowser:"),function(self,_100,_101){
with(self){
_browser=_101;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(self,_102,_103){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserScrollView").super_class},"initWithFrame:",_103)){
_resizeControl=objj_msgSend(objj_msgSend(_CPBrowserResizeControl,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(self,"addSubview:",_resizeControl);
}
return self;
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(self,_104,_105){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserScrollView").super_class},"reflectScrolledClipView:",_105);
var _106=objj_msgSend(_verticalScroller,"frame");
_106.size.height=CGRectGetHeight(objj_msgSend(self,"bounds"))-14-_106.origin.y;
objj_msgSend(_verticalScroller,"setFrameSize:",_106.size);
var _107=CGRectMake(CGRectGetMinX(_106),CGRectGetMaxY(_106),objj_msgSend(CPScroller,"scrollerWidth"),14);
objj_msgSend(_resizeControl,"setFrame:",_107);
}
})]);
var _1=objj_allocateClassPair(CPTableView,"_CPBrowserTableView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_browser")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:browser:"),function(self,_108,_109,_10a){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"initWithFrame:",_109)){
_browser=_10a;
}
return self;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(self,_10b){
with(self){
return NO;
}
}),new objj_method(sel_getUid("mouseDown:"),function(self,_10c,_10d){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"mouseDown:",_10d);
objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",_browser);
}
}),new objj_method(sel_getUid("browserView"),function(self,_10e){
with(self){
return _browser;
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"),function(self,_10f,_110,_111){
with(self){
return objj_msgSend(_browser,"canDragRowsWithIndexes:inColumn:withEvent:",_110,objj_msgSend(_browser,"columnOfTableView:",self),objj_msgSend(CPApp,"currentEvent"));
}
}),new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"),function(self,_112,_113,_114,_115,_116){
with(self){
return objj_msgSend(_browser,"draggingImageForRowsWithIndexes:inColumn:withEvent:offset:",_113,objj_msgSend(_browser,"columnOfTableView:",self),_115,_116)||objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"dragImageForRowsWithIndexes:tableColumns:event:offset:",_113,_114,_115,_116);
}
}),new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"),function(self,_117,_118,_119,_11a,_11b){
with(self){
var _11c=_119.length;
while(_11c--){
if(objj_msgSend(_119[_11c],"identifier")==="Leaf"){
objj_msgSend(_119,"removeObject:",_119[_11c]);
}
}
return objj_msgSend(_browser,"draggingViewForRowsWithIndexes:inColumn:withEvent:offset:",_118,objj_msgSend(_browser,"columnOfTableView:",self),_11a,_11b)||objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"dragViewForRowsWithIndexes:tableColumns:event:offset:",_118,_119,_11a,_11b);
}
}),new objj_method(sel_getUid("moveUp:"),function(self,_11d,_11e){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"moveUp:",_11e);
objj_msgSend(_browser,"selectRow:inColumn:",objj_msgSend(self,"selectedRow"),objj_msgSend(_browser,"selectedColumn"));
}
}),new objj_method(sel_getUid("moveDown:"),function(self,_11f,_120){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableView").super_class},"moveDown:",_120);
objj_msgSend(_browser,"selectRow:inColumn:",objj_msgSend(self,"selectedRow"),objj_msgSend(_browser,"selectedColumn"));
}
}),new objj_method(sel_getUid("moveLeft:"),function(self,_121,_122){
with(self){
var _123=objj_msgSend(_browser,"selectedColumn")-1,_124=objj_msgSend(_browser,"selectedRowInColumn:",_123);
objj_msgSend(_browser,"selectRow:inColumn:",_124,_123);
}
}),new objj_method(sel_getUid("moveRight:"),function(self,_125,_126){
with(self){
objj_msgSend(_browser,"selectRow:inColumn:",0,objj_msgSend(_browser,"selectedColumn")+1);
}
})]);
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"_CPBrowserTableDelegate"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_browser"),new objj_ivar("_index"),new objj_ivar("_delegate"),new objj_ivar("_item")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_browser"),function(self,_127){
with(self){
return _browser;
}
}),new objj_method(sel_getUid("_setBrowser:"),function(self,_128,_129){
with(self){
_browser=_129;
}
}),new objj_method(sel_getUid("_index"),function(self,_12a){
with(self){
return _index;
}
}),new objj_method(sel_getUid("_setIndex:"),function(self,_12b,_12c){
with(self){
_index=_12c;
}
}),new objj_method(sel_getUid("_delegate"),function(self,_12d){
with(self){
return _delegate;
}
}),new objj_method(sel_getUid("_setDelegate:"),function(self,_12e,_12f){
with(self){
_delegate=_12f;
}
}),new objj_method(sel_getUid("_item"),function(self,_130){
with(self){
return _item;
}
}),new objj_method(sel_getUid("_setItem:"),function(self,_131,_132){
with(self){
_item=_132;
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(self,_133,_134){
with(self){
return objj_msgSend(_delegate,"browser:numberOfChildrenOfItem:",_browser,_item);
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(self,_135,_136,_137,row){
with(self){
if(objj_msgSend(_137,"identifier")==="Image"){
return objj_msgSend(_delegate,"browser:imageValueForItem:",_browser,objj_msgSend(self,"childAtIndex:",row));
}else{
if(objj_msgSend(_137,"identifier")==="Leaf"){
return !objj_msgSend(_browser,"isLeafItem:",objj_msgSend(self,"childAtIndex:",row));
}else{
return objj_msgSend(_delegate,"browser:objectValueForItem:",_browser,objj_msgSend(self,"childAtIndex:",row));
}
}
}
}),new objj_method(sel_getUid("_tableViewDoubleClicked:"),function(self,_138,_139){
with(self){
objj_msgSend(_browser,"doDoubleClick:",self);
}
}),new objj_method(sel_getUid("_tableViewClicked:"),function(self,_13a,_13b){
with(self){
var _13c=objj_msgSend(_13b,"selectedRowIndexes");
objj_msgSend(_browser,"_column:clickedRow:",_index,objj_msgSend(_13c,"count")===1?objj_msgSend(_13c,"firstIndex"):-1);
}
}),new objj_method(sel_getUid("tableViewSelectionDidChange:"),function(self,_13d,_13e){
with(self){
var _13f=objj_msgSend(objj_msgSend(_13e,"object"),"selectedRowIndexes");
objj_msgSend(_browser,"selectRowIndexes:inColumn:",_13f,_index);
}
}),new objj_method(sel_getUid("childAtIndex:"),function(self,_140,_141){
with(self){
return objj_msgSend(_delegate,"browser:child:ofItem:",_browser,_141,_item);
}
}),new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"),function(self,_142,_143,info,row,_144){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:acceptDrop:atRow:column:dropOperation:"))){
return objj_msgSend(_delegate,"browser:acceptDrop:atRow:column:dropOperation:",_browser,info,row,_index,_144);
}else{
return NO;
}
}
}),new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"),function(self,_145,_146,info,row,_147){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:validateDrop:proposedRow:column:dropOperation:"))){
return objj_msgSend(_delegate,"browser:validateDrop:proposedRow:column:dropOperation:",_browser,info,row,_index,_147);
}else{
return CPDragOperationNone;
}
}
}),new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"),function(self,_148,_149,_14a,_14b){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"))){
return objj_msgSend(_delegate,"browser:writeRowsWithIndexes:inColumn:toPasteboard:",_browser,_14a,_index,_14b);
}else{
return NO;
}
}
}),new objj_method(sel_getUid("respondsToSelector:"),function(self,_14c,_14d){
with(self){
if(_14d===sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:")){
return objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"));
}else{
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserTableDelegate").super_class},"respondsToSelector:",_14d);
}
}
})]);
var _1=objj_allocateClassPair(CPView,"_CPBrowserLeafView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isLeaf"),new objj_ivar("_branchImage"),new objj_ivar("_highlightedBranchImage")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isLeaf"),function(self,_14e){
with(self){
return _isLeaf;
}
}),new objj_method(sel_getUid("branchImage"),function(self,_14f){
with(self){
return _branchImage;
}
}),new objj_method(sel_getUid("setBranchImage:"),function(self,_150,_151){
with(self){
_branchImage=_151;
}
}),new objj_method(sel_getUid("highlightedBranchImage"),function(self,_152){
with(self){
return _highlightedBranchImage;
}
}),new objj_method(sel_getUid("setHighlightedBranchImage:"),function(self,_153,_154){
with(self){
_highlightedBranchImage=_154;
}
}),new objj_method(sel_getUid("objectValue"),function(self,_155){
with(self){
return _isLeaf;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(self,_156,_157){
with(self){
_isLeaf=!!_157;
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(self,_158,_159){
with(self){
if(_159==="image-view"){
return CGRectInset(objj_msgSend(self,"bounds"),1,1);
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"rectForEphemeralSubviewNamed:",_159);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(self,_15a,_15b){
with(self){
if(_15b==="image-view"){
return objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"createEphemeralSubviewNamed:",_15b);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_15c){
with(self){
var _15d=objj_msgSend(self,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","image-view",CPWindowAbove,nil),_15e=objj_msgSend(self,"themeState")&CPThemeStateSelectedDataView;
objj_msgSend(_15d,"setImage:",_isLeaf?(_15e?_highlightedBranchImage:_branchImage):nil);
objj_msgSend(_15d,"setImageScaling:",CPImageScaleNone);
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_15f,_160){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"encodeWithCoder:",_160);
objj_msgSend(_160,"encodeBool:forKey:",_isLeaf,"_CPBrowserLeafViewIsLeafKey");
objj_msgSend(_160,"encodeObject:forKey:",_branchImage,"_CPBrowserLeafViewBranchImageKey");
objj_msgSend(_160,"encodeObject:forKey:",_highlightedBranchImage,"_CPBrowserLeafViewHighlightedBranchImageKey");
}
}),new objj_method(sel_getUid("initWithCoder:"),function(self,_161,_162){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPBrowserLeafView").super_class},"initWithCoder:",_162)){
_isLeaf=objj_msgSend(_162,"decodeBoolForKey:","_CPBrowserLeafViewIsLeafKey");
_branchImage=objj_msgSend(_162,"decodeObjectForKey:","_CPBrowserLeafViewBranchImageKey");
_highlightedBranchImage=objj_msgSend(_162,"decodeObjectForKey:","_CPBrowserLeafViewHighlightedBranchImageKey");
}
return self;
}
})]);
p;10;CPButton.jt;21904;@STATIC;1.0;i;21;_CPImageAndTextView.ji;12;CGGeometry.ji;11;CPControl.ji;17;CPStringDrawing.ji;12;CPCheckBox.ji;9;CPRadio.jt;21773;
objj_executeFile("_CPImageAndTextView.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPStringDrawing.j",YES);
CPRoundedBezelStyle=1;
CPRegularSquareBezelStyle=2;
CPThickSquareBezelStyle=3;
CPThickerSquareBezelStyle=4;
CPDisclosureBezelStyle=5;
CPShadowlessSquareBezelStyle=6;
CPCircularBezelStyle=7;
CPTexturedSquareBezelStyle=8;
CPHelpButtonBezelStyle=9;
CPSmallSquareBezelStyle=10;
CPTexturedRoundedBezelStyle=11;
CPRoundRectBezelStyle=12;
CPRecessedBezelStyle=13;
CPRoundedDisclosureBezelStyle=14;
CPHUDBezelStyle=-1;
CPMomentaryLightButton=0;
CPPushOnPushOffButton=1;
CPToggleButton=2;
CPSwitchButton=3;
CPRadioButton=4;
CPMomentaryChangeButton=5;
CPOnOffButton=6;
CPMomentaryPushInButton=7;
CPMomentaryPushButton=0;
CPMomentaryLight=7;
CPNoButtonMask=0;
CPContentsButtonMask=1;
CPPushInButtonMask=2;
CPGrayButtonMask=4;
CPBackgroundButtonMask=8;
CPNoCellMask=CPNoButtonMask;
CPContentsCellMask=CPContentsButtonMask;
CPPushInCellMask=CPPushInButtonMask;
CPChangeGrayCellMask=CPGrayButtonMask;
CPChangeBackgroundCellMask=CPBackgroundButtonMask;
CPButtonStateMixed=CPThemeState("mixed");
CPButtonStateBezelStyleRounded=CPThemeState("rounded");
var _1=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPButtonStateBezelStyleRounded,nil],[CPRoundedBezelStyle,CPRoundRectBezelStyle]);
CPButtonDefaultHeight=24;
CPButtonImageOffset=3;
var _2=objj_allocateClassPair(CPControl,"CPButton"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_allowsMixedState"),new objj_ivar("_title"),new objj_ivar("_alternateTitle"),new objj_ivar("_showsStateBy"),new objj_ivar("_highlightsBy"),new objj_ivar("_imageDimsWhenDisabled"),new objj_ivar("_bezelStyle"),new objj_ivar("_controlSize"),new objj_ivar("_keyEquivalent"),new objj_ivar("_keyEquivalentModifierMask"),new objj_ivar("_continuousDelayTimer"),new objj_ivar("_continuousTimer"),new objj_ivar("_periodicDelay"),new objj_ivar("_periodicInterval")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPButton").super_class},"initWithFrame:",_6);
if(_4){
objj_msgSend(_4,"setValue:forThemeAttribute:",CPCenterTextAlignment,"alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPCenterVerticalTextAlignment,"vertical-alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPImageLeft,"image-position");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPImageScaleNone,"image-scaling");
objj_msgSend(_4,"setBezelStyle:",CPRoundRectBezelStyle);
objj_msgSend(_4,"setBordered:",YES);
objj_msgSend(_4,"_init");
}
return _4;
}
}),new objj_method(sel_getUid("_init"),function(_7,_8){
with(_7){
_controlSize=CPRegularControlSize;
_keyEquivalent="";
_keyEquivalentModifierMask=0;
_periodicInterval=0.05;
_periodicDelay=0.5;
_imageDimsWhenDisabled=YES;
}
}),new objj_method(sel_getUid("allowsMixedState"),function(_9,_a){
with(_9){
return _allowsMixedState;
}
}),new objj_method(sel_getUid("setAllowsMixedState:"),function(_b,_c,_d){
with(_b){
_d=!!_d;
if(_allowsMixedState===_d){
return;
}
_allowsMixedState=_d;
if(!_allowsMixedState&&objj_msgSend(_b,"state")===CPMixedState){
objj_msgSend(_b,"setState:",CPOnState);
}
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_e,_f,_10){
with(_e){
if(!_10||_10===""||(objj_msgSend(_10,"intValue")===0)){
_10=CPOffState;
}else{
if(!objj_msgSend(_10,"isKindOfClass:",objj_msgSend(CPNumber,"class"))){
_10=CPOnState;
}else{
if(_10>=CPOnState){
_10=CPOnState;
}else{
if(_10<CPOffState){
if(objj_msgSend(_e,"allowsMixedState")){
_10=CPMixedState;
}else{
_10=CPOnState;
}
}
}
}
}
objj_msgSendSuper({receiver:_e,super_class:objj_getClass("CPButton").super_class},"setObjectValue:",_10);
switch(objj_msgSend(_e,"objectValue")){
case CPMixedState:
objj_msgSend(_e,"unsetThemeState:",CPThemeStateSelected);
objj_msgSend(_e,"setThemeState:",CPButtonStateMixed);
break;
case CPOnState:
objj_msgSend(_e,"unsetThemeState:",CPButtonStateMixed);
objj_msgSend(_e,"setThemeState:",CPThemeStateSelected);
break;
case CPOffState:
objj_msgSend(_e,"unsetThemeState:",CPThemeStateSelected|CPButtonStateMixed);
}
}
}),new objj_method(sel_getUid("nextState"),function(_11,_12){
with(_11){
if(objj_msgSend(_11,"allowsMixedState")){
var _13=objj_msgSend(_11,"state");
return _13-((_13===-1)?-2:1);
}
return 1-objj_msgSend(_11,"state");
}
}),new objj_method(sel_getUid("setNextState"),function(_14,_15){
with(_14){
if(objj_msgSend(_14,"infoForBinding:",CPValueBinding)){
objj_msgSend(_14,"setAllowsMixedState:",NO);
}
objj_msgSend(_14,"setState:",objj_msgSend(_14,"nextState"));
}
}),new objj_method(sel_getUid("setState:"),function(_16,_17,_18){
with(_16){
objj_msgSend(_16,"setIntValue:",_18);
}
}),new objj_method(sel_getUid("state"),function(_19,_1a){
with(_19){
return objj_msgSend(_19,"intValue");
}
}),new objj_method(sel_getUid("setTitle:"),function(_1b,_1c,_1d){
with(_1b){
if(_title===_1d){
return;
}
_title=_1d;
objj_msgSend(_1b,"setNeedsLayout");
objj_msgSend(_1b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("title"),function(_1e,_1f){
with(_1e){
return _title;
}
}),new objj_method(sel_getUid("setAlternateTitle:"),function(_20,_21,_22){
with(_20){
if(_alternateTitle===_22){
return;
}
_alternateTitle=_22;
objj_msgSend(_20,"setNeedsLayout");
objj_msgSend(_20,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("alternateTitle"),function(_23,_24){
with(_23){
return _alternateTitle;
}
}),new objj_method(sel_getUid("setImage:"),function(_25,_26,_27){
with(_25){
objj_msgSend(_25,"setValue:forThemeAttribute:",_27,"image");
}
}),new objj_method(sel_getUid("image"),function(_28,_29){
with(_28){
return objj_msgSend(_28,"valueForThemeAttribute:inState:","image",CPThemeStateNormal);
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2a,"setValue:forThemeAttribute:inState:",_2c,"image",CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("alternateImage"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"valueForThemeAttribute:inState:","image",CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("setImageOffset:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"setValue:forThemeAttribute:",_31,"image-offset");
}
}),new objj_method(sel_getUid("imageOffset"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"valueForThemeAttribute:","image-offset");
}
}),new objj_method(sel_getUid("setShowsStateBy:"),function(_34,_35,_36){
with(_34){
if(_showsStateBy===_36){
return;
}
_showsStateBy=_36;
objj_msgSend(_34,"setNeedsDisplay:",YES);
objj_msgSend(_34,"setNeedsLayout");
}
}),new objj_method(sel_getUid("showsStateBy"),function(_37,_38){
with(_37){
return _showsStateBy;
}
}),new objj_method(sel_getUid("setHighlightsBy:"),function(_39,_3a,_3b){
with(_39){
if(_highlightsBy===_3b){
return;
}
_highlightsBy=_3b;
if(objj_msgSend(_39,"hasThemeState:",CPThemeStateHighlighted)){
objj_msgSend(_39,"setNeedsDisplay:",YES);
objj_msgSend(_39,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("setButtonType:"),function(_3c,_3d,_3e){
with(_3c){
switch(_3e){
case CPMomentaryLightButton:
objj_msgSend(_3c,"setHighlightsBy:",CPChangeBackgroundCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPMomentaryPushInButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPChangeGrayCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPMomentaryChangeButton:
objj_msgSend(_3c,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPNoCellMask);
break;
case CPPushOnPushOffButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPChangeGrayCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPChangeBackgroundCellMask);
break;
case CPOnOffButton:
objj_msgSend(_3c,"setHighlightsBy:",CPChangeBackgroundCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPChangeBackgroundCellMask);
break;
case CPToggleButton:
objj_msgSend(_3c,"setHighlightsBy:",CPPushInCellMask|CPContentsCellMask);
objj_msgSend(_3c,"setShowsStateBy:",CPContentsCellMask);
break;
case CPSwitchButton:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"The CPSwitchButton type is not supported in Cappuccino, use the CPCheckBox class instead.");
case CPRadioButton:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"The CPRadioButton type is not supported in Cappuccino, use the CPRadio class instead.");
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Unknown button type.");
}
objj_msgSend(_3c,"setImageDimsWhenDisabled:",YES);
}
}),new objj_method(sel_getUid("setImageDimsWhenDisabled:"),function(_3f,_40,_41){
with(_3f){
_41=!!_41;
if(_imageDimsWhenDisabled===_41){
return;
}
_imageDimsWhenDisabled=_41;
if(objj_msgSend(_3f,"hasThemeState:",CPThemeStateDisabled)){
objj_msgSend(_3f,"setNeedsDisplay:",YES);
objj_msgSend(_3f,"setNeedsLayout");
}
}
}),new objj_method(sel_getUid("imageDimsWhenDisabled"),function(_42,_43){
with(_42){
return _imageDimsWhenDisabled;
}
}),new objj_method(sel_getUid("setPeriodicDelay:interval:"),function(_44,_45,_46,_47){
with(_44){
_periodicDelay=_46;
_periodicInterval=_47;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_48,_49,_4a){
with(_48){
if(objj_msgSend(_48,"isContinuous")){
_continuousDelayTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",_periodicDelay,function(){
if(!_continuousTimer){
_continuousTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_periodicInterval,_48,sel_getUid("onContinousEvent:"),_4a,YES);
}
},NO);
}
objj_msgSendSuper({receiver:_48,super_class:objj_getClass("CPButton").super_class},"mouseDown:",_4a);
}
}),new objj_method(sel_getUid("onContinousEvent:"),function(_4b,_4c,_4d){
with(_4b){
if(_target&&_action&&objj_msgSend(_target,"respondsToSelector:",_action)){
objj_msgSend(_target,"performSelector:withObject:",_action,_4b);
}
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(_4e,"highlight:",YES);
return objj_msgSendSuper({receiver:_4e,super_class:objj_getClass("CPButton").super_class},"startTrackingAt:",_50);
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_51,_52,_53,_54,_55){
with(_51){
objj_msgSend(_51,"highlight:",NO);
objj_msgSend(_51,"invalidateTimers");
objj_msgSendSuper({receiver:_51,super_class:objj_getClass("CPButton").super_class},"stopTracking:at:mouseIsUp:",_53,_54,_55);
if(_55&&CGRectContainsPoint(objj_msgSend(_51,"bounds"),_54)){
objj_msgSend(_51,"setNextState");
}
}
}),new objj_method(sel_getUid("invalidateTimers"),function(_56,_57){
with(_56){
if(_continuousTimer){
objj_msgSend(_continuousTimer,"invalidate");
_continuousTimer=nil;
}
if(_continuousDelayTimer){
objj_msgSend(_continuousDelayTimer,"invalidate");
_continuousDelayTimer=nil;
}
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_58,_59,_5a){
with(_58){
var _5b=objj_msgSend(_58,"currentValueForThemeAttribute:","content-inset");
if(((_5b).top===0&&(_5b).right===0&&(_5b).bottom===0&&(_5b).left===0)){
return _5a;
}
_5a={origin:{x:_5a.origin.x,y:_5a.origin.y},size:{width:_5a.size.width,height:_5a.size.height}};
_5a.origin.x+=_5b.left;
_5a.origin.y+=_5b.top;
_5a.size.width-=_5b.left+_5b.right;
_5a.size.height-=_5b.top+_5b.bottom;
return _5a;
}
}),new objj_method(sel_getUid("bezelRectForBounds:"),function(_5c,_5d,_5e){
with(_5c){
if(!objj_msgSend(_5c,"isBordered")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _5f=objj_msgSend(_5c,"currentValueForThemeAttribute:","bezel-inset");
if(((_5f).top===0&&(_5f).right===0&&(_5f).bottom===0&&(_5f).left===0)){
return _5e;
}
_5e={origin:{x:_5e.origin.x,y:_5e.origin.y},size:{width:_5e.size.width,height:_5e.size.height}};
_5e.origin.x+=_5f.left;
_5e.origin.y+=_5f.top;
_5e.size.width-=_5f.left+_5f.right;
_5e.size.height-=_5f.top+_5f.bottom;
return _5e;
}
}),new objj_method(sel_getUid("_minimumFrameSize"),function(_60,_61){
with(_60){
var _62=CGSizeMakeZero(),_63=objj_msgSend(_60,"ephemeralSubviewNamed:","content-view");
if(_63){
objj_msgSend(_63,"sizeToFit");
_62=objj_msgSend(_63,"frameSize");
}else{
_62=objj_msgSend((objj_msgSend(_60,"title")||" "),"sizeWithFont:",objj_msgSend(_60,"currentValueForThemeAttribute:","font"));
}
var _64=objj_msgSend(_60,"currentValueForThemeAttribute:","content-inset"),_65=objj_msgSend(_60,"currentValueForThemeAttribute:","min-size"),_66=objj_msgSend(_60,"currentValueForThemeAttribute:","max-size");
_62.width=MAX(_62.width+_64.left+_64.right,_65.width);
_62.height=MAX(_62.height+_64.top+_64.bottom,_65.height);
if(_66.width>=0){
_62.width=MIN(_62.width,_66.width);
}
if(_66.height>=0){
_62.height=MIN(_62.height,_66.height);
}
return _62;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_67,_68){
with(_67){
objj_msgSend(_67,"layoutSubviews");
objj_msgSend(_67,"setFrameSize:",objj_msgSend(_67,"_minimumFrameSize"));
if(objj_msgSend(_67,"ephemeralSubviewNamed:","content-view")){
objj_msgSend(_67,"layoutSubviews");
}
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_69,_6a,_6b){
with(_69){
if(_6b==="bezel-view"){
return objj_msgSend(_69,"bezelRectForBounds:",objj_msgSend(_69,"bounds"));
}else{
if(_6b==="content-view"){
return objj_msgSend(_69,"contentRectForBounds:",objj_msgSend(_69,"bounds"));
}
}
return objj_msgSendSuper({receiver:_69,super_class:objj_getClass("CPButton").super_class},"rectForEphemeralSubviewNamed:",_6b);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_6c,_6d,_6e){
with(_6c){
if(_6e==="bezel-view"){
var _6f=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_6f,"setHitTests:",NO);
return _6f;
}else{
return objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_70,_71){
with(_70){
var _72=objj_msgSend(_70,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
objj_msgSend(_72,"setBackgroundColor:",objj_msgSend(_70,"currentValueForThemeAttribute:","bezel-color"));
var _73=objj_msgSend(_70,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_73){
objj_msgSend(_73,"setText:",(objj_msgSend(_70,"hasThemeState:",CPThemeStateHighlighted)&&_alternateTitle)?_alternateTitle:_title);
objj_msgSend(_73,"setImage:",objj_msgSend(_70,"currentValueForThemeAttribute:","image"));
objj_msgSend(_73,"setImageOffset:",objj_msgSend(_70,"currentValueForThemeAttribute:","image-offset"));
objj_msgSend(_73,"setFont:",objj_msgSend(_70,"currentValueForThemeAttribute:","font"));
objj_msgSend(_73,"setTextColor:",objj_msgSend(_70,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_73,"setAlignment:",objj_msgSend(_70,"currentValueForThemeAttribute:","alignment"));
objj_msgSend(_73,"setVerticalAlignment:",objj_msgSend(_70,"currentValueForThemeAttribute:","vertical-alignment"));
objj_msgSend(_73,"setLineBreakMode:",objj_msgSend(_70,"currentValueForThemeAttribute:","line-break-mode"));
objj_msgSend(_73,"setTextShadowColor:",objj_msgSend(_70,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_73,"setTextShadowOffset:",objj_msgSend(_70,"currentValueForThemeAttribute:","text-shadow-offset"));
objj_msgSend(_73,"setImagePosition:",objj_msgSend(_70,"currentValueForThemeAttribute:","image-position"));
objj_msgSend(_73,"setImageScaling:",objj_msgSend(_70,"currentValueForThemeAttribute:","image-scaling"));
objj_msgSend(_73,"setDimsImage:",objj_msgSend(_70,"hasThemeState:",CPThemeStateDisabled)&&_imageDimsWhenDisabled);
}
}
}),new objj_method(sel_getUid("setBordered:"),function(_74,_75,_76){
with(_74){
if(_76){
objj_msgSend(_74,"setThemeState:",CPThemeStateBordered);
}else{
objj_msgSend(_74,"unsetThemeState:",CPThemeStateBordered);
}
}
}),new objj_method(sel_getUid("isBordered"),function(_77,_78){
with(_77){
return objj_msgSend(_77,"hasThemeState:",CPThemeStateBordered);
}
}),new objj_method(sel_getUid("setKeyEquivalent:"),function(_79,_7a,_7b){
with(_79){
_keyEquivalent=_7b||"";
if(_7b===CPNewlineCharacter||_7b===CPCarriageReturnCharacter){
objj_msgSend(_79,"setThemeState:",CPThemeStateDefault);
}else{
objj_msgSend(_79,"unsetThemeState:",CPThemeStateDefault);
}
}
}),new objj_method(sel_getUid("viewWillMoveToWindow:"),function(_7c,_7d,_7e){
with(_7c){
var _7f=objj_msgSend(_7c,"window");
if(_7f===_7e||_7e===nil){
return;
}
if(objj_msgSend(_7f,"defaultButton")===_7c){
objj_msgSend(_7f,"setDefaultButton:",nil);
}
if(objj_msgSend(_7c,"keyEquivalent")===CPNewlineCharacter||objj_msgSend(_7c,"keyEquivalent")===CPCarriageReturnCharacter){
objj_msgSend(_7e,"setDefaultButton:",_7c);
}
}
}),new objj_method(sel_getUid("keyEquivalent"),function(_80,_81){
with(_80){
return _keyEquivalent;
}
}),new objj_method(sel_getUid("setKeyEquivalentModifierMask:"),function(_82,_83,_84){
with(_82){
_keyEquivalentModifierMask=_84;
}
}),new objj_method(sel_getUid("keyEquivalentModifierMask"),function(_85,_86){
with(_85){
return _keyEquivalentModifierMask;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_87,_88,_89){
with(_87){
if(objj_msgSend(objj_msgSend(_87,"window"),"defaultButton")===_87){
return NO;
}
if(!objj_msgSend(_89,"_triggersKeyEquivalent:withModifierMask:",objj_msgSend(_87,"keyEquivalent"),objj_msgSend(_87,"keyEquivalentModifierMask"))){
return NO;
}
objj_msgSend(_87,"performClick:",nil);
return YES;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("buttonWithTitle:"),function(_8a,_8b,_8c){
with(_8a){
return objj_msgSend(_8a,"buttonWithTitle:theme:",_8c,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("buttonWithTitle:theme:"),function(_8d,_8e,_8f,_90){
with(_8d){
var _91=objj_msgSend(objj_msgSend(_8d,"alloc"),"init");
objj_msgSend(_91,"setTheme:",_90);
objj_msgSend(_91,"setTitle:",_8f);
objj_msgSend(_91,"sizeToFit");
return _91;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_92,_93){
with(_92){
return "button";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_94,_95){
with(_94){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),0,{top:(0),right:(0),bottom:(0),left:(0)},{top:(0),right:(0),bottom:(0),left:(0)},objj_msgSend(CPNull,"null")],["image","image-offset","bezel-inset","content-inset","bezel-color"]);
}
})]);
var _2=objj_getClass("CPButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("setBezelStyle:"),function(_96,_97,_98){
with(_96){
if(_98===_bezelStyle){
return;
}
var _99=objj_msgSend(_1,"objectForKey:",_bezelStyle),_9a=objj_msgSend(_1,"objectForKey:",_98);
if(_99){
objj_msgSend(_96,"unsetThemeState:",_99);
}
if(_9a){
objj_msgSend(_96,"setThemeState:",_9a);
}
_bezelStyle=_98;
}
}),new objj_method(sel_getUid("bezelStyle"),function(_9b,_9c){
with(_9b){
return _bezelStyle;
}
})]);
var _9d="CPButtonImageKey",_9e="CPButtonAlternateImageKey",_9f="CPButtonTitleKey",_a0="CPButtonAlternateTitleKey",_a1="CPButtonIsBorderedKey",_a2="CPButtonAllowsMixedStateKey",_a3="CPButtonImageDimsWhenDisabledKey",_a4="CPButtonImagePositionKey",_a5="CPButtonKeyEquivalentKey",_a6="CPButtonKeyEquivalentMaskKey",_a7="CPButtonPeriodicDelayKey",_a8="CPButtonPeriodicIntervalKey";
var _2=objj_getClass("CPButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_a9,_aa,_ab){
with(_a9){
_a9=objj_msgSendSuper({receiver:_a9,super_class:objj_getClass("CPButton").super_class},"initWithCoder:",_ab);
if(_a9){
objj_msgSend(_a9,"_init");
_title=objj_msgSend(_ab,"decodeObjectForKey:",_9f);
_alternateTitle=objj_msgSend(_ab,"decodeObjectForKey:",_a0);
_allowsMixedState=objj_msgSend(_ab,"decodeBoolForKey:",_a2);
objj_msgSend(_a9,"setImageDimsWhenDisabled:",objj_msgSend(_ab,"decodeObjectForKey:",_a3));
if(objj_msgSend(_ab,"containsValueForKey:",_a4)){
objj_msgSend(_a9,"setImagePosition:",objj_msgSend(_ab,"decodeIntForKey:",_a4));
}
if(objj_msgSend(_ab,"containsValueForKey:",_a5)){
objj_msgSend(_a9,"setKeyEquivalent:",CFData.decodeBase64ToUtf16String(objj_msgSend(_ab,"decodeObjectForKey:",_a5)));
}
if(objj_msgSend(_ab,"containsValueForKey:",_a7)){
_periodicDelay=objj_msgSend(_ab,"decodeObjectForKey:",_a7);
}
if(objj_msgSend(_ab,"containsValueForKey:",_a8)){
_periodicInterval=objj_msgSend(_ab,"decodeObjectForKey:",_a8);
}
_keyEquivalentModifierMask=objj_msgSend(_ab,"decodeIntForKey:",_a6);
objj_msgSend(_a9,"setNeedsLayout");
objj_msgSend(_a9,"setNeedsDisplay:",YES);
}
return _a9;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_ac,_ad,_ae){
with(_ac){
objj_msgSendSuper({receiver:_ac,super_class:objj_getClass("CPButton").super_class},"encodeWithCoder:",_ae);
objj_msgSend(_ac,"invalidateTimers");
objj_msgSend(_ae,"encodeObject:forKey:",_title,_9f);
objj_msgSend(_ae,"encodeObject:forKey:",_alternateTitle,_a0);
objj_msgSend(_ae,"encodeBool:forKey:",_allowsMixedState,_a2);
objj_msgSend(_ae,"encodeBool:forKey:",objj_msgSend(_ac,"imageDimsWhenDisabled"),_a3);
objj_msgSend(_ae,"encodeInt:forKey:",objj_msgSend(_ac,"imagePosition"),_a4);
if(_keyEquivalent){
objj_msgSend(_ae,"encodeObject:forKey:",CFData.encodeBase64Utf16String(_keyEquivalent),_a5);
}
objj_msgSend(_ae,"encodeInt:forKey:",_keyEquivalentModifierMask,_a6);
objj_msgSend(_ae,"encodeObject:forKey:",_periodicDelay,_a7);
objj_msgSend(_ae,"encodeObject:forKey:",_periodicInterval,_a8);
}
})]);
objj_executeFile("CPCheckBox.j",YES);
objj_executeFile("CPRadio.j",YES);
p;13;CPButtonBar.jt;9760;@STATIC;1.0;i;8;CPView.jt;9729;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"CPButtonBar"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_hasResizeControl"),new objj_ivar("_resizeControlIsLeftAligned"),new objj_ivar("_buttons")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPButtonBar").super_class},"initWithFrame:",_5);
if(_3){
_buttons=[];
objj_msgSend(_3,"setNeedsLayout");
}
return _3;
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_6,_7){
with(_6){
var _8=objj_msgSend(_6,"superview"),_9=_6;
while(_8){
if(objj_msgSend(_8,"isKindOfClass:",objj_msgSend(CPSplitView,"class"))){
var _a=objj_msgSend(objj_msgSend(_8,"subviews"),"indexOfObject:",_9);
objj_msgSend(_8,"setButtonBar:forDividerAtIndex:",_6,_a);
break;
}
_9=_8;
_8=objj_msgSend(_8,"superview");
}
}
}),new objj_method(sel_getUid("setButtons:"),function(_b,_c,_d){
with(_b){
_buttons=objj_msgSend(CPArray,"arrayWithArray:",_d);
for(var i=0,_e=objj_msgSend(_buttons,"count");i<_e;i++){
objj_msgSend(_buttons[i],"setBordered:",YES);
}
objj_msgSend(_b,"setNeedsLayout");
}
}),new objj_method(sel_getUid("buttons"),function(_f,_10){
with(_f){
return objj_msgSend(CPArray,"arrayWithArray:",_buttons);
}
}),new objj_method(sel_getUid("setHasResizeControl:"),function(_11,_12,_13){
with(_11){
if(_hasResizeControl===_13){
return;
}
_hasResizeControl=!!_13;
objj_msgSend(_11,"setNeedsLayout");
}
}),new objj_method(sel_getUid("hasResizeControl"),function(_14,_15){
with(_14){
return _hasResizeControl;
}
}),new objj_method(sel_getUid("setResizeControlIsLeftAligned:"),function(_16,_17,_18){
with(_16){
if(_resizeControlIsLeftAligned===_18){
return;
}
_resizeControlIsLeftAligned=!!_18;
objj_msgSend(_16,"setNeedsLayout");
}
}),new objj_method(sel_getUid("resizeControlIsLeftAligned"),function(_19,_1a){
with(_19){
return _resizeControlIsLeftAligned;
}
}),new objj_method(sel_getUid("resizeControlFrame"),function(_1b,_1c){
with(_1b){
var _1d=objj_msgSend(_1b,"currentValueForThemeAttribute:","resize-control-inset"),_1e=objj_msgSend(_1b,"currentValueForThemeAttribute:","resize-control-size"),_1f=objj_msgSend(_1b,"bounds"),_20=_resizeControlIsLeftAligned?0:_1f.size.width-_1e.width-_1d.right-_1d.left;
return CGRectMake(_20,0,_1e.width+_1d.left+_1d.right,_1e.height+_1d.top+_1d.bottom);
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_21,_22,_23){
with(_21){
if(_23==="resize-control-view"){
var _24=objj_msgSend(_21,"currentValueForThemeAttribute:","resize-control-inset"),_25=objj_msgSend(_21,"currentValueForThemeAttribute:","resize-control-size"),_26=objj_msgSend(_21,"bounds");
if(_resizeControlIsLeftAligned){
return CGRectMake(_24.left,_24.top,_25.width,_25.height);
}else{
return CGRectMake(_26.size.width-_25.width-_24.right,_24.top,_25.width,_25.height);
}
}
return objj_msgSendSuper({receiver:_21,super_class:objj_getClass("CPButtonBar").super_class},"rectForEphemeralSubviewNamed:",_23);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_27,_28,_29){
with(_27){
if(_29==="resize-control-view"){
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
}
return objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPButtonBar").super_class},"createEphemeralSubviewNamed:",_29);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_2a,_2b){
with(_2a){
objj_msgSend(_2a,"setBackgroundColor:",objj_msgSend(_2a,"currentValueForThemeAttribute:","bezel-color"));
var _2c=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateNormal),_2d=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateHighlighted),_2e=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-bezel-color",CPThemeStateDisabled),_2f=objj_msgSend(_2a,"valueForThemeAttribute:inState:","button-text-color",CPThemeStateNormal);
var _30=objj_msgSend(CPArray,"arrayWithArray:",_buttons),_31=objj_msgSend(_30,"count");
while(_31--){
if(objj_msgSend(_30[_31],"isHidden")){
objj_msgSend(_30,"removeObject:",_30[_31]);
}
}
var _32=_resizeControlIsLeftAligned?CGRectGetMaxX(objj_msgSend(_2a,"bounds"))+1:-1,_33=objj_msgSend(_2a,"bounds"),_34=CGRectGetHeight(_33)-1,_35=CGRectGetWidth(_33),_36=_hasResizeControl?objj_msgSend(_2a,"rectForEphemeralSubviewNamed:","resize-control-view"):CGRectMakeZero(),_37=CGRectGetWidth(_36),_38=_35-_37-1;
for(var i=0,_31=objj_msgSend(_30,"count");i<_31;i++){
var _39=_30[i],_3a=CGRectGetWidth(objj_msgSend(_39,"frame"));
if(_38>_3a){
_38-=_3a;
}else{
break;
}
if(_resizeControlIsLeftAligned){
objj_msgSend(_39,"setFrame:",CGRectMake(_32-_3a,1,_3a,_34));
_32-=_3a-1;
}else{
objj_msgSend(_39,"setFrame:",CGRectMake(_32,1,_3a,_34));
_32+=_3a-1;
}
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2c,"bezel-color",CPThemeStateNormal|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2d,"bezel-color",CPThemeStateHighlighted|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2e,"bezel-color",CPThemeStateDisabled|CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2f,"text-color",CPThemeStateBordered);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2c,"bezel-color",CPThemeStateNormal|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2d,"bezel-color",CPThemeStateHighlighted|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_39,"setValue:forThemeAttribute:inState:",_2e,"bezel-color",CPThemeStateDisabled|CPThemeStateBordered|CPPopUpButtonStatePullsDown);
objj_msgSend(_2a,"addSubview:",_39);
}
if(_hasResizeControl){
var _3b=objj_msgSend(_2a,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","resize-control-view",CPWindowAbove,nil);
objj_msgSend(_3b,"setAutoresizingMask:",_resizeControlIsLeftAligned?CPViewMaxXMargin:CPViewMinXMargin);
objj_msgSend(_3b,"setBackgroundColor:",objj_msgSend(_2a,"currentValueForThemeAttribute:","resize-control-color"));
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_3c,_3d,_3e){
with(_3c){
objj_msgSendSuper({receiver:_3c,super_class:objj_getClass("CPButtonBar").super_class},"setFrameSize:",_3e);
objj_msgSend(_3c,"setNeedsLayout");
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("plusButton"),function(_3f,_40){
with(_3f){
var _41=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_42=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","plus_button.png"),CGSizeMake(11,12));
objj_msgSend(_41,"setBordered:",NO);
objj_msgSend(_41,"setImage:",_42);
objj_msgSend(_41,"setImagePosition:",CPImageOnly);
return _41;
}
}),new objj_method(sel_getUid("minusButton"),function(_43,_44){
with(_43){
var _45=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_46=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","minus_button.png"),CGSizeMake(11,4));
objj_msgSend(_45,"setBordered:",NO);
objj_msgSend(_45,"setImage:",_46);
objj_msgSend(_45,"setImagePosition:",CPImageOnly);
return _45;
}
}),new objj_method(sel_getUid("actionPopupButton"),function(_47,_48){
with(_47){
var _49=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:",CGRectMake(0,0,35,25)),_4a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","action_button.png"),CGSizeMake(22,14));
objj_msgSend(_49,"addItemWithTitle:",nil);
objj_msgSend(objj_msgSend(_49,"lastItem"),"setImage:",_4a);
objj_msgSend(_49,"setImagePosition:",CPImageOnly);
objj_msgSend(_49,"setValue:forThemeAttribute:",CGInsetMake(0,0,0,0),"content-inset");
objj_msgSend(_49,"setPullsDown:",YES);
return _49;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_4b,_4c){
with(_4b){
return "button-bar";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_4d,_4e){
with(_4d){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CGInsetMake(0,0,0,0),CGSizeMakeZero(),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["resize-control-inset","resize-control-size","resize-control-color","bezel-color","button-bezel-color","button-text-color"]);
}
})]);
var _4f="CPButtonBarHasResizeControlKey",_50="CPButtonBarResizeControlIsLeftAlignedKey",_51="CPButtonBarButtonsKey";
var _1=objj_getClass("CPButtonBar");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPButtonBar\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("encodeWithCoder:"),function(_52,_53,_54){
with(_52){
objj_msgSendSuper({receiver:_52,super_class:objj_getClass("CPButtonBar").super_class},"encodeWithCoder:",_54);
objj_msgSend(_54,"encodeBool:forKey:",_hasResizeControl,_4f);
objj_msgSend(_54,"encodeBool:forKey:",_resizeControlIsLeftAligned,_50);
objj_msgSend(_54,"encodeObject:forKey:",_buttons,_51);
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_55,_56,_57){
with(_55){
if(_55=objj_msgSendSuper({receiver:_55,super_class:objj_getClass("CPButtonBar").super_class},"initWithCoder:",_57)){
_buttons=objj_msgSend(_57,"decodeObjectForKey:",_51)||[];
_hasResizeControl=objj_msgSend(_57,"decodeBoolForKey:",_4f);
_resizeControlIsLeftAligned=objj_msgSend(_57,"decodeBoolForKey:",_50);
}
return _55;
}
})]);
p;12;CPCheckBox.jt;3096;@STATIC;1.0;i;10;CPButton.jt;3062;
objj_executeFile("CPButton.j",YES);
CPCheckBoxImageOffset=4;
var _1=objj_allocateClassPair(CPButton,"CPCheckBox"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCheckBox").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3,"setShowsStateBy:",CPContentsCellMask);
objj_msgSend(_3,"setImagePosition:",CPImageLeft);
objj_msgSend(_3,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_3,"setBordered:",NO);
}
return _3;
}
}),new objj_method(sel_getUid("takeStateFromKeyPath:ofObjects:"),function(_6,_7,_8,_9){
with(_6){
var _a=_9.length,_b=objj_msgSend(_9[0],"valueForKeyPath:",_8)?CPOnState:CPOffState;
objj_msgSend(_6,"setAllowsMixedState:",NO);
objj_msgSend(_6,"setState:",_b);
while(_a-->1){
if(_b!==(objj_msgSend(_9[_a],"valueForKeyPath:",_8)?CPOnState:CPOffState)){
objj_msgSend(_6,"setAllowsMixedState:",YES);
objj_msgSend(_6,"setState:",CPMixedState);
}
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_c,_d,_e,_f){
with(_c){
objj_msgSend(_c,"takeStateFromKeyPath:ofObjects:",_e,_f);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("checkBoxWithTitle:theme:"),function(_10,_11,_12,_13){
with(_10){
return objj_msgSend(_10,"buttonWithTitle:theme:",_12,_13);
}
}),new objj_method(sel_getUid("checkBoxWithTitle:"),function(_14,_15,_16){
with(_14){
return objj_msgSend(_14,"buttonWithTitle:",_16);
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_17,_18){
with(_17){
return "check-box";
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_19,_1a,_1b){
with(_19){
if(_1b===CPValueBinding){
return objj_msgSend(_CPCheckBoxValueBinder,"class");
}
return objj_msgSendSuper({receiver:_19,super_class:objj_getMetaClass("CPCheckBox").super_class},"_binderClassForBinding:",_1b);
}
})]);
var _1=objj_allocateClassPair(CPBinder,"_CPCheckBoxValueBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"),function(_1c,_1d,_1e){
with(_1c){
objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("_CPCheckBoxValueBinder").super_class},"_updatePlaceholdersWithOptions:",_1e);
objj_msgSend(_1c,"_setPlaceholder:forMarker:isDefault:",CPMixedState,CPMultipleValuesMarker,YES);
objj_msgSend(_1c,"_setPlaceholder:forMarker:isDefault:",CPOffState,CPNoSelectionMarker,YES);
objj_msgSend(_1c,"_setPlaceholder:forMarker:isDefault:",CPOffState,CPNotApplicableMarker,YES);
objj_msgSend(_1c,"_setPlaceholder:forMarker:isDefault:",CPOffState,CPNullMarker,YES);
}
}),new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"),function(_1f,_20,_21,_22,_23){
with(_1f){
objj_msgSend(_source,"setAllowsMixedState:",(_21===CPMixedState));
objj_msgSend(_source,"setState:",_21);
}
}),new objj_method(sel_getUid("setValue:forBinding:"),function(_24,_25,_26,_27){
with(_24){
objj_msgSend(_source,"setState:",_26);
}
})]);
p;12;CPClipView.jt;4951;@STATIC;1.0;i;8;CPView.jt;4920;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"CPClipView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_documentView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setDocumentView:"),function(_3,_4,_5){
with(_3){
if(_documentView==_5){
return;
}
var _6=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_documentView){
objj_msgSend(_6,"removeObserver:name:object:",_3,CPViewFrameDidChangeNotification,_documentView);
objj_msgSend(_6,"removeObserver:name:object:",_3,CPViewBoundsDidChangeNotification,_documentView);
objj_msgSend(_documentView,"removeFromSuperview");
}
_documentView=_5;
if(_documentView){
objj_msgSend(_3,"addSubview:",_documentView);
objj_msgSend(_documentView,"setPostsFrameChangedNotifications:",YES);
objj_msgSend(_documentView,"setPostsBoundsChangedNotifications:",YES);
objj_msgSend(_6,"addObserver:selector:name:object:",_3,sel_getUid("viewFrameChanged:"),CPViewFrameDidChangeNotification,_documentView);
objj_msgSend(_6,"addObserver:selector:name:object:",_3,sel_getUid("viewBoundsChanged:"),CPViewBoundsDidChangeNotification,_documentView);
}
}
}),new objj_method(sel_getUid("documentView"),function(_7,_8){
with(_7){
return _documentView;
}
}),new objj_method(sel_getUid("constrainScrollPoint:"),function(_9,_a,_b){
with(_9){
if(!_documentView){
return {x:0,y:0};
}
var _c=objj_msgSend(_documentView,"frame");
_b.x=MAX(0,MIN(_b.x,MAX((_c.size.width)-(_bounds.size.width),0)));
_b.y=MAX(0,MIN(_b.y,MAX((_c.size.height)-(_bounds.size.height),0)));
return _b;
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(_d,_e,_f){
with(_d){
if((_bounds.origin.x==_f.x&&_bounds.origin.y==_f.y)){
return;
}
objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPClipView").super_class},"setBoundsOrigin:",_f);
var _10=objj_msgSend(_d,"superview"),_11=objj_getClass("CPScrollView");
if(objj_msgSend(_10,"isKindOfClass:",_11)){
objj_msgSend(_10,"reflectScrolledClipView:",_d);
}
}
}),new objj_method(sel_getUid("scrollToPoint:"),function(_12,_13,_14){
with(_12){
objj_msgSend(_12,"setBoundsOrigin:",objj_msgSend(_12,"constrainScrollPoint:",_14));
}
}),new objj_method(sel_getUid("viewBoundsChanged:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("viewFrameChanged:"),function(_18,_19,_1a){
with(_18){
objj_msgSend(_18,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_1b,_1c,_1d){
with(_1b){
objj_msgSendSuper({receiver:_1b,super_class:objj_getClass("CPClipView").super_class},"resizeSubviewsWithOldSize:",_1d);
objj_msgSend(_1b,"_constrainScrollPoint");
}
}),new objj_method(sel_getUid("_constrainScrollPoint"),function(_1e,_1f){
with(_1e){
var _20=objj_msgSend(_1e,"bounds").origin;
objj_msgSend(_1e,"scrollToPoint:",_20);
if(!CGPointEqualToPoint(_20,objj_msgSend(_1e,"bounds").origin)){
return;
}
var _21=objj_msgSend(_1e,"superview"),_22=objj_getClass("CPScrollView");
if(objj_msgSend(_21,"isKindOfClass:",_22)){
objj_msgSend(_21,"reflectScrolledClipView:",_1e);
}
}
}),new objj_method(sel_getUid("autoscroll:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_23,"bounds"),_27=objj_msgSend(_23,"convertPoint:fromView:",objj_msgSend(_25,"locationInWindow"),nil),_28=objj_msgSend(_23,"superview"),_29=0,_2a=0;
if(CGRectContainsPoint(_26,_27)){
return NO;
}
if(!objj_msgSend(_28,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))||objj_msgSend(_28,"hasVerticalScroller")){
if(_27.y<CGRectGetMinY(_26)){
_2a=CGRectGetMinY(_26)-_27.y;
}else{
if(_27.y>CGRectGetMaxY(_26)){
_2a=CGRectGetMaxY(_26)-_27.y;
}
}
if(_2a<-_26.size.height){
_2a=-_26.size.height;
}
if(_2a>_26.size.height){
_2a=_26.size.height;
}
}
if(!objj_msgSend(_28,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))||objj_msgSend(_28,"hasHorizontalScroller")){
if(_27.x<CGRectGetMinX(_26)){
_29=CGRectGetMinX(_26)-_27.x;
}else{
if(_27.x>CGRectGetMaxX(_26)){
_29=CGRectGetMaxX(_26)-_27.x;
}
}
if(_29<-_26.size.width){
_29=-_26.size.width;
}
if(_29>_26.size.width){
_29=_26.size.width;
}
}
return objj_msgSend(_23,"scrollToPoint:",CGPointMake(_26.origin.x-_29,_26.origin.y-_2a));
}
})]);
var _2b="CPScrollViewDocumentView";
var _1=objj_getClass("CPClipView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPClipView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_2c,_2d,_2e){
with(_2c){
if(_2c=objj_msgSendSuper({receiver:_2c,super_class:objj_getClass("CPClipView").super_class},"initWithCoder:",_2e)){
objj_msgSend(_2c,"setDocumentView:",objj_msgSend(_2e,"decodeObjectForKey:",_2b));
}
return _2c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_2f,_30,_31){
with(_2f){
objj_msgSendSuper({receiver:_2f,super_class:objj_getClass("CPClipView").super_class},"encodeWithCoder:",_31);
objj_msgSend(_31,"encodeObject:forKey:",_documentView,_2b);
}
})]);
p;18;CPCollectionView.jt;22653;@STATIC;1.0;I;20;Foundation/CPArray.jI;19;Foundation/CPData.jI;23;Foundation/CPIndexSet.jI;28;Foundation/CPKeyedArchiver.jI;30;Foundation/CPKeyedUnarchiver.ji;8;CPView.ji;22;CPCollectionViewItem.jt;22449;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPData.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPKeyedArchiver.j",NO);
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPCollectionViewItem.j",YES);
var _1=objj_allocateClassPair(CPView,"CPCollectionView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_content"),new objj_ivar("_items"),new objj_ivar("_itemData"),new objj_ivar("_itemPrototype"),new objj_ivar("_itemForDragging"),new objj_ivar("_cachedItems"),new objj_ivar("_maxNumberOfRows"),new objj_ivar("_maxNumberOfColumns"),new objj_ivar("_minItemSize"),new objj_ivar("_maxItemSize"),new objj_ivar("_backgroundColors"),new objj_ivar("_tileWidth"),new objj_ivar("_isSelectable"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_selectionIndexes"),new objj_ivar("_itemSize"),new objj_ivar("_horizontalMargin"),new objj_ivar("_verticalMargin"),new objj_ivar("_numberOfRows"),new objj_ivar("_numberOfColumns"),new objj_ivar("_delegate"),new objj_ivar("_mouseDownEvent")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCollectionView").super_class},"initWithFrame:",_5);
if(_3){
_items=[];
_content=[];
_cachedItems=[];
_itemSize=CGSizeMakeZero();
_minItemSize=CGSizeMakeZero();
_maxItemSize=CGSizeMakeZero();
objj_msgSend(_3,"setBackgroundColors:",nil);
_verticalMargin=5;
_tileWidth=-1;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
_allowsEmptySelection=YES;
_isSelectable=YES;
}
return _3;
}
}),new objj_method(sel_getUid("setItemPrototype:"),function(_6,_7,_8){
with(_6){
_cachedItems=[];
_itemData=nil;
_itemForDragging=nil;
_itemPrototype=_8;
objj_msgSend(_6,"reloadContent");
}
}),new objj_method(sel_getUid("itemPrototype"),function(_9,_a){
with(_9){
return _itemPrototype;
}
}),new objj_method(sel_getUid("newItemForRepresentedObject:"),function(_b,_c,_d){
with(_b){
var _e=nil;
if(_cachedItems.length){
_e=_cachedItems.pop();
}else{
if(!_itemData){
if(_itemPrototype){
_itemData=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_itemPrototype);
}
}
_e=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_itemData);
}
objj_msgSend(_e,"setRepresentedObject:",_d);
objj_msgSend(objj_msgSend(_e,"view"),"setFrameSize:",_itemSize);
return _e;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_f,_10){
with(_f){
return YES;
}
}),new objj_method(sel_getUid("isFirstResponder"),function(_11,_12){
with(_11){
return objj_msgSend(objj_msgSend(_11,"window"),"firstResponder")===_11;
}
}),new objj_method(sel_getUid("setContent:"),function(_13,_14,_15){
with(_13){
_content=_15;
objj_msgSend(_13,"reloadContent");
}
}),new objj_method(sel_getUid("content"),function(_16,_17){
with(_16){
return _content;
}
}),new objj_method(sel_getUid("items"),function(_18,_19){
with(_18){
return _items;
}
}),new objj_method(sel_getUid("setSelectable:"),function(_1a,_1b,_1c){
with(_1a){
if(_isSelectable==_1c){
return;
}
_isSelectable=_1c;
if(!_isSelectable){
var _1d=CPNotFound,_1e=objj_msgSend(_items,"count");
while((_1d=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_1d))!=CPNotFound&&_1d<_1e){
objj_msgSend(_items[_1d],"setSelected:",NO);
}
}
}
}),new objj_method(sel_getUid("isSelectable"),function(_1f,_20){
with(_1f){
return _isSelectable;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_21,_22,_23){
with(_21){
_allowsEmptySelection=_23;
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_24,_25){
with(_24){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_26,_27,_28){
with(_26){
_allowsMultipleSelection=_28;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_29,_2a){
with(_29){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setSelectionIndexes:"),function(_2b,_2c,_2d){
with(_2b){
if(!_2d){
_2d=objj_msgSend(CPIndexSet,"indexSet");
}
if(!_isSelectable||objj_msgSend(_selectionIndexes,"isEqual:",_2d)){
return;
}
var _2e=CPNotFound,_2f=objj_msgSend(_items,"count");
while((_2e=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_2e))!==CPNotFound&&_2e<_2f){
objj_msgSend(_items[_2e],"setSelected:",NO);
}
_selectionIndexes=_2d;
var _2e=CPNotFound;
while((_2e=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_2e))!==CPNotFound){
objj_msgSend(_items[_2e],"setSelected:",YES);
}
var _30=objj_msgSend(objj_msgSend(_2b,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_30,"getBinding:forObject:","selectionIndexes",_2b),"reverseSetValueFor:","selectionIndexes");
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionViewDidChangeSelection:"))){
objj_msgSend(_delegate,"collectionViewDidChangeSelection:",_2b);
}
}
}),new objj_method(sel_getUid("selectionIndexes"),function(_31,_32){
with(_31){
return objj_msgSend(_selectionIndexes,"copy");
}
}),new objj_method(sel_getUid("reloadContent"),function(_33,_34){
with(_33){
var _35=_items.length;
while(_35--){
objj_msgSend(objj_msgSend(_items[_35],"view"),"removeFromSuperview");
objj_msgSend(_items[_35],"setSelected:",NO);
_cachedItems.push(_items[_35]);
}
_items=[];
if(!_itemPrototype){
return;
}
var _36=0;
_35=_content.length;
for(;_36<_35;++_36){
_items.push(objj_msgSend(_33,"newItemForRepresentedObject:",_content[_36]));
objj_msgSend(_33,"addSubview:",objj_msgSend(_items[_36],"view"));
}
_36=CPNotFound;
while((_36=objj_msgSend(_selectionIndexes,"indexGreaterThanIndex:",_36))!=CPNotFound&&_36<_35){
objj_msgSend(_items[_36],"setSelected:",YES);
}
objj_msgSend(_33,"tile");
}
}),new objj_method(sel_getUid("tile"),function(_37,_38){
with(_37){
var _39=CGRectGetWidth(objj_msgSend(_37,"bounds"));
if(_39==_tileWidth){
return;
}
var _3a=CGSizeMakeCopy(_minItemSize);
_numberOfColumns=MAX(1,FLOOR(_39/_3a.width));
if(_maxNumberOfColumns>0){
_numberOfColumns=MIN(_maxNumberOfColumns,_numberOfColumns);
}
var _3b=_39-_numberOfColumns*_3a.width,_3c=NO;
if(_3b>0&&_3a.width<_maxItemSize.width){
_3a.width=MIN(_maxItemSize.width,_3a.width+FLOOR(_3b/_numberOfColumns));
}
if(_maxNumberOfColumns==1&&_3a.width<_maxItemSize.width&&_3a.width<_39){
_3a.width=MIN(_maxItemSize.width,_39);
}
if(!CGSizeEqualToSize(_itemSize,_3a)){
_itemSize=_3a;
_3c=YES;
}
var _3d=0,_3e=_items.length;
if(_maxNumberOfColumns>0&&_maxNumberOfRows>0){
_3e=MIN(_3e,_maxNumberOfColumns*_maxNumberOfRows);
}
_numberOfRows=CEIL(_3e/_numberOfColumns);
_horizontalMargin=FLOOR((_39-_numberOfColumns*_3a.width)/(_numberOfColumns+1));
var x=_horizontalMargin,y=-_3a.height;
for(;_3d<_3e;++_3d){
if(_3d%_numberOfColumns==0){
x=_horizontalMargin;
y+=_verticalMargin+_3a.height;
}
var _3f=objj_msgSend(_items[_3d],"view");
objj_msgSend(_3f,"setFrameOrigin:",CGPointMake(x,y));
if(_3c){
objj_msgSend(_3f,"setFrameSize:",_itemSize);
}
x+=_3a.width+_horizontalMargin;
}
var _40=objj_msgSend(_37,"superview"),_41=y+_3a.height+_verticalMargin;
if(objj_msgSend(_40,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
var _42=objj_msgSend(_40,"bounds").size;
_41=MAX(_42.height,_41);
}
_tileWidth=_39;
objj_msgSend(_37,"setFrameSize:",CGSizeMake(_39,_41));
_tileWidth=-1;
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_43,_44,_45){
with(_43){
objj_msgSend(_43,"tile");
}
}),new objj_method(sel_getUid("setMaxNumberOfRows:"),function(_46,_47,_48){
with(_46){
if(_maxNumberOfRows==_48){
return;
}
_maxNumberOfRows=_48;
objj_msgSend(_46,"tile");
}
}),new objj_method(sel_getUid("maxNumberOfRows"),function(_49,_4a){
with(_49){
return _maxNumberOfRows;
}
}),new objj_method(sel_getUid("setMaxNumberOfColumns:"),function(_4b,_4c,_4d){
with(_4b){
if(_maxNumberOfColumns==_4d){
return;
}
_maxNumberOfColumns=_4d;
objj_msgSend(_4b,"tile");
}
}),new objj_method(sel_getUid("maxNumberOfColumns"),function(_4e,_4f){
with(_4e){
return _maxNumberOfColumns;
}
}),new objj_method(sel_getUid("numberOfRows"),function(_50,_51){
with(_50){
return _numberOfRows;
}
}),new objj_method(sel_getUid("numberOfColumns"),function(_52,_53){
with(_52){
return _numberOfColumns;
}
}),new objj_method(sel_getUid("setMinItemSize:"),function(_54,_55,_56){
with(_54){
if(_56===nil||_56===undefined){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Invalid value provided for minimum size");
}
if(CGSizeEqualToSize(_minItemSize,_56)){
return;
}
_minItemSize=CGSizeMakeCopy(_56);
objj_msgSend(_54,"tile");
}
}),new objj_method(sel_getUid("minItemSize"),function(_57,_58){
with(_57){
return _minItemSize;
}
}),new objj_method(sel_getUid("setMaxItemSize:"),function(_59,_5a,_5b){
with(_59){
if(CGSizeEqualToSize(_maxItemSize,_5b)){
return;
}
_maxItemSize=CGSizeMakeCopy(_5b);
objj_msgSend(_59,"tile");
}
}),new objj_method(sel_getUid("maxItemSize"),function(_5c,_5d){
with(_5c){
return _maxItemSize;
}
}),new objj_method(sel_getUid("setBackgroundColors:"),function(_5e,_5f,_60){
with(_5e){
if(_backgroundColors===_60){
return;
}
_backgroundColors=_60;
if(!_backgroundColors){
_backgroundColors=objj_msgSend(CPColor,"whiteColor");
}
if(objj_msgSend(_backgroundColors,"count")===1){
objj_msgSend(_5e,"setBackgroundColor:",_backgroundColors[0]);
}else{
objj_msgSend(_5e,"setBackgroundColor:",nil);
}
objj_msgSend(_5e,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("backgroundColors"),function(_61,_62){
with(_61){
return _backgroundColors;
}
}),new objj_method(sel_getUid("mouseUp:"),function(_63,_64,_65){
with(_63){
if(objj_msgSend(_selectionIndexes,"count")&&objj_msgSend(_65,"clickCount")==2&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:didDoubleClickOnItemAtIndex:"))){
objj_msgSend(_delegate,"collectionView:didDoubleClickOnItemAtIndex:",_63,objj_msgSend(_selectionIndexes,"firstIndex"));
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_66,_67,_68){
with(_66){
_mouseDownEvent=_68;
var _69=objj_msgSend(_66,"convertPoint:fromView:",objj_msgSend(_68,"locationInWindow"),nil),_6a=objj_msgSend(_66,"_indexAtPoint:",_69);
if(_6a>=0&&_6a<_items.length){
if(_allowsMultipleSelection&&(objj_msgSend(_68,"modifierFlags")&CPCommandKeyMask||objj_msgSend(_68,"modifierFlags")&CPShiftKeyMask)){
if(objj_msgSend(_68,"modifierFlags")&CPCommandKeyMask){
var _6b=objj_msgSend(_selectionIndexes,"copy");
if(objj_msgSend(_6b,"containsIndex:",_6a)){
objj_msgSend(_6b,"removeIndex:",_6a);
}else{
objj_msgSend(_6b,"addIndex:",_6a);
}
}else{
if(objj_msgSend(_68,"modifierFlags")&CPShiftKeyMask){
var _6c=objj_msgSend(objj_msgSend(_66,"selectionIndexes"),"firstIndex"),_6d=nil;
if(_6a<_6c){
_6d=CPMakeRange(_6a,(_6c-_6a)+1);
}else{
_6d=CPMakeRange(_6c,(_6a-_6c)+1);
}
_6b=objj_msgSend(objj_msgSend(_66,"selectionIndexes"),"copy");
objj_msgSend(_6b,"addIndexesInRange:",_6d);
}
}
}else{
_6b=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_6a);
}
objj_msgSend(_66,"setSelectionIndexes:",_6b);
objj_msgSend(objj_msgSend(_66,"window"),"makeFirstResponder:",_66);
}else{
if(_allowsEmptySelection){
objj_msgSend(_66,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSet"));
}
}
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_70,"locationInWindow"),_72=objj_msgSend(_mouseDownEvent,"locationInWindow");
if((ABS(_71.x-_72.x)<3)&&(ABS(_71.y-_72.y)<3)){
return;
}
if(!objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:dragTypesForItemsAtIndexes:"))){
return;
}
if(!objj_msgSend(_selectionIndexes,"count")){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("collectionView:canDragItemsAtIndexes:withEvent:"))&&!objj_msgSend(_delegate,"collectionView:canDragItemsAtIndexes:withEvent:",_6e,_selectionIndexes,_mouseDownEvent)){
return;
}
var _73=objj_msgSend(_delegate,"collectionView:dragTypesForItemsAtIndexes:",_6e,_selectionIndexes);
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",_73,_6e);
if(!_itemForDragging){
_itemForDragging=objj_msgSend(_6e,"newItemForRepresentedObject:",_content[objj_msgSend(_selectionIndexes,"firstIndex")]);
}else{
objj_msgSend(_itemForDragging,"setRepresentedObject:",_content[objj_msgSend(_selectionIndexes,"firstIndex")]);
}
var _74=objj_msgSend(_itemForDragging,"view");
objj_msgSend(_74,"setFrameSize:",_itemSize);
objj_msgSend(_74,"setAlphaValue:",0.7);
objj_msgSend(_6e,"dragView:at:offset:event:pasteboard:source:slideBack:",_74,objj_msgSend(objj_msgSend(_items[objj_msgSend(_selectionIndexes,"firstIndex")],"view"),"frame").origin,CGSizeMakeZero(),_mouseDownEvent,nil,_6e,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_75,_76,_77,_78){
with(_75){
objj_msgSend(_77,"setData:forType:",objj_msgSend(_delegate,"collectionView:dataForItemsAtIndexes:forType:",_75,_selectionIndexes,_78),_78);
}
}),new objj_method(sel_getUid("setVerticalMargin:"),function(_79,_7a,_7b){
with(_79){
if(_verticalMargin==_7b){
return;
}
_verticalMargin=_7b;
objj_msgSend(_79,"tile");
}
}),new objj_method(sel_getUid("verticalMargin"),function(_7c,_7d){
with(_7c){
return _verticalMargin;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_7e,_7f,_80){
with(_7e){
_delegate=_80;
}
}),new objj_method(sel_getUid("delegate"),function(_81,_82){
with(_81){
return _delegate;
}
}),new objj_method(sel_getUid("menuForEvent:"),function(_83,_84,_85){
with(_83){
if(!objj_msgSend(objj_msgSend(_83,"delegate"),"respondsToSelector:",sel_getUid("collectionView:menuForItemAtIndex:"))){
return objj_msgSendSuper({receiver:_83,super_class:objj_getClass("CPCollectionView").super_class},"menuForEvent:",_85);
}
var _86=objj_msgSend(_83,"convertPoint:fromView:",objj_msgSend(_85,"locationInWindow"),nil),_87=objj_msgSend(_83,"_indexAtPoint:",_86);
return objj_msgSend(_delegate,"collectionView:menuForItemAtIndex:",_83,_87);
}
}),new objj_method(sel_getUid("_indexAtPoint:"),function(_88,_89,_8a){
with(_88){
var row=FLOOR(_8a.y/(_itemSize.height+_verticalMargin)),_8b=FLOOR(_8a.x/(_itemSize.width+_horizontalMargin));
return row*_numberOfColumns+_8b;
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_8c,_8d,_8e){
with(_8c){
return objj_msgSend(_items,"objectAtIndex:",_8e);
}
}),new objj_method(sel_getUid("frameForItemAtIndex:"),function(_8f,_90,_91){
with(_8f){
return objj_msgSend(objj_msgSend(objj_msgSend(_8f,"itemAtIndex:",_91),"view"),"frame");
}
}),new objj_method(sel_getUid("frameForItemsAtIndexes:"),function(_92,_93,_94){
with(_92){
var _95=[],_96=CGRectNull;
objj_msgSend(_94,"getIndexes:maxCount:inIndexRange:",_95,-1,nil);
var _97=0,_98=objj_msgSend(_95,"count");
for(;_97<_98;++_97){
_96=CGRectUnion(_96,objj_msgSend(_92,"frameForItemAtIndex:",_95[_97]));
}
return _96;
}
})]);
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("_modifySelectionWithNewIndex:direction:expand:"),function(_99,_9a,_9b,_9c,_9d){
with(_99){
_9b=MIN(MAX(_9b,0),objj_msgSend(objj_msgSend(_99,"items"),"count")-1);
if(_allowsMultipleSelection&&_9d){
var _9e=objj_msgSend(_selectionIndexes,"copy"),_9f=objj_msgSend(_9e,"firstIndex"),_a0=objj_msgSend(_9e,"lastIndex");
if(_9c===-1){
objj_msgSend(_9e,"addIndexesInRange:",CPMakeRange(_9b,_9f-_9b+1));
}else{
objj_msgSend(_9e,"addIndexesInRange:",CPMakeRange(_a0,_9b-_a0+1));
}
}else{
_9e=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_9b);
}
objj_msgSend(_99,"setSelectionIndexes:",_9e);
objj_msgSend(_99,"_scrollToSelection");
}
}),new objj_method(sel_getUid("_scrollToSelection"),function(_a1,_a2){
with(_a1){
var _a3=objj_msgSend(_a1,"frameForItemsAtIndexes:",objj_msgSend(_a1,"selectionIndexes"));
if(!CGRectIsNull(_a3)){
objj_msgSend(_a1,"scrollRectToVisible:",_a3);
}
}
}),new objj_method(sel_getUid("moveLeft:"),function(_a4,_a5,_a6){
with(_a4){
var _a7=objj_msgSend(objj_msgSend(_a4,"selectionIndexes"),"firstIndex");
if(_a7===CPNotFound){
_a7=objj_msgSend(objj_msgSend(_a4,"items"),"count");
}
objj_msgSend(_a4,"_modifySelectionWithNewIndex:direction:expand:",_a7-1,-1,NO);
}
}),new objj_method(sel_getUid("moveLeftAndModifySelection:"),function(_a8,_a9,_aa){
with(_a8){
var _ab=objj_msgSend(objj_msgSend(_a8,"selectionIndexes"),"firstIndex");
if(_ab===CPNotFound){
_ab=objj_msgSend(objj_msgSend(_a8,"items"),"count");
}
objj_msgSend(_a8,"_modifySelectionWithNewIndex:direction:expand:",_ab-1,-1,YES);
}
}),new objj_method(sel_getUid("moveRight:"),function(_ac,_ad,_ae){
with(_ac){
objj_msgSend(_ac,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_ac,"selectionIndexes"),"lastIndex")+1,1,NO);
}
}),new objj_method(sel_getUid("moveRightAndModifySelection:"),function(_af,_b0,_b1){
with(_af){
objj_msgSend(_af,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_af,"selectionIndexes"),"lastIndex")+1,1,YES);
}
}),new objj_method(sel_getUid("moveDown:"),function(_b2,_b3,_b4){
with(_b2){
objj_msgSend(_b2,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_b2,"selectionIndexes"),"lastIndex")+objj_msgSend(_b2,"numberOfColumns"),1,NO);
}
}),new objj_method(sel_getUid("moveDownAndModifySelection:"),function(_b5,_b6,_b7){
with(_b5){
objj_msgSend(_b5,"_modifySelectionWithNewIndex:direction:expand:",objj_msgSend(objj_msgSend(_b5,"selectionIndexes"),"lastIndex")+objj_msgSend(_b5,"numberOfColumns"),1,YES);
}
}),new objj_method(sel_getUid("moveUp:"),function(_b8,_b9,_ba){
with(_b8){
var _bb=objj_msgSend(objj_msgSend(_b8,"selectionIndexes"),"firstIndex");
if(_bb==CPNotFound){
_bb=objj_msgSend(objj_msgSend(_b8,"items"),"count");
}
objj_msgSend(_b8,"_modifySelectionWithNewIndex:direction:expand:",_bb-objj_msgSend(_b8,"numberOfColumns"),-1,NO);
}
}),new objj_method(sel_getUid("moveUpAndModifySelection:"),function(_bc,_bd,_be){
with(_bc){
var _bf=objj_msgSend(objj_msgSend(_bc,"selectionIndexes"),"firstIndex");
if(_bf==CPNotFound){
_bf=objj_msgSend(objj_msgSend(_bc,"items"),"count");
}
objj_msgSend(_bc,"_modifySelectionWithNewIndex:direction:expand:",_bf-objj_msgSend(_bc,"numberOfColumns"),-1,YES);
}
}),new objj_method(sel_getUid("deleteBackward:"),function(_c0,_c1,_c2){
with(_c0){
if(objj_msgSend(objj_msgSend(_c0,"delegate"),"respondsToSelector:",sel_getUid("collectionView:shouldDeleteItemsAtIndexes:"))){
objj_msgSend(objj_msgSend(_c0,"delegate"),"collectionView:shouldDeleteItemsAtIndexes:",_c0,objj_msgSend(_c0,"selectionIndexes"));
var _c3=objj_msgSend(objj_msgSend(_c0,"selectionIndexes"),"firstIndex");
if(_c3>objj_msgSend(objj_msgSend(_c0,"content"),"count")-1){
objj_msgSend(_c0,"setSelectionIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(objj_msgSend(_c0,"content"),"count")-1));
}
objj_msgSend(_c0,"_scrollToSelection");
objj_msgSend(_c0,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("keyDown:"),function(_c4,_c5,_c6){
with(_c4){
objj_msgSend(_c4,"interpretKeyEvents:",[_c6]);
}
})]);
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("rectForItemAtIndex:"),function(_c7,_c8,_c9){
with(_c7){
_CPReportLenientDeprecation(objj_msgSend(_c7,"class"),_c8,sel_getUid("frameForItemAtIndex:"));
return objj_msgSend(_c7,"frameForItemAtIndex:",_c9);
}
}),new objj_method(sel_getUid("rectForItemsAtIndexes:"),function(_ca,_cb,_cc){
with(_ca){
_CPReportLenientDeprecation(objj_msgSend(_ca,"class"),_cb,sel_getUid("frameForItemsAtIndexes:"));
return objj_msgSend(_ca,"frameForItemsAtIndexes:",_cc);
}
})]);
var _cd="CPCollectionViewMinItemSizeKey",_ce="CPCollectionViewMaxItemSizeKey",_cf="CPCollectionViewVerticalMarginKey",_d0="CPCollectionViewMaxNumberOfRowsKey",_d1="CPCollectionViewMaxNumberOfColumnsKey",_d2="CPCollectionViewSelectableKey",_d3="CPCollectionViewAllowsMultipleSelectionKey",_d4="CPCollectionViewBackgroundColorsKey";
var _1=objj_getClass("CPCollectionView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("awakeFromCib"),function(_d5,_d6){
with(_d5){
objj_msgSendSuper({receiver:_d5,super_class:objj_getClass("CPCollectionView").super_class},"awakeFromCib");
var _d7=objj_msgSend(_itemPrototype,"view");
if(_d7&&(CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())||CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero()))){
var _d8=_itemPrototype;
if(CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())){
_minItemSize=objj_msgSend(_d7,"frameSize");
}else{
if(CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero())){
_maxItemSize=objj_msgSend(_d7,"frameSize");
}
}
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_d9,_da,_db){
with(_d9){
_d9=objj_msgSendSuper({receiver:_d9,super_class:objj_getClass("CPCollectionView").super_class},"initWithCoder:",_db);
if(_d9){
_items=[];
_content=[];
_cachedItems=[];
_itemSize=CGSizeMakeZero();
_minItemSize=objj_msgSend(_db,"decodeSizeForKey:",_cd);
_maxItemSize=objj_msgSend(_db,"decodeSizeForKey:",_ce);
_maxNumberOfRows=objj_msgSend(_db,"decodeIntForKey:",_d0);
_maxNumberOfColumns=objj_msgSend(_db,"decodeIntForKey:",_d1);
_verticalMargin=objj_msgSend(_db,"decodeFloatForKey:",_cf);
_isSelectable=objj_msgSend(_db,"decodeBoolForKey:",_d2);
_allowsMultipleSelection=objj_msgSend(_db,"decodeBoolForKey:",_d3);
objj_msgSend(_d9,"setBackgroundColors:",objj_msgSend(_db,"decodeObjectForKey:",_d4));
_tileWidth=-1;
_selectionIndexes=objj_msgSend(CPIndexSet,"indexSet");
_allowsEmptySelection=YES;
}
return _d9;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_dc,_dd,_de){
with(_dc){
objj_msgSendSuper({receiver:_dc,super_class:objj_getClass("CPCollectionView").super_class},"encodeWithCoder:",_de);
if(!CGSizeEqualToSize(_minItemSize,CGSizeMakeZero())){
objj_msgSend(_de,"encodeSize:forKey:",_minItemSize,_cd);
}
if(!CGSizeEqualToSize(_maxItemSize,CGSizeMakeZero())){
objj_msgSend(_de,"encodeSize:forKey:",_maxItemSize,_ce);
}
objj_msgSend(_de,"encodeInt:forKey:",_maxNumberOfRows,_d0);
objj_msgSend(_de,"encodeInt:forKey:",_maxNumberOfColumns,_d1);
objj_msgSend(_de,"encodeBool:forKey:",_isSelectable,_d2);
objj_msgSend(_de,"encodeBool:forKey:",_allowsMultipleSelection,_d3);
objj_msgSend(_de,"encodeFloat:forKey:",_verticalMargin,_cf);
objj_msgSend(_de,"encodeObject:forKey:",_backgroundColors,_d4);
}
})]);
p;22;CPCollectionViewItem.jt;1188;@STATIC;1.0;i;18;CPViewController.jt;1146;
objj_executeFile("CPViewController.j",YES);
var _1=objj_allocateClassPair(CPViewController,"CPCollectionViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isSelected")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setRepresentedObject:"),function(_3,_4,_5){
with(_3){
objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCollectionViewItem").super_class},"setRepresentedObject:",_5);
var _6=objj_msgSend(_3,"view");
if(objj_msgSend(_6,"respondsToSelector:",sel_getUid("setRepresentedObject:"))){
objj_msgSend(_6,"setRepresentedObject:",objj_msgSend(_3,"representedObject"));
}
}
}),new objj_method(sel_getUid("setSelected:"),function(_7,_8,_9){
with(_7){
_9=!!_9;
if(_isSelected===_9){
return;
}
_isSelected=_9;
var _a=objj_msgSend(_7,"view");
if(objj_msgSend(_a,"respondsToSelector:",sel_getUid("setSelected:"))){
objj_msgSend(_a,"setSelected:",objj_msgSend(_7,"isSelected"));
}
}
}),new objj_method(sel_getUid("isSelected"),function(_b,_c){
with(_b){
return _isSelected;
}
}),new objj_method(sel_getUid("collectionView"),function(_d,_e){
with(_d){
return objj_msgSend(_view,"superview");
}
})]);
p;9;CPColor.jt;14295;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CGColor.ji;17;CPCompatibility.ji;9;CPImage.jt;14201;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGColor.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPImage.j",YES);
var _1=0,_2=1,_3=2,_4=3;
var _5=0,_6=1,_7=2;
var _8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16,_17;
CPColorPatternIsVertical=YES;
CPColorPatternIsHorizontal=NO;
CPColorWithImages=function(){
if(arguments.length<3){
var _18=arguments[0],_19=[];
for(var i=0;i<_18.length;++i){
var _1a=_18[i];
_19.push(_1a?CPImageInBundle(_1a[0],CGSizeMake(_1a[1],_1a[2]),_1a[3]):nil);
}
if(_19.length===3){
return objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",_19,arguments[1]||CPColorPatternIsHorizontal));
}else{
return objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",_19));
}
}else{
if(arguments.length===3||arguments.length===4){
return objj_msgSend(CPColor,"colorWithPatternImage:",CPImageInBundle(arguments[0],CGSizeMake(arguments[1],arguments[2]),arguments[3]));
}else{
return nil;
}
}
};
var _1b=objj_allocateClassPair(CPObject,"CPColor"),_1c=_1b.isa;
class_addIvars(_1b,[new objj_ivar("_components"),new objj_ivar("_patternImage"),new objj_ivar("_cssString")]);
objj_registerClassPair(_1b);
class_addMethods(_1b,[new objj_method(sel_getUid("_initWithCSSString:"),function(_1d,_1e,_1f){
with(_1d){
if(_1f.indexOf("rgb")==CPNotFound){
return nil;
}
_1d=objj_msgSendSuper({receiver:_1d,super_class:objj_getClass("CPColor").super_class},"init");
var _20=_1f.indexOf("("),_21=_1f.substring(_20+1).split(",");
_components=[parseInt(_21[0],10)/255,parseInt(_21[1],10)/255,parseInt(_21[2],10)/255,_21[3]?parseFloat(_21[3],10):1];
objj_msgSend(_1d,"_initCSSStringFromComponents");
return _1d;
}
}),new objj_method(sel_getUid("_initWithRGBA:"),function(_22,_23,_24){
with(_22){
_22=objj_msgSendSuper({receiver:_22,super_class:objj_getClass("CPColor").super_class},"init");
if(_22){
_components=_24;
objj_msgSend(_22,"_initCSSStringFromComponents");
}
return _22;
}
}),new objj_method(sel_getUid("_initCSSStringFromComponents"),function(_25,_26){
with(_25){
var _27=CPFeatureIsCompatible(CPCSSRGBAFeature)&&_components[3]!=1;
_cssString=(_27?"rgba(":"rgb(")+parseInt(_components[0]*255)+", "+parseInt(_components[1]*255)+", "+parseInt(_components[2]*255)+(_27?(", "+_components[3]):"")+")";
}
}),new objj_method(sel_getUid("_initWithPatternImage:"),function(_28,_29,_2a){
with(_28){
_28=objj_msgSendSuper({receiver:_28,super_class:objj_getClass("CPColor").super_class},"init");
if(_28){
_patternImage=_2a;
_cssString="url(\""+objj_msgSend(_patternImage,"filename")+"\")";
_components=[0,0,0,1];
}
return _28;
}
}),new objj_method(sel_getUid("patternImage"),function(_2b,_2c){
with(_2b){
return _patternImage;
}
}),new objj_method(sel_getUid("alphaComponent"),function(_2d,_2e){
with(_2d){
return _components[3];
}
}),new objj_method(sel_getUid("blueComponent"),function(_2f,_30){
with(_2f){
return _components[2];
}
}),new objj_method(sel_getUid("greenComponent"),function(_31,_32){
with(_31){
return _components[1];
}
}),new objj_method(sel_getUid("redComponent"),function(_33,_34){
with(_33){
return _components[0];
}
}),new objj_method(sel_getUid("components"),function(_35,_36){
with(_35){
return _components;
}
}),new objj_method(sel_getUid("colorWithAlphaComponent:"),function(_37,_38,_39){
with(_37){
var _3a=_components.slice();
_3a[_3a.length-1]=_39;
return objj_msgSend(objj_msgSend(objj_msgSend(_37,"class"),"alloc"),"_initWithRGBA:",_3a);
}
}),new objj_method(sel_getUid("hsbComponents"),function(_3b,_3c){
with(_3b){
var red=ROUND(_components[_1]*255),_3d=ROUND(_components[_2]*255),_3e=ROUND(_components[_3]*255);
var max=MAX(red,_3d,_3e),min=MIN(red,_3d,_3e),_3f=max-min;
var _40=max/255,_41=(max!=0)?_3f/max:0;
var hue;
if(_41==0){
hue=0;
}else{
var rr=(max-red)/_3f,gr=(max-_3d)/_3f,br=(max-_3e)/_3f;
if(red==max){
hue=br-gr;
}else{
if(_3d==max){
hue=2+rr-br;
}else{
hue=4+gr-rr;
}
}
hue/=6;
if(hue<0){
hue++;
}
}
return [ROUND(hue*360),ROUND(_41*100),ROUND(_40*100)];
}
}),new objj_method(sel_getUid("cssString"),function(_42,_43){
with(_42){
return _cssString;
}
}),new objj_method(sel_getUid("hexString"),function(_44,_45){
with(_44){
return _46(objj_msgSend(_44,"redComponent"),objj_msgSend(_44,"greenComponent"),objj_msgSend(_44,"blueComponent"));
}
}),new objj_method(sel_getUid("isEqual:"),function(_47,_48,_49){
with(_47){
if(!_49){
return NO;
}
if(_49===_47){
return YES;
}
if(!objj_msgSend(_49,"isKindOfClass:",CPColor)){
return NO;
}
if(_patternImage||objj_msgSend(_49,"patternImage")){
return objj_msgSend(_patternImage,"isEqual:",objj_msgSend(_49,"patternImage"));
}
return ROUND(objj_msgSend(_47,"redComponent")*255)==ROUND(objj_msgSend(_49,"redComponent")*255)&&ROUND(objj_msgSend(_47,"greenComponent")*255)==ROUND(objj_msgSend(_49,"greenComponent")*255)&&ROUND(objj_msgSend(_47,"blueComponent")*255)==ROUND(objj_msgSend(_49,"blueComponent")*255)&&objj_msgSend(_47,"alphaComponent")==objj_msgSend(_49,"alphaComponent");
}
}),new objj_method(sel_getUid("description"),function(_4a,_4b){
with(_4a){
var _4c=objj_msgSendSuper({receiver:_4a,super_class:objj_getClass("CPColor").super_class},"description"),_4d=objj_msgSend(_4a,"patternImage");
if(!_4d){
return _4c+" "+objj_msgSend(_4a,"cssString");
}
_4c+=" {\n";
if(objj_msgSend(_4d,"isThreePartImage")||objj_msgSend(_4d,"isNinePartImage")){
var _4e=objj_msgSend(_4d,"imageSlices");
if(objj_msgSend(_4d,"isThreePartImage")){
_4c+="    orientation: "+(objj_msgSend(_4d,"isVertical")?"vertical":"horizontal")+",\n";
}
_4c+="    patternImage ("+_4e.length+" part): [\n";
for(var i=0;i<_4e.length;++i){
var _4f=objj_msgSend(_4e[i],"description");
_4c+=_4f.replace(/^/mg,"        ")+",\n";
}
_4c=_4c.substr(0,_4c.length-2)+"\n    ]\n}";
}else{
_4c+=objj_msgSend(_4d,"description").replace(/^/mg,"    ")+"\n}";
}
return _4c;
}
})]);
class_addMethods(_1c,[new objj_method(sel_getUid("colorWithRed:green:blue:alpha:"),function(_50,_51,red,_52,_53,_54){
with(_50){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[MAX(0,MIN(1,red)),MAX(0,MIN(1,_52)),MAX(0,MIN(1,_53)),MAX(0,MIN(1,_54))]);
}
}),new objj_method(sel_getUid("colorWithCalibratedRed:green:blue:alpha:"),function(_55,_56,red,_57,_58,_59){
with(_55){
return objj_msgSend(_55,"colorWithRed:green:blue:alpha:",red,_57,_58,_59);
}
}),new objj_method(sel_getUid("colorWithWhite:alpha:"),function(_5a,_5b,_5c,_5d){
with(_5a){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[_5c,_5c,_5c,_5d]);
}
}),new objj_method(sel_getUid("colorWithCalibratedWhite:alpha:"),function(_5e,_5f,_60,_61){
with(_5e){
return objj_msgSend(_5e,"colorWithWhite:alpha:",_60,_61);
}
}),new objj_method(sel_getUid("colorWithHue:saturation:brightness:"),function(_62,_63,hue,_64,_65){
with(_62){
return objj_msgSend(_62,"colorWithHue:saturation:brightness:alpha:",hue,_64,_65,1);
}
}),new objj_method(sel_getUid("colorWithHue:saturation:brightness:alpha:"),function(_66,_67,hue,_68,_69,_6a){
with(_66){
if(_68===0){
return objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",_69/100,_6a);
}
var f=hue%60,p=(_69*(100-_68))/10000,q=(_69*(6000-_68*f))/600000,t=(_69*(6000-_68*(60-f)))/600000,b=_69/100;
switch(FLOOR(hue/60)){
case 0:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",b,t,p,_6a);
case 1:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",q,b,p,_6a);
case 2:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",p,b,t,_6a);
case 3:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",p,q,b,_6a);
case 4:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",t,p,b,_6a);
case 5:
return objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",b,p,q,_6a);
}
}
}),new objj_method(sel_getUid("colorWithHexString:"),function(_6b,_6c,hex){
with(_6b){
var _6d=_6e(hex);
return _6d?objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",_6d):null;
}
}),new objj_method(sel_getUid("colorWithSRGBRed:green:blue:alpha:"),function(_6f,_70,red,_71,_72,_73){
with(_6f){
return objj_msgSend(_6f,"colorWithRed:green:blue:alpha:",red,_71,_72,_73);
}
}),new objj_method(sel_getUid("blackColor"),function(_74,_75){
with(_74){
if(!_8){
_8=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,0,1]);
}
return _8;
}
}),new objj_method(sel_getUid("blueColor"),function(_76,_77){
with(_76){
if(!_b){
_b=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,1,1]);
}
return _b;
}
}),new objj_method(sel_getUid("darkGrayColor"),function(_78,_79){
with(_78){
if(!_f){
_f=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1/3,1);
}
return _f;
}
}),new objj_method(sel_getUid("grayColor"),function(_7a,_7b){
with(_7a){
if(!_d){
_d=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.5,1);
}
return _d;
}
}),new objj_method(sel_getUid("greenColor"),function(_7c,_7d){
with(_7c){
if(!_a){
_a=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,1,0,1]);
}
return _a;
}
}),new objj_method(sel_getUid("lightGrayColor"),function(_7e,_7f){
with(_7e){
if(!_e){
_e=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",2/3,1);
}
return _e;
}
}),new objj_method(sel_getUid("redColor"),function(_80,_81){
with(_80){
if(!_9){
_9=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0,0,1]);
}
return _9;
}
}),new objj_method(sel_getUid("whiteColor"),function(_82,_83){
with(_82){
if(!_10){
_10=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,1,1,1]);
}
return _10;
}
}),new objj_method(sel_getUid("yellowColor"),function(_84,_85){
with(_84){
if(!_c){
_c=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,1,0,1]);
}
return _c;
}
}),new objj_method(sel_getUid("brownColor"),function(_86,_87){
with(_86){
if(!_11){
_11=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.6,0.4,0.2,1]);
}
return _11;
}
}),new objj_method(sel_getUid("cyanColor"),function(_88,_89){
with(_88){
if(!_12){
_12=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,1,1,1]);
}
return _12;
}
}),new objj_method(sel_getUid("magentaColor"),function(_8a,_8b){
with(_8a){
if(!_13){
_13=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0,1,1]);
}
return _13;
}
}),new objj_method(sel_getUid("orangeColor"),function(_8c,_8d){
with(_8c){
if(!_14){
_14=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[1,0.5,0,1]);
}
return _14;
}
}),new objj_method(sel_getUid("purpleColor"),function(_8e,_8f){
with(_8e){
if(!_15){
_15=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.5,0,0.5,1]);
}
return _15;
}
}),new objj_method(sel_getUid("shadowColor"),function(_90,_91){
with(_90){
if(!_16){
_16=objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0,0,0,1/3]);
}
return _16;
}
}),new objj_method(sel_getUid("clearColor"),function(_92,_93){
with(_92){
if(!_17){
_17=objj_msgSend(_92,"colorWithCalibratedWhite:alpha:",0,0);
}
return _17;
}
}),new objj_method(sel_getUid("alternateSelectedControlColor"),function(_94,_95){
with(_94){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.22,0.46,0.84,1]);
}
}),new objj_method(sel_getUid("secondarySelectedControlColor"),function(_96,_97){
with(_96){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithRGBA:",[0.83,0.83,0.83,1]);
}
}),new objj_method(sel_getUid("colorWithPatternImage:"),function(_98,_99,_9a){
with(_98){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithPatternImage:",_9a);
}
}),new objj_method(sel_getUid("colorWithCSSString:"),function(_9b,_9c,_9d){
with(_9b){
return objj_msgSend(objj_msgSend(CPColor,"alloc"),"_initWithCSSString:",_9d);
}
})]);
var _1b=objj_getClass("CPColor");
if(!_1b){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _1c=_1b.isa;
class_addMethods(_1b,[new objj_method(sel_getUid("set"),function(_9e,_9f){
with(_9e){
objj_msgSend(_9e,"setFill");
objj_msgSend(_9e,"setStroke");
}
}),new objj_method(sel_getUid("setFill"),function(_a0,_a1){
with(_a0){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetFillColor(ctx,_a0);
}
}),new objj_method(sel_getUid("setStroke"),function(_a2,_a3){
with(_a2){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(ctx,_a2);
}
})]);
var _1b=objj_getClass("CPColor");
if(!_1b){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _1c=_1b.isa;
class_addMethods(_1c,[new objj_method(sel_getUid("randomColor"),function(_a4,_a5){
with(_a4){
return objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",RAND(),RAND(),RAND(),1);
}
})]);
var _a6="CPColorComponentsKey",_a7="CPColorPatternImageKey";
var _1b=objj_getClass("CPColor");
if(!_1b){
throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
}
var _1c=_1b.isa;
class_addMethods(_1b,[new objj_method(sel_getUid("initWithCoder:"),function(_a8,_a9,_aa){
with(_a8){
if(objj_msgSend(_aa,"containsValueForKey:",_a7)){
return objj_msgSend(_a8,"_initWithPatternImage:",objj_msgSend(_aa,"decodeObjectForKey:",_a7));
}
return objj_msgSend(_a8,"_initWithRGBA:",objj_msgSend(_aa,"decodeObjectForKey:",_a6));
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_ab,_ac,_ad){
with(_ab){
if(_patternImage){
objj_msgSend(_ad,"encodeObject:forKey:",_patternImage,_a7);
}else{
objj_msgSend(_ad,"encodeObject:forKey:",_components,_a6);
}
}
})]);
var _ae="0123456789ABCDEF";
var _6e=function(hex){
if(hex.length==3){
hex=hex.charAt(0)+hex.charAt(0)+hex.charAt(1)+hex.charAt(1)+hex.charAt(2)+hex.charAt(2);
}
if(hex.length!=6){
return null;
}
hex=hex.toUpperCase();
for(var i=0;i<hex.length;i++){
if(_ae.indexOf(hex.charAt(i))==-1){
return null;
}
}
var red=(_ae.indexOf(hex.charAt(0))*16+_ae.indexOf(hex.charAt(1)))/255,_af=(_ae.indexOf(hex.charAt(2))*16+_ae.indexOf(hex.charAt(3)))/255,_b0=(_ae.indexOf(hex.charAt(4))*16+_ae.indexOf(hex.charAt(5)))/255;
return [red,_af,_b0,1];
};
var _46=function(r,g,b){
return _b1(r)+_b1(g)+_b1(b);
};
var _b1=function(n){
if(!n||isNaN(n)){
return "00";
}
n=FLOOR(MIN(255,MAX(0,256*n)));
return _ae.charAt((n-n%16)/16)+_ae.charAt(n%16);
};
p;14;CPColorPanel.jt;16923;@STATIC;1.0;i;15;CPApplication.ji;10;CPButton.ji;10;CPCookie.ji;9;CPPanel.ji;8;CPView.ji;15;CPColorPicker.ji;21;CPSliderColorPicker.jt;16782;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPCookie.j",YES);
objj_executeFile("CPPanel.j",YES);
objj_executeFile("CPView.j",YES);
CPColorPanelColorDidChangeNotification="CPColorPanelColorDidChangeNotification";
var _1=20,_2=32,_3=14,_4=32,_5=12;
var _6=nil,_7=[];
CPWheelColorPickerMode=1;
CPSliderColorPickerMode=2;
CPColorPickerViewWidth=265;
CPColorPickerViewHeight=370;
var _8=objj_allocateClassPair(CPPanel,"CPColorPanel"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_toolbar"),new objj_ivar("_swatchView"),new objj_ivar("_previewView"),new objj_ivar("_opacitySlider"),new objj_ivar("_colorPickers"),new objj_ivar("_currentView"),new objj_ivar("_activePicker"),new objj_ivar("_color"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_mode")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("init"),function(_a,_b){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPColorPanel").super_class},"initWithContentRect:styleMask:",CGRectMake(500,50,219,370),(CPTitledWindowMask|CPClosableWindowMask|CPResizableWindowMask));
if(_a){
objj_msgSend(objj_msgSend(_a,"contentView"),"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.95,1));
objj_msgSend(_a,"setTitle:","Color Panel");
objj_msgSend(_a,"setLevel:",CPFloatingWindowLevel);
objj_msgSend(_a,"setFloatingPanel:",YES);
objj_msgSend(_a,"setBecomesKeyOnlyIfNeeded:",YES);
objj_msgSend(_a,"setMinSize:",CGSizeMake(219,363));
objj_msgSend(_a,"setMaxSize:",CGSizeMake(323,537));
}
return _a;
}
}),new objj_method(sel_getUid("setColor:"),function(_c,_d,_e){
with(_c){
_color=_e;
objj_msgSend(_previewView,"setBackgroundColor:",_color);
objj_msgSend(CPApp,"sendAction:to:from:",sel_getUid("changeColor:"),nil,_c);
if(_target&&_action){
objj_msgSend(CPApp,"sendAction:to:from:",_action,_target,_c);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPColorPanelColorDidChangeNotification,_c);
objj_msgSend(_activePicker,"setColor:",_color);
objj_msgSend(_opacitySlider,"setFloatValue:",objj_msgSend(_color,"alphaComponent"));
}
}),new objj_method(sel_getUid("setColor:updatePicker:"),function(_f,_10,_11,_12){
with(_f){
objj_msgSend(_f,"setColor:",_11);
if(_12){
objj_msgSend(_activePicker,"setColor:",_color);
}
}
}),new objj_method(sel_getUid("color"),function(_13,_14){
with(_13){
return _color;
}
}),new objj_method(sel_getUid("opacity"),function(_15,_16){
with(_15){
return objj_msgSend(_opacitySlider,"floatValue");
}
}),new objj_method(sel_getUid("setTarget:"),function(_17,_18,_19){
with(_17){
_target=_19;
}
}),new objj_method(sel_getUid("target"),function(_1a,_1b){
with(_1a){
return _target;
}
}),new objj_method(sel_getUid("setAction:"),function(_1c,_1d,_1e){
with(_1c){
_action=_1e;
}
}),new objj_method(sel_getUid("action"),function(_1f,_20){
with(_1f){
return _action;
}
}),new objj_method(sel_getUid("setMode:"),function(_21,_22,_23){
with(_21){
_mode=_23;
}
}),new objj_method(sel_getUid("_setPicker:"),function(_24,_25,_26){
with(_24){
var _27=_colorPickers[objj_msgSend(_26,"tag")],_28=objj_msgSend(_27,"provideNewView:",NO);
if(!_28){
_28=objj_msgSend(_27,"provideNewView:",YES);
}
if(_28==_currentView){
return;
}
if(_currentView){
objj_msgSend(_28,"setFrame:",objj_msgSend(_currentView,"frame"));
}else{
var _29=(_2+10+_1+5+_3+32),_2a=objj_msgSend(objj_msgSend(_24,"contentView"),"bounds");
objj_msgSend(_28,"setFrameSize:",CPSizeMake(_2a.size.width-10,_2a.size.height-_29));
objj_msgSend(_28,"setFrameOrigin:",CPPointMake(5,_29));
}
objj_msgSend(_currentView,"removeFromSuperview");
objj_msgSend(objj_msgSend(_24,"contentView"),"addSubview:",_28);
_currentView=_28;
_activePicker=_27;
objj_msgSend(_27,"setColor:",objj_msgSend(_24,"color"));
}
}),new objj_method(sel_getUid("mode"),function(_2b,_2c){
with(_2b){
return _mode;
}
}),new objj_method(sel_getUid("orderFront:"),function(_2d,_2e,_2f){
with(_2d){
objj_msgSend(_2d,"_loadContentsIfNecessary");
objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("CPColorPanel").super_class},"orderFront:",_2f);
}
}),new objj_method(sel_getUid("_loadContentsIfNecessary"),function(_30,_31){
with(_30){
if(_toolbar){
return;
}
if(!_color){
_color=objj_msgSend(CPColor,"whiteColor");
}
_colorPickers=[];
var _32=objj_msgSend(_7,"count");
for(var i=0;i<_32;i++){
var _33=_7[i],_34=objj_msgSend(objj_msgSend(_33,"alloc"),"initWithPickerMask:colorPanel:",0,_30);
_colorPickers.push(_34);
}
var _35=objj_msgSend(_30,"contentView"),_36=objj_msgSend(_35,"bounds");
_toolbar=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,6,CGRectGetWidth(_36),_2));
objj_msgSend(_toolbar,"setAutoresizingMask:",CPViewWidthSizable);
var _37=_32*_4+(_32-1)*_5,_38=(CGRectGetWidth(_36)-_37)/2,_39=nil;
for(var i=0;i<_32;i++){
var _3a=objj_msgSend(_colorPickers[i],"provideNewButtonImage"),_3b=objj_msgSend(_colorPickers[i],"provideNewAlternateButtonImage"),_3c=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(_38+i*(_4+_5),0,_4,_4));
objj_msgSend(_3c,"setTag:",i);
objj_msgSend(_3c,"setTarget:",_30);
objj_msgSend(_3c,"setAction:",sel_getUid("_setPicker:"));
objj_msgSend(_3c,"setBordered:",NO);
objj_msgSend(_3c,"setAutoresizingMask:",CPViewMinXMargin|CPViewMaxXMargin);
objj_msgSend(_3c,"setImage:",_3a);
objj_msgSend(_3c,"setAlternateImage:",_3b);
objj_msgSend(_toolbar,"addSubview:",_3c);
if(!_39){
_39=_3c;
}
}
var _3d=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(76,_2+10,CGRectGetWidth(_36)-86,_1));
_previewView=objj_msgSend(objj_msgSend(_CPColorPanelPreview,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_3d,"bounds"),2,2));
objj_msgSend(_previewView,"setColorPanel:",_30);
objj_msgSend(_previewView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3d,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,1));
objj_msgSend(_3d,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3d,"addSubview:",_previewView);
var _3e=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+10,60,15));
objj_msgSend(_3e,"setStringValue:","Preview:");
objj_msgSend(_3e,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_3e,"setAlignment:",CPRightTextAlignment);
var _3f=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(76,_2+10+_1+5,CGRectGetWidth(_36)-86,_3+2));
objj_msgSend(_3f,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,1));
objj_msgSend(_3f,"setAutoresizingMask:",CPViewWidthSizable);
_swatchView=objj_msgSend(objj_msgSend(_CPColorPanelSwatches,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_3f,"bounds"),1,1));
objj_msgSend(_swatchView,"setColorPanel:",_30);
objj_msgSend(_swatchView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_3f,"addSubview:",_swatchView);
var _40=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+8+_1+6,60,15));
objj_msgSend(_40,"setStringValue:","Swatches:");
objj_msgSend(_40,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_40,"setAlignment:",CPRightTextAlignment);
var _41=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CPRectMake(10,_2+_1+35,60,20));
objj_msgSend(_41,"setStringValue:","Opacity:");
objj_msgSend(_41,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_41,"setAlignment:",CPRightTextAlignment);
_opacitySlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(76,_2+_1+34,CGRectGetWidth(_36)-86,20));
objj_msgSend(_opacitySlider,"setMinValue:",0);
objj_msgSend(_opacitySlider,"setMaxValue:",1);
objj_msgSend(_opacitySlider,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_opacitySlider,"setTarget:",_30);
objj_msgSend(_opacitySlider,"setAction:",sel_getUid("setOpacity:"));
objj_msgSend(_35,"addSubview:",_toolbar);
objj_msgSend(_35,"addSubview:",_3d);
objj_msgSend(_35,"addSubview:",_3e);
objj_msgSend(_35,"addSubview:",_3f);
objj_msgSend(_35,"addSubview:",_40);
objj_msgSend(_35,"addSubview:",_41);
objj_msgSend(_35,"addSubview:",_opacitySlider);
_target=nil;
_action=nil;
_activePicker=nil;
objj_msgSend(_previewView,"setBackgroundColor:",_color);
if(_39){
objj_msgSend(_30,"_setPicker:",_39);
}
}
}),new objj_method(sel_getUid("setOpacity:"),function(_42,_43,_44){
with(_42){
var _45=objj_msgSend(objj_msgSend(_42,"color"),"components"),_46=objj_msgSend(_44,"floatValue");
objj_msgSend(_42,"setColor:updatePicker:",objj_msgSend(_color,"colorWithAlphaComponent:",_46),YES);
}
})]);
class_addMethods(_9,[new objj_method(sel_getUid("provideColorPickerClass:"),function(_47,_48,_49){
with(_47){
_7.push(_49);
}
}),new objj_method(sel_getUid("sharedColorPanel"),function(_4a,_4b){
with(_4a){
if(!_6){
_6=objj_msgSend(objj_msgSend(CPColorPanel,"alloc"),"init");
}
return _6;
}
}),new objj_method(sel_getUid("setPickerMode:"),function(_4c,_4d,_4e){
with(_4c){
var _4f=objj_msgSend(CPColorPanel,"sharedColorPanel");
objj_msgSend(_4f,"setMode:",_4e);
}
})]);
CPColorDragType="CPColorDragType";
var _50="CPColorPanelSwatchesCookie";
var _8=objj_allocateClassPair(CPView,"_CPColorPanelSwatches"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_swatches"),new objj_ivar("_dragColor"),new objj_ivar("_colorPanel"),new objj_ivar("_swatchCookie")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithFrame:"),function(_51,_52,_53){
with(_51){
_51=objj_msgSendSuper({receiver:_51,super_class:objj_getClass("_CPColorPanelSwatches").super_class},"initWithFrame:",_53);
objj_msgSend(_51,"setBackgroundColor:",objj_msgSend(CPColor,"grayColor"));
objj_msgSend(_51,"registerForDraggedTypes:",objj_msgSend(CPArray,"arrayWithObjects:",CPColorDragType));
var _54=objj_msgSend(CPColor,"whiteColor");
_swatchCookie=objj_msgSend(objj_msgSend(CPCookie,"alloc"),"initWithName:",_50);
var _55=objj_msgSend(_51,"startingColorList");
_swatches=[];
for(var i=0;i<50;i++){
var _56=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(13*i+1,1,12,12)),_57=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_56,"bounds"),1,1));
objj_msgSend(_56,"setBackgroundColor:",_54);
objj_msgSend(_57,"setBackgroundColor:",(i<_55.length)?_55[i]:_54);
objj_msgSend(_56,"addSubview:",_57);
objj_msgSend(_51,"addSubview:",_56);
_swatches.push(_56);
}
return _51;
}
}),new objj_method(sel_getUid("isOpaque"),function(_58,_59){
with(_58){
return YES;
}
}),new objj_method(sel_getUid("startingColorList"),function(_5a,_5b){
with(_5a){
var _5c=objj_msgSend(_swatchCookie,"value");
if(_5c==""){
return [objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPColor,"darkGrayColor"),objj_msgSend(CPColor,"grayColor"),objj_msgSend(CPColor,"lightGrayColor"),objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"redColor"),objj_msgSend(CPColor,"greenColor"),objj_msgSend(CPColor,"blueColor"),objj_msgSend(CPColor,"yellowColor")];
}
var _5c=eval(_5c),_5d=[];
for(var i=0;i<_5c.length;i++){
_5d.push(objj_msgSend(CPColor,"colorWithHexString:",_5c[i]));
}
return _5d;
}
}),new objj_method(sel_getUid("saveColorList"),function(_5e,_5f){
with(_5e){
var _60=[];
for(var i=0;i<_swatches.length;i++){
_60.push(objj_msgSend(objj_msgSend(objj_msgSend(_swatches[i],"subviews")[0],"backgroundColor"),"hexString"));
}
var _61=new Date();
_61.setYear(2019);
objj_msgSend(_swatchCookie,"setValue:expires:domain:",JSON.stringify(_60),_61,nil);
}
}),new objj_method(sel_getUid("setColorPanel:"),function(_62,_63,_64){
with(_62){
_colorPanel=_64;
}
}),new objj_method(sel_getUid("colorPanel"),function(_65,_66){
with(_65){
return _colorPanel;
}
}),new objj_method(sel_getUid("colorAtIndex:"),function(_67,_68,_69){
with(_67){
return objj_msgSend(objj_msgSend(_swatches[_69],"subviews")[0],"backgroundColor");
}
}),new objj_method(sel_getUid("setColor:atIndex:"),function(_6a,_6b,_6c,_6d){
with(_6a){
objj_msgSend(objj_msgSend(_swatches[_6d],"subviews")[0],"setBackgroundColor:",_6c);
objj_msgSend(_6a,"saveColorList");
}
}),new objj_method(sel_getUid("mouseUp:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_6e,"convertPoint:fromView:",objj_msgSend(_70,"locationInWindow"),nil),_72=objj_msgSend(_6e,"bounds");
if(!CGRectContainsPoint(_72,_71)||_71.x>objj_msgSend(_6e,"bounds").size.width-1||_71.x<1){
return NO;
}
objj_msgSend(_colorPanel,"setColor:updatePicker:",objj_msgSend(_6e,"colorAtIndex:",FLOOR(_71.x/13)),YES);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_73,_74,_75){
with(_73){
var _76=objj_msgSend(_73,"convertPoint:fromView:",objj_msgSend(_75,"locationInWindow"),nil);
if(_76.x>objj_msgSend(_73,"bounds").size.width-1||_76.x<1){
return NO;
}
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",objj_msgSend(CPArray,"arrayWithObject:",CPColorDragType),_73);
var _77=_swatches[FLOOR(_76.x/13)];
_dragColor=objj_msgSend(objj_msgSend(_77,"subviews")[0],"backgroundColor");
var _78=CPRectCreateCopy(objj_msgSend(_77,"bounds"));
var _79=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_78),_7a=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(_78,1,1));
objj_msgSend(_79,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_7a,"setBackgroundColor:",_dragColor);
objj_msgSend(_79,"addSubview:",_7a);
objj_msgSend(_73,"dragView:at:offset:event:pasteboard:source:slideBack:",_79,CPPointMake(_76.x-_78.size.width/2,_76.y-_78.size.height/2),CPPointMake(0,0),_75,nil,_73,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_7b,_7c,_7d,_7e){
with(_7b){
if(_7e==CPColorDragType){
objj_msgSend(_7d,"setData:forType:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_dragColor),_7e);
}
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_7f,_80,_81){
with(_7f){
var _82=objj_msgSend(_7f,"convertPoint:fromView:",objj_msgSend(_81,"draggingLocation"),nil),_83=objj_msgSend(_81,"draggingPasteboard"),_84=nil;
if(!objj_msgSend(_83,"availableTypeFromArray:",[CPColorDragType])||_82.x>objj_msgSend(_7f,"bounds").size.width-1||_82.x<1){
return NO;
}
objj_msgSend(_7f,"setColor:atIndex:",objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(_83,"dataForType:",CPColorDragType)),FLOOR(_82.x/13));
}
})]);
var _8=objj_allocateClassPair(CPView,"_CPColorPanelPreview"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_colorPanel")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("initWithFrame:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPColorPanelPreview").super_class},"initWithFrame:",_87);
objj_msgSend(_85,"registerForDraggedTypes:",objj_msgSend(CPArray,"arrayWithObjects:",CPColorDragType));
return _85;
}
}),new objj_method(sel_getUid("setColorPanel:"),function(_88,_89,_8a){
with(_88){
_colorPanel=_8a;
}
}),new objj_method(sel_getUid("colorPanel"),function(_8b,_8c){
with(_8b){
return _colorPanel;
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_8d,_8e,_8f){
with(_8d){
var _90=objj_msgSend(_8f,"draggingPasteboard");
if(!objj_msgSend(_90,"availableTypeFromArray:",[CPColorDragType])){
return NO;
}
var _91=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(_90,"dataForType:",CPColorDragType));
objj_msgSend(_colorPanel,"setColor:updatePicker:",_91,YES);
}
}),new objj_method(sel_getUid("isOpaque"),function(_92,_93){
with(_92){
return YES;
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_94,_95,_96){
with(_94){
var _97=objj_msgSend(_94,"convertPoint:fromView:",objj_msgSend(_96,"locationInWindow"),nil);
objj_msgSend(objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),"declareTypes:owner:",[CPColorDragType],_94);
var _98=CPRectMake(0,0,15,15);
var _99=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_98),_9a=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(_98,1,1));
objj_msgSend(_99,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_9a,"setBackgroundColor:",objj_msgSend(_94,"backgroundColor"));
objj_msgSend(_99,"addSubview:",_9a);
objj_msgSend(_94,"dragView:at:offset:event:pasteboard:source:slideBack:",_99,CPPointMake(_97.x-_98.size.width/2,_97.y-_98.size.height/2),CPPointMake(0,0),_96,nil,_94,YES);
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_9b,_9c,_9d,_9e){
with(_9b){
if(_9e==CPColorDragType){
objj_msgSend(_9d,"setData:forType:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",objj_msgSend(_9b,"backgroundColor")),_9e);
}
}
})]);
objj_executeFile("CPColorPicker.j",YES);
objj_executeFile("CPSliderColorPicker.j",YES);
objj_msgSend(CPColorPanel,"provideColorPickerClass:",CPColorWheelColorPicker);
objj_msgSend(CPColorPanel,"provideColorPickerClass:",CPSliderColorPicker);
p;15;CPColorPicker.jt;10147;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;10089;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_panel"),new objj_ivar("_mask")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPColorPicker").super_class},"init");
_panel=_6;
_mask=_5;
return _3;
}
}),new objj_method(sel_getUid("colorPanel"),function(_7,_8){
with(_7){
return _panel;
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_9,_a){
with(_9){
return nil;
}
}),new objj_method(sel_getUid("setMode:"),function(_b,_c,_d){
with(_b){
return;
}
}),new objj_method(sel_getUid("setColor:"),function(_e,_f,_10){
with(_e){
return;
}
})]);
var _1=objj_allocateClassPair(CPColorPicker,"CPColorWheelColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_pickerView"),new objj_ivar("_brightnessSlider"),new objj_ivar("_hueSaturationView"),new objj_ivar("_cachedColor")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_11,_12,_13,_14){
with(_11){
return objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPColorWheelColorPicker").super_class},"initWithPickerMask:colorPanel:",_13,_14);
}
}),new objj_method(sel_getUid("initView"),function(_15,_16){
with(_15){
aFrame=CPRectMake(0,0,CPColorPickerViewWidth,CPColorPickerViewHeight);
_pickerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",aFrame);
objj_msgSend(_pickerView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_brightnessSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(0,(aFrame.size.height-34),aFrame.size.width,15));
objj_msgSend(_brightnessSlider,"setValue:forThemeAttribute:",15,"track-width");
objj_msgSend(_brightnessSlider,"setValue:forThemeAttribute:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPColorPicker,"class")),"pathForResource:","brightness_bar.png"))),"track-color");
objj_msgSend(_brightnessSlider,"setMinValue:",0);
objj_msgSend(_brightnessSlider,"setMaxValue:",100);
objj_msgSend(_brightnessSlider,"setFloatValue:",100);
objj_msgSend(_brightnessSlider,"setTarget:",_15);
objj_msgSend(_brightnessSlider,"setAction:",sel_getUid("brightnessSliderDidChange:"));
objj_msgSend(_brightnessSlider,"setAutoresizingMask:",CPViewWidthSizable|CPViewMinYMargin);
_hueSaturationView=objj_msgSend(objj_msgSend(__CPColorWheel,"alloc"),"initWithFrame:",CPRectMake(0,0,aFrame.size.width,aFrame.size.height-38));
objj_msgSend(_hueSaturationView,"setDelegate:",_15);
objj_msgSend(_hueSaturationView,"setAutoresizingMask:",(CPViewWidthSizable|CPViewHeightSizable));
objj_msgSend(_pickerView,"addSubview:",_hueSaturationView);
objj_msgSend(_pickerView,"addSubview:",_brightnessSlider);
}
}),new objj_method(sel_getUid("brightnessSliderDidChange:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_17,"updateColor");
}
}),new objj_method(sel_getUid("colorWheelDidChange:"),function(_1a,_1b,_1c){
with(_1a){
objj_msgSend(_1a,"updateColor");
}
}),new objj_method(sel_getUid("updateColor"),function(_1d,_1e){
with(_1d){
var hue=objj_msgSend(_hueSaturationView,"angle"),_1f=objj_msgSend(_hueSaturationView,"distance"),_20=objj_msgSend(_brightnessSlider,"floatValue");
objj_msgSend(_hueSaturationView,"setWheelBrightness:",_20/100);
objj_msgSend(_brightnessSlider,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHue:saturation:brightness:",hue,_1f,100));
var _21=objj_msgSend(_1d,"colorPanel"),_22=objj_msgSend(_21,"opacity");
_cachedColor=objj_msgSend(CPColor,"colorWithHue:saturation:brightness:alpha:",hue,_1f,_20,_22);
objj_msgSend(objj_msgSend(_1d,"colorPanel"),"setColor:",_cachedColor);
}
}),new objj_method(sel_getUid("supportsMode:"),function(_23,_24,_25){
with(_23){
return (_25==CPWheelColorPickerMode)?YES:NO;
}
}),new objj_method(sel_getUid("currentMode"),function(_26,_27){
with(_26){
return CPWheelColorPickerMode;
}
}),new objj_method(sel_getUid("provideNewView:"),function(_28,_29,_2a){
with(_28){
if(_2a){
objj_msgSend(_28,"initView");
}
return _pickerView;
}
}),new objj_method(sel_getUid("setColor:"),function(_2b,_2c,_2d){
with(_2b){
if(objj_msgSend(_2d,"isEqual:",_cachedColor)){
return;
}
var hsb=objj_msgSend(_2d,"hsbComponents");
objj_msgSend(_hueSaturationView,"setPositionToColor:",_2d);
objj_msgSend(_brightnessSlider,"setFloatValue:",hsb[2]);
objj_msgSend(_hueSaturationView,"setWheelBrightness:",hsb[2]/100);
objj_msgSend(_brightnessSlider,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithHue:saturation:brightness:",hsb[0],hsb[1],100));
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_2e,_2f){
with(_2e){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_button.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("provideNewAlternateButtonImage"),function(_30,_31){
with(_30){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_button_h.png"),CGSizeMake(32,32));
}
})]);
var _1=objj_allocateClassPair(CPView,"__CPColorWheel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_wheelImage"),new objj_ivar("_blackWheelImage"),new objj_ivar("_crosshair"),new objj_ivar("_delegate"),new objj_ivar("_angle"),new objj_ivar("_distance"),new objj_ivar("_radius")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_32,_33,_34){
with(_32){
_32=objj_msgSendSuper({receiver:_32,super_class:objj_getClass("__CPColorWheel").super_class},"initWithFrame:",_34);
var _35=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel.png");
_wheelImage=new Image();
_wheelImage.src=_35;
_wheelImage.style.position="absolute";
_35=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","wheel_black.png");
_blackWheelImage=new Image();
_blackWheelImage.src=_35;
_blackWheelImage.style.opacity="0";
_blackWheelImage.style.filter="alpha(opacity=0)";
_blackWheelImage.style.position="absolute";
_DOMElement.appendChild(_wheelImage);
_DOMElement.appendChild(_blackWheelImage);
objj_msgSend(_32,"setWheelSize:",_34.size);
_crosshair=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(_radius-2,_radius-2,4,4));
objj_msgSend(_crosshair,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
var _36=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectInset(objj_msgSend(_crosshair,"bounds"),1,1));
objj_msgSend(_36,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_crosshair,"addSubview:",_36);
objj_msgSend(_32,"addSubview:",_crosshair);
return _32;
}
}),new objj_method(sel_getUid("setWheelBrightness:"),function(_37,_38,_39){
with(_37){
_blackWheelImage.style.opacity=1-_39;
_blackWheelImage.style.filter="alpha(opacity="+(1-_39)*100+")";
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_3a,_3b,_3c){
with(_3a){
objj_msgSendSuper({receiver:_3a,super_class:objj_getClass("__CPColorWheel").super_class},"setFrameSize:",_3c);
objj_msgSend(_3a,"setWheelSize:",_3c);
}
}),new objj_method(sel_getUid("setWheelSize:"),function(_3d,_3e,_3f){
with(_3d){
var min=MIN(_3f.width,_3f.height);
_blackWheelImage.style.width=min;
_blackWheelImage.style.height=min;
_blackWheelImage.width=min;
_blackWheelImage.height=min;
_blackWheelImage.style.top=(_3f.height-min)/2+"px";
_blackWheelImage.style.left=(_3f.width-min)/2+"px";
_wheelImage.style.width=min;
_wheelImage.style.height=min;
_wheelImage.width=min;
_wheelImage.height=min;
_wheelImage.style.top=(_3f.height-min)/2+"px";
_wheelImage.style.left=(_3f.width-min)/2+"px";
_radius=min/2;
objj_msgSend(_3d,"setAngle:distance:",objj_msgSend(_3d,"degreesToRadians:",_angle),(_distance/100)*_radius);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_40,_41,_42){
with(_40){
_delegate=_42;
}
}),new objj_method(sel_getUid("delegate"),function(_43,_44){
with(_43){
return _delegate;
}
}),new objj_method(sel_getUid("angle"),function(_45,_46){
with(_45){
return _angle;
}
}),new objj_method(sel_getUid("distance"),function(_47,_48){
with(_47){
return _distance;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_49,_4a,_4b){
with(_49){
objj_msgSend(_49,"reposition:",_4b);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"reposition:",_4e);
}
}),new objj_method(sel_getUid("reposition:"),function(_4f,_50,_51){
with(_4f){
var _52=objj_msgSend(_4f,"bounds"),_53=objj_msgSend(_4f,"convertPoint:fromView:",objj_msgSend(_51,"locationInWindow"),nil),_54=CGRectGetMidX(_52),_55=CGRectGetMidY(_52),_56=MIN(SQRT((_53.x-_54)*(_53.x-_54)+(_53.y-_55)*(_53.y-_55)),_radius),_57=ATAN2(_53.y-_55,_53.x-_54);
objj_msgSend(_4f,"setAngle:distance:",_57,_56);
objj_msgSend(_delegate,"colorWheelDidChange:",_4f);
}
}),new objj_method(sel_getUid("setAngle:distance:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=objj_msgSend(_58,"bounds"),_5d=CGRectGetMidX(_5c),_5e=CGRectGetMidY(_5c);
_angle=objj_msgSend(_58,"radiansToDegrees:",_5a);
_distance=(_5b/_radius)*100;
objj_msgSend(_crosshair,"setFrameOrigin:",CPPointMake(COS(_5a)*_5b+_5d-2,SIN(_5a)*_5b+_5e-2));
}
}),new objj_method(sel_getUid("setPositionToColor:"),function(_5f,_60,_61){
with(_5f){
var hsb=objj_msgSend(_61,"hsbComponents"),_62=objj_msgSend(_5f,"bounds"),_63=objj_msgSend(_5f,"degreesToRadians:",hsb[0]),_64=(hsb[1]/100)*_radius;
objj_msgSend(_5f,"setAngle:distance:",_63,_64);
}
}),new objj_method(sel_getUid("radiansToDegrees:"),function(_65,_66,_67){
with(_65){
return ((-_67/PI)*180+360)%360;
}
}),new objj_method(sel_getUid("degreesToRadians:"),function(_68,_69,_6a){
with(_68){
return -(((_6a-360)/180)*PI);
}
})]);
p;14;CPColorSpace.jt;739;@STATIC;1.0;t;721;
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPColorSpace"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_cgColorSpace")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithCGColorSpace:"),function(_4,_5,_6){
with(_4){
if(_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPColorSpace").super_class},"init")){
_cgColorSpace=_6;
}
return _4;
}
}),new objj_method(sel_getUid("CGColorSpace"),function(_7,_8){
with(_7){
return _cgColorSpace;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("sRGBColorSpace"),function(_9,_a){
with(_9){
if(!_1){
_1=objj_msgSend(objj_msgSend(_9,"alloc"),"initWithCGColorSpace:",CGColorSpaceCreateDeviceRGB());
}
return _1;
}
})]);
p;13;CPColorWell.jt;8175;@STATIC;1.0;I;21;Foundation/CPString.ji;8;CPView.ji;9;CPColor.ji;14;CPColorPanel.jt;8086;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPColorPanel.j",YES);
var _1="_CPColorWellDidBecomeExclusiveNotification";
var _2=objj_allocateClassPair(CPControl,"CPColorWell"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_active"),new objj_ivar("_bordered"),new objj_ivar("_color"),new objj_ivar("_wellView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("_reverseSetBinding"),function(_4,_5){
with(_4){
var _6=objj_msgSend(objj_msgSend(_4,"class"),"_binderClassForBinding:",CPValueBinding),_7=objj_msgSend(_6,"getBinding:forObject:",CPValueBinding,_4);
objj_msgSend(_7,"reverseSetValueFor:","color");
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_8,_9,_a){
with(_8){
_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("CPColorWell").super_class},"initWithFrame:",_a);
if(_8){
_active=NO;
_bordered=YES;
_color=objj_msgSend(CPColor,"whiteColor");
objj_msgSend(_8,"drawBezelWithHighlight:",NO);
objj_msgSend(_8,"drawWellInside:",CGRectInset(objj_msgSend(_8,"bounds"),3,3));
objj_msgSend(_8,"_registerForNotifications");
}
return _8;
}
}),new objj_method(sel_getUid("_registerForNotifications"),function(_b,_c){
with(_b){
var _d=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_d,"addObserver:selector:name:object:",_b,sel_getUid("colorWellDidBecomeExclusive:"),_1,nil);
objj_msgSend(_d,"addObserver:selector:name:object:",_b,sel_getUid("colorPanelWillClose:"),CPWindowWillCloseNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("isBordered"),function(_e,_f){
with(_e){
return _bordered;
}
}),new objj_method(sel_getUid("setBordered:"),function(_10,_11,_12){
with(_10){
if(_bordered==_12){
return;
}
_bordered=_12;
objj_msgSend(_10,"drawWellInside:",CGRectInset(objj_msgSend(_10,"bounds"),3,3));
}
}),new objj_method(sel_getUid("color"),function(_13,_14){
with(_13){
return _color;
}
}),new objj_method(sel_getUid("setColor:"),function(_15,_16,_17){
with(_15){
if(_color==_17){
return;
}
_color=_17;
objj_msgSend(_15,"drawWellInside:",CGRectInset(objj_msgSend(_15,"bounds"),3,3));
}
}),new objj_method(sel_getUid("takeColorFrom:"),function(_18,_19,_1a){
with(_18){
objj_msgSend(_18,"setColor:",objj_msgSend(_1a,"color"));
}
}),new objj_method(sel_getUid("activate:"),function(_1b,_1c,_1d){
with(_1b){
if(_1d){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",_1,_1b);
}
if(objj_msgSend(_1b,"isActive")){
return;
}
_active=YES;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_1b,sel_getUid("colorPanelDidChangeColor:"),CPColorPanelColorDidChangeNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("deactivate"),function(_1e,_1f){
with(_1e){
if(!objj_msgSend(_1e,"isActive")){
return;
}
_active=NO;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_1e,CPColorPanelColorDidChangeNotification,objj_msgSend(CPColorPanel,"sharedColorPanel"));
}
}),new objj_method(sel_getUid("isActive"),function(_20,_21){
with(_20){
return _active;
}
}),new objj_method(sel_getUid("drawBezelWithHighlight:"),function(_22,_23,_24){
with(_22){
}
}),new objj_method(sel_getUid("drawWellInside:"),function(_25,_26,_27){
with(_25){
if(!_wellView){
_wellView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_27);
objj_msgSend(_wellView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_25,"addSubview:",_wellView);
}else{
objj_msgSend(_wellView,"setFrame:",_27);
}
objj_msgSend(_wellView,"setBackgroundColor:",_color);
}
}),new objj_method(sel_getUid("colorPanelDidChangeColor:"),function(_28,_29,_2a){
with(_28){
objj_msgSend(_28,"takeColorFrom:",objj_msgSend(_2a,"object"));
objj_msgSend(_28,"sendAction:to:",objj_msgSend(_28,"action"),objj_msgSend(_28,"target"));
}
}),new objj_method(sel_getUid("colorWellDidBecomeExclusive:"),function(_2b,_2c,_2d){
with(_2b){
if(_2b!=objj_msgSend(_2d,"object")){
objj_msgSend(_2b,"deactivate");
}
}
}),new objj_method(sel_getUid("colorPanelWillClose:"),function(_2e,_2f,_30){
with(_2e){
objj_msgSend(_2e,"deactivate");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_31,_32,_33){
with(_31){
if(!objj_msgSend(_31,"isEnabled")){
return;
}
objj_msgSend(_31,"drawBezelWithHighlight:",YES);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_34,_35,_36){
with(_34){
if(!objj_msgSend(_34,"isEnabled")){
return;
}
objj_msgSend(_34,"drawBezelWithHighlight:",CGRectContainsPoint(objj_msgSend(_34,"bounds"),objj_msgSend(_34,"convertPoint:fromView:",objj_msgSend(_36,"locationInWindow"),nil)));
}
}),new objj_method(sel_getUid("mouseUp:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_37,"drawBezelWithHighlight:",NO);
if(!CGRectContainsPoint(objj_msgSend(_37,"bounds"),objj_msgSend(_37,"convertPoint:fromView:",objj_msgSend(_39,"locationInWindow"),nil))||!objj_msgSend(_37,"isEnabled")){
return;
}
objj_msgSend(_37,"activate:",YES);
var _3a=objj_msgSend(CPColorPanel,"sharedColorPanel");
objj_msgSend(_3a,"setColor:",_color);
objj_msgSend(_3a,"orderFront:",_37);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_3b,_3c,_3d){
with(_3b){
if(_3d==CPValueBinding){
return objj_msgSend(CPColorWellValueBinder,"class");
}
return objj_msgSendSuper({receiver:_3b,super_class:objj_getMetaClass("CPColorWell").super_class},"_binderClassForBinding:",_3d);
}
})]);
var _2=objj_allocateClassPair(CPBinder,"CPColorWellValueBinder"),_3=_2.isa;
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"),function(_3e,_3f,_40){
with(_3e){
var _41=objj_msgSend(CPColor,"blueColor");
objj_msgSend(_3e,"_setPlaceholder:forMarker:isDefault:",_41,CPMultipleValuesMarker,YES);
objj_msgSend(_3e,"_setPlaceholder:forMarker:isDefault:",_41,CPNoSelectionMarker,YES);
objj_msgSend(_3e,"_setPlaceholder:forMarker:isDefault:",_41,CPNotApplicableMarker,YES);
objj_msgSend(_3e,"_setPlaceholder:forMarker:isDefault:",_41,CPNullMarker,YES);
}
}),new objj_method(sel_getUid("setValueFor:"),function(_42,_43,_44){
with(_42){
var _45=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_46=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_47=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_48=objj_msgSend(_45,"valueForKeyPath:",_46),_49=CPIsControllerMarker(_48);
if(_49){
if(_48===CPNotApplicableMarker&&objj_msgSend(_47,"objectForKey:",CPRaisesForNotApplicableKeysBindingOption)){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"can't transform non applicable key on: "+_source+" value: "+_48);
}
_48=objj_msgSend(_42,"_placeholderForMarker:",_48);
}else{
_48=objj_msgSend(_42,"transformValue:withOptions:",_48,_47);
}
objj_msgSend(_source,"setColor:",_48);
}
})]);
var _4a="CPColorWellColorKey",_4b="CPColorWellBorderedKey";
var _2=objj_getClass("CPColorWell");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPColorWell\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_4c,_4d,_4e){
with(_4c){
_4c=objj_msgSendSuper({receiver:_4c,super_class:objj_getClass("CPColorWell").super_class},"initWithCoder:",_4e);
if(_4c){
_active=NO;
_bordered=objj_msgSend(_4e,"decodeBoolForKey:",_4b);
_color=objj_msgSend(_4e,"decodeObjectForKey:",_4a);
objj_msgSend(_4c,"drawBezelWithHighlight:",NO);
objj_msgSend(_4c,"drawWellInside:",CGRectInset(objj_msgSend(_4c,"bounds"),3,3));
objj_msgSend(_4c,"_registerForNotifications");
}
return _4c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_4f,_50,_51){
with(_4f){
var _52=_subviews;
_subviews=objj_msgSend(_subviews,"copy");
objj_msgSend(_subviews,"removeObjectIdenticalTo:",_wellView);
objj_msgSendSuper({receiver:_4f,super_class:objj_getClass("CPColorWell").super_class},"encodeWithCoder:",_51);
_subviews=_52;
objj_msgSend(_51,"encodeObject:forKey:",_color,_4a);
objj_msgSend(_51,"encodeObject:forKey:",_bordered,_4b);
}
})]);
p;17;CPCompatibility.jt;3976;@STATIC;1.0;i;9;CPEvent.ji;12;CPPlatform.jt;3927;
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPPlatform.j",YES);
CPUnknownBrowserEngine=0;
CPGeckoBrowserEngine=1;
CPInternetExplorerBrowserEngine=2;
CPKHTMLBrowserEngine=3;
CPOperaBrowserEngine=4;
CPWebKitBrowserEngine=5;
CPMacOperatingSystem=0;
CPWindowsOperatingSystem=1;
CPOtherOperatingSystem=2;
CPCSSRGBAFeature=1<<5;
CPHTMLCanvasFeature=1<<6;
CPHTMLContentEditableFeature=1<<7;
CPHTMLDragAndDropFeature=1<<8;
CPJavaScriptInnerTextFeature=1<<9;
CPJavaScriptTextContentFeature=1<<10;
CPJavaScriptClipboardEventsFeature=1<<11;
CPJavaScriptClipboardAccessFeature=1<<12;
CPJavaScriptCanvasDrawFeature=1<<13;
CPJavaScriptCanvasTransformFeature=1<<14;
CPVMLFeature=1<<15;
CPJavaScriptRemedialKeySupport=1<<16;
CPJavaScriptShadowFeature=1<<20;
CPJavaScriptNegativeMouseWheelValues=1<<22;
CPJavaScriptMouseWheelValues_8_15=1<<23;
CPOpacityRequiresFilterFeature=1<<24;
CPInputTypeCanBeChangedFeature=1<<25;
CPHTML5DragAndDropSourceYOffBy1=1<<26;
CPSOPDisabledFromFileURLs=1<<27;
var _1="",_2=CPUnknownBrowserEngine,_3=0;
_3|=CPInputTypeCanBeChangedFeature;
if(typeof window!=="undefined"&&typeof window.navigator!=="undefined"){
_1=window.navigator.userAgent;
}
if(typeof window!=="undefined"&&window.opera){
_2=CPOperaBrowserEngine;
_3|=CPJavaScriptCanvasDrawFeature;
}else{
if(typeof window!=="undefined"&&window.attachEvent){
_2=CPInternetExplorerBrowserEngine;
_3|=CPVMLFeature;
_3|=CPJavaScriptRemedialKeySupport;
_3|=CPJavaScriptShadowFeature;
_3|=CPOpacityRequiresFilterFeature;
_3&=~CPInputTypeCanBeChangedFeature;
}else{
if(_1.indexOf("AppleWebKit/")!=-1){
_2=CPWebKitBrowserEngine;
_3|=CPCSSRGBAFeature;
_3|=CPHTMLContentEditableFeature;
if(_1.indexOf("Chrome")===-1){
_3|=CPHTMLDragAndDropFeature;
}
_3|=CPJavaScriptClipboardEventsFeature;
_3|=CPJavaScriptClipboardAccessFeature;
_3|=CPJavaScriptShadowFeature;
var _4=_1.indexOf("AppleWebKit/")+"AppleWebKit/".length,_5=_1.indexOf(" ",_4),_6=_1.substring(_4,_5),_7=_6.indexOf("."),_8=parseInt(_6.substring(0,_7)),_9=parseInt(_6.substr(_7+1));
if((_1.indexOf("Safari")!==CPNotFound&&(_8>525||(_8===525&&_9>14)))||_1.indexOf("Chrome")!==CPNotFound){
_3|=CPJavaScriptRemedialKeySupport;
}
if(!objj_msgSend(CPPlatform,"isBrowser")){
_3|=CPJavaScriptRemedialKeySupport;
}
if(_8<532||(_8===532&&_9<6)){
_3|=CPHTML5DragAndDropSourceYOffBy1;
}
if(_1.indexOf("Chrome")===CPNotFound){
_3|=CPSOPDisabledFromFileURLs;
}
}else{
if(_1.indexOf("KHTML")!=-1){
_2=CPKHTMLBrowserEngine;
}else{
if(_1.indexOf("Gecko")!==-1){
_2=CPGeckoBrowserEngine;
_3|=CPJavaScriptCanvasDrawFeature;
var _a=_1.indexOf("Firefox"),_b=(_a===-1)?2:parseFloat(_1.substring(_a+"Firefox".length+1));
if(_b>=3){
_3|=CPCSSRGBAFeature;
}
if(_b<3){
_3|=CPJavaScriptMouseWheelValues_8_15;
}
}
}
}
}
}
if(typeof document!="undefined"){
var _c=document.createElement("canvas");
if(_c&&_c.getContext){
_3|=CPHTMLCanvasFeature;
var _d=document.createElement("canvas").getContext("2d");
if(_d&&_d.setTransform&&_d.transform){
_3|=CPJavaScriptCanvasTransformFeature;
}
}
var _e=document.createElement("div");
if(_e.innerText!=undefined){
_3|=CPJavaScriptInnerTextFeature;
}else{
if(_e.textContent!=undefined){
_3|=CPJavaScriptTextContentFeature;
}
}
}
CPFeatureIsCompatible=function(_f){
return _3&_f;
};
CPBrowserIsEngine=function(_10){
return _2===_10;
};
CPBrowserIsOperatingSystem=function(_11){
return OPERATING_SYSTEM===_11;
};
OPERATING_SYSTEM=CPOtherOperatingSystem;
if(_1.indexOf("Mac")!==-1){
OPERATING_SYSTEM=CPMacOperatingSystem;
CPPlatformActionKeyMask=CPCommandKeyMask;
CPUndoKeyEquivalent="z";
CPRedoKeyEquivalent="Z";
CPUndoKeyEquivalentModifierMask=CPCommandKeyMask;
CPRedoKeyEquivalentModifierMask=CPCommandKeyMask;
}else{
if(_1.indexOf("Windows")!==-1){
OPERATING_SYSTEM=CPWindowsOperatingSystem;
}
CPPlatformActionKeyMask=CPControlKeyMask;
CPUndoKeyEquivalent="z";
CPRedoKeyEquivalent="y";
CPUndoKeyEquivalentModifierMask=CPControlKeyMask;
CPRedoKeyEquivalentModifierMask=CPControlKeyMask;
}
p;11;CPControl.jt;21148;@STATIC;1.0;i;27;../Foundation/CPFormatter.ji;8;CPFont.ji;10;CPShadow.ji;8;CPView.ji;19;CPKeyValueBinding.jt;21033;
objj_executeFile("../Foundation/CPFormatter.j",YES);
objj_executeFile("CPFont.j",YES);
objj_executeFile("CPShadow.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPKeyValueBinding.j",YES);
CPLeftTextAlignment=0;
CPRightTextAlignment=1;
CPCenterTextAlignment=2;
CPJustifiedTextAlignment=3;
CPNaturalTextAlignment=4;
CPRegularControlSize=0;
CPSmallControlSize=1;
CPMiniControlSize=2;
CPLineBreakByWordWrapping=0;
CPLineBreakByCharWrapping=1;
CPLineBreakByClipping=2;
CPLineBreakByTruncatingHead=3;
CPLineBreakByTruncatingTail=4;
CPLineBreakByTruncatingMiddle=5;
CPTopVerticalTextAlignment=1;
CPCenterVerticalTextAlignment=2;
CPBottomVerticalTextAlignment=3;
CPScaleProportionally=0;
CPScaleToFit=1;
CPScaleNone=2;
CPImageScaleProportionallyDown=0;
CPImageScaleAxesIndependently=1;
CPImageScaleNone=2;
CPImageScaleProportionallyUpOrDown=3;
CPNoImage=0;
CPImageOnly=1;
CPImageLeft=2;
CPImageRight=3;
CPImageBelow=4;
CPImageAbove=5;
CPImageOverlaps=6;
CPOnState=1;
CPOffState=0;
CPMixedState=-1;
CPControlNormalBackgroundColor="CPControlNormalBackgroundColor";
CPControlSelectedBackgroundColor="CPControlSelectedBackgroundColor";
CPControlHighlightedBackgroundColor="CPControlHighlightedBackgroundColor";
CPControlDisabledBackgroundColor="CPControlDisabledBackgroundColor";
CPControlTextDidBeginEditingNotification="CPControlTextDidBeginEditingNotification";
CPControlTextDidChangeNotification="CPControlTextDidChangeNotification";
CPControlTextDidEndEditingNotification="CPControlTextDidEndEditingNotification";
var _1=objj_msgSend(CPColor,"blackColor");
var _2=objj_allocateClassPair(CPView,"CPControl"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_value"),new objj_ivar("_formatter"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_sendActionOn"),new objj_ivar("_sendsActionOnEndEditing"),new objj_ivar("_continuousTracking"),new objj_ivar("_trackingWasWithinFrame"),new objj_ivar("_trackingMouseDownFlags"),new objj_ivar("_previousTrackingLocation")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("formatter"),function(_4,_5){
with(_4){
return _formatter;
}
}),new objj_method(sel_getUid("setFormatter:"),function(_6,_7,_8){
with(_6){
_formatter=_8;
}
}),new objj_method(sel_getUid("sendsActionOnEndEditing"),function(_9,_a){
with(_9){
return _sendsActionOnEndEditing;
}
}),new objj_method(sel_getUid("setSendsActionOnEndEditing:"),function(_b,_c,_d){
with(_b){
_sendsActionOnEndEditing=_d;
}
}),new objj_method(sel_getUid("_continuouslyReverseSetBinding"),function(_e,_f){
with(_e){
var _10=objj_msgSend(objj_msgSend(_e,"class"),"_binderClassForBinding:",CPValueBinding),_11=objj_msgSend(_10,"getBinding:forObject:",CPValueBinding,_e);
if(objj_msgSend(_11,"continuouslyUpdatesValue")){
objj_msgSend(_11,"reverseSetValueFor:","objectValue");
}
}
}),new objj_method(sel_getUid("_reverseSetBinding"),function(_12,_13){
with(_12){
var _14=objj_msgSend(objj_msgSend(_12,"class"),"_binderClassForBinding:",CPValueBinding),_15=objj_msgSend(_14,"getBinding:forObject:",CPValueBinding,_12);
objj_msgSend(_15,"reverseSetValueFor:","objectValue");
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_16,_17,_18){
with(_16){
_16=objj_msgSendSuper({receiver:_16,super_class:objj_getClass("CPControl").super_class},"initWithFrame:",_18);
if(_16){
_sendActionOn=CPLeftMouseUpMask;
_trackingMouseDownFlags=0;
}
return _16;
}
}),new objj_method(sel_getUid("setAction:"),function(_19,_1a,_1b){
with(_19){
_action=_1b;
}
}),new objj_method(sel_getUid("action"),function(_1c,_1d){
with(_1c){
return _action;
}
}),new objj_method(sel_getUid("setTarget:"),function(_1e,_1f,_20){
with(_1e){
_target=_20;
}
}),new objj_method(sel_getUid("target"),function(_21,_22){
with(_21){
return _target;
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_23,_24,_25,_26){
with(_23){
objj_msgSend(_23,"_reverseSetBinding");
return objj_msgSend(CPApp,"sendAction:to:from:",_25,_26,_23);
}
}),new objj_method(sel_getUid("sendActionOn:"),function(_27,_28,_29){
with(_27){
var _2a=_sendActionOn;
_sendActionOn=_29;
return _2a;
}
}),new objj_method(sel_getUid("isContinuous"),function(_2b,_2c){
with(_2b){
return (_sendActionOn&CPPeriodicMask)!==0;
}
}),new objj_method(sel_getUid("setContinuous:"),function(_2d,_2e,_2f){
with(_2d){
if(_2f){
_sendActionOn|=CPPeriodicMask;
}else{
_sendActionOn&=~CPPeriodicMask;
}
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(_30,_31){
with(_30){
return NO;
}
}),new objj_method(sel_getUid("trackMouse:"),function(_32,_33,_34){
with(_32){
var _35=objj_msgSend(_34,"type"),_36=objj_msgSend(_32,"convertPoint:fromView:",objj_msgSend(_34,"locationInWindow"),nil),_37=objj_msgSend(_32,"tracksMouseOutsideOfFrame")||CGRectContainsPoint(objj_msgSend(_32,"bounds"),_36);
if(_35===CPLeftMouseUp){
objj_msgSend(_32,"stopTracking:at:mouseIsUp:",_previousTrackingLocation,_36,YES);
_trackingMouseDownFlags=0;
if(_37){
objj_msgSend(_32,"setThemeState:",CPThemeStateHovered);
}
}else{
objj_msgSend(_32,"unsetThemeState:",CPThemeStateHovered);
if(_35===CPLeftMouseDown){
_trackingMouseDownFlags=objj_msgSend(_34,"modifierFlags");
_continuousTracking=objj_msgSend(_32,"startTrackingAt:",_36);
}else{
if(_35===CPLeftMouseDragged){
if(_37){
if(!_trackingWasWithinFrame){
_continuousTracking=objj_msgSend(_32,"startTrackingAt:",_36);
}else{
if(_continuousTracking){
_continuousTracking=objj_msgSend(_32,"continueTracking:at:",_previousTrackingLocation,_36);
}
}
}else{
objj_msgSend(_32,"stopTracking:at:mouseIsUp:",_previousTrackingLocation,_36,NO);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_32,sel_getUid("trackMouse:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
if((_sendActionOn&(1<<_35))&&_37){
objj_msgSend(_32,"sendAction:to:",_action,_target);
}
_trackingWasWithinFrame=_37;
_previousTrackingLocation=_36;
}
}),new objj_method(sel_getUid("setState:"),function(_38,_39,_3a){
with(_38){
}
}),new objj_method(sel_getUid("nextState"),function(_3b,_3c){
with(_3b){
return 0;
}
}),new objj_method(sel_getUid("performClick:"),function(_3d,_3e,_3f){
with(_3d){
if(!objj_msgSend(_3d,"isEnabled")){
return;
}
objj_msgSend(_3d,"highlight:",YES);
objj_msgSend(_3d,"setState:",objj_msgSend(_3d,"nextState"));
try{
objj_msgSend(_3d,"sendAction:to:",objj_msgSend(_3d,"action"),objj_msgSend(_3d,"target"));
}
catch(e){
throw e;
}
finally{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0.1,_3d,sel_getUid("unhighlightButtonTimerDidFinish:"),nil,NO);
}
}
}),new objj_method(sel_getUid("unhighlightButtonTimerDidFinish:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_40,"highlight:",NO);
}
}),new objj_method(sel_getUid("mouseDownFlags"),function(_43,_44){
with(_43){
return _trackingMouseDownFlags;
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_45,_46,_47){
with(_45){
objj_msgSend(_45,"highlight:",YES);
return (_sendActionOn&CPPeriodicMask)||(_sendActionOn&CPLeftMouseDraggedMask);
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(_48,_49,_4a,_4b){
with(_48){
return (_sendActionOn&CPPeriodicMask)||(_sendActionOn&CPLeftMouseDraggedMask);
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_4c,_4d,_4e,_4f,_50){
with(_4c){
objj_msgSend(_4c,"highlight:",NO);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_51,_52,_53){
with(_51){
if(!objj_msgSend(_51,"isEnabled")){
return;
}
objj_msgSend(_51,"trackMouse:",_53);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_54,_55,_56){
with(_54){
if(!objj_msgSend(_54,"isEnabled")){
return;
}
objj_msgSend(_54,"setThemeState:",CPThemeStateHovered);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_57,_58,_59){
with(_57){
var _5a=objj_msgSend(_57,"convertPoint:fromView:",objj_msgSend(_59,"locationInWindow"),nil),_5b=objj_msgSend(_57,"tracksMouseOutsideOfFrame")||CGRectContainsPoint(objj_msgSend(_57,"bounds"),_5a);
if(!_5b){
objj_msgSend(_57,"unsetThemeState:",CPThemeStateHovered);
}
}
}),new objj_method(sel_getUid("objectValue"),function(_5c,_5d){
with(_5c){
return _value;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_5e,_5f,_60){
with(_5e){
_value=_60;
objj_msgSend(_5e,"setNeedsLayout");
objj_msgSend(_5e,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("floatValue"),function(_61,_62){
with(_61){
var _63=parseFloat(_value,10);
return isNaN(_63)?0:_63;
}
}),new objj_method(sel_getUid("setFloatValue:"),function(_64,_65,_66){
with(_64){
objj_msgSend(_64,"setObjectValue:",_66);
}
}),new objj_method(sel_getUid("doubleValue"),function(_67,_68){
with(_67){
var _69=parseFloat(_value,10);
return isNaN(_69)?0:_69;
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_6a,_6b,_6c){
with(_6a){
objj_msgSend(_6a,"setObjectValue:",_6c);
}
}),new objj_method(sel_getUid("intValue"),function(_6d,_6e){
with(_6d){
var _6f=parseInt(_value,10);
return isNaN(_6f)?0:_6f;
}
}),new objj_method(sel_getUid("setIntValue:"),function(_70,_71,_72){
with(_70){
objj_msgSend(_70,"setObjectValue:",_72);
}
}),new objj_method(sel_getUid("integerValue"),function(_73,_74){
with(_73){
var _75=parseInt(_value,10);
return isNaN(_75)?0:_75;
}
}),new objj_method(sel_getUid("setIntegerValue:"),function(_76,_77,_78){
with(_76){
objj_msgSend(_76,"setObjectValue:",_78);
}
}),new objj_method(sel_getUid("stringValue"),function(_79,_7a){
with(_79){
if(_formatter&&_value!==undefined&&_value!==nil){
var _7b=objj_msgSend(_79,"hasThemeState:",CPThemeStateEditing)?objj_msgSend(_formatter,"editingStringForObjectValue:",_value):objj_msgSend(_formatter,"stringForObjectValue:",_value);
if(_7b!==nil&&_7b!==undefined){
return _7b;
}
}
return (_value===undefined||_value===nil)?"":String(_value);
}
}),new objj_method(sel_getUid("setStringValue:"),function(_7c,_7d,_7e){
with(_7c){
if(_7e===nil||_7e===undefined){
CPLog.warn("nil or undefined sent to CPControl -setStringValue");
return;
}
var _7f;
if(_formatter){
_7f=nil;
if(objj_msgSend(_formatter,"getObjectValue:forString:errorDescription:",function(_80){
if(arguments.length){
return _7f=_80;
}
return _7f;
},_7e,nil)===NO){
if(!_7e||objj_msgSend(_formatter,"getObjectValue:forString:errorDescription:",function(_81){
if(arguments.length){
return _7f=_81;
}
return _7f;
},"",nil)===NO){
_7f=undefined;
}
}
}else{
_7f=_7e;
}
objj_msgSend(_7c,"setObjectValue:",_7f);
}
}),new objj_method(sel_getUid("takeDoubleValueFrom:"),function(_82,_83,_84){
with(_82){
if(objj_msgSend(_84,"respondsToSelector:",sel_getUid("doubleValue"))){
objj_msgSend(_82,"setDoubleValue:",objj_msgSend(_84,"doubleValue"));
}
}
}),new objj_method(sel_getUid("takeFloatValueFrom:"),function(_85,_86,_87){
with(_85){
if(objj_msgSend(_87,"respondsToSelector:",sel_getUid("floatValue"))){
objj_msgSend(_85,"setFloatValue:",objj_msgSend(_87,"floatValue"));
}
}
}),new objj_method(sel_getUid("takeIntegerValueFrom:"),function(_88,_89,_8a){
with(_88){
if(objj_msgSend(_8a,"respondsToSelector:",sel_getUid("integerValue"))){
objj_msgSend(_88,"setIntegerValue:",objj_msgSend(_8a,"integerValue"));
}
}
}),new objj_method(sel_getUid("takeIntValueFrom:"),function(_8b,_8c,_8d){
with(_8b){
if(objj_msgSend(_8d,"respondsToSelector:",sel_getUid("intValue"))){
objj_msgSend(_8b,"setIntValue:",objj_msgSend(_8d,"intValue"));
}
}
}),new objj_method(sel_getUid("takeObjectValueFrom:"),function(_8e,_8f,_90){
with(_8e){
if(objj_msgSend(_90,"respondsToSelector:",sel_getUid("objectValue"))){
objj_msgSend(_8e,"setObjectValue:",objj_msgSend(_90,"objectValue"));
}
}
}),new objj_method(sel_getUid("takeStringValueFrom:"),function(_91,_92,_93){
with(_91){
if(objj_msgSend(_93,"respondsToSelector:",sel_getUid("stringValue"))){
objj_msgSend(_91,"setStringValue:",objj_msgSend(_93,"stringValue"));
}
}
}),new objj_method(sel_getUid("textDidBeginEditing:"),function(_94,_95,_96){
with(_94){
if(objj_msgSend(_96,"object")!=_94){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidBeginEditingNotification,_94,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_96,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("textDidChange:"),function(_97,_98,_99){
with(_97){
if(objj_msgSend(_99,"object")!=_97){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidChangeNotification,_97,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_99,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("textDidEndEditing:"),function(_9a,_9b,_9c){
with(_9a){
if(objj_msgSend(_9c,"object")!=_9a){
return;
}
objj_msgSend(_9a,"_reverseSetBinding");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPControlTextDidEndEditingNotification,_9a,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_9c,"object"),"CPFieldEditor"));
}
}),new objj_method(sel_getUid("setAlignment:"),function(_9d,_9e,_9f){
with(_9d){
objj_msgSend(_9d,"setValue:forThemeAttribute:",_9f,"alignment");
}
}),new objj_method(sel_getUid("alignment"),function(_a0,_a1){
with(_a0){
return objj_msgSend(_a0,"valueForThemeAttribute:","alignment");
}
}),new objj_method(sel_getUid("setVerticalAlignment:"),function(_a2,_a3,_a4){
with(_a2){
objj_msgSend(_a2,"setValue:forThemeAttribute:",_a4,"vertical-alignment");
}
}),new objj_method(sel_getUid("verticalAlignment"),function(_a5,_a6){
with(_a5){
return objj_msgSend(_a5,"valueForThemeAttribute:","vertical-alignment");
}
}),new objj_method(sel_getUid("setLineBreakMode:"),function(_a7,_a8,_a9){
with(_a7){
objj_msgSend(_a7,"setValue:forThemeAttribute:",_a9,"line-break-mode");
}
}),new objj_method(sel_getUid("lineBreakMode"),function(_aa,_ab){
with(_aa){
return objj_msgSend(_aa,"valueForThemeAttribute:","line-break-mode");
}
}),new objj_method(sel_getUid("setTextColor:"),function(_ac,_ad,_ae){
with(_ac){
objj_msgSend(_ac,"setValue:forThemeAttribute:",_ae,"text-color");
}
}),new objj_method(sel_getUid("textColor"),function(_af,_b0){
with(_af){
return objj_msgSend(_af,"valueForThemeAttribute:","text-color");
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_b1,_b2,_b3){
with(_b1){
objj_msgSend(_b1,"setValue:forThemeAttribute:",_b3,"text-shadow-color");
}
}),new objj_method(sel_getUid("textShadowColor"),function(_b4,_b5){
with(_b4){
return objj_msgSend(_b4,"valueForThemeAttribute:","text-shadow-color");
}
}),new objj_method(sel_getUid("setTextShadowOffset:"),function(_b6,_b7,_b8){
with(_b6){
objj_msgSend(_b6,"setValue:forThemeAttribute:",_b8,"text-shadow-offset");
}
}),new objj_method(sel_getUid("textShadowOffset"),function(_b9,_ba){
with(_b9){
return objj_msgSend(_b9,"valueForThemeAttribute:","text-shadow-offset");
}
}),new objj_method(sel_getUid("setFont:"),function(_bb,_bc,_bd){
with(_bb){
objj_msgSend(_bb,"setValue:forThemeAttribute:",_bd,"font");
}
}),new objj_method(sel_getUid("font"),function(_be,_bf){
with(_be){
return objj_msgSend(_be,"valueForThemeAttribute:","font");
}
}),new objj_method(sel_getUid("setImagePosition:"),function(_c0,_c1,_c2){
with(_c0){
objj_msgSend(_c0,"setValue:forThemeAttribute:",_c2,"image-position");
}
}),new objj_method(sel_getUid("imagePosition"),function(_c3,_c4){
with(_c3){
return objj_msgSend(_c3,"valueForThemeAttribute:","image-position");
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_c5,_c6,_c7){
with(_c5){
objj_msgSend(_c5,"setValue:forThemeAttribute:",_c7,"image-scaling");
}
}),new objj_method(sel_getUid("imageScaling"),function(_c8,_c9){
with(_c8){
return objj_msgSend(_c8,"valueForThemeAttribute:","image-scaling");
}
}),new objj_method(sel_getUid("setEnabled:"),function(_ca,_cb,_cc){
with(_ca){
if(_cc){
objj_msgSend(_ca,"unsetThemeState:",CPThemeStateDisabled);
}else{
objj_msgSend(_ca,"setThemeState:",CPThemeStateDisabled);
}
}
}),new objj_method(sel_getUid("isEnabled"),function(_cd,_ce){
with(_cd){
return !objj_msgSend(_cd,"hasThemeState:",CPThemeStateDisabled);
}
}),new objj_method(sel_getUid("highlight:"),function(_cf,_d0,_d1){
with(_cf){
objj_msgSend(_cf,"setHighlighted:",_d1);
}
}),new objj_method(sel_getUid("setHighlighted:"),function(_d2,_d3,_d4){
with(_d2){
if(_d4){
objj_msgSend(_d2,"setThemeState:",CPThemeStateHighlighted);
}else{
objj_msgSend(_d2,"unsetThemeState:",CPThemeStateHighlighted);
}
}
}),new objj_method(sel_getUid("isHighlighted"),function(_d5,_d6){
with(_d5){
return objj_msgSend(_d5,"hasThemeState:",CPThemeStateHighlighted);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("themeAttributes"),function(_d7,_d8){
with(_d7){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPLeftTextAlignment,CPTopVerticalTextAlignment,CPLineBreakByClipping,objj_msgSend(CPColor,"blackColor"),objj_msgSend(CPFont,"systemFontOfSize:",12),objj_msgSend(CPNull,"null"),{width:0,height:0},CPImageLeft,CPScaleToFit,{width:0,height:0},{width:-1,height:-1}],["alignment","vertical-alignment","line-break-mode","text-color","font","text-shadow-color","text-shadow-offset","image-position","image-scaling","min-size","max-size"]);
}
}),new objj_method(sel_getUid("initialize"),function(_d9,_da){
with(_d9){
if(_d9===objj_msgSend(CPControl,"class")){
objj_msgSend(_d9,"exposeBinding:","value");
objj_msgSend(_d9,"exposeBinding:","objectValue");
objj_msgSend(_d9,"exposeBinding:","stringValue");
objj_msgSend(_d9,"exposeBinding:","integerValue");
objj_msgSend(_d9,"exposeBinding:","intValue");
objj_msgSend(_d9,"exposeBinding:","doubleValue");
objj_msgSend(_d9,"exposeBinding:","floatValue");
objj_msgSend(_d9,"exposeBinding:","enabled");
}
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_db,_dc,_dd){
with(_db){
if(_dd===CPValueBinding){
return objj_msgSend(_CPValueBinder,"class");
}
return objj_msgSendSuper({receiver:_db,super_class:objj_getMetaClass("CPControl").super_class},"_binderClassForBinding:",_dd);
}
})]);
var _de="CPControlValueKey",_df="CPControlControlStateKey",_e0="CPControlIsEnabledKey",_e1="CPControlTargetKey",_e2="CPControlActionKey",_e3="CPControlSendActionOnKey",_e4="CPControlSendsActionOnEndEditingKey";
var _e5="CPImageViewImageKey";
var _2=objj_getClass("CPControl");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPControl\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_e6,_e7,_e8){
with(_e6){
_e6=objj_msgSendSuper({receiver:_e6,super_class:objj_getClass("CPControl").super_class},"initWithCoder:",_e8);
if(_e6){
objj_msgSend(_e6,"setObjectValue:",objj_msgSend(_e8,"decodeObjectForKey:",_de));
objj_msgSend(_e6,"setTarget:",objj_msgSend(_e8,"decodeObjectForKey:",_e1));
objj_msgSend(_e6,"setAction:",objj_msgSend(_e8,"decodeObjectForKey:",_e2));
objj_msgSend(_e6,"sendActionOn:",objj_msgSend(_e8,"decodeIntForKey:",_e3));
objj_msgSend(_e6,"setSendsActionOnEndEditing:",objj_msgSend(_e8,"decodeBoolForKey:",_e4));
}
return _e6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e9,_ea,_eb){
with(_e9){
objj_msgSendSuper({receiver:_e9,super_class:objj_getClass("CPControl").super_class},"encodeWithCoder:",_eb);
if(_sendsActionOnEndEditing){
objj_msgSend(_eb,"encodeBool:forKey:",_sendsActionOnEndEditing,_e4);
}
var _ec=objj_msgSend(_e9,"objectValue");
if(_ec!==nil){
objj_msgSend(_eb,"encodeObject:forKey:",_ec,_de);
}
if(_target!==nil){
objj_msgSend(_eb,"encodeConditionalObject:forKey:",_target,_e1);
}
if(_action!==nil){
objj_msgSend(_eb,"encodeObject:forKey:",_action,_e2);
}
objj_msgSend(_eb,"encodeInt:forKey:",_sendActionOn,_e3);
}
})]);
var _ed=[],_ee={},_ef={};
_ed[CPRegularControlSize]="Regular";
_ed[CPSmallControlSize]="Small";
_ed[CPMiniControlSize]="Mini";
_CPControlIdentifierForControlSize=function(_f0){
return _ed[_f0];
};
_CPControlColorWithPatternImage=function(_f1,_f2){
var _f3=1,_f4=arguments.length,_f5="";
for(;_f3<_f4;++_f3){
_f5+=arguments[_f3];
}
var _f6=_ee[_f5];
if(!_f6){
var _f7=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPControl,"class"));
_f6=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_f7,"pathForResource:",_f2+"/"+_f5+".png"),_f1[_f5]));
_ee[_f5]=_f6;
}
return _f6;
};
_CPControlThreePartImagePattern=function(_f8,_f9,_fa){
var _fb=2,_fc=arguments.length,_fd="";
for(;_fb<_fc;++_fb){
_fd+=arguments[_fb];
}
var _fe=_ef[_fd];
if(!_fe){
var _ff=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPControl,"class")),path=_fa+"/"+_fd;
_f9=_f9[_fd];
_fe=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_ff,"pathForResource:",path+"0.png"),_f9[0]),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_ff,"pathForResource:",path+"1.png"),_f9[1]),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_ff,"pathForResource:",path+"2.png"),_f9[2])],_f8));
_ef[_fd]=_fe;
}
return _fe;
};
p;14;CPController.jt;1778;@STATIC;1.0;I;21;Foundation/CPObject.jt;1733;
objj_executeFile("Foundation/CPObject.j",NO);
var _1="CPControllerDeclaredKeysKey";
var _2=objj_allocateClassPair(CPObject,"CPController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_editors"),new objj_ivar("_declaredKeys")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPController").super_class},"init");
if(_4){
_editors=[];
_declaredKeys=[];
}
return _4;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6,_7,_8){
with(_6){
if(objj_msgSend(_declaredKeys,"count")>0){
objj_msgSend(_8,"encodeObject:forKey:",_declaredKeys,_1);
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_9,_a,_b){
with(_9){
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("CPController").super_class},"init");
if(_9){
_editors=[];
_declaredKeys=objj_msgSend(_b,"decodeObjectForKey:",_1)||[];
}
return _9;
}
}),new objj_method(sel_getUid("isEditing"),function(_c,_d){
with(_c){
return objj_msgSend(_editors,"count")>0;
}
}),new objj_method(sel_getUid("commitEditing"),function(_e,_f){
with(_e){
var _10=0,_11=_editors.length;
for(;_10<_11;++_10){
if(!objj_msgSend(objj_msgSend(_editors,"objectAtIndex:",i),"commitEditing")){
return NO;
}
}
return YES;
}
}),new objj_method(sel_getUid("discardEditing"),function(_12,_13){
with(_12){
objj_msgSend(_editors,"makeObjectsPerformSelector:",sel_getUid("discardEditing"));
}
}),new objj_method(sel_getUid("objectDidBeginEditing:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_editors,"addObject:",_16);
}
}),new objj_method(sel_getUid("objectDidEndEditing:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_editors,"removeObject:",_19);
}
})]);
p;10;CPCookie.jt;1478;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;1407;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPCookie"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_cookieName"),new objj_ivar("_cookieValue"),new objj_ivar("_expires")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithName:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCookie").super_class},"init");
_cookieName=_5;
_cookieValue=objj_msgSend(_3,"_readCookieValue");
return _3;
}
}),new objj_method(sel_getUid("value"),function(_6,_7){
with(_6){
return _cookieValue;
}
}),new objj_method(sel_getUid("name"),function(_8,_9){
with(_8){
return _cookieName;
}
}),new objj_method(sel_getUid("expires"),function(_a,_b){
with(_a){
return _expires;
}
}),new objj_method(sel_getUid("setValue:expires:domain:"),function(_c,_d,_e,_f,_10){
with(_c){
if(_f){
var _11="; expires="+_f.toGMTString();
}else{
var _11="";
}
if(_10){
_10="; domain="+_10;
}else{
_10="";
}
document.cookie=_cookieName+"="+_e+_11+"; path=/"+_10;
}
}),new objj_method(sel_getUid("_readCookieValue"),function(_12,_13){
with(_12){
var _14=_cookieName+"=",ca=document.cookie.split(";");
for(var i=0;i<ca.length;i++){
var c=ca[i];
while(c.charAt(0)==" "){
c=c.substring(1,c.length);
}
if(c.indexOf(_14)==0){
return c.substring(_14.length,c.length);
}
}
return "";
}
})]);
p;10;CPCursor.jt;7575;@STATIC;1.0;I;21;Foundation/CPObject.jt;7530;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=nil,_2=[],_3={};
var _4=objj_allocateClassPair(CPObject,"CPCursor"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_cssString"),new objj_ivar("_hotSpot"),new objj_ivar("_image"),new objj_ivar("_isSetOnMouseEntered"),new objj_ivar("_isSetOnMouseExited")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("_cssString"),function(_6,_7){
with(_6){
return _cssString;
}
}),new objj_method(sel_getUid("hotSpot"),function(_8,_9){
with(_8){
return _hotSpot;
}
}),new objj_method(sel_getUid("image"),function(_a,_b){
with(_a){
return _image;
}
}),new objj_method(sel_getUid("isSetOnMouseEntered"),function(_c,_d){
with(_c){
return _isSetOnMouseEntered;
}
}),new objj_method(sel_getUid("setOnMouseEntered:"),function(_e,_f,_10){
with(_e){
_isSetOnMouseEntered=_10;
}
}),new objj_method(sel_getUid("isSetOnMouseExited"),function(_11,_12){
with(_11){
return _isSetOnMouseExited;
}
}),new objj_method(sel_getUid("setOnMouseExited:"),function(_13,_14,_15){
with(_13){
_isSetOnMouseExited=_15;
}
}),new objj_method(sel_getUid("initWithCSSString:"),function(_16,_17,_18){
with(_16){
if(_16=objj_msgSendSuper({receiver:_16,super_class:objj_getClass("CPCursor").super_class},"init")){
_cssString=_18;
}
return _16;
}
}),new objj_method(sel_getUid("initWithImage:hotSpot:"),function(_19,_1a,_1b,_1c){
with(_19){
_hotSpot=_1c;
_image=_1b;
return objj_msgSend(_19,"initWithCSSString:","url("+objj_msgSend(_image,"filename")+")"+_1c.x+" "+_1c.y+", auto");
}
}),new objj_method(sel_getUid("initWithImage:foregroundColorHint:backgroundColorHint:hotSpot:"),function(_1d,_1e,_1f,_20,_21,_22){
with(_1d){
return objj_msgSend(_1d,"initWithImage:hotSpot:",_1f,hotSpot);
}
}),new objj_method(sel_getUid("pop"),function(_23,_24){
with(_23){
objj_msgSend(CPCursor,"pop");
}
}),new objj_method(sel_getUid("push"),function(_25,_26){
with(_25){
_1=_2.push(_25);
}
}),new objj_method(sel_getUid("set"),function(_27,_28){
with(_27){
_1=_27;
objj_msgSend(objj_msgSend(_27,"class"),"_setCursorCSS:",_cssString);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_29,_2a,_2b){
with(_29){
}
}),new objj_method(sel_getUid("mouseExited:"),function(_2c,_2d,_2e){
with(_2c){
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("hide"),function(_2f,_30){
with(_2f){
objj_msgSend(_2f,"_setCursorCSS:","none");
}
}),new objj_method(sel_getUid("unhide"),function(_31,_32){
with(_31){
objj_msgSend(_31,"_setCursorCSS:",objj_msgSend(_1,"_cssString"));
}
}),new objj_method(sel_getUid("setHiddenUntilMouseMoves:"),function(_33,_34,_35){
with(_33){
if(_35){
objj_msgSend(CPCursor,"hide");
}else{
objj_msgSend(CPCursor,"unhide");
}
}
}),new objj_method(sel_getUid("pop"),function(_36,_37){
with(_36){
if(_2.length>1){
_2.pop();
_1=_2[_2.length-1];
}
}
}),new objj_method(sel_getUid("currentCursor"),function(_38,_39){
with(_38){
return _1;
}
}),new objj_method(sel_getUid("_setCursorCSS:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(objj_msgSend(CPPlatformWindow,"visiblePlatformWindows"),"allObjects");
for(var i=0,_3e=objj_msgSend(_3d,"count");i<_3e;i++){
_3d[i]._DOMBodyElement.style.cursor=_3c;
}
}
}),new objj_method(sel_getUid("_systemCursorWithName:cssString:hasImage:"),function(_3f,_40,_41,_42,_43){
with(_3f){
var _44=_3[_41];
if(typeof _44==="undefined"){
var _45;
if(_43){
_45="url("+objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",_3f),"resourcePath")+"/CPCursor/"+_41+".cur), "+_42;
}else{
_45=_42;
}
_44=objj_msgSend(objj_msgSend(CPCursor,"alloc"),"initWithCSSString:",_45);
_3[_41]=_44;
}
return _44;
}
}),new objj_method(sel_getUid("arrowCursor"),function(_46,_47){
with(_46){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_47),"default",NO);
}
}),new objj_method(sel_getUid("crosshairCursor"),function(_48,_49){
with(_48){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_49),"crosshair",NO);
}
}),new objj_method(sel_getUid("IBeamCursor"),function(_4a,_4b){
with(_4a){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4b),"text",NO);
}
}),new objj_method(sel_getUid("pointingHandCursor"),function(_4c,_4d){
with(_4c){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4d),"pointer",NO);
}
}),new objj_method(sel_getUid("resizeDownCursor"),function(_4e,_4f){
with(_4e){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_4f),"s-resize",NO);
}
}),new objj_method(sel_getUid("resizeUpCursor"),function(_50,_51){
with(_50){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_51),"n-resize",NO);
}
}),new objj_method(sel_getUid("resizeLeftCursor"),function(_52,_53){
with(_52){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_53),"w-resize",NO);
}
}),new objj_method(sel_getUid("resizeRightCursor"),function(_54,_55){
with(_54){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_55),"e-resize",NO);
}
}),new objj_method(sel_getUid("resizeLeftRightCursor"),function(_56,_57){
with(_56){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_57),"col-resize",NO);
}
}),new objj_method(sel_getUid("resizeUpDownCursor"),function(_58,_59){
with(_58){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_59),"row-resize",NO);
}
}),new objj_method(sel_getUid("operationNotAllowedCursor"),function(_5a,_5b){
with(_5a){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5b),"not-allowed",NO);
}
}),new objj_method(sel_getUid("dragCopyCursor"),function(_5c,_5d){
with(_5c){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5d),"copy",YES);
}
}),new objj_method(sel_getUid("dragLinkCursor"),function(_5e,_5f){
with(_5e){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_5f),"alias",YES);
}
}),new objj_method(sel_getUid("contextualMenuCursor"),function(_60,_61){
with(_60){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_61),"context-menu",YES);
}
}),new objj_method(sel_getUid("openHandCursor"),function(_62,_63){
with(_62){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_63),"move",YES);
}
}),new objj_method(sel_getUid("closedHandCursor"),function(_64,_65){
with(_64){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_65),"-moz-grabbing",YES);
}
}),new objj_method(sel_getUid("disappearingItemCursor"),function(_66,_67){
with(_66){
return objj_msgSend(CPCursor,"_systemCursorWithName:cssString:hasImage:",CPStringFromSelector(_67),"auto",YES);
}
})]);
var _4=objj_getClass("CPCursor");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPCursor\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_68,_69,_6a){
with(_68){
if(_68=objj_msgSendSuper({receiver:_68,super_class:objj_getClass("CPCursor").super_class},"init")){
_cssString=objj_msgSend(_6a,"decodeObjectForKey:","CPCursorNameKey");
}
return _68;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6b,_6c,_6d){
with(_6b){
objj_msgSend(_6d,"encodeObject:forKey:",_cssString,"CPCursorNameKey");
}
})]);
p;12;CPDocument.jt;18979;@STATIC;1.0;I;21;Foundation/CPString.jI;20;Foundation/CPArray.ji;15;CPApplication.ji;13;CPResponder.ji;13;CPSavePanel.ji;18;CPViewController.ji;20;CPWindowController.jt;18804;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPSavePanel.j",YES);
objj_executeFile("CPViewController.j",YES);
objj_executeFile("CPWindowController.j",YES);
CPSaveOperation=0;
CPSaveAsOperation=1;
CPSaveToOperation=2;
CPAutosaveOperation=3;
CPChangeDone=0;
CPChangeUndone=1;
CPChangeCleared=2;
CPChangeReadOtherContents=3;
CPChangeAutosaved=4;
CPDocumentWillSaveNotification="CPDocumentWillSaveNotification";
CPDocumentDidSaveNotification="CPDocumentDidSaveNotification";
CPDocumentDidFailToSaveNotification="CPDocumentDidFailToSaveNotification";
var _1=0;
var _2=objj_allocateClassPair(CPResponder,"CPDocument"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_window"),new objj_ivar("_view"),new objj_ivar("_viewControllersForWindowControllers"),new objj_ivar("_fileURL"),new objj_ivar("_fileType"),new objj_ivar("_windowControllers"),new objj_ivar("_untitledDocumentIndex"),new objj_ivar("_hasUndoManager"),new objj_ivar("_undoManager"),new objj_ivar("_changeCount"),new objj_ivar("_readConnection"),new objj_ivar("_writeRequest"),new objj_ivar("_canCloseAlert")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPDocument").super_class},"init");
if(_4){
_windowControllers=[];
_viewControllersForWindowControllers=objj_msgSend(CPDictionary,"dictionary");
_hasUndoManager=YES;
_changeCount=0;
objj_msgSend(_4,"setNextResponder:",CPApp);
}
return _4;
}
}),new objj_method(sel_getUid("initWithType:error:"),function(_6,_7,_8,_9){
with(_6){
_6=objj_msgSend(_6,"init");
if(_6){
objj_msgSend(_6,"setFileType:",_8);
}
return _6;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_a,_b,_c,_d,_e,_f,_10){
with(_a){
_a=objj_msgSend(_a,"init");
if(_a){
objj_msgSend(_a,"setFileURL:",_c);
objj_msgSend(_a,"setFileType:",_d);
objj_msgSend(_a,"readFromURL:ofType:delegate:didReadSelector:contextInfo:",_c,_d,_e,_f,_10);
}
return _a;
}
}),new objj_method(sel_getUid("initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_11,_12,_13,_14,_15,_16,_17,_18){
with(_11){
_11=objj_msgSend(_11,"init");
if(_11){
objj_msgSend(_11,"setFileURL:",_13);
objj_msgSend(_11,"setFileType:",_15);
objj_msgSend(_11,"readFromURL:ofType:delegate:didReadSelector:contextInfo:",_14,_15,_16,_17,_18);
}
return _11;
}
}),new objj_method(sel_getUid("dataOfType:error:"),function(_19,_1a,_1b,_1c){
with(_19){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataOfType:error: must be overridden by the document subclass.");
}
}),new objj_method(sel_getUid("readFromData:ofType:error:"),function(_1d,_1e,_1f,_20,_21){
with(_1d){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"readFromData:ofType: must be overridden by the document subclass.");
}
}),new objj_method(sel_getUid("viewControllerWillLoadCib:"),function(_22,_23,_24){
with(_22){
}
}),new objj_method(sel_getUid("viewControllerDidLoadCib:"),function(_25,_26,_27){
with(_25){
}
}),new objj_method(sel_getUid("firstEligibleExistingWindowController"),function(_28,_29){
with(_28){
return nil;
}
}),new objj_method(sel_getUid("makeWindowControllers"),function(_2a,_2b){
with(_2a){
objj_msgSend(_2a,"makeViewAndWindowControllers");
}
}),new objj_method(sel_getUid("makeViewAndWindowControllers"),function(_2c,_2d){
with(_2c){
var _2e=objj_msgSend(_2c,"viewCibName"),_2f=nil,_30=nil;
if(objj_msgSend(_2e,"length")){
_2f=objj_msgSend(objj_msgSend(CPViewController,"alloc"),"initWithCibName:bundle:owner:",_2e,nil,_2c);
}
if(_2f){
_30=objj_msgSend(_2c,"firstEligibleExistingWindowController");
}
if(!_30){
var _31=objj_msgSend(_2c,"windowCibName");
if(objj_msgSend(_31,"length")){
_30=objj_msgSend(objj_msgSend(CPWindowController,"alloc"),"initWithWindowCibName:owner:",_31,_2c);
}else{
if(_2f){
var _32=objj_msgSend(_2f,"view"),_33=objj_msgSend(_32,"frame");
_33.origin=CGPointMake(50,50);
var _34=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",_33,CPTitledWindowMask|CPClosableWindowMask|CPMiniaturizableWindowMask|CPResizableWindowMask);
_30=objj_msgSend(objj_msgSend(CPWindowController,"alloc"),"initWithWindow:",_34);
}
}
}
if(_30&&_2f){
objj_msgSend(_30,"setSupportsMultipleDocuments:",YES);
}
if(_30){
objj_msgSend(_2c,"addWindowController:",_30);
}
if(_2f){
objj_msgSend(_2c,"addViewController:forWindowController:",_2f,_30);
}
}
}),new objj_method(sel_getUid("windowControllers"),function(_35,_36){
with(_35){
return _windowControllers;
}
}),new objj_method(sel_getUid("addWindowController:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_windowControllers,"addObject:",_39);
if(objj_msgSend(_39,"document")!==_37){
objj_msgSend(_39,"setDocument:",_37);
}
}
}),new objj_method(sel_getUid("removeWindowController:"),function(_3a,_3b,_3c){
with(_3a){
if(_3c){
objj_msgSend(_windowControllers,"removeObject:",_3c);
}
if(objj_msgSend(_3c,"document")===_3a){
objj_msgSend(_3c,"setDocument:",nil);
}
}
}),new objj_method(sel_getUid("view"),function(_3d,_3e){
with(_3d){
return _view;
}
}),new objj_method(sel_getUid("viewControllers"),function(_3f,_40){
with(_3f){
return objj_msgSend(_viewControllersForWindowControllers,"allValues");
}
}),new objj_method(sel_getUid("addViewController:forWindowController:"),function(_41,_42,_43,_44){
with(_41){
objj_msgSend(_viewControllersForWindowControllers,"setObject:forKey:",_43,objj_msgSend(_44,"UID"));
if(objj_msgSend(_44,"document")===_41){
objj_msgSend(_44,"setViewController:",_43);
}
}
}),new objj_method(sel_getUid("removeViewController:"),function(_45,_46,_47){
with(_45){
objj_msgSend(_viewControllersForWindowControllers,"removeObject:",_47);
}
}),new objj_method(sel_getUid("viewControllerForWindowController:"),function(_48,_49,_4a){
with(_48){
return objj_msgSend(_viewControllersForWindowControllers,"objectForKey:",objj_msgSend(_4a,"UID"));
}
}),new objj_method(sel_getUid("showWindows"),function(_4b,_4c){
with(_4b){
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocument:"),_4b);
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("showWindow:"),_4b);
}
}),new objj_method(sel_getUid("displayName"),function(_4d,_4e){
with(_4d){
if(_fileURL){
return objj_msgSend(_fileURL,"lastPathComponent");
}
if(!_untitledDocumentIndex){
_untitledDocumentIndex=++_1;
}
if(_untitledDocumentIndex==1){
return "Untitled";
}
return "Untitled "+_untitledDocumentIndex;
}
}),new objj_method(sel_getUid("viewCibName"),function(_4f,_50){
with(_4f){
return nil;
}
}),new objj_method(sel_getUid("windowCibName"),function(_51,_52){
with(_51){
return nil;
}
}),new objj_method(sel_getUid("windowControllerDidLoadCib:"),function(_53,_54,_55){
with(_53){
}
}),new objj_method(sel_getUid("windowControllerWillLoadCib:"),function(_56,_57,_58){
with(_56){
}
}),new objj_method(sel_getUid("readFromURL:ofType:delegate:didReadSelector:contextInfo:"),function(_59,_5a,_5b,_5c,_5d,_5e,_5f){
with(_59){
objj_msgSend(_readConnection,"cancel");
_readConnection=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",objj_msgSend(CPURLRequest,"requestWithURL:",_5b),_59);
_readConnection.session=_60(_5c,_5d,_5e,_5f);
}
}),new objj_method(sel_getUid("fileURL"),function(_61,_62){
with(_61){
return _fileURL;
}
}),new objj_method(sel_getUid("setFileURL:"),function(_63,_64,_65){
with(_63){
if(_fileURL===_65){
return;
}
_fileURL=_65;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:",sel_getUid("synchronizeWindowTitleWithDocumentName"));
}
}),new objj_method(sel_getUid("saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:"),function(_66,_67,_68,_69,_6a,_6b,_6c,_6d){
with(_66){
var _6e=objj_msgSend(_66,"dataOfType:error:",objj_msgSend(_66,"fileType"),nil),_6f=_changeCount;
_writeRequest=objj_msgSend(CPURLRequest,"requestWithURL:",_68);
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_writeRequest,"setHTTPMethod:","POST");
}else{
objj_msgSend(_writeRequest,"setHTTPMethod:","PUT");
}
objj_msgSend(_writeRequest,"setHTTPBody:",objj_msgSend(_6e,"rawString"));
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","close","Connection");
if(_6a===CPSaveOperation){
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","true","x-cappuccino-overwrite");
}
if(_6a!==CPSaveToOperation){
objj_msgSend(_66,"updateChangeCount:",CPChangeCleared);
}
var _70=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",_writeRequest,_66);
_70.session=_71(_68,_6a,_6f,_6b,_6c,_6d,_70);
}
}),new objj_method(sel_getUid("connection:didReceiveResponse:"),function(_72,_73,_74,_75){
with(_72){
if(!objj_msgSend(_75,"isKindOfClass:",objj_msgSend(CPHTTPURLResponse,"class"))){
return;
}
var _76=objj_msgSend(_75,"statusCode");
if(_76===200){
return;
}
var _77=_74.session;
if(_74==_readConnection){
objj_msgSend(_74,"cancel");
alert("There was an error retrieving the document.");
objj_msgSend(_77.delegate,_77.didReadSelector,_72,NO,_77.contextInfo);
}else{
if(_76==409){
objj_msgSend(_74,"cancel");
if(confirm("There already exists a file with that name, would you like to overwrite it?")){
objj_msgSend(_writeRequest,"setValue:forHTTPHeaderField:","true","x-cappuccino-overwrite");
objj_msgSend(_74,"start");
}else{
if(_77.saveOperation!=CPSaveToOperation){
_changeCount+=_77.changeCount;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_72,"isDocumentEdited"));
}
_writeRequest=nil;
objj_msgSend(_77.delegate,_77.didSaveSelector,_72,NO,_77.contextInfo);
objj_msgSend(_72,"_sendDocumentSavedNotification:",NO);
}
}
}
}
}),new objj_method(sel_getUid("connection:didReceiveData:"),function(_78,_79,_7a,_7b){
with(_78){
var _7c=_7a.session;
if(_7a==_readConnection){
objj_msgSend(_78,"readFromData:ofType:error:",objj_msgSend(CPData,"dataWithRawString:",_7b),_7c.fileType,nil);
objj_msgSend(_7c.delegate,_7c.didReadSelector,_78,YES,_7c.contextInfo);
}else{
if(_7c.saveOperation!=CPSaveToOperation){
objj_msgSend(_78,"setFileURL:",_7c.absoluteURL);
}
_writeRequest=nil;
objj_msgSend(_7c.delegate,_7c.didSaveSelector,_78,YES,_7c.contextInfo);
objj_msgSend(_78,"_sendDocumentSavedNotification:",YES);
}
}
}),new objj_method(sel_getUid("connection:didFailWithError:"),function(_7d,_7e,_7f,_80){
with(_7d){
var _81=_7f.session;
if(_readConnection==_7f){
objj_msgSend(_81.delegate,_81.didReadSelector,_7d,NO,_81.contextInfo);
}else{
if(_81.saveOperation!=CPSaveToOperation){
_changeCount+=_81.changeCount;
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_7d,"isDocumentEdited"));
}
_writeRequest=nil;
alert("There was an error saving the document.");
objj_msgSend(_81.delegate,_81.didSaveSelector,_7d,NO,_81.contextInfo);
objj_msgSend(_7d,"_sendDocumentSavedNotification:",NO);
}
}
}),new objj_method(sel_getUid("connectionDidFinishLoading:"),function(_82,_83,_84){
with(_82){
if(_readConnection==_84){
_readConnection=nil;
}
}
}),new objj_method(sel_getUid("isDocumentEdited"),function(_85,_86){
with(_85){
return _changeCount!=0;
}
}),new objj_method(sel_getUid("updateChangeCount:"),function(_87,_88,_89){
with(_87){
if(_89==CPChangeDone){
++_changeCount;
}else{
if(_89==CPChangeUndone){
--_changeCount;
}else{
if(_89==CPChangeCleared){
_changeCount=0;
}
}
}
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("setDocumentEdited:"),objj_msgSend(_87,"isDocumentEdited"));
}
}),new objj_method(sel_getUid("setFileType:"),function(_8a,_8b,_8c){
with(_8a){
_fileType=_8c;
}
}),new objj_method(sel_getUid("fileType"),function(_8d,_8e){
with(_8d){
return _fileType;
}
}),new objj_method(sel_getUid("hasUndoManager"),function(_8f,_90){
with(_8f){
return _hasUndoManager;
}
}),new objj_method(sel_getUid("setHasUndoManager:"),function(_91,_92,_93){
with(_91){
if(_hasUndoManager==_93){
return;
}
_hasUndoManager=_93;
if(!_hasUndoManager){
objj_msgSend(_91,"setUndoManager:",nil);
}
}
}),new objj_method(sel_getUid("_undoManagerWillCloseGroup:"),function(_94,_95,_96){
with(_94){
var _97=objj_msgSend(_96,"object");
if(objj_msgSend(_97,"isUndoing")||objj_msgSend(_97,"isRedoing")){
return;
}
objj_msgSend(_94,"updateChangeCount:",CPChangeDone);
}
}),new objj_method(sel_getUid("_undoManagerDidUndoChange:"),function(_98,_99,_9a){
with(_98){
objj_msgSend(_98,"updateChangeCount:",CPChangeUndone);
}
}),new objj_method(sel_getUid("_undoManagerDidRedoChange:"),function(_9b,_9c,_9d){
with(_9b){
objj_msgSend(_9b,"updateChangeCount:",CPChangeDone);
}
}),new objj_method(sel_getUid("setUndoManager:"),function(_9e,_9f,_a0){
with(_9e){
var _a1=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_undoManager){
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerDidUndoChangeNotification,_undoManager);
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerDidRedoChangeNotification,_undoManager);
objj_msgSend(_a1,"removeObserver:name:object:",_9e,CPUndoManagerWillCloseUndoGroupNotification,_undoManager);
}
_undoManager=_a0;
if(_undoManager){
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerDidUndoChange:"),CPUndoManagerDidUndoChangeNotification,_undoManager);
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerDidRedoChange:"),CPUndoManagerDidRedoChangeNotification,_undoManager);
objj_msgSend(_a1,"addObserver:selector:name:object:",_9e,sel_getUid("_undoManagerWillCloseGroup:"),CPUndoManagerWillCloseUndoGroupNotification,_undoManager);
}
}
}),new objj_method(sel_getUid("undoManager"),function(_a2,_a3){
with(_a2){
if(_hasUndoManager&&!_undoManager){
objj_msgSend(_a2,"setUndoManager:",objj_msgSend(objj_msgSend(CPUndoManager,"alloc"),"init"));
}
return _undoManager;
}
}),new objj_method(sel_getUid("windowWillReturnUndoManager:"),function(_a4,_a5,_a6){
with(_a4){
return objj_msgSend(_a4,"undoManager");
}
}),new objj_method(sel_getUid("saveDocument:"),function(_a7,_a8,_a9){
with(_a7){
objj_msgSend(_a7,"saveDocumentWithDelegate:didSaveSelector:contextInfo:",nil,nil,nil);
}
}),new objj_method(sel_getUid("saveDocumentWithDelegate:didSaveSelector:contextInfo:"),function(_aa,_ab,_ac,_ad,_ae){
with(_aa){
if(_fileURL){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentWillSaveNotification,_aa);
objj_msgSend(_aa,"saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:",_fileURL,objj_msgSend(_aa,"fileType"),CPSaveOperation,_ac,_ad,_ae);
}else{
objj_msgSend(_aa,"_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:",_ac,_ad,_ae);
}
}
}),new objj_method(sel_getUid("saveDocumentAs:"),function(_af,_b0,_b1){
with(_af){
objj_msgSend(_af,"_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:",nil,nil,nil);
}
}),new objj_method(sel_getUid("_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:"),function(_b2,_b3,_b4,_b5,_b6){
with(_b2){
var _b7=objj_msgSend(CPSavePanel,"savePanel"),_b8=objj_msgSend(_b7,"runModal");
if(!_b8){
return;
}
var _b9=objj_msgSend(_b7,"URL");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentWillSaveNotification,_b2);
objj_msgSend(_b2,"saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:",_b9,objj_msgSend(_b2,"fileType"),CPSaveAsOperation,_b4,_b5,_b6);
}
}),new objj_method(sel_getUid("_sendDocumentSavedNotification:"),function(_ba,_bb,_bc){
with(_ba){
if(_bc){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentDidSaveNotification,_ba);
}else{
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPDocumentDidFailToSaveNotification,_ba);
}
}
})]);
var _2=objj_getClass("CPDocument");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocument\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("close"),function(_bd,_be){
with(_bd){
objj_msgSend(_windowControllers,"makeObjectsPerformSelector:withObject:",sel_getUid("removeDocumentAndCloseIfNecessary:"),_bd);
objj_msgSend(objj_msgSend(CPDocumentController,"sharedDocumentController"),"removeDocument:",_bd);
}
}),new objj_method(sel_getUid("shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:"),function(_bf,_c0,_c1,_c2,_c3,_c4){
with(_bf){
if(objj_msgSend(_c1,"shouldCloseDocument")||(objj_msgSend(_windowControllers,"count")<2&&objj_msgSend(_windowControllers,"indexOfObject:",_c1)!==CPNotFound)){
objj_msgSend(_bf,"canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:",_bf,sel_getUid("_document:shouldClose:context:"),{delegate:_c2,selector:_c3,context:_c4});
}else{
if(objj_msgSend(_c2,"respondsToSelector:",_c3)){
objj_msgSend(_c2,_c3,_bf,YES,_c4);
}
}
}
}),new objj_method(sel_getUid("_document:shouldClose:context:"),function(_c5,_c6,_c7,_c8,_c9){
with(_c5){
if(_c7===_c5&&_c8){
objj_msgSend(_c5,"close");
}
objj_msgSend(_c9.delegate,_c9.selector,_c7,_c8,_c9.context);
}
}),new objj_method(sel_getUid("canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:"),function(_ca,_cb,_cc,_cd,_ce){
with(_ca){
if(!objj_msgSend(_ca,"isDocumentEdited")){
return objj_msgSend(_cc,"respondsToSelector:",_cd)&&objj_msgSend(_cc,_cd,_ca,YES,_ce);
}
_canCloseAlert=objj_msgSend(objj_msgSend(CPAlert,"alloc"),"init");
objj_msgSend(_canCloseAlert,"setDelegate:",_ca);
objj_msgSend(_canCloseAlert,"setAlertStyle:",CPWarningAlertStyle);
objj_msgSend(_canCloseAlert,"setTitle:","Unsaved Document");
objj_msgSend(_canCloseAlert,"setMessageText:","Do you want to save the changes you've made to the document \""+(objj_msgSend(_ca,"displayName")||objj_msgSend(_ca,"fileName"))+"\"?");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Save");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Cancel");
objj_msgSend(_canCloseAlert,"addButtonWithTitle:","Don't Save");
_canCloseAlert._context={delegate:_cc,selector:_cd,context:_ce};
objj_msgSend(_canCloseAlert,"runModal");
}
}),new objj_method(sel_getUid("alertDidEnd:returnCode:"),function(_cf,_d0,_d1,_d2){
with(_cf){
if(_d1!==_canCloseAlert){
return;
}
var _d3=_d1._context.delegate,_d4=_d1._context.selector,_d5=_d1._context.context;
if(_d2===0){
objj_msgSend(_cf,"saveDocumentWithDelegate:didSaveSelector:contextInfo:",_d3,_d4,_d5);
}else{
objj_msgSend(_d3,_d4,_cf,_d2===2,_d5);
}
_canCloseAlert=nil;
}
})]);
var _60=function(_d6,_d7,_d8,_d9){
return {fileType:_d6,delegate:_d7,didReadSelector:_d8,contextInfo:_d9};
};
var _71=function(_da,_db,_dc,_dd,_de,_df,_e0){
return {absoluteURL:_da,saveOperation:_db,changeCount:_dc,delegate:_dd,didSaveSelector:_de,contextInfo:_df,connection:_e0};
};
p;22;CPDocumentController.jt;9752;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;12;CPDocument.ji;13;CPOpenPanel.jt;9646;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPDocument.j",YES);
objj_executeFile("CPOpenPanel.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPDocumentController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_documents"),new objj_ivar("_documentTypes")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPDocumentController").super_class},"init");
if(_4){
_documents=objj_msgSend(objj_msgSend(CPArray,"alloc"),"init");
if(!_1){
_1=_4;
}
_documentTypes=objj_msgSend(objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"infoDictionary"),"objectForKey:","CPBundleDocumentTypes");
}
return _4;
}
}),new objj_method(sel_getUid("documentForURL:"),function(_6,_7,_8){
with(_6){
var _9=0,_a=objj_msgSend(_documents,"count");
for(;_9<_a;++_9){
var _b=_documents[_9];
if(objj_msgSend(objj_msgSend(_b,"fileURL"),"isEqual:",_8)){
return _b;
}
}
return nil;
}
}),new objj_method(sel_getUid("openUntitledDocumentOfType:display:"),function(_c,_d,_e,_f){
with(_c){
var _10=objj_msgSend(_c,"makeUntitledDocumentOfType:error:",_e,nil);
if(_10){
objj_msgSend(_c,"addDocument:",_10);
}
if(_f){
objj_msgSend(_10,"makeWindowControllers");
objj_msgSend(_10,"showWindows");
}
return _10;
}
}),new objj_method(sel_getUid("makeUntitledDocumentOfType:error:"),function(_11,_12,_13,_14){
with(_11){
return objj_msgSend(objj_msgSend(objj_msgSend(_11,"documentClassForType:",_13),"alloc"),"initWithType:error:",_13,_14);
}
}),new objj_method(sel_getUid("openDocumentWithContentsOfURL:display:error:"),function(_15,_16,_17,_18,_19){
with(_15){
var _1a=objj_msgSend(_15,"documentForURL:",_17);
if(!_1a){
var _1b=objj_msgSend(_15,"typeForContentsOfURL:error:",_17,_19);
_1a=objj_msgSend(_15,"makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_17,_1b,_15,sel_getUid("document:didRead:contextInfo:"),objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_18,"shouldDisplay"));
objj_msgSend(_15,"addDocument:",_1a);
if(_1a){
objj_msgSend(_15,"noteNewRecentDocument:",_1a);
}
}else{
if(_18){
objj_msgSend(_1a,"showWindows");
}
}
return _1a;
}
}),new objj_method(sel_getUid("reopenDocumentForURL:withContentsOfURL:error:"),function(_1c,_1d,_1e,_1f,_20){
with(_1c){
return objj_msgSend(_1c,"makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_1e,_1f,objj_msgSend(objj_msgSend(_documentTypes,"objectAtIndex:",0),"objectForKey:","CPBundleTypeName"),_1c,sel_getUid("document:didRead:contextInfo:"),nil);
}
}),new objj_method(sel_getUid("makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_21,_22,_23,_24,_25,_26,_27){
with(_21){
return objj_msgSend(objj_msgSend(objj_msgSend(_21,"documentClassForType:",_24),"alloc"),"initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_23,_24,_25,_26,_27);
}
}),new objj_method(sel_getUid("makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"),function(_28,_29,_2a,_2b,_2c,_2d,_2e,_2f){
with(_28){
return objj_msgSend(objj_msgSend(objj_msgSend(_28,"documentClassForType:",_2c),"alloc"),"initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:",_2a,_2b,_2c,_2d,_2e,_2f);
}
}),new objj_method(sel_getUid("document:didRead:contextInfo:"),function(_30,_31,_32,_33,_34){
with(_30){
if(!_33){
return;
}
objj_msgSend(_32,"makeWindowControllers");
if(objj_msgSend(_34,"objectForKey:","shouldDisplay")){
objj_msgSend(_32,"showWindows");
}
}
}),new objj_method(sel_getUid("newDocument:"),function(_35,_36,_37){
with(_35){
objj_msgSend(_35,"openUntitledDocumentOfType:display:",objj_msgSend(objj_msgSend(_documentTypes,"objectAtIndex:",0),"objectForKey:","CPBundleTypeName"),YES);
}
}),new objj_method(sel_getUid("openDocument:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(CPOpenPanel,"openPanel");
objj_msgSend(_3b,"runModal");
var _3c=objj_msgSend(_3b,"URLs"),_3d=0,_3e=objj_msgSend(_3c,"count");
for(;_3d<_3e;++_3d){
objj_msgSend(_38,"openDocumentWithContentsOfURL:display:error:",objj_msgSend(CPURL,"URLWithString:",_3c[_3d]),YES,nil);
}
}
}),new objj_method(sel_getUid("documents"),function(_3f,_40){
with(_3f){
return _documents;
}
}),new objj_method(sel_getUid("addDocument:"),function(_41,_42,_43){
with(_41){
objj_msgSend(_documents,"addObject:",_43);
}
}),new objj_method(sel_getUid("removeDocument:"),function(_44,_45,_46){
with(_44){
objj_msgSend(_documents,"removeObjectIdenticalTo:",_46);
}
}),new objj_method(sel_getUid("defaultType"),function(_47,_48){
with(_47){
return objj_msgSend(_documentTypes[0],"objectForKey:","CPBundleTypeName");
}
}),new objj_method(sel_getUid("typeForContentsOfURL:error:"),function(_49,_4a,_4b,_4c){
with(_49){
var _4d=0,_4e=_documentTypes.length,_4f=objj_msgSend(objj_msgSend(_4b,"pathExtension"),"lowercaseString"),_50=nil;
for(;_4d<_4e;++_4d){
var _51=_documentTypes[_4d],_52=objj_msgSend(_51,"objectForKey:","CFBundleTypeExtensions"),_53=0,_54=_52.length;
for(;_53<_54;++_53){
var _55=objj_msgSend(_52[_53],"lowercaseString");
if(_55===_4f){
return objj_msgSend(_51,"objectForKey:","CPBundleTypeName");
}
if(_55==="****"){
_50=objj_msgSend(_51,"objectForKey:","CPBundleTypeName");
}
}
}
return _50||objj_msgSend(_49,"defaultType");
}
}),new objj_method(sel_getUid("_infoForType:"),function(_56,_57,_58){
with(_56){
var i=0,_59=objj_msgSend(_documentTypes,"count");
for(;i<_59;++i){
var _5a=_documentTypes[i];
if(objj_msgSend(_5a,"objectForKey:","CPBundleTypeName")==_58){
return _5a;
}
}
return nil;
}
}),new objj_method(sel_getUid("documentClassForType:"),function(_5b,_5c,_5d){
with(_5b){
var _5e=objj_msgSend(objj_msgSend(_5b,"_infoForType:",_5d),"objectForKey:","CPDocumentClass");
return _5e?CPClassFromString(_5e):nil;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("sharedDocumentController"),function(_5f,_60){
with(_5f){
if(!_1){
objj_msgSend(objj_msgSend(_5f,"alloc"),"init");
}
return _1;
}
})]);
var _2=objj_getClass("CPDocumentController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:"),function(_61,_62,_63,_64,_65){
with(_61){
var _66={delegate:_63,selector:_64,context:_65};
objj_msgSend(_61,"_closeDocumentsStartingWith:shouldClose:context:",nil,YES,_66);
}
}),new objj_method(sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"),function(_67,_68,_69,_6a,_6b){
with(_67){
if(_6a){
objj_msgSend(_69,"close");
if(objj_msgSend(objj_msgSend(_67,"documents"),"count")>0){
objj_msgSend(objj_msgSend(objj_msgSend(_67,"documents"),"lastObject"),"canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:",_67,sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"),_6b);
return;
}
}
if(objj_msgSend(_6b.delegate,"respondsToSelector:",_6b.selector)){
objj_msgSend(_6b.delegate,_6b.selector,_67,objj_msgSend(objj_msgSend(_67,"documents"),"count")===0,_6b.context);
}
}
})]);
var _2=objj_getClass("CPDocumentController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("recentDocumentURLs"),function(_6c,_6d){
with(_6c){
if(typeof window["cpRecentDocumentURLs"]==="function"){
return window.cpRecentDocumentURLs();
}
return [];
}
}),new objj_method(sel_getUid("clearRecentDocuments:"),function(_6e,_6f,_70){
with(_6e){
if(typeof window["cpClearRecentDocuments"]==="function"){
window.cpClearRecentDocuments();
}
objj_msgSend(_6e,"_updateRecentDocumentsMenu");
}
}),new objj_method(sel_getUid("noteNewRecentDocument:"),function(_71,_72,_73){
with(_71){
objj_msgSend(_71,"noteNewRecentDocumentURL:",objj_msgSend(_73,"fileURL"));
}
}),new objj_method(sel_getUid("noteNewRecentDocumentURL:"),function(_74,_75,_76){
with(_74){
var _77=objj_msgSend(_76,"isKindOfClass:",CPString)?_76:objj_msgSend(_76,"absoluteString");
if(typeof window["cpNoteNewRecentDocumentPath"]==="function"){
window.cpNoteNewRecentDocumentPath(_77);
}
objj_msgSend(_74,"_updateRecentDocumentsMenu");
}
}),new objj_method(sel_getUid("_removeAllRecentDocumentsFromMenu:"),function(_78,_79,_7a){
with(_78){
var _7b=objj_msgSend(_7a,"itemArray"),_7c=objj_msgSend(_7b,"count");
while(_7c--){
var _7d=_7b[_7c];
if(objj_msgSend(_7d,"action")===sel_getUid("_openRecentDocument:")){
objj_msgSend(_7a,"removeItemAtIndex:",_7c);
}
}
}
}),new objj_method(sel_getUid("_updateRecentDocumentsMenu"),function(_7e,_7f){
with(_7e){
var _80=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"_menuWithName:","_CPRecentDocumentsMenu"),_81=objj_msgSend(_7e,"recentDocumentURLs"),_82=objj_msgSend(_80,"itemArray"),_83=objj_msgSend(_81,"count"),_84=objj_msgSend(_82,"count");
objj_msgSend(_7e,"_removeAllRecentDocumentsFromMenu:",_80);
if(_84){
if(!_83){
if(objj_msgSend(_82[0],"isSeparatorItem")){
objj_msgSend(_80,"removeItemAtIndex:",0);
}
}else{
if(!objj_msgSend(_82[0],"isSeparatorItem")){
objj_msgSend(_80,"insertItem:atIndex:",objj_msgSend(CPMenuItem,"separatorItem"),0);
}
}
}
while(_83--){
var _85=_81[_83],_86=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",objj_msgSend(_85,"lastPathComponent"),sel_getUid("_openRecentDocument:"),nil);
objj_msgSend(_86,"setTag:",_85);
objj_msgSend(_80,"insertItem:atIndex:",_86,0);
}
}
}),new objj_method(sel_getUid("_openRecentDocument:"),function(_87,_88,_89){
with(_87){
objj_msgSend(_87,"openDocumentWithContentsOfURL:display:error:",objj_msgSend(_89,"tag"),YES,nil);
}
})]);
p;14;CPDragServer.jt;14951;@STATIC;1.0;i;15;CPApplication.ji;9;CPEvent.ji;13;CPImageView.ji;14;CPPasteboard.ji;8;CPView.ji;10;CPWindow.jt;14834;
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPPasteboard.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("CPWindow.j",YES);
CPDragOperationNone=0;
CPDragOperationCopy=1<<1;
CPDragOperationLink=1<<1;
CPDragOperationGeneric=1<<2;
CPDragOperationPrivate=1<<3;
CPDragOperationMove=1<<4;
CPDragOperationDelete=1<<5;
CPDragOperationEvery=-1;
var _1=nil,_2=0.05;
var _3=nil;
var _4=nil,_5=nil;
var _6=objj_allocateClassPair(CPObject,"CPDraggingInfo"),_7=_6.isa;
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("draggingPasteboard"),function(_8,_9){
with(_8){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
return objj_msgSend(_CPDOMDataTransferPasteboard,"DOMDataTransferPasteboard");
}
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingPasteboard");
}
}),new objj_method(sel_getUid("draggingSource"),function(_a,_b){
with(_a){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingSource");
}
}),new objj_method(sel_getUid("draggingLocation"),function(_c,_d){
with(_c){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingLocation");
}
}),new objj_method(sel_getUid("draggingDestinationWindow"),function(_e,_f){
with(_e){
return (objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"),"isKindOfClass:",objj_msgSend(CPWindow,"class"))?objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"):objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggingDestination"),"window"));
}
}),new objj_method(sel_getUid("draggedImage"),function(_10,_11){
with(_10){
return objj_msgSend(objj_msgSend(_10,"draggedView"),"image");
}
}),new objj_method(sel_getUid("draggedImageLocation"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"draggedViewLocation");
}
}),new objj_method(sel_getUid("draggedView"),function(_14,_15){
with(_14){
return objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"draggedView");
}
}),new objj_method(sel_getUid("draggedViewLocation"),function(_16,_17){
with(_16){
var _18=objj_msgSend(CPDragServer,"sharedDragServer");
return objj_msgSend((objj_msgSend(objj_msgSend(_18,"draggingDestination"),"isKindOfClass:",objj_msgSend(CPWindow,"class"))?objj_msgSend(_18,"draggingDestination"):objj_msgSend(objj_msgSend(_18,"draggingDestination"),"window")),"convertPlatformWindowToBase:",objj_msgSend(objj_msgSend(_18,"draggedView"),"frame").origin);
}
})]);
var _19=1<<0,_1a=1<<1,_1b=1<<2,_1c=1<<3;
var _6=objj_allocateClassPair(CPObject,"CPDragServer"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_isDragging"),new objj_ivar("_draggedWindow"),new objj_ivar("_draggedView"),new objj_ivar("_imageView"),new objj_ivar("_isDraggingImage"),new objj_ivar("_draggingOffset"),new objj_ivar("_draggingPasteboard"),new objj_ivar("_draggingSource"),new objj_ivar("_implementedDraggingSourceMethods"),new objj_ivar("_draggingLocation"),new objj_ivar("_draggingDestination"),new objj_ivar("_draggingDestinationWantsPeriodicUpdates"),new objj_ivar("_startDragLocation"),new objj_ivar("_shouldSlideBack"),new objj_ivar("_dragOperation"),new objj_ivar("_draggingUpdateTimer")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("isDragging"),function(_1d,_1e){
with(_1d){
return _isDragging;
}
}),new objj_method(sel_getUid("draggedWindow"),function(_1f,_20){
with(_1f){
return _draggedWindow;
}
}),new objj_method(sel_getUid("draggedView"),function(_21,_22){
with(_21){
return _draggedView;
}
}),new objj_method(sel_getUid("draggingOffset"),function(_23,_24){
with(_23){
return _draggingOffset;
}
}),new objj_method(sel_getUid("draggingPasteboard"),function(_25,_26){
with(_25){
return _draggingPasteboard;
}
}),new objj_method(sel_getUid("draggingSource"),function(_27,_28){
with(_27){
return _draggingSource;
}
}),new objj_method(sel_getUid("init"),function(_29,_2a){
with(_29){
_29=objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPDragServer").super_class},"init");
if(_29){
_draggedWindow=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",{origin:{x:0,y:0},size:{width:0,height:0}},CPBorderlessWindowMask);
objj_msgSend(_draggedWindow,"setLevel:",CPDraggingWindowLevel);
}
return _29;
}
}),new objj_method(sel_getUid("draggingDestination"),function(_2b,_2c){
with(_2b){
return _draggingDestination;
}
}),new objj_method(sel_getUid("draggingLocation"),function(_2d,_2e){
with(_2d){
return _draggingLocation;
}
}),new objj_method(sel_getUid("draggingStartedInPlatformWindow:globalLocation:"),function(_2f,_30,_31,_32){
with(_2f){
if(_isDraggingImage){
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:beganAt:"))){
objj_msgSend(_draggingSource,"draggedImage:beganAt:",objj_msgSend(_draggedView,"image"),_32);
}
}else{
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:beganAt:"))){
objj_msgSend(_draggingSource,"draggedView:beganAt:",_draggedView,_32);
}
}
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"orderFront:",_2f);
}
}
}),new objj_method(sel_getUid("draggingSourceUpdatedWithGlobalLocation:"),function(_33,_34,_35){
with(_33){
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"setFrameOrigin:",{x:_35.x-_draggingOffset.width,y:_35.y-_draggingOffset.height});
}
if(_implementedDraggingSourceMethods&_19){
objj_msgSend(_draggingSource,"draggedImage:movedTo:",objj_msgSend(_draggedView,"image"),_35);
}else{
if(_implementedDraggingSourceMethods&_1b){
objj_msgSend(_draggingSource,"draggedView:movedTo:",_draggedView,_35);
}
}
}
}),new objj_method(sel_getUid("draggingUpdatedInPlatformWindow:location:"),function(_36,_37,_38,_39){
with(_36){
objj_msgSend(_draggingUpdateTimer,"invalidate");
_draggingUpdateTimer=nil;
var _3a=CPDragOperationCopy,_3b=objj_msgSend(_38,"_dragHitTest:pasteboard:",_39,objj_msgSend(_5,"draggingPasteboard"));
if(_3b){
_draggingLocation=objj_msgSend((objj_msgSend(_3b,"isKindOfClass:",objj_msgSend(CPWindow,"class"))?_3b:objj_msgSend(_3b,"window")),"convertPlatformWindowToBase:",_39);
}
if(_3b!==_draggingDestination){
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingExited:"))){
objj_msgSend(_draggingDestination,"draggingExited:",_5);
}
_draggingDestination=_3b;
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("wantsPeriodicDraggingUpdates"))){
_draggingDestinationWantsPeriodicUpdates=objj_msgSend(_draggingDestination,"wantsPeriodicDraggingUpdates");
}else{
_draggingDestinationWantsPeriodicUpdates=YES;
}
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingEntered:"))){
_3a=objj_msgSend(_draggingDestination,"draggingEntered:",_5);
}
}else{
if(objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("draggingUpdated:"))){
_3a=objj_msgSend(_draggingDestination,"draggingUpdated:",_5);
}
}
if(!_draggingDestination){
_3a=CPDragOperationNone;
}else{
if(_draggingDestinationWantsPeriodicUpdates){
_draggingUpdateTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_2,_36,sel_getUid("_sendPeriodicDraggingUpdate:"),objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{platformWindow:_38,location:_39}),NO);
}
var _3c=objj_msgSend(_draggingDestination,"isKindOfClass:",objj_msgSend(CPView,"class"))?objj_msgSend(_draggingDestination,"enclosingScrollView"):nil;
if(_3c){
var _3d=objj_msgSend(_3c,"contentView"),_3e=objj_msgSend(_3d,"bounds"),_3f=CGRectInset(_3e,30,30),_40=objj_msgSend(_3d,"convertPoint:fromView:",_draggingLocation,nil),_41=0,_42=0;
if(!CGRectContainsPoint(_3f,_40)){
if(objj_msgSend(_3c,"hasVerticalScroller")){
if(_40.y<(_3f.origin.y)){
_42=(_3f.origin.y)-_40.y;
}else{
if(_40.y>(_3f.origin.y+_3f.size.height)){
_42=(_3f.origin.y+_3f.size.height)-_40.y;
}
}
if(_42<-_3f.size.height){
_42=-_3f.size.height;
}
if(_42>_3f.size.height){
_42=_3f.size.height;
}
}
if(objj_msgSend(_3c,"hasHorizontalScroller")){
if(_40.x<(_3f.origin.x)){
_41=(_3f.origin.x)-_40.x;
}else{
if(_40.x>(_3f.origin.x+_3f.size.width)){
_41=(_3f.origin.x+_3f.size.width)-_40.x;
}
}
if(_41<-_3f.size.width){
_41=-_3f.size.width;
}
if(_41>_3f.size.width){
_41=_3f.size.width;
}
}
var _43={x:_3e.origin.x-_41,y:_3e.origin.y-_42};
objj_msgSend(_3d,"scrollToPoint:",_43);
objj_msgSend(objj_msgSend(_3c,"_headerView"),"scrollPoint:",_43);
}
}
}
return _3a;
}
}),new objj_method(sel_getUid("_sendPeriodicDraggingUpdate:"),function(_44,_45,_46){
with(_44){
var _47=objj_msgSend(_46,"userInfo");
_dragOperation=objj_msgSend(_44,"draggingUpdatedInPlatformWindow:location:",objj_msgSend(_47,"objectForKey:","platformWindow"),objj_msgSend(_47,"objectForKey:","location"));
}
}),new objj_method(sel_getUid("draggingEndedInPlatformWindow:globalLocation:operation:"),function(_48,_49,_4a,_4b,_4c){
with(_48){
objj_msgSend(_draggingUpdateTimer,"invalidate");
_draggingUpdateTimer=nil;
objj_msgSend(_draggedView,"removeFromSuperview");
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_draggedWindow,"orderOut:",_48);
}
if(_implementedDraggingSourceMethods&_1a){
objj_msgSend(_draggingSource,"draggedImage:endedAt:operation:",objj_msgSend(_draggedView,"image"),_4b,_4c);
}else{
if(_implementedDraggingSourceMethods&_1c){
objj_msgSend(_draggingSource,"draggedView:endedAt:operation:",_draggedView,_4b,_4c);
}
}
_isDragging=NO;
}
}),new objj_method(sel_getUid("performDragOperationInPlatformWindow:"),function(_4d,_4e,_4f){
with(_4d){
if(_draggingDestination&&(!objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("prepareForDragOperation:"))||objj_msgSend(_draggingDestination,"prepareForDragOperation:",_5))&&(!objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("performDragOperation:"))||objj_msgSend(_draggingDestination,"performDragOperation:",_5))&&objj_msgSend(_draggingDestination,"respondsToSelector:",sel_getUid("concludeDragOperation:"))){
objj_msgSend(_draggingDestination,"concludeDragOperation:",_5);
}
}
}),new objj_method(sel_getUid("dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:"),function(_50,_51,_52,_53,_54,_55,_56,_57,_58,_59){
with(_50){
_isDragging=YES;
_draggedView=_52;
_draggingPasteboard=_57||objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard);
_draggingSource=_58;
_draggingDestination=nil;
_shouldSlideBack=_59;
var _5a=objj_msgSend(_56,"window"),_5b=objj_msgSend(_56,"locationInWindow");
if(_5b){
if(_5a){
_5b=objj_msgSend(_5a,"convertBaseToGlobal:",_5b);
}
_draggingOffset={width:_5b.x-_54.x,height:_5b.y-_54.y};
}else{
_draggingOffset={width:0,height:0};
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_draggedWindow,"setPlatformWindow:",objj_msgSend(_53,"platformWindow"));
}
objj_msgSend(_52,"setFrameOrigin:",{x:0,y:0});
var _5c=objj_msgSend(CPEvent,"mouseLocation");
_startDragLocation={x:_5c.x-_draggingOffset.width,y:_5c.y-_draggingOffset.height};
objj_msgSend(_draggedWindow,"setFrameOrigin:",_startDragLocation);
objj_msgSend(_draggedWindow,"setFrameSize:",objj_msgSend(_52,"frame").size);
objj_msgSend(objj_msgSend(_draggedWindow,"contentView"),"addSubview:",_52);
_implementedDraggingSourceMethods=0;
if(_draggedView===_imageView){
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:movedTo:"))){
_implementedDraggingSourceMethods|=_19;
}
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedImage:endedAt:operation:"))){
_implementedDraggingSourceMethods|=_1a;
}
}else{
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:movedTo:"))){
_implementedDraggingSourceMethods|=_1b;
}
if(objj_msgSend(_draggingSource,"respondsToSelector:",sel_getUid("draggedView:endedAt:operation:"))){
_implementedDraggingSourceMethods|=_1c;
}
}
if(!objj_msgSend(CPPlatform,"supportsDragAndDrop")){
objj_msgSend(_50,"draggingStartedInPlatformWindow:globalLocation:",objj_msgSend(_53,"platformWindow"),_5c);
objj_msgSend(_50,"trackDragging:",_56);
}
}
}),new objj_method(sel_getUid("dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:"),function(_5d,_5e,_5f,_60,_61,_62,_63,_64,_65,_66){
with(_5d){
_isDraggingImage=YES;
var _67=objj_msgSend(_5f,"size");
if(!_imageView){
_imageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:_67.width,height:_67.height}});
}
objj_msgSend(_imageView,"setImage:",_5f);
objj_msgSend(_5d,"dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:",_imageView,_60,_61,_62,_63,_64,_65,_66);
}
}),new objj_method(sel_getUid("trackDragging:"),function(_68,_69,_6a){
with(_68){
var _6b=objj_msgSend(_6a,"type"),_6c=objj_msgSend(_draggedWindow,"platformWindow"),_6d=objj_msgSend(objj_msgSend(_6a,"window"),"convertBaseToPlatformWindow:",objj_msgSend(_6a,"locationInWindow"));
if(_6b===CPLeftMouseUp){
if(_dragOperation!==CPDragOperationNone){
objj_msgSend(_68,"performDragOperationInPlatformWindow:",_6c);
}
objj_msgSend(_68,"draggingEndedInPlatformWindow:globalLocation:operation:",_6c,_6d,_dragOperation);
return;
}else{
if(_6b===CPKeyDown){
var _6e=objj_msgSend(_6a,"characters");
if(_6e===CPEscapeFunctionKey){
_dragOperation=CPDragOperationNone;
objj_msgSend(_68,"draggingEndedInPlatformWindow:globalLocation:operation:",_6c,CGPointMakeZero(),_dragOperation);
return;
}
}else{
objj_msgSend(_68,"draggingSourceUpdatedWithGlobalLocation:",_6d);
_dragOperation=objj_msgSend(_68,"draggingUpdatedInPlatformWindow:location:",_6c,_6d);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_68,sel_getUid("trackDragging:"),CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPKeyDownMask,nil,0,NO);
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("initialize"),function(_6f,_70){
with(_6f){
if(_6f!==objj_msgSend(CPDragServer,"class")){
return;
}
_5=objj_msgSend(objj_msgSend(CPDraggingInfo,"alloc"),"init");
}
}),new objj_method(sel_getUid("sharedDragServer"),function(_71,_72){
with(_71){
if(!_3){
_3=objj_msgSend(objj_msgSend(CPDragServer,"alloc"),"init");
}
return _3;
}
})]);
var _6=objj_getClass("CPWindow");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("_dragHitTest:pasteboard:"),function(_73,_74,_75,_76){
with(_73){
if(!_inclusiveRegisteredDraggedTypes){
return nil;
}
var _77=objj_msgSend(_73,"convertPlatformWindowToBase:",_75),_78=objj_msgSend(_windowView,"hitTest:",_77);
while(_78&&!objj_msgSend(_76,"availableTypeFromArray:",objj_msgSend(_78,"registeredDraggedTypes"))){
_78=objj_msgSend(_78,"superview");
}
if(_78){
return _78;
}
if(objj_msgSend(_76,"availableTypeFromArray:",objj_msgSend(_73,"registeredDraggedTypes"))){
return _73;
}
return nil;
}
})]);
p;9;CPEvent.jt;12076;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPText.jt;12018;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPText.j",YES);
CPLeftMouseDown=1;
CPLeftMouseUp=2;
CPRightMouseDown=3;
CPRightMouseUp=4;
CPMouseMoved=5;
CPLeftMouseDragged=6;
CPRightMouseDragged=7;
CPMouseEntered=8;
CPMouseExited=9;
CPKeyDown=10;
CPKeyUp=11;
CPFlagsChanged=12;
CPAppKitDefined=13;
CPSystemDefined=14;
CPApplicationDefined=15;
CPPeriodic=16;
CPCursorUpdate=17;
CPScrollWheel=22;
CPOtherMouseDown=25;
CPOtherMouseUp=26;
CPOtherMouseDragged=27;
CPTouchStart=28;
CPTouchMove=29;
CPTouchEnd=30;
CPTouchCancel=31;
CPAlphaShiftKeyMask=1<<16;
CPShiftKeyMask=1<<17;
CPControlKeyMask=1<<18;
CPAlternateKeyMask=1<<19;
CPCommandKeyMask=1<<20;
CPNumericPadKeyMask=1<<21;
CPHelpKeyMask=1<<22;
CPFunctionKeyMask=1<<23;
CPDeviceIndependentModifierFlagsMask=4294901760;
CPLeftMouseDownMask=1<<CPLeftMouseDown;
CPLeftMouseUpMask=1<<CPLeftMouseUp;
CPRightMouseDownMask=1<<CPRightMouseDown;
CPRightMouseUpMask=1<<CPRightMouseUp;
CPOtherMouseDownMask=1<<CPOtherMouseDown;
CPOtherMouseUpMask=1<<CPOtherMouseUp;
CPMouseMovedMask=1<<CPMouseMoved;
CPLeftMouseDraggedMask=1<<CPLeftMouseDragged;
CPRightMouseDraggedMask=1<<CPRightMouseDragged;
CPOtherMouseDragged=1<<CPOtherMouseDragged;
CPMouseEnteredMask=1<<CPMouseEntered;
CPMouseExitedMask=1<<CPMouseExited;
CPCursorUpdateMask=1<<CPCursorUpdate;
CPKeyDownMask=1<<CPKeyDown;
CPKeyUpMask=1<<CPKeyUp;
CPFlagsChangedMask=1<<CPFlagsChanged;
CPAppKitDefinedMask=1<<CPAppKitDefined;
CPSystemDefinedMask=1<<CPSystemDefined;
CPApplicationDefinedMask=1<<CPApplicationDefined;
CPPeriodicMask=1<<CPPeriodic;
CPScrollWheelMask=1<<CPScrollWheel;
CPAnyEventMask=4294967295;
CPUpArrowFunctionKey="";
CPDownArrowFunctionKey="";
CPLeftArrowFunctionKey="";
CPRightArrowFunctionKey="";
CPF1FunctionKey="";
CPF2FunctionKey="";
CPF3FunctionKey="";
CPF4FunctionKey="";
CPF5FunctionKey="";
CPF6FunctionKey="";
CPF7FunctionKey="";
CPF8FunctionKey="";
CPF9FunctionKey="";
CPF10FunctionKey="";
CPF11FunctionKey="";
CPF12FunctionKey="";
CPF13FunctionKey="";
CPF14FunctionKey="";
CPF15FunctionKey="";
CPF16FunctionKey="";
CPF17FunctionKey="";
CPF18FunctionKey="";
CPF19FunctionKey="";
CPF20FunctionKey="";
CPF21FunctionKey="";
CPF22FunctionKey="";
CPF23FunctionKey="";
CPF24FunctionKey="";
CPF25FunctionKey="";
CPF26FunctionKey="";
CPF27FunctionKey="";
CPF28FunctionKey="";
CPF29FunctionKey="";
CPF30FunctionKey="";
CPF31FunctionKey="";
CPF32FunctionKey="";
CPF33FunctionKey="";
CPF34FunctionKey="";
CPF35FunctionKey="";
CPInsertFunctionKey="";
CPDeleteFunctionKey="";
CPHomeFunctionKey="";
CPBeginFunctionKey="";
CPEndFunctionKey="";
CPPageUpFunctionKey="";
CPPageDownFunctionKey="";
CPPrintScreenFunctionKey="";
CPScrollLockFunctionKey="";
CPPauseFunctionKey="";
CPSysReqFunctionKey="";
CPBreakFunctionKey="";
CPResetFunctionKey="";
CPStopFunctionKey="";
CPMenuFunctionKey="";
CPUserFunctionKey="";
CPSystemFunctionKey="";
CPPrintFunctionKey="";
CPClearLineFunctionKey="";
CPClearDisplayFunctionKey="";
CPInsertLineFunctionKey="";
CPDeleteLineFunctionKey="";
CPInsertCharFunctionKey="";
CPDeleteCharFunctionKey="";
CPPrevFunctionKey="";
CPNextFunctionKey="";
CPSelectFunctionKey="";
CPExecuteFunctionKey="";
CPUndoFunctionKey="";
CPRedoFunctionKey="";
CPFindFunctionKey="";
CPHelpFunctionKey="";
CPModeSwitchFunctionKey="";
CPEscapeFunctionKey="";
CPSpaceFunctionKey=" ";
CPDOMEventDoubleClick="dblclick";
CPDOMEventMouseDown="mousedown";
CPDOMEventMouseUp="mouseup";
CPDOMEventMouseMoved="mousemove";
CPDOMEventMouseDragged="mousedrag";
CPDOMEventKeyUp="keyup";
CPDOMEventKeyDown="keydown";
CPDOMEventKeyPress="keypress";
CPDOMEventCopy="copy";
CPDOMEventPaste="paste";
CPDOMEventScrollWheel="mousewheel";
CPDOMEventTouchStart="touchstart";
CPDOMEventTouchMove="touchmove";
CPDOMEventTouchEnd="touchend";
CPDOMEventTouchCancel="touchcancel";
var _1=0,_2=nil,_3=new RegExp("[A-Z]"),_4=new Date().getTime();
var _5=objj_allocateClassPair(CPObject,"CPEvent"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_type"),new objj_ivar("_location"),new objj_ivar("_modifierFlags"),new objj_ivar("_timestamp"),new objj_ivar("_context"),new objj_ivar("_eventNumber"),new objj_ivar("_clickCount"),new objj_ivar("_pressure"),new objj_ivar("_window"),new objj_ivar("_windowNumber"),new objj_ivar("_characters"),new objj_ivar("_isARepeat"),new objj_ivar("_keyCode"),new objj_ivar("_DOMEvent"),new objj_ivar("_deltaX"),new objj_ivar("_deltaY"),new objj_ivar("_deltaZ")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("_initWithType:"),function(_7,_8,_9){
with(_7){
if(_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPEvent").super_class},"init")){
_type=_9;
_deltaX=0;
_deltaY=0;
_deltaZ=0;
}
return _7;
}
}),new objj_method(sel_getUid("_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"),function(_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14){
with(_a){
if(_a=objj_msgSend(_a,"_initWithType:",_c)){
_location=CPPointCreateCopy(_d);
_modifierFlags=_e;
_timestamp=_f;
_context=_11;
_eventNumber=_12;
_clickCount=_13;
_pressure=_14;
_window=objj_msgSend(CPApp,"windowWithWindowNumber:",_10);
}
return _a;
}
}),new objj_method(sel_getUid("_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"),function(_15,_16,_17,_18,_19,_1a,_1b,_1c,_1d,_1e,_1f,_20){
with(_15){
if(_15=objj_msgSend(_15,"_initWithType:",_17)){
_location=CPPointCreateCopy(_18);
_modifierFlags=_19;
_timestamp=_1a;
_context=_1c;
_characters=_1d;
_charactersIgnoringModifiers=_1e;
_isARepeat=_1f;
_keyCode=_20;
_windowNumber=_1b;
}
return _15;
}
}),new objj_method(sel_getUid("_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"),function(_21,_22,_23,_24,_25,_26,_27,_28,_29,_2a,_2b){
with(_21){
if(_21=objj_msgSend(_21,"_initWithType:",_23)){
_location=CPPointCreateCopy(_24);
_modifierFlags=_25;
_timestamp=_26;
_context=_28;
_subtype=_29;
_data1=_2a;
_data2=_2b;
}
return _21;
}
}),new objj_method(sel_getUid("locationInWindow"),function(_2c,_2d){
with(_2c){
return {x:_location.x,y:_location.y};
}
}),new objj_method(sel_getUid("globalLocation"),function(_2e,_2f){
with(_2e){
var _30=objj_msgSend(_2e,"window"),_31=objj_msgSend(_2e,"locationInWindow");
if(_30){
return objj_msgSend(_30,"convertBaseToGlobal:",_31);
}
return _31;
}
}),new objj_method(sel_getUid("modifierFlags"),function(_32,_33){
with(_32){
return _modifierFlags;
}
}),new objj_method(sel_getUid("timestamp"),function(_34,_35){
with(_34){
return _timestamp;
}
}),new objj_method(sel_getUid("type"),function(_36,_37){
with(_36){
return _type;
}
}),new objj_method(sel_getUid("window"),function(_38,_39){
with(_38){
if(!_window){
_window=objj_msgSend(CPApp,"windowWithWindowNumber:",_windowNumber);
}
return _window;
}
}),new objj_method(sel_getUid("windowNumber"),function(_3a,_3b){
with(_3a){
return _windowNumber;
}
}),new objj_method(sel_getUid("buttonNumber"),function(_3c,_3d){
with(_3c){
if(_type===CPRightMouseDown||_type===CPRightMouseUp||_type===CPRightMouseDragged){
return 1;
}
return 0;
}
}),new objj_method(sel_getUid("clickCount"),function(_3e,_3f){
with(_3e){
return _clickCount;
}
}),new objj_method(sel_getUid("characters"),function(_40,_41){
with(_40){
return _characters;
}
}),new objj_method(sel_getUid("charactersIgnoringModifiers"),function(_42,_43){
with(_42){
return _charactersIgnoringModifiers;
}
}),new objj_method(sel_getUid("isARepeat"),function(_44,_45){
with(_44){
return _isARepeat;
}
}),new objj_method(sel_getUid("keyCode"),function(_46,_47){
with(_46){
return _keyCode;
}
}),new objj_method(sel_getUid("pressure"),function(_48,_49){
with(_48){
return _pressure;
}
}),new objj_method(sel_getUid("_DOMEvent"),function(_4a,_4b){
with(_4a){
return _DOMEvent;
}
}),new objj_method(sel_getUid("deltaX"),function(_4c,_4d){
with(_4c){
return _deltaX;
}
}),new objj_method(sel_getUid("deltaY"),function(_4e,_4f){
with(_4e){
return _deltaY;
}
}),new objj_method(sel_getUid("deltaZ"),function(_50,_51){
with(_50){
return _deltaZ;
}
}),new objj_method(sel_getUid("_triggersKeyEquivalent:withModifierMask:"),function(_52,_53,_54,_55){
with(_52){
if(!_54){
return NO;
}
if(_3.test(_54)){
_55|=CPShiftKeyMask;
}
if(!CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&(_55&CPCommandKeyMask)){
_55|=CPControlKeyMask;
_55&=~CPCommandKeyMask;
}
if((_modifierFlags&(CPShiftKeyMask|CPAlternateKeyMask|CPCommandKeyMask|CPControlKeyMask))!==_55){
return NO;
}
if(_characters===CPNewlineCharacter||_characters===CPCarriageReturnCharacter){
return CPNewlineCharacter===_54||CPCarriageReturnCharacter===_54;
}
return objj_msgSend(_characters,"caseInsensitiveCompare:",_54)===CPOrderedSame;
}
}),new objj_method(sel_getUid("_couldBeKeyEquivalent"),function(_56,_57){
with(_56){
if(_type!==CPKeyDown){
return NO;
}
var _58=_characters.length;
if(!_58){
return NO;
}
if(_modifierFlags&(CPCommandKeyMask|CPControlKeyMask)){
return YES;
}
var _59=objj_msgSend(objj_msgSend(_window,"firstResponder"),"isKindOfClass:",objj_msgSend(CPTextField,"class"));
for(var i=0;i<_58;i++){
var c=_characters.charAt(i);
if((c>=CPUpArrowFunctionKey&&c<=CPModeSwitchFunctionKey)||c===CPEnterCharacter||c===CPNewlineCharacter||c===CPCarriageReturnCharacter||c===CPEscapeFunctionKey){
return YES;
}
}
return !_59;
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("currentTimestamp"),function(_5a,_5b){
with(_5a){
return (new Date().getTime()-_4)/1000;
}
}),new objj_method(sel_getUid("keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"),function(_5c,_5d,_5e,_5f,_60,_61,_62,_63,_64,_65,_66,_67){
with(_5c){
return objj_msgSend(objj_msgSend(_5c,"alloc"),"_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",_5e,_5f,_60,_61,_62,_63,_64,_65,_66,_67);
}
}),new objj_method(sel_getUid("mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"),function(_68,_69,_6a,_6b,_6c,_6d,_6e,_6f,_70,_71,_72){
with(_68){
return objj_msgSend(objj_msgSend(_68,"alloc"),"_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_6a,_6b,_6c,_6d,_6e,_6f,_70,_71,_72);
}
}),new objj_method(sel_getUid("otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"),function(_73,_74,_75,_76,_77,_78,_79,_7a,_7b,_7c,_7d){
with(_73){
return objj_msgSend(objj_msgSend(_73,"alloc"),"_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",_75,_76,_77,_78,_79,_7a,_7b,_7c,_7d);
}
}),new objj_method(sel_getUid("mouseLocation"),function(_7e,_7f){
with(_7e){
var _80=objj_msgSend(CPApp,"currentEvent"),_81=objj_msgSend(_80,"window");
if(_81){
return objj_msgSend(_81,"convertBaseToGlobal:",objj_msgSend(_80,"locationInWindow"));
}
return objj_msgSend(_80,"locationInWindow");
}
}),new objj_method(sel_getUid("startPeriodicEventsAfterDelay:withPeriod:"),function(_82,_83,_84,_85){
with(_82){
_1=_85;
_2=window.setTimeout(function(){
_2=window.setInterval(_CPEventFirePeriodEvent,_85*1000);
},_84*1000);
}
}),new objj_method(sel_getUid("stopPeriodicEvents"),function(_86,_87){
with(_86){
if(_2===nil){
return;
}
window.clearTimeout(_2);
_2=nil;
}
})]);
_CPEventFirePeriodEvent=function(){
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",CPPeriodic,{x:0,y:0},0,objj_msgSend(CPEvent,"currentTimestamp"),0,nil,0,0,0));
};
var _88=objj_msgSend(CPEvent,"class");
_CPEventFromNativeMouseEvent=function(_89,_8a,_8b,_8c,_8d,_8e,_8f,_90,_91,_92){
_89.isa=_88;
_89._type=_8a;
_89._location=_8b;
_89._modifierFlags=_8c;
_89._timestamp=_8d;
_89._windowNumber=_8e;
_89._window=nil;
_89._context=_8f;
_89._eventNumber=_90;
_89._clickCount=_91;
_89._pressure=_92;
return _89;
};
p;14;CPFlashMovie.jt;1223;@STATIC;1.0;I;21;Foundation/CPObject.jt;1178;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPFlashMovie"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_filename")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFile:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPFlashMovie").super_class},"init");
if(_3){
_filename=_5;
}
return _3;
}
}),new objj_method(sel_getUid("filename"),function(_6,_7){
with(_6){
return _filename;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("flashMovieWithFile:"),function(_8,_9,_a){
with(_8){
return objj_msgSend(objj_msgSend(_8,"alloc"),"initWithFile:",_a);
}
})]);
var _b="CPFlashMovieFilenameKey";
var _1=objj_getClass("CPFlashMovie");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPFlashMovie\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_c,_d,_e){
with(_c){
_filename=objj_msgSend(_e,"decodeObjectForKey:",_b);
return _c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_f,_10,_11){
with(_f){
objj_msgSend(_11,"encodeObject:forKey:",_filename,_b);
}
})]);
p;13;CPFlashView.jt;4881;@STATIC;1.0;i;14;CPFlashMovie.ji;8;CPView.jt;4831;
objj_executeFile("CPFlashMovie.j",YES);
objj_executeFile("CPView.j",YES);
var _1="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";
var _2=objj_allocateClassPair(CPView,"CPFlashView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_flashMovie"),new objj_ivar("_params"),new objj_ivar("_paramElements"),new objj_ivar("_DOMParamElement"),new objj_ivar("_DOMObjectElement"),new objj_ivar("_DOMInnerObjectElement")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPFlashView").super_class},"initWithFrame:",_6);
if(_4){
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_DOMObjectElement=document.createElement("object");
_DOMObjectElement.width="100%";
_DOMObjectElement.height="100%";
_DOMObjectElement.style.top="0px";
_DOMObjectElement.style.left="0px";
_DOMObjectElement.type="application/x-shockwave-flash";
_DOMObjectElement.setAttribute("classid",_1);
_DOMParamElement=document.createElement("param");
_DOMParamElement.name="movie";
_DOMInnerObjectElement=document.createElement("object");
_DOMInnerObjectElement.width="100%";
_DOMInnerObjectElement.height="100%";
_DOMObjectElement.appendChild(_DOMParamElement);
_DOMObjectElement.appendChild(_DOMInnerObjectElement);
_DOMElement.appendChild(_DOMObjectElement);
}else{
objj_msgSend(_4,"_rebuildIEObjects");
}
}
return _4;
}
}),new objj_method(sel_getUid("setFlashMovie:"),function(_7,_8,_9){
with(_7){
if(_flashMovie==_9){
return;
}
_flashMovie=_9;
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_DOMParamElement.value=objj_msgSend(_9,"filename");
_DOMInnerObjectElement.data=objj_msgSend(_9,"filename");
}else{
objj_msgSend(_7,"_rebuildIEObjects");
}
}
}),new objj_method(sel_getUid("flashMovie"),function(_a,_b){
with(_a){
return _flashMovie;
}
}),new objj_method(sel_getUid("setFlashVars:"),function(_c,_d,_e){
with(_c){
var _f="",_10=objj_msgSend(_e,"keyEnumerator"),key;
while((key=objj_msgSend(_10,"nextObject"))!==nil){
_f=objj_msgSend(_f,"stringByAppendingFormat:","&%@=%@",key,objj_msgSend(_e,"objectForKey:",key));
}
if(!_params){
_params=objj_msgSend(CPDictionary,"dictionary");
}
objj_msgSend(_params,"setObject:forKey:",_f,"flashvars");
objj_msgSend(_c,"setParameters:",_params);
}
}),new objj_method(sel_getUid("flashVars"),function(_11,_12){
with(_11){
return objj_msgSend(_params,"objectForKey:","flashvars");
}
}),new objj_method(sel_getUid("setParameters:"),function(_13,_14,_15){
with(_13){
if(_paramElements&&!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
var _16=objj_msgSend(_paramElements,"allValues"),_17=objj_msgSend(_16,"count");
for(var i=0;i<_17;i++){
_DOMObjectElement.removeChild(objj_msgSend(_16,"objectAtIndex:",i));
}
}
if(!_params){
_params=_15;
}else{
objj_msgSend(_params,"addEntriesFromDictionary:",_15);
}
if(!CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_paramElements=objj_msgSend(CPDictionary,"dictionary");
var _18=objj_msgSend(_params,"keyEnumerator"),key;
while(_DOMObjectElement&&(key=objj_msgSend(_18,"nextObject"))!==nil){
var _19=document.createElement("param");
_19.name=key;
_19.value=objj_msgSend(_params,"objectForKey:",key);
_DOMObjectElement.appendChild(_19);
objj_msgSend(_paramElements,"setObject:forKey:",_19,key);
}
}else{
objj_msgSend(_13,"_rebuildIEObjects");
}
}
}),new objj_method(sel_getUid("parameters"),function(_1a,_1b){
with(_1a){
return _params;
}
}),new objj_method(sel_getUid("_rebuildIEObjects"),function(_1c,_1d){
with(_1c){
_DOMElement.innerHTML="";
if(!objj_msgSend(_flashMovie,"filename")){
return;
}
var _1e=objj_msgSend(CPString,"stringWithFormat:","<param name='movie' value='%@' />",objj_msgSend(_flashMovie,"filename")),_1f=objj_msgSend(_params,"keyEnumerator"),key;
while((key=objj_msgSend(_1f,"nextObject"))!==nil){
_1e=objj_msgSend(_1e,"stringByAppendingFormat:","<param name='%@' value='%@' />",key,objj_msgSend(_params,"objectForKey:",key));
}
_DOMObjectElement=document.createElement("object");
_DOMElement.appendChild(_DOMObjectElement);
_DOMObjectElement.outerHTML=objj_msgSend(CPString,"stringWithFormat:","<object classid=%@ width=%@ height=%@>%@</object>",_1,CGRectGetWidth(objj_msgSend(_1c,"bounds")),CGRectGetHeight(objj_msgSend(_1c,"bounds")),_1e);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_20,_21,_22){
with(_20){
objj_msgSend(objj_msgSend(objj_msgSend(_20,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_23,_24,_25){
with(_23){
objj_msgSend(objj_msgSend(objj_msgSend(_23,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_26,_27,_28){
with(_26){
objj_msgSend(objj_msgSend(objj_msgSend(_26,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
})]);
p;8;CPFont.jt;6814;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;8;CPView.jt;6731;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CPView.j",YES);
CPFontDefaultSystemFontFace="Arial, sans-serif";
CPFontDefaultSystemFontSize=12;
var _1={},_2=CPFontDefaultSystemFontFace,_3=12,_4=CPFontDefaultSystemFontFace.split(", "),_5=new RegExp("(^\\s*[\"']?|[\"']?\\s*$)","g");
var _6=objj_allocateClassPair(CPObject,"CPFont"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_name"),new objj_ivar("_size"),new objj_ivar("_ascender"),new objj_ivar("_descender"),new objj_ivar("_lineHeight"),new objj_ivar("_isBold"),new objj_ivar("_isItalic"),new objj_ivar("_cssString")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("isBold"),function(_8,_9){
with(_8){
return _isBold;
}
}),new objj_method(sel_getUid("isItalic"),function(_a,_b){
with(_a){
return _isItalic;
}
}),new objj_method(sel_getUid("_initWithName:size:bold:italic:"),function(_c,_d,_e,_f,_10,_11){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPFont").super_class},"init");
if(_c){
_name=_12(_e).join(", ");
_size=_f;
_ascender=0;
_descender=0;
_lineHeight=0;
_isBold=_10;
_isItalic=_11;
_cssString=_13(_name,_size,_isBold,_isItalic);
_1[_cssString]=_c;
}
return _c;
}
}),new objj_method(sel_getUid("ascender"),function(_14,_15){
with(_14){
if(!_ascender){
objj_msgSend(_14,"_getMetrics");
}
return _ascender;
}
}),new objj_method(sel_getUid("descender"),function(_16,_17){
with(_16){
if(!_descender){
objj_msgSend(_16,"_getMetrics");
}
return _descender;
}
}),new objj_method(sel_getUid("defaultLineHeightForFont"),function(_18,_19){
with(_18){
if(!_lineHeight){
objj_msgSend(_18,"_getMetrics");
}
return _lineHeight;
}
}),new objj_method(sel_getUid("size"),function(_1a,_1b){
with(_1a){
return _size;
}
}),new objj_method(sel_getUid("cssString"),function(_1c,_1d){
with(_1c){
return _cssString;
}
}),new objj_method(sel_getUid("familyName"),function(_1e,_1f){
with(_1e){
return _name;
}
}),new objj_method(sel_getUid("isEqual:"),function(_20,_21,_22){
with(_20){
return objj_msgSend(_22,"isKindOfClass:",objj_msgSend(CPFont,"class"))&&objj_msgSend(_22,"cssString")===_cssString;
}
}),new objj_method(sel_getUid("description"),function(_23,_24){
with(_23){
return objj_msgSend(CPString,"stringWithFormat:","%@ %@",objj_msgSendSuper({receiver:_23,super_class:objj_getClass("CPFont").super_class},"description"),objj_msgSend(_23,"cssString"));
}
}),new objj_method(sel_getUid("copy"),function(_25,_26){
with(_25){
return objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_name,_size,_isBold,_isItalic);
}
}),new objj_method(sel_getUid("_getMetrics"),function(_27,_28){
with(_27){
var _29=objj_msgSend(CPString,"metricsOfFont:",_27);
_ascender=objj_msgSend(_29,"objectForKey:","ascender");
_descender=objj_msgSend(_29,"objectForKey:","descender");
_lineHeight=objj_msgSend(_29,"objectForKey:","lineHeight");
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("initialize"),function(_2a,_2b){
with(_2a){
var _2c=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPSystemFontFace");
if(!_2c){
_2c=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"objectForInfoDictionaryKey:","CPSystemFontFace");
}
if(_2c){
objj_msgSend(_2a,"setSystemFontFace:",_2c);
}
var _2d=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPSystemFontSize");
if(!_2d){
_2d=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"objectForInfoDictionaryKey:","CPSystemFontSize");
}
if(_2d){
_3=_2d;
}
}
}),new objj_method(sel_getUid("systemFontFace"),function(_2e,_2f){
with(_2e){
return _2;
}
}),new objj_method(sel_getUid("setSystemFontFace:"),function(_30,_31,_32){
with(_30){
_2=_12(_32).join(", ");
}
}),new objj_method(sel_getUid("systemFontSize"),function(_33,_34){
with(_33){
return _3;
}
}),new objj_method(sel_getUid("setSystemFontSize:"),function(_35,_36,_37){
with(_35){
if(_37>0){
_3=_37;
}
}
}),new objj_method(sel_getUid("fontWithName:size:"),function(_38,_39,_3a,_3b){
with(_38){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_3a,_3b,NO,NO);
}
}),new objj_method(sel_getUid("fontWithName:size:italic:"),function(_3c,_3d,_3e,_3f,_40){
with(_3c){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_3e,_3f,NO,_40);
}
}),new objj_method(sel_getUid("boldFontWithName:size:"),function(_41,_42,_43,_44){
with(_41){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_43,_44,YES,NO);
}
}),new objj_method(sel_getUid("boldFontWithName:size:italic:"),function(_45,_46,_47,_48,_49){
with(_45){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_47,_48,YES,_49);
}
}),new objj_method(sel_getUid("systemFontOfSize:"),function(_4a,_4b,_4c){
with(_4a){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_2,_4c,NO,NO);
}
}),new objj_method(sel_getUid("boldSystemFontOfSize:"),function(_4d,_4e,_4f){
with(_4d){
return objj_msgSend(CPFont,"fontWithName:size:bold:italic:",_2,_4f,YES,NO);
}
}),new objj_method(sel_getUid("fontWithName:size:bold:italic:"),function(_50,_51,_52,_53,_54,_55){
with(_50){
return _1[_13(_12(_52).join(", "),_53,_54,_55)]||objj_msgSend(objj_msgSend(CPFont,"alloc"),"_initWithName:size:bold:italic:",_52,_53,_54,_55);
}
})]);
var _56="CPFontNameKey",_57="CPFontSizeKey",_58="CPFontIsBoldKey",_59="CPFontIsItalicKey";
var _6=objj_getClass("CPFont");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPFont\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("initWithCoder:"),function(_5a,_5b,_5c){
with(_5a){
var _5d=objj_msgSend(_5c,"decodeObjectForKey:",_56),_5e=objj_msgSend(_5c,"decodeFloatForKey:",_57),_5f=objj_msgSend(_5c,"decodeBoolForKey:",_58),_60=objj_msgSend(_5c,"decodeBoolForKey:",_59);
return objj_msgSend(_5a,"_initWithName:size:bold:italic:",_5d,_5e,_5f,_60);
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_63,"encodeObject:forKey:",_name,_56);
objj_msgSend(_63,"encodeFloat:forKey:",_size,_57);
objj_msgSend(_63,"encodeBool:forKey:",_isBold,_58);
objj_msgSend(_63,"encodeBool:forKey:",_isItalic,_59);
}
})]);
var _13=function(_64,_65,_66,_67){
var _68=(_67?"italic ":"")+(_66?"bold ":"")+_65+"px ";
return _68+_69(_64);
};
var _69=function(_6a){
var _6b=_12(_6a),_6c=_4.slice(0);
for(var i=0;i<_6b.length;++i){
for(var j=0;j<_6c.length;++j){
if(_6b[i].toLowerCase()===_6c[j].toLowerCase()){
_6c.splice(j,1);
break;
}
}
if(_6b[i].indexOf(" ")>0){
_6b[i]="\""+_6b[i]+"\"";
}
}
return _6b.concat(_6c).join(", ");
};
var _12=function(_6d){
var _6e=_6d.split(",");
for(var i=0;i<_6e.length;++i){
_6e[i]=_6e[i].replace(_5,"");
}
return _6e;
};
p;15;CPFontManager.jt;3303;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPFont.jt;3246;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPFont.j",YES);
var _1=nil,_2=Nil;
var _3=objj_allocateClassPair(CPObject,"CPFontManager"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_availableFonts")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("availableFonts"),function(_5,_6){
with(_5){
if(!_availableFonts){
_7=document.createElement("span");
_7.fontSize="24px";
_7.appendChild(document.createTextNode("mmmmmmmmmml"));
var _8=document.createElement("div");
_8.style.position="absolute";
_8.style.top="-1000px";
_8.appendChild(_7);
document.getElementsByTagName("body")[0].appendChild(_8);
_9=_a(["monospace","serif","sans-serif","cursive"]);
_availableFonts=[];
for(var i=0;i<_b.length;i++){
var _c=_d(_b[i]);
if(_c){
_availableFonts.push(_b[i]);
}
}
}
return _availableFonts;
}
}),new objj_method(sel_getUid("fontWithNameIsAvailable:"),function(_e,_f,_10){
with(_e){
return _d(_10);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedFontManager"),function(_11,_12){
with(_11){
if(!_1){
_1=objj_msgSend(objj_msgSend(_2,"alloc"),"init");
}
return _1;
}
}),new objj_method(sel_getUid("setFontManagerFactory:"),function(_13,_14,_15){
with(_13){
_2=_15;
}
})]);
var _7,_9,_b=["American Typewriter","Apple Chancery","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Big Caslon","Bitstream Vera Sans","Bitstream Vera Sans Mono","Bitstream Vera Serif","Brush Script MT","Cambria","Caslon","Castellar","Cataneo BT","Centaur","Century Gothic","Century Schoolbook","Century Schoolbook L","Comic Sans","Comic Sans MS","Consolas","Constantia","Cooper Black","Copperplate","Copperplate Gothic Bold","Copperplate Gothic Light","Corbel","Courier","Courier New","Futura","Geneva","Georgia","Georgia Ref","Geeza Pro","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Helvetica","Helvetica Narrow","Helvetica Neue","Herculanum","High Tower Text","Highlight LET","Hoefler Text","Impact","Imprint MT Shadow","Lucida","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Lucida Grande","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Marker Felt","Microsoft Sans Serif","Milano LET","Minion Web","MisterEarl BT","Mistral","Monaco","Monotype Corsiva","Monotype.com","New Century Schoolbook","New York","News Gothic MT","Papyrus","Tahoma","Techno","Tempus Sans ITC","Terminal","Textile","Times","Times New Roman","Tiranti Solid LET","Trebuchet MS","Verdana","Verdana Ref","Zapfino"];
var _d=function(_16){
for(var i=0;i<_9.length;i++){
if(_17(_9[i],_16)){
return true;
}
}
return false;
};
var _18={};
var _17=function(_19,_1a){
var a;
if(_18[_19]){
a=_18[_19];
}else{
_7.style.fontFamily="\""+_19+"\"";
_18[_19]=a={w:_7.offsetWidth,h:_7.offsetHeight};
}
_7.style.fontFamily="\""+_1a+"\", \""+_19+"\"";
var _1b=_7.offsetWidth,_1c=_7.offsetHeight;
return (a.w!=_1b||a.h!=_1c);
};
var _a=function(_1d){
for(var i=0;i<_1d.length;i++){
for(var j=0;j<i;j++){
if(_17(_1d[i],_1d[j])){
return [_1d[i],_1d[j]];
}
}
}
return [_1d[0]];
};
objj_msgSend(CPFontManager,"setFontManagerFactory:",objj_msgSend(CPFontManager,"class"));
p;12;CPGeometry.jt;4179;@STATIC;1.0;i;12;CGGeometry.jt;4143;
objj_executeFile("CGGeometry.j",YES);
CPMinXEdge=0;
CPMinYEdge=1;
CPMaxXEdge=2;
CPMaxYEdge=3;
CPMakePoint=CGPointMake;
CPMakeSize=CGSizeMake;
CPMakeRect=CGRectMake;
CPPointCreateCopy=function(_1){
return {x:_1.x,y:_1.y};
};
CPPointMake=function(x,y){
return {x:x,y:y};
};
CPRectInset=function(_2,dX,dY){
return CPRectMake(_2.origin.x+dX,_2.origin.y+dY,_2.size.width-2*dX,_2.size.height-2*dY);
};
CPRectIntegral=function(_3){
alert("CPRectIntegral unimplemented");
};
CPRectIntersection=function(_4,_5){
var _6=CPRectMake(MAX(CPRectGetMinX(_4),CPRectGetMinX(_5)),MAX(CPRectGetMinY(_4),CPRectGetMinY(_5)),0,0);
_6.size.width=MIN(CPRectGetMaxX(_4),CPRectGetMaxX(_5))-CPRectGetMinX(_6);
_6.size.height=MIN(CPRectGetMaxY(_4),CPRectGetMaxY(_5))-CPRectGetMinY(_6);
return CPRectIsEmpty(_6)?CPRectMakeZero():_6;
};
CPRectCreateCopy=function(_7){
return {origin:CPPointCreateCopy(_7.origin),size:CPSizeCreateCopy(_7.size)};
};
CPRectMake=function(x,y,_8,_9){
return {origin:CPPointMake(x,y),size:CPSizeMake(_8,_9)};
};
CPRectOffset=function(_a,dX,dY){
return CPRectMake(_a.origin.x+dX,_a.origin.y+dY,_a.size.width,_a.size.height);
};
CPRectStandardize=function(_b){
var _c=CPRectGetWidth(_b),_d=CPRectGetHeight(_b),_e=CPRectCreateCopy(_b);
if(_c<0){
_e.origin.x+=_c;
_e.size.width=-_c;
}
if(_d<0){
_e.origin.y+=_d;
_e.size.height=-_d;
}
return _e;
};
CPRectUnion=function(_f,_10){
var _11=MIN(CPRectGetMinX(_f),CPRectGetMinX(_10)),_12=MIN(CPRectGetMinY(_f),CPRectGetMinY(_10)),_13=MAX(CPRectGetMaxX(_f),CPRectGetMaxX(_10)),_14=MAX(CPRectGetMaxY(_f),CPRectGetMaxY(_10));
return CPRectMake(_11,_12,_13-_11,_14-_12);
};
CPSizeCreateCopy=function(_15){
return {width:_15.width,height:_15.height};
};
CPSizeMake=function(_16,_17){
return {width:_16,height:_17};
};
CPRectContainsPoint=function(_18,_19){
return _19.x>=CPRectGetMinX(_18)&&_19.y>=CPRectGetMinY(_18)&&_19.x<CPRectGetMaxX(_18)&&_19.y<CPRectGetMaxY(_18);
};
CPRectContainsRect=function(_1a,_1b){
return CGRectContainsRect(_1a,_1b);
};
CPPointEqualToPoint=function(_1c,_1d){
return _1c.x==_1d.x&&_1c.y==_1d.y;
};
CPRectEqualToRect=function(_1e,_1f){
return CPPointEqualToPoint(_1e.origin,_1f.origin)&&CPSizeEqualToSize(_1e.size,_1f.size);
};
CPRectGetHeight=function(_20){
return _20.size.height;
};
CPRectGetMaxX=function(_21){
return _21.origin.x+_21.size.width;
};
CPRectGetMaxY=function(_22){
return _22.origin.y+_22.size.height;
};
CPRectGetMidX=function(_23){
return _23.origin.x+(_23.size.width)/2;
};
CPRectGetMidY=function(_24){
return _24.origin.y+(_24.size.height)/2;
};
CPRectGetMinX=function(_25){
return _25.origin.x;
};
CPRectGetMinY=function(_26){
return _26.origin.y;
};
CPRectGetWidth=function(_27){
return _27.size.width;
};
CPRectIntersectsRect=function(_28,_29){
return !CPRectIsEmpty(CPRectIntersection(_28,_29));
};
CPRectIsEmpty=function(_2a){
return _2a.size.width<=0||_2a.size.height<=0;
};
CPRectIsNull=function(_2b){
return _2b.size.width<=0||_2b.size.height<=0;
};
CPDivideRect=function(_2c,_2d,rem,_2e,_2f){
CGRectDivide(_2c,_2d,rem,_2e,_2f);
};
CPSizeEqualToSize=function(_30,_31){
return _30.width==_31.width&&_30.height==_31.height;
};
CPStringFromPoint=function(_32){
return "{"+_32.x+", "+_32.y+"}";
};
CPStringFromSize=function(_33){
return "{"+_33.width+", "+_33.height+"}";
};
CPStringFromRect=function(_34){
return "{"+CPStringFromPoint(_34.origin)+", "+CPStringFromSize(_34.size)+"}";
};
CPPointFromString=function(_35){
var _36=_35.indexOf(",");
return {x:parseFloat(_35.substr(1,_36-1),10),y:parseFloat(_35.substring(_36+1,_35.length),10)};
};
CPSizeFromString=function(_37){
var _38=_37.indexOf(",");
return {width:parseFloat(_37.substr(1,_38-1),10),height:parseFloat(_37.substring(_38+1,_37.length),10)};
};
CPRectFromString=function(_39){
var _3a=_39.indexOf(",",_39.indexOf(",")+1);
return {origin:CPPointFromString(_39.substr(1,_3a-1)),size:CPSizeFromString(_39.substring(_3a+2,_39.length))};
};
CPPointFromEvent=function(_3b){
return CPPointMake(_3b.clientX,_3b.clientY,0);
};
CPSizeMakeZero=function(){
return CPSizeMake(0,0);
};
CPRectMakeZero=function(){
return CPRectMake(0,0,0,0);
};
CPPointMakeZero=function(){
return CPPointMake(0,0,0);
};
p;12;CPGradient.jt;2363;@STATIC;1.0;t;2344;
CPGradientDrawsBeforeStartingLocation=kCGGradientDrawsBeforeStartLocation;
CPGradientDrawsAfterEndingLocation=kCGGradientDrawsAfterEndLocation;
var _1=objj_allocateClassPair(CPObject,"CPGradient"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_gradient")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithColors:"),function(_3,_4,_5){
with(_3){
var _6=objj_msgSend(_5,"count");
if(_6<2){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"at least 2 colors required");
}
var _7=1/(_6-1),_8=objj_msgSend(CPMutableArray,"array"),_9=0;
for(var i=0;i<_6;i++){
objj_msgSend(_8,"addObject:",_9);
_9+=_7;
}
return objj_msgSend(_3,"initWithColors:atLocations:colorSpace:",_5,_8,nil);
}
}),new objj_method(sel_getUid("initWithColors:atLocations:colorSpace:"),function(_a,_b,_c,_d,_e){
with(_a){
if(_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPGradient").super_class},"init")){
var _f=[],_10=objj_msgSend(_c,"count"),_11=objj_msgSend(_e,"CGColorSpace")||CGColorSpaceCreateDeviceRGB;
for(var i=0;i<_10;i++){
_f.push(CGColorCreate(_11,objj_msgSend(_c[i],"components")));
}
_gradient=CGGradientCreateWithColors(_11,_f,_d);
}
return _a;
}
}),new objj_method(sel_getUid("drawInRect:angle:"),function(_12,_13,_14,_15){
with(_12){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSaveGState(ctx);
CGContextClipToRect(ctx,_14);
CGContextAddRect(ctx,_14);
var _16,_17;
_15=((_15%360)+360)%360;
if(_15<90){
_16={x:(_14.origin.x),y:(_14.origin.y)};
}else{
if(_15<180){
_16={x:(_14.origin.x+_14.size.width),y:(_14.origin.y)};
}else{
if(_15<270){
_16={x:(_14.origin.x+_14.size.width),y:(_14.origin.y+_14.size.height)};
}else{
_16={x:(_14.origin.x),y:(_14.origin.y+_14.size.height)};
}
}
}
var _18=PI*_15/180,_19=ABS((_14.size.width)*COS(_18))+ABS((_14.size.height)*SIN(_18));
_17={x:_16.x+_19*COS(_18),y:_16.y+_19*SIN(_18)};
objj_msgSend(_12,"drawFromPoint:toPoint:options:",_16,_17,CPGradientDrawsBeforeStartingLocation|CPGradientDrawsAfterEndingLocation);
CGContextRestoreGState(ctx);
}
}),new objj_method(sel_getUid("drawFromPoint:toPoint:options:"),function(_1a,_1b,_1c,_1d,_1e){
with(_1a){
var ctx=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextDrawLinearGradient(ctx,_gradient,_1c,_1d,_1e);
}
})]);
p;12;CPGraphics.jt;1766;@STATIC;1.0;i;9;CPColor.ji;19;CPGraphicsContext.jt;1710;
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPGraphicsContext.j",YES);
CPDrawTiledRects=function(_1,_2,_3,_4){
if(_3.length!=_4.length){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"sides (length: "+_3.length+") and grays (length: "+_4.length+") must have the same length.");
}
var _5=[];
for(var i=0;i<_4.length;++i){
_5.push(objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",_4[i],1));
}
return CPDrawColorTiledRects(_1,_2,_3,_5);
};
CPDrawColorTiledRects=function(_6,_7,_8,_9){
if(_8.length!=_9.length){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"sides (length: "+_8.length+") and colors (length: "+_9.length+") must have the same length.");
}
var _a={origin:{x:_6.origin.x,y:_6.origin.y},size:{width:_6.size.width,height:_6.size.height}},_b={origin:{x:0,y:0},size:{width:0,height:0}},_c={origin:{x:0,y:0},size:{width:0,height:0}},_d=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSaveGState(_d);
CGContextSetLineWidth(_d,1);
for(var _e=0;_e<_8.length;++_e){
var _f=_8[_e];
CGRectDivide(_a,_b,_c,1,_f);
_a=_c;
_b=CGRectIntersection(_b,_7);
if((_b.size.width<=0||_b.size.height<=0)){
continue;
}
var _10,_11,_12,_13;
if(_f==CPMinXEdge||_f==CPMaxXEdge){
if((_b.size.width)<1){
continue;
}
_10=(_b.origin.x)+0.5;
_11=_10;
_12=(_b.origin.y);
_13=(_b.origin.y+_b.size.height);
}else{
if((_b.size.height)<1){
continue;
}
_10=(_b.origin.x);
_11=(_b.origin.x+_b.size.width);
_12=(_b.origin.y)+0.5;
_13=_12;
}
CGContextBeginPath(_d);
CGContextMoveToPoint(_d,_10,_12);
CGContextAddLineToPoint(_d,_11,_13);
CGContextSetStrokeColor(_d,_9[_e]);
CGContextStrokePath(_d);
}
CGContextRestoreGState(_d);
return _a;
};
p;19;CPGraphicsContext.jt;1136;@STATIC;1.0;I;21;Foundation/CPObject.ji;11;CGContext.jt;1075;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGContext.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPGraphicsContext"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_graphicsPort")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithGraphicsPort:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPGraphicsContext").super_class},"init");
if(_4){
_graphicsPort=_6;
}
return _4;
}
}),new objj_method(sel_getUid("graphicsPort"),function(_7,_8){
with(_7){
return _graphicsPort;
}
}),new objj_method(sel_getUid("isFlipped"),function(_9,_a){
with(_9){
return YES;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("currentContext"),function(_b,_c){
with(_b){
return _1;
}
}),new objj_method(sel_getUid("setCurrentContext:"),function(_d,_e,_f){
with(_d){
_1=_f;
}
}),new objj_method(sel_getUid("graphicsContextWithGraphicsPort:flipped:"),function(_10,_11,_12,_13){
with(_10){
return objj_msgSend(objj_msgSend(_10,"alloc"),"initWithGraphicsPort:",_12);
}
})]);
p;9;CPImage.jt;11339;@STATIC;1.0;I;21;Foundation/CPBundle.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.jI;21;Foundation/CPString.ji;12;CPGeometry.jt;11159;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPRunLoop.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPGeometry.j",YES);
CPImageLoadStatusInitialized=0;
CPImageLoadStatusLoading=1;
CPImageLoadStatusCompleted=2;
CPImageLoadStatusCancelled=3;
CPImageLoadStatusInvalidData=4;
CPImageLoadStatusUnexpectedEOF=5;
CPImageLoadStatusReadError=6;
CPImageDidLoadNotification="CPImageDidLoadNotification";
CPImageNameColorPanel="CPImageNameColorPanel";
CPImageNameColorPanelHighlighted="CPImageNameColorPanelHighlighted";
var _1={},_2={},_3="%s {\n   filename: \"%s\",\n   size: { width:%f, height:%f }\n}";
_2[CPImageNameColorPanel]=CGSizeMake(26,29);
_2[CPImageNameColorPanelHighlighted]=CGSizeMake(26,29);
CPImageInBundle=function(_4,_5,_6){
if(!_6){
_6=objj_msgSend(CPBundle,"mainBundle");
}
if(_5){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6,"pathForResource:",_4),_5);
}
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(_6,"pathForResource:",_4));
};
CPAppKitImage=function(_7,_8){
return CPImageInBundle(_7,_8,objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")));
};
var _9=objj_allocateClassPair(CPObject,"CPImage"),_a=_9.isa;
class_addIvars(_9,[new objj_ivar("_size"),new objj_ivar("_filename"),new objj_ivar("_name"),new objj_ivar("_delegate"),new objj_ivar("_loadStatus"),new objj_ivar("_image")]);
objj_registerClassPair(_9);
class_addMethods(_9,[new objj_method(sel_getUid("init"),function(_b,_c){
with(_b){
return objj_msgSend(_b,"initByReferencingFile:size:","",CGSizeMake(-1,-1));
}
}),new objj_method(sel_getUid("initByReferencingFile:size:"),function(_d,_e,_f,_10){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPImage").super_class},"init");
if(_d){
_size=CPSizeCreateCopy(_10);
_filename=_f;
_loadStatus=CPImageLoadStatusInitialized;
}
return _d;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:size:"),function(_11,_12,_13,_14){
with(_11){
_11=objj_msgSend(_11,"initByReferencingFile:size:",_13,_14);
if(_11){
objj_msgSend(_11,"load");
}
return _11;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:"),function(_15,_16,_17){
with(_15){
_15=objj_msgSend(_15,"initByReferencingFile:size:",_17,CGSizeMake(-1,-1));
if(_15){
objj_msgSend(_15,"load");
}
return _15;
}
}),new objj_method(sel_getUid("initWithData:"),function(_18,_19,_1a){
with(_18){
var _1b=objj_msgSend(_1a,"base64"),_1c=objj_msgSend(_1b,"hasPrefix:","/9j/4AAQSkZJRgABAQEASABIAAD/")?"jpg":"png",_1d="data:image/"+_1c+";base64,"+_1b;
return objj_msgSend(_18,"initWithContentsOfFile:",_1d);
}
}),new objj_method(sel_getUid("filename"),function(_1e,_1f){
with(_1e){
return _filename;
}
}),new objj_method(sel_getUid("data"),function(_20,_21){
with(_20){
var _22;
if(objj_msgSend(_filename,"hasPrefix:","data:image")){
_22=_filename;
}else{
if(CPFeatureIsCompatible(CPHTMLCanvasFeature)){
var _23=document.createElement("canvas"),ctx=_23.getContext("2d");
_23.width=_image.width,_23.height=_image.height;
ctx.drawImage(_image,0,0);
_22=_23.toDataURL("image/png");
}else{
return nil;
}
}
var _24=_22.replace(/^data:image\/png;base64,/,"");
return objj_msgSend(CPData,"dataWithBase64:",_24);
}
}),new objj_method(sel_getUid("setSize:"),function(_25,_26,_27){
with(_25){
_size=CGSizeMakeCopy(_27);
}
}),new objj_method(sel_getUid("size"),function(_28,_29){
with(_28){
return _size;
}
}),new objj_method(sel_getUid("setName:"),function(_2a,_2b,_2c){
with(_2a){
if(_name===_2c){
return YES;
}
if(_1[_2c]){
return NO;
}
_name=_2c;
_1[_2c]=_2a;
return YES;
}
}),new objj_method(sel_getUid("name"),function(_2d,_2e){
with(_2d){
return _name;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_2f,_30,_31){
with(_2f){
_delegate=_31;
}
}),new objj_method(sel_getUid("delegate"),function(_32,_33){
with(_32){
return _delegate;
}
}),new objj_method(sel_getUid("loadStatus"),function(_34,_35){
with(_34){
return _loadStatus;
}
}),new objj_method(sel_getUid("load"),function(_36,_37){
with(_36){
if(_loadStatus==CPImageLoadStatusLoading||_loadStatus==CPImageLoadStatusCompleted){
return;
}
_loadStatus=CPImageLoadStatusLoading;
_image=new Image();
var _38=YES;
_image.onload=function(){
if(_38){
window.setTimeout(function(){
objj_msgSend(_36,"_imageDidLoad");
},0);
}else{
objj_msgSend(_36,"_imageDidLoad");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_36,"_derefFromImage");
};
_image.onerror=function(){
if(_38){
window.setTimeout(function(){
objj_msgSend(_36,"_imageDidError");
},0);
}else{
objj_msgSend(_36,"_imageDidError");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_36,"_derefFromImage");
};
_image.onabort=function(){
if(_38){
window.setTimeout(function(){
objj_msgSend(_36,"_imageDidAbort");
},0);
}else{
objj_msgSend(_36,"_imageDidAbort");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
objj_msgSend(_36,"_derefFromImage");
};
_image.src=_filename;
window.setTimeout(function(){
_38=NO;
},0);
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_39,_3a){
with(_39){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_3b,_3c){
with(_3b){
return NO;
}
}),new objj_method(sel_getUid("description"),function(_3d,_3e){
with(_3d){
var _3f=objj_msgSend(_3d,"filename"),_40=objj_msgSend(_3d,"size");
if(_3f.indexOf("data:")===0){
var _41=_3f.indexOf(",");
if(_41>0){
_3f=objj_msgSend(CPString,"stringWithFormat:","%s,%s...%s",_3f.substr(0,_41),_3f.substr(_41+1,10),_3f.substr(_3f.length-10));
}else{
_3f="data:<unknown type>";
}
}
return objj_msgSend(CPString,"stringWithFormat:",_3,objj_msgSendSuper({receiver:_3d,super_class:objj_getClass("CPImage").super_class},"description"),_3f,_40.width,_40.height);
}
}),new objj_method(sel_getUid("_derefFromImage"),function(_42,_43){
with(_42){
_image.onload=null;
_image.onerror=null;
_image.onabort=null;
}
}),new objj_method(sel_getUid("_imageDidLoad"),function(_44,_45){
with(_44){
_loadStatus=CPImageLoadStatusCompleted;
if(!_size||(_size.width==-1&&_size.height==-1)){
_size=CGSizeMake(_image.width,_image.height);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPImageDidLoadNotification,_44);
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidLoad:"))){
objj_msgSend(_delegate,"imageDidLoad:",_44);
}
}
}),new objj_method(sel_getUid("_imageDidError"),function(_46,_47){
with(_46){
_loadStatus=CPImageLoadStatusReadError;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidError:"))){
objj_msgSend(_delegate,"imageDidError:",_46);
}
}
}),new objj_method(sel_getUid("_imageDidAbort"),function(_48,_49){
with(_48){
_loadStatus=CPImageLoadStatusCancelled;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("imageDidAbort:"))){
objj_msgSend(_delegate,"imageDidAbort:",_48);
}
}
})]);
class_addMethods(_a,[new objj_method(sel_getUid("imageNamed:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=_1[_4c];
if(_4d){
return _4d;
}
var _4e=_2[_4c];
if(!_4e){
return nil;
}
if(!_4e.isa){
_4e=CPAppKitImage("CPImage/"+_4c+".png",_4e);
objj_msgSend(_4e,"setName:",_4c);
_2[_4c]=_4e;
}
return _4e;
}
})]);
var _9=objj_getClass("CPImage");
if(!_9){
throw new SyntaxError("*** Could not find definition for class \"CPImage\"");
}
var _a=_9.isa;
class_addMethods(_9,[new objj_method(sel_getUid("initWithCoder:"),function(_4f,_50,_51){
with(_4f){
return objj_msgSend(_4f,"initWithContentsOfFile:size:",objj_msgSend(_51,"decodeObjectForKey:","CPFilename"),objj_msgSend(_51,"decodeSizeForKey:","CPSize"));
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_52,_53,_54){
with(_52){
objj_msgSend(_54,"encodeObject:forKey:",_filename,"CPFilename");
objj_msgSend(_54,"encodeSize:forKey:",_size,"CPSize");
}
})]);
var _9=objj_allocateClassPair(CPObject,"CPThreePartImage"),_a=_9.isa;
class_addIvars(_9,[new objj_ivar("_imageSlices"),new objj_ivar("_isVertical")]);
objj_registerClassPair(_9);
class_addMethods(_9,[new objj_method(sel_getUid("initWithImageSlices:isVertical:"),function(_55,_56,_57,_58){
with(_55){
_55=objj_msgSendSuper({receiver:_55,super_class:objj_getClass("CPThreePartImage").super_class},"init");
if(_55){
_imageSlices=_57;
_isVertical=_58;
}
return _55;
}
}),new objj_method(sel_getUid("filename"),function(_59,_5a){
with(_59){
return "";
}
}),new objj_method(sel_getUid("imageSlices"),function(_5b,_5c){
with(_5b){
return _imageSlices;
}
}),new objj_method(sel_getUid("isVertical"),function(_5d,_5e){
with(_5d){
return _isVertical;
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_5f,_60){
with(_5f){
return YES;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_61,_62){
with(_61){
return NO;
}
})]);
var _63="CPThreePartImageImageSlicesKey",_64="CPThreePartImageIsVerticalKey";
var _9=objj_getClass("CPThreePartImage");
if(!_9){
throw new SyntaxError("*** Could not find definition for class \"CPThreePartImage\"");
}
var _a=_9.isa;
class_addMethods(_9,[new objj_method(sel_getUid("initWithCoder:"),function(_65,_66,_67){
with(_65){
_65=objj_msgSendSuper({receiver:_65,super_class:objj_getClass("CPThreePartImage").super_class},"init");
if(_65){
_imageSlices=objj_msgSend(_67,"decodeObjectForKey:",_63);
_isVertical=objj_msgSend(_67,"decodeBoolForKey:",_64);
}
return _65;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_68,_69,_6a){
with(_68){
objj_msgSend(_6a,"encodeObject:forKey:",_imageSlices,_63);
objj_msgSend(_6a,"encodeBool:forKey:",_isVertical,_64);
}
})]);
var _9=objj_allocateClassPair(CPObject,"CPNinePartImage"),_a=_9.isa;
class_addIvars(_9,[new objj_ivar("_imageSlices")]);
objj_registerClassPair(_9);
class_addMethods(_9,[new objj_method(sel_getUid("initWithImageSlices:"),function(_6b,_6c,_6d){
with(_6b){
_6b=objj_msgSendSuper({receiver:_6b,super_class:objj_getClass("CPNinePartImage").super_class},"init");
if(_6b){
_imageSlices=_6d;
}
return _6b;
}
}),new objj_method(sel_getUid("filename"),function(_6e,_6f){
with(_6e){
return "";
}
}),new objj_method(sel_getUid("imageSlices"),function(_70,_71){
with(_70){
return _imageSlices;
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_72,_73){
with(_72){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_74,_75){
with(_74){
return YES;
}
})]);
var _76="CPNinePartImageImageSlicesKey";
var _9=objj_getClass("CPNinePartImage");
if(!_9){
throw new SyntaxError("*** Could not find definition for class \"CPNinePartImage\"");
}
var _a=_9.isa;
class_addMethods(_9,[new objj_method(sel_getUid("initWithCoder:"),function(_77,_78,_79){
with(_77){
_77=objj_msgSendSuper({receiver:_77,super_class:objj_getClass("CPNinePartImage").super_class},"init");
if(_77){
_imageSlices=objj_msgSend(_79,"decodeObjectForKey:",_76);
}
return _77;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_7a,_7b,_7c){
with(_7a){
objj_msgSend(_7c,"encodeObject:forKey:",_imageSlices,_76);
}
})]);
p;13;CPImageView.jt;12000;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.ji;11;CPControl.ji;9;CPImage.ji;14;CPShadowView.jt;11894;
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPShadowView.j",YES);
CPImageAlignCenter=0;
CPImageAlignTop=1;
CPImageAlignTopLeft=2;
CPImageAlignTopRight=3;
CPImageAlignLeft=4;
CPImageAlignBottom=5;
CPImageAlignBottomLeft=6;
CPImageAlignBottomRight=7;
CPImageAlignRight=8;
var _1=nil;
var _2=objj_allocateClassPair(CPControl,"CPImageView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_DOMImageElement"),new objj_ivar("_hasShadow"),new objj_ivar("_shadowView"),new objj_ivar("_isEditable"),new objj_ivar("_imageRect"),new objj_ivar("_imageAlignment")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPImageView").super_class},"initWithFrame:",_6);
if(_4){
_DOMImageElement=document.createElement("img");
_DOMImageElement.style.position="absolute";
_DOMImageElement.style.left="0px";
_DOMImageElement.style.top="0px";
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
_DOMElement.appendChild(_DOMImageElement);
_DOMImageElement.style.visibility="hidden";
}
return _4;
}
}),new objj_method(sel_getUid("image"),function(_7,_8){
with(_7){
return objj_msgSend(_7,"objectValue");
}
}),new objj_method(sel_getUid("setImage:"),function(_9,_a,_b){
with(_9){
objj_msgSend(_9,"setObjectValue:",_b);
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_c,_d,_e){
with(_c){
var _f=objj_msgSend(_c,"objectValue");
if(_f===_e){
return;
}
objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPImageView").super_class},"setObjectValue:",_e);
var _10=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_f){
objj_msgSend(_10,"removeObserver:name:object:",_c,CPImageDidLoadNotification,_f);
}
var _11=objj_msgSend(_c,"objectValue");
_DOMImageElement.src=_11?objj_msgSend(_11,"filename"):objj_msgSend(_1,"filename");
var _12=objj_msgSend(_11,"size");
if(_12&&_12.width===-1&&_12.height===-1){
objj_msgSend(_10,"addObserver:selector:name:object:",_c,sel_getUid("imageDidLoad:"),CPImageDidLoadNotification,_11);
_DOMImageElement.width=0;
_DOMImageElement.height=0;
objj_msgSend(_shadowView,"setHidden:",YES);
}else{
objj_msgSend(_c,"hideOrDisplayContents");
objj_msgSend(_c,"setNeedsLayout");
objj_msgSend(_c,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("imageDidLoad:"),function(_13,_14,_15){
with(_13){
objj_msgSend(_13,"hideOrDisplayContents");
objj_msgSend(_13,"setNeedsLayout");
objj_msgSend(_13,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("hasShadow"),function(_16,_17){
with(_16){
return _hasShadow;
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_18,_19,_1a){
with(_18){
if(_hasShadow==_1a){
return;
}
_hasShadow=_1a;
if(_hasShadow){
_shadowView=objj_msgSend(objj_msgSend(CPShadowView,"alloc"),"initWithFrame:",objj_msgSend(_18,"bounds"));
objj_msgSend(_18,"addSubview:",_shadowView);
objj_msgSend(_18,"setNeedsLayout");
objj_msgSend(_18,"setNeedsDisplay:",YES);
}else{
objj_msgSend(_shadowView,"removeFromSuperview");
_shadowView=nil;
}
objj_msgSend(_18,"hideOrDisplayContents");
}
}),new objj_method(sel_getUid("setImageAlignment:"),function(_1b,_1c,_1d){
with(_1b){
if(_imageAlignment==_1d){
return;
}
_imageAlignment=_1d;
if(!objj_msgSend(_1b,"image")){
return;
}
objj_msgSend(_1b,"setNeedsLayout");
objj_msgSend(_1b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("imageAlignment"),function(_1e,_1f){
with(_1e){
return _imageAlignment;
}
}),new objj_method(sel_getUid("setImageScaling:"),function(_20,_21,_22){
with(_20){
objj_msgSendSuper({receiver:_20,super_class:objj_getClass("CPImageView").super_class},"setImageScaling:",_22);
if(objj_msgSend(_20,"currentValueForThemeAttribute:","image-scaling")===CPImageScaleAxesIndependently){
if(NULL){
var _23={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _23={x:0,y:0};
}
_DOMImageElement.style.left=ROUND(_23.x)+"px";
_DOMImageElement.style.top=ROUND(_23.y)+"px";
}
objj_msgSend(_20,"setNeedsLayout");
objj_msgSend(_20,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("imageScaling"),function(_24,_25){
with(_24){
return objj_msgSend(_24,"currentValueForThemeAttribute:","image-scaling");
}
}),new objj_method(sel_getUid("hideOrDisplayContents"),function(_26,_27){
with(_26){
if(!objj_msgSend(_26,"image")){
_DOMImageElement.style.visibility="hidden";
objj_msgSend(_shadowView,"setHidden:",YES);
}else{
_DOMImageElement.style.visibility="visible";
objj_msgSend(_shadowView,"setHidden:",NO);
}
}
}),new objj_method(sel_getUid("imageRect"),function(_28,_29){
with(_28){
return _imageRect;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_2a,_2b){
with(_2a){
if(!objj_msgSend(_2a,"image")){
return;
}
var _2c=objj_msgSend(_2a,"bounds"),_2d=objj_msgSend(_2a,"image"),_2e=objj_msgSend(_2a,"currentValueForThemeAttribute:","image-scaling"),x=0,y=0,_2f=(_hasShadow?objj_msgSend(_shadowView,"horizontalInset"):0),_30=(_hasShadow?objj_msgSend(_shadowView,"verticalInset"):0),_31=(_2c.size.width),_32=(_2c.size.height),_33=_31-_2f,_34=_32-_30;
if(_2e===CPImageScaleAxesIndependently){
_DOMImageElement.width=ROUND(_33);
_DOMImageElement.height=ROUND(_34);
}else{
var _35=objj_msgSend(_2d,"size");
if(_35.width==-1&&_35.height==-1){
return;
}
switch(_2e){
case CPImageScaleProportionallyDown:
if(_33>=_35.width&&_34>=_35.height){
_33=_35.width;
_34=_35.height;
break;
}
case CPImageScaleProportionallyUpOrDown:
var _36=_35.width/_35.height,_37=_33/_34;
if(_37>_36){
_33=_34*_36;
}else{
_34=_33/_36;
}
break;
case CPImageScaleAxesIndependently:
case CPImageScaleNone:
_33=_35.width;
_34=_35.height;
break;
}
_DOMImageElement.width=ROUND(_33);
_DOMImageElement.height=ROUND(_34);
var x,y;
switch(_imageAlignment){
case CPImageAlignLeft:
case CPImageAlignTopLeft:
case CPImageAlignBottomLeft:
x=0;
break;
case CPImageAlignRight:
case CPImageAlignTopRight:
case CPImageAlignBottomRight:
x=_31-_33;
break;
default:
x=(_31-_33)/2;
break;
}
switch(_imageAlignment){
case CPImageAlignTop:
case CPImageAlignTopLeft:
case CPImageAlignTopRight:
y=0;
break;
case CPImageAlignBottom:
case CPImageAlignBottomLeft:
case CPImageAlignBottomRight:
y=_32-_34;
break;
default:
y=(_32-_34)/2;
break;
}
if(NULL){
var _38={x:CGPointMake(x,y).x*NULL.a+CGPointMake(x,y).y*NULL.c+NULL.tx,y:CGPointMake(x,y).x*NULL.b+CGPointMake(x,y).y*NULL.d+NULL.ty};
}else{
var _38={x:x,y:y};
}
_DOMImageElement.style.left=ROUND(_38.x)+"px";
_DOMImageElement.style.top=ROUND(_38.y)+"px";
}
_imageRect={origin:{x:x,y:y},size:{width:_33,height:_34}};
if(_hasShadow){
objj_msgSend(_shadowView,"setFrame:",{origin:{x:x-objj_msgSend(_shadowView,"leftInset"),y:y-objj_msgSend(_shadowView,"topInset")},size:{width:_33+_2f,height:_34+_30}});
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_39,_3a,_3b){
with(_39){
objj_msgSend(objj_msgSend(_39,"nextResponder"),"mouseDown:",_3b);
}
}),new objj_method(sel_getUid("setEditable:"),function(_3c,_3d,_3e){
with(_3c){
if(_isEditable===_3e){
return;
}
_isEditable=_3e;
if(_isEditable){
objj_msgSend(_3c,"registerForDraggedTypes:",[CPImagesPboardType]);
}else{
var _3f=objj_msgSend(_3c,"registeredDraggedTypes");
objj_msgSend(_3c,"unregisterDraggedTypes");
objj_msgSend(_3f,"removeObjectIdenticalTo:",CPImagesPboardType);
objj_msgSend(_3c,"registerForDraggedTypes:",_3f);
}
}
}),new objj_method(sel_getUid("isEditable"),function(_40,_41){
with(_40){
return _isEditable;
}
}),new objj_method(sel_getUid("performDragOperation:"),function(_42,_43,_44){
with(_42){
var _45=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(objj_msgSend(_44,"draggingPasteboard"),"dataForType:",CPImagesPboardType));
if(objj_msgSend(_45,"count")){
objj_msgSend(_42,"setImage:",_45[0]);
objj_msgSend(_42,"sendAction:to:",objj_msgSend(_42,"action"),objj_msgSend(_42,"target"));
}
return YES;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_46,_47){
with(_46){
var _48=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class"));
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",objj_msgSend(_48,"pathForResource:","empty.png"));
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_49,_4a,_4b){
with(_49){
if(_4b===CPValueBinding||_4b===CPValueURLBinding||_4b===CPValuePathBinding||_4b===CPDataBinding){
return objj_msgSend(CPImageViewValueBinder,"class");
}
return objj_msgSendSuper({receiver:_49,super_class:objj_getMetaClass("CPImageView").super_class},"_binderClassForBinding:",_4b);
}
})]);
var _2=objj_allocateClassPair(CPBinder,"CPImageViewValueBinder"),_3=_2.isa;
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"_setPlaceholder:forMarker:isDefault:",nil,CPMultipleValuesMarker,YES);
objj_msgSend(_4c,"_setPlaceholder:forMarker:isDefault:",nil,CPNoSelectionMarker,YES);
objj_msgSend(_4c,"_setPlaceholder:forMarker:isDefault:",nil,CPNotApplicableMarker,YES);
objj_msgSend(_4c,"_setPlaceholder:forMarker:isDefault:",nil,CPNullMarker,YES);
}
}),new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"),function(_4f,_50,_51,_52,_53){
with(_4f){
objj_msgSend(_source,"setImage:",nil);
}
}),new objj_method(sel_getUid("setValue:forBinding:"),function(_54,_55,_56,_57){
with(_54){
var _58;
if(_57===CPDataBinding){
_58=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithData:",_56);
}else{
if(_57===CPValueURLBinding||_57===CPValuePathBinding){
_58=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:",_56);
}else{
if(_57===CPValueBinding){
_58=_56;
}
}
}
objj_msgSend(_source,"setImage:",_58);
}
})]);
var _59="CPImageViewImageKey",_5a="CPImageViewImageScalingKey",_5b="CPImageViewImageAlignmentKey",_5c="CPImageViewHasShadowKey",_5d="CPImageViewIsEditableKey";
var _2=objj_getClass("CPImageView");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPImageView\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_5e,_5f,_60){
with(_5e){
_DOMImageElement=document.createElement("img");
_DOMImageElement.style.position="absolute";
_DOMImageElement.style.left="0px";
_DOMImageElement.style.top="0px";
_DOMImageElement.style.visibility="hidden";
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMImageElement.setAttribute("draggable","true");
_DOMImageElement.style["-khtml-user-drag"]="element";
}
if(typeof (appkit_tag_dom_elements)!=="undefined"&&!!appkit_tag_dom_elements){
_DOMImageElement.setAttribute("data-cappuccino-view",objj_msgSend(_5e,"className"));
}
_5e=objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("CPImageView").super_class},"initWithCoder:",_60);
if(_5e){
_DOMElement.appendChild(_DOMImageElement);
objj_msgSend(_5e,"setHasShadow:",objj_msgSend(_60,"decodeBoolForKey:",_5c));
objj_msgSend(_5e,"setImageAlignment:",objj_msgSend(_60,"decodeIntForKey:",_5b));
if(objj_msgSend(_60,"decodeBoolForKey:",_5d)){
objj_msgSend(_5e,"setEditable:",YES);
}
objj_msgSend(_5e,"setNeedsLayout");
objj_msgSend(_5e,"setNeedsDisplay:",YES);
}
return _5e;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_61,_62,_63){
with(_61){
if(_shadowView){
var _64=_subviews;
_subviews=objj_msgSend(_subviews,"copy");
objj_msgSend(_subviews,"removeObjectIdenticalTo:",_shadowView);
}
objj_msgSendSuper({receiver:_61,super_class:objj_getClass("CPImageView").super_class},"encodeWithCoder:",_63);
if(_shadowView){
_subviews=_64;
}
objj_msgSend(_63,"encodeBool:forKey:",_hasShadow,_5c);
objj_msgSend(_63,"encodeInt:forKey:",_imageAlignment,_5b);
if(_isEditable){
objj_msgSend(_63,"encodeBool:forKey:",_isEditable,_5d);
}
}
})]);
p;14;CPKeyBinding.jt;9570;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CPEvent.jt;9512;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPEvent.j",YES);
CPStandardKeyBindings={"@.":"cancelOperation:","^a":"moveToBeginningOfParagraph:","^$a":"moveToBeginningOfParagraphAndModifySelection:","^b":"moveBackward:","^$b":"moveBackwardAndModifySelection:","^~b":"moveWordBackward:","^~$b":"moveWordBackwardAndModifySelection:","^d":"deleteForward:","^e":"moveToEndOfParagraph:","^$e":"moveToEndOfParagraphAndModifySelection:","^f":"moveForward:","^$f":"moveForwardAndModifySelection:","^~f":"moveWordForward:","^~$f":"moveWordForwardAndModifySelection:","^h":"deleteBackward:","^k":"deleteToEndOfParagraph:","^l":"centerSelectionInVisibleArea:","^n":"moveDown:","^$n":"moveDownAndModifySelection:","^o":["insertNewlineIgnoringFieldEditor:","moveBackward:"],"^p":"moveUp:","^$p":"moveUpAndModifySelection:","^t":"transpose:","^v":"pageDown:","^$v":"pageDownAndModifySelection:","^y":"yank:"};
CPStandardKeyBindings[CPNewlineCharacter]="insertNewline:";
CPStandardKeyBindings[CPCarriageReturnCharacter]="insertNewline:";
CPStandardKeyBindings[CPEnterCharacter]="insertNewline:";
CPStandardKeyBindings["~"+CPNewlineCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~"+CPCarriageReturnCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~"+CPEnterCharacter]="insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["^"+CPNewlineCharacter]="insertLineBreak:";
CPStandardKeyBindings["^"+CPCarriageReturnCharacter]="insertLineBreak:";
CPStandardKeyBindings["^"+CPEnterCharacter]="insertLineBreak:";
CPStandardKeyBindings[CPBackspaceCharacter]="deleteBackward:";
CPStandardKeyBindings["~"+CPBackspaceCharacter]="deleteWordBackward:";
CPStandardKeyBindings[CPDeleteCharacter]="deleteBackward:";
CPStandardKeyBindings["@"+CPDeleteCharacter]="deleteToBeginningOfLine:";
CPStandardKeyBindings["~"+CPDeleteCharacter]="deleteWordBackward:";
CPStandardKeyBindings["^"+CPDeleteCharacter]="deleteBackwardByDecomposingPreviousCharacter:";
CPStandardKeyBindings["^~"+CPDeleteCharacter]="deleteWordBackward:";
CPStandardKeyBindings[CPDeleteFunctionKey]="deleteForward:";
CPStandardKeyBindings["~"+CPDeleteFunctionKey]="deleteWordForward:";
CPStandardKeyBindings[CPTabCharacter]="insertTab:";
CPStandardKeyBindings["~"+CPTabCharacter]="insertTabIgnoringFieldEditor:";
CPStandardKeyBindings["^"+CPTabCharacter]="selectNextKeyView:";
CPStandardKeyBindings[CPBackTabCharacter]="insertBacktab:";
CPStandardKeyBindings["^"+CPBackTabCharacter]="selectPreviousKeyView:";
CPStandardKeyBindings[CPEscapeFunctionKey]="cancelOperation:";
CPStandardKeyBindings["~"+CPEscapeFunctionKey]="complete:";
CPStandardKeyBindings[CPF5FunctionKey]="complete:";
CPStandardKeyBindings[CPLeftArrowFunctionKey]="moveLeft:";
CPStandardKeyBindings["~"+CPLeftArrowFunctionKey]="moveWordLeft:";
CPStandardKeyBindings["^"+CPLeftArrowFunctionKey]="moveToLeftEndOfLine:";
CPStandardKeyBindings["@"+CPLeftArrowFunctionKey]="moveToLeftEndOfLine:";
CPStandardKeyBindings["$"+CPLeftArrowFunctionKey]="moveLeftAndModifySelection:";
CPStandardKeyBindings["$~"+CPLeftArrowFunctionKey]="moveWordLeftAndModifySelection:";
CPStandardKeyBindings["$^"+CPLeftArrowFunctionKey]="moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@"+CPLeftArrowFunctionKey]="moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^"+CPLeftArrowFunctionKey]="makeBaseWritingDirectionRightToLeft:";
CPStandardKeyBindings["@^~"+CPLeftArrowFunctionKey]="makeTextWritingDirectionRightToLeft:";
CPStandardKeyBindings[CPRightArrowFunctionKey]="moveRight:";
CPStandardKeyBindings["~"+CPRightArrowFunctionKey]="moveWordRight:";
CPStandardKeyBindings["^"+CPRightArrowFunctionKey]="moveToRightEndOfLine:";
CPStandardKeyBindings["@"+CPRightArrowFunctionKey]="moveToRightEndOfLine:";
CPStandardKeyBindings["$"+CPRightArrowFunctionKey]="moveRightAndModifySelection:";
CPStandardKeyBindings["$~"+CPRightArrowFunctionKey]="moveWordRightAndModifySelection:";
CPStandardKeyBindings["$^"+CPRightArrowFunctionKey]="moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@"+CPRightArrowFunctionKey]="moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^"+CPRightArrowFunctionKey]="makeBaseWritingDirectionLeftToRight:";
CPStandardKeyBindings["@^~"+CPRightArrowFunctionKey]="makeTextWritingDirectionLeftToRight:";
CPStandardKeyBindings[CPUpArrowFunctionKey]="moveUp:";
CPStandardKeyBindings["~"+CPUpArrowFunctionKey]=["moveBackward:","moveToBeginningOfParagraph:"];
CPStandardKeyBindings["^"+CPUpArrowFunctionKey]="scrollPageUp:";
CPStandardKeyBindings["@"+CPUpArrowFunctionKey]="moveToBeginningOfDocument:";
CPStandardKeyBindings["$"+CPUpArrowFunctionKey]="moveUpAndModifySelection:";
CPStandardKeyBindings["$~"+CPUpArrowFunctionKey]="moveParagraphBackwardAndModifySelection:";
CPStandardKeyBindings["$@"+CPUpArrowFunctionKey]="moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPDownArrowFunctionKey]="moveDown:";
CPStandardKeyBindings["~"+CPDownArrowFunctionKey]=["moveForward:","moveToEndOfParagraph:"];
CPStandardKeyBindings["^"+CPDownArrowFunctionKey]="scrollPageDown:";
CPStandardKeyBindings["@"+CPDownArrowFunctionKey]="moveToEndOfDocument:";
CPStandardKeyBindings["$"+CPDownArrowFunctionKey]="moveDownAndModifySelection:";
CPStandardKeyBindings["$~"+CPDownArrowFunctionKey]="moveParagraphForwardAndModifySelection:";
CPStandardKeyBindings["$@"+CPDownArrowFunctionKey]="moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings["@^"+CPDownArrowFunctionKey]="makeBaseWritingDirectionNatural:";
CPStandardKeyBindings["@^~"+CPDownArrowFunctionKey]="makeTextWritingDirectionNatural:";
CPStandardKeyBindings[CPHomeFunctionKey]="scrollToBeginningOfDocument:";
CPStandardKeyBindings["$"+CPHomeFunctionKey]="moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPEndFunctionKey]="scrollToEndOfDocument:";
CPStandardKeyBindings["$"+CPEndFunctionKey]="moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPPageUpFunctionKey]="scrollPageUp:";
CPStandardKeyBindings["~"+CPPageUpFunctionKey]="pageUp:";
CPStandardKeyBindings["$"+CPPageUpFunctionKey]="pageUpAndModifySelection:";
CPStandardKeyBindings[CPPageDownFunctionKey]="scrollPageDown:";
CPStandardKeyBindings["~"+CPPageDownFunctionKey]="pageDown:";
CPStandardKeyBindings["$"+CPPageDownFunctionKey]="pageDownAndModifySelection:";
var _1={};
var _2=objj_allocateClassPair(CPObject,"CPKeyBinding"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_key"),new objj_ivar("_modifierFlags"),new objj_ivar("_selectors"),new objj_ivar("_cacheName")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithPhysicalKeyString:selectors:"),function(_4,_5,_6,_7){
with(_4){
var _8=_6.split(""),_9=(objj_msgSend(_8,"containsObject:","$")?CPShiftKeyMask:0)|(objj_msgSend(_8,"containsObject:","^")?CPControlKeyMask:0)|(objj_msgSend(_8,"containsObject:","~")?CPAlternateKeyMask:0)|(objj_msgSend(_8,"containsObject:","@")?CPCommandKeyMask:0);
if(!objj_msgSend(_7,"isKindOfClass:",CPArray)){
_7=[_7];
}
return objj_msgSend(_4,"initWithKey:modifierFlags:selectors:",objj_msgSend(_8,"lastObject"),_9,_7);
}
}),new objj_method(sel_getUid("initWithKey:modifierFlags:selectors:"),function(_a,_b,_c,_d,_e){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPKeyBinding").super_class},"init");
if(_a){
_key=_c;
_modifierFlags=_d;
_selectors=_e;
var _f=[];
if(_modifierFlags&CPCommandKeyMask){
_f.push("@");
}
if(_modifierFlags&CPControlKeyMask){
_f.push("^");
}
if(_modifierFlags&CPAlternateKeyMask){
_f.push("~");
}
if(_modifierFlags&CPShiftKeyMask){
_f.push("$");
}
_f.push(_key);
_cacheName=_f.join("");
}
return _a;
}
}),new objj_method(sel_getUid("key"),function(_10,_11){
with(_10){
return _key;
}
}),new objj_method(sel_getUid("modifierFlags"),function(_12,_13){
with(_12){
return _modifierFlags;
}
}),new objj_method(sel_getUid("selectors"),function(_14,_15){
with(_14){
return _selectors;
}
}),new objj_method(sel_getUid("_cacheName"),function(_16,_17){
with(_16){
return _cacheName;
}
}),new objj_method(sel_getUid("isEqual:"),function(_18,_19,rhs){
with(_18){
return _key===objj_msgSend(rhs,"key")&&_modifierFlags===objj_msgSend(rhs,"modifierFlags");
}
}),new objj_method(sel_getUid("description"),function(_1a,_1b){
with(_1a){
return objj_msgSend(CPString,"stringWithFormat:","<KeyBinding string: '%@' modifierFlags: 0x%lx selectors: %@>",_key,_modifierFlags,_selectors);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_1c,_1d){
with(_1c){
if(objj_msgSend(_1c,"class")!==CPKeyBinding){
return;
}
objj_msgSend(_1c,"createKeyBindingsFromJSObject:",CPStandardKeyBindings);
}
}),new objj_method(sel_getUid("createKeyBindingsFromJSObject:"),function(_1e,_1f,_20){
with(_1e){
var _21;
for(_21 in _20){
objj_msgSend(_1e,"cacheKeyBinding:",objj_msgSend(objj_msgSend(CPKeyBinding,"alloc"),"initWithPhysicalKeyString:selectors:",_21,_20[_21]));
}
}
}),new objj_method(sel_getUid("cacheKeyBinding:"),function(_22,_23,_24){
with(_22){
if(!_24){
return;
}
_1[objj_msgSend(_24,"_cacheName")]=_24;
}
}),new objj_method(sel_getUid("keyBindingForKey:modifierFlags:"),function(_25,_26,_27,_28){
with(_25){
var _29=objj_msgSend(objj_msgSend(_25,"alloc"),"initWithKey:modifierFlags:selectors:",_27,_28,nil);
return _1[objj_msgSend(_29,"_cacheName")];
}
}),new objj_method(sel_getUid("selectorsForKey:modifierFlags:"),function(_2a,_2b,_2c,_2d){
with(_2a){
return objj_msgSend(objj_msgSend(_2a,"keyBindingForKey:modifierFlags:",_2c,_2d),"selectors");
}
})]);
p;19;CPKeyValueBinding.jt;16072;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;31;Foundation/CPValueTransformer.jt;15935;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPValueTransformer.j",NO);
var _1=objj_msgSend(CPDictionary,"new"),_2=objj_msgSend(CPDictionary,"new");
var _3=0,_4=1;
var _5=objj_allocateClassPair(CPObject,"CPBinder"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_info"),new objj_ivar("_source"),new objj_ivar("_suppressedNotifications"),new objj_ivar("_placeholderForMarker")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"),function(_7,_8,_9,_a,_b,_c,_d,_e){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPBinder").super_class},"init");
if(_7){
_source=_e;
_info=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_b,_c],[CPObservedObjectKey,CPObservedKeyPathKey]);
_suppressedNotifications={};
_placeholderForMarker={};
if(_d){
objj_msgSend(_info,"setObject:forKey:",_d,CPOptionsKey);
}
objj_msgSend(_7,"_updatePlaceholdersWithOptions:",_d);
objj_msgSend(_b,"addObserver:forKeyPath:options:context:",_7,_c,CPKeyValueObservingOptionNew,_9);
var _f=objj_msgSend(_2,"objectForKey:",objj_msgSend(_source,"UID"));
if(!_f){
_f=objj_msgSend(CPDictionary,"new");
objj_msgSend(_2,"setObject:forKey:",_f,objj_msgSend(_source,"UID"));
}
objj_msgSend(_f,"setObject:forKey:",_7,_a);
objj_msgSend(_7,"setValueFor:",_9);
}
return _7;
}
}),new objj_method(sel_getUid("setValueFor:"),function(_10,_11,_12){
with(_10){
var _13=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_14=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_15=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_16=objj_msgSend(_13,"valueForKeyPath:",_14),_17=CPIsControllerMarker(_16);
if(_17){
if(_16===CPNotApplicableMarker&&objj_msgSend(_15,"objectForKey:",CPRaisesForNotApplicableKeysBindingOption)){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"Cannot transform non-applicable key on: "+_source+" key path: "+_14+" value: "+_16);
}
var _18=objj_msgSend(_10,"_placeholderForMarker:",_16);
objj_msgSend(_10,"setPlaceholderValue:withMarker:forBinding:",_18,_16,_12);
}else{
var _18=objj_msgSend(_10,"transformValue:withOptions:",_16,_15);
objj_msgSend(_10,"setValue:forBinding:",_18,_12);
}
}
}),new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"),function(_19,_1a,_1b,_1c,_1d){
with(_19){
objj_msgSend(_source,"setValue:forKey:",_1b,_1d);
}
}),new objj_method(sel_getUid("setValue:forBinding:"),function(_1e,_1f,_20,_21){
with(_1e){
objj_msgSend(_source,"setValue:forKey:",_20,_21);
}
}),new objj_method(sel_getUid("reverseSetValueFor:"),function(_22,_23,_24){
with(_22){
var _25=objj_msgSend(_info,"objectForKey:",CPObservedObjectKey),_26=objj_msgSend(_info,"objectForKey:",CPObservedKeyPathKey),_27=objj_msgSend(_info,"objectForKey:",CPOptionsKey),_28=objj_msgSend(_source,"valueForKeyPath:",_24);
_28=objj_msgSend(_22,"reverseTransformValue:withOptions:",_28,_27);
objj_msgSend(_22,"suppressSpecificNotificationFromObject:keyPath:",_25,_26);
objj_msgSend(_25,"setValue:forKeyPath:",_28,_26);
objj_msgSend(_22,"unsuppressSpecificNotificationFromObject:keyPath:",_25,_26);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_29,_2a,_2b,_2c,_2d,_2e){
with(_29){
if(!_2d){
return;
}
var _2f=_suppressedNotifications[objj_msgSend(_2c,"UID")];
if(_2f&&_2f[_2b]){
return;
}
objj_msgSend(_29,"setValueFor:",_2e);
}
}),new objj_method(sel_getUid("transformValue:withOptions:"),function(_30,_31,_32,_33){
with(_30){
var _34=objj_msgSend(_33,"objectForKey:",CPValueTransformerNameBindingOption),_35;
if(_34){
_35=objj_msgSend(CPValueTransformer,"valueTransformerForName:",_34);
if(!_35){
var _36=CPClassFromString(_34);
if(_36){
_35=objj_msgSend(objj_msgSend(_36,"alloc"),"init");
objj_msgSend(_36,"setValueTransformer:forName:",_35,_34);
}
}
}else{
_35=objj_msgSend(_33,"objectForKey:",CPValueTransformerBindingOption);
}
if(_35){
_32=objj_msgSend(_35,"transformedValue:",_32);
}
if(_32===undefined||_32===nil||_32===objj_msgSend(CPNull,"null")){
_32=objj_msgSend(_33,"objectForKey:",CPNullPlaceholderBindingOption)||nil;
}
return _32;
}
}),new objj_method(sel_getUid("reverseTransformValue:withOptions:"),function(_37,_38,_39,_3a){
with(_37){
var _3b=objj_msgSend(_3a,"objectForKey:",CPValueTransformerNameBindingOption),_3c;
if(_3b){
_3c=objj_msgSend(CPValueTransformer,"valueTransformerForName:",_3b);
}else{
_3c=objj_msgSend(_3a,"objectForKey:",CPValueTransformerBindingOption);
}
if(_3c&&objj_msgSend(objj_msgSend(_3c,"class"),"allowsReverseTransformation")){
_39=objj_msgSend(_3c,"reverseTransformedValue:",_39);
}
return _39;
}
}),new objj_method(sel_getUid("continuouslyUpdatesValue"),function(_3d,_3e){
with(_3d){
var _3f=objj_msgSend(_info,"objectForKey:",CPOptionsKey);
return objj_msgSend(objj_msgSend(_3f,"objectForKey:",CPContinuouslyUpdatesValueBindingOption),"boolValue");
}
}),new objj_method(sel_getUid("handlesContentAsCompoundValue"),function(_40,_41){
with(_40){
var _42=objj_msgSend(_info,"objectForKey:",CPOptionsKey);
return objj_msgSend(objj_msgSend(_42,"objectForKey:",CPHandlesContentAsCompoundValueBindingOption),"boolValue");
}
}),new objj_method(sel_getUid("suppressSpecificNotificationFromObject:keyPath:"),function(_43,_44,_45,_46){
with(_43){
if(!_45){
return;
}
var uid=objj_msgSend(_45,"UID"),_47=_suppressedNotifications[uid];
if(!_47){
_suppressedNotifications[uid]=_47={};
}
_47[_46]=YES;
}
}),new objj_method(sel_getUid("unsuppressSpecificNotificationFromObject:keyPath:"),function(_48,_49,_4a,_4b){
with(_48){
if(!_4a){
return;
}
var uid=objj_msgSend(_4a,"UID"),_4c=_suppressedNotifications[uid];
if(!_4c){
return;
}
delete _4c[_4b];
}
}),new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"),function(_4d,_4e,_4f){
with(_4d){
var _50=objj_msgSend(_51,"count");
while(_50--){
var _52=_51[_50],_53=_54[_50],_55=objj_msgSend(_4f,"containsKey:",_53),_56=_55?objj_msgSend(_4f,"objectForKey:",_53):nil;
objj_msgSend(_4d,"_setPlaceholder:forMarker:isDefault:",_56,_52,!_55);
}
}
}),new objj_method(sel_getUid("_placeholderForMarker:"),function(_57,_58,_59){
with(_57){
var _5a=_placeholderForMarker[_59];
if(_5a){
return _5a["value"];
}
return nil;
}
}),new objj_method(sel_getUid("_setPlaceholder:forMarker:isDefault:"),function(_5b,_5c,_5d,_5e,_5f){
with(_5b){
if(_5f){
var _60=_placeholderForMarker[_5e];
if(_60&&!_60["isDefault"]){
return;
}
}
_placeholderForMarker[_5e]={"isDefault":_5f,"value":_5d};
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("exposeBinding:forClass:"),function(_61,_62,_63,_64){
with(_61){
var _65=objj_msgSend(_1,"objectForKey:",objj_msgSend(_64,"UID"));
if(!_65){
_65=[];
objj_msgSend(_1,"setObject:forKey:",_65,objj_msgSend(_64,"UID"));
}
_65.push(_63);
}
}),new objj_method(sel_getUid("exposedBindingsForClass:"),function(_66,_67,_68){
with(_66){
return objj_msgSend(objj_msgSend(_1,"objectForKey:",objj_msgSend(_68,"UID")),"copy");
}
}),new objj_method(sel_getUid("getBinding:forObject:"),function(_69,_6a,_6b,_6c){
with(_69){
return objj_msgSend(objj_msgSend(_2,"objectForKey:",objj_msgSend(_6c,"UID")),"objectForKey:",_6b);
}
}),new objj_method(sel_getUid("infoForBinding:forObject:"),function(_6d,_6e,_6f,_70){
with(_6d){
var _71=objj_msgSend(_6d,"getBinding:forObject:",_6f,_70);
if(_71){
return _71._info;
}
return nil;
}
}),new objj_method(sel_getUid("allBindingsForObject:"),function(_72,_73,_74){
with(_72){
return objj_msgSend(_2,"objectForKey:",objj_msgSend(_74,"UID"));
}
}),new objj_method(sel_getUid("unbind:forObject:"),function(_75,_76,_77,_78){
with(_75){
var _79=objj_msgSend(_2,"objectForKey:",objj_msgSend(_78,"UID"));
if(!_79){
return;
}
var _7a=objj_msgSend(_79,"objectForKey:",_77);
if(!_7a){
return;
}
var _7b=_7a._info,_7c=objj_msgSend(_7b,"objectForKey:",CPObservedObjectKey),_7d=objj_msgSend(_7b,"objectForKey:",CPObservedKeyPathKey);
objj_msgSend(_7c,"removeObserver:forKeyPath:",_7a,_7d);
objj_msgSend(_79,"removeObjectForKey:",_77);
}
}),new objj_method(sel_getUid("unbindAllForObject:"),function(_7e,_7f,_80){
with(_7e){
var _81=objj_msgSend(_2,"objectForKey:",objj_msgSend(_80,"UID"));
if(!_81){
return;
}
var _82=objj_msgSend(_81,"allKeys"),_83=_82.length;
while(_83--){
objj_msgSend(_80,"unbind:",objj_msgSend(_81,"objectForKey:",_82[_83]));
}
objj_msgSend(_2,"removeObjectForKey:",objj_msgSend(_80,"UID"));
}
})]);
var _5=objj_getClass("CPObject");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("exposedBindings"),function(_84,_85){
with(_84){
var _86=[],_87=objj_msgSend(_84,"class");
while(_87){
var _88=objj_msgSend(CPBinder,"exposedBindingsForClass:",_87);
if(_88){
objj_msgSend(_86,"addObjectsFromArray:",_88);
}
_87=objj_msgSend(_87,"superclass");
}
return _86;
}
}),new objj_method(sel_getUid("valueClassForBinding:"),function(_89,_8a,_8b){
with(_89){
return objj_msgSend(CPString,"class");
}
}),new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"),function(_8c,_8d,_8e,_8f,_90,_91){
with(_8c){
if(!_8f||!_90){
return CPLog.error("Invalid object or path on "+_8c+" for "+_8e);
}
var _92=objj_msgSend(objj_msgSend(_8c,"class"),"_binderClassForBinding:",_8e);
objj_msgSend(_8c,"unbind:",_8e);
objj_msgSend(objj_msgSend(_92,"alloc"),"initWithBinding:name:to:keyPath:options:from:",objj_msgSend(_8c,"_replacementKeyPathForBinding:",_8e),_8e,_8f,_90,_91,_8c);
}
}),new objj_method(sel_getUid("infoForBinding:"),function(_93,_94,_95){
with(_93){
return objj_msgSend(CPBinder,"infoForBinding:forObject:",_95,_93);
}
}),new objj_method(sel_getUid("unbind:"),function(_96,_97,_98){
with(_96){
var _99=objj_msgSend(objj_msgSend(_96,"class"),"_binderClassForBinding:",_98);
objj_msgSend(_99,"unbind:forObject:",_98,_96);
}
}),new objj_method(sel_getUid("_replacementKeyPathForBinding:"),function(_9a,_9b,_9c){
with(_9a){
return _9c;
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("exposeBinding:"),function(_9d,_9e,_9f){
with(_9d){
objj_msgSend(CPBinder,"exposeBinding:forClass:",_9f,objj_msgSend(_9d,"class"));
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(_a0,_a1,_a2){
with(_a0){
return objj_msgSend(CPBinder,"class");
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPValueBinder"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_a3,_a4,_a5){
with(_a3){
objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("_CPValueBinder").super_class},"setValueFor:","objectValue");
}
}),new objj_method(sel_getUid("reverseSetValueFor:"),function(_a6,_a7,_a8){
with(_a6){
objj_msgSendSuper({receiver:_a6,super_class:objj_getClass("_CPValueBinder").super_class},"reverseSetValueFor:","objectValue");
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPKeyValueOrBinding"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_a9,_aa,_ab){
with(_a9){
var _ac=objj_msgSend(_2,"valueForKey:",objj_msgSend(_source,"UID"));
if(!_ac){
return;
}
objj_msgSend(_source,"setValue:forKey:",_ad(_ab,_ac,_4),_ab);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_ae,_af,_b0,_b1,_b2,_b3){
with(_ae){
objj_msgSend(_ae,"setValueFor:",_b3);
}
})]);
var _5=objj_allocateClassPair(CPBinder,"_CPKeyValueAndBinding"),_6=_5.isa;
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("setValueFor:"),function(_b4,_b5,_b6){
with(_b4){
var _b7=objj_msgSend(_2,"objectForKey:",objj_msgSend(_source,"UID"));
if(!_b7){
return;
}
objj_msgSend(_source,"setValue:forKey:",_ad(_b6,_b7,_3),_b6);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_b8,_b9,_ba,_bb,_bc,_bd){
with(_b8){
objj_msgSend(_b8,"setValueFor:",_bd);
}
})]);
var _ad=function(key,_be,_bf){
var _c0=key,_c1,_c2=1;
while(_c1=objj_msgSend(_be,"objectForKey:",_c0)){
var _c3=_c1._info,_c4=objj_msgSend(_c3,"objectForKey:",CPObservedObjectKey),_c5=objj_msgSend(_c3,"objectForKey:",CPObservedKeyPathKey),_c6=objj_msgSend(_c3,"objectForKey:",CPOptionsKey);
var _c7=objj_msgSend(_c1,"transformValue:withOptions:",objj_msgSend(_c4,"valueForKeyPath:",_c5),_c6);
if(_c7==_bf){
return _bf;
}
_c0=objj_msgSend(CPString,"stringWithFormat:","%@%i",key,++_c2);
}
return !_bf;
};
var _c8=function(_c9,_ca,_cb){
var _cc=objj_msgSend(_cb,"objectForKey:",_c9),_cd=_cc._info,_ce=objj_msgSend(_cd,"objectForKey:",CPObservedObjectKey),_cf=objj_msgSend(_cd,"objectForKey:",CPObservedKeyPathKey),_d0=objj_msgSend(_cd,"objectForKey:",CPOptionsKey),_d1=objj_msgSend(_ce,"valueForKeyPath:",_cf),_d2=objj_msgSend(_d0,"objectForKey:",CPSelectorNameBindingOption);
if(!_d1||!_d2){
return;
}
var _d3=objj_msgSend(CPInvocation,"invocationWithMethodSignature:",objj_msgSend(_d1,"methodSignatureForSelector:",_d2));
objj_msgSend(_d3,"setSelector:",_d2);
var _d4=_ca,_d5=1;
while(_cc=objj_msgSend(_cb,"objectForKey:",_d4)){
_cd=_cc._info;
_cf=objj_msgSend(_cd,"objectForKey:",CPObserverKeyPathKey);
_ce=objj_msgSend(objj_msgSend(_cd,"objectForKey:",CPObservedObjectKey),"valueForKeyPath:",_cf);
if(_ce){
objj_msgSend(_d3,"setArgument:atIndex:",_ce,++_d5);
}
_d4=objj_msgSend(CPString,"stringWithFormat:","%@%i",_ca,_d5);
}
objj_msgSend(_d3,"invoke");
};
CPObservedObjectKey="CPObservedObjectKey";
CPObservedKeyPathKey="CPObservedKeyPathKey";
CPOptionsKey="CPOptionsKey";
CPMultipleValuesMarker="CPMultipleValuesMarker";
CPNoSelectionMarker="CPNoSelectionMarker";
CPNotApplicableMarker="CPNotApplicableMarker";
CPNullMarker="CPNullMarker";
CPAlignmentBinding="alignment";
CPEditableBinding="editable";
CPEnabledBinding="enabled";
CPFontBinding="font";
CPHiddenBinding="hidden";
CPSelectedIndexBinding="selectedIndex";
CPTextColorBinding="textColor";
CPToolTipBinding="toolTip";
CPValueBinding="value";
CPValueURLBinding="valueURL";
CPValuePathBinding="valuePath";
CPDataBinding="data";
CPAllowsEditingMultipleValuesSelectionBindingOption="CPAllowsEditingMultipleValuesSelection";
CPAllowsNullArgumentBindingOption="CPAllowsNullArgument";
CPConditionallySetsEditableBindingOption="CPConditionallySetsEditable";
CPConditionallySetsEnabledBindingOption="CPConditionallySetsEnabled";
CPConditionallySetsHiddenBindingOption="CPConditionallySetsHidden";
CPContinuouslyUpdatesValueBindingOption="CPContinuouslyUpdatesValue";
CPCreatesSortDescriptorBindingOption="CPCreatesSortDescriptor";
CPDeletesObjectsOnRemoveBindingsOption="CPDeletesObjectsOnRemove";
CPDisplayNameBindingOption="CPDisplayName";
CPDisplayPatternBindingOption="CPDisplayPattern";
CPHandlesContentAsCompoundValueBindingOption="CPHandlesContentAsCompoundValue";
CPInsertsNullPlaceholderBindingOption="CPInsertsNullPlaceholder";
CPInvokesSeparatelyWithArrayObjectsBindingOption="CPInvokesSeparatelyWithArrayObjects";
CPMultipleValuesPlaceholderBindingOption="CPMultipleValuesPlaceholder";
CPNoSelectionPlaceholderBindingOption="CPNoSelectionPlaceholder";
CPNotApplicablePlaceholderBindingOption="CPNotApplicablePlaceholder";
CPNullPlaceholderBindingOption="CPNullPlaceholder";
CPPredicateFormatBindingOption="CPPredicateFormat";
CPRaisesForNotApplicableKeysBindingOption="CPRaisesForNotApplicableKeys";
CPSelectorNameBindingOption="CPSelectorName";
CPSelectsAllWhenSettingContentBindingOption="CPSelectsAllWhenSettingContent";
CPValidatesImmediatelyBindingOption="CPValidatesImmediately";
CPValueTransformerNameBindingOption="CPValueTransformerName";
CPValueTransformerBindingOption="CPValueTransformer";
CPIsControllerMarker=function(_d6){
return _d6===CPMultipleValuesMarker||_d6===CPNoSelectionMarker||_d6===CPNotApplicableMarker||_d6===CPNullMarker;
};
var _51=[CPMultipleValuesMarker,CPNoSelectionMarker,CPNotApplicableMarker,CPNullMarker],_54=[CPMultipleValuesPlaceholderBindingOption,CPNoSelectionPlaceholderBindingOption,CPNotApplicablePlaceholderBindingOption,CPNullPlaceholderBindingOption];
p;18;CPLevelIndicator.jt;13183;@STATIC;1.0;i;11;CPControl.jt;13147;
objj_executeFile("CPControl.j",YES);
CPTickMarkBelow=0;
CPTickMarkAbove=1;
CPTickMarkLeft=CPTickMarkAbove;
CPTickMarkRight=CPTickMarkBelow;
CPRelevancyLevelIndicatorStyle=0;
CPContinuousCapacityLevelIndicatorStyle=1;
CPDiscreteCapacityLevelIndicatorStyle=2;
CPRatingLevelIndicatorStyle=3;
var _1=nil,_2=nil,_3=nil,_4=nil,_5=nil,_6=1;
var _7=objj_allocateClassPair(CPControl,"CPLevelIndicator"),_8=_7.isa;
class_addIvars(_7,[new objj_ivar("_levelIndicatorStyle"),new objj_ivar("_minValue"),new objj_ivar("_maxValue"),new objj_ivar("_warningValue"),new objj_ivar("_criticalValue"),new objj_ivar("_tickMarkPosition"),new objj_ivar("_numberOfTickMarks"),new objj_ivar("_numberOfMajorTickMarks"),new objj_ivar("_isEditable"),new objj_ivar("_isTracking")]);
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("levelIndicatorStyle"),function(_9,_a){
with(_9){
return _levelIndicatorStyle;
}
}),new objj_method(sel_getUid("setLevelIndicatorStyle:"),function(_b,_c,_d){
with(_b){
_levelIndicatorStyle=_d;
}
}),new objj_method(sel_getUid("minValue"),function(_e,_f){
with(_e){
return _minValue;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_10,_11,_12){
with(_10){
_minValue=_12;
}
}),new objj_method(sel_getUid("maxValue"),function(_13,_14){
with(_13){
return _maxValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_15,_16,_17){
with(_15){
_maxValue=_17;
}
}),new objj_method(sel_getUid("warningValue"),function(_18,_19){
with(_18){
return _warningValue;
}
}),new objj_method(sel_getUid("setWarningValue:"),function(_1a,_1b,_1c){
with(_1a){
_warningValue=_1c;
}
}),new objj_method(sel_getUid("criticalValue"),function(_1d,_1e){
with(_1d){
return _criticalValue;
}
}),new objj_method(sel_getUid("setCriticalValue:"),function(_1f,_20,_21){
with(_1f){
_criticalValue=_21;
}
}),new objj_method(sel_getUid("tickMarkPosition"),function(_22,_23){
with(_22){
return _tickMarkPosition;
}
}),new objj_method(sel_getUid("setTickMarkPosition:"),function(_24,_25,_26){
with(_24){
_tickMarkPosition=_26;
}
}),new objj_method(sel_getUid("numberOfTickMarks"),function(_27,_28){
with(_27){
return _numberOfTickMarks;
}
}),new objj_method(sel_getUid("setNumberOfTickMarks:"),function(_29,_2a,_2b){
with(_29){
_numberOfTickMarks=_2b;
}
}),new objj_method(sel_getUid("numberOfMajorTickMarks"),function(_2c,_2d){
with(_2c){
return _numberOfMajorTickMarks;
}
}),new objj_method(sel_getUid("setNumberOfMajorTickMarks:"),function(_2e,_2f,_30){
with(_2e){
_numberOfMajorTickMarks=_30;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_31,_32,_33){
with(_31){
_31=objj_msgSendSuper({receiver:_31,super_class:objj_getClass("CPLevelIndicator").super_class},"initWithFrame:",_33);
if(_31){
_levelIndicatorStyle=CPDiscreteCapacityLevelIndicatorStyle;
_maxValue=2;
_warningValue=2;
_criticalValue=2;
objj_msgSend(_31,"_init");
}
return _31;
}
}),new objj_method(sel_getUid("_init"),function(_34,_35){
with(_34){
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_36,_37){
with(_36){
var _38=objj_msgSend(_36,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel",CPWindowBelow,nil);
objj_msgSend(_38,"setBackgroundColor:",_1);
var _39=_maxValue-_minValue;
if(_39<=0){
return;
}
var _3a=_3,_3b=objj_msgSend(_36,"doubleValue");
if(_3b<=_criticalValue){
_3a=_5;
}else{
if(_3b<=_warningValue){
_3a=_4;
}
}
for(var i=0;i<_39;i++){
var _3c=objj_msgSend(_36,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","segment-bezel-"+i,CPWindowAbove,_38);
objj_msgSend(_3c,"setBackgroundColor:",(_minValue+i)<_3b?_3a:_2);
}
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_3d,_3e,_3f){
with(_3d){
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_40,_41,_42){
with(_40){
var _43=18,_44=17,_45={origin:{x:objj_msgSend(_40,"bounds").origin.x,y:objj_msgSend(_40,"bounds").origin.y},size:{width:objj_msgSend(_40,"bounds").size.width,height:objj_msgSend(_40,"bounds").size.height}};
if(_42=="bezel"){
_45.origin.y=((_45.size.height)-_43)/2;
_45.size.height=_43;
return _45;
}else{
if(_42.indexOf("segment-bezel")===0){
var _46=parseInt(_42.substring("segment-bezel-".length),10),_47=_maxValue-_minValue;
if(_46>=_47){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _48=_45.size.width/_47,_49=CGRectCreateCopy(objj_msgSend(_40,"bounds"));
_49.origin.y=((_45.size.height)-_43)/2;
_49.origin.x=FLOOR(_46*_48);
_49.size.width=(_46==_47-1)?_45.size.width-_49.origin.x:FLOOR(((_46+1)*_48))-FLOOR((_46*_48))-_6;
_49.size.height=_44;
return _49;
}
}
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
}),new objj_method(sel_getUid("setEditable:"),function(_4a,_4b,_4c){
with(_4a){
if(_isEditable===_4c){
return;
}
_isEditable=_4c;
}
}),new objj_method(sel_getUid("isEditable"),function(_4d,_4e){
with(_4d){
return _isEditable;
}
}),new objj_method(sel_getUid("hitTest:"),function(_4f,_50,_51){
with(_4f){
if(!objj_msgSend(_4f,"isEditable")){
return nil;
}
return objj_msgSendSuper({receiver:_4f,super_class:objj_getClass("CPLevelIndicator").super_class},"hitTest:",_51);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_52,_53,_54){
with(_52){
if(!objj_msgSend(_52,"isEditable")||!objj_msgSend(_52,"isEnabled")){
return;
}
objj_msgSend(_52,"_trackMouse:",_54);
}
}),new objj_method(sel_getUid("_trackMouse:"),function(_55,_56,_57){
with(_55){
var _58=objj_msgSend(_57,"type");
if(_58==CPLeftMouseDown||_58==CPLeftMouseDragged){
var _59=_maxValue-_minValue;
if(_59<=0){
return;
}
var _5a=objj_msgSend(_55,"convertPoint:fromView:",objj_msgSend(_57,"locationInWindow"),nil),_5b=objj_msgSend(_55,"bounds"),_5c=objj_msgSend(_55,"doubleValue"),_5d=_5c;
if(_58==CPLeftMouseDragged&&_5a.x<0){
_5d=_minValue;
}else{
if(_58==CPLeftMouseDragged&&_5a.x>_5b.size.width){
_5d=_maxValue;
}else{
for(var i=0;i<_59;i++){
var _5e=objj_msgSend(_55,"rectForEphemeralSubviewNamed:","segment-bezel-"+i);
if(_5a.x>=CGRectGetMinX(_5e)&&_5a.x<CGRectGetMaxX(_5e)){
_5d=(_minValue+i+1);
break;
}
}
}
}
if(_5d!=_5c){
objj_msgSend(_55,"setDoubleValue:",_5d);
}
_isTracking=YES;
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_55,sel_getUid("_trackMouse:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
if(objj_msgSend(_55,"isContinuous")){
objj_msgSend(_55,"sendAction:to:",objj_msgSend(_55,"action"),objj_msgSend(_55,"target"));
}
}else{
if(_isTracking){
_isTracking=NO;
objj_msgSend(_55,"sendAction:to:",objj_msgSend(_55,"action"),objj_msgSend(_55,"target"));
}
}
}
}),new objj_method(sel_getUid("setMinValue:"),function(_5f,_60,_61){
with(_5f){
if(_minValue===_61){
return;
}
_minValue=_61;
objj_msgSend(_5f,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_62,_63,_64){
with(_62){
if(_maxValue===_64){
return;
}
_maxValue=_64;
objj_msgSend(_62,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setWarningValue:"),function(_65,_66,_67){
with(_65){
if(_warningValue===_67){
return;
}
_warningValue=_67;
objj_msgSend(_65,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setCriticalValue:"),function(_68,_69,_6a){
with(_68){
if(_criticalValue===_6a){
return;
}
_criticalValue=_6a;
objj_msgSend(_68,"setNeedsLayout");
}
})]);
class_addMethods(_8,[new objj_method(sel_getUid("initialize"),function(_6b,_6c){
with(_6b){
var _6d=objj_msgSend(CPBundle,"bundleForClass:",CPLevelIndicator);
_1=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-bezel-left.png"),CGSizeMake(3,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-bezel-center.png"),CGSizeMake(1,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-bezel-right.png"),CGSizeMake(3,18))],NO));
_2=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-empty-left.png"),CGSizeMake(3,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-empty-center.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-empty-right.png"),CGSizeMake(3,17))],NO));
_3=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-normal-left.png"),CGSizeMake(3,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-normal-center.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-normal-right.png"),CGSizeMake(3,17))],NO));
_4=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-warning-left.png"),CGSizeMake(3,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-warning-center.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-warning-right.png"),CGSizeMake(3,17))],NO));
_5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-critical-left.png"),CGSizeMake(3,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-critical-center.png"),CGSizeMake(1,17)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_6d,"pathForResource:","CPLevelIndicator/level-indicator-segment-critical-right.png"),CGSizeMake(3,17))],NO));
}
})]);
var _6e="CPLevelIndicatorStyleKey",_6f="CPLevelIndicatorMinValueKey",_70="CPLevelIndicatorMaxValueKey",_71="CPLevelIndicatorWarningValueKey",_72="CPLevelIndicatorCriticalValueKey",_73="CPLevelIndicatorTickMarkPositionKey",_74="CPLevelIndicatorNumberOfTickMarksKey",_75="CPLevelIndicatorNumberOfMajorTickMarksKey",_76="CPLevelIndicatorIsEditableKey";
var _7=objj_getClass("CPLevelIndicator");
if(!_7){
throw new SyntaxError("*** Could not find definition for class \"CPLevelIndicator\"");
}
var _8=_7.isa;
class_addMethods(_7,[new objj_method(sel_getUid("initWithCoder:"),function(_77,_78,_79){
with(_77){
_77=objj_msgSendSuper({receiver:_77,super_class:objj_getClass("CPLevelIndicator").super_class},"initWithCoder:",_79);
if(_77){
_levelIndicatorStyle=objj_msgSend(_79,"decodeIntForKey:",_6e);
_minValue=objj_msgSend(_79,"decodeDoubleForKey:",_6f);
_maxValue=objj_msgSend(_79,"decodeDoubleForKey:",_70);
_warningValue=objj_msgSend(_79,"decodeDoubleForKey:",_71);
_criticalValue=objj_msgSend(_79,"decodeDoubleForKey:",_72);
_tickMarkPosition=objj_msgSend(_79,"decodeIntForKey:",_73);
_numberOfTickMarks=objj_msgSend(_79,"decodeIntForKey:",_74);
_numberOfMajorTickMarks=objj_msgSend(_79,"decodeIntForKey:",_75);
_isEditable=objj_msgSend(_79,"decodeBoolForKey:",_76);
objj_msgSend(_77,"_init");
objj_msgSend(_77,"setNeedsLayout");
objj_msgSend(_77,"setNeedsDisplay:",YES);
}
return _77;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_7a,_7b,_7c){
with(_7a){
objj_msgSendSuper({receiver:_7a,super_class:objj_getClass("CPLevelIndicator").super_class},"encodeWithCoder:",_7c);
objj_msgSend(_7c,"encodeInt:forKey:",_levelIndicatorStyle,_6e);
objj_msgSend(_7c,"encodeDouble:forKey:",_minValue,_6f);
objj_msgSend(_7c,"encodeDouble:forKey:",_maxValue,_70);
objj_msgSend(_7c,"encodeDouble:forKey:",_warningValue,_71);
objj_msgSend(_7c,"encodeDouble:forKey:",_criticalValue,_72);
objj_msgSend(_7c,"encodeInt:forKey:",_tickMarkPosition,_73);
objj_msgSend(_7c,"encodeInt:forKey:",_numberOfTickMarks,_74);
objj_msgSend(_7c,"encodeInt:forKey:",_numberOfMajorTickMarks,_75);
objj_msgSend(_7c,"encodeBool:forKey:",_isEditable,_76);
}
})]);
p;20;CPObjectController.jt;19822;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;25;Foundation/CPCountedSet.ji;14;CPController.jt;19723;
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPCountedSet.j",NO);
objj_executeFile("CPController.j",YES);
var _1=objj_allocateClassPair(CPController,"CPObjectController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_contentObject"),new objj_ivar("_selection"),new objj_ivar("_objectClass"),new objj_ivar("_objectClassName"),new objj_ivar("_isEditable"),new objj_ivar("_automaticallyPreparesContent"),new objj_ivar("_observedKeys")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithContent:",nil);
}
}),new objj_method(sel_getUid("initWithContent:"),function(_5,_6,_7){
with(_5){
if(_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPObjectController").super_class},"init")){
objj_msgSend(_5,"setContent:",_7);
objj_msgSend(_5,"setEditable:",YES);
objj_msgSend(_5,"setObjectClass:",objj_msgSend(CPMutableDictionary,"class"));
_observedKeys=objj_msgSend(objj_msgSend(CPCountedSet,"alloc"),"init");
}
return _5;
}
}),new objj_method(sel_getUid("content"),function(_8,_9){
with(_8){
return _contentObject;
}
}),new objj_method(sel_getUid("setContent:"),function(_a,_b,_c){
with(_a){
objj_msgSend(_a,"willChangeValueForKey:","contentObject");
objj_msgSend(_a,"_selectionWillChange");
_contentObject=_c;
objj_msgSend(_a,"_selectionDidChange");
objj_msgSend(_a,"didChangeValueForKey:","contentObject");
}
}),new objj_method(sel_getUid("_setContentObject:"),function(_d,_e,_f){
with(_d){
objj_msgSend(_d,"setContent:",_f);
}
}),new objj_method(sel_getUid("_contentObject"),function(_10,_11){
with(_10){
return objj_msgSend(_10,"content");
}
}),new objj_method(sel_getUid("setAutomaticallyPreparesContent:"),function(_12,_13,_14){
with(_12){
_automaticallyPreparesContent=_14;
}
}),new objj_method(sel_getUid("automaticallyPreparesContent"),function(_15,_16){
with(_15){
return _automaticallyPreparesContent;
}
}),new objj_method(sel_getUid("prepareContent"),function(_17,_18){
with(_17){
objj_msgSend(_17,"setContent:",objj_msgSend(_17,"newObject"));
}
}),new objj_method(sel_getUid("setObjectClass:"),function(_19,_1a,_1b){
with(_19){
_objectClass=_1b;
}
}),new objj_method(sel_getUid("objectClass"),function(_1c,_1d){
with(_1c){
return _objectClass;
}
}),new objj_method(sel_getUid("_defaultNewObject"),function(_1e,_1f){
with(_1e){
return objj_msgSend(objj_msgSend(objj_msgSend(_1e,"objectClass"),"alloc"),"init");
}
}),new objj_method(sel_getUid("newObject"),function(_20,_21){
with(_20){
return objj_msgSend(_20,"_defaultNewObject");
}
}),new objj_method(sel_getUid("addObject:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_22,"setContent:",_24);
var _25=objj_msgSend(objj_msgSend(_22,"class"),"_binderClassForBinding:","contentObject");
objj_msgSend(objj_msgSend(_25,"getBinding:forObject:","contentObject",_22),"reverseSetValueFor:","contentObject");
}
}),new objj_method(sel_getUid("removeObject:"),function(_26,_27,_28){
with(_26){
if(objj_msgSend(_26,"content")===_28){
objj_msgSend(_26,"setContent:",nil);
}
var _29=objj_msgSend(objj_msgSend(_26,"class"),"_binderClassForBinding:","contentObject");
objj_msgSend(objj_msgSend(_29,"getBinding:forObject:","contentObject",_26),"reverseSetValueFor:","contentObject");
}
}),new objj_method(sel_getUid("add:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2a,"addObject:",objj_msgSend(_2a,"newObject"));
}
}),new objj_method(sel_getUid("canAdd"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"isEditable");
}
}),new objj_method(sel_getUid("remove:"),function(_2f,_30,_31){
with(_2f){
objj_msgSend(_2f,"removeObject:",objj_msgSend(_2f,"content"));
}
}),new objj_method(sel_getUid("canRemove"),function(_32,_33){
with(_32){
return objj_msgSend(_32,"isEditable")&&objj_msgSend(objj_msgSend(_32,"selectedObjects"),"count");
}
}),new objj_method(sel_getUid("setEditable:"),function(_34,_35,_36){
with(_34){
_isEditable=_36;
}
}),new objj_method(sel_getUid("isEditable"),function(_37,_38){
with(_37){
return _isEditable;
}
}),new objj_method(sel_getUid("selectedObjects"),function(_39,_3a){
with(_39){
return objj_msgSend(objj_msgSend(_CPObservableArray,"alloc"),"initWithArray:",[_contentObject]);
}
}),new objj_method(sel_getUid("selection"),function(_3b,_3c){
with(_3b){
return _selection;
}
}),new objj_method(sel_getUid("_selectionWillChange"),function(_3d,_3e){
with(_3d){
objj_msgSend(_selection,"controllerWillChange");
objj_msgSend(_3d,"willChangeValueForKey:","selection");
}
}),new objj_method(sel_getUid("_selectionDidChange"),function(_3f,_40){
with(_3f){
if(_selection===undefined||_selection===nil){
_selection=objj_msgSend(objj_msgSend(CPControllerSelectionProxy,"alloc"),"initWithController:",_3f);
}
objj_msgSend(_selection,"controllerDidChange");
objj_msgSend(_3f,"didChangeValueForKey:","selection");
}
}),new objj_method(sel_getUid("observedKeys"),function(_41,_42){
with(_41){
return _observedKeys;
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_43,_44,_45,_46,_47,_48){
with(_43){
objj_msgSend(_observedKeys,"addObject:",_46);
objj_msgSendSuper({receiver:_43,super_class:objj_getClass("CPObjectController").super_class},"addObserver:forKeyPath:options:context:",_45,_46,_47,_48);
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_49,_4a,_4b,_4c){
with(_49){
objj_msgSend(_observedKeys,"removeObject:",_4c);
objj_msgSendSuper({receiver:_49,super_class:objj_getClass("CPObjectController").super_class},"removeObserver:forKeyPath:",_4b,_4c);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_4d,_4e){
with(_4d){
objj_msgSend(_4d,"exposeBinding:","editable");
objj_msgSend(_4d,"exposeBinding:","contentObject");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingContentObject"),function(_4f,_50){
with(_4f){
return objj_msgSend(CPSet,"setWithObjects:","content");
}
}),new objj_method(sel_getUid("automaticallyNotifiesObserversForKey:"),function(_51,_52,_53){
with(_51){
if(_53==="contentObject"){
return NO;
}
return YES;
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanAdd"),function(_54,_55){
with(_54){
return objj_msgSend(CPSet,"setWithObject:","editable");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanInsert"),function(_56,_57){
with(_56){
return objj_msgSend(CPSet,"setWithObject:","editable");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"),function(_58,_59){
with(_58){
return objj_msgSend(CPSet,"setWithObjects:","editable","selection");
}
})]);
var _5a="CPObjectControllerContentKey",_5b="CPObjectControllerObjectClassNameKey",_5c="CPObjectControllerIsEditableKey",_5d="CPObjectControllerAutomaticallyPreparesContentKey";
var _1=objj_getClass("CPObjectController");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPObjectController\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_5e,_5f,_60){
with(_5e){
_5e=objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("CPObjectController").super_class},"init");
if(_5e){
var _61=objj_msgSend(_60,"decodeObjectForKey:",_5b),_62=CPClassFromString(_61);
objj_msgSend(_5e,"setObjectClass:",_62||objj_msgSend(CPMutableDictionary,"class"));
objj_msgSend(_5e,"setEditable:",objj_msgSend(_60,"decodeBoolForKey:",_5c));
objj_msgSend(_5e,"setAutomaticallyPreparesContent:",objj_msgSend(_60,"decodeBoolForKey:",_5d));
objj_msgSend(_5e,"setContent:",objj_msgSend(_60,"decodeObjectForKey:",_5a));
_observedKeys=objj_msgSend(objj_msgSend(CPCountedSet,"alloc"),"init");
}
return _5e;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_63,_64,_65){
with(_63){
objj_msgSend(_65,"encodeObject:forKey:",objj_msgSend(_63,"content"),_5a);
if(_objectClass){
objj_msgSend(_65,"encodeObject:forKey:",CPStringFromClass(_objectClass),_5b);
}else{
if(_objectClassName){
objj_msgSend(_65,"encodeObject:forKey:",_objectClassName,_5b);
}
}
objj_msgSend(_65,"encodeBool:forKey:",objj_msgSend(_63,"isEditable"),_5c);
objj_msgSend(_65,"encodeBool:forKey:",objj_msgSend(_63,"automaticallyPreparesContent"),_5d);
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_66,_67){
with(_66){
if(!objj_msgSend(_66,"content")&&objj_msgSend(_66,"automaticallyPreparesContent")){
objj_msgSend(_66,"prepareContent");
}
}
})]);
var _1=objj_allocateClassPair(CPObject,"_CPObservationProxy"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_keyPath"),new objj_ivar("_observer"),new objj_ivar("_object"),new objj_ivar("_notifyObject"),new objj_ivar("_context"),new objj_ivar("_options")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithKeyPath:observer:object:"),function(_68,_69,_6a,_6b,_6c){
with(_68){
if(_68=objj_msgSendSuper({receiver:_68,super_class:objj_getClass("_CPObservationProxy").super_class},"init")){
_keyPath=_6a;
_observer=_6b;
_object=_6c;
}
return _68;
}
}),new objj_method(sel_getUid("observer"),function(_6d,_6e){
with(_6d){
return _observer;
}
}),new objj_method(sel_getUid("keyPath"),function(_6f,_70){
with(_6f){
return _keyPath;
}
}),new objj_method(sel_getUid("context"),function(_71,_72){
with(_71){
return _context;
}
}),new objj_method(sel_getUid("options"),function(_73,_74){
with(_73){
return _options;
}
}),new objj_method(sel_getUid("setNotifyObject:"),function(_75,_76,_77){
with(_75){
_notifyObject=_77;
}
}),new objj_method(sel_getUid("isEqual:"),function(_78,_79,_7a){
with(_78){
if(objj_msgSend(_7a,"class")===objj_msgSend(_78,"class")){
if(_7a._observer===_observer&&objj_msgSend(_7a._keyPath,"isEqual:",_keyPath)&&objj_msgSend(_7a._object,"isEqual:",_object)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_7b,_7c,_7d,_7e,_7f,_80){
with(_7b){
if(_notifyObject){
objj_msgSend(_object,"observeValueForKeyPath:ofObject:change:context:",_7d,_object,_7f,_80);
}
objj_msgSend(_observer,"observeValueForKeyPath:ofObject:change:context:",_7d,_object,_7f,_80);
}
}),new objj_method(sel_getUid("description"),function(_81,_82){
with(_81){
return objj_msgSendSuper({receiver:_81,super_class:objj_getClass("_CPObservationProxy").super_class},"description")+objj_msgSend(CPString,"stringWithFormat:","observation proxy for %@ on key path %@",_observer,_keyPath);
}
})]);
var _1=objj_allocateClassPair(_CPJavaScriptArray,"_CPObservableArray"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_observationProxies")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("description"),function(_83,_84){
with(_83){
return "<_CPObservableArray: "+objj_msgSendSuper({receiver:_83,super_class:objj_getClass("_CPObservableArray").super_class},"description")+" >";
}
}),new objj_method(sel_getUid("initWithArray:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPObservableArray").super_class},"initWithArray:",_87);
_85.isa=objj_msgSend(_CPObservableArray,"class");
_85._observationProxies=[];
return _85;
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_88,_89,_8a,_8b,_8c,_8d){
with(_88){
if(_8b.indexOf("@")===0){
var _8e=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_8b,_8a,_88);
_8e._options=_8c;
_8e._context=_8d;
objj_msgSend(_observationProxies,"addObject:",_8e);
var _8f=_8b.indexOf("."),_90=_8b.substring(_8f+1),_91=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_88,"count")));
objj_msgSend(_88,"addObserver:toObjectsAtIndexes:forKeyPath:options:context:",_8e,_91,_90,_8c,_8d);
}else{
var _91=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_88,"count")));
objj_msgSend(_88,"addObserver:toObjectsAtIndexes:forKeyPath:options:context:",_8a,_91,_8b,_8c,_8d);
}
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_92,_93,_94,_95){
with(_92){
if(_95.indexOf("@")===0){
var _96=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_95,_94,_92),_97=objj_msgSend(_observationProxies,"indexOfObject:",_96);
_96=objj_msgSend(_observationProxies,"objectAtIndex:",_97);
var _98=_95.indexOf("."),_99=_95.substring(_98+1),_9a=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_92,"count")));
objj_msgSend(_92,"removeObserver:fromObjectsAtIndexes:forKeyPath:",_96,_9a,_99);
}else{
var _9a=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_92,"count")));
objj_msgSend(_92,"removeObserver:fromObjectsAtIndexes:forKeyPath:",_94,_9a,_95);
}
}
}),new objj_method(sel_getUid("insertObject:atIndex:"),function(_9b,_9c,_9d,_9e){
with(_9b){
for(var i=0,_9f=objj_msgSend(_observationProxies,"count");i<_9f;i++){
var _a0=objj_msgSend(_observationProxies,"objectAtIndex:",i),_a1=objj_msgSend(_a0,"keyPath"),_a2=_a1.indexOf(".")===0;
if(_a2){
objj_msgSend(_9b,"willChangeValueForKey:",_a1);
}
objj_msgSend(_9d,"addObserver:forKeyPath:options:context:",_a0,_a1,objj_msgSend(_a0,"options"),objj_msgSend(_a0,"context"));
if(_a2){
objj_msgSend(_9b,"didChangeValueForKey:",_a1);
}
}
objj_msgSendSuper({receiver:_9b,super_class:objj_getClass("_CPObservableArray").super_class},"insertObject:atIndex:",_9d,_9e);
}
}),new objj_method(sel_getUid("removeObjectAtIndex:"),function(_a3,_a4,_a5){
with(_a3){
var _a6=objj_msgSend(_a3,"objectAtIndex:",_a5);
for(var i=0,_a7=objj_msgSend(_observationProxies,"count");i<_a7;i++){
var _a8=objj_msgSend(_observationProxies,"objectAtIndex:",i),_a9=objj_msgSend(_a8,"keyPath"),_aa=_a9.indexOf(".")===0;
if(_aa){
objj_msgSend(_a3,"willChangeValueForKey:",_a9);
}
objj_msgSend(_a6,"removeObserver:forKeyPath:",_a8,_a9);
if(_aa){
objj_msgSend(_a3,"didChangeValueForKey:",_a9);
}
}
objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("_CPObservableArray").super_class},"removeObjectAtIndex:",_a5);
}
}),new objj_method(sel_getUid("objectsAtIndexes:"),function(_ab,_ac,_ad){
with(_ab){
return objj_msgSend(_CPObservableArray,"arrayWithArray:",objj_msgSendSuper({receiver:_ab,super_class:objj_getClass("_CPObservableArray").super_class},"objectsAtIndexes:",_ad));
}
}),new objj_method(sel_getUid("addObject:"),function(_ae,_af,_b0){
with(_ae){
objj_msgSend(_ae,"insertObject:atIndex:",_b0,objj_msgSend(_ae,"count"));
}
}),new objj_method(sel_getUid("removeLastObject"),function(_b1,_b2){
with(_b1){
objj_msgSend(_b1,"removeObjectAtIndex:",objj_msgSend(_b1,"count"));
}
}),new objj_method(sel_getUid("replaceObjectAtIndex:withObject:"),function(_b3,_b4,_b5,_b6){
with(_b3){
var _b7=objj_msgSend(_b3,"objectAtIndex:",_b5);
for(var i=0,_b8=objj_msgSend(_observationProxies,"count");i<_b8;i++){
var _b9=objj_msgSend(_observationProxies,"objectAtIndex:",i),_ba=objj_msgSend(_b9,"keyPath"),_bb=_ba.indexOf(".")===0;
if(_bb){
objj_msgSend(_b3,"willChangeValueForKey:",_ba);
}
objj_msgSend(_b7,"removeObserver:forKeyPath:",_b9,_ba);
objj_msgSend(_b6,"addObserver:forKeyPath:options:context:",_b9,_ba,objj_msgSend(_b9,"options"),objj_msgSend(_b9,"context"));
if(_bb){
objj_msgSend(_b3,"didChangeValueForKey:",_ba);
}
}
objj_msgSendSuper({receiver:_b3,super_class:objj_getClass("_CPObservableArray").super_class},"replaceObjectAtIndex:withObject:",_b5,_b6);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("alloc"),function(_bc,_bd){
with(_bc){
var a=[];
a.isa=_bc;
var _be=class_copyIvarList(_bc),_bf=_be.length;
while(_bf--){
a[ivar_getName(_be[_bf])]=nil;
}
return a;
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPControllerSelectionProxy"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_controller"),new objj_ivar("_keys"),new objj_ivar("_cachedValues"),new objj_ivar("_observationProxies"),new objj_ivar("_observedObjectsByKeyPath")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithController:"),function(_c0,_c1,_c2){
with(_c0){
if(_c0=objj_msgSendSuper({receiver:_c0,super_class:objj_getClass("CPControllerSelectionProxy").super_class},"init")){
_cachedValues=objj_msgSend(CPDictionary,"dictionary");
_observationProxies=objj_msgSend(CPArray,"array");
_controller=_c2;
_observedObjectsByKeyPath={};
}
return _c0;
}
}),new objj_method(sel_getUid("_controllerMarkerForValues:"),function(_c3,_c4,_c5){
with(_c3){
var _c6=objj_msgSend(_c5,"count"),_c7;
if(!_c6){
_c7=CPNoSelectionMarker;
}else{
if(_c6===1){
_c7=objj_msgSend(_c5,"objectAtIndex:",0);
}else{
if(objj_msgSend(_controller,"alwaysUsesMultipleValuesMarker")){
_c7=CPMultipleValuesMarker;
}else{
_c7=objj_msgSend(_c5,"objectAtIndex:",0);
for(var i=0,_c6=objj_msgSend(_c5,"count");i<_c6&&_c7!=CPMultipleValuesMarker;i++){
if(!objj_msgSend(_c7,"isEqual:",objj_msgSend(_c5,"objectAtIndex:",i))){
_c7=CPMultipleValuesMarker;
}
}
}
}
}
if(_c7===nil||_c7.isa&&objj_msgSend(_c7,"isEqual:",objj_msgSend(CPNull,"null"))){
_c7=CPNullMarker;
}
return _c7;
}
}),new objj_method(sel_getUid("valueForKeyPath:"),function(_c8,_c9,_ca){
with(_c8){
var _cb=objj_msgSend(objj_msgSend(_controller,"selectedObjects"),"valueForKeyPath:",_ca),_cc=objj_msgSend(_c8,"_controllerMarkerForValues:",_cb);
objj_msgSend(_cachedValues,"setObject:forKey:",_cc,_ca);
return _cc;
}
}),new objj_method(sel_getUid("valueForKey:"),function(_cd,_ce,_cf){
with(_cd){
return objj_msgSend(_cd,"valueForKeyPath:",_cf);
}
}),new objj_method(sel_getUid("setValue:forKeyPath:"),function(_d0,_d1,_d2,_d3){
with(_d0){
objj_msgSend(objj_msgSend(_controller,"selectedObjects"),"setValue:forKeyPath:",_d2,_d3);
objj_msgSend(_cachedValues,"removeObjectForKey:",_d3);
objj_msgSend(objj_msgSend(CPBinder,"getBinding:forObject:","contentArray",_controller),"_contentArrayDidChange");
}
}),new objj_method(sel_getUid("setValue:forKey:"),function(_d4,_d5,_d6,_d7){
with(_d4){
objj_msgSend(_d4,"setValue:forKeyPath:",_d7,_d7);
}
}),new objj_method(sel_getUid("count"),function(_d8,_d9){
with(_d8){
return objj_msgSend(_cachedValues,"count");
}
}),new objj_method(sel_getUid("keyEnumerator"),function(_da,_db){
with(_da){
return objj_msgSend(_cachedValues,"keyEnumerator");
}
}),new objj_method(sel_getUid("controllerWillChange"),function(_dc,_dd){
with(_dc){
_keys=objj_msgSend(_cachedValues,"allKeys");
if(!_keys){
return;
}
for(var i=0,_de=_keys.length;i<_de;i++){
objj_msgSend(_dc,"willChangeValueForKey:",_keys[i]);
}
objj_msgSend(_cachedValues,"removeAllObjects");
}
}),new objj_method(sel_getUid("controllerDidChange"),function(_df,_e0){
with(_df){
objj_msgSend(_cachedValues,"removeAllObjects");
if(!_keys){
return;
}
for(var i=0,_e1=_keys.length;i<_e1;i++){
objj_msgSend(_df,"didChangeValueForKey:",_keys[i]);
}
_keys=nil;
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_e2,_e3,_e4,_e5,_e6,_e7){
with(_e2){
objj_msgSend(_cachedValues,"removeObjectForKey:",_e4);
}
}),new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"),function(_e8,_e9,_ea,_eb,_ec,_ed){
with(_e8){
var _ee=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_eb,_ea,_e8);
objj_msgSend(_ee,"setNotifyObject:",YES);
objj_msgSend(_observationProxies,"addObject:",_ee);
var _ef=objj_msgSend(_controller,"selectedObjects");
_observedObjectsByKeyPath[_eb]=_ef;
objj_msgSend(_ef,"addObserver:forKeyPath:options:context:",_ee,_eb,_ec,_ed);
}
}),new objj_method(sel_getUid("removeObserver:forKeyPath:"),function(_f0,_f1,_f2,_f3){
with(_f0){
var _f4=objj_msgSend(objj_msgSend(_CPObservationProxy,"alloc"),"initWithKeyPath:observer:object:",_f3,_f2,_f0),_f5=objj_msgSend(_observationProxies,"indexOfObject:",_f4);
var _f6=_observedObjectsByKeyPath[_f3];
objj_msgSend(_f6,"removeObserver:forKeyPath:",objj_msgSend(_observationProxies,"objectAtIndex:",_f5),_f3);
objj_msgSend(_observationProxies,"removeObjectAtIndex:",_f5);
_observedObjects=nil;
}
})]);
p;13;CPOpenPanel.jt;2065;@STATIC;1.0;i;9;CPPanel.jt;2033;
objj_executeFile("CPPanel.j",YES);
var _1=objj_allocateClassPair(CPPanel,"CPOpenPanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_canChooseFiles"),new objj_ivar("_canChooseDirectories"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_directoryURL"),new objj_ivar("_URLs")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("canChooseFiles"),function(_3,_4){
with(_3){
return _canChooseFiles;
}
}),new objj_method(sel_getUid("setCanChooseFiles:"),function(_5,_6,_7){
with(_5){
_canChooseFiles=_7;
}
}),new objj_method(sel_getUid("canChooseDirectories"),function(_8,_9){
with(_8){
return _canChooseDirectories;
}
}),new objj_method(sel_getUid("setCanChooseDirectories:"),function(_a,_b,_c){
with(_a){
_canChooseDirectories=_c;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_d,_e){
with(_d){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_f,_10,_11){
with(_f){
_allowsMultipleSelection=_11;
}
}),new objj_method(sel_getUid("directoryURL"),function(_12,_13){
with(_12){
return _directoryURL;
}
}),new objj_method(sel_getUid("setDirectoryURL:"),function(_14,_15,_16){
with(_14){
_directoryURL=_16;
}
}),new objj_method(sel_getUid("runModal"),function(_17,_18){
with(_17){
if(typeof window["cpOpenPanel"]==="function"){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
var _19={directoryURL:objj_msgSend(_17,"directoryURL"),canChooseFiles:objj_msgSend(_17,"canChooseFiles"),canChooseDirectories:objj_msgSend(_17,"canChooseDirectories"),allowsMultipleSelection:objj_msgSend(_17,"allowsMultipleSelection")};
var _1a=window.cpOpenPanel(_19);
_URLs=_1a.URLs;
return _1a.button;
}
throw "-runModal is unimplemented.";
}
}),new objj_method(sel_getUid("URLs"),function(_1b,_1c){
with(_1b){
return _URLs;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("openPanel"),function(_1d,_1e){
with(_1d){
return objj_msgSend(objj_msgSend(CPOpenPanel,"alloc"),"init");
}
})]);
p;15;CPOutlineView.jt;48286;@STATIC;1.0;i;15;CPTableColumn.ji;13;CPTableView.jt;48228;
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
CPOutlineViewColumnDidMoveNotification="CPOutlineViewColumnDidMoveNotification";
CPOutlineViewColumnDidResizeNotification="CPOutlineViewColumnDidResizeNotification";
CPOutlineViewItemDidCollapseNotification="CPOutlineViewItemDidCollapseNotification";
CPOutlineViewItemDidExpandNotification="CPOutlineViewItemDidExpandNotification";
CPOutlineViewItemWillCollapseNotification="CPOutlineViewItemWillCollapseNotification";
CPOutlineViewItemWillExpandNotification="CPOutlineViewItemWillExpandNotification";
CPOutlineViewSelectionDidChangeNotification="CPOutlineViewSelectionDidChangeNotification";
CPOutlineViewSelectionIsChangingNotification="CPOutlineViewSelectionIsChangingNotification";
var _1=1<<1,_2=1<<2,_3=1<<3,_4=1<<4,_5=1<<5,_6=1<<6,_7=1<<7,_8=1<<8,_9=1<<9,_a=1<<10;
var _b=1<<1,_c=1<<2,_d=1<<3,_e=1<<4,_f=1<<5,_10=1<<6,_11=1<<7,_12=1<<8,_13=1<<9,_14=1<<10,_15=1<<11,_16=1<<12,_17=1<<13,_18=1<<14,_19=1<<15,_1a=1<<16,_1b=1<<17,_1c=1<<18,_1d=1<<19,_1e=1<<20,_1f=1<<21,_20=1<<22,_21=1<<23,_22=1<<24,_23=1<<25;
CPOutlineViewDropOnItemIndex=-1;
var _24=0,_25=1,_26=2;
var _27=objj_allocateClassPair(CPTableView,"CPOutlineView"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineViewDataSource"),new objj_ivar("_outlineViewDelegate"),new objj_ivar("_outlineTableColumn"),new objj_ivar("_indentationPerLevel"),new objj_ivar("_indentationMarkerFollowsDataView"),new objj_ivar("_implementedOutlineViewDataSourceMethods"),new objj_ivar("_implementedOutlineViewDelegateMethods"),new objj_ivar("_rootItemInfo"),new objj_ivar("_itemsForRows"),new objj_ivar("_itemInfosForItems"),new objj_ivar("_disclosureControlPrototype"),new objj_ivar("_disclosureControlsForRows"),new objj_ivar("_disclosureControlData"),new objj_ivar("_disclosureControlQueue"),new objj_ivar("_shouldRetargetItem"),new objj_ivar("_retargetedItem"),new objj_ivar("_shouldRetargetChildIndex"),new objj_ivar("_retargedChildIndex"),new objj_ivar("_dragHoverTimer"),new objj_ivar("_dropItem"),new objj_ivar("_coalesceSelectionNotificationState")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithFrame:"),function(_29,_2a,_2b){
with(_29){
_29=objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"initWithFrame:",_2b);
if(_29){
_selectionHighlightStyle=CPTableViewSelectionHighlightStyleSourceList;
_rootItemInfo={isExpanded:YES,isExpandable:NO,shouldShowOutlineDisclosureControl:NO,level:-1,row:-1,children:[],weight:0};
_itemsForRows=[];
_itemInfosForItems={};
_disclosureControlsForRows=[];
_retargetedItem=nil;
_shouldRetargetItem=NO;
_retargedChildIndex=nil;
_shouldRetargetChildIndex=NO;
objj_msgSend(_29,"setIndentationPerLevel:",16);
objj_msgSend(_29,"setIndentationMarkerFollowsDataView:",YES);
objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"setDataSource:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource,"alloc"),"initWithOutlineView:",_29));
objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPOutlineView").super_class},"setDelegate:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate,"alloc"),"initWithOutlineView:",_29));
objj_msgSend(_29,"setDisclosureControlPrototype:",objj_msgSend(objj_msgSend(CPDisclosureButton,"alloc"),"initWithFrame:",CGRectMake(0,0,10,10)));
}
return _29;
}
}),new objj_method(sel_getUid("setDataSource:"),function(_2c,_2d,_2e){
with(_2c){
if(_outlineViewDataSource===_2e){
return;
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:child:ofItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:child:ofItem:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:isItemExpandable:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:isItemExpandable:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:numberOfChildrenOfItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:numberOfChildrenOfItem:'");
}
if(!objj_msgSend(_2e,"respondsToSelector:",sel_getUid("outlineView:objectValueForTableColumn:byItem:"))){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Data source must implement 'outlineView:objectValueForTableColumn:byItem:'");
}
_outlineViewDataSource=_2e;
_implementedOutlineViewDataSourceMethods=0;
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:setObjectValue:forTableColumn:byItem:"))){
_implementedOutlineViewDataSourceMethods|=_1;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:shouldDeferDisplayingChildrenOfItem:"))){
_implementedOutlineViewDataSourceMethods|=_2;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:acceptDrop:item:childIndex:"))){
_implementedOutlineViewDataSourceMethods|=_3;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:validateDrop:proposedItem:proposedChildIndex:"))){
_implementedOutlineViewDataSourceMethods|=_4;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:validateDrop:proposedRow:proposedDropOperation:"))){
_implementedOutlineViewDataSourceMethods|=_5;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:namesOfPromisedFilesDroppedAtDestination:forDraggedItems:"))){
_implementedOutlineViewDataSourceMethods|=_6;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:itemForPersistentObject:"))){
_implementedOutlineViewDataSourceMethods|=_7;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:persistentObjectForItem:"))){
_implementedOutlineViewDataSourceMethods|=_8;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:writeItems:toPasteboard:"))){
_implementedOutlineViewDataSourceMethods|=_9;
}
if(objj_msgSend(_outlineViewDataSource,"respondsToSelector:",sel_getUid("outlineView:sortDescriptorsDidChange:"))){
_implementedOutlineViewDataSourceMethods|=_a;
}
objj_msgSend(_2c,"reloadData");
}
}),new objj_method(sel_getUid("dataSource"),function(_2f,_30){
with(_2f){
return _outlineViewDataSource;
}
}),new objj_method(sel_getUid("isExpandable:"),function(_31,_32,_33){
with(_31){
if(!_33){
return YES;
}
var _34=_itemInfosForItems[objj_msgSend(_33,"UID")];
if(!_34){
return NO;
}
return _34.isExpandable;
}
}),new objj_method(sel_getUid("_shouldShowOutlineDisclosureControlForItem:"),function(_35,_36,_37){
with(_35){
if(!_37){
return YES;
}
var _38=_itemInfosForItems[objj_msgSend(_37,"UID")];
if(!_38){
return YES;
}
return _38.shouldShowOutlineDisclosureControl;
}
}),new objj_method(sel_getUid("isItemExpanded:"),function(_39,_3a,_3b){
with(_39){
if(!_3b){
return YES;
}
var _3c=_itemInfosForItems[objj_msgSend(_3b,"UID")];
if(!_3c){
return NO;
}
return _3c.isExpanded;
}
}),new objj_method(sel_getUid("expandItem:"),function(_3d,_3e,_3f){
with(_3d){
objj_msgSend(_3d,"expandItem:expandChildren:",_3f,NO);
}
}),new objj_method(sel_getUid("expandItem:expandChildren:"),function(_40,_41,_42,_43){
with(_40){
var _44=null;
if(!_42){
_44=_rootItemInfo;
}else{
_44=_itemInfosForItems[objj_msgSend(_42,"UID")];
}
if(!_44){
return;
}
var _45=NO;
if(!_coalesceSelectionNotificationState){
_45=YES;
_coalesceSelectionNotificationState=_25;
}
if(!_44.isExpanded){
objj_msgSend(_40,"_noteItemWillExpand:",_42);
var _46=objj_msgSend(_40,"numberOfRows");
_44.isExpanded=YES;
objj_msgSend(_40,"_noteItemDidExpand:",_42);
objj_msgSend(_40,"reloadItem:reloadChildren:",_42,YES);
var _47=objj_msgSend(_40,"numberOfRows")-_46;
if(_47){
var _48=objj_msgSend(_40,"selectedRowIndexes"),_49=objj_msgSend(_40,"rowForItem:",_42)+1;
if(objj_msgSend(_48,"intersectsIndexesInRange:",CPMakeRange(_49,_itemsForRows.length))){
objj_msgSend(_40,"_noteSelectionIsChanging");
objj_msgSend(_48,"shiftIndexesStartingAtIndex:by:",_49,_47);
objj_msgSend(_40,"_setSelectedRowIndexes:",_48);
}
}
}
if(_43){
var _4a=_44.children,_4b=_4a.length;
while(_4b--){
objj_msgSend(_40,"expandItem:expandChildren:",_4a[_4b],YES);
}
}
if(_45){
var r=_coalesceSelectionNotificationState;
_coalesceSelectionNotificationState=_24;
if(r===_26){
objj_msgSend(_40,"_noteSelectionDidChange");
}
}
}
}),new objj_method(sel_getUid("collapseItem:"),function(_4c,_4d,_4e){
with(_4c){
if(!_4e){
return;
}
var _4f=_itemInfosForItems[objj_msgSend(_4e,"UID")];
if(!_4f){
return;
}
if(!_4f.isExpanded){
return;
}
_coalesceSelectionNotificationState=_25;
objj_msgSend(_4c,"_noteItemWillCollapse:",_4e);
var _50=objj_msgSend(_4c,"rowForItem:",_4e),_51=objj_msgSend(_4c,"levelForRow:",_50),_52=_50;
while(_52+1<_itemsForRows.length&&objj_msgSend(_4c,"levelForRow:",_52+1)>_51){
_52++;
}
var _53=CPMakeRange(_50+1,_52-_50);
if(_53.length){
var _54=objj_msgSend(_4c,"selectedRowIndexes");
if(objj_msgSend(_54,"intersectsIndexesInRange:",_53)){
objj_msgSend(_4c,"_noteSelectionIsChanging");
objj_msgSend(_54,"removeIndexesInRange:",_53);
objj_msgSend(_4c,"_setSelectedRowIndexes:",_54);
}
if(objj_msgSend(_54,"intersectsIndexesInRange:",CPMakeRange(_52+1,_itemsForRows.length))){
objj_msgSend(_4c,"_noteSelectionIsChanging");
objj_msgSend(_54,"shiftIndexesStartingAtIndex:by:",_52+1,-_53.length);
objj_msgSend(_4c,"_setSelectedRowIndexes:",_54);
}
}
_4f.isExpanded=NO;
objj_msgSend(_4c,"_noteItemDidCollapse:",_4e);
objj_msgSend(_4c,"reloadItem:reloadChildren:",_4e,YES);
var r=_coalesceSelectionNotificationState;
_coalesceSelectionNotificationState=_24;
if(r===_26){
objj_msgSend(_4c,"_noteSelectionDidChange");
}
}
}),new objj_method(sel_getUid("reloadItem:"),function(_55,_56,_57){
with(_55){
objj_msgSend(_55,"reloadItem:reloadChildren:",_57,NO);
}
}),new objj_method(sel_getUid("reloadItem:reloadChildren:"),function(_58,_59,_5a,_5b){
with(_58){
if(!!_5b||!_5a){
_5c(_58,_5a);
}else{
_5d(_58,_5a);
}
objj_msgSendSuper({receiver:_58,super_class:objj_getClass("CPOutlineView").super_class},"reloadData");
}
}),new objj_method(sel_getUid("itemAtRow:"),function(_5e,_5f,_60){
with(_5e){
return _itemsForRows[_60]||nil;
}
}),new objj_method(sel_getUid("rowForItem:"),function(_61,_62,_63){
with(_61){
if(!_63){
return _rootItemInfo.row;
}
var _64=_itemInfosForItems[objj_msgSend(_63,"UID")];
if(!_64){
return CPNotFound;
}
return _64.row;
}
}),new objj_method(sel_getUid("setOutlineTableColumn:"),function(_65,_66,_67){
with(_65){
if(_outlineTableColumn===_67){
return;
}
_outlineTableColumn=_67;
objj_msgSend(_65,"reloadData");
}
}),new objj_method(sel_getUid("outlineTableColumn"),function(_68,_69){
with(_68){
return _outlineTableColumn;
}
}),new objj_method(sel_getUid("levelForItem:"),function(_6a,_6b,_6c){
with(_6a){
if(!_6c){
return _rootItemInfo.level;
}
var _6d=_itemInfosForItems[objj_msgSend(_6c,"UID")];
if(!_6d){
return CPNotFound;
}
return _6d.level;
}
}),new objj_method(sel_getUid("levelForRow:"),function(_6e,_6f,_70){
with(_6e){
return objj_msgSend(_6e,"levelForItem:",objj_msgSend(_6e,"itemAtRow:",_70));
}
}),new objj_method(sel_getUid("setIndentationPerLevel:"),function(_71,_72,_73){
with(_71){
if(_indentationPerLevel===_73){
return;
}
_indentationPerLevel=_73;
objj_msgSend(_71,"reloadData");
}
}),new objj_method(sel_getUid("indentationPerLevel"),function(_74,_75){
with(_74){
return _indentationPerLevel;
}
}),new objj_method(sel_getUid("setIndentationMarkerFollowsDataView:"),function(_76,_77,_78){
with(_76){
if(_indentationMarkerFollowsDataView===_78){
return;
}
_indentationMarkerFollowsDataView=_78;
objj_msgSend(_76,"reloadData");
}
}),new objj_method(sel_getUid("indentationMarkerFollowsDataView"),function(_79,_7a){
with(_79){
return _indentationMarkerFollowsDataView;
}
}),new objj_method(sel_getUid("parentForItem:"),function(_7b,_7c,_7d){
with(_7b){
if(!_7d){
return nil;
}
var _7e=_itemInfosForItems[objj_msgSend(_7d,"UID")];
if(!_7e){
return nil;
}
var _7f=_7e.parent;
if(_7e[objj_msgSend(_7f,"UID")]===_rootItemInfo){
_7f=nil;
}
return _7f;
}
}),new objj_method(sel_getUid("_frameOfOutlineDataViewAtRow:"),function(_80,_81,_82){
with(_80){
var _83=objj_msgSend(objj_msgSend(_80,"tableColumns"),"indexOfObject:",_outlineTableColumn),_84=objj_msgSendSuper({receiver:_80,super_class:objj_getClass("CPOutlineView").super_class},"frameOfDataViewAtColumn:row:",_83,_82),_85=(objj_msgSend(_80,"levelForRow:",_82)+1)*objj_msgSend(_80,"indentationPerLevel");
_84.origin.x+=_85;
_84.size.width-=_85;
return _84;
}
}),new objj_method(sel_getUid("frameOfOutlineDisclosureControlAtRow:"),function(_86,_87,_88){
with(_86){
var _89=objj_msgSend(_86,"itemAtRow:",_88);
if(!objj_msgSend(_86,"isExpandable:",_89)||!objj_msgSend(_86,"_shouldShowOutlineDisclosureControlForItem:",_89)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _8a=objj_msgSend(_86,"_frameOfOutlineDataViewAtRow:",_88),_8b={origin:{x:(_8a.origin.x)-10,y:(_8a.origin.y)},size:{width:10,height:(_8a.size.height)}};
return _8b;
}
}),new objj_method(sel_getUid("_performSelection:forRow:context:"),function(_8c,_8d,_8e,_8f,_90){
with(_8c){
objj_msgSendSuper({receiver:_8c,super_class:objj_getClass("CPOutlineView").super_class},"_performSelection:forRow:context:",_8e,_8f,_90);
var _91=_disclosureControlsForRows[_8f],_92=_8e?"setThemeState:":"unsetThemeState:";
objj_msgSend(_91,"performSelector:withObject:",CPSelectorFromString(_92),CPThemeStateSelected);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_93,_94,_95){
with(_93){
if(_outlineViewDelegate===_95){
return;
}
var _96=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_outlineViewDelegate){
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidMove:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewColumnDidMoveNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidResize:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewColumnDidResizeNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionDidChange:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewSelectionDidChangeNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionIsChanging:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewSelectionIsChangingNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillExpand:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemWillExpandNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidExpand:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemDidExpandNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillCollapse:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemWillCollapseNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidCollapse:"))){
objj_msgSend(_96,"removeObserver:name:object:",_outlineViewDelegate,CPOutlineViewItemDidCollapseNotification,_93);
}
}
_outlineViewDelegate=_95;
_implementedOutlineViewDelegateMethods=0;
var _97=[_b,sel_getUid("outlineView:dataViewForTableColumn:item:"),_c,sel_getUid("outlineView:didClickTableColumn:"),_d,sel_getUid("outlineView:didDragTableColumn:"),_e,sel_getUid("outlineView:heightOfRowByItem:"),_f,sel_getUid("outlineView:isGroupItem:"),_10,sel_getUid("outlineView:mouseDownInHeaderOfTableColumn:"),_11,sel_getUid("outlineView:nextTypeSelectMatchFromItem:toItem:forString:"),_12,sel_getUid("outlineView:selectionIndexesForProposedSelection:"),_13,sel_getUid("outlineView:shouldCollapseItem:"),_14,sel_getUid("outlineView:shouldEditTableColumn:item:"),_15,sel_getUid("outlineView:shouldExpandItem:"),_16,sel_getUid("outlineView:shouldReorderColumn:toColumn:"),_17,sel_getUid("outlineView:shouldSelectItem:"),_18,sel_getUid("outlineView:shouldSelectTableColumn:"),_19,sel_getUid("outlineView:shouldShowOutlineDisclosureControlForItem:"),_1a,sel_getUid("outlineView:shouldShowViewExpansionForTableColumn:item:"),_1b,sel_getUid("outlineView:shouldTrackView:forTableColumn:item:"),_1c,sel_getUid("outlineView:shouldTypeSelectForEvent:withCurrentSearchString:"),_1d,sel_getUid("outlineView:sizeToFitWidthOfColumn:"),_1e,sel_getUid("outlineView:toolTipForView:rect:tableColumn:item:mouseLocation:"),_1f,sel_getUid("outlineView:typeSelectStringForTableColumn:item:"),_20,sel_getUid("outlineView:willDisplayOutlineView:forTableColumn:item:"),_21,sel_getUid("outlineView:willDisplayView:forTableColumn:item:"),_22,sel_getUid("selectionShouldChangeInOutlineView:"),_23,sel_getUid("outlineView:menuForTableColumn:item:")],_98=objj_msgSend(_97,"count");
for(var i=0;i<_98;i+=2){
var _99=_97[i],_9a=_97[i+1];
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",_9a)){
_implementedOutlineViewDelegateMethods|=_99;
}
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidMove:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewColumnDidMove:"),CPOutlineViewColumnDidMoveNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewColumnDidResize:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewColumnDidMove:"),CPOutlineViewColumnDidResizeNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionDidChange:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewSelectionDidChange:"),CPOutlineViewSelectionDidChangeNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewSelectionIsChanging:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewSelectionIsChanging:"),CPOutlineViewSelectionIsChangingNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillExpand:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemWillExpand:"),CPOutlineViewItemWillExpandNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidExpand:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemDidExpand:"),CPOutlineViewItemDidExpandNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemWillCollapse:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemWillCollapse:"),CPOutlineViewItemWillCollapseNotification,_93);
}
if(objj_msgSend(_outlineViewDelegate,"respondsToSelector:",sel_getUid("outlineViewItemDidCollapse:"))){
objj_msgSend(_96,"addObserver:selector:name:object:",_outlineViewDelegate,sel_getUid("outlineViewItemDidCollapse:"),CPOutlineViewItemDidCollapseNotification,_93);
}
}
}),new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"),function(_9b,_9c){
with(_9b){
if(objj_msgSend(objj_msgSend(_9b,"delegate"),"respondsToSelector:",sel_getUid("outlineViewDeleteKeyPressed:"))){
objj_msgSend(objj_msgSend(_9b,"delegate"),"outlineViewDeleteKeyPressed:",_9b);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("delegate"),function(_9d,_9e){
with(_9d){
return _outlineViewDelegate;
}
}),new objj_method(sel_getUid("setDisclosureControlPrototype:"),function(_9f,_a0,_a1){
with(_9f){
_disclosureControlPrototype=_a1;
_disclosureControlData=nil;
_disclosureControlQueue=[];
objj_msgSend(_9f,"reloadData");
}
}),new objj_method(sel_getUid("reloadData"),function(_a2,_a3){
with(_a2){
objj_msgSend(_a2,"reloadItem:reloadChildren:",nil,YES);
}
}),new objj_method(sel_getUid("addTableColumn:"),function(_a4,_a5,_a6){
with(_a4){
objj_msgSendSuper({receiver:_a4,super_class:objj_getClass("CPOutlineView").super_class},"addTableColumn:",_a6);
if(objj_msgSend(_a4,"numberOfColumns")===1){
_outlineTableColumn=_a6;
}
}
}),new objj_method(sel_getUid("removeTableColumn:"),function(_a7,_a8,_a9){
with(_a7){
if(_a9===objj_msgSend(_a7,"outlineTableColumn")){
CPLog("CPOutlineView cannot remove outlineTableColumn with removeTableColumn:. User setOutlineTableColumn: instead.");
}else{
objj_msgSendSuper({receiver:_a7,super_class:objj_getClass("CPOutlineView").super_class},"removeTableColumn:",_a9);
}
}
}),new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"),function(_aa,_ab,_ac,_ad){
with(_aa){
var _ae=objj_msgSend(_aa,"tableColumns")[_ac];
if(_ae===_outlineTableColumn){
return objj_msgSend(_aa,"_frameOfOutlineDataViewAtRow:",_ad);
}
return objj_msgSendSuper({receiver:_aa,super_class:objj_getClass("CPOutlineView").super_class},"frameOfDataViewAtColumn:row:",_ac,_ad);
}
}),new objj_method(sel_getUid("_dragViewForColumn:event:offset:"),function(_af,_b0,_b1,_b2,_b3){
with(_af){
var _b4=objj_msgSend(objj_msgSend(_CPColumnDragView,"alloc"),"initWithLineColor:",objj_msgSend(_af,"gridColor")),_b5=objj_msgSend(objj_msgSend(_af,"tableColumns"),"objectAtIndex:",_b1),_b6={origin:{x:0,y:0},size:{width:objj_msgSend(_b5,"width"),height:(objj_msgSend(_af,"exposedRect").size.height)+23}},_b7=objj_msgSend(_af,"rectOfColumn:",_b1),_b8=objj_msgSend(_b5,"headerView"),row=objj_msgSend(_exposedRows,"firstIndex");
while(row!==CPNotFound){
var _b9=objj_msgSend(_af,"_newDataViewForRow:tableColumn:",row,_b5),_ba=objj_msgSend(_af,"frameOfDataViewAtColumn:row:",_b1,row);
_ba.origin.x=0;
_ba.origin.y=((_ba.origin.y)-(objj_msgSend(_af,"exposedRect").origin.y))+23;
objj_msgSend(_b9,"setFrame:",_ba);
objj_msgSend(_b9,"setObjectValue:",objj_msgSend(_af,"_objectValueForTableColumn:row:",_b5,row));
if(_b5===_outlineTableColumn){
var _bb=(objj_msgSend(_af,"levelForRow:",row)+1)*objj_msgSend(_af,"indentationPerLevel");
_ba.origin.x+=_bb;
_ba.size.width-=_bb;
objj_msgSend(_b9,"setFrame:",_ba);
}
objj_msgSend(_b4,"addSubview:",_b9);
row=objj_msgSend(_exposedRows,"indexGreaterThanIndex:",row);
}
var _bc=objj_msgSend(_b8,"frame");
_bc.origin={x:0,y:0};
var _bd=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",_bc);
objj_msgSend(_bd,"setStringValue:",objj_msgSend(_b8,"stringValue"));
objj_msgSend(_bd,"setThemeState:",objj_msgSend(_b8,"themeState"));
objj_msgSend(_b4,"addSubview:",_bd);
objj_msgSend(_b4,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_b4,"setAlphaValue:",0.7);
objj_msgSend(_b4,"setFrame:",_b6);
return _b4;
}
}),new objj_method(sel_getUid("setDropItem:dropChildIndex:"),function(_be,_bf,_c0,_c1){
with(_be){
if(_dropItem!==_c0&&_c1<0&&objj_msgSend(_be,"isExpandable:",_c0)&&!objj_msgSend(_be,"isItemExpanded:",_c0)){
if(_dragHoverTimer){
objj_msgSend(_dragHoverTimer,"invalidate");
}
var _c2=function(){
if(_dropItem){
objj_msgSend(_dropOperationFeedbackView,"blink");
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.3,objj_msgSend(_be,"expandItem:",_dropItem),NO);
}
};
_dragHoverTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.8,_c2,NO);
}
if(_c1>=0){
objj_msgSend(_dragHoverTimer,"invalidate");
_dragHoverTimer=nil;
}
_dropItem=_c0;
_retargetedItem=_c0;
_shouldRetargetItem=YES;
_retargedChildIndex=_c1;
_shouldRetargetChildIndex=YES;
var _c3=(_retargetedItem!==nil)?_itemInfosForItems[objj_msgSend(_retargetedItem,"UID")]:_rootItemInfo;
if(_retargedChildIndex===objj_msgSend(_c3.children,"count")){
var _c4=objj_msgSend(_c3.children,"lastObject");
_retargetedDropRow=objj_msgSend(_be,"rowForItem:",_c4)+1;
}else{
var _c4=(_retargedChildIndex!==CPOutlineViewDropOnItemIndex)?_c3.children[_retargedChildIndex]:_retargetedItem;
_retargetedDropRow=objj_msgSend(_be,"rowForItem:",_c4);
}
}
}),new objj_method(sel_getUid("_draggingEnded"),function(_c5,_c6){
with(_c5){
objj_msgSendSuper({receiver:_c5,super_class:objj_getClass("CPOutlineView").super_class},"_draggingEnded");
_dropItem=nil;
objj_msgSend(_dragHoverTimer,"invalidate");
_dragHoverTimer=nil;
}
}),new objj_method(sel_getUid("_parentItemForUpperRow:andLowerRow:atMouseOffset:"),function(_c7,_c8,_c9,_ca,_cb){
with(_c7){
if(_shouldRetargetItem){
return _retargetedItem;
}
var _cc=objj_msgSend(_c7,"levelForRow:",_ca),_cd=objj_msgSend(_c7,"itemAtRow:",_c9),_ce=objj_msgSend(_c7,"levelForItem:",_cd);
while(_ce>_cc){
_ce=objj_msgSend(_c7,"levelForItem:",_cd);
if(_cb.x>(_ce+1)*objj_msgSend(_c7,"indentationPerLevel")){
return objj_msgSend(_c7,"parentForItem:",_cd);
}
_cd=objj_msgSend(_c7,"parentForItem:",_cd);
}
return objj_msgSend(_c7,"parentForItem:",objj_msgSend(_c7,"itemAtRow:",_ca));
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"),function(_cf,_d0,_d1,_d2,_d3){
with(_cf){
var _d4=objj_msgSendSuper({receiver:_cf,super_class:objj_getClass("CPOutlineView").super_class},"_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:",_d1,_d2,_d3),_d5=objj_msgSend(_cf,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_d1,_d2,_d3),_d6=objj_msgSend(_cf,"levelForItem:",_d5);
_d4.origin.x=(_d6+1)*objj_msgSend(_cf,"indentationPerLevel");
_d4.size.width-=_d4.origin.x;
return _d4;
}
}),new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"),function(_d7,_d8,_d9,_da){
with(_d7){
var _db=[],_dc=[];
objj_msgSend(_d9,"getIndexes:maxCount:inIndexRange:",_db,-1,nil);
objj_msgSend(_da,"getIndexes:maxCount:inIndexRange:",_dc,-1,nil);
var _dd=0,_de=_dc.length;
for(;_dd<_de;++_dd){
var _df=_dc[_dd],_e0=_tableColumns[_df],_e1=objj_msgSend(_e0,"UID"),_e2=_dataViewsForTableColumns[_e1],_e3=0,_e4=_db.length;
for(;_e3<_e4;++_e3){
var row=_db[_e3],_e5=_e2[row],_e6=objj_msgSend(_d7,"frameOfDataViewAtColumn:row:",_df,row);
objj_msgSend(_e5,"setFrame:",_e6);
if(_e0===_outlineTableColumn){
var _e7=_disclosureControlsForRows[row],_e8=objj_msgSend(_d7,"frameOfOutlineDisclosureControlAtRow:",row);
objj_msgSend(_e7,"setFrame:",_e8);
}
}
}
}
}),new objj_method(sel_getUid("_loadDataViewsInRows:columns:"),function(_e9,_ea,_eb,_ec){
with(_e9){
objj_msgSendSuper({receiver:_e9,super_class:objj_getClass("CPOutlineView").super_class},"_loadDataViewsInRows:columns:",_eb,_ec);
var _ed=objj_msgSend(objj_msgSend(_e9,"tableColumns"),"indexOfObjectIdenticalTo:",objj_msgSend(_e9,"outlineTableColumn"));
if(!objj_msgSend(_ec,"containsIndex:",_ed)||objj_msgSend(_e9,"outlineTableColumn")===_draggedColumn){
return;
}
var _ee=[];
objj_msgSend(_eb,"getIndexes:maxCount:inIndexRange:",_ee,-1,nil);
var _ef=0,_f0=_ee.length;
for(;_ef<_f0;++_ef){
var row=_ee[_ef],_f1=_itemsForRows[row],_f2=objj_msgSend(_e9,"isExpandable:",_f1);
if(!_f2){
continue;
}
var _f3=objj_msgSend(_e9,"frameOfOutlineDisclosureControlAtRow:",row);
if((_f3.size.width<=0||_f3.size.height<=0)){
continue;
}
var _f4=objj_msgSend(_e9,"_dequeueDisclosureControl");
_disclosureControlsForRows[row]=_f4;
objj_msgSend(_f4,"setState:",objj_msgSend(_e9,"isItemExpanded:",_f1)?CPOnState:CPOffState);
var _f5=objj_msgSend(_e9,"isRowSelected:",row)?"setThemeState:":"unsetThemeState:";
objj_msgSend(_f4,"performSelector:withObject:",CPSelectorFromString(_f5),CPThemeStateSelected);
objj_msgSend(_f4,"setFrame:",_f3);
objj_msgSend(_e9,"addSubview:",_f4);
}
}
}),new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"),function(_f6,_f7,_f8,_f9){
with(_f6){
objj_msgSendSuper({receiver:_f6,super_class:objj_getClass("CPOutlineView").super_class},"_unloadDataViewsInRows:columns:",_f8,_f9);
var _fa=objj_msgSend(objj_msgSend(_f6,"tableColumns"),"indexOfObjectIdenticalTo:",objj_msgSend(_f6,"outlineTableColumn"));
if(!objj_msgSend(_f9,"containsIndex:",_fa)){
return;
}
var _fb=[];
objj_msgSend(_f8,"getIndexes:maxCount:inIndexRange:",_fb,-1,nil);
var _fc=0,_fd=_fb.length;
for(;_fc<_fd;++_fc){
var row=_fb[_fc],_fe=_disclosureControlsForRows[row];
if(!_fe){
continue;
}
objj_msgSend(_fe,"removeFromSuperview");
objj_msgSend(_f6,"_enqueueDisclosureControl:",_fe);
_disclosureControlsForRows[row]=nil;
}
}
}),new objj_method(sel_getUid("_toggleFromDisclosureControl:"),function(_ff,_100,_101){
with(_ff){
var _102=objj_msgSend(_101,"frame"),item=objj_msgSend(_ff,"itemAtRow:",objj_msgSend(_ff,"rowAtPoint:",{x:(_102.origin.x),y:(_102.origin.y+(_102.size.height)/2)}));
if(objj_msgSend(_ff,"isItemExpanded:",item)){
objj_msgSend(_ff,"collapseItem:",item);
}else{
objj_msgSend(_ff,"expandItem:expandChildren:",item,(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"modifierFlags")&CPAlternateKeyMask));
}
}
}),new objj_method(sel_getUid("_enqueueDisclosureControl:"),function(self,_103,_104){
with(self){
_disclosureControlQueue.push(_104);
}
}),new objj_method(sel_getUid("_dequeueDisclosureControl"),function(self,_105){
with(self){
if(_disclosureControlQueue.length){
return _disclosureControlQueue.pop();
}
if(!_disclosureControlData){
if(!_disclosureControlPrototype){
return nil;
}else{
_disclosureControlData=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_disclosureControlPrototype);
}
}
var _106=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_disclosureControlData);
objj_msgSend(_106,"setTarget:",self);
objj_msgSend(_106,"setAction:",sel_getUid("_toggleFromDisclosureControl:"));
return _106;
}
}),new objj_method(sel_getUid("_noteSelectionIsChanging"),function(self,_107){
with(self){
if(!_coalesceSelectionNotificationState||_coalesceSelectionNotificationState===_25){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewSelectionIsChangingNotification,self,nil);
}
if(_coalesceSelectionNotificationState===_25){
_coalesceSelectionNotificationState=_26;
}
}
}),new objj_method(sel_getUid("_noteSelectionDidChange"),function(self,_108){
with(self){
if(!_coalesceSelectionNotificationState){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewSelectionDidChangeNotification,self,nil);
}
if(_coalesceSelectionNotificationState===_25){
_coalesceSelectionNotificationState=_26;
}
}
}),new objj_method(sel_getUid("_noteItemWillExpand:"),function(self,_109,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemWillExpandNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemDidExpand:"),function(self,_10a,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemDidExpandNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemWillCollapse:"),function(self,_10b,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemWillCollapseNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("_noteItemDidCollapse:"),function(self,_10c,item){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPOutlineViewItemDidCollapseNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",item,"CPObject"));
}
}),new objj_method(sel_getUid("keyDown:"),function(self,_10d,_10e){
with(self){
var _10f=objj_msgSend(_10e,"charactersIgnoringModifiers"),_110=objj_msgSend(_10e,"modifierFlags");
if(_10f!==CPRightArrowFunctionKey&&_10f!==CPLeftArrowFunctionKey){
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"keyDown:",_10e);
}
var rows=objj_msgSend(self,"selectedRowIndexes"),_111=[],_112=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_111,-1,nil);
var i=0,c=objj_msgSend(_111,"count");
for(;i<c;i++){
_112.push(objj_msgSend(self,"itemAtRow:",_111[i]));
}
if(_10f===CPRightArrowFunctionKey){
for(var i=0;i<c;i++){
objj_msgSend(self,"expandItem:",_112[i]);
}
}else{
if(_10f===CPLeftArrowFunctionKey){
if(c==1){
var _113=_112[0];
if(!objj_msgSend(self,"isItemExpanded:",_113)){
var _114=objj_msgSend(self,"parentForItem:",_113),_115=_114&&(!((self)._implementedOutlineViewDelegateMethods&_22)||objj_msgSend((self)._outlineViewDelegate,"selectionShouldChangeInOutlineView:",(self)))&&(!((self)._implementedOutlineViewDelegateMethods&_17)||objj_msgSend((self)._outlineViewDelegate,"outlineView:shouldSelectItem:",(self),(_114)));
if(_115){
var _116=objj_msgSend(self,"rowForItem:",_114);
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_116),NO);
objj_msgSend(self,"scrollRowToVisible:",_116);
return;
}
}
}
for(var i=0;i<c;i++){
objj_msgSend(self,"collapseItem:",_112[i]);
}
}
}
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"keyDown:",_10e);
}
})]);
var _5d=function(_117,_118){
if(!_118){
return;
}
with(_117){
var _119=_itemInfosForItems,_11a=_outlineViewDataSource,_11b=objj_msgSend(_118,"UID"),_11c=_119[_11b];
if(!_11c){
return [];
}
var _11d=_11c.parent,_11e=_11d?_119[objj_msgSend(_11d,"UID")]:_rootItemInfo,_11f=_11e.children,_120=objj_msgSend(_11f,"indexOfObjectIdenticalTo:",_118),_121=objj_msgSend(_11a,"outlineView:child:ofItem:",_117,_120,_11d);
if(_118!==_121){
_119[objj_msgSend(_118,"UID")]=nil;
_119[objj_msgSend(_121,"UID")]=_11c;
_11f[_120]=_121;
_itemsForRows[_11c.row]=_121;
}
_11c.isExpandable=objj_msgSend(_11a,"outlineView:isItemExpandable:",_117,_121);
_11c.isExpanded=_11c.isExpandable&&_11c.isExpanded;
_11c.shouldShowOutlineDisclosureControl=!(_implementedOutlineViewDelegateMethods&_19)||objj_msgSend(_outlineViewDelegate,"outlineView:shouldShowOutlineDisclosureControlForItem:",self,_121);
}
};
var _5c=function(_122,_123,_124){
with(_122){
var _125=_itemInfosForItems,_126=_outlineViewDataSource;
if(!_123){
var _127=_rootItemInfo;
}else{
var _128=objj_msgSend(_123,"UID"),_127=_125[_128];
if(!_127){
return [];
}
_127.isExpandable=objj_msgSend(_126,"outlineView:isItemExpandable:",_122,_123);
_127.shouldShowOutlineDisclosureControl=!(_implementedOutlineViewDelegateMethods&_19)||objj_msgSend(_outlineViewDelegate,"outlineView:shouldShowOutlineDisclosureControlForItem:",self,_123);
if(!_127.isExpandable&&_127.isExpanded){
_127.isExpanded=NO;
_127.children=[];
}
}
var _129=_127.weight,_12a=_123?[_123]:[];
if(_127.isExpanded&&(!(_implementedOutlineViewDataSourceMethods&_2)||!objj_msgSend(_126,"outlineView:shouldDeferDisplayingChildrenOfItem:",_122,_123))){
var _12b=0,_12c=objj_msgSend(_126,"outlineView:numberOfChildrenOfItem:",_122,_123),_12d=_127.level+1;
_127.children=[];
for(;_12b<_12c;++_12b){
var _12e=objj_msgSend(_126,"outlineView:child:ofItem:",_122,_12b,_123),_12f=_125[objj_msgSend(_12e,"UID")];
if(!_12f){
_12f={isExpanded:NO,isExpandable:NO,shouldShowOutlineDisclosureControl:YES,children:[],weight:1};
_125[objj_msgSend(_12e,"UID")]=_12f;
}
_127.children[_12b]=_12e;
var _130=_5c(_122,_12e,YES);
_12f.parent=_123;
_12f.level=_12d;
_12a=_12a.concat(_130);
}
}
_127.weight=_12a.length;
if(!_124){
var _12b=MAX(_127.row,0),_131=_itemsForRows;
_12a.unshift(_12b,_129);
_131.splice.apply(_131,_12a);
var _12c=_131.length;
for(;_12b<_12c;++_12b){
_125[objj_msgSend(_131[_12b],"UID")].row=_12b;
}
var _132=_127.weight-_129;
if(_132!==0){
var _133=_127.parent;
while(_133){
var _134=_125[objj_msgSend(_133,"UID")];
_134.weight+=_132;
_133=_134.parent;
}
if(_123){
_rootItemInfo.weight+=_132;
}
}
}
}
return _12a;
};
var _27=objj_allocateClassPair(CPObject,"_CPOutlineViewTableViewDataSource"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineView")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithOutlineView:"),function(self,_135,_136){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPOutlineViewTableViewDataSource").super_class},"init");
if(self){
_outlineView=_136;
}
return self;
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(self,_137,_138){
with(self){
return _outlineView._itemsForRows.length;
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(self,_139,_13a,_13b,aRow){
with(self){
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:objectValueForTableColumn:byItem:",_outlineView,_13b,_outlineView._itemsForRows[aRow]);
}
}),new objj_method(sel_getUid("tableView:setObjectValue:forTableColumn:row:"),function(self,_13c,_13d,_13e,_13f,aRow){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_1)){
return;
}
objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:setObjectValue:forTableColumn:byItem:",_outlineView,_13e,_13f,_outlineView._itemsForRows[aRow]);
}
}),new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"),function(self,_140,_141,_142,_143){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_9)){
return NO;
}
var _144=[],_145=objj_msgSend(_142,"firstIndex");
while(_145!==CPNotFound){
objj_msgSend(_144,"addObject:",objj_msgSend(_outlineView,"itemAtRow:",_145));
_145=objj_msgSend(_142,"indexGreaterThanIndex:",_145);
}
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:writeItems:toPasteboard:",_outlineView,_144,_143);
}
}),new objj_method(sel_getUid("_childIndexForDropOperation:row:offset:"),function(self,_146,_147,_148,_149){
with(self){
if(_outlineView._shouldRetargetChildIndex){
return _outlineView._retargedChildIndex;
}
var _14a=CPNotFound;
if(_147===CPTableViewDropAbove){
var _14b=objj_msgSend(_outlineView,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_148-1,_148,_149),_14c=(_14b!==nil)?_outlineView._itemInfosForItems[objj_msgSend(_14b,"UID")]:_outlineView._rootItemInfo,_14d=_14c.children;
_14a=objj_msgSend(_14d,"indexOfObject:",objj_msgSend(_outlineView,"itemAtRow:",_148));
if(_14a===CPNotFound){
_14a=_14d.length;
}
}else{
if(_147===CPTableViewDropOn){
_14a=-1;
}
}
return _14a;
}
}),new objj_method(sel_getUid("_parentItemForDropOperation:row:offset:"),function(self,_14e,_14f,_150,_151){
with(self){
if(_14f===CPTableViewDropAbove){
return objj_msgSend(_outlineView,"_parentItemForUpperRow:andLowerRow:atMouseOffset:",_150-1,_150,_151);
}
return objj_msgSend(_outlineView,"itemAtRow:",_150);
}
}),new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"),function(self,_152,_153,_154,_155,_156){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_4)){
return CPDragOperationNone;
}
_outlineView._retargetedItem=nil;
_outlineView._shouldRetargetItem=NO;
_outlineView._retargedChildIndex=nil;
_outlineView._shouldRetargetChildIndex=NO;
var _157=objj_msgSend(_outlineView,"convertPoint:fromView:",objj_msgSend(_154,"draggingLocation"),nil),_158=objj_msgSend(self,"_parentItemForDropOperation:row:offset:",_156,_155,_157),_159=objj_msgSend(self,"_childIndexForDropOperation:row:offset:",_156,_155,_157);
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:validateDrop:proposedItem:proposedChildIndex:",_outlineView,_154,_158,_159);
}
}),new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"),function(self,_15a,_15b,_15c,_15d,_15e){
with(self){
if(!(_outlineView._implementedOutlineViewDataSourceMethods&_3)){
return NO;
}
var _15f=objj_msgSend(_outlineView,"convertPoint:fromView:",objj_msgSend(_15c,"draggingLocation"),nil),_160=objj_msgSend(self,"_parentItemForDropOperation:row:offset:",_15e,_15d,_15f),_161=objj_msgSend(self,"_childIndexForDropOperation:row:offset:",_15e,_15d,_15f);
_outlineView._retargetedItem=nil;
_outlineView._shouldRetargetItem=NO;
_outlineView._retargedChildIndex=nil;
_outlineView._shouldRetargetChildIndex=NO;
return objj_msgSend(_outlineView._outlineViewDataSource,"outlineView:acceptDrop:item:childIndex:",_outlineView,_15c,_160,_161);
}
}),new objj_method(sel_getUid("tableView:sortDescriptorsDidChange:"),function(self,_162,_163,_164){
with(self){
if((_outlineView._implementedOutlineViewDataSourceMethods&_a)){
objj_msgSend(objj_msgSend(_outlineView,"dataSource"),"outlineView:sortDescriptorsDidChange:",_outlineView,_164);
}
}
})]);
var _27=objj_allocateClassPair(CPObject,"_CPOutlineViewTableViewDelegate"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_outlineView")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithOutlineView:"),function(self,_165,_166){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPOutlineViewTableViewDelegate").super_class},"init");
if(self){
_outlineView=_166;
}
return self;
}
}),new objj_method(sel_getUid("tableView:dataViewForTableColumn:row:"),function(self,_167,_168,_169,_16a){
with(self){
var _16b=nil;
if((_outlineView._implementedOutlineViewDelegateMethods&_b)){
_16b=objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:dataViewForTableColumn:item:",_outlineView,_169,objj_msgSend(_outlineView,"itemAtRow:",_16a));
}
if(!_16b){
_16b=objj_msgSend(_169,"dataViewForRow:",_16a);
}
return _16b;
}
}),new objj_method(sel_getUid("tableView:shouldSelectRow:"),function(self,_16c,_16d,_16e){
with(self){
return (!((_outlineView)._implementedOutlineViewDelegateMethods&_17)||objj_msgSend((_outlineView)._outlineViewDelegate,"outlineView:shouldSelectItem:",(_outlineView),(objj_msgSend(_outlineView,"itemAtRow:",_16e))));
}
}),new objj_method(sel_getUid("selectionShouldChangeInTableView:"),function(self,_16f,_170){
with(self){
return (!((_outlineView)._implementedOutlineViewDelegateMethods&_22)||objj_msgSend((_outlineView)._outlineViewDelegate,"selectionShouldChangeInOutlineView:",(_outlineView)));
}
}),new objj_method(sel_getUid("tableView:shouldEditTableColumn:row:"),function(self,_171,_172,_173,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_14)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:shouldEditTableColumn:item:",_outlineView,_173,objj_msgSend(_outlineView,"itemAtRow:",aRow));
}
return NO;
}
}),new objj_method(sel_getUid("tableView:heightOfRow:"),function(self,_174,_175,_176){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_e)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:heightOfRowByItem:",_outlineView,objj_msgSend(_outlineView,"itemAtRow:",_176));
}
return objj_msgSend(_175,"rowHeight");
}
}),new objj_method(sel_getUid("tableView:willDisplayView:forTableColumn:row:"),function(self,_177,_178,_179,_17a,_17b){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_21)){
var item=objj_msgSend(_outlineView,"itemAtRow:",_17b);
objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:willDisplayView:forTableColumn:item:",_outlineView,_179,_17a,item);
}
}
}),new objj_method(sel_getUid("tableView:isGroupRow:"),function(self,_17c,_17d,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_f)){
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:isGroupItem:",_outlineView,objj_msgSend(_outlineView,"itemAtRow:",aRow));
}
return NO;
}
}),new objj_method(sel_getUid("tableView:menuForTableColumn:row:"),function(self,_17e,_17f,_180,aRow){
with(self){
if((_outlineView._implementedOutlineViewDelegateMethods&_23)){
var item=objj_msgSend(_outlineView,"itemAtRow:",aRow);
return objj_msgSend(_outlineView._outlineViewDelegate,"outlineView:menuForTableColumn:item:",_outlineView,_180,item);
}
return objj_msgSend(_outlineView,"menu")||objj_msgSend(objj_msgSend(_outlineView,"class"),"defaultMenu");
}
})]);
var _27=objj_allocateClassPair(CPButton,"CPDisclosureButton"),_28=_27.isa;
class_addIvars(_27,[new objj_ivar("_angle")]);
objj_registerClassPair(_27);
class_addMethods(_27,[new objj_method(sel_getUid("initWithFrame:"),function(self,_181,_182){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPDisclosureButton").super_class},"initWithFrame:",_182);
if(self){
objj_msgSend(self,"setBordered:",NO);
}
return self;
}
}),new objj_method(sel_getUid("setState:"),function(self,_183,_184){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPDisclosureButton").super_class},"setState:",_184);
if(objj_msgSend(self,"state")===CPOnState){
_angle=0;
}else{
_angle=-PI_2;
}
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_185,_186){
with(self){
var _187=objj_msgSend(self,"bounds"),_188=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_189=(_187.size.width),_18a=(_187.size.height);
CGContextBeginPath(_188);
if(_angle){
var _18b={x:FLOOR(_189/2),y:FLOOR(_18a/2)};
CGContextTranslateCTM(_188,_18b.x,_18b.y);
CGContextRotateCTM(_188,_angle);
CGContextTranslateCTM(_188,-_18b.x,-_18b.y);
}
CGContextTranslateCTM(_188,FLOOR((_189-9)/2),FLOOR((_18a-8)/2));
CGContextMoveToPoint(_188,0,0);
CGContextAddLineToPoint(_188,9,0);
CGContextAddLineToPoint(_188,4.5,8);
CGContextAddLineToPoint(_188,0,0);
CGContextClosePath(_188);
CGContextSetFillColor(_188,_18c(objj_msgSend(self,"hasThemeState:",CPThemeStateSelected),objj_msgSend(self,"hasThemeState:",CPThemeStateHighlighted)));
CGContextFillPath(_188);
CGContextBeginPath(_188);
CGContextMoveToPoint(_188,0,0);
CGContextAddLineToPoint(_188,4.5,8);
if(_angle===0){
CGContextAddLineToPoint(_188,9,0);
}
CGContextSetStrokeColor(_188,objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1,0.7));
CGContextStrokePath(_188);
}
})]);
var _18d="CPOutlineViewIndentationPerLevelKey",_18e="CPOutlineViewOutlineTableColumnKey",_18f="CPOutlineViewDataSourceKey",_190="CPOutlineViewDelegateKey";
var _27=objj_getClass("CPOutlineView");
if(!_27){
throw new SyntaxError("*** Could not find definition for class \"CPOutlineView\"");
}
var _28=_27.isa;
class_addMethods(_27,[new objj_method(sel_getUid("initWithCoder:"),function(self,_191,_192){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"initWithCoder:",_192);
if(self){
_rootItemInfo={isExpanded:YES,isExpandable:NO,level:-1,row:-1,children:[],weight:0};
_itemsForRows=[];
_itemInfosForItems={};
_disclosureControlsForRows=[];
objj_msgSend(self,"setIndentationMarkerFollowsDataView:",YES);
objj_msgSend(self,"setDisclosureControlPrototype:",objj_msgSend(objj_msgSend(CPDisclosureButton,"alloc"),"initWithFrame:",CGRectMake(0,0,10,10)));
_outlineTableColumn=objj_msgSend(_192,"decodeObjectForKey:",_18e);
_indentationPerLevel=objj_msgSend(_192,"decodeFloatForKey:",_18d);
_outlineViewDataSource=objj_msgSend(_192,"decodeObjectForKey:",_18f);
_outlineViewDelegate=objj_msgSend(_192,"decodeObjectForKey:",_190);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"setDataSource:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource,"alloc"),"initWithOutlineView:",self));
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"setDelegate:",objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate,"alloc"),"initWithOutlineView:",self));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_193,_194){
with(self){
var _195=_delegate,_196=_dataSource;
_delegate=nil;
_dataSource=nil;
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPOutlineView").super_class},"encodeWithCoder:",_194);
_delegate=_195;
_dataSource=_196;
objj_msgSend(_194,"encodeObject:forKey:",_outlineTableColumn,_18e);
objj_msgSend(_194,"encodeFloat:forKey:",_indentationPerLevel,_18d);
objj_msgSend(_194,"encodeObject:forKey:",_outlineViewDataSource,_18f);
objj_msgSend(_194,"encodeObject:forKey:",_outlineViewDelegate,_190);
}
})]);
var _18c=function(_197,_198){
return _197?(_198?objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.9,1):objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",1,1)):(_198?objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.4,1):objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.5,1));
};
p;9;CPPanel.jt;1172;@STATIC;1.0;i;10;CPWindow.jt;1138;
objj_executeFile("CPWindow.j",YES);
CPOKButton=1;
CPCancelButton=0;
CPDocModalWindowMask=1<<6;
var _1=objj_allocateClassPair(CPWindow,"CPPanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_becomesKeyOnlyIfNeeded"),new objj_ivar("_worksWhenModal")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isFloatingPanel"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"level")==CPFloatingWindowLevel;
}
}),new objj_method(sel_getUid("setFloatingPanel:"),function(_5,_6,_7){
with(_5){
objj_msgSend(_5,"setLevel:",_7?CPFloatingWindowLevel:CPNormalWindowLevel);
}
}),new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"),function(_8,_9){
with(_8){
return _becomesKeyOnlyIfNeeded;
}
}),new objj_method(sel_getUid("setBecomesKeyOnlyIfNeeded:"),function(_a,_b,_c){
with(_a){
_becomesKeyOnlyIfNeeded=_c;
}
}),new objj_method(sel_getUid("worksWhenModal"),function(_d,_e){
with(_d){
return _worksWhenModal;
}
}),new objj_method(sel_getUid("setWorksWhenModal:"),function(_f,_10,_11){
with(_f){
_worksWhenModal=_11;
}
}),new objj_method(sel_getUid("canBecomeMainWindow"),function(_12,_13){
with(_12){
return NO;
}
})]);
p;14;CPPasteboard.jt;8393;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;40;Foundation/CPPropertyListSerialization.jt;8248;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPPropertyListSerialization.j",NO);
CPGeneralPboard="CPGeneralPboard";
CPFontPboard="CPFontPboard";
CPRulerPboard="CPRulerPboard";
CPFindPboard="CPFindPboard";
CPDragPboard="CPDragPboard";
CPColorPboardType="CPColorPboardType";
CPFilenamesPboardType="CPFilenamesPboardType";
CPFontPboardType="CPFontPboardType";
CPHTMLPboardType="CPHTMLPboardType";
CPStringPboardType="CPStringPboardType";
CPURLPboardType="CPURLPboardType";
CPImagesPboardType="CPImagesPboardType";
CPVideosPboardType="CPVideosPboardType";
UTF8PboardType="public.utf8-plain-text";
CPImagePboardType="CPImagePboardType";
var _1=nil,_2=NO;
var _3=objj_allocateClassPair(CPObject,"CPPasteboard"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_types"),new objj_ivar("_owners"),new objj_ivar("_provided"),new objj_ivar("_changeCount"),new objj_ivar("_stateUID"),new objj_ivar("_nativePasteboard")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("_initWithName:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPPasteboard").super_class},"init");
if(_5){
_name=_7;
_types=[];
_owners=objj_msgSend(CPDictionary,"dictionary");
_provided=objj_msgSend(CPDictionary,"dictionary");
_changeCount=0;
if(_2){
_nativePasteboard=window.cpPasteboardWithName(_7);
objj_msgSend(_5,"_synchronizePasteboard");
}
}
return _5;
}
}),new objj_method(sel_getUid("addTypes:owner:"),function(_8,_9,_a,_b){
with(_8){
var i=0,_c=_a.length;
for(;i<_c;++i){
var _d=_a[i];
if(!objj_msgSend(_owners,"objectForKey:",_d)){
objj_msgSend(_types,"addObject:",_d);
objj_msgSend(_provided,"removeObjectForKey:",_d);
}
objj_msgSend(_owners,"setObject:forKey:",_b,_d);
}
if(_nativePasteboard){
var _e=objj_msgSend(_a,"copy");
if(objj_msgSend(_a,"containsObject:",CPStringPboardType)){
_e.push(UTF8PboardType);
}
_nativePasteboard.addTypes_(_e);
}
return ++_changeCount;
}
}),new objj_method(sel_getUid("declareTypes:owner:"),function(_f,_10,_11,_12){
with(_f){
objj_msgSend(_f,"_declareTypes:owner:updateNativePasteboard:",_11,_12,YES);
}
}),new objj_method(sel_getUid("_declareTypes:owner:updateNativePasteboard:"),function(_13,_14,_15,_16,_17){
with(_13){
objj_msgSend(_types,"setArray:",_15);
_owners=objj_msgSend(CPDictionary,"dictionary");
_provided=objj_msgSend(CPDictionary,"dictionary");
var _18=_types.length;
while(_18--){
objj_msgSend(_owners,"setObject:forKey:",_16,_types[_18]);
}
if(_nativePasteboard&&_17){
var _19=objj_msgSend(_15,"copy");
if(objj_msgSend(_15,"containsObject:",CPStringPboardType)){
_19.push(UTF8PboardType);
}
_nativePasteboard.declareTypes_(_19);
_changeCount=_nativePasteboard.changeCount();
}
return ++_changeCount;
}
}),new objj_method(sel_getUid("setData:forType:"),function(_1a,_1b,_1c,_1d){
with(_1a){
objj_msgSend(_provided,"setObject:forKey:",_1c,_1d);
if(_1d===CPStringPboardType){
objj_msgSend(_1a,"setData:forType:",_1c,UTF8PboardType);
}
return YES;
}
}),new objj_method(sel_getUid("setPropertyList:forType:"),function(_1e,_1f,_20,_21){
with(_1e){
return objj_msgSend(_1e,"setData:forType:",objj_msgSend(CPPropertyListSerialization,"dataFromPropertyList:format:",_20,CPPropertyList280NorthFormat_v1_0),_21);
}
}),new objj_method(sel_getUid("setString:forType:"),function(_22,_23,_24,_25){
with(_22){
objj_msgSend(_22,"setPropertyList:forType:",_24,_25);
}
}),new objj_method(sel_getUid("availableTypeFromArray:"),function(_26,_27,_28){
with(_26){
return objj_msgSend(objj_msgSend(_26,"types"),"firstObjectCommonWithArray:",_28);
}
}),new objj_method(sel_getUid("types"),function(_29,_2a){
with(_29){
objj_msgSend(_29,"_synchronizePasteboard");
return _types;
}
}),new objj_method(sel_getUid("changeCount"),function(_2b,_2c){
with(_2b){
return _changeCount;
}
}),new objj_method(sel_getUid("dataForType:"),function(_2d,_2e,_2f){
with(_2d){
var _30=objj_msgSend(_provided,"objectForKey:",_2f);
if(_30){
return _30;
}
var _31=objj_msgSend(_owners,"objectForKey:",_2f);
if(_31){
objj_msgSend(_31,"pasteboard:provideDataForType:",_2d,_2f);
return objj_msgSend(_provided,"objectForKey:",_2f);
}
if(_2f===CPStringPboardType){
return objj_msgSend(_2d,"dataForType:",UTF8PboardType);
}
return nil;
}
}),new objj_method(sel_getUid("_synchronizePasteboard"),function(_32,_33){
with(_32){
if(_nativePasteboard&&_nativePasteboard.changeCount()>_changeCount){
var _34=objj_msgSend(_nativePasteboard.types(),"copy");
if(objj_msgSend(_34,"containsObject:",UTF8PboardType)){
_34.push(CPStringPboardType);
}
objj_msgSend(_32,"_declareTypes:owner:updateNativePasteboard:",_34,_32,NO);
_changeCount=_nativePasteboard.changeCount();
}
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(_35,_36,_37,_38){
with(_35){
if(_38===CPStringPboardType){
var _39=_nativePasteboard.stringForType_(UTF8PboardType);
objj_msgSend(_35,"setString:forType:",_39,CPStringPboardType);
objj_msgSend(_35,"setString:forType:",_39,UTF8PboardType);
}else{
objj_msgSend(_35,"setString:forType:",_nativePasteboard.stringForType_(_38),_38);
}
}
}),new objj_method(sel_getUid("propertyListForType:"),function(_3a,_3b,_3c){
with(_3a){
var _3d=objj_msgSend(_3a,"dataForType:",_3c);
if(_3d){
return objj_msgSend(CPPropertyListSerialization,"propertyListFromData:format:",_3d,CPPropertyList280NorthFormat_v1_0);
}
return nil;
}
}),new objj_method(sel_getUid("stringForType:"),function(_3e,_3f,_40){
with(_3e){
return objj_msgSend(_3e,"propertyListForType:",_40);
}
}),new objj_method(sel_getUid("_generateStateUID"),function(_41,_42){
with(_41){
var _43=32;
_stateUID="";
while(_43--){
_stateUID+=FLOOR(RAND()*16).toString(16).toUpperCase();
}
return _stateUID;
}
}),new objj_method(sel_getUid("_stateUID"),function(_44,_45){
with(_44){
return _stateUID;
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_46,_47){
with(_46){
if(_46!=objj_msgSend(CPPasteboard,"class")){
return;
}
objj_msgSend(_46,"setVersion:",1);
_1=objj_msgSend(CPDictionary,"dictionary");
if(typeof window.cpPasteboardWithName!=="undefined"){
_2=YES;
}
}
}),new objj_method(sel_getUid("generalPasteboard"),function(_48,_49){
with(_48){
return objj_msgSend(CPPasteboard,"pasteboardWithName:",CPGeneralPboard);
}
}),new objj_method(sel_getUid("pasteboardWithName:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=objj_msgSend(_1,"objectForKey:",_4c);
if(_4d){
return _4d;
}
_4d=objj_msgSend(objj_msgSend(CPPasteboard,"alloc"),"_initWithName:",_4c);
objj_msgSend(_1,"setObject:forKey:",_4d,_4c);
return _4d;
}
})]);
var _4e=nil;
var _3=objj_allocateClassPair(CPPasteboard,"_CPDOMDataTransferPasteboard"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_dataTransfer")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("_setDataTransfer:"),function(_4f,_50,_51){
with(_4f){
_dataTransfer=_51;
}
}),new objj_method(sel_getUid("_setPasteboard:"),function(_52,_53,_54){
with(_52){
_dataTransfer.clearData();
var _55=objj_msgSend(_54,"types"),_56=_55.length;
while(_56--){
var _57=_55[_56];
if(_57===CPStringPboardType){
_dataTransfer.setData(_57,objj_msgSend(_54,"stringForType:",_57));
}else{
_dataTransfer.setData(_57,objj_msgSend(objj_msgSend(_54,"dataForType:",_57),"rawString"));
}
}
}
}),new objj_method(sel_getUid("types"),function(_58,_59){
with(_58){
return Array.prototype.slice.apply(_dataTransfer.types);
}
}),new objj_method(sel_getUid("dataForType:"),function(_5a,_5b,_5c){
with(_5a){
var _5d=_dataTransfer.getData(_5c);
if(_5c===CPStringPboardType){
return objj_msgSend(CPData,"dataFromPropertyList:format:",_5d,kCFPropertyList280NorthFormat_v1_0);
}
return objj_msgSend(CPData,"dataWithRawString:",_5d);
}
}),new objj_method(sel_getUid("propertyListForType:"),function(_5e,_5f,_60){
with(_5e){
if(_60===CPStringPboardType){
return _dataTransfer.getData(_60);
}
return objj_msgSend(CPPropertyListSerialization,"propertyListFromData:format:",objj_msgSend(_5e,"dataForType:",_60),CPPropertyListUnknownFormat);
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("DOMDataTransferPasteboard"),function(_61,_62){
with(_61){
if(!_4e){
_4e=objj_msgSend(objj_msgSend(_CPDOMDataTransferPasteboard,"alloc"),"init");
}
return _4e;
}
})]);
p;11;CPPopover.jt;8849;@STATIC;1.0;I;21;Foundation/CPObject.ji;10;CPButton.ji;9;CPColor.ji;9;CPImage.ji;13;CPImageView.ji;13;CPResponder.ji;8;CPView.ji;19;_CPAttachedWindow.jt;8691;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("_CPAttachedWindow.j",YES);
CPPopoverBehaviorApplicationDefined=0;
CPPopoverBehaviorTransient=1;
CPPopoverBehaviorSemitransient=2;
var _1=1<<0,_2=1<<1,_3=1<<2,_4=1<<3,_5=1<<4;
var _6=objj_allocateClassPair(CPResponder,"CPPopover"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_contentViewController"),new objj_ivar("_delegate"),new objj_ivar("_animates"),new objj_ivar("_appearance"),new objj_ivar("_behavior"),new objj_ivar("_attachedWindow"),new objj_ivar("_implementedDelegateMethods")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("contentViewController"),function(_8,_9){
with(_8){
return _contentViewController;
}
}),new objj_method(sel_getUid("setContentViewController:"),function(_a,_b,_c){
with(_a){
_contentViewController=_c;
}
}),new objj_method(sel_getUid("delegate"),function(_d,_e){
with(_d){
return _delegate;
}
}),new objj_method(sel_getUid("_setDelegate:"),function(_f,_10,_11){
with(_f){
_delegate=_11;
}
}),new objj_method(sel_getUid("animates"),function(_12,_13){
with(_12){
return _animates;
}
}),new objj_method(sel_getUid("setAnimates:"),function(_14,_15,_16){
with(_14){
_animates=_16;
}
}),new objj_method(sel_getUid("appearance"),function(_17,_18){
with(_17){
return _appearance;
}
}),new objj_method(sel_getUid("setAppearance:"),function(_19,_1a,_1b){
with(_19){
_appearance=_1b;
}
}),new objj_method(sel_getUid("behavior"),function(_1c,_1d){
with(_1c){
return _behavior;
}
}),new objj_method(sel_getUid("_setBehavior:"),function(_1e,_1f,_20){
with(_1e){
_behavior=_20;
}
}),new objj_method(sel_getUid("init"),function(_21,_22){
with(_21){
if(_21=objj_msgSendSuper({receiver:_21,super_class:objj_getClass("CPPopover").super_class},"init")){
_animates=YES;
_appearance=CPPopoverAppearanceMinimal;
_behavior=CPPopoverBehaviorApplicationDefined;
}
return _21;
}
}),new objj_method(sel_getUid("positioningRect"),function(_23,_24){
with(_23){
if(!objj_msgSend(_attachedWindow,"isVisible")){
return CGRectMakeZero();
}
return objj_msgSend(_attachedWindow,"frame");
}
}),new objj_method(sel_getUid("setPositioningRect:"),function(_25,_26,_27){
with(_25){
if(!objj_msgSend(_attachedWindow,"isVisible")){
return;
}
objj_msgSend(_attachedWindow,"setFrame:",_27);
}
}),new objj_method(sel_getUid("contentSize"),function(_28,_29){
with(_28){
if(!objj_msgSend(_attachedWindow,"isVisible")){
return CGRectMakeZero();
}
return objj_msgSend(objj_msgSend(_contentViewController,"view"),"frameSize");
}
}),new objj_method(sel_getUid("setContentSize:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(objj_msgSend(_contentViewController,"view"),"setFrameSize:",_2c);
}
}),new objj_method(sel_getUid("isShown"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_attachedWindow,"isVisible");
}
}),new objj_method(sel_getUid("setBehavior:"),function(_2f,_30,_31){
with(_2f){
if(_behavior==_31){
return;
}
_behavior=_31;
objj_msgSend(_attachedWindow,"setStyleMask:",objj_msgSend(_2f,"styleMaskForBehavior"));
}
}),new objj_method(sel_getUid("setDelegate:"),function(_32,_33,_34){
with(_32){
if(_delegate===_34){
return;
}
_delegate=_34;
_implementedDelegateMethods=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("popoverWillShow:"))){
_implementedDelegateMethods|=_1;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("popoverDidShow:"))){
_implementedDelegateMethods|=_2;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("popoverShouldClose:"))){
_implementedDelegateMethods|=_3;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("popoverWillClose:"))){
_implementedDelegateMethods|=_4;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("popoverDidClose:"))){
_implementedDelegateMethods|=_5;
}
}
}),new objj_method(sel_getUid("showRelativeToRect:ofView:preferredEdge:"),function(_35,_36,_37,_38,_39){
with(_35){
if(!_38){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"positionView must not be nil");
}
if(!_contentViewController){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"contentViewController must not be nil");
}
if(objj_msgSend(_attachedWindow,"isClosing")){
return;
}
if(_implementedDelegateMethods&_1){
objj_msgSend(_delegate,"popoverWillShow:",_35);
}
if(!_attachedWindow){
_attachedWindow=objj_msgSend(objj_msgSend(_CPAttachedWindow,"alloc"),"initWithContentRect:styleMask:",CGRectMakeZero(),objj_msgSend(_35,"styleMaskForBehavior"));
var _3a=objj_msgSend(_38,"window");
if(!objj_msgSend(_3a,"isKindOfClass:",_CPAttachedWindow)){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_35,sel_getUid("parentWindowWillClose:"),CPWindowWillCloseNotification,_3a);
}
}
objj_msgSend(_attachedWindow,"setAppearance:",_appearance);
objj_msgSend(_attachedWindow,"setAnimates:",_animates);
objj_msgSend(_attachedWindow,"setDelegate:",_35);
objj_msgSend(_attachedWindow,"setMovableByWindowBackground:",NO);
objj_msgSend(_attachedWindow,"setFrame:",objj_msgSend(_attachedWindow,"frameRectForContentRect:",objj_msgSend(objj_msgSend(_contentViewController,"view"),"frame")));
objj_msgSend(_attachedWindow,"setContentView:",objj_msgSend(_contentViewController,"view"));
objj_msgSend(_attachedWindow,"positionRelativeToRect:ofView:preferredEdge:",_37,_38,_39);
if(_implementedDelegateMethods&_2){
objj_msgSend(_delegate,"popoverDidShow:",_35);
}
}
}),new objj_method(sel_getUid("styleMaskForBehavior"),function(_3b,_3c){
with(_3b){
return (_behavior==CPPopoverBehaviorTransient)?CPClosableOnBlurWindowMask:0;
}
}),new objj_method(sel_getUid("close"),function(_3d,_3e){
with(_3d){
objj_msgSend(_3d,"_close");
}
}),new objj_method(sel_getUid("_close"),function(_3f,_40){
with(_3f){
if(objj_msgSend(_attachedWindow,"isClosing")||!objj_msgSend(_3f,"isShown")){
return;
}
if(_implementedDelegateMethods&_4){
objj_msgSend(_delegate,"popoverWillClose:",_3f);
}
objj_msgSend(_attachedWindow,"close");
}
}),new objj_method(sel_getUid("performClose:"),function(_41,_42,_43){
with(_41){
if(objj_msgSend(_attachedWindow,"isClosing")){
return;
}
if(_implementedDelegateMethods&_3){
if(!objj_msgSend(_delegate,"popoverShouldClose:",_41)){
return;
}
}
objj_msgSend(_41,"_close");
}
}),new objj_method(sel_getUid("attachedWindowShouldClose:"),function(_44,_45,_46){
with(_44){
objj_msgSend(_44,"performClose:",_44);
return NO;
}
}),new objj_method(sel_getUid("attachedWindowDidClose:"),function(_47,_48,_49){
with(_47){
if(_implementedDelegateMethods&_5){
objj_msgSend(_delegate,"popoverDidClose:",_47);
}
}
}),new objj_method(sel_getUid("parentWindowWillClose:"),function(_4a,_4b,_4c){
with(_4a){
objj_msgSend(_attachedWindow,"orderOut:",nil);
objj_msgSend(_4a,"performClose:",nil);
}
})]);
var _6=objj_getClass("CPPopover");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPPopover\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("setBehaviour:"),function(_4d,_4e,_4f){
with(_4d){
_CPReportLenientDeprecation(_4d,_4e,sel_getUid("setBehavior:"));
objj_msgSend(_4d,"setBehavior:",_4f);
}
})]);
var _50="CPPopoverNeedsNewAttachedWindowKey",_51="CPPopoverAppearanceKey",_52="CPPopoverAnimatesKey",_53="CPPopoverContentViewControllerKey",_54="CPPopoverDelegateKey",_55="CPPopoverBehaviorKey";
var _6=objj_getClass("CPPopover");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPPopover\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("initWithCoder:"),function(_56,_57,_58){
with(_56){
_56=objj_msgSendSuper({receiver:_56,super_class:objj_getClass("CPPopover").super_class},"initWithCoder:",_58);
if(_56){
_appearance=objj_msgSend(_58,"decodeIntForKey:",_51);
_animates=objj_msgSend(_58,"decodeBoolForKey:",_52);
_contentViewController=objj_msgSend(_58,"decodeObjectForKey:",_53);
objj_msgSend(_56,"setDelegate:",objj_msgSend(_58,"decodeObjectForKey:",_54));
objj_msgSend(_56,"setBehavior:",objj_msgSend(_58,"decodeIntForKey:",_55));
}
return _56;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_59,_5a,_5b){
with(_59){
objj_msgSendSuper({receiver:_59,super_class:objj_getClass("CPPopover").super_class},"encodeWithCoder:",_5b);
objj_msgSend(_5b,"encodeInt:forKey:",_appearance,_51);
objj_msgSend(_5b,"encodeBool:forKey:",_animates,_52);
objj_msgSend(_5b,"encodeObject:forKey:",_contentViewController,_53);
objj_msgSend(_5b,"encodeObject:forKey:",_delegate,_54);
objj_msgSend(_5b,"encodeInt:forKey:",_behavior,_55);
}
})]);
p;15;CPPopUpButton.jt;16600;@STATIC;1.0;i;10;CPButton.ji;12;CPGeometry.ji;8;CPMenu.ji;12;CPMenuItem.jt;16519;
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPMenuItem.j",YES);
var _1=7;
CPPopUpButtonStatePullsDown=CPThemeState("pulls-down");
var _2=objj_allocateClassPair(CPButton,"CPPopUpButton"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_selectedIndex"),new objj_ivar("_preferredEdge")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:pullsDown:"),function(_4,_5,_6,_7){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPPopUpButton").super_class},"initWithFrame:",_6);
if(_4){
objj_msgSend(_4,"selectItemAtIndex:",CPNotFound);
_preferredEdge=CPMaxYEdge;
objj_msgSend(_4,"setValue:forThemeAttribute:",CPImageLeft,"image-position");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPLeftTextAlignment,"alignment");
objj_msgSend(_4,"setValue:forThemeAttribute:",CPLineBreakByTruncatingTail,"line-break-mode");
objj_msgSend(_4,"setMenu:",objj_msgSend(objj_msgSend(CPMenu,"alloc"),"initWithTitle:",""));
objj_msgSend(_4,"setPullsDown:",_7);
var _8=CPKeyValueObservingOptionNew|CPKeyValueObservingOptionOld;
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"menu.items",_8,nil);
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"_firstItem.changeCount",_8,nil);
objj_msgSend(_4,"addObserver:forKeyPath:options:context:",_4,"selectedItem.changeCount",_8,nil);
}
return _4;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_9,_a,_b){
with(_9){
return objj_msgSend(_9,"initWithFrame:pullsDown:",_b,NO);
}
}),new objj_method(sel_getUid("setPullsDown:"),function(_c,_d,_e){
with(_c){
if(_e){
var _f=objj_msgSend(_c,"setThemeState:",CPPopUpButtonStatePullsDown);
}else{
var _f=objj_msgSend(_c,"unsetThemeState:",CPPopUpButtonStatePullsDown);
}
if(!_f){
return;
}
var _10=objj_msgSend(objj_msgSend(_c,"menu"),"itemArray");
if(objj_msgSend(_10,"count")<=0){
return;
}
objj_msgSend(_10[0],"setHidden:",objj_msgSend(_c,"pullsDown"));
objj_msgSend(_c,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("pullsDown"),function(_11,_12){
with(_11){
return objj_msgSend(_11,"hasThemeState:",CPPopUpButtonStatePullsDown);
}
}),new objj_method(sel_getUid("addItem:"),function(_13,_14,_15){
with(_13){
objj_msgSend(objj_msgSend(_13,"menu"),"addItem:",_15);
}
}),new objj_method(sel_getUid("addItemWithTitle:"),function(_16,_17,_18){
with(_16){
objj_msgSend(objj_msgSend(_16,"menu"),"addItemWithTitle:action:keyEquivalent:",_18,NULL,nil);
}
}),new objj_method(sel_getUid("addItemsWithTitles:"),function(_19,_1a,_1b){
with(_19){
var _1c=0,_1d=objj_msgSend(_1b,"count");
for(;_1c<_1d;++_1c){
objj_msgSend(_19,"addItemWithTitle:",_1b[_1c]);
}
}
}),new objj_method(sel_getUid("insertItemWithTitle:atIndex:"),function(_1e,_1f,_20,_21){
with(_1e){
var _22=objj_msgSend(_1e,"itemArray"),_23=objj_msgSend(_22,"count");
while(_23--){
if(objj_msgSend(_22[_23],"title")==_20){
objj_msgSend(_1e,"removeItemAtIndex:",_23);
}
}
objj_msgSend(objj_msgSend(_1e,"menu"),"insertItemWithTitle:action:keyEquivalent:atIndex:",_20,NULL,nil,_21);
}
}),new objj_method(sel_getUid("removeAllItems"),function(_24,_25){
with(_24){
objj_msgSend(objj_msgSend(_24,"menu"),"removeAllItems");
objj_msgSend(_24,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("removeItemWithTitle:"),function(_26,_27,_28){
with(_26){
objj_msgSend(_26,"removeItemAtIndex:",objj_msgSend(_26,"indexOfItemWithTitle:",_28));
objj_msgSend(_26,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_29,_2a,_2b){
with(_29){
objj_msgSend(objj_msgSend(_29,"menu"),"removeItemAtIndex:",_2b);
objj_msgSend(_29,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("selectedItem"),function(_2c,_2d){
with(_2c){
var _2e=objj_msgSend(_2c,"indexOfSelectedItem");
if(_2e<0||_2e>objj_msgSend(_2c,"numberOfItems")-1){
return nil;
}
return objj_msgSend(objj_msgSend(_2c,"menu"),"itemAtIndex:",_2e);
}
}),new objj_method(sel_getUid("titleOfSelectedItem"),function(_2f,_30){
with(_2f){
return objj_msgSend(objj_msgSend(_2f,"selectedItem"),"title");
}
}),new objj_method(sel_getUid("indexOfSelectedItem"),function(_31,_32){
with(_31){
return _selectedIndex;
}
}),new objj_method(sel_getUid("_selectedTag"),function(_33,_34){
with(_33){
return objj_msgSend(objj_msgSend(_33,"selectedItem"),"tag");
}
}),new objj_method(sel_getUid("_setSelectedTag:"),function(_35,_36,_37){
with(_35){
objj_msgSend(_35,"selectItemWithTag:",_37);
}
}),new objj_method(sel_getUid("selectItem:"),function(_38,_39,_3a){
with(_38){
objj_msgSend(_38,"selectItemAtIndex:",objj_msgSend(_38,"indexOfItem:",_3a));
}
}),new objj_method(sel_getUid("selectItemAtIndex:"),function(_3b,_3c,_3d){
with(_3b){
objj_msgSend(_3b,"setObjectValue:",_3d);
}
}),new objj_method(sel_getUid("setSelectedIndex:"),function(_3e,_3f,_40){
with(_3e){
objj_msgSend(_3e,"setObjectValue:",_40);
}
}),new objj_method(sel_getUid("selectedIndex"),function(_41,_42){
with(_41){
return objj_msgSend(_41,"objectValue");
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_43,_44,_45){
with(_43){
var _46=objj_msgSend(_43,"objectValue");
_45=parseInt(+_45,10);
if(_46===_45){
return;
}
if(_46>=0&&!objj_msgSend(_43,"pullsDown")){
objj_msgSend(objj_msgSend(_43,"selectedItem"),"setState:",CPOffState);
}
_selectedIndex=_45;
if(_46>=0&&!objj_msgSend(_43,"pullsDown")){
objj_msgSend(objj_msgSend(_43,"selectedItem"),"setState:",CPOnState);
}
objj_msgSend(_43,"synchronizeTitleAndSelectedItem");
}
}),new objj_method(sel_getUid("objectValue"),function(_47,_48){
with(_47){
return _selectedIndex;
}
}),new objj_method(sel_getUid("selectItemWithTag:"),function(_49,_4a,_4b){
with(_49){
objj_msgSend(_49,"selectItemAtIndex:",objj_msgSend(_49,"indexOfItemWithTag:",_4b));
}
}),new objj_method(sel_getUid("selectItemWithTitle:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"selectItemAtIndex:",objj_msgSend(_4c,"indexOfItemWithTitle:",_4e));
}
}),new objj_method(sel_getUid("numberOfItems"),function(_4f,_50){
with(_4f){
return objj_msgSend(objj_msgSend(_4f,"menu"),"numberOfItems");
}
}),new objj_method(sel_getUid("itemArray"),function(_51,_52){
with(_51){
return objj_msgSend(objj_msgSend(_51,"menu"),"itemArray");
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_53,_54,_55){
with(_53){
return objj_msgSend(objj_msgSend(_53,"menu"),"itemAtIndex:",_55);
}
}),new objj_method(sel_getUid("itemTitleAtIndex:"),function(_56,_57,_58){
with(_56){
return objj_msgSend(objj_msgSend(objj_msgSend(_56,"menu"),"itemAtIndex:",_58),"title");
}
}),new objj_method(sel_getUid("itemTitles"),function(_59,_5a){
with(_59){
var _5b=[],_5c=objj_msgSend(_59,"itemArray"),_5d=0,_5e=objj_msgSend(_5c,"count");
for(;_5d<_5e;++_5d){
_5b.push(objj_msgSend(_5c[_5d],"title"));
}
return _5b;
}
}),new objj_method(sel_getUid("itemWithTitle:"),function(_5f,_60,_61){
with(_5f){
var _62=objj_msgSend(_5f,"menu"),_63=objj_msgSend(_62,"indexOfItemWithTitle:",_61);
if(_63===CPNotFound){
return nil;
}
return objj_msgSend(_62,"itemAtIndex:",_63);
}
}),new objj_method(sel_getUid("lastItem"),function(_64,_65){
with(_64){
return objj_msgSend(objj_msgSend(objj_msgSend(_64,"menu"),"itemArray"),"lastObject");
}
}),new objj_method(sel_getUid("indexOfItem:"),function(_66,_67,_68){
with(_66){
return objj_msgSend(objj_msgSend(_66,"menu"),"indexOfItem:",_68);
}
}),new objj_method(sel_getUid("indexOfItemWithTag:"),function(_69,_6a,_6b){
with(_69){
return objj_msgSend(objj_msgSend(_69,"menu"),"indexOfItemWithTag:",_6b);
}
}),new objj_method(sel_getUid("indexOfItemWithTitle:"),function(_6c,_6d,_6e){
with(_6c){
return objj_msgSend(objj_msgSend(_6c,"menu"),"indexOfItemWithTitle:",_6e);
}
}),new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"),function(_6f,_70,_71){
with(_6f){
return objj_msgSend(objj_msgSend(_6f,"menu"),"indexOfItemWithRepresentedObject:",_71);
}
}),new objj_method(sel_getUid("indexOfItemWithTarget:action:"),function(_72,_73,_74,_75){
with(_72){
return objj_msgSend(objj_msgSend(_72,"menu"),"indexOfItemWithTarget:action:",_74,_75);
}
}),new objj_method(sel_getUid("preferredEdge"),function(_76,_77){
with(_76){
return _preferredEdge;
}
}),new objj_method(sel_getUid("setPreferredEdge:"),function(_78,_79,_7a){
with(_78){
_preferredEdge=_7a;
}
}),new objj_method(sel_getUid("setTitle:"),function(_7b,_7c,_7d){
with(_7b){
if(objj_msgSend(_7b,"title")===_7d){
return;
}
if(objj_msgSend(_7b,"pullsDown")){
var _7e=objj_msgSend(objj_msgSend(_7b,"menu"),"itemArray");
if(objj_msgSend(_7e,"count")<=0){
objj_msgSend(_7b,"addItemWithTitle:",_7d);
}else{
objj_msgSend(_7e[0],"setTitle:",_7d);
objj_msgSend(_7b,"synchronizeTitleAndSelectedItem");
}
}else{
var _7f=objj_msgSend(_7b,"indexOfItemWithTitle:",_7d);
if(_7f<0){
objj_msgSend(_7b,"addItemWithTitle:",_7d);
_7f=objj_msgSend(_7b,"numberOfItems")-1;
}
objj_msgSend(_7b,"selectItemAtIndex:",_7f);
}
}
}),new objj_method(sel_getUid("setImage:"),function(_80,_81,_82){
with(_80){
}
}),new objj_method(sel_getUid("synchronizeTitleAndSelectedItem"),function(_83,_84){
with(_83){
var _85=nil;
if(objj_msgSend(_83,"pullsDown")){
var _86=objj_msgSend(objj_msgSend(_83,"menu"),"itemArray");
if(objj_msgSend(_86,"count")>0){
_85=_86[0];
}
}else{
_85=objj_msgSend(_83,"selectedItem");
}
objj_msgSendSuper({receiver:_83,super_class:objj_getClass("CPPopUpButton").super_class},"setImage:",objj_msgSend(_85,"image"));
objj_msgSendSuper({receiver:_83,super_class:objj_getClass("CPPopUpButton").super_class},"setTitle:",objj_msgSend(_85,"title"));
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_87,_88,_89,_8a,_8b,_8c){
with(_87){
var _8d=objj_msgSend(_87,"pullsDown");
if(!_8d&&_89==="selectedItem.changeCount"||_8d&&(_89==="_firstItem"||_89==="_firstItem.changeCount")){
objj_msgSend(_87,"synchronizeTitleAndSelectedItem");
}
if(_89==="menu"){
_89="menu.items";
objj_msgSend(_8b,"setObject:forKey:",CPKeyValueChangeSetting,CPKeyValueChangeKindKey);
objj_msgSend(_8b,"setObject:forKey:",objj_msgSend(objj_msgSend(_87,"menu"),"itemArray"),CPKeyValueChangeNewKey);
}
if(_89==="menu.items"){
var _8e=objj_msgSend(_8b,"objectForKey:",CPKeyValueChangeKindKey),_8f=objj_msgSend(_87,"indexOfSelectedItem");
if(_8e===CPKeyValueChangeRemoval){
var _90=CPNotFound,_91=objj_msgSend(_8b,"objectForKey:",CPKeyValueChangeIndexesKey);
if(objj_msgSend(_91,"containsIndex:",0)&&objj_msgSend(_87,"pullsDown")){
objj_msgSend(_87,"_firstItemDidChange");
}
while((_90=objj_msgSend(_91,"indexGreaterThanIndex:",_90))!==CPNotFound&&_90<=_8f){
--_8f;
}
objj_msgSend(_87,"selectItemAtIndex:",_8f);
}else{
if(_8e===CPKeyValueChangeReplacement){
var _91=objj_msgSend(_8b,"objectForKey:",CPKeyValueChangeIndexesKey);
if(_8d&&objj_msgSend(_91,"containsIndex:",0)||!_8d&&objj_msgSend(_91,"containsIndex:",_8f)){
objj_msgSend(_87,"synchronizeTitleAndSelectedItem");
}
}else{
var _92=objj_msgSend(_8b,"objectForKey:",CPKeyValueChangeNewKey);
objj_msgSend(_92,"enumerateObjectsUsingBlock:",function(_93){
var _94=objj_msgSend(_93,"action");
if(!_94){
objj_msgSend(_93,"setAction:",_94=sel_getUid("_popUpItemAction:"));
}
if(_94===sel_getUid("_popUpItemAction:")){
objj_msgSend(_93,"setTarget:",_87);
}
});
if(_8e===CPKeyValueChangeSetting){
objj_msgSend(_87,"_firstItemDidChange");
objj_msgSend(_87,"selectItemAtIndex:",CPNotFound);
objj_msgSend(_87,"selectItemAtIndex:",MIN(objj_msgSend(_92,"count")-1,_8f));
}else{
var _91=objj_msgSend(_8b,"objectForKey:",CPKeyValueChangeIndexesKey);
if(objj_msgSend(_87,"pullsDown")&&objj_msgSend(_91,"containsIndex:",0)){
objj_msgSend(_87,"_firstItemDidChange");
if(objj_msgSend(_87,"numberOfItems")>1){
var _90=CPNotFound,_95=0;
while((_90=objj_msgSend(_91,"indexGreaterThanIndex:",_90))!==CPNotFound&&_90<=_95){
++_95;
}
objj_msgSend(objj_msgSend(_87,"itemAtIndex:",_95),"setHidden:",NO);
}
}
if(_8f<0){
objj_msgSend(_87,"selectItemAtIndex:",0);
}else{
var _90=CPNotFound;
while((_90=objj_msgSend(_91,"indexGreaterThanIndex:",_90))!==CPNotFound&&_90<=_8f){
++_8f;
}
objj_msgSend(_87,"selectItemAtIndex:",_8f);
}
}
}
}
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_96,_97,_98){
with(_96){
if(!objj_msgSend(_96,"isEnabled")||!objj_msgSend(_96,"numberOfItems")){
return;
}
objj_msgSend(_96,"highlight:",YES);
var _99=objj_msgSend(_96,"menu"),_9a=objj_msgSend(_96,"bounds"),_9b=CGRectGetWidth(_9a);
objj_msgSend(_99,"setFont:",objj_msgSend(_96,"font"));
if(objj_msgSend(_96,"pullsDown")){
var _9c=nil,_9d=CGPointMake(0,CGRectGetMaxY(_9a));
}else{
var _9e=objj_msgSend(_96,"contentRectForBounds:",_9a),_9c=objj_msgSend(_96,"selectedItem"),_9f=objj_msgSend(_CPMenuWindow,"_standardLeftMargin")+objj_msgSend(_CPMenuItemStandardView,"_standardLeftMargin"),_9d=CGPointMake(CGRectGetMinX(_9e)-_9f,0);
_9b+=_9f;
objj_msgSend(_99,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(_99,"setMinimumWidth:",_9b);
objj_msgSend(_99,"_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:",_9c,_9d,CGRectGetMinY(_9a),CGRectGetMaxY(_9a),_96,function(_a0){
objj_msgSend(_96,"highlight:",NO);
var _a1=objj_msgSend(_a0,"highlightedItem");
if(objj_msgSend(_a1,"_isSelectable")){
objj_msgSend(_96,"selectItem:",_a1);
}
});
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(_a2,_a3,_a4){
with(_a2){
}
}),new objj_method(sel_getUid("_popUpItemAction:"),function(_a5,_a6,_a7){
with(_a5){
objj_msgSend(_a5,"sendAction:to:",objj_msgSend(_a5,"action"),objj_msgSend(_a5,"target"));
}
}),new objj_method(sel_getUid("_firstItemDidChange"),function(_a8,_a9){
with(_a8){
objj_msgSend(_a8,"willChangeValueForKey:","_firstItem");
objj_msgSend(_a8,"didChangeValueForKey:","_firstItem");
objj_msgSend(objj_msgSend(_a8,"_firstItem"),"setHidden:",YES);
}
}),new objj_method(sel_getUid("_firstItem"),function(_aa,_ab){
with(_aa){
if(objj_msgSend(_aa,"numberOfItems")<=0){
return nil;
}
return objj_msgSend(objj_msgSend(_aa,"menu"),"itemAtIndex:",0);
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_ac,_ad,_ae,_af){
with(_ac){
var _b0=_af.length,_b1=objj_msgSend(_af[0],"valueForKeyPath:",_ae);
objj_msgSend(_ac,"selectItemWithTag:",_b1);
objj_msgSend(_ac,"setEnabled:",YES);
while(_b0-->1){
if(_b1!==objj_msgSend(_af[_b0],"valueForKeyPath:",_ae)){
objj_msgSend(objj_msgSend(_ac,"selectedItem"),"setState:",CPOffState);
}
}
}
}),new objj_method(sel_getUid("_reverseSetBinding"),function(_b2,_b3){
with(_b2){
var _b4=objj_msgSend(objj_msgSend(_b2,"class"),"_binderClassForBinding:",CPSelectedIndexBinding),_b5=objj_msgSend(_b4,"getBinding:forObject:",CPSelectedIndexBinding,_b2);
objj_msgSend(_b5,"reverseSetValueFor:","objectValue");
objj_msgSendSuper({receiver:_b2,super_class:objj_getClass("CPPopUpButton").super_class},"_reverseSetBinding");
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("defaultThemeClass"),function(_b6,_b7){
with(_b6){
return "popup-button";
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedIndex"),function(_b8,_b9){
with(_b8){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedTag"),function(_ba,_bb){
with(_ba){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedItem"),function(_bc,_bd){
with(_bc){
return objj_msgSend(CPSet,"setWithObject:","objectValue");
}
})]);
var _be="CPPopUpButtonMenuKey",_bf="CPPopUpButtonSelectedIndexKey";
var _2=objj_getClass("CPPopUpButton");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPPopUpButton\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_c0,_c1,_c2){
with(_c0){
_c0=objj_msgSendSuper({receiver:_c0,super_class:objj_getClass("CPPopUpButton").super_class},"initWithCoder:",_c2);
if(_c0){
objj_msgSend(_c0,"synchronizeTitleAndSelectedItem");
if(objj_msgSend(_c2,"containsValueForKey:",_be)){
CPLog.warn(_c0+" was encoded with an older version of Cappuccino. Please nib2cib the original nib again or open and re-save in Atlas.");
objj_msgSend(_c0,"setMenu:",objj_msgSend(_c2,"decodeObjectForKey:",_be));
objj_msgSend(_c0,"setObjectValue:",objj_msgSend(_c2,"decodeObjectForKey:",_bf));
}
var _c3=CPKeyValueObservingOptionNew|CPKeyValueObservingOptionOld;
objj_msgSend(_c0,"addObserver:forKeyPath:options:context:",_c0,"menu.items",_c3,nil);
objj_msgSend(_c0,"addObserver:forKeyPath:options:context:",_c0,"_firstItem.changeCount",_c3,nil);
objj_msgSend(_c0,"addObserver:forKeyPath:options:context:",_c0,"selectedItem.changeCount",_c3,nil);
}
return _c0;
}
})]);
p;21;CPProgressIndicator.jt;10755;@STATIC;1.0;i;12;CGGeometry.ji;13;CPImageView.ji;8;CPView.jt;10688;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
CPProgressIndicatorBarStyle=0;
CPProgressIndicatorSpinningStyle=1;
CPProgressIndicatorHUDBarStyle=2;
var _1=nil,_2=nil,_3=nil,_4=nil;
var _5=objj_allocateClassPair(CPView,"CPProgressIndicator"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_minValue"),new objj_ivar("_maxValue"),new objj_ivar("_doubleValue"),new objj_ivar("_controlSize"),new objj_ivar("_isIndeterminate"),new objj_ivar("_style"),new objj_ivar("_isAnimating"),new objj_ivar("_isDisplayedWhenStoppedSet"),new objj_ivar("_isDisplayedWhenStopped")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPProgressIndicator").super_class},"initWithFrame:",_9);
if(_7){
_minValue=0;
_maxValue=100;
_doubleValue=0;
_style=CPProgressIndicatorBarStyle;
_isDisplayedWhenStoppedSet=NO;
_controlSize=CPRegularControlSize;
objj_msgSend(_7,"updateBackgroundColor");
objj_msgSend(_7,"drawBar");
}
return _7;
}
}),new objj_method(sel_getUid("setUsesThreadedAnimation:"),function(_a,_b,_c){
with(_a){
}
}),new objj_method(sel_getUid("startAnimation:"),function(_d,_e,_f){
with(_d){
_isAnimating=YES;
objj_msgSend(_d,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("stopAnimation:"),function(_10,_11,_12){
with(_10){
_isAnimating=NO;
objj_msgSend(_10,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("usesThreadedAnimation"),function(_13,_14){
with(_13){
return NO;
}
}),new objj_method(sel_getUid("incrementBy:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"setDoubleValue:",_doubleValue+_17);
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_18,_19,_1a){
with(_18){
_doubleValue=MIN(MAX(_1a,_minValue),_maxValue);
objj_msgSend(_18,"drawBar");
}
}),new objj_method(sel_getUid("doubleValue"),function(_1b,_1c){
with(_1b){
return _doubleValue;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_1d,_1e,_1f){
with(_1d){
_minValue=_1f;
}
}),new objj_method(sel_getUid("minValue"),function(_20,_21){
with(_20){
return _minValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_22,_23,_24){
with(_22){
_maxValue=_24;
}
}),new objj_method(sel_getUid("maxValue"),function(_25,_26){
with(_25){
return _maxValue;
}
}),new objj_method(sel_getUid("setControlSize:"),function(_27,_28,_29){
with(_27){
if(_controlSize==_29){
return;
}
_controlSize=_29;
objj_msgSend(_27,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("controlSize"),function(_2a,_2b){
with(_2a){
return _controlSize;
}
}),new objj_method(sel_getUid("setControlTint:"),function(_2c,_2d,_2e){
with(_2c){
}
}),new objj_method(sel_getUid("controlTint"),function(_2f,_30){
with(_2f){
return 0;
}
}),new objj_method(sel_getUid("setBezeled:"),function(_31,_32,_33){
with(_31){
}
}),new objj_method(sel_getUid("isBezeled"),function(_34,_35){
with(_34){
return YES;
}
}),new objj_method(sel_getUid("setIndeterminate:"),function(_36,_37,_38){
with(_36){
if(_isIndeterminate==_38){
return;
}
_isIndeterminate=_38;
objj_msgSend(_36,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("isIndeterminate"),function(_39,_3a){
with(_39){
return _isIndeterminate;
}
}),new objj_method(sel_getUid("setStyle:"),function(_3b,_3c,_3d){
with(_3b){
if(_style==_3d){
return;
}
_style=_3d;
objj_msgSend(_3b,"updateBackgroundColor");
}
}),new objj_method(sel_getUid("sizeToFit"),function(_3e,_3f){
with(_3e){
if(_style==CPProgressIndicatorSpinningStyle){
objj_msgSend(_3e,"setFrameSize:",objj_msgSend(objj_msgSend(_1[_controlSize],"patternImage"),"size"));
}else{
objj_msgSend(_3e,"setFrameSize:",CGSizeMake(CGRectGetWidth(objj_msgSend(_3e,"frame")),_4[_2+"BezelBorder"+_3[CPProgressIndicatorBarStyle]+_CPControlIdentifierForControlSize(_controlSize)][0].height));
}
}
}),new objj_method(sel_getUid("setDisplayedWhenStopped:"),function(_40,_41,_42){
with(_40){
if(_isDisplayedWhenStoppedSet&&_isDisplayedWhenStopped==_42){
return;
}
_isDisplayedWhenStoppedSet=YES;
_isDisplayedWhenStopped=_42;
objj_msgSend(_40,"_hideOrDisplay");
}
}),new objj_method(sel_getUid("isDisplayedWhenStopped"),function(_43,_44){
with(_43){
if(_isDisplayedWhenStoppedSet){
return _isDisplayedWhenStopped;
}
if(_style==CPProgressIndicatorBarStyle||_style==CPProgressIndicatorHUDBarStyle){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_hideOrDisplay"),function(_45,_46){
with(_45){
objj_msgSend(_45,"setHidden:",!_isAnimating&&!objj_msgSend(_45,"isDisplayedWhenStopped"));
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_47,_48,_49){
with(_47){
objj_msgSendSuper({receiver:_47,super_class:objj_getClass("CPProgressIndicator").super_class},"setFrameSize:",_49);
objj_msgSend(_47,"drawBar");
}
}),new objj_method(sel_getUid("drawBar"),function(_4a,_4b){
with(_4a){
if(_style==CPProgressIndicatorSpinningStyle){
return;
}
var _4c=objj_msgSend(_4a,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bar-view",CPWindowBelow,nil);
objj_msgSend(_4c,"setBackgroundColor:",_CPControlThreePartImagePattern(NO,_4,_2,"Bar",_3[_style],_CPControlIdentifierForControlSize(_controlSize)));
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_4d,_4e,_4f){
with(_4d){
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_50,_51,_52){
with(_50){
if(_52==="bar-view"&&_style!==CPProgressIndicatorSpinningStyle){
var _53=CGRectGetWidth(objj_msgSend(_50,"bounds")),_54=_53*((_doubleValue-_minValue)/(_maxValue-_minValue));
if(_54>0&&_54<4){
_54=4;
}
return {origin:{x:0,y:0},size:{width:_54,height:16}};
}
return nil;
}
}),new objj_method(sel_getUid("updateBackgroundColor"),function(_55,_56){
with(_55){
if(YES){
if(_style==CPProgressIndicatorSpinningStyle){
objj_msgSend(_55,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bar-view",CPWindowBelow,nil);
objj_msgSend(_55,"setBackgroundColor:",_1[_controlSize]);
}else{
objj_msgSend(_55,"setBackgroundColor:",_CPControlThreePartImagePattern(NO,_4,_2,"BezelBorder",_3[_style],_CPControlIdentifierForControlSize(_controlSize)));
objj_msgSend(_55,"drawBar");
}
}else{
objj_msgSend(_55,"setBackgroundColor:",nil);
}
}
})]);
class_addMethods(_6,[new objj_method(sel_getUid("initialize"),function(_57,_58){
with(_57){
if(_57!=objj_msgSend(CPProgressIndicator,"class")){
return;
}
var _59=objj_msgSend(CPBundle,"bundleForClass:",_57);
_1=[];
_1[CPMiniControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_59,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleMini.gif"),CGSizeMake(16,16)));
_1[CPSmallControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_59,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleSmall.gif"),CGSizeMake(32,32)));
_1[CPRegularControlSize]=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_59,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(64,64)));
CPProgressIndicatorBezelBorderViewPool=[];
var _5a=CPProgressIndicatorBarStyle,end=CPProgressIndicatorHUDBarStyle;
for(;_5a<=end;++_5a){
CPProgressIndicatorBezelBorderViewPool[_5a]=[];
CPProgressIndicatorBezelBorderViewPool[_5a][CPMiniControlSize]=[];
CPProgressIndicatorBezelBorderViewPool[_5a][CPSmallControlSize]=[];
CPProgressIndicatorBezelBorderViewPool[_5a][CPRegularControlSize]=[];
}
_2=objj_msgSend(_57,"className");
_3=[];
_3[CPProgressIndicatorBarStyle]="Bar";
_3[CPProgressIndicatorSpinningStyle]="Spinny";
_3[CPProgressIndicatorHUDBarStyle]="HUDBar";
var _5b=_CPControlIdentifierForControlSize(CPRegularControlSize),_5c=_CPControlIdentifierForControlSize(CPSmallControlSize),_5d=_CPControlIdentifierForControlSize(CPMiniControlSize);
_4=[];
var _5e=[_2+"BezelBorder"+_3[CPProgressIndicatorBarStyle],_2+"Bar"+_3[CPProgressIndicatorBarStyle],_2+"BezelBorder"+_3[CPProgressIndicatorHUDBarStyle],_2+"Bar"+_3[CPProgressIndicatorHUDBarStyle]];
for(var i=0,_5f=_5e.length;i<_5f;i++){
var _60=_5e[i];
_4[_60+_5b]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
_4[_60+_5c]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
_4[_60+_5d]=[{width:3,height:16},{width:1,height:16},{width:3,height:16}];
}
}
})]);
var _5=objj_getClass("CPProgressIndicator");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPProgressIndicator\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("initWithCoder:"),function(_61,_62,_63){
with(_61){
if(_61=objj_msgSendSuper({receiver:_61,super_class:objj_getClass("CPProgressIndicator").super_class},"initWithCoder:",_63)){
_minValue=objj_msgSend(_63,"decodeObjectForKey:","_minValue");
_maxValue=objj_msgSend(_63,"decodeObjectForKey:","_maxValue");
_doubleValue=objj_msgSend(_63,"decodeObjectForKey:","_doubleValue");
_controlSize=objj_msgSend(_63,"decodeObjectForKey:","_controlSize");
_isIndeterminate=objj_msgSend(_63,"decodeObjectForKey:","_isIndeterminate");
_style=objj_msgSend(_63,"decodeIntForKey:","_style");
_isAnimating=objj_msgSend(_63,"decodeObjectForKey:","_isAnimating");
_isDisplayedWhenStoppedSet=objj_msgSend(_63,"decodeObjectForKey:","_isDisplayedWhenStoppedSet");
_isDisplayedWhenStopped=objj_msgSend(_63,"decodeObjectForKey:","_isDisplayedWhenStopped");
objj_msgSend(_61,"updateBackgroundColor");
}
return _61;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_64,_65,_66){
with(_64){
var _67=objj_msgSend(_64,"backgroundColor");
objj_msgSend(_64,"setBackgroundColor:",nil);
objj_msgSendSuper({receiver:_64,super_class:objj_getClass("CPProgressIndicator").super_class},"encodeWithCoder:",_66);
objj_msgSend(_64,"setBackgroundColor:",_67);
objj_msgSend(_66,"encodeObject:forKey:",_minValue,"_minValue");
objj_msgSend(_66,"encodeObject:forKey:",_maxValue,"_maxValue");
objj_msgSend(_66,"encodeObject:forKey:",_doubleValue,"_doubleValue");
objj_msgSend(_66,"encodeObject:forKey:",_controlSize,"_controlSize");
objj_msgSend(_66,"encodeObject:forKey:",_isIndeterminate,"_isIndeterminate");
objj_msgSend(_66,"encodeInt:forKey:",_style,"_style");
objj_msgSend(_66,"encodeObject:forKey:",_isAnimating,"_isAnimating");
objj_msgSend(_66,"encodeObject:forKey:",_isDisplayedWhenStoppedSet,"_isDisplayedWhenStoppedSet");
objj_msgSend(_66,"encodeObject:forKey:",_isDisplayedWhenStopped,"_isDisplayedWhenStopped");
}
})]);
p;9;CPRadio.jt;5849;@STATIC;1.0;I;21;Foundation/CPObject.jI;18;Foundation/CPSet.ji;10;CPButton.jt;5766;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPSet.j",NO);
objj_executeFile("CPButton.j",YES);
CPRadioImageOffset=4;
var _1=objj_allocateClassPair(CPButton,"CPRadio"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_radioGroup")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:radioGroup:"),function(_3,_4,_5,_6){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPRadio").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setRadioGroup:",_6);
objj_msgSend(_3,"setHighlightsBy:",CPContentsCellMask);
objj_msgSend(_3,"setShowsStateBy:",CPContentsCellMask);
objj_msgSend(_3,"setImagePosition:",CPImageLeft);
objj_msgSend(_3,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_3,"setBordered:",YES);
}
return _3;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
return objj_msgSend(_7,"initWithFrame:radioGroup:",_9,objj_msgSend(CPRadioGroup,"new"));
}
}),new objj_method(sel_getUid("nextState"),function(_a,_b){
with(_a){
return CPOnState;
}
}),new objj_method(sel_getUid("setRadioGroup:"),function(_c,_d,_e){
with(_c){
if(_radioGroup===_e){
return;
}
objj_msgSend(_radioGroup,"_removeRadio:",_c);
_radioGroup=_e;
objj_msgSend(_radioGroup,"_addRadio:",_c);
}
}),new objj_method(sel_getUid("radioGroup"),function(_f,_10){
with(_f){
return _radioGroup;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_11,_12,_13){
with(_11){
objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPRadio").super_class},"setObjectValue:",_13);
if(objj_msgSend(_11,"state")===CPOnState){
objj_msgSend(_radioGroup,"_setSelectedRadio:",_11);
}
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_14,_15,_16,_17){
with(_14){
objj_msgSendSuper({receiver:_14,super_class:objj_getClass("CPRadio").super_class},"sendAction:to:",_16,_17);
if(_radioGroup){
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_radioGroup,"action"),objj_msgSend(_radioGroup,"target"),_radioGroup);
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("radioWithTitle:theme:"),function(_18,_19,_1a,_1b){
with(_18){
return objj_msgSend(_18,"buttonWithTitle:theme:",_1a,_1b);
}
}),new objj_method(sel_getUid("radioWithTitle:"),function(_1c,_1d,_1e){
with(_1c){
return objj_msgSend(_1c,"buttonWithTitle:",_1e);
}
}),new objj_method(sel_getUid("standardButtonWithTitle:"),function(_1f,_20,_21){
with(_1f){
var _22=objj_msgSend(objj_msgSend(CPRadio,"alloc"),"init");
objj_msgSend(_22,"setTitle:",_21);
return _22;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_23,_24){
with(_23){
return "radio";
}
})]);
var _25="CPRadioRadioGroupKey";
var _1=objj_getClass("CPRadio");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPRadio\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_26,_27,_28){
with(_26){
_26=objj_msgSendSuper({receiver:_26,super_class:objj_getClass("CPRadio").super_class},"initWithCoder:",_28);
if(_26){
_radioGroup=objj_msgSend(_28,"decodeObjectForKey:",_25);
}
return _26;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_29,_2a,_2b){
with(_29){
objj_msgSendSuper({receiver:_29,super_class:objj_getClass("CPRadio").super_class},"encodeWithCoder:",_2b);
objj_msgSend(_2b,"encodeObject:forKey:",_radioGroup,_25);
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPRadioGroup"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_radios"),new objj_ivar("_selectedRadio"),new objj_ivar("_target"),new objj_ivar("_action")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("target"),function(_2c,_2d){
with(_2c){
return _target;
}
}),new objj_method(sel_getUid("setTarget:"),function(_2e,_2f,_30){
with(_2e){
_target=_30;
}
}),new objj_method(sel_getUid("action"),function(_31,_32){
with(_31){
return _action;
}
}),new objj_method(sel_getUid("setAction:"),function(_33,_34,_35){
with(_33){
_action=_35;
}
}),new objj_method(sel_getUid("init"),function(_36,_37){
with(_36){
_36=objj_msgSendSuper({receiver:_36,super_class:objj_getClass("CPRadioGroup").super_class},"init");
if(_36){
_radios=objj_msgSend(CPSet,"set");
_selectedRadio=nil;
}
return _36;
}
}),new objj_method(sel_getUid("_addRadio:"),function(_38,_39,_3a){
with(_38){
objj_msgSend(_radios,"addObject:",_3a);
if(objj_msgSend(_3a,"state")===CPOnState){
objj_msgSend(_38,"_setSelectedRadio:",_3a);
}
}
}),new objj_method(sel_getUid("_removeRadio:"),function(_3b,_3c,_3d){
with(_3b){
if(_selectedRadio===_3d){
_selectedRadio=nil;
}
objj_msgSend(_radios,"removeObject:",_3d);
}
}),new objj_method(sel_getUid("_setSelectedRadio:"),function(_3e,_3f,_40){
with(_3e){
if(_selectedRadio===_40){
return;
}
objj_msgSend(_selectedRadio,"setState:",CPOffState);
_selectedRadio=_40;
}
}),new objj_method(sel_getUid("selectedRadio"),function(_41,_42){
with(_41){
return _selectedRadio;
}
}),new objj_method(sel_getUid("radios"),function(_43,_44){
with(_43){
return objj_msgSend(_radios,"allObjects");
}
})]);
var _45="CPRadioGroupRadiosKey",_46="CPRadioGroupSelectedRadioKey";
var _1=objj_getClass("CPRadioGroup");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPRadioGroup\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_47,_48,_49){
with(_47){
_47=objj_msgSendSuper({receiver:_47,super_class:objj_getClass("CPRadioGroup").super_class},"init");
if(_47){
_radios=objj_msgSend(_49,"decodeObjectForKey:",_45);
_selectedRadio=objj_msgSend(_49,"decodeObjectForKey:",_46);
}
return _47;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_4a,_4b,_4c){
with(_4a){
objj_msgSend(_4c,"encodeObject:forKey:",_radios,_45);
objj_msgSend(_4c,"encodeObject:forKey:",_selectedRadio,_46);
}
})]);
p;13;CPResponder.jt;5870;@STATIC;1.0;I;21;Foundation/CPObject.jt;5825;
objj_executeFile("Foundation/CPObject.j",NO);
CPDeleteKeyCode=8;
CPTabKeyCode=9;
CPReturnKeyCode=13;
CPEscapeKeyCode=27;
CPSpaceKeyCode=32;
CPPageUpKeyCode=33;
CPPageDownKeyCode=34;
CPLeftArrowKeyCode=37;
CPUpArrowKeyCode=38;
CPRightArrowKeyCode=39;
CPDownArrowKeyCode=40;
CPDeleteForwardKeyCode=46;
var _1=objj_allocateClassPair(CPObject,"CPResponder"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_menu"),new objj_ivar("_nextResponder")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("acceptsFirstResponder"),function(_3,_4){
with(_3){
return NO;
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_5,_6){
with(_5){
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_7,_8){
with(_7){
return YES;
}
}),new objj_method(sel_getUid("setNextResponder:"),function(_9,_a,_b){
with(_9){
_nextResponder=_b;
}
}),new objj_method(sel_getUid("nextResponder"),function(_c,_d){
with(_c){
return _nextResponder;
}
}),new objj_method(sel_getUid("interpretKeyEvents:"),function(_e,_f,_10){
with(_e){
var _11=0,_12=objj_msgSend(_10,"count");
for(;_11<_12;++_11){
var _13=_10[_11],_14=objj_msgSend(_13,"modifierFlags"),_15=objj_msgSend(_13,"charactersIgnoringModifiers"),_16=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_15,_14);
if(_16){
for(var s=0,_17=_16.length;s<_17;s++){
var _18=_16[s];
if(!_18){
continue;
}
objj_msgSend(_e,"doCommandBySelector:",CPSelectorFromString(_18));
}
}else{
if(!(_14&(CPCommandKeyMask|CPControlKeyMask))&&objj_msgSend(_e,"respondsToSelector:",sel_getUid("insertText:"))){
objj_msgSend(_e,"insertText:",objj_msgSend(_13,"characters"));
}
}
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_19,_1a,_1b){
with(_19){
objj_msgSend(_nextResponder,"performSelector:withObject:",_1a,_1b);
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(_1c,_1d,_1e){
with(_1c){
objj_msgSend(_nextResponder,"performSelector:withObject:",_1d,_1e);
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_1f,_20,_21){
with(_1f){
objj_msgSend(_nextResponder,"performSelector:withObject:",_20,_21);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_nextResponder,"performSelector:withObject:",_23,_24);
}
}),new objj_method(sel_getUid("rightMouseUp:"),function(_25,_26,_27){
with(_25){
objj_msgSend(_nextResponder,"performSelector:withObject:",_26,_27);
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_28,_29,_2a){
with(_28){
objj_msgSend(_nextResponder,"performSelector:withObject:",_29,_2a);
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_2b,_2c,_2d){
with(_2b){
objj_msgSend(_nextResponder,"performSelector:withObject:",_2c,_2d);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_2e,_2f,_30){
with(_2e){
objj_msgSend(_nextResponder,"performSelector:withObject:",_2f,_30);
}
}),new objj_method(sel_getUid("scrollWheel:"),function(_31,_32,_33){
with(_31){
objj_msgSend(_nextResponder,"performSelector:withObject:",_32,_33);
}
}),new objj_method(sel_getUid("keyDown:"),function(_34,_35,_36){
with(_34){
objj_msgSend(_nextResponder,"performSelector:withObject:",_35,_36);
}
}),new objj_method(sel_getUid("keyUp:"),function(_37,_38,_39){
with(_37){
objj_msgSend(_nextResponder,"performSelector:withObject:",_38,_39);
}
}),new objj_method(sel_getUid("flagsChanged:"),function(_3a,_3b,_3c){
with(_3a){
objj_msgSend(_nextResponder,"performSelector:withObject:",_3b,_3c);
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_3d,_3e,_3f){
with(_3d){
return NO;
}
}),new objj_method(sel_getUid("insertLineBreak:"),function(_40,_41,_42){
with(_40){
objj_msgSend(_40,"insertNewline:",_42);
}
}),new objj_method(sel_getUid("insertNewline:"),function(_43,_44,_45){
with(_43){
objj_msgSend(objj_msgSend(_43,"nextResponder"),"insertNewline:",_45);
}
}),new objj_method(sel_getUid("insertTab:"),function(_46,_47,_48){
with(_46){
}
}),new objj_method(sel_getUid("insertBackTab:"),function(_49,_4a,_4b){
with(_49){
}
}),new objj_method(sel_getUid("insertText:"),function(_4c,_4d,_4e){
with(_4c){
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_4f,_50,_51){
with(_4f){
if(objj_msgSend(_4f,"respondsToSelector:",_51)){
objj_msgSend(_4f,"performSelector:",_51);
}else{
objj_msgSend(_nextResponder,"doCommandBySelector:",_51);
}
}
}),new objj_method(sel_getUid("tryToPerform:with:"),function(_52,_53,_54,_55){
with(_52){
if(objj_msgSend(_52,"respondsToSelector:",_54)){
objj_msgSend(_52,"performSelector:withObject:",_54,_55);
return YES;
}
return objj_msgSend(_nextResponder,"tryToPerform:with:",_54,_55);
}
}),new objj_method(sel_getUid("setMenu:"),function(_56,_57,_58){
with(_56){
_menu=_58;
}
}),new objj_method(sel_getUid("menu"),function(_59,_5a){
with(_59){
return _menu;
}
}),new objj_method(sel_getUid("undoManager"),function(_5b,_5c){
with(_5b){
return objj_msgSend(_nextResponder,"performSelector:",_5c);
}
}),new objj_method(sel_getUid("noResponderFor:"),function(_5d,_5e,_5f){
with(_5d){
}
})]);
var _60="CPResponderNextResponderKey",_61="CPResponderMenuKey";
var _1=objj_getClass("CPResponder");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPResponder\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_62,_63,_64){
with(_62){
_62=objj_msgSendSuper({receiver:_62,super_class:objj_getClass("CPResponder").super_class},"init");
if(_62){
objj_msgSend(_62,"setNextResponder:",objj_msgSend(_64,"decodeObjectForKey:",_60));
objj_msgSend(_62,"setMenu:",objj_msgSend(_64,"decodeObjectForKey:",_61));
}
return _62;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_65,_66,_67){
with(_65){
if(_nextResponder!==nil){
objj_msgSend(_67,"encodeConditionalObject:forKey:",_nextResponder,_60);
}
objj_msgSend(_67,"encodeObject:forKey:",_menu,_61);
}
})]);
p;13;CPSavePanel.jt;2730;@STATIC;1.0;i;9;CPPanel.jt;2698;
objj_executeFile("CPPanel.j",YES);
var _1=objj_allocateClassPair(CPPanel,"CPSavePanel"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_URL"),new objj_ivar("_isExtensionHidden"),new objj_ivar("_canSelectHiddenExtension"),new objj_ivar("_allowsOtherFileTypes"),new objj_ivar("_canCreateDirectories"),new objj_ivar("_allowedFileTypes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isExtensionHidden"),function(_3,_4){
with(_3){
return _isExtensionHidden;
}
}),new objj_method(sel_getUid("setExtensionHidden:"),function(_5,_6,_7){
with(_5){
_isExtensionHidden=_7;
}
}),new objj_method(sel_getUid("canSelectHiddenExtension"),function(_8,_9){
with(_8){
return _canSelectHiddenExtension;
}
}),new objj_method(sel_getUid("setCanSelectHiddenExtension:"),function(_a,_b,_c){
with(_a){
_canSelectHiddenExtension=_c;
}
}),new objj_method(sel_getUid("allowsOtherFileTypes"),function(_d,_e){
with(_d){
return _allowsOtherFileTypes;
}
}),new objj_method(sel_getUid("setAllowsOtherFileTypes:"),function(_f,_10,_11){
with(_f){
_allowsOtherFileTypes=_11;
}
}),new objj_method(sel_getUid("canCreateDirectories"),function(_12,_13){
with(_12){
return _canCreateDirectories;
}
}),new objj_method(sel_getUid("setCanCreateDirectories:"),function(_14,_15,_16){
with(_14){
_canCreateDirectories=_16;
}
}),new objj_method(sel_getUid("allowedFileTypes"),function(_17,_18){
with(_17){
return _allowedFileTypes;
}
}),new objj_method(sel_getUid("setAllowedFileTypes:"),function(_19,_1a,_1b){
with(_19){
_allowedFileTypes=_1b;
}
}),new objj_method(sel_getUid("init"),function(_1c,_1d){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPSavePanel").super_class},"init")){
_canCreateDirectories=YES;
}
return _1c;
}
}),new objj_method(sel_getUid("runModal"),function(_1e,_1f){
with(_1e){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
if(typeof window["cpSavePanel"]==="function"){
var _20=window.cpSavePanel({isExtensionHidden:_isExtensionHidden,canSelectHiddenExtension:_canSelectHiddenExtension,allowsOtherFileTypes:_allowsOtherFileTypes,canCreateDirectories:_canCreateDirectories,allowedFileTypes:_allowedFileTypes}),_21=_20.button;
_URL=_21?objj_msgSend(CPURL,"URLWithString:",_20.URL):nil;
}else{
var _22=window.prompt("Document Name:"),_21=_22!==null;
_URL=_21?objj_msgSend(objj_msgSend(_1e,"class"),"proposedFileURLWithDocumentName:",_22):nil;
}
return _21;
}
}),new objj_method(sel_getUid("URL"),function(_23,_24){
with(_23){
return _URL;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("savePanel"),function(_25,_26){
with(_25){
return objj_msgSend(objj_msgSend(CPSavePanel,"alloc"),"init");
}
})]);
p;10;CPScreen.jt;421;@STATIC;1.0;I;21;Foundation/CPObject.jt;377;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPScreen"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("visibleFrame"),function(_3,_4){
with(_3){
return {origin:{x:window.screen.availLeft,y:window.screen.availTop},size:{width:window.screen.availWidth,height:window.screen.availHeight}};
}
})]);
p;12;CPScroller.jt;21713;@STATIC;1.0;i;11;CPControl.jt;21677;
objj_executeFile("CPControl.j",YES);
CPScrollerNoPart=0;
CPScrollerDecrementPage=1;
CPScrollerKnob=2;
CPScrollerIncrementPage=3;
CPScrollerDecrementLine=4;
CPScrollerIncrementLine=5;
CPScrollerKnobSlot=6;
CPScrollerIncrementArrow=0;
CPScrollerDecrementArrow=1;
CPNoScrollerParts=0;
CPOnlyScrollerArrows=1;
CPAllScrollerParts=2;
var _1=[CPScrollerKnobSlot,CPScrollerDecrementLine,CPScrollerIncrementLine,CPScrollerKnob],_2={},_3={};
_2[CPScrollerDecrementLine]="decrement-line";
_2[CPScrollerIncrementLine]="increment-line";
_2[CPScrollerKnobSlot]="knob-slot";
_2[CPScrollerKnob]="knob";
CPScrollerStyleLegacy=0;
CPScrollerStyleOverlay=1;
CPScrollerKnobStyleDefault=0;
CPScrollerKnobStyleDark=1;
CPScrollerKnobStyleLight=2;
CPThemeStateScrollViewLegacy=CPThemeState("scroller-style-legacy");
CPThemeStateScrollerKnobLight=CPThemeState("scroller-knob-light");
CPThemeStateScrollerKnobDark=CPThemeState("scroller-knob-dark");
var _4=objj_allocateClassPair(CPControl,"CPScroller"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_controlSize"),new objj_ivar("_usableParts"),new objj_ivar("_partRects"),new objj_ivar("_isVertical"),new objj_ivar("_knobProportion"),new objj_ivar("_hitPart"),new objj_ivar("_trackingPart"),new objj_ivar("_trackingFloatValue"),new objj_ivar("_trackingStartPoint"),new objj_ivar("_animationScroller"),new objj_ivar("_allowFadingOut"),new objj_ivar("_style"),new objj_ivar("_timerFadeOut"),new objj_ivar("_isMouseOver")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("isVertical"),function(_6,_7){
with(_6){
return _isVertical;
}
}),new objj_method(sel_getUid("allowFadingOut"),function(_8,_9){
with(_8){
return _allowFadingOut;
}
}),new objj_method(sel_getUid("_setAllowFadingOut:"),function(_a,_b,_c){
with(_a){
_allowFadingOut=_c;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_d,_e,_f){
with(_d){
if(_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPScroller").super_class},"initWithFrame:",_f)){
_controlSize=CPRegularControlSize;
_partRects=[];
objj_msgSend(_d,"setFloatValue:",0);
objj_msgSend(_d,"setKnobProportion:",1);
_hitPart=CPScrollerNoPart;
_allowFadingOut=YES;
_isMouseOver=NO;
_style=CPScrollerStyleOverlay;
var _10=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_d,CPViewAnimationFadeOutEffect],[CPViewAnimationTargetKey,CPViewAnimationEffectKey]);
_animationScroller=objj_msgSend(objj_msgSend(CPViewAnimation,"alloc"),"initWithDuration:animationCurve:",0.2,CPAnimationEaseInOut);
objj_msgSend(_animationScroller,"setViewAnimations:",[_10]);
objj_msgSend(_animationScroller,"setDelegate:",_d);
objj_msgSend(_d,"setAlphaValue:",0);
objj_msgSend(_d,"_calculateIsVertical");
}
return _d;
}
}),new objj_method(sel_getUid("style"),function(_11,_12){
with(_11){
return _style;
}
}),new objj_method(sel_getUid("setStyle:"),function(_13,_14,_15){
with(_13){
if(_style!=nil&&_style===_15){
return;
}
_style=_15;
if(_style===CPScrollerStyleLegacy){
objj_msgSend(_13,"fadeIn");
objj_msgSend(_13,"setThemeState:",CPThemeStateScrollViewLegacy);
}else{
_allowFadingOut=YES;
objj_msgSend(_13,"unsetThemeState:",CPThemeStateScrollViewLegacy);
}
objj_msgSend(_13,"_adjustScrollerSize");
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_16,_17,_18){
with(_16){
objj_msgSendSuper({receiver:_16,super_class:objj_getClass("CPScroller").super_class},"setObjectValue:",MIN(1,MAX(0,+_18)));
}
}),new objj_method(sel_getUid("controlSize"),function(_19,_1a){
with(_19){
return _controlSize;
}
}),new objj_method(sel_getUid("setControlSize:"),function(_1b,_1c,_1d){
with(_1b){
if(_controlSize==_1d){
return;
}
_controlSize=_1d;
objj_msgSend(_1b,"setNeedsLayout");
objj_msgSend(_1b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("knobProportion"),function(_1e,_1f){
with(_1e){
return _knobProportion;
}
}),new objj_method(sel_getUid("setKnobProportion:"),function(_20,_21,_22){
with(_20){
if(!(!isNaN(parseFloat(_22))&&isFinite(_22))){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"aProportion must be numeric");
}
_knobProportion=MIN(1,MAX(0.0001,_22));
objj_msgSend(_20,"setNeedsDisplay:",YES);
objj_msgSend(_20,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_adjustScrollerSize"),function(_23,_24){
with(_23){
var _25=objj_msgSend(_23,"frame"),_26=objj_msgSend(_23,"currentValueForThemeAttribute:","scroller-width");
if(objj_msgSend(_23,"isVertical")&&CGRectGetWidth(_25)!==_26){
_25.size.width=_26;
}
if(!objj_msgSend(_23,"isVertical")&&CGRectGetHeight(_25)!==_26){
_25.size.height=_26;
}
objj_msgSend(_23,"setFrame:",_25);
}
}),new objj_method(sel_getUid("_performFadeOut:"),function(_27,_28,_29){
with(_27){
objj_msgSend(_27,"fadeOut");
_timerFadeOut=nil;
}
}),new objj_method(sel_getUid("rectForPart:"),function(_2a,_2b,_2c){
with(_2a){
if(_2c==CPScrollerNoPart){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
return _partRects[_2c];
}
}),new objj_method(sel_getUid("testPart:"),function(_2d,_2e,_2f){
with(_2d){
_2f=objj_msgSend(_2d,"convertPoint:fromView:",_2f,nil);
if(!objj_msgSend(_2d,"hasThemeState:",CPThemeStateSelected)){
return CPScrollerNoPart;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerKnob),_2f)){
return CPScrollerKnob;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerDecrementPage),_2f)){
return CPScrollerDecrementPage;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerIncrementPage),_2f)){
return CPScrollerIncrementPage;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerDecrementLine),_2f)){
return CPScrollerDecrementLine;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerIncrementLine),_2f)){
return CPScrollerIncrementLine;
}
if(CGRectContainsPoint(objj_msgSend(_2d,"rectForPart:",CPScrollerKnobSlot),_2f)){
return CPScrollerKnobSlot;
}
return CPScrollerNoPart;
}
}),new objj_method(sel_getUid("checkSpaceForParts"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"bounds");
if(_knobProportion===1){
_usableParts=CPNoScrollerParts;
_partRects[CPScrollerDecrementPage]=CGRectMakeZero();
_partRects[CPScrollerKnob]=CGRectMakeZero();
_partRects[CPScrollerIncrementPage]=CGRectMakeZero();
_partRects[CPScrollerDecrementLine]=CGRectMakeZero();
_partRects[CPScrollerIncrementLine]=CGRectMakeZero();
_partRects[CPScrollerKnobSlot]=CGRectMakeCopy(_32);
return;
}
_usableParts=CPAllScrollerParts;
var _33=objj_msgSend(_30,"currentValueForThemeAttribute:","knob-inset"),_34=objj_msgSend(_30,"currentValueForThemeAttribute:","track-inset"),_35=(_32.size.width),_36=(_32.size.height);
if(objj_msgSend(_30,"isVertical")){
var _37=objj_msgSend(_30,"currentValueForThemeAttribute:","decrement-line-size"),_38=objj_msgSend(_30,"currentValueForThemeAttribute:","increment-line-size"),_39=_37.height+_34.top,_3a=_38.height+_34.bottom,_3b=_36-_39-_3a,_3c=objj_msgSend(_30,"currentValueForThemeAttribute:","minimum-knob-length"),_3d=_35-_33.left-_33.right,_3e=MAX(_3c,(_3b*_knobProportion)),_3f=_39+(_3b-_3e)*objj_msgSend(_30,"floatValue");
_partRects[CPScrollerDecrementPage]={origin:{x:0,y:_39},size:{width:_35,height:_3f-_39}};
_partRects[CPScrollerKnob]={origin:{x:_33.left,y:_3f},size:{width:_3d,height:_3e}};
_partRects[CPScrollerIncrementPage]={origin:{x:0,y:_3f+_3e},size:{width:_35,height:_36-(_3f+_3e)-_3a}};
_partRects[CPScrollerKnobSlot]={origin:{x:_34.left,y:_39},size:{width:_35-_34.left-_34.right,height:_3b}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:_37.width,height:_37.height}};
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:_36-_38.height},size:{width:_38.width,height:_38.height}};
if(_36<_3e+_37.height+_38.height+_34.top+_34.bottom){
_partRects[CPScrollerKnob]={origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_36<_37.height+_38.height-2){
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerKnobSlot]={origin:{x:_34.left,y:0},size:{width:_35-_34.left-_34.right,height:_36}};
}
}else{
var _37=objj_msgSend(_30,"currentValueForThemeAttribute:","decrement-line-size"),_38=objj_msgSend(_30,"currentValueForThemeAttribute:","increment-line-size"),_40=_37.width+_34.left,_41=_38.width+_34.right,_3b=_35-_40-_41,_3c=objj_msgSend(_30,"currentValueForThemeAttribute:","minimum-knob-length"),_3d=MAX(_3c,(_3b*_knobProportion)),_3e=_36-_33.top-_33.bottom,_3f=_40+(_3b-_3d)*objj_msgSend(_30,"floatValue");
_partRects[CPScrollerDecrementPage]={origin:{x:_40,y:0},size:{width:_3f-_40,height:_36}};
_partRects[CPScrollerKnob]={origin:{x:_3f,y:_33.top},size:{width:_3d,height:_3e}};
_partRects[CPScrollerIncrementPage]={origin:{x:_3f+_3d,y:0},size:{width:_35-(_3f+_3d)-_41,height:_36}};
_partRects[CPScrollerKnobSlot]={origin:{x:_40,y:_34.top},size:{width:_3b,height:_36-_34.top-_34.bottom}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:_37.width,height:_37.height}};
_partRects[CPScrollerIncrementLine]={origin:{x:_35-_38.width,y:0},size:{width:_38.width,height:_38.height}};
if(_35<_3d+_37.width+_38.width+_34.left+_34.right){
_partRects[CPScrollerKnob]={origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_35<_37.width+_38.width-2){
_partRects[CPScrollerIncrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerDecrementLine]={origin:{x:0,y:0},size:{width:0,height:0}};
_partRects[CPScrollerKnobSlot]={origin:{x:0,y:0},size:{width:_35,height:_3b}};
}
}
}
}),new objj_method(sel_getUid("usableParts"),function(_42,_43){
with(_42){
return _usableParts;
}
}),new objj_method(sel_getUid("fadeIn"),function(_44,_45){
with(_44){
if(_isMouseOver&&_knobProportion!=1){
objj_msgSend(_44,"setThemeState:",CPThemeStateSelected);
}
if(_timerFadeOut){
objj_msgSend(_timerFadeOut,"invalidate");
}
objj_msgSend(_44,"setAlphaValue:",1);
}
}),new objj_method(sel_getUid("fadeOut"),function(_46,_47){
with(_46){
if(objj_msgSend(_46,"hasThemeState:",CPThemeStateScrollViewLegacy)){
return;
}
objj_msgSend(_animationScroller,"startAnimation");
}
}),new objj_method(sel_getUid("drawArrow:highlight:"),function(_48,_49,_4a,_4b){
with(_48){
}
}),new objj_method(sel_getUid("drawKnob"),function(_4c,_4d){
with(_4c){
}
}),new objj_method(sel_getUid("drawKnobSlot"),function(_4e,_4f){
with(_4e){
}
}),new objj_method(sel_getUid("createViewForPart:"),function(_50,_51,_52){
with(_50){
var _53=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_53,"setHitTests:",NO);
return _53;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_54,_55,_56){
with(_54){
return _partRects[_56];
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_57,_58,_59){
with(_57){
var _5a=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_5a,"setHitTests:",NO);
return _5a;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_5b,_5c){
with(_5b){
objj_msgSend(_5b,"checkSpaceForParts");
var _5d=0,_5e=_1.length,_5f;
for(;_5d<_5e;++_5d){
var _60=_1[_5d];
if(_5d===0){
_5f=objj_msgSend(_5b,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:",_60,CPWindowBelow,_1[_5d+1]);
}else{
_5f=objj_msgSend(_5b,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:",_60,CPWindowAbove,_1[_5d-1]);
}
if(_5f){
objj_msgSend(_5f,"setBackgroundColor:",objj_msgSend(_5b,"currentValueForThemeAttribute:",_2[_60]+"-color"));
}
}
}
}),new objj_method(sel_getUid("drawParts"),function(_61,_62){
with(_61){
objj_msgSend(_61,"drawKnobSlot");
objj_msgSend(_61,"drawKnob");
objj_msgSend(_61,"drawArrow:highlight:",CPScrollerDecrementArrow,NO);
objj_msgSend(_61,"drawArrow:highlight:",CPScrollerIncrementArrow,NO);
}
}),new objj_method(sel_getUid("hitPart"),function(_63,_64){
with(_63){
return _hitPart;
}
}),new objj_method(sel_getUid("trackKnob:"),function(_65,_66,_67){
with(_65){
var _68=objj_msgSend(_67,"type");
if(_68===CPLeftMouseUp){
_hitPart=CPScrollerNoPart;
return;
}
if(_68===CPLeftMouseDown){
_trackingFloatValue=objj_msgSend(_65,"floatValue");
_trackingStartPoint=objj_msgSend(_65,"convertPoint:fromView:",objj_msgSend(_67,"locationInWindow"),nil);
}else{
if(_68===CPLeftMouseDragged){
var _69=objj_msgSend(_65,"rectForPart:",CPScrollerKnob),_6a=objj_msgSend(_65,"rectForPart:",CPScrollerKnobSlot),_6b=!objj_msgSend(_65,"isVertical")?((_6a.size.width)-(_69.size.width)):((_6a.size.height)-(_69.size.height));
if(_6b<=0){
objj_msgSend(_65,"setFloatValue:",0);
}else{
var _6c=objj_msgSend(_65,"convertPoint:fromView:",objj_msgSend(_67,"locationInWindow"),nil),_6d=!objj_msgSend(_65,"isVertical")?_6c.x-_trackingStartPoint.x:_6c.y-_trackingStartPoint.y;
objj_msgSend(_65,"setFloatValue:",_trackingFloatValue+_6d/_6b);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_65,sel_getUid("trackKnob:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
if(_68===CPLeftMouseDragged){
objj_msgSend(_65,"sendAction:to:",objj_msgSend(_65,"action"),objj_msgSend(_65,"target"));
}
}
}),new objj_method(sel_getUid("trackScrollButtons:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_70,"type");
if(_71===CPLeftMouseUp){
objj_msgSend(_6e,"highlight:",NO);
objj_msgSend(CPEvent,"stopPeriodicEvents");
_hitPart=CPScrollerNoPart;
return;
}
if(_71===CPLeftMouseDown){
_trackingPart=objj_msgSend(_6e,"hitPart");
_trackingStartPoint=objj_msgSend(_6e,"convertPoint:fromView:",objj_msgSend(_70,"locationInWindow"),nil);
if(objj_msgSend(_70,"modifierFlags")&CPAlternateKeyMask){
if(_trackingPart==CPScrollerDecrementLine){
_hitPart=CPScrollerDecrementPage;
}else{
if(_trackingPart==CPScrollerIncrementLine){
_hitPart=CPScrollerIncrementPage;
}else{
if(_trackingPart==CPScrollerDecrementPage||_trackingPart==CPScrollerIncrementPage){
var _72=objj_msgSend(_6e,"rectForPart:",CPScrollerKnob),_73=!objj_msgSend(_6e,"isVertical")?(_72.size.width):(_72.size.height),_74=objj_msgSend(_6e,"rectForPart:",CPScrollerKnobSlot),_75=(!objj_msgSend(_6e,"isVertical")?(_74.size.width):(_74.size.height))-_73;
objj_msgSend(_6e,"setFloatValue:",((!objj_msgSend(_6e,"isVertical")?_trackingStartPoint.x-(_74.origin.x):_trackingStartPoint.y-(_74.origin.y))-_73/2)/_75);
_hitPart=CPScrollerKnob;
objj_msgSend(_6e,"sendAction:to:",objj_msgSend(_6e,"action"),objj_msgSend(_6e,"target"));
return objj_msgSend(_6e,"trackKnob:",_70);
}
}
}
}
objj_msgSend(_6e,"highlight:",YES);
objj_msgSend(_6e,"sendAction:to:",objj_msgSend(_6e,"action"),objj_msgSend(_6e,"target"));
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0.5,0.04);
}else{
if(_71===CPLeftMouseDragged){
_trackingStartPoint=objj_msgSend(_6e,"convertPoint:fromView:",objj_msgSend(_70,"locationInWindow"),nil);
if(_trackingPart==CPScrollerDecrementPage||_trackingPart==CPScrollerIncrementPage){
var _76=objj_msgSend(_6e,"testPart:",objj_msgSend(_70,"locationInWindow"));
if(_76==CPScrollerDecrementPage||_76==CPScrollerIncrementPage){
_trackingPart=_76;
_hitPart=_76;
}
}
objj_msgSend(_6e,"highlight:",CGRectContainsPoint(objj_msgSend(_6e,"rectForPart:",_trackingPart),_trackingStartPoint));
}else{
if(_71==CPPeriodic&&CGRectContainsPoint(objj_msgSend(_6e,"rectForPart:",_trackingPart),_trackingStartPoint)){
objj_msgSend(_6e,"sendAction:to:",objj_msgSend(_6e,"action"),objj_msgSend(_6e,"target"));
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_6e,sel_getUid("trackScrollButtons:"),CPPeriodicMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("_calculateIsVertical"),function(_77,_78){
with(_77){
var _79=objj_msgSend(_77,"bounds"),_7a=(_79.size.width),_7b=(_79.size.height);
_isVertical=_7a<_7b?1:(_7a>_7b?0:-1);
if(_isVertical===1){
objj_msgSend(_77,"setThemeState:",CPThemeStateVertical);
}else{
if(_isVertical===0){
objj_msgSend(_77,"unsetThemeState:",CPThemeStateVertical);
}
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_7c,_7d,_7e){
with(_7c){
objj_msgSendSuper({receiver:_7c,super_class:objj_getClass("CPScroller").super_class},"setFrameSize:",_7e);
objj_msgSend(_7c,"checkSpaceForParts");
objj_msgSend(_7c,"setNeedsLayout");
}
}),new objj_method(sel_getUid("currentValueForThemeAttribute:"),function(_7f,_80,_81){
with(_7f){
var _82=_themeState;
if(_2[_hitPart]+"-color"!==_81){
_82&=~CPThemeStateHighlighted;
}
return objj_msgSend(_7f,"valueForThemeAttribute:inState:",_81,_82);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_83,_84,_85){
with(_83){
if(!objj_msgSend(_83,"isEnabled")){
return;
}
_hitPart=objj_msgSend(_83,"testPart:",objj_msgSend(_85,"locationInWindow"));
switch(_hitPart){
case CPScrollerKnob:
return objj_msgSend(_83,"trackKnob:",_85);
case CPScrollerDecrementLine:
case CPScrollerIncrementLine:
case CPScrollerDecrementPage:
case CPScrollerIncrementPage:
return objj_msgSend(_83,"trackScrollButtons:",_85);
}
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_86,_87,_88){
with(_86){
objj_msgSendSuper({receiver:_86,super_class:objj_getClass("CPScroller").super_class},"mouseEntered:",_88);
if(_timerFadeOut){
objj_msgSend(_timerFadeOut,"invalidate");
}
if(!objj_msgSend(_86,"isEnabled")){
return;
}
_allowFadingOut=NO;
_isMouseOver=YES;
if(objj_msgSend(_86,"alphaValue")>0&&_knobProportion!=1){
objj_msgSend(_86,"setThemeState:",CPThemeStateSelected);
}
}
}),new objj_method(sel_getUid("mouseExited:"),function(_89,_8a,_8b){
with(_89){
objj_msgSendSuper({receiver:_89,super_class:objj_getClass("CPScroller").super_class},"mouseExited:",_8b);
if(objj_msgSend(_89,"isHidden")||!objj_msgSend(_89,"isEnabled")||!_isMouseOver){
return;
}
_allowFadingOut=YES;
_isMouseOver=NO;
if(_timerFadeOut){
objj_msgSend(_timerFadeOut,"invalidate");
}
_timerFadeOut=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",1.2,_89,sel_getUid("_performFadeOut:"),nil,NO);
}
}),new objj_method(sel_getUid("animationDidEnd:"),function(_8c,_8d,_8e){
with(_8c){
objj_msgSend(_8c,"unsetThemeState:",CPThemeStateSelected);
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("defaultThemeClass"),function(_8f,_90){
with(_8f){
return "scroller";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_91,_92){
with(_91){
return objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"scroller-width":7,"knob-slot-color":objj_msgSend(CPNull,"null"),"decrement-line-color":objj_msgSend(CPNull,"null"),"increment-line-color":objj_msgSend(CPNull,"null"),"knob-color":objj_msgSend(CPNull,"null"),"decrement-line-size":{width:0,height:0},"increment-line-size":{width:0,height:0},"track-inset":{top:(0),right:(0),bottom:(0),left:(0)},"knob-inset":{top:(0),right:(0),bottom:(0),left:(0)},"minimum-knob-length":21,"track-border-overlay":9});
}
}),new objj_method(sel_getUid("scrollerWidth"),function(_93,_94){
with(_93){
return objj_msgSend(_93,"scrollerWidthInStyle:",CPScrollerStyleLegacy);
}
}),new objj_method(sel_getUid("scrollerWidthInStyle:"),function(_95,_96,_97){
with(_95){
var _98=objj_msgSend(objj_msgSend(_95,"alloc"),"init");
if(_97==CPScrollerStyleLegacy){
return objj_msgSend(_98,"valueForThemeAttribute:inState:","scroller-width",CPThemeStateScrollViewLegacy);
}
return objj_msgSend(_98,"currentValueForThemeAttribute:","scroller-width");
}
}),new objj_method(sel_getUid("scrollerOverlay"),function(_99,_9a){
with(_99){
return objj_msgSend(objj_msgSend(objj_msgSend(_99,"alloc"),"init"),"currentValueForThemeAttribute:","track-border-overlay");
}
}),new objj_method(sel_getUid("scrollerWidthForControlSize:"),function(_9b,_9c,_9d){
with(_9b){
return objj_msgSend(_9b,"scrollerWidth");
}
})]);
var _9e="CPScrollerControlSize",_9f="CPScrollerKnobProportion",_a0="CPScrollerStyleKey";
var _4=objj_getClass("CPScroller");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_a1,_a2,_a3){
with(_a1){
if(_a1=objj_msgSendSuper({receiver:_a1,super_class:objj_getClass("CPScroller").super_class},"initWithCoder:",_a3)){
_controlSize=CPRegularControlSize;
if(objj_msgSend(_a3,"containsValueForKey:",_9e)){
_controlSize=objj_msgSend(_a3,"decodeIntForKey:",_9e);
}
_knobProportion=1;
if(objj_msgSend(_a3,"containsValueForKey:",_9f)){
_knobProportion=objj_msgSend(_a3,"decodeFloatForKey:",_9f);
}
_partRects=[];
_hitPart=CPScrollerNoPart;
_allowFadingOut=YES;
_isMouseOver=NO;
var _a4=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_a1,CPViewAnimationFadeOutEffect],[CPViewAnimationTargetKey,CPViewAnimationEffectKey]);
_animationScroller=objj_msgSend(objj_msgSend(CPViewAnimation,"alloc"),"initWithDuration:animationCurve:",0.2,CPAnimationEaseInOut);
objj_msgSend(_animationScroller,"setViewAnimations:",[_a4]);
objj_msgSend(_animationScroller,"setDelegate:",_a1);
objj_msgSend(_a1,"setAlphaValue:",0);
objj_msgSend(_a1,"_calculateIsVertical");
objj_msgSend(_a1,"setStyle:",objj_msgSend(_a3,"decodeIntForKey:",_a0));
}
return _a1;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_a5,_a6,_a7){
with(_a5){
objj_msgSendSuper({receiver:_a5,super_class:objj_getClass("CPScroller").super_class},"encodeWithCoder:",_a7);
objj_msgSend(_a7,"encodeInt:forKey:",_controlSize,_9e);
objj_msgSend(_a7,"encodeFloat:forKey:",_knobProportion,_9f);
objj_msgSend(_a7,"encodeInt:forKey:",_style,_a0);
}
})]);
var _4=objj_getClass("CPScroller");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("setFloatValue:knobProportion:"),function(_a8,_a9,_aa,_ab){
with(_a8){
objj_msgSend(_a8,"setFloatValue:",_aa);
objj_msgSend(_a8,"setKnobProportion:",_ab);
}
})]);
p;14;CPScrollView.jt;36155;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.ji;7;CPBox.ji;12;CPClipView.ji;12;CPScroller.ji;8;CPView.jt;36040;
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPScroller.j",YES);
objj_executeFile("CPView.j",YES);
var _1=function(){
var _2=document.createElement("p"),_3=document.createElement("div");
_2.style.width="100%";
_2.style.height="200px";
_3.style.position="absolute";
_3.style.top="0px";
_3.style.left="0px";
_3.style.visibility="hidden";
_3.style.width="200px";
_3.style.height="150px";
_3.style.overflow="hidden";
_3.appendChild(_2);
document.body.appendChild(_3);
var w1=_2.offsetWidth;
_3.style.overflow="scroll";
var w2=_2.offsetWidth;
if(w1==w2){
w2=_3.clientWidth;
}
document.body.removeChild(_3);
return (w1-w2==0);
};
var _4=0.2,_5=1<<0,_6=1<<1,_7=1.3;
var _8=CPScrollerStyleOverlay,_9="CPScrollerStyleGlobalChangeNotification";
var _a=objj_allocateClassPair(CPView,"CPScrollView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_contentView"),new objj_ivar("_headerClipView"),new objj_ivar("_cornerView"),new objj_ivar("_bottomCornerView"),new objj_ivar("_delegate"),new objj_ivar("_scrollTimer"),new objj_ivar("_hasVerticalScroller"),new objj_ivar("_hasHorizontalScroller"),new objj_ivar("_autohidesScrollers"),new objj_ivar("_verticalScroller"),new objj_ivar("_horizontalScroller"),new objj_ivar("_recursionCount"),new objj_ivar("_implementedDelegateMethods"),new objj_ivar("_verticalLineScroll"),new objj_ivar("_verticalPageScroll"),new objj_ivar("_horizontalLineScroll"),new objj_ivar("_horizontalPageScroll"),new objj_ivar("_borderType"),new objj_ivar("_timerScrollersHide"),new objj_ivar("_scrollerStyle"),new objj_ivar("_scrollerKnobStyle")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPScrollView").super_class},"initWithFrame:",_e);
if(_c){
_verticalLineScroll=10;
_verticalPageScroll=10;
_horizontalLineScroll=10;
_horizontalPageScroll=10;
_borderType=CPNoBorder;
_contentView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"initWithFrame:",objj_msgSend(_c,"_insetBounds"));
objj_msgSend(_c,"addSubview:",_contentView);
_headerClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"init");
objj_msgSend(_c,"addSubview:",_headerClipView);
_bottomCornerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"init");
objj_msgSend(_c,"addSubview:",_bottomCornerView);
objj_msgSend(_c,"setHasVerticalScroller:",YES);
objj_msgSend(_c,"setHasHorizontalScroller:",YES);
_scrollerKnobStyle=CPScrollerKnobStyleDefault;
objj_msgSend(_c,"setScrollerStyle:",_8);
_delegate=nil;
_scrollTimer=nil;
_implementedDelegateMethods=0;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_c,sel_getUid("_didReceiveDefaultStyleChange:"),_9,nil);
}
return _c;
}
}),new objj_method(sel_getUid("delegate"),function(_f,_10){
with(_f){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_11,_12,_13){
with(_11){
if(_13===_delegate){
return;
}
_delegate=_13;
_implementedDelegateMethods=0;
if(_delegate===nil){
return;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("scrollViewWillScroll:"))){
_implementedDelegateMethods|=_5;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("scrollViewDidScroll:"))){
_implementedDelegateMethods|=_6;
}
}
}),new objj_method(sel_getUid("scrollerStyle"),function(_14,_15){
with(_14){
return _scrollerStyle;
}
}),new objj_method(sel_getUid("setScrollerStyle:"),function(_16,_17,_18){
with(_16){
if(_scrollerStyle===_18){
return;
}
_scrollerStyle=_18;
objj_msgSend(_16,"_updateScrollerStyle");
}
}),new objj_method(sel_getUid("scrollerKnobStyle"),function(_19,_1a){
with(_19){
return _scrollerKnobStyle;
}
}),new objj_method(sel_getUid("setScrollerKnobStyle:"),function(_1b,_1c,_1d){
with(_1b){
if(_scrollerKnobStyle===_1d){
return;
}
_scrollerKnobStyle=_1d;
objj_msgSend(_1b,"_updateScrollerStyle");
}
}),new objj_method(sel_getUid("contentView"),function(_1e,_1f){
with(_1e){
return _contentView;
}
}),new objj_method(sel_getUid("setContentView:"),function(_20,_21,_22){
with(_20){
if(_contentView===_22||!_22){
return;
}
var _23=objj_msgSend(_22,"documentView");
if(_23){
objj_msgSend(_23,"removeFromSuperview");
}
objj_msgSend(_contentView,"removeFromSuperview");
_contentView=_22;
objj_msgSend(_contentView,"setDocumentView:",_23);
objj_msgSend(_20,"addSubview:",_contentView);
objj_msgSend(_20,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("contentSize"),function(_24,_25){
with(_24){
return objj_msgSend(_contentView,"frame").size;
}
}),new objj_method(sel_getUid("documentView"),function(_26,_27){
with(_26){
return objj_msgSend(_contentView,"documentView");
}
}),new objj_method(sel_getUid("setDocumentView:"),function(_28,_29,_2a){
with(_28){
objj_msgSend(_contentView,"setDocumentView:",_2a);
objj_msgSend(_28,"_updateCornerAndHeaderView");
objj_msgSend(_28,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("borderType"),function(_2b,_2c){
with(_2b){
return _borderType;
}
}),new objj_method(sel_getUid("setBorderType:"),function(_2d,_2e,_2f){
with(_2d){
if(_borderType==_2f){
return;
}
_borderType=_2f;
objj_msgSend(_2d,"reflectScrolledClipView:",_contentView);
objj_msgSend(_2d,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("horizontalScroller"),function(_30,_31){
with(_30){
return _horizontalScroller;
}
}),new objj_method(sel_getUid("setHorizontalScroller:"),function(_32,_33,_34){
with(_32){
if(_horizontalScroller===_34){
return;
}
objj_msgSend(_horizontalScroller,"removeFromSuperview");
objj_msgSend(_horizontalScroller,"setTarget:",nil);
objj_msgSend(_horizontalScroller,"setAction:",nil);
_horizontalScroller=_34;
objj_msgSend(_horizontalScroller,"setTarget:",_32);
objj_msgSend(_horizontalScroller,"setAction:",sel_getUid("_horizontalScrollerDidScroll:"));
objj_msgSend(_32,"addSubview:",_horizontalScroller);
objj_msgSend(_32,"_updateScrollerStyle");
}
}),new objj_method(sel_getUid("hasHorizontalScroller"),function(_35,_36){
with(_35){
return _hasHorizontalScroller;
}
}),new objj_method(sel_getUid("setHasHorizontalScroller:"),function(_37,_38,_39){
with(_37){
if(_hasHorizontalScroller===_39){
return;
}
_hasHorizontalScroller=_39;
if(_hasHorizontalScroller&&!_horizontalScroller){
var _3a=objj_msgSend(_37,"_insetBounds");
objj_msgSend(_37,"setHorizontalScroller:",objj_msgSend(objj_msgSend(CPScroller,"alloc"),"initWithFrame:",CGRectMake(0,0,MAX((_3a.size.width),objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle)+1),objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle))));
objj_msgSend(objj_msgSend(_37,"horizontalScroller"),"setFrameSize:",CGSizeMake((_3a.size.width),objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle)));
}
objj_msgSend(_37,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("verticalScroller"),function(_3b,_3c){
with(_3b){
return _verticalScroller;
}
}),new objj_method(sel_getUid("setVerticalScroller:"),function(_3d,_3e,_3f){
with(_3d){
if(_verticalScroller===_3f){
return;
}
objj_msgSend(_verticalScroller,"removeFromSuperview");
objj_msgSend(_verticalScroller,"setTarget:",nil);
objj_msgSend(_verticalScroller,"setAction:",nil);
_verticalScroller=_3f;
objj_msgSend(_verticalScroller,"setTarget:",_3d);
objj_msgSend(_verticalScroller,"setAction:",sel_getUid("_verticalScrollerDidScroll:"));
objj_msgSend(_3d,"addSubview:",_verticalScroller);
objj_msgSend(_3d,"_updateScrollerStyle");
}
}),new objj_method(sel_getUid("hasVerticalScroller"),function(_40,_41){
with(_40){
return _hasVerticalScroller;
}
}),new objj_method(sel_getUid("setHasVerticalScroller:"),function(_42,_43,_44){
with(_42){
if(_hasVerticalScroller===_44){
return;
}
_hasVerticalScroller=_44;
if(_hasVerticalScroller&&!_verticalScroller){
var _45=objj_msgSend(_42,"_insetBounds");
objj_msgSend(_42,"setVerticalScroller:",objj_msgSend(objj_msgSend(CPScroller,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle),height:MAX((_45.size.height),objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle)+1)}}));
objj_msgSend(objj_msgSend(_42,"verticalScroller"),"setFrameSize:",CGSizeMake(objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle),(_45.size.height)));
}
objj_msgSend(_42,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("autohidesScrollers"),function(_46,_47){
with(_46){
return _autohidesScrollers;
}
}),new objj_method(sel_getUid("setAutohidesScrollers:"),function(_48,_49,_4a){
with(_48){
if(_autohidesScrollers==_4a){
return;
}
_autohidesScrollers=_4a;
objj_msgSend(_48,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("bottomCornerView"),function(_4b,_4c){
with(_4b){
return _bottomCornerView;
}
}),new objj_method(sel_getUid("setBottomCornerView:"),function(_4d,_4e,_4f){
with(_4d){
if(_bottomCornerView===_4f){
return;
}
objj_msgSend(_bottomCornerView,"removeFromSuperview");
objj_msgSend(_4f,"setFrame:",objj_msgSend(_4d,"_bottomCornerViewFrame"));
objj_msgSend(_4d,"addSubview:",_4f);
_bottomCornerView=_4f;
objj_msgSend(_4d,"_updateCornerAndHeaderView");
}
}),new objj_method(sel_getUid("lineScroll"),function(_50,_51){
with(_50){
return objj_msgSend(_50,"horizontalLineScroll");
}
}),new objj_method(sel_getUid("setLineScroll:"),function(_52,_53,_54){
with(_52){
objj_msgSend(_52,"setHorizontalLineScroll:",_54);
objj_msgSend(_52,"setVerticalLineScroll:",_54);
}
}),new objj_method(sel_getUid("horizontalLineScroll"),function(_55,_56){
with(_55){
return _horizontalLineScroll;
}
}),new objj_method(sel_getUid("setHorizontalLineScroll:"),function(_57,_58,_59){
with(_57){
_horizontalLineScroll=_59;
}
}),new objj_method(sel_getUid("verticalLineScroll"),function(_5a,_5b){
with(_5a){
return _verticalLineScroll;
}
}),new objj_method(sel_getUid("setVerticalLineScroll:"),function(_5c,_5d,_5e){
with(_5c){
_verticalLineScroll=_5e;
}
}),new objj_method(sel_getUid("pageScroll"),function(_5f,_60){
with(_5f){
return objj_msgSend(_5f,"horizontalPageScroll");
}
}),new objj_method(sel_getUid("setPageScroll:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_61,"setHorizontalPageScroll:",_63);
objj_msgSend(_61,"setVerticalPageScroll:",_63);
}
}),new objj_method(sel_getUid("horizontalPageScroll"),function(_64,_65){
with(_64){
return _horizontalPageScroll;
}
}),new objj_method(sel_getUid("setHorizontalPageScroll:"),function(_66,_67,_68){
with(_66){
_horizontalPageScroll=_68;
}
}),new objj_method(sel_getUid("verticalPageScroll"),function(_69,_6a){
with(_69){
return _verticalPageScroll;
}
}),new objj_method(sel_getUid("setVerticalPageScroll:"),function(_6b,_6c,_6d){
with(_6b){
_verticalPageScroll=_6d;
}
}),new objj_method(sel_getUid("_updateScrollerStyle"),function(_6e,_6f){
with(_6e){
if(_hasHorizontalScroller){
objj_msgSend(_horizontalScroller,"setStyle:",_scrollerStyle);
objj_msgSend(_horizontalScroller,"unsetThemeState:",CPThemeStateSelected);
switch(_scrollerKnobStyle){
case CPScrollerKnobStyleLight:
objj_msgSend(_horizontalScroller,"unsetThemeState:",CPThemeStateScrollerKnobDark);
objj_msgSend(_horizontalScroller,"setThemeState:",CPThemeStateScrollerKnobLight);
break;
case CPScrollerKnobStyleDark:
objj_msgSend(_horizontalScroller,"unsetThemeState:",CPThemeStateScrollerKnobLight);
objj_msgSend(_horizontalScroller,"setThemeState:",CPThemeStateScrollerKnobDark);
break;
default:
objj_msgSend(_horizontalScroller,"unsetThemeState:",CPThemeStateScrollerKnobLight);
objj_msgSend(_horizontalScroller,"unsetThemeState:",CPThemeStateScrollerKnobDark);
}
}
if(_hasVerticalScroller){
objj_msgSend(_verticalScroller,"setStyle:",_scrollerStyle);
objj_msgSend(_verticalScroller,"unsetThemeState:",CPThemeStateSelected);
switch(_scrollerKnobStyle){
case CPScrollerKnobStyleLight:
objj_msgSend(_verticalScroller,"unsetThemeState:",CPThemeStateScrollerKnobDark);
objj_msgSend(_verticalScroller,"setThemeState:",CPThemeStateScrollerKnobLight);
break;
case CPScrollerKnobStyleDark:
objj_msgSend(_verticalScroller,"unsetThemeState:",CPThemeStateScrollerKnobLight);
objj_msgSend(_verticalScroller,"setThemeState:",CPThemeStateScrollerKnobDark);
break;
default:
objj_msgSend(_verticalScroller,"unsetThemeState:",CPThemeStateScrollerKnobLight);
objj_msgSend(_verticalScroller,"unsetThemeState:",CPThemeStateScrollerKnobDark);
}
}
if(_scrollerStyle==CPScrollerStyleOverlay){
if(_timerScrollersHide){
objj_msgSend(_timerScrollersHide,"invalidate");
}
_timerScrollersHide=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_7,_6e,sel_getUid("_hideScrollers:"),nil,NO);
objj_msgSend(objj_msgSend(_6e,"bottomCornerView"),"setHidden:",YES);
}else{
objj_msgSend(objj_msgSend(_6e,"bottomCornerView"),"setHidden:",NO);
}
objj_msgSend(_6e,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("_insetBounds"),function(_70,_71){
with(_70){
return objj_msgSend(objj_msgSend(_70,"class"),"_insetBounds:borderType:",objj_msgSend(_70,"bounds"),_borderType);
}
}),new objj_method(sel_getUid("_updateCornerAndHeaderView"),function(_72,_73){
with(_72){
var _74=objj_msgSend(_72,"documentView"),_75=objj_msgSend(_72,"_headerView"),_76=objj_msgSend(_74,"respondsToSelector:",sel_getUid("headerView"))?objj_msgSend(_74,"headerView"):nil;
if(_75!==_76){
objj_msgSend(_75,"removeFromSuperview");
objj_msgSend(_headerClipView,"setDocumentView:",_76);
}
var _77=objj_msgSend(_74,"respondsToSelector:",sel_getUid("cornerView"))?objj_msgSend(_74,"cornerView"):nil;
if(_cornerView!==_77){
objj_msgSend(_cornerView,"removeFromSuperview");
_cornerView=_77;
if(_cornerView){
objj_msgSend(_cornerView,"setHidden:",!(_scrollerStyle===CPScrollerStyleLegacy&&_verticalScroller&&!objj_msgSend(_verticalScroller,"isHidden")));
objj_msgSend(_72,"addSubview:",_cornerView);
}
}
objj_msgSend(_72,"reflectScrolledClipView:",_contentView);
objj_msgSend(_76,"setNeedsLayout");
objj_msgSend(_76,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_headerView"),function(_78,_79){
with(_78){
return objj_msgSend(_headerClipView,"documentView");
}
}),new objj_method(sel_getUid("_cornerViewFrame"),function(_7a,_7b){
with(_7a){
if(!_cornerView){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _7c=objj_msgSend(_7a,"_insetBounds"),_7d=objj_msgSend(_cornerView,"frame");
_7d.origin.x=(_7c.origin.x+_7c.size.width)-(_7d.size.width);
_7d.origin.y=(_7c.origin.y);
return _7d;
}
}),new objj_method(sel_getUid("_headerClipViewFrame"),function(_7e,_7f){
with(_7e){
var _80=objj_msgSend(_7e,"_headerView");
if(!_80){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _81=objj_msgSend(_7e,"_insetBounds");
_81.size.height=(objj_msgSend(_80,"frame").size.height);
if((_scrollerStyle===CPScrollerStyleLegacy&&_verticalScroller&&!objj_msgSend(_verticalScroller,"isHidden"))){
_81.size.width-=(objj_msgSend(_7e,"_cornerViewFrame").size.width);
}
return _81;
}
}),new objj_method(sel_getUid("_bottomCornerViewFrame"),function(_82,_83){
with(_82){
if(objj_msgSend(objj_msgSend(_82,"horizontalScroller"),"isHidden")||objj_msgSend(objj_msgSend(_82,"verticalScroller"),"isHidden")){
return CGRectMakeZero();
}
var _84=objj_msgSend(objj_msgSend(_82,"verticalScroller"),"frame"),_85=CGRectMakeZero();
_85.origin.x=CGRectGetMinX(_84);
_85.origin.y=CGRectGetMaxY(_84);
_85.size.width=objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle);
_85.size.height=objj_msgSend(CPScroller,"scrollerWidthInStyle:",_scrollerStyle);
return _85;
}
}),new objj_method(sel_getUid("_verticalScrollerDidScroll:"),function(_86,_87,_88){
with(_86){
var _89=objj_msgSend(_88,"floatValue"),_8a=objj_msgSend(objj_msgSend(_contentView,"documentView"),"frame"),_8b=objj_msgSend(_contentView,"bounds");
switch(objj_msgSend(_verticalScroller,"hitPart")){
case CPScrollerDecrementLine:
_8b.origin.y-=_verticalLineScroll;
break;
case CPScrollerIncrementLine:
_8b.origin.y+=_verticalLineScroll;
break;
case CPScrollerDecrementPage:
_8b.origin.y-=(_8b.size.height)-_verticalPageScroll;
break;
case CPScrollerIncrementPage:
_8b.origin.y+=(_8b.size.height)-_verticalPageScroll;
break;
case CPScrollerKnobSlot:
case CPScrollerKnob:
default:
_8b.origin.y=ROUND(_89*((_8a.size.height)-(_8b.size.height)));
}
objj_msgSend(_86,"_sendDelegateMessages");
objj_msgSend(_contentView,"scrollToPoint:",_8b.origin);
}
}),new objj_method(sel_getUid("_horizontalScrollerDidScroll:"),function(_8c,_8d,_8e){
with(_8c){
var _8f=objj_msgSend(_8e,"floatValue"),_90=objj_msgSend(objj_msgSend(_8c,"documentView"),"frame"),_91=objj_msgSend(_contentView,"bounds");
switch(objj_msgSend(_horizontalScroller,"hitPart")){
case CPScrollerDecrementLine:
_91.origin.x-=_horizontalLineScroll;
break;
case CPScrollerIncrementLine:
_91.origin.x+=_horizontalLineScroll;
break;
case CPScrollerDecrementPage:
_91.origin.x-=(_91.size.width)-_horizontalPageScroll;
break;
case CPScrollerIncrementPage:
_91.origin.x+=(_91.size.width)-_horizontalPageScroll;
break;
case CPScrollerKnobSlot:
case CPScrollerKnob:
default:
_91.origin.x=ROUND(_8f*((_90.size.width)-(_91.size.width)));
}
objj_msgSend(_8c,"_sendDelegateMessages");
objj_msgSend(_contentView,"scrollToPoint:",_91.origin);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_91.origin.x,0));
}
}),new objj_method(sel_getUid("_sendDelegateMessages"),function(_92,_93){
with(_92){
if(_implementedDelegateMethods==0){
return;
}
if(!_scrollTimer){
objj_msgSend(_92,"_scrollViewWillScroll");
_scrollTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_4,_92,sel_getUid("_scrollViewDidScroll"),nil,YES);
}else{
objj_msgSend(_scrollTimer,"setFireDate:",objj_msgSend(CPDate,"dateWithTimeIntervalSinceNow:",_4));
}
}
}),new objj_method(sel_getUid("_hideScrollers:"),function(_94,_95,_96){
with(_94){
if(objj_msgSend(_verticalScroller,"allowFadingOut")){
objj_msgSend(_verticalScroller,"fadeOut");
}
if(objj_msgSend(_horizontalScroller,"allowFadingOut")){
objj_msgSend(_horizontalScroller,"fadeOut");
}
_timerScrollersHide=nil;
}
}),new objj_method(sel_getUid("_respondToScrollWheelEventWithDeltaX:deltaY:"),function(_97,_98,_99,_9a){
with(_97){
var _9b=objj_msgSend(objj_msgSend(_97,"documentView"),"frame"),_9c=objj_msgSend(_contentView,"bounds"),_9d=objj_msgSend(_contentView,"frame"),_9e=objj_msgSend(_97,"enclosingScrollView");
_9c.origin.x=ROUND(_9c.origin.x+_99);
_9c.origin.y=ROUND(_9c.origin.y+_9a);
var _9f=objj_msgSend(_contentView,"constrainScrollPoint:",CGPointCreateCopy(_9c.origin)),_a0=_9c.origin.x-_9f.x,_a1=_9c.origin.y-_9f.y;
objj_msgSend(_97,"_sendDelegateMessages");
objj_msgSend(_contentView,"scrollToPoint:",_9f);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_9f.x,0));
if(_a0||_a1){
objj_msgSend(_9e,"_respondToScrollWheelEventWithDeltaX:deltaY:",_a0,_a1);
}
}
}),new objj_method(sel_getUid("_scrollViewWillScroll"),function(_a2,_a3){
with(_a2){
if(_implementedDelegateMethods&_5){
objj_msgSend(_delegate,"scrollViewWillScroll:",_a2);
}
}
}),new objj_method(sel_getUid("_scrollViewDidScroll"),function(_a4,_a5){
with(_a4){
objj_msgSend(_scrollTimer,"invalidate");
_scrollTimer=nil;
if(_implementedDelegateMethods&_6){
objj_msgSend(_delegate,"scrollViewDidScroll:",_a4);
}
}
}),new objj_method(sel_getUid("_didReceiveDefaultStyleChange:"),function(_a6,_a7,_a8){
with(_a6){
objj_msgSend(_a6,"setScrollerStyle:",_8);
}
}),new objj_method(sel_getUid("tile"),function(_a9,_aa){
with(_a9){
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(_ab,_ac,_ad){
with(_ab){
if(_contentView!==_ad){
return;
}
if(_recursionCount>5){
return;
}
++_recursionCount;
var _ae=objj_msgSend(_ab,"documentView");
if(!_ae){
if(_autohidesScrollers){
objj_msgSend(_verticalScroller,"setHidden:",YES);
objj_msgSend(_horizontalScroller,"setHidden:",YES);
}
objj_msgSend(_contentView,"setFrame:",objj_msgSend(_ab,"_insetBounds"));
objj_msgSend(_headerClipView,"setFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
--_recursionCount;
return;
}
var _af=objj_msgSend(_ae,"frame"),_b0=objj_msgSend(_ab,"_insetBounds"),_b1=objj_msgSend(_ab,"_headerClipViewFrame"),_b2=(_b1.size.height);
_b0.origin.y+=_b2;
_b0.size.height-=_b2;
var _b3={width:(_af.size.width)-(_b0.size.width),height:(_af.size.height)-(_b0.size.height)},_b4=(objj_msgSend(_verticalScroller,"frame").size.width),_b5=(objj_msgSend(_horizontalScroller,"frame").size.height),_b6=_b3.height>0,_b7=_b3.width>0,_b8=_hasVerticalScroller&&(!_autohidesScrollers||_b6),_b9=_hasHorizontalScroller&&(!_autohidesScrollers||_b7);
if(_b8){
if(_scrollerStyle===CPScrollerStyleLegacy){
_b3.width+=_b4;
}
_b7=_b3.width>0;
_b9=_hasHorizontalScroller&&(!_autohidesScrollers||_b7);
}
if(_b9){
if(_scrollerStyle===CPScrollerStyleLegacy){
_b3.height+=_b5;
}
_b6=_b3.height>0;
_b8=_hasVerticalScroller&&(!_autohidesScrollers||_b6);
}
objj_msgSend(_verticalScroller,"setHidden:",!_b8);
objj_msgSend(_verticalScroller,"setEnabled:",_b6);
objj_msgSend(_horizontalScroller,"setHidden:",!_b9);
objj_msgSend(_horizontalScroller,"setEnabled:",_b7);
var _ba=objj_msgSend(CPScroller,"scrollerOverlay");
if(_scrollerStyle===CPScrollerStyleLegacy){
if(_b8){
_b0.size.width-=_b4;
}
if(_b9){
_b0.size.height-=_b5;
}
_ba=0;
}
var _bb=objj_msgSend(_contentView,"bounds").origin,_bc=!objj_msgSend(_verticalScroller,"isHidden"),_bd=!objj_msgSend(_horizontalScroller,"isHidden");
if(_b8){
var _be=MAX((_b0.origin.y),MAX((objj_msgSend(_ab,"_cornerViewFrame").origin.y+objj_msgSend(_ab,"_cornerViewFrame").size.height),(_b1.origin.y+_b1.size.height)));
var _bf=(_b0.origin.y+_b0.size.height)-_be;
if(_scrollerStyle===CPScrollerStyleOverlay&&_b7){
_bf-=_b5;
}
var _c0=(_af.size.height);
objj_msgSend(_verticalScroller,"setFloatValue:",(_b3.height<=0)?0:_bb.y/_b3.height);
objj_msgSend(_verticalScroller,"setKnobProportion:",_c0>0?(_b0.size.height)/_c0:1);
objj_msgSend(_verticalScroller,"setFrame:",{origin:{x:(_b0.origin.x+_b0.size.width)-_ba,y:_be},size:{width:_b4,height:_bf}});
}else{
if(_bc){
objj_msgSend(_verticalScroller,"setFloatValue:",0);
objj_msgSend(_verticalScroller,"setKnobProportion:",1);
}
}
if(_b9){
var _c1=(_b0.size.width);
if(_scrollerStyle===CPScrollerStyleOverlay&&_b6){
_c1-=_b4;
}
var _c2=(_af.size.width);
objj_msgSend(_horizontalScroller,"setFloatValue:",(_b3.width<=0)?0:_bb.x/_b3.width);
objj_msgSend(_horizontalScroller,"setKnobProportion:",_c2>0?(_b0.size.width)/_c2:1);
objj_msgSend(_horizontalScroller,"setFrame:",{origin:{x:(_b0.origin.x),y:(_b0.origin.y+_b0.size.height)-_ba},size:{width:_c1,height:_b5}});
}else{
if(_bd){
objj_msgSend(_horizontalScroller,"setFloatValue:",0);
objj_msgSend(_horizontalScroller,"setKnobProportion:",1);
}
}
objj_msgSend(_contentView,"setFrame:",_b0);
objj_msgSend(_headerClipView,"setFrame:",objj_msgSend(_ab,"_headerClipViewFrame"));
objj_msgSend(objj_msgSend(_headerClipView,"documentView"),"setNeedsDisplay:",YES);
if((_scrollerStyle===CPScrollerStyleLegacy&&_verticalScroller&&!objj_msgSend(_verticalScroller,"isHidden"))){
objj_msgSend(_cornerView,"setFrame:",objj_msgSend(_ab,"_cornerViewFrame"));
objj_msgSend(_cornerView,"setHidden:",NO);
}else{
objj_msgSend(_cornerView,"setHidden:",YES);
}
if(_scrollerStyle===CPScrollerStyleLegacy){
objj_msgSend(objj_msgSend(_ab,"bottomCornerView"),"setFrame:",objj_msgSend(_ab,"_bottomCornerViewFrame"));
objj_msgSend(objj_msgSend(_ab,"bottomCornerView"),"setBackgroundColor:",objj_msgSend(_ab,"currentValueForThemeAttribute:","bottom-corner-color"));
}
--_recursionCount;
}
}),new objj_method(sel_getUid("flashScrollers"),function(_c3,_c4){
with(_c3){
if(_scrollerStyle===CPScrollerStyleLegacy){
return;
}
if(_hasHorizontalScroller){
objj_msgSend(_horizontalScroller,"setHidden:",NO);
objj_msgSend(_horizontalScroller,"fadeIn");
}
if(_hasVerticalScroller){
objj_msgSend(_verticalScroller,"setHidden:",NO);
objj_msgSend(_verticalScroller,"fadeIn");
}
if(_timerScrollersHide){
objj_msgSend(_timerScrollersHide,"invalidate");
}
_timerScrollersHide=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_7,_c3,sel_getUid("_hideScrollers:"),nil,NO);
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_c5,_c6,_c7){
with(_c5){
objj_msgSend(_c5,"reflectScrolledClipView:",_contentView);
}
}),new objj_method(sel_getUid("drawRect:"),function(_c8,_c9,_ca){
with(_c8){
objj_msgSendSuper({receiver:_c8,super_class:objj_getClass("CPScrollView").super_class},"drawRect:",_ca);
if(_borderType==CPNoBorder){
return;
}
var _cb=objj_msgSend(_c8,"bounds"),_cc=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetLineWidth(_cc,1);
switch(_borderType){
case CPLineBorder:
CGContextSetStrokeColor(_cc,objj_msgSend(_c8,"currentValueForThemeAttribute:","border-color"));
CGContextStrokeRect(_cc,{origin:{x:_cb.origin.x+0.5,y:_cb.origin.y+0.5},size:{width:_cb.size.width-2*0.5,height:_cb.size.height-2*0.5}});
break;
case CPBezelBorder:
objj_msgSend(_c8,"_drawGrayBezelInContext:bounds:",_cc,_cb);
break;
case CPGrooveBorder:
objj_msgSend(_c8,"_drawGrooveInContext:bounds:",_cc,_cb);
break;
default:
break;
}
}
}),new objj_method(sel_getUid("_drawGrayBezelInContext:bounds:"),function(_cd,_ce,_cf,_d0){
with(_cd){
var _d1=(_d0.origin.x),_d2=(_d0.origin.x+_d0.size.width),_d3=(_d0.origin.y),_d4=(_d0.origin.y+_d0.size.height),y=_d3+0.5;
CGContextSetStrokeColor(_cf,objj_msgSend(CPColor,"colorWithWhite:alpha:",142/255,1));
CGContextBeginPath(_cf);
CGContextMoveToPoint(_cf,_d1,y);
CGContextAddLineToPoint(_cf,_d2,y);
CGContextStrokePath(_cf);
CGContextSetStrokeColor(_cf,objj_msgSend(CPColor,"colorWithWhite:alpha:",192/255,1));
var x=_d2-0.5;
CGContextBeginPath(_cf);
CGContextMoveToPoint(_cf,x,_d3+1);
CGContextAddLineToPoint(_cf,x,_d4);
CGContextMoveToPoint(_cf,x-0.5,_d4-0.5);
CGContextAddLineToPoint(_cf,_d1,_d4-0.5);
x=_d1+0.5;
CGContextMoveToPoint(_cf,x,_d4);
CGContextAddLineToPoint(_cf,x,_d3+1);
CGContextStrokePath(_cf);
}
}),new objj_method(sel_getUid("_drawGrooveInContext:bounds:"),function(_d5,_d6,_d7,_d8){
with(_d5){
var _d9=(_d8.origin.x),_da=(_d8.origin.x+_d8.size.width),_db=(_d8.origin.y),_dc=(_d8.origin.y+_d8.size.height);
CGContextBeginPath(_d7);
CGContextSetStrokeColor(_d7,objj_msgSend(CPColor,"colorWithWhite:alpha:",159/255,1));
var y=_db+0.5;
CGContextMoveToPoint(_d7,_d9,y);
CGContextAddLineToPoint(_d7,_da,y);
var x=_da-1.5;
CGContextMoveToPoint(_d7,x,_db+2);
CGContextAddLineToPoint(_d7,x,_dc-1);
y=_dc-1.5;
CGContextMoveToPoint(_d7,_da-1,y);
CGContextAddLineToPoint(_d7,_d9+2,y);
x=_d9+0.5;
CGContextMoveToPoint(_d7,x,_dc);
CGContextAddLineToPoint(_d7,x,_db);
CGContextStrokePath(_d7);
CGContextBeginPath(_d7);
CGContextSetStrokeColor(_d7,objj_msgSend(CPColor,"whiteColor"));
var _dd={origin:{x:_d8.origin.x+1,y:_d8.origin.y+1},size:{width:_d8.size.width,height:_d8.size.height}};
_dd.size.width-=1;
_dd.size.height-=1;
CGContextStrokeRect(_d7,{origin:{x:_dd.origin.x+0.5,y:_dd.origin.y+0.5},size:{width:_dd.size.width-2*0.5,height:_dd.size.height-2*0.5}});
CGContextBeginPath(_d7);
CGContextSetStrokeColor(_d7,objj_msgSend(CPColor,"colorWithWhite:alpha:",192/255,1));
y=_db+2.5;
CGContextMoveToPoint(_d7,_d9+2,y);
CGContextAddLineToPoint(_d7,_da-2,y);
CGContextStrokePath(_d7);
}
}),new objj_method(sel_getUid("scrollWheel:"),function(_de,_df,_e0){
with(_de){
if(_timerScrollersHide){
objj_msgSend(_timerScrollersHide,"invalidate");
}
if(!objj_msgSend(_verticalScroller,"isHidden")){
objj_msgSend(_verticalScroller,"fadeIn");
}
if(!objj_msgSend(_horizontalScroller,"isHidden")){
objj_msgSend(_horizontalScroller,"fadeIn");
}
if(!objj_msgSend(_horizontalScroller,"isHidden")||!objj_msgSend(_verticalScroller,"isHidden")){
_timerScrollersHide=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_7,_de,sel_getUid("_hideScrollers:"),nil,NO);
}
objj_msgSend(_de,"_respondToScrollWheelEventWithDeltaX:deltaY:",objj_msgSend(_e0,"deltaX"),objj_msgSend(_e0,"deltaY"));
}
}),new objj_method(sel_getUid("scrollPageUp:"),function(_e1,_e2,_e3){
with(_e1){
var _e4=objj_msgSend(_contentView,"bounds");
objj_msgSend(_e1,"moveByOffset:",CGSizeMake(0,-((_e4.size.height)-_verticalPageScroll)));
}
}),new objj_method(sel_getUid("scrollPageDown:"),function(_e5,_e6,_e7){
with(_e5){
var _e8=objj_msgSend(_contentView,"bounds");
objj_msgSend(_e5,"moveByOffset:",CGSizeMake(0,(_e8.size.height)-_verticalPageScroll));
}
}),new objj_method(sel_getUid("scrollToBeginningOfDocument:"),function(_e9,_ea,_eb){
with(_e9){
objj_msgSend(_contentView,"scrollToPoint:",{x:0,y:0});
objj_msgSend(_headerClipView,"scrollToPoint:",{x:0,y:0});
}
}),new objj_method(sel_getUid("scrollToEndOfDocument:"),function(_ec,_ed,_ee){
with(_ec){
var _ef=objj_msgSend(_contentView,"bounds"),_f0=objj_msgSend(objj_msgSend(_ec,"documentView"),"frame"),_f1={x:0,y:(_f0.size.height)-(_ef.size.height)};
objj_msgSend(_contentView,"scrollToPoint:",_f1);
objj_msgSend(_headerClipView,"scrollToPoint:",{x:0,y:0});
}
}),new objj_method(sel_getUid("moveLeft:"),function(_f2,_f3,_f4){
with(_f2){
objj_msgSend(_f2,"moveByOffset:",CGSizeMake(-_horizontalLineScroll,0));
}
}),new objj_method(sel_getUid("moveRight:"),function(_f5,_f6,_f7){
with(_f5){
objj_msgSend(_f5,"moveByOffset:",CGSizeMake(_horizontalLineScroll,0));
}
}),new objj_method(sel_getUid("moveUp:"),function(_f8,_f9,_fa){
with(_f8){
objj_msgSend(_f8,"moveByOffset:",CGSizeMake(0,-_verticalLineScroll));
}
}),new objj_method(sel_getUid("moveDown:"),function(_fb,_fc,_fd){
with(_fb){
objj_msgSend(_fb,"moveByOffset:",CGSizeMake(0,_verticalLineScroll));
}
}),new objj_method(sel_getUid("moveByOffset:"),function(_fe,_ff,_100){
with(_fe){
var _101=objj_msgSend(objj_msgSend(_fe,"documentView"),"frame"),_102=objj_msgSend(_contentView,"bounds");
_102.origin.x+=_100.width;
_102.origin.y+=_100.height;
objj_msgSend(_contentView,"scrollToPoint:",_102.origin);
objj_msgSend(_headerClipView,"scrollToPoint:",CGPointMake(_102.origin.x,0));
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("initialize"),function(self,_103){
with(self){
var _104=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPScrollersGlobalStyle");
if(_104==nil||_104==-1){
_8=_1()?CPScrollerStyleOverlay:CPScrollerStyleLegacy;
}else{
_8=_104;
}
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(self,_105){
with(self){
return "scrollview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_106){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"bottom-corner-color":objj_msgSend(CPColor,"whiteColor"),"border-color":objj_msgSend(CPColor,"blackColor")});
}
}),new objj_method(sel_getUid("contentSizeForFrameSize:hasHorizontalScroller:hasVerticalScroller:borderType:"),function(self,_107,_108,_109,_10a,_10b){
with(self){
var _10c=objj_msgSend(self,"_insetBounds:borderType:",{origin:{x:0,y:0},size:{width:_108.width,height:_108.height}},_10b),_10d=objj_msgSend(CPScroller,"scrollerWidth");
if(_109){
_10c.size.height-=_10d;
}
if(_10a){
_10c.size.width-=_10d;
}
return _10c.size;
}
}),new objj_method(sel_getUid("frameSizeForContentSize:hasHorizontalScroller:hasVerticalScroller:borderType:"),function(self,_10e,_10f,_110,_111,_112){
with(self){
var _113=objj_msgSend(self,"_insetBounds:borderType:",{origin:{x:0,y:0},size:{width:_10f.width,height:_10f.height}},_112),_114=_10f.width-_113.size.width,_115=_10f.height-_113.size.height,_116={width:_10f.width+_114,height:_10f.height+_115},_117=objj_msgSend(CPScroller,"scrollerWidth");
if(_110){
_116.height-=_117;
}
if(_111){
_116.width-=_117;
}
return _116;
}
}),new objj_method(sel_getUid("_insetBounds:borderType:"),function(self,_118,_119,_11a){
with(self){
switch(_11a){
case CPLineBorder:
case CPBezelBorder:
return {origin:{x:_119.origin.x+1,y:_119.origin.y+1},size:{width:_119.size.width-2*1,height:_119.size.height-2*1}};
case CPGrooveBorder:
_119={origin:{x:_119.origin.x+2,y:_119.origin.y+2},size:{width:_119.size.width-2*2,height:_119.size.height-2*2}};
++_119.origin.y;
--_119.size.height;
return _119;
case CPNoBorder:
default:
return _119;
}
}
}),new objj_method(sel_getUid("globalScrollerStyle"),function(self,_11b){
with(self){
return _8;
}
}),new objj_method(sel_getUid("setGlobalScrollerStyle:"),function(self,_11c,_11d){
with(self){
_8=_11d;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",_9,nil);
}
})]);
var _11e="CPScrollViewContentView",_11f="CPScrollViewHeaderClipViewKey",_120="CPScrollViewVLineScroll",_121="CPScrollViewHLineScroll",_122="CPScrollViewVPageScroll",_123="CPScrollViewHPageScroll",_124="CPScrollViewHasVScroller",_125="CPScrollViewHasHScroller",_126="CPScrollViewVScroller",_127="CPScrollViewHScroller",_128="CPScrollViewAutohidesScroller",_129="CPScrollViewCornerViewKey",_12a="CPScrollViewBottomCornerViewKey",_12b="CPScrollViewBorderTypeKey",_12c="CPScrollViewScrollerStyleKey",_12d="CPScrollViewScrollerKnobStyleKey";
var _a=objj_getClass("CPScrollView");
if(!_a){
throw new SyntaxError("*** Could not find definition for class \"CPScrollView\"");
}
var _b=_a.isa;
class_addMethods(_a,[new objj_method(sel_getUid("initWithCoder:"),function(self,_12e,_12f){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPScrollView").super_class},"initWithCoder:",_12f)){
_verticalLineScroll=objj_msgSend(_12f,"decodeFloatForKey:",_120);
_verticalPageScroll=objj_msgSend(_12f,"decodeFloatForKey:",_122);
_horizontalLineScroll=objj_msgSend(_12f,"decodeFloatForKey:",_121);
_horizontalPageScroll=objj_msgSend(_12f,"decodeFloatForKey:",_123);
_contentView=objj_msgSend(_12f,"decodeObjectForKey:",_11e);
_headerClipView=objj_msgSend(_12f,"decodeObjectForKey:",_11f);
if(!_headerClipView){
_headerClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"init");
objj_msgSend(self,"addSubview:",_headerClipView);
}
_verticalScroller=objj_msgSend(_12f,"decodeObjectForKey:",_126);
_horizontalScroller=objj_msgSend(_12f,"decodeObjectForKey:",_127);
_hasVerticalScroller=objj_msgSend(_12f,"decodeBoolForKey:",_124);
_hasHorizontalScroller=objj_msgSend(_12f,"decodeBoolForKey:",_125);
_autohidesScrollers=objj_msgSend(_12f,"decodeBoolForKey:",_128);
_borderType=objj_msgSend(_12f,"decodeIntForKey:",_12b);
_cornerView=objj_msgSend(_12f,"decodeObjectForKey:",_129);
_bottomCornerView=objj_msgSend(_12f,"decodeObjectForKey:",_12a);
_delegate=nil;
_scrollTimer=nil;
_implementedDelegateMethods=0;
_scrollerStyle=objj_msgSend(_12f,"decodeObjectForKey:",_12c)||_8;
_scrollerKnobStyle=objj_msgSend(_12f,"decodeObjectForKey:",_12d)||CPScrollerKnobStyleDefault;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",self,sel_getUid("_didReceiveDefaultStyleChange:"),_9,nil);
}
return self;
}
}),new objj_method(sel_getUid("awakeFromCib"),function(self,_130){
with(self){
objj_msgSend(self,"_updateScrollerStyle");
objj_msgSend(self,"_updateCornerAndHeaderView");
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_131,_132){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPScrollView").super_class},"encodeWithCoder:",_132);
objj_msgSend(_132,"encodeObject:forKey:",_contentView,_11e);
objj_msgSend(_132,"encodeObject:forKey:",_headerClipView,_11f);
objj_msgSend(_132,"encodeObject:forKey:",_verticalScroller,_126);
objj_msgSend(_132,"encodeObject:forKey:",_horizontalScroller,_127);
objj_msgSend(_132,"encodeFloat:forKey:",_verticalLineScroll,_120);
objj_msgSend(_132,"encodeFloat:forKey:",_verticalPageScroll,_122);
objj_msgSend(_132,"encodeFloat:forKey:",_horizontalLineScroll,_121);
objj_msgSend(_132,"encodeFloat:forKey:",_horizontalPageScroll,_123);
objj_msgSend(_132,"encodeBool:forKey:",_hasVerticalScroller,_124);
objj_msgSend(_132,"encodeBool:forKey:",_hasHorizontalScroller,_125);
objj_msgSend(_132,"encodeBool:forKey:",_autohidesScrollers,_128);
objj_msgSend(_132,"encodeObject:forKey:",_cornerView,_129);
objj_msgSend(_132,"encodeObject:forKey:",_bottomCornerView,_12a);
objj_msgSend(_132,"encodeInt:forKey:",_borderType,_12b);
objj_msgSend(_132,"encodeInt:forKey:",_scrollerStyle,_12c);
objj_msgSend(_132,"encodeInt:forKey:",_scrollerKnobStyle,_12d);
}
})]);
p;15;CPSearchField.jt;21778;@STATIC;1.0;i;10;CPButton.ji;13;CPTextField.jt;21725;
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPTextField.j",YES);
CPSearchFieldRecentsTitleMenuItemTag=1000;
CPSearchFieldRecentsMenuItemTag=1001;
CPSearchFieldClearRecentsMenuItemTag=1002;
CPSearchFieldNoRecentsMenuItemTag=1003;
var _1=nil,_2=nil,_3=nil,_4=nil;
var _5=25,_6=22,_7=22;
var _8="CPAutosavedRecentsChangedNotification";
var _9="   ";
var _a=objj_allocateClassPair(CPTextField,"CPSearchField"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_searchButton"),new objj_ivar("_cancelButton"),new objj_ivar("_searchMenuTemplate"),new objj_ivar("_searchMenu"),new objj_ivar("_recentsAutosaveName"),new objj_ivar("_recentSearches"),new objj_ivar("_maximumRecents"),new objj_ivar("_sendsWholeSearchString"),new objj_ivar("_sendsSearchStringImmediately"),new objj_ivar("_canResignFirstResponder"),new objj_ivar("_partialStringTimer")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
if(_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPSearchField").super_class},"initWithFrame:",_e)){
_maximumRecents=10;
_sendsWholeSearchString=NO;
_sendsSearchStringImmediately=NO;
_recentsAutosaveName=nil;
objj_msgSend(_c,"_init");
_cancelButton._DOMElement.style.cursor="default";
_searchButton._DOMElement.style.cursor="default";
}
return _c;
}
}),new objj_method(sel_getUid("_init"),function(_f,_10){
with(_f){
_recentSearches=objj_msgSend(CPArray,"array");
objj_msgSend(_f,"setBezeled:",YES);
objj_msgSend(_f,"setBezelStyle:",CPTextFieldRoundedBezel);
objj_msgSend(_f,"setBordered:",YES);
objj_msgSend(_f,"setEditable:",YES);
objj_msgSend(_f,"setContinuous:",YES);
var _11=objj_msgSend(_f,"bounds"),_12=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",objj_msgSend(_f,"cancelButtonRectForBounds:",_11)),_13=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",objj_msgSend(_f,"searchButtonRectForBounds:",_11));
objj_msgSend(_f,"setCancelButton:",_12);
objj_msgSend(_f,"resetCancelButton");
objj_msgSend(_f,"setSearchButton:",_13);
objj_msgSend(_f,"resetSearchButton");
_canResignFirstResponder=YES;
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(_14,_15,_16){
with(_14){
objj_msgSendSuper({receiver:_14,super_class:objj_getClass("CPSearchField").super_class},"viewWillMoveToSuperview:",_16);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_14,CPControlTextDidChangeNotification,_14);
if(_16){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_14,sel_getUid("_searchFieldTextDidChange:"),CPControlTextDidChangeNotification,_14);
}
}
}),new objj_method(sel_getUid("setSearchButton:"),function(_17,_18,_19){
with(_17){
if(_19!=_searchButton){
objj_msgSend(_searchButton,"removeFromSuperview");
_searchButton=_19;
objj_msgSend(_searchButton,"setFrame:",objj_msgSend(_17,"searchButtonRectForBounds:",objj_msgSend(_17,"bounds")));
objj_msgSend(_searchButton,"setAutoresizingMask:",CPViewMaxXMargin);
objj_msgSend(_17,"addSubview:",_searchButton);
}
}
}),new objj_method(sel_getUid("searchButton"),function(_1a,_1b){
with(_1a){
return _searchButton;
}
}),new objj_method(sel_getUid("resetSearchButton"),function(_1c,_1d){
with(_1c){
var _1e=objj_msgSend(_1c,"searchButton"),_1f=(_searchMenuTemplate===nil)?_1:_2;
objj_msgSend(_1e,"setBordered:",NO);
objj_msgSend(_1e,"setImageScaling:",CPImageScaleAxesIndependently);
objj_msgSend(_1e,"setImage:",_1f);
objj_msgSend(_1e,"setAutoresizingMask:",CPViewMaxXMargin);
}
}),new objj_method(sel_getUid("setCancelButton:"),function(_20,_21,_22){
with(_20){
if(_22!=_cancelButton){
objj_msgSend(_cancelButton,"removeFromSuperview");
_cancelButton=_22;
objj_msgSend(_cancelButton,"setFrame:",objj_msgSend(_20,"cancelButtonRectForBounds:",objj_msgSend(_20,"bounds")));
objj_msgSend(_cancelButton,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_cancelButton,"setTarget:",_20);
objj_msgSend(_cancelButton,"setAction:",sel_getUid("cancelOperation:"));
objj_msgSend(_20,"_updateCancelButtonVisibility");
objj_msgSend(_20,"addSubview:",_cancelButton);
}
}
}),new objj_method(sel_getUid("cancelButton"),function(_23,_24){
with(_23){
return _cancelButton;
}
}),new objj_method(sel_getUid("resetCancelButton"),function(_25,_26){
with(_25){
var _27=objj_msgSend(_25,"cancelButton");
objj_msgSend(_27,"setBordered:",NO);
objj_msgSend(_27,"setImageScaling:",CPImageScaleAxesIndependently);
objj_msgSend(_27,"setImage:",_3);
objj_msgSend(_27,"setAlternateImage:",_4);
objj_msgSend(_27,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_27,"setTarget:",_25);
objj_msgSend(_27,"setAction:",sel_getUid("cancelOperation:"));
}
}),new objj_method(sel_getUid("searchTextRectForBounds:"),function(_28,_29,_2a){
with(_28){
var _2b=0,_2c=(_2a.size.width),_2d=objj_msgSend(_28,"bounds");
if(_searchButton){
var _2e=objj_msgSend(_28,"searchButtonRectForBounds:",_2d);
_2b=(_2e.origin.x+_2e.size.width)+2;
}
if(_cancelButton){
var _2f=objj_msgSend(_28,"cancelButtonRectForBounds:",_2d);
_2c=(_2f.origin.x)-_2b;
}
return {origin:{x:_2b,y:(_2a.origin.y)},size:{width:_2c,height:(_2a.size.height)}};
}
}),new objj_method(sel_getUid("searchButtonRectForBounds:"),function(_30,_31,_32){
with(_30){
return {origin:{x:5,y:((_32.size.height)-_7)/2},size:{width:_5,height:_7}};
}
}),new objj_method(sel_getUid("cancelButtonRectForBounds:"),function(_33,_34,_35){
with(_33){
return {origin:{x:(_35.size.width)-_6-5,y:((_35.size.height)-_6)/2},size:{width:_7,height:_7}};
}
}),new objj_method(sel_getUid("searchMenuTemplate"),function(_36,_37){
with(_36){
return _searchMenuTemplate;
}
}),new objj_method(sel_getUid("setSearchMenuTemplate:"),function(_38,_39,_3a){
with(_38){
_searchMenuTemplate=_3a;
objj_msgSend(_38,"resetSearchButton");
objj_msgSend(_38,"_loadRecentSearchList");
objj_msgSend(_38,"_updateSearchMenu");
}
}),new objj_method(sel_getUid("sendsWholeSearchString"),function(_3b,_3c){
with(_3b){
return _sendsWholeSearchString;
}
}),new objj_method(sel_getUid("setSendsWholeSearchString:"),function(_3d,_3e,_3f){
with(_3d){
_sendsWholeSearchString=_3f;
}
}),new objj_method(sel_getUid("sendsSearchStringImmediately"),function(_40,_41){
with(_40){
return _sendsSearchStringImmediately;
}
}),new objj_method(sel_getUid("setSendsSearchStringImmediately:"),function(_42,_43,_44){
with(_42){
_sendsSearchStringImmediately=_44;
}
}),new objj_method(sel_getUid("maximumRecents"),function(_45,_46){
with(_45){
return _maximumRecents;
}
}),new objj_method(sel_getUid("setMaximumRecents:"),function(_47,_48,max){
with(_47){
if(max>254){
max=254;
}else{
if(max<0){
max=10;
}
}
_maximumRecents=max;
}
}),new objj_method(sel_getUid("recentSearches"),function(_49,_4a){
with(_49){
return _recentSearches;
}
}),new objj_method(sel_getUid("setRecentSearches:"),function(_4b,_4c,_4d){
with(_4b){
var max=MIN(objj_msgSend(_4b,"maximumRecents"),objj_msgSend(_4d,"count")),_4d=objj_msgSend(_4d,"subarrayWithRange:",CPMakeRange(0,max));
_recentSearches=_4d;
objj_msgSend(_4b,"_autosaveRecentSearchList");
}
}),new objj_method(sel_getUid("recentsAutosaveName"),function(_4e,_4f){
with(_4e){
return _recentsAutosaveName;
}
}),new objj_method(sel_getUid("setRecentsAutosaveName:"),function(_50,_51,_52){
with(_50){
if(_recentsAutosaveName!=nil){
objj_msgSend(_50,"_deregisterForAutosaveNotification");
}
_recentsAutosaveName=_52;
if(_recentsAutosaveName!=nil){
objj_msgSend(_50,"_registerForAutosaveNotification");
}
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_53,_54,_55){
with(_53){
var _56=objj_msgSendSuper({receiver:_53,super_class:objj_getClass("CPSearchField").super_class},"contentRectForBounds:",_55);
return objj_msgSend(_53,"searchTextRectForBounds:",_56);
}
}),new objj_method(sel_getUid("menu"),function(_57,_58){
with(_57){
return _searchMenu;
}
}),new objj_method(sel_getUid("isOpaque"),function(_59,_5a){
with(_59){
return objj_msgSendSuper({receiver:_59,super_class:objj_getClass("CPSearchField").super_class},"isOpaque")&&objj_msgSend(_cancelButton,"isOpaque")&&objj_msgSend(_searchButton,"isOpaque");
}
}),new objj_method(sel_getUid("_updateCancelButtonVisibility"),function(_5b,_5c){
with(_5b){
objj_msgSend(_cancelButton,"setHidden:",(objj_msgSend(objj_msgSend(_5b,"stringValue"),"length")===0));
}
}),new objj_method(sel_getUid("_searchFieldTextDidChange:"),function(_5d,_5e,_5f){
with(_5d){
if(!objj_msgSend(_5d,"sendsWholeSearchString")){
if(objj_msgSend(_5d,"sendsSearchStringImmediately")){
objj_msgSend(_5d,"_sendPartialString");
}else{
objj_msgSend(_partialStringTimer,"invalidate");
var _60=objj_msgSend(CPSearchField,"_keyboardDelayForPartialSearchString:",objj_msgSend(_5d,"stringValue"));
_partialStringTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_60,_5d,sel_getUid("_sendPartialString"),nil,NO);
}
}
objj_msgSend(_5d,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_sendAction:"),function(_61,_62,_63){
with(_61){
objj_msgSend(_61,"sendAction:to:",objj_msgSend(_61,"action"),objj_msgSend(_61,"target"));
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_64,_65,_66,_67){
with(_64){
objj_msgSendSuper({receiver:_64,super_class:objj_getClass("CPSearchField").super_class},"sendAction:to:",_66,_67);
objj_msgSend(_partialStringTimer,"invalidate");
objj_msgSend(_64,"_addStringToRecentSearches:",objj_msgSend(_64,"stringValue"));
objj_msgSend(_64,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_addStringToRecentSearches:"),function(_68,_69,_6a){
with(_68){
if(_6a===nil||_6a===""||objj_msgSend(_recentSearches,"containsObject:",_6a)){
return;
}
var _6b=objj_msgSend(CPMutableArray,"arrayWithArray:",_recentSearches);
objj_msgSend(_6b,"addObject:",_6a);
objj_msgSend(_68,"setRecentSearches:",_6b);
objj_msgSend(_68,"_updateSearchMenu");
}
}),new objj_method(sel_getUid("hitTest:"),function(_6c,_6d,_6e){
with(_6c){
if((_6e.x>=(objj_msgSend(_6c,"frame").origin.x)&&_6e.y>=(objj_msgSend(_6c,"frame").origin.y)&&_6e.x<(objj_msgSend(_6c,"frame").origin.x+objj_msgSend(_6c,"frame").size.width)&&_6e.y<(objj_msgSend(_6c,"frame").origin.y+objj_msgSend(_6c,"frame").size.height))){
return _6c;
}else{
return nil;
}
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_6f,_70){
with(_6f){
return _canResignFirstResponder&&objj_msgSendSuper({receiver:_6f,super_class:objj_getClass("CPSearchField").super_class},"resignFirstResponder");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_71,_72,_73){
with(_71){
var _74=objj_msgSend(_73,"locationInWindow"),_75=objj_msgSend(_71,"convertPoint:fromView:",_74,nil);
if((_75.x>=(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x)&&_75.y>=(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y)&&_75.x<(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x+objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.width)&&_75.y<(objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y+objj_msgSend(_71,"searchButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.height))){
if(_searchMenuTemplate==nil){
objj_msgSend(_71,"_sendAction:",_71);
}else{
objj_msgSend(_71,"_showMenu");
}
}else{
if((_75.x>=(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x)&&_75.y>=(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y)&&_75.x<(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.x+objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.width)&&_75.y<(objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).origin.y+objj_msgSend(_71,"cancelButtonRectForBounds:",objj_msgSend(_71,"bounds")).size.height))){
objj_msgSend(_cancelButton,"mouseDown:",_73);
}else{
objj_msgSendSuper({receiver:_71,super_class:objj_getClass("CPSearchField").super_class},"mouseDown:",_73);
}
}
}
}),new objj_method(sel_getUid("defaultSearchMenuTemplate"),function(_76,_77){
with(_76){
var _78=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"init"),_79;
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Recent Searches",nil,"");
objj_msgSend(_79,"setTag:",CPSearchFieldRecentsTitleMenuItemTag);
objj_msgSend(_79,"setEnabled:",NO);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Recent search item",sel_getUid("_searchFieldSearch:"),"");
objj_msgSend(_79,"setTag:",CPSearchFieldRecentsMenuItemTag);
objj_msgSend(_79,"setTarget:",_76);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","Clear Recent Searches",sel_getUid("_searchFieldClearRecents:"),"");
objj_msgSend(_79,"setTag:",CPSearchFieldClearRecentsMenuItemTag);
objj_msgSend(_79,"setTarget:",_76);
objj_msgSend(_78,"addItem:",_79);
_79=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:","No Recent Searches",nil,"");
objj_msgSend(_79,"setTag:",CPSearchFieldNoRecentsMenuItemTag);
objj_msgSend(_79,"setEnabled:",NO);
objj_msgSend(_78,"addItem:",_79);
return _78;
}
}),new objj_method(sel_getUid("_updateSearchMenu"),function(_7a,_7b){
with(_7a){
if(_searchMenuTemplate===nil){
return;
}
var _7c=objj_msgSend(objj_msgSend(CPMenu,"alloc"),"init"),_7d=objj_msgSend(_recentSearches,"count"),_7e=objj_msgSend(_searchMenuTemplate,"numberOfItems");
for(var i=0;i<_7e;i++){
var _7f=objj_msgSend(objj_msgSend(_searchMenuTemplate,"itemAtIndex:",i),"copy");
switch(objj_msgSend(_7f,"tag")){
case CPSearchFieldRecentsTitleMenuItemTag:
if(_7d===0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
break;
case CPSearchFieldRecentsMenuItemTag:
var _80=sel_getUid("_searchFieldSearch:");
for(var _81=0;_81<_7d;++_81){
var _82=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_9+objj_msgSend(_recentSearches,"objectAtIndex:",_81),_80,objj_msgSend(_7f,"keyEquivalent"));
objj_msgSend(_7f,"setTarget:",_7a);
objj_msgSend(_7c,"addItem:",_82);
}
continue;
case CPSearchFieldClearRecentsMenuItemTag:
if(_7d===0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
objj_msgSend(_7f,"setAction:",sel_getUid("_searchFieldClearRecents:"));
objj_msgSend(_7f,"setTarget:",_7a);
break;
case CPSearchFieldNoRecentsMenuItemTag:
if(_7d!==0){
continue;
}
if(objj_msgSend(_7c,"numberOfItems")>0){
objj_msgSend(_7a,"_addSeparatorToMenu:",_7c);
}
break;
}
objj_msgSend(_7f,"setEnabled:",(objj_msgSend(_7f,"isEnabled")&&objj_msgSend(_7f,"action")!=nil&&objj_msgSend(_7f,"target")!=nil));
objj_msgSend(_7c,"addItem:",_7f);
}
objj_msgSend(_7c,"setDelegate:",_7a);
_searchMenu=_7c;
}
}),new objj_method(sel_getUid("_addSeparatorToMenu:"),function(_83,_84,_85){
with(_83){
var _86=objj_msgSend(CPMenuItem,"separatorItem");
objj_msgSend(_86,"setEnabled:",NO);
objj_msgSend(_85,"addItem:",_86);
}
}),new objj_method(sel_getUid("menuWillOpen:"),function(_87,_88,_89){
with(_87){
_canResignFirstResponder=NO;
}
}),new objj_method(sel_getUid("menuDidClose:"),function(_8a,_8b,_8c){
with(_8a){
_canResignFirstResponder=YES;
objj_msgSend(_8a,"becomeFirstResponder");
}
}),new objj_method(sel_getUid("_showMenu"),function(_8d,_8e){
with(_8d){
if(_searchMenu===nil||objj_msgSend(_searchMenu,"numberOfItems")===0||!objj_msgSend(_8d,"isEnabled")){
return;
}
var _8f=objj_msgSend(objj_msgSend(_8d,"superview"),"convertRect:toView:",objj_msgSend(_8d,"frame"),nil),_90=CPMakePoint(_8f.origin.x+10,_8f.origin.y+_8f.size.height-4);
var _91=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPRightMouseDown,_90,0,objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"timestamp"),objj_msgSend(objj_msgSend(_8d,"window"),"windowNumber"),nil,1,1,0);
objj_msgSend(_8d,"selectAll:",nil);
objj_msgSend(CPMenu,"popUpContextMenu:withEvent:forView:",_searchMenu,_91,_8d);
}
}),new objj_method(sel_getUid("_sendPartialString"),function(_92,_93){
with(_92){
objj_msgSendSuper({receiver:_92,super_class:objj_getClass("CPSearchField").super_class},"sendAction:to:",objj_msgSend(_92,"action"),objj_msgSend(_92,"target"));
objj_msgSend(_partialStringTimer,"invalidate");
}
}),new objj_method(sel_getUid("cancelOperation:"),function(_94,_95,_96){
with(_94){
objj_msgSend(_94,"setObjectValue:","");
objj_msgSend(_94,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_94,nil));
objj_msgSend(_94,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_searchFieldSearch:"),function(_97,_98,_99){
with(_97){
var _9a=objj_msgSend(objj_msgSend(_99,"title"),"substringFromIndex:",objj_msgSend(_9,"length"));
if(objj_msgSend(_99,"tag")!=CPSearchFieldRecentsMenuItemTag){
objj_msgSend(_97,"_addStringToRecentSearches:",_9a);
}
objj_msgSend(_97,"setObjectValue:",_9a);
objj_msgSend(_97,"_sendPartialString");
objj_msgSend(_97,"selectAll:",nil);
objj_msgSend(_97,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_searchFieldClearRecents:"),function(_9b,_9c,_9d){
with(_9b){
objj_msgSend(_9b,"setRecentSearches:",objj_msgSend(CPArray,"array"));
objj_msgSend(_9b,"_updateSearchMenu");
objj_msgSend(_9b,"setStringValue:","");
objj_msgSend(_9b,"_updateCancelButtonVisibility");
}
}),new objj_method(sel_getUid("_registerForAutosaveNotification"),function(_9e,_9f){
with(_9e){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_9e,sel_getUid("_updateAutosavedRecents:"),_8,_recentsAutosaveName);
}
}),new objj_method(sel_getUid("_deregisterForAutosaveNotification"),function(_a0,_a1){
with(_a0){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_a0,_8,_recentsAutosaveName);
}
}),new objj_method(sel_getUid("_autosaveRecentSearchList"),function(_a2,_a3){
with(_a2){
if(_recentsAutosaveName!=nil){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",_8,_recentsAutosaveName);
}
}
}),new objj_method(sel_getUid("_updateAutosavedRecents:"),function(_a4,_a5,_a6){
with(_a4){
var _a7=objj_msgSend(_a6,"object");
objj_msgSend(objj_msgSend(CPUserDefaults,"standardUserDefaults"),"setObject:forKey:",_recentSearches,_a7);
}
}),new objj_method(sel_getUid("_loadRecentSearchList"),function(_a8,_a9){
with(_a8){
var _aa=objj_msgSend(_a8,"recentsAutosaveName");
if(_aa===nil){
return;
}
var _ab=objj_msgSend(objj_msgSend(CPUserDefaults,"standardUserDefaults"),"objectForKey:",_aa);
if(_ab!==nil){
_recentSearches=_ab;
}
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("defaultThemeClass"),function(_ac,_ad){
with(_ac){
return "searchfield";
}
}),new objj_method(sel_getUid("initialize"),function(_ae,_af){
with(_ae){
if(_ae!=objj_msgSend(CPSearchField,"class")){
return;
}
var _b0=objj_msgSend(CPBundle,"bundleForClass:",_ae);
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldSearch.png"),{width:_5,height:_7});
_2=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldFind.png"),{width:_5,height:_7});
_3=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldCancel.png"),{width:_6,height:_7});
_4=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_b0,"pathForResource:","CPSearchField/CPSearchFieldCancelPressed.png"),{width:_6,height:_7});
}
}),new objj_method(sel_getUid("_keyboardDelayForPartialSearchString:"),function(_b1,_b2,_b3){
with(_b1){
return (6-MIN(objj_msgSend(_b3,"length"),4))/10;
}
})]);
var _b4="CPRecentsAutosaveNameKey",_b5="CPSendsWholeSearchStringKey",_b6="CPSendsSearchStringImmediatelyKey",_b7="CPMaximumRecentsKey",_b8="CPSearchMenuTemplateKey";
var _a=objj_getClass("CPSearchField");
if(!_a){
throw new SyntaxError("*** Could not find definition for class \"CPSearchField\"");
}
var _b=_a.isa;
class_addMethods(_a,[new objj_method(sel_getUid("encodeWithCoder:"),function(_b9,_ba,_bb){
with(_b9){
objj_msgSend(_searchButton,"removeFromSuperview");
objj_msgSend(_cancelButton,"removeFromSuperview");
objj_msgSendSuper({receiver:_b9,super_class:objj_getClass("CPSearchField").super_class},"encodeWithCoder:",_bb);
if(_searchButton){
objj_msgSend(_b9,"addSubview:",_searchButton);
}
if(_cancelButton){
objj_msgSend(_b9,"addSubview:",_cancelButton);
}
objj_msgSend(_bb,"encodeBool:forKey:",_sendsWholeSearchString,_b5);
objj_msgSend(_bb,"encodeBool:forKey:",_sendsSearchStringImmediately,_b6);
objj_msgSend(_bb,"encodeInt:forKey:",_maximumRecents,_b7);
if(_recentsAutosaveName){
objj_msgSend(_bb,"encodeObject:forKey:",_recentsAutosaveName,_b4);
}
if(_searchMenuTemplate){
objj_msgSend(_bb,"encodeObject:forKey:",_searchMenuTemplate,_b8);
}
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_bc,_bd,_be){
with(_bc){
if(_bc=objj_msgSendSuper({receiver:_bc,super_class:objj_getClass("CPSearchField").super_class},"initWithCoder:",_be)){
objj_msgSend(_bc,"setRecentsAutosaveName:",objj_msgSend(_be,"decodeObjectForKey:",_b4));
_sendsWholeSearchString=objj_msgSend(_be,"decodeBoolForKey:",_b5);
_sendsSearchStringImmediately=objj_msgSend(_be,"decodeBoolForKey:",_b6);
_maximumRecents=objj_msgSend(_be,"decodeIntForKey:",_b7);
var _bf=objj_msgSend(_be,"decodeObjectForKey:",_b8);
if(_bf){
objj_msgSend(_bc,"setSearchMenuTemplate:",_bf);
}
objj_msgSend(_bc,"_init");
}
return _bc;
}
})]);
p;19;CPSecureTextField.jt;285;@STATIC;1.0;i;13;CPTextField.jt;249;
objj_executeFile("CPTextField.j",YES);
var _1=objj_allocateClassPair(CPTextField,"CPSecureTextField"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isSecure"),function(_3,_4){
with(_3){
return YES;
}
})]);
p;20;CPSegmentedControl.jt;23372;@STATIC;1.0;I;20;Foundation/CPArray.ji;11;CPControl.jt;23311;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPControl.j",YES);
CPSegmentSwitchTrackingSelectOne=0;
CPSegmentSwitchTrackingSelectAny=1;
CPSegmentSwitchTrackingMomentary=2;
var _1=objj_allocateClassPair(CPControl,"CPSegmentedControl"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_segments"),new objj_ivar("_themeStates"),new objj_ivar("_selectedSegment"),new objj_ivar("_segmentStyle"),new objj_ivar("_trackingMode"),new objj_ivar("_trackingSegment"),new objj_ivar("_trackingHighlighted")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_segments=[];
_themeStates=[];
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSegmentedControl").super_class},"initWithFrame:",_5);
if(_3){
_selectedSegment=-1;
_trackingMode=CPSegmentSwitchTrackingSelectOne;
}
return _3;
}
}),new objj_method(sel_getUid("selectedTag"),function(_6,_7){
with(_6){
return objj_msgSend(_segments[_selectedSegment],"tag");
}
}),new objj_method(sel_getUid("setSegmentCount:"),function(_8,_9,_a){
with(_8){
if(_segments.length==_a){
return;
}
var _b=CGRectGetHeight(objj_msgSend(_8,"bounds")),_c=MAX(0,_segments.length-1),_d=MAX(0,_a-1);
if(_segments.length<_a){
for(var _e=_segments.length;_e<_a;++_e){
_segments[_e]=objj_msgSend(objj_msgSend(_CPSegmentItem,"alloc"),"init");
_themeStates[_e]=CPThemeStateNormal;
}
}else{
if(_a<_segments.length){
_segments.length=_a;
_themeStates.length=_a;
}
}
if(_selectedSegment>=_segments.length){
_selectedSegment=-1;
}
var _f=objj_msgSend(_8,"currentValueForThemeAttribute:","divider-thickness"),_10=_f*(_d-_c),_11=objj_msgSend(_8,"frame");
if(_10){
objj_msgSend(_8,"setFrameSize:",CGSizeMake(_11.size.width+_10,_11.size.height));
}
objj_msgSend(_8,"tileWithChangedSegment:",0);
}
}),new objj_method(sel_getUid("segmentCount"),function(_12,_13){
with(_12){
return _segments.length;
}
}),new objj_method(sel_getUid("setSelectedSegment:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_14,"setSelected:forSegment:",YES,_16);
}
}),new objj_method(sel_getUid("selectedSegment"),function(_17,_18){
with(_17){
return _selectedSegment;
}
}),new objj_method(sel_getUid("selectSegmentWithTag:"),function(_19,_1a,_1b){
with(_19){
var _1c=0;
for(;_1c<_segments.length;++_1c){
if(_segments[_1c].tag==_1b){
objj_msgSend(_19,"setSelectedSegment:",_1c);
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("isTracking"),function(_1d,_1e){
with(_1d){
}
}),new objj_method(sel_getUid("setTrackingMode:"),function(_1f,_20,_21){
with(_1f){
if(_trackingMode==_21){
return;
}
_trackingMode=_21;
if(_trackingMode==CPSegmentSwitchTrackingSelectOne){
var _22=0,_23=NO;
for(;_22<_segments.length;++_22){
if(objj_msgSend(_segments[_22],"selected")){
if(_23){
objj_msgSend(_1f,"setSelected:forSegment:",NO,_22);
}else{
_23=YES;
}
}
}
}else{
if(_trackingMode==CPSegmentSwitchTrackingMomentary){
var _22=0;
for(;_22<_segments.length;++_22){
if(objj_msgSend(_segments[_22],"selected")){
objj_msgSend(_1f,"setSelected:forSegment:",NO,_22);
}
}
}
}
}
}),new objj_method(sel_getUid("trackingMode"),function(_24,_25){
with(_24){
return _trackingMode;
}
}),new objj_method(sel_getUid("setWidth:forSegment:"),function(_26,_27,_28,_29){
with(_26){
objj_msgSend(_segments[_29],"setWidth:",_28);
objj_msgSend(_26,"tileWithChangedSegment:",_29);
}
}),new objj_method(sel_getUid("widthForSegment:"),function(_2a,_2b,_2c){
with(_2a){
return objj_msgSend(_segments[_2c],"width");
}
}),new objj_method(sel_getUid("setImage:forSegment:"),function(_2d,_2e,_2f,_30){
with(_2d){
objj_msgSend(_segments[_30],"setImage:",_2f);
objj_msgSend(_2d,"tileWithChangedSegment:",_30);
}
}),new objj_method(sel_getUid("imageForSegment:"),function(_31,_32,_33){
with(_31){
return objj_msgSend(_segments[_33],"image");
}
}),new objj_method(sel_getUid("setLabel:forSegment:"),function(_34,_35,_36,_37){
with(_34){
objj_msgSend(_segments[_37],"setLabel:",_36);
objj_msgSend(_34,"tileWithChangedSegment:",_37);
}
}),new objj_method(sel_getUid("labelForSegment:"),function(_38,_39,_3a){
with(_38){
return objj_msgSend(_segments[_3a],"label");
}
}),new objj_method(sel_getUid("setMenu:forSegment:"),function(_3b,_3c,_3d,_3e){
with(_3b){
objj_msgSend(_segments[_3e],"setMenu:",_3d);
}
}),new objj_method(sel_getUid("menuForSegment:"),function(_3f,_40,_41){
with(_3f){
return objj_msgSend(_segments[_41],"menu");
}
}),new objj_method(sel_getUid("setSelected:forSegment:"),function(_42,_43,_44,_45){
with(_42){
var _46=_segments[_45];
if(objj_msgSend(_46,"selected")==_44){
return;
}
objj_msgSend(_46,"setSelected:",_44);
_themeStates[_45]=_44?CPThemeStateSelected:CPThemeStateNormal;
if(_44){
var _47=_selectedSegment;
_selectedSegment=_45;
if(_trackingMode==CPSegmentSwitchTrackingSelectOne&&_47!=_45&&_47!=-1){
objj_msgSend(_segments[_47],"setSelected:",NO);
_themeStates[_47]=CPThemeStateNormal;
objj_msgSend(_42,"drawSegmentBezel:highlight:",_47,NO);
}
}
if(_trackingMode!=CPSegmentSwitchTrackingMomentary){
objj_msgSend(_42,"drawSegmentBezel:highlight:",_45,NO);
}
objj_msgSend(_42,"setNeedsLayout");
objj_msgSend(_42,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isSelectedForSegment:"),function(_48,_49,_4a){
with(_48){
return objj_msgSend(_segments[_4a],"selected");
}
}),new objj_method(sel_getUid("setEnabled:forSegment:"),function(_4b,_4c,_4d,_4e){
with(_4b){
objj_msgSend(_segments[_4e],"setEnabled:",_4d);
if(_4d){
_themeStates[_4e]&=~CPThemeStateDisabled;
}else{
_themeStates[_4e]|=CPThemeStateDisabled;
}
objj_msgSend(_4b,"setNeedsLayout");
objj_msgSend(_4b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isEnabledForSegment:"),function(_4f,_50,_51){
with(_4f){
return objj_msgSend(_segments[_51],"enabled");
}
}),new objj_method(sel_getUid("setTag:forSegment:"),function(_52,_53,_54,_55){
with(_52){
objj_msgSend(_segments[_55],"setTag:",_54);
}
}),new objj_method(sel_getUid("tagForSegment:"),function(_56,_57,_58){
with(_56){
return objj_msgSend(_segments[_58],"tag");
}
}),new objj_method(sel_getUid("drawSegmentBezel:highlight:"),function(_59,_5a,_5b,_5c){
with(_59){
if(_5c){
_themeStates[_5b]|=CPThemeStateHighlighted;
}else{
_themeStates[_5b]&=~CPThemeStateHighlighted;
}
objj_msgSend(_59,"setNeedsLayout");
objj_msgSend(_59,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_leftOffsetForSegment:"),function(_5d,_5e,_5f){
with(_5d){
var _60=objj_msgSend(_5d,"currentValueForThemeAttribute:","bezel-inset");
if(_5f==0){
return _60.left;
}
var _61=objj_msgSend(_5d,"currentValueForThemeAttribute:","divider-thickness");
return objj_msgSend(_5d,"_leftOffsetForSegment:",_5f-1)+objj_msgSend(_5d,"widthForSegment:",_5f-1)+_61;
}
}),new objj_method(sel_getUid("_indexOfLastSegment"),function(_62,_63){
with(_62){
var _64=objj_msgSend(_segments,"count")-1;
if(_64<0){
_64=0;
}
return _64;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_65,_66,_67){
with(_65){
var _68=objj_msgSend(_65,"currentValueForThemeAttribute:","default-height"),_69=objj_msgSend(_65,"currentValueForThemeAttribute:","content-inset"),_6a=objj_msgSend(_65,"currentValueForThemeAttribute:","bezel-inset"),_6b=objj_msgSend(_65,"bounds");
if(_67==="left-segment-bezel"){
return CGRectMake(_6a.left,_6a.top,_69.left,_68);
}else{
if(_67==="right-segment-bezel"){
return CPRectMake(CGRectGetWidth(objj_msgSend(_65,"bounds"))-_69.right,_6a.top,_69.right,_68);
}else{
if(_67.indexOf("segment-bezel")===0){
var _6c=parseInt(_67.substring("segment-bezel-".length),10),_6d=CGRectCreateCopy(objj_msgSend(_segments[_6c],"frame"));
if(_6c===0){
_6d.origin.x+=_69.left;
_6d.size.width-=_69.left;
}
if(_6c===_segments.length-1){
_6d.size.width=CGRectGetWidth(objj_msgSend(_65,"bounds"))-_69.right-_6d.origin.x;
}
return _6d;
}else{
if(_67.indexOf("divider-bezel")===0){
var _6c=parseInt(_67.substring("divider-bezel-".length),10),_6e=objj_msgSend(_65,"widthForSegment:",_6c),_6f=objj_msgSend(_65,"_leftOffsetForSegment:",_6c),_70=objj_msgSend(_65,"currentValueForThemeAttribute:","divider-thickness");
return CGRectMake(_6f+_6e,_6a.top,_70,_68);
}else{
if(_67.indexOf("segment-content")===0){
var _6c=parseInt(_67.substring("segment-content-".length),10);
return objj_msgSend(_65,"contentFrameForSegment:",_6c);
}
}
}
}
}
return objj_msgSendSuper({receiver:_65,super_class:objj_getClass("CPSegmentedControl").super_class},"rectForEphemeralSubviewNamed:",_67);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_71,_72,_73){
with(_71){
if(objj_msgSend(_73,"hasPrefix:","segment-content")){
return objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
return objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_74,_75){
with(_74){
if(_segments.length<=0){
return;
}
var _76=_themeStates[0];
_76|=_themeState&CPThemeStateDisabled;
var _77=objj_msgSend(_74,"valueForThemeAttribute:inState:","left-segment-bezel-color",_76),_78=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","left-segment-bezel",CPWindowBelow,nil);
objj_msgSend(_78,"setBackgroundColor:",_77);
var _76=_themeStates[_themeStates.length-1];
_76|=_themeState&CPThemeStateDisabled;
var _79=objj_msgSend(_74,"valueForThemeAttribute:inState:","right-segment-bezel-color",_76),_7a=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","right-segment-bezel",CPWindowBelow,nil);
objj_msgSend(_7a,"setBackgroundColor:",_79);
for(var i=0,_7b=_themeStates.length;i<_7b;i++){
var _76=_themeStates[i];
_76|=_themeState&CPThemeStateDisabled;
var _7c=objj_msgSend(_74,"valueForThemeAttribute:inState:","center-segment-bezel-color",_76),_7d=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","segment-bezel-"+i,CPWindowBelow,nil);
objj_msgSend(_7d,"setBackgroundColor:",_7c);
var _7e=_segments[i],_7f=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","segment-content-"+i,CPWindowAbove,"segment-bezel-"+i);
objj_msgSend(_7f,"setText:",objj_msgSend(_7e,"label"));
objj_msgSend(_7f,"setImage:",objj_msgSend(_7e,"image"));
objj_msgSend(_7f,"setFont:",objj_msgSend(_74,"valueForThemeAttribute:inState:","font",_76));
objj_msgSend(_7f,"setTextColor:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-color",_76));
objj_msgSend(_7f,"setAlignment:",objj_msgSend(_74,"valueForThemeAttribute:inState:","alignment",_76));
objj_msgSend(_7f,"setVerticalAlignment:",objj_msgSend(_74,"valueForThemeAttribute:inState:","vertical-alignment",_76));
objj_msgSend(_7f,"setLineBreakMode:",objj_msgSend(_74,"valueForThemeAttribute:inState:","line-break-mode",_76));
objj_msgSend(_7f,"setTextShadowColor:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-shadow-color",_76));
objj_msgSend(_7f,"setTextShadowOffset:",objj_msgSend(_74,"valueForThemeAttribute:inState:","text-shadow-offset",_76));
objj_msgSend(_7f,"setImageScaling:",objj_msgSend(_74,"valueForThemeAttribute:inState:","image-scaling",_76));
if(objj_msgSend(_7e,"image")&&objj_msgSend(_7e,"label")){
objj_msgSend(_7f,"setImagePosition:",objj_msgSend(_74,"valueForThemeAttribute:inState:","image-position",_76));
}else{
if(objj_msgSend(_7e,"image")){
objj_msgSend(_7f,"setImagePosition:",CPImageOnly);
}
}
if(i==_7b-1){
continue;
}
var _80=_themeStates[i]|_themeStates[i+1];
_80=(_80&CPThemeStateSelected&~CPThemeStateHighlighted)?CPThemeStateSelected:CPThemeStateNormal;
_80|=_themeState&CPThemeStateDisabled;
var _81=objj_msgSend(_74,"valueForThemeAttribute:inState:","divider-bezel-color",_80),_82=objj_msgSend(_74,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","divider-bezel-"+i,CPWindowBelow,nil);
objj_msgSend(_82,"setBackgroundColor:",_81);
}
}
}),new objj_method(sel_getUid("drawSegment:highlight:"),function(_83,_84,_85,_86){
with(_83){
}
}),new objj_method(sel_getUid("tileWithChangedSegment:"),function(_87,_88,_89){
with(_87){
if(_89>=_segments.length){
return;
}
var _8a=_segments[_89],_8b=objj_msgSend(_8a,"width"),_8c=_themeStates[_89]|(_themeState&CPThemeStateDisabled),_8d=objj_msgSend(_87,"valueForThemeAttribute:inState:","content-inset",_8c),_8e=objj_msgSend(_87,"font");
if(!_8b){
if(objj_msgSend(_8a,"image")&&objj_msgSend(_8a,"label")){
_8b=objj_msgSend(objj_msgSend(_8a,"label"),"sizeWithFont:",_8e).width+objj_msgSend(objj_msgSend(_8a,"image"),"size").width+_8d.left+_8d.right;
}else{
if(_8a.image){
_8b=objj_msgSend(objj_msgSend(_8a,"image"),"size").width+_8d.left+_8d.right;
}else{
if(_8a.label){
_8b=objj_msgSend(objj_msgSend(_8a,"label"),"sizeWithFont:",_8e).width+_8d.left+_8d.right;
}else{
_8b=0;
}
}
}
}
var _8f=_8b-CGRectGetWidth(objj_msgSend(_8a,"frame"));
if(!_8f){
objj_msgSend(_87,"setNeedsLayout");
objj_msgSend(_87,"setNeedsDisplay:",YES);
return;
}
var _90=objj_msgSend(_87,"frame");
objj_msgSend(_87,"setFrameSize:",CGSizeMake(CGRectGetWidth(_90)+_8f,CGRectGetHeight(_90)));
objj_msgSend(_8a,"setWidth:",_8b);
objj_msgSend(_8a,"setFrame:",objj_msgSend(_87,"frameForSegment:",_89));
var _91=_89+1;
for(;_91<_segments.length;++_91){
objj_msgSend(_segments[_91],"frame").origin.x+=_8f;
objj_msgSend(_87,"drawSegmentBezel:highlight:",_91,NO);
objj_msgSend(_87,"drawSegment:highlight:",_91,NO);
}
objj_msgSend(_87,"drawSegmentBezel:highlight:",_89,NO);
objj_msgSend(_87,"drawSegment:highlight:",_89,NO);
objj_msgSend(_87,"setNeedsLayout");
objj_msgSend(_87,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("frameForSegment:"),function(_92,_93,_94){
with(_92){
return objj_msgSend(_92,"bezelFrameForSegment:",_94);
}
}),new objj_method(sel_getUid("bezelFrameForSegment:"),function(_95,_96,_97){
with(_95){
var _98=objj_msgSend(_95,"currentValueForThemeAttribute:","default-height"),_99=objj_msgSend(_95,"currentValueForThemeAttribute:","bezel-inset"),_9a=objj_msgSend(_95,"widthForSegment:",_97),_9b=objj_msgSend(_95,"_leftOffsetForSegment:",_97);
return CGRectMake(_9b,_99.top,_9a,_98);
}
}),new objj_method(sel_getUid("contentFrameForSegment:"),function(_9c,_9d,_9e){
with(_9c){
var _9f=objj_msgSend(_9c,"currentValueForThemeAttribute:","default-height"),_a0=objj_msgSend(_9c,"currentValueForThemeAttribute:","content-inset"),_a1=objj_msgSend(_9c,"widthForSegment:",_9e),_a2=objj_msgSend(_9c,"_leftOffsetForSegment:",_9e);
return CGRectMake(_a2+_a0.left,_a0.top,_a1-_a0.left-_a0.right,_9f-_a0.top-_a0.bottom);
}
}),new objj_method(sel_getUid("testSegment:"),function(_a3,_a4,_a5){
with(_a3){
var _a6=objj_msgSend(_a3,"convertPoint:fromView:",_a5,nil),_a7=_segments.length;
while(_a7--){
if(CGRectContainsPoint(objj_msgSend(_segments[_a7],"frame"),_a5)){
return _a7;
}
}
if(_segments.length){
var _a8=CGRectCreateCopy(objj_msgSend(_segments[_segments.length-1],"frame"));
_a8.size.width=CGRectGetWidth(objj_msgSend(_a3,"bounds"))-_a8.origin.x;
if(CGRectContainsPoint(_a8,_a5)){
return _segments.length-1;
}
}
return -1;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_a9,_aa,_ab){
with(_a9){
if(!objj_msgSend(_a9,"isEnabled")){
return;
}
objj_msgSend(_a9,"trackSegment:",_ab);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_ac,_ad,_ae){
with(_ac){
}
}),new objj_method(sel_getUid("trackSegment:"),function(_af,_b0,_b1){
with(_af){
var _b2=objj_msgSend(_b1,"type"),_b3=objj_msgSend(_af,"convertPoint:fromView:",objj_msgSend(_b1,"locationInWindow"),nil);
if(_b2==CPLeftMouseUp){
if(_trackingSegment==-1){
return;
}
if(_trackingSegment===objj_msgSend(_af,"testSegment:",_b3)){
if(_trackingMode==CPSegmentSwitchTrackingSelectAny){
objj_msgSend(_af,"setSelected:forSegment:",!objj_msgSend(_af,"isSelectedForSegment:",_trackingSegment),_trackingSegment);
_selectedSegment=_trackingSegment;
}else{
objj_msgSend(_af,"setSelected:forSegment:",YES,_trackingSegment);
}
objj_msgSend(_af,"sendAction:to:",objj_msgSend(_af,"action"),objj_msgSend(_af,"target"));
if(_trackingMode==CPSegmentSwitchTrackingMomentary){
objj_msgSend(_af,"setSelected:forSegment:",NO,_trackingSegment);
_selectedSegment=-1;
}
}
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,NO);
_trackingSegment=-1;
return;
}
if(_b2==CPLeftMouseDown){
var _b4=objj_msgSend(_af,"testSegment:",_b3);
if(_b4>-1&&objj_msgSend(_af,"isEnabledForSegment:",_b4)){
_trackingHighlighted=YES;
_trackingSegment=_b4;
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,YES);
}
}else{
if(_b2==CPLeftMouseDragged){
if(_trackingSegment==-1){
return;
}
var _b5=objj_msgSend(_af,"testSegment:",_b3)===_trackingSegment;
if(_b5!=_trackingHighlighted){
_trackingHighlighted=_b5;
objj_msgSend(_af,"drawSegmentBezel:highlight:",_trackingSegment,_trackingHighlighted);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_af,sel_getUid("trackSegment:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("setFont:"),function(_b6,_b7,_b8){
with(_b6){
objj_msgSendSuper({receiver:_b6,super_class:objj_getClass("CPSegmentedControl").super_class},"setFont:",_b8);
objj_msgSend(_b6,"tileWithChangedSegment:",0);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_b9,_ba){
with(_b9){
return "segmented-control";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_bb,_bc){
with(_bb){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[CPCenterTextAlignment,CPCenterVerticalTextAlignment,CPImageLeft,CPImageScaleNone,{top:(0),right:(0),bottom:(0),left:(0)},{top:(0),right:(0),bottom:(0),left:(0)},objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),1,24],["alignment","vertical-alignment","image-position","image-scaling","bezel-inset","content-inset","left-segment-bezel-color","right-segment-bezel-color","center-segment-bezel-color","divider-bezel-color","divider-thickness","default-height"]);
}
})]);
var _bd="CPSegmentedControlSegmentsKey",_be="CPSegmentedControlSelectedKey",_bf="CPSegmentedControlSegmentStyleKey",_c0="CPSegmentedControlTrackingModeKey";
var _1=objj_getClass("CPSegmentedControl");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSegmentedControl\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_c1,_c2,_c3){
with(_c1){
_c1=objj_msgSendSuper({receiver:_c1,super_class:objj_getClass("CPSegmentedControl").super_class},"initWithCoder:",_c3);
if(_c1){
var _c4=objj_msgSend(_c1,"frame"),_c5=_c4.size.width;
_c4.size.width=0;
objj_msgSend(_c1,"setFrame:",_c4);
_segments=objj_msgSend(_c3,"decodeObjectForKey:",_bd);
_segmentStyle=objj_msgSend(_c3,"decodeIntForKey:",_bf);
_themeStates=[];
if(objj_msgSend(_c3,"containsValueForKey:",_be)){
_selectedSegment=objj_msgSend(_c3,"decodeIntForKey:",_be);
}else{
_selectedSegment=-1;
}
if(objj_msgSend(_c3,"containsValueForKey:",_c0)){
_trackingMode=objj_msgSend(_c3,"decodeIntForKey:",_c0);
}else{
_trackingMode=CPSegmentSwitchTrackingSelectOne;
}
for(var i=0;i<_segments.length;i++){
_themeStates[i]=objj_msgSend(_segments[i],"selected")?CPThemeStateSelected:CPThemeStateNormal;
objj_msgSend(_c1,"tileWithChangedSegment:",i);
}
var _c6=MAX(_c5-objj_msgSend(_c1,"frame").size.width,0),_c7=FLOOR(_c6/_segments.length);
for(var i=0;i<_segments.length;i++){
objj_msgSend(_c1,"setWidth:forSegment:",objj_msgSend(_segments[i],"width")+_c7,i);
}
objj_msgSend(_c1,"tileWithChangedSegment:",0);
}
return _c1;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_c8,_c9,_ca){
with(_c8){
objj_msgSendSuper({receiver:_c8,super_class:objj_getClass("CPSegmentedControl").super_class},"encodeWithCoder:",_ca);
objj_msgSend(_ca,"encodeObject:forKey:",_segments,_bd);
objj_msgSend(_ca,"encodeInt:forKey:",_selectedSegment,_be);
objj_msgSend(_ca,"encodeInt:forKey:",_segmentStyle,_bf);
objj_msgSend(_ca,"encodeInt:forKey:",_trackingMode,_c0);
}
})]);
var _1=objj_allocateClassPair(CPObject,"_CPSegmentItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("image"),new objj_ivar("label"),new objj_ivar("menu"),new objj_ivar("selected"),new objj_ivar("enabled"),new objj_ivar("tag"),new objj_ivar("width"),new objj_ivar("frame")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("image"),function(_cb,_cc){
with(_cb){
return image;
}
}),new objj_method(sel_getUid("setImage:"),function(_cd,_ce,_cf){
with(_cd){
image=_cf;
}
}),new objj_method(sel_getUid("label"),function(_d0,_d1){
with(_d0){
return label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_d2,_d3,_d4){
with(_d2){
label=_d4;
}
}),new objj_method(sel_getUid("menu"),function(_d5,_d6){
with(_d5){
return menu;
}
}),new objj_method(sel_getUid("setMenu:"),function(_d7,_d8,_d9){
with(_d7){
menu=_d9;
}
}),new objj_method(sel_getUid("selected"),function(_da,_db){
with(_da){
return selected;
}
}),new objj_method(sel_getUid("setSelected:"),function(_dc,_dd,_de){
with(_dc){
selected=_de;
}
}),new objj_method(sel_getUid("enabled"),function(_df,_e0){
with(_df){
return enabled;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_e1,_e2,_e3){
with(_e1){
enabled=_e3;
}
}),new objj_method(sel_getUid("tag"),function(_e4,_e5){
with(_e4){
return tag;
}
}),new objj_method(sel_getUid("setTag:"),function(_e6,_e7,_e8){
with(_e6){
tag=_e8;
}
}),new objj_method(sel_getUid("width"),function(_e9,_ea){
with(_e9){
return width;
}
}),new objj_method(sel_getUid("setWidth:"),function(_eb,_ec,_ed){
with(_eb){
width=_ed;
}
}),new objj_method(sel_getUid("frame"),function(_ee,_ef){
with(_ee){
return frame;
}
}),new objj_method(sel_getUid("setFrame:"),function(_f0,_f1,_f2){
with(_f0){
frame=_f2;
}
}),new objj_method(sel_getUid("init"),function(_f3,_f4){
with(_f3){
if(_f3=objj_msgSendSuper({receiver:_f3,super_class:objj_getClass("_CPSegmentItem").super_class},"init")){
image=nil;
label="";
menu=nil;
selected=NO;
enabled=YES;
tag=-1;
width=0;
frame=CGRectMakeZero();
}
return _f3;
}
})]);
var _f5="CPSegmentItemImageKey",_f6="CPSegmentItemLabelKey",_f7="CPSegmentItemMenuKey",_f8="CPSegmentItemSelectedKey",_f9="CPSegmentItemEnabledKey",_fa="CPSegmentItemTagKey",_fb="CPSegmentItemWidthKey";
var _1=objj_getClass("_CPSegmentItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPSegmentItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_fc,_fd,_fe){
with(_fc){
_fc=objj_msgSendSuper({receiver:_fc,super_class:objj_getClass("_CPSegmentItem").super_class},"init");
if(_fc){
image=objj_msgSend(_fe,"decodeObjectForKey:",_f5);
label=objj_msgSend(_fe,"decodeObjectForKey:",_f6);
menu=objj_msgSend(_fe,"decodeObjectForKey:",_f7);
selected=objj_msgSend(_fe,"decodeBoolForKey:",_f8);
enabled=objj_msgSend(_fe,"decodeBoolForKey:",_f9);
tag=objj_msgSend(_fe,"decodeIntForKey:",_fa);
width=objj_msgSend(_fe,"decodeFloatForKey:",_fb);
frame=CGRectMakeZero();
}
return _fc;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_ff,_100,_101){
with(_ff){
objj_msgSend(_101,"encodeObject:forKey:",image,_f5);
objj_msgSend(_101,"encodeObject:forKey:",label,_f6);
objj_msgSend(_101,"encodeObject:forKey:",menu,_f7);
objj_msgSend(_101,"encodeBool:forKey:",selected,_f8);
objj_msgSend(_101,"encodeBool:forKey:",enabled,_f9);
objj_msgSend(_101,"encodeInt:forKey:",tag,_fa);
objj_msgSend(_101,"encodeFloat:forKey:",width,_fb);
}
})]);
p;10;CPShadow.jt;1318;@STATIC;1.0;I;21;Foundation/CPObject.jt;1273;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPShadow"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_offset"),new objj_ivar("_blurRadius"),new objj_ivar("_color"),new objj_ivar("_cssString")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_initWithOffset:blurRadius:color:"),function(_3,_4,_5,_6,_7){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPShadow").super_class},"init");
if(_3){
_offset=_5;
_blurRadius=_6;
_color=_7;
_cssString=objj_msgSend(_color,"cssString")+" "+ROUND(_5.width)+"px "+ROUND(_5.height)+"px "+ROUND(_blurRadius)+"px";
}
return _3;
}
}),new objj_method(sel_getUid("shadowOffset"),function(_8,_9){
with(_8){
return _offset;
}
}),new objj_method(sel_getUid("shadowBlurRadius"),function(_a,_b){
with(_a){
return _blurRadius;
}
}),new objj_method(sel_getUid("shadowColor"),function(_c,_d){
with(_c){
return _color;
}
}),new objj_method(sel_getUid("cssString"),function(_e,_f){
with(_e){
return _cssString;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("shadowWithOffset:blurRadius:color:"),function(_10,_11,_12,_13,_14){
with(_10){
return objj_msgSend(objj_msgSend(CPShadow,"alloc"),"_initWithOffset:blurRadius:color:",_12,_13,_14);
}
})]);
p;14;CPShadowView.jt;4736;@STATIC;1.0;I;21;Foundation/CPBundle.ji;12;CGGeometry.ji;9;CPImage.ji;13;CPImageView.ji;8;CPView.jt;4631;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
CPLightShadow=0;
CPHeavyShadow=1;
var _1=nil,_2=nil;
var _3=3,_4=3,_5=3,_6=5,_7=7,_8=7,_9=5,_a=5;
var _b=objj_allocateClassPair(CPView,"CPShadowView"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_weight")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("initWithFrame:"),function(_d,_e,_f){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPShadowView").super_class},"initWithFrame:",_f);
if(_d){
_weight=CPLightShadow;
objj_msgSend(_d,"setBackgroundColor:",_1);
objj_msgSend(_d,"setHitTests:",NO);
}
return _d;
}
}),new objj_method(sel_getUid("setWeight:"),function(_10,_11,_12){
with(_10){
if(_weight==_12){
return;
}
_weight=_12;
if(_weight==CPLightShadow){
objj_msgSend(_10,"setBackgroundColor:",_1);
}else{
objj_msgSend(_10,"setBackgroundColor:",_2);
}
}
}),new objj_method(sel_getUid("leftInset"),function(_13,_14){
with(_13){
return _weight==CPLightShadow?_3:_7;
}
}),new objj_method(sel_getUid("rightInset"),function(_15,_16){
with(_15){
return _weight==CPLightShadow?_4:_8;
}
}),new objj_method(sel_getUid("topInset"),function(_17,_18){
with(_17){
return _weight==CPLightShadow?_5:_9;
}
}),new objj_method(sel_getUid("bottomInset"),function(_19,_1a){
with(_19){
return _weight==CPLightShadow?_6:_a;
}
}),new objj_method(sel_getUid("horizontalInset"),function(_1b,_1c){
with(_1b){
if(_weight==CPLightShadow){
return _3+_4;
}
return _7+_8;
}
}),new objj_method(sel_getUid("verticalInset"),function(_1d,_1e){
with(_1d){
if(_weight==CPLightShadow){
return _5+_6;
}
return _9+_a;
}
}),new objj_method(sel_getUid("frameForContentFrame:"),function(_1f,_20,_21){
with(_1f){
return objj_msgSend(objj_msgSend(_1f,"class"),"frameForContentFrame:withWeight:",_21,_weight);
}
}),new objj_method(sel_getUid("setFrameForContentFrame:"),function(_22,_23,_24){
with(_22){
objj_msgSend(_22,"setFrame:",objj_msgSend(_22,"frameForContentFrame:",_24));
}
})]);
class_addMethods(_c,[new objj_method(sel_getUid("initialize"),function(_25,_26){
with(_25){
if(_25!=objj_msgSend(CPShadowView,"class")){
return;
}
var _27=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_25,"class"));
_1=CPColorWithImages([["CPShadowView/CPShadowViewLightTopLeft.png",9,9,_27],["CPShadowView/CPShadowViewLightTop.png",1,9,_27],["CPShadowView/CPShadowViewLightTopRight.png",9,9,_27],["CPShadowView/CPShadowViewLightLeft.png",9,1,_27],nil,["CPShadowView/CPShadowViewLightRight.png",9,1,_27],["CPShadowView/CPShadowViewLightBottomLeft.png",9,9,_27],["CPShadowView/CPShadowViewLightBottom.png",1,9,_27],["CPShadowView/CPShadowViewLightBottomRight.png",9,9,_27]]);
_2=CPColorWithImages([["CPShadowView/CPShadowViewHeavyTopLeft.png",17,17,_27],["CPShadowView/CPShadowViewHeavyTop.png",1,17,_27],["CPShadowView/CPShadowViewHeavyTopRight.png",17,17,_27],["CPShadowView/CPShadowViewHeavyLeft.png",17,1,_27],nil,["CPShadowView/CPShadowViewHeavyRight.png",17,1,_27],["CPShadowView/CPShadowViewHeavyBottomLeft.png",17,17,_27],["CPShadowView/CPShadowViewHeavyBottom.png",1,17,_27],["CPShadowView/CPShadowViewHeavyBottomRight.png",17,17,_27]]);
}
}),new objj_method(sel_getUid("shadowViewEnclosingView:"),function(_28,_29,_2a){
with(_28){
return objj_msgSend(_28,"shadowViewEnclosingView:withWeight:",_2a,CPLightShadow);
}
}),new objj_method(sel_getUid("shadowViewEnclosingView:withWeight:"),function(_2b,_2c,_2d,_2e){
with(_2b){
var _2f=objj_msgSend(objj_msgSend(_2b,"alloc"),"initWithFrame:",objj_msgSend(_2d,"frame"));
if(_2f){
objj_msgSend(_2f,"setWeight:",_2e);
var _30=objj_msgSend(_2f,"frame").size,_31=_30.width-objj_msgSend(_2f,"leftInset")-objj_msgSend(_2f,"rightInset"),_32=_30.height-objj_msgSend(_2f,"topInset")-objj_msgSend(_2f,"bottomInset"),_33=objj_msgSend(_2d,"superview");
objj_msgSend(_2f,"setHitTests:",objj_msgSend(_2d,"hitTests"));
objj_msgSend(_2f,"setAutoresizingMask:",objj_msgSend(_2d,"autoresizingMask"));
objj_msgSend(_2d,"removeFromSuperview");
objj_msgSend(_2f,"addSubview:",_2d);
objj_msgSend(_2d,"setFrame:",CGRectMake(objj_msgSend(_2f,"leftInset"),objj_msgSend(_2f,"topInset"),_31,_32));
objj_msgSend(_33,"addSubview:",_2f);
}
return _2f;
}
}),new objj_method(sel_getUid("frameForContentFrame:withWeight:"),function(_34,_35,_36,_37){
with(_34){
if(_37==CPLightShadow){
return CGRectMake((_36.origin.x)-_3,(_36.origin.y)-_5,(_36.size.width)+_3+_4,(_36.size.height)+_5+_6);
}else{
return CGRectMake((_36.origin.x)-_7,(_36.origin.y)-_9,(_36.size.width)+_7+_8,(_36.size.height)+_9+_a);
}
}
})]);
p;10;CPSlider.jt;11847;@STATIC;1.0;i;11;CPControl.jt;11811;
objj_executeFile("CPControl.j",YES);
CPLinearSlider=0;
CPCircularSlider=1;
var _1=objj_allocateClassPair(CPControl,"CPSlider"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_minValue"),new objj_ivar("_maxValue"),new objj_ivar("_altIncrementValue"),new objj_ivar("_isVertical")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSlider").super_class},"initWithFrame:",_5);
if(_3){
_minValue=0;
_maxValue=100;
objj_msgSend(_3,"setObjectValue:",50);
objj_msgSend(_3,"setContinuous:",YES);
objj_msgSend(_3,"_recalculateIsVertical");
}
return _3;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_6,_7,_8){
with(_6){
if(_minValue===_8){
return;
}
_minValue=_8;
var _9=objj_msgSend(_6,"doubleValue");
if(_9<_minValue){
objj_msgSend(_6,"setDoubleValue:",_minValue);
}
objj_msgSend(_6,"setNeedsLayout");
objj_msgSend(_6,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("minValue"),function(_a,_b){
with(_a){
return _minValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_c,_d,_e){
with(_c){
if(_maxValue===_e){
return;
}
_maxValue=_e;
var _f=objj_msgSend(_c,"doubleValue");
if(_f>_maxValue){
objj_msgSend(_c,"setDoubleValue:",_maxValue);
}
objj_msgSend(_c,"setNeedsLayout");
objj_msgSend(_c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("maxValue"),function(_10,_11){
with(_10){
return _maxValue;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_12,_13,_14){
with(_12){
objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPSlider").super_class},"setObjectValue:",MIN(MAX(_14,_minValue),_maxValue));
objj_msgSend(_12,"setNeedsLayout");
objj_msgSend(_12,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setSliderType:"),function(_15,_16,_17){
with(_15){
if(_17===CPCircularSlider){
objj_msgSend(_15,"setThemeState:",CPThemeStateCircular);
}else{
objj_msgSend(_15,"unsetThemeState:",CPThemeStateCircular);
}
}
}),new objj_method(sel_getUid("sliderType"),function(_18,_19){
with(_18){
return objj_msgSend(_18,"hasThemeState:",CPThemeStateCircular)?CPCircularSlider:CPLinearSlider;
}
}),new objj_method(sel_getUid("trackRectForBounds:"),function(_1a,_1b,_1c){
with(_1a){
if(objj_msgSend(_1a,"hasThemeState:",CPThemeStateCircular)){
var _1d=CGRectCreateCopy(_1c);
_1c.size.width=MIN(_1c.size.width,_1c.size.height);
_1c.size.height=_1c.size.width;
if(_1c.size.width<_1d.size.width){
_1c.origin.x+=(_1d.size.width-_1c.size.width)/2;
}else{
_1c.origin.y+=(_1d.size.height-_1c.size.height)/2;
}
}else{
var _1e=objj_msgSend(_1a,"currentValueForThemeAttribute:","track-width");
if(_1e<=0){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(objj_msgSend(_1a,"isVertical")){
_1c.origin.x=((_1c.size.width)-_1e)/2;
_1c.size.width=_1e;
}else{
_1c.origin.y=((_1c.size.height)-_1e)/2;
_1c.size.height=_1e;
}
}
return _1c;
}
}),new objj_method(sel_getUid("knobRectForBounds:"),function(_1f,_20,_21){
with(_1f){
var _22=objj_msgSend(_1f,"currentValueForThemeAttribute:","knob-size");
if(_22.width<=0||_22.height<=0){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _23={origin:{x:0,y:0},size:{width:_22.width,height:_22.height}},_24=objj_msgSend(_1f,"trackRectForBounds:",_21);
if(!_24||(_24.size.width<=0||_24.size.height<=0)){
_24=_21;
}
if(objj_msgSend(_1f,"hasThemeState:",CPThemeStateCircular)){
var _25=3*PI_2-(1-objj_msgSend(_1f,"doubleValue")-_minValue)/(_maxValue-_minValue)*PI2,_26=CGRectGetWidth(_24)/2-8;
_23.origin.x=_26*COS(_25)+CGRectGetMidX(_24)-3;
_23.origin.y=_26*SIN(_25)+CGRectGetMidY(_24)-2;
}else{
if(objj_msgSend(_1f,"isVertical")){
_23.origin.x=(_24.origin.x+(_24.size.width)/2)-_22.width/2;
_23.origin.y=((_maxValue-objj_msgSend(_1f,"doubleValue"))/(_maxValue-_minValue))*((_24.size.height)-_22.height);
}else{
_23.origin.x=((objj_msgSend(_1f,"doubleValue")-_minValue)/(_maxValue-_minValue))*((_24.size.width)-_22.width);
_23.origin.y=(_24.origin.y+(_24.size.height)/2)-_22.height/2;
}
}
return _23;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_27,_28,_29){
with(_27){
if(_29==="track-view"){
return objj_msgSend(_27,"trackRectForBounds:",objj_msgSend(_27,"bounds"));
}else{
if(_29==="knob-view"){
return objj_msgSend(_27,"knobRectForBounds:",objj_msgSend(_27,"bounds"));
}
}
return objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPSlider").super_class},"rectForEphemeralSubviewNamed:",_29);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_2a,_2b,_2c){
with(_2a){
if(_2c==="track-view"||_2c==="knob-view"){
var _2d=objj_msgSend(objj_msgSend(CPView,"alloc"),"init");
objj_msgSend(_2d,"setHitTests:",NO);
return _2d;
}
return objj_msgSendSuper({receiver:_2a,super_class:objj_getClass("CPSlider").super_class},"createEphemeralSubviewNamed:",_2c);
}
}),new objj_method(sel_getUid("setAltIncrementValue:"),function(_2e,_2f,_30){
with(_2e){
_altIncrementValue=_30;
}
}),new objj_method(sel_getUid("altIncrementValue"),function(_31,_32){
with(_31){
return _altIncrementValue;
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_33,_34,_35){
with(_33){
objj_msgSendSuper({receiver:_33,super_class:objj_getClass("CPSlider").super_class},"setFrameSize:",_35);
objj_msgSend(_33,"_recalculateIsVertical");
}
}),new objj_method(sel_getUid("_recalculateIsVertical"),function(_36,_37){
with(_36){
var _38=objj_msgSend(_36,"bounds"),_39=(_38.size.width),_3a=(_38.size.height);
_isVertical=_39<_3a?1:(_39>_3a?0:-1);
if(_isVertical===1){
objj_msgSend(_36,"setThemeState:",CPThemeStateVertical);
}else{
if(_isVertical===0){
objj_msgSend(_36,"unsetThemeState:",CPThemeStateVertical);
}
}
}
}),new objj_method(sel_getUid("isVertical"),function(_3b,_3c){
with(_3b){
return _isVertical;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_3d,_3e){
with(_3d){
var _3f=objj_msgSend(_3d,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","track-view",CPWindowBelow,"knob-view");
if(_3f){
objj_msgSend(_3f,"setBackgroundColor:",objj_msgSend(_3d,"currentValueForThemeAttribute:","track-color"));
}
var _40=objj_msgSend(_3d,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","knob-view",CPWindowAbove,"track-view");
if(_40){
objj_msgSend(_40,"setBackgroundColor:",objj_msgSend(_3d,"currentValueForThemeAttribute:","knob-color"));
}
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(_41,_42){
with(_41){
return YES;
}
}),new objj_method(sel_getUid("_valueAtPoint:"),function(_43,_44,_45){
with(_43){
var _46=objj_msgSend(_43,"bounds"),_47=objj_msgSend(_43,"knobRectForBounds:",_46),_48=objj_msgSend(_43,"trackRectForBounds:",_46);
if(objj_msgSend(_43,"hasThemeState:",CPThemeStateCircular)){
var _49=(_47.size.width);
_48.origin.x+=_49/2;
_48.size.width-=_49;
var _4a=objj_msgSend(_43,"minValue"),dx=_45.x-(_48.origin.x+(_48.size.width)/2),dy=_45.y-(_48.origin.y+(_48.size.height)/2);
return MAX(0,MIN(1,1-(3*PI_2-ATAN2(dy,dx))%PI2/PI2))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}else{
if(objj_msgSend(_43,"isVertical")){
var _4b=(_47.size.height);
_48.origin.y+=_4b/2;
_48.size.height-=_4b;
var _4a=objj_msgSend(_43,"minValue");
return MAX(0,MIN(1,((_48.origin.y+_48.size.height)-_45.y)/(_48.size.height)))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}else{
var _49=(_47.size.width);
_48.origin.x+=_49/2;
_48.size.width-=_49;
var _4a=objj_msgSend(_43,"minValue");
return MAX(0,MIN(1,(_45.x-(_48.origin.x))/(_48.size.width)))*(objj_msgSend(_43,"maxValue")-_4a)+_4a;
}
}
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(_4c,_4d,_4e){
with(_4c){
var _4f=objj_msgSend(_4c,"bounds"),_50=objj_msgSend(_4c,"knobRectForBounds:",{origin:{x:_4f.origin.x,y:_4f.origin.y},size:{width:_4f.size.width,height:_4f.size.height}});
if((_4e.x>=(_50.origin.x)&&_4e.y>=(_50.origin.y)&&_4e.x<(_50.origin.x+_50.size.width)&&_4e.y<(_50.origin.y+_50.size.height))){
_dragOffset={width:(_50.origin.x+(_50.size.width)/2)-_4e.x,height:(_50.origin.y+(_50.size.height)/2)-_4e.y};
}else{
var _51=objj_msgSend(_4c,"trackRectForBounds:",_4f);
if(_51&&(_4e.x>=(_51.origin.x)&&_4e.y>=(_51.origin.y)&&_4e.x<(_51.origin.x+_51.size.width)&&_4e.y<(_51.origin.y+_51.size.height))){
_dragOffset={width:0,height:0};
objj_msgSend(_4c,"setObjectValue:",objj_msgSend(_4c,"_valueAtPoint:",_4e));
}else{
return NO;
}
}
objj_msgSend(_4c,"setHighlighted:",YES);
objj_msgSend(_4c,"setNeedsLayout");
objj_msgSend(_4c,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(_52,_53,_54,_55){
with(_52){
objj_msgSend(_52,"setObjectValue:",objj_msgSend(_52,"_valueAtPoint:",{x:_55.x+_dragOffset.width,y:_55.y+_dragOffset.height}));
return YES;
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(_56,_57,_58,_59,_5a){
with(_56){
objj_msgSend(_56,"setHighlighted:",NO);
if(objj_msgSend(_target,"respondsToSelector:",sel_getUid("sliderDidFinish:"))){
objj_msgSend(_target,"sliderDidFinish:",_56);
}
objj_msgSend(_56,"setNeedsLayout");
objj_msgSend(_56,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("isContinuous"),function(_5b,_5c){
with(_5b){
return (_sendActionOn&CPLeftMouseDraggedMask)!==0;
}
}),new objj_method(sel_getUid("setContinuous:"),function(_5d,_5e,_5f){
with(_5d){
if(_5f){
_sendActionOn|=CPLeftMouseDraggedMask;
}else{
_sendActionOn&=~CPLeftMouseDraggedMask;
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_60,_61,_62,_63){
with(_60){
var _64=_63.length,_65=objj_msgSend(_63[0],"valueForKeyPath:",_62);
objj_msgSend(_60,"setObjectValue:",_65);
while(_64-->1){
if(_65!==(objj_msgSend(_63[_64],"valueForKeyPath:",_62))){
return objj_msgSend(_60,"setFloatValue:",1);
}
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_66,_67){
with(_66){
return "slider";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_68,_69){
with(_68){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),{width:0,height:0},0,objj_msgSend(CPNull,"null")],["knob-color","knob-size","track-width","track-color"]);
}
})]);
var _6a="CPSliderMinValueKey",_6b="CPSliderMaxValueKey",_6c="CPSliderAltIncrValueKey";
var _1=objj_getClass("CPSlider");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_6d,_6e,_6f){
with(_6d){
_minValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6a);
_maxValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6b);
_6d=objj_msgSendSuper({receiver:_6d,super_class:objj_getClass("CPSlider").super_class},"initWithCoder:",_6f);
if(_6d){
_altIncrementValue=objj_msgSend(_6f,"decodeDoubleForKey:",_6c);
objj_msgSend(_6d,"_recalculateIsVertical");
objj_msgSend(_6d,"setNeedsLayout");
objj_msgSend(_6d,"setNeedsDisplay:",YES);
}
return _6d;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_70,_71,_72){
with(_70){
objj_msgSendSuper({receiver:_70,super_class:objj_getClass("CPSlider").super_class},"encodeWithCoder:",_72);
objj_msgSend(_72,"encodeDouble:forKey:",_minValue,_6a);
objj_msgSend(_72,"encodeDouble:forKey:",_maxValue,_6b);
objj_msgSend(_72,"encodeDouble:forKey:",_altIncrementValue,_6c);
}
})]);
var _1=objj_getClass("CPSlider");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("value"),function(_73,_74){
with(_73){
CPLog.warn("[CPSlider value] is deprecated, use doubleValue or objectValue instead.");
return objj_msgSend(_73,"doubleValue");
}
}),new objj_method(sel_getUid("setValue:"),function(_75,_76,_77){
with(_75){
CPLog.warn("[CPSlider setValue:] is deprecated, use setDoubleValue: or setObjectValue: instead.");
objj_msgSend(_75,"setObjectValue:",_77);
}
})]);
p;21;CPSliderColorPicker.jt;14235;@STATIC;1.0;i;8;CPView.ji;15;CPColorPicker.jt;14183;
objj_executeFile("CPView.j",YES);
objj_executeFile("CPColorPicker.j",YES);
var _1=objj_allocateClassPair(CPColorPicker,"CPSliderColorPicker"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_contentView"),new objj_ivar("_redSlider"),new objj_ivar("_greenSlider"),new objj_ivar("_blueSlider"),new objj_ivar("_hueSlider"),new objj_ivar("_saturationSlider"),new objj_ivar("_brightnessSlider"),new objj_ivar("_rgbLabel"),new objj_ivar("_hsbLabel"),new objj_ivar("_redLabel"),new objj_ivar("_greenLabel"),new objj_ivar("_blueLabel"),new objj_ivar("_hueLabel"),new objj_ivar("_saturationLabel"),new objj_ivar("_brightnessLabel"),new objj_ivar("_hexLabel"),new objj_ivar("_hexValue"),new objj_ivar("_hexValue"),new objj_ivar("_redValue"),new objj_ivar("_greenValue"),new objj_ivar("_blueValue"),new objj_ivar("_hueValue"),new objj_ivar("_saturationValue"),new objj_ivar("_brightnessValue")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithPickerMask:colorPanel:"),function(_3,_4,_5,_6){
with(_3){
return objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPSliderColorPicker").super_class},"initWithPickerMask:colorPanel:",_5,_6);
}
}),new objj_method(sel_getUid("initView"),function(_7,_8){
with(_7){
aFrame=CGRectMake(0,0,CPColorPickerViewWidth,CPColorPickerViewHeight);
_contentView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",aFrame);
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_rgbLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,10,100,20));
objj_msgSend(_rgbLabel,"setStringValue:","Red, Green, Blue");
objj_msgSend(_rgbLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_redLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,37,15,20));
objj_msgSend(_redLabel,"setStringValue:","R");
objj_msgSend(_redLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_redSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,35,aFrame.size.width-70,20));
objj_msgSend(_redSlider,"setMaxValue:",1);
objj_msgSend(_redSlider,"setMinValue:",0);
objj_msgSend(_redSlider,"setTarget:",_7);
objj_msgSend(_redSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_redSlider,"setAutoresizingMask:",CPViewWidthSizable);
_redValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,30,45,28));
objj_msgSend(_redValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_redValue,"setEditable:",YES);
objj_msgSend(_redValue,"setBezeled:",YES);
objj_msgSend(_redValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_redValue);
_greenLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,63,15,20));
objj_msgSend(_greenLabel,"setStringValue:","G");
objj_msgSend(_greenLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_greenSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,61,aFrame.size.width-70,20));
objj_msgSend(_greenSlider,"setMaxValue:",1);
objj_msgSend(_greenSlider,"setMinValue:",0);
objj_msgSend(_greenSlider,"setTarget:",_7);
objj_msgSend(_greenSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_greenSlider,"setAutoresizingMask:",CPViewWidthSizable);
_greenValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,56,45,28));
objj_msgSend(_greenValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_greenValue,"setEditable:",YES);
objj_msgSend(_greenValue,"setBezeled:",YES);
objj_msgSend(_greenValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_greenValue);
_blueLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,90,15,20));
objj_msgSend(_blueLabel,"setStringValue:","B");
objj_msgSend(_blueLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_blueSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,87,aFrame.size.width-70,20));
objj_msgSend(_blueSlider,"setMaxValue:",1);
objj_msgSend(_blueSlider,"setMinValue:",0);
objj_msgSend(_blueSlider,"setTarget:",_7);
objj_msgSend(_blueSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_blueSlider,"setAutoresizingMask:",CPViewWidthSizable);
_blueValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,82,45,28));
objj_msgSend(_blueValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_blueValue,"setEditable:",YES);
objj_msgSend(_blueValue,"setBezeled:",YES);
objj_msgSend(_blueValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_blueValue);
_hsbLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,120,190,20));
objj_msgSend(_hsbLabel,"setStringValue:","Hue, Saturation, Brightness");
objj_msgSend(_hsbLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hueLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,145,15,20));
objj_msgSend(_hueLabel,"setStringValue:","H");
objj_msgSend(_hueLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hueSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,143,aFrame.size.width-70,20));
objj_msgSend(_hueSlider,"setMaxValue:",359);
objj_msgSend(_hueSlider,"setMinValue:",0);
objj_msgSend(_hueSlider,"setTarget:",_7);
objj_msgSend(_hueSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_hueSlider,"setAutoresizingMask:",CPViewWidthSizable);
_hueValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,138,45,28));
objj_msgSend(_hueValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_hueValue,"setEditable:",YES);
objj_msgSend(_hueValue,"setBezeled:",YES);
objj_msgSend(_hueValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_hueValue);
_saturationLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,170,15,20));
objj_msgSend(_saturationLabel,"setStringValue:","S");
objj_msgSend(_saturationLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_saturationSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,168,aFrame.size.width-70,20));
objj_msgSend(_saturationSlider,"setMaxValue:",100);
objj_msgSend(_saturationSlider,"setMinValue:",0);
objj_msgSend(_saturationSlider,"setTarget:",_7);
objj_msgSend(_saturationSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_saturationSlider,"setAutoresizingMask:",CPViewWidthSizable);
_saturationValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,164,45,28));
objj_msgSend(_saturationValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_saturationValue,"setEditable:",YES);
objj_msgSend(_saturationValue,"setBezeled:",YES);
objj_msgSend(_saturationValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_saturationValue);
_brightnessLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,196,15,20));
objj_msgSend(_brightnessLabel,"setStringValue:","B");
objj_msgSend(_brightnessLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_brightnessSlider=objj_msgSend(objj_msgSend(CPSlider,"alloc"),"initWithFrame:",CGRectMake(15,194,aFrame.size.width-70,20));
objj_msgSend(_brightnessSlider,"setMaxValue:",100);
objj_msgSend(_brightnessSlider,"setMinValue:",0);
objj_msgSend(_brightnessSlider,"setTarget:",_7);
objj_msgSend(_brightnessSlider,"setAction:",sel_getUid("sliderChanged:"));
objj_msgSend(_brightnessSlider,"setAutoresizingMask:",CPViewWidthSizable);
_brightnessValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(aFrame.size.width-45,190,45,28));
objj_msgSend(_brightnessValue,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_brightnessValue,"setEditable:",YES);
objj_msgSend(_brightnessValue,"setBezeled:",YES);
objj_msgSend(_brightnessValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_brightnessValue);
_hexLabel=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,230,30,20));
objj_msgSend(_hexLabel,"setStringValue:","Hex");
objj_msgSend(_hexLabel,"setTextColor:",objj_msgSend(CPColor,"blackColor"));
_hexValue=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(32,225,80,28));
objj_msgSend(_hexValue,"setEditable:",YES);
objj_msgSend(_hexValue,"setBezeled:",YES);
objj_msgSend(_hexValue,"setDelegate:",_7);
objj_msgSend(_contentView,"addSubview:",_hexValue);
objj_msgSend(_contentView,"addSubview:",_rgbLabel);
objj_msgSend(_contentView,"addSubview:",_redLabel);
objj_msgSend(_contentView,"addSubview:",_greenLabel);
objj_msgSend(_contentView,"addSubview:",_blueLabel);
objj_msgSend(_contentView,"addSubview:",_redSlider);
objj_msgSend(_contentView,"addSubview:",_greenSlider);
objj_msgSend(_contentView,"addSubview:",_blueSlider);
objj_msgSend(_contentView,"addSubview:",_hsbLabel);
objj_msgSend(_contentView,"addSubview:",_hueLabel);
objj_msgSend(_contentView,"addSubview:",_saturationLabel);
objj_msgSend(_contentView,"addSubview:",_brightnessLabel);
objj_msgSend(_contentView,"addSubview:",_hueSlider);
objj_msgSend(_contentView,"addSubview:",_saturationSlider);
objj_msgSend(_contentView,"addSubview:",_brightnessSlider);
objj_msgSend(_contentView,"addSubview:",_hexLabel);
}
}),new objj_method(sel_getUid("provideNewView:"),function(_9,_a,_b){
with(_9){
if(_b){
objj_msgSend(_9,"initView");
}
return _contentView;
}
}),new objj_method(sel_getUid("currentMode"),function(_c,_d){
with(_c){
return CPSliderColorPickerMode;
}
}),new objj_method(sel_getUid("supportsMode:"),function(_e,_f,_10){
with(_e){
return (_10==CPSliderColorPickerMode)?YES:NO;
}
}),new objj_method(sel_getUid("sliderChanged:"),function(_11,_12,_13){
with(_11){
var _14,_15=objj_msgSend(_11,"colorPanel"),_16=objj_msgSend(_15,"opacity");
switch(_13){
case _hueSlider:
case _saturationSlider:
case _brightnessSlider:
_14=objj_msgSend(CPColor,"colorWithHue:saturation:brightness:alpha:",objj_msgSend(_hueSlider,"floatValue"),objj_msgSend(_saturationSlider,"floatValue"),objj_msgSend(_brightnessSlider,"floatValue"),_16);
objj_msgSend(_11,"updateRGBSliders:",_14);
break;
case _redSlider:
case _greenSlider:
case _blueSlider:
_14=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",objj_msgSend(_redSlider,"floatValue"),objj_msgSend(_greenSlider,"floatValue"),objj_msgSend(_blueSlider,"floatValue"),_16);
objj_msgSend(_11,"updateHSBSliders:",_14);
break;
}
objj_msgSend(_11,"updateLabels");
objj_msgSend(_11,"updateHex:",_14);
objj_msgSend(_15,"setColor:",_14);
}
}),new objj_method(sel_getUid("setColor:"),function(_17,_18,_19){
with(_17){
objj_msgSend(_17,"updateRGBSliders:",_19);
objj_msgSend(_17,"updateHSBSliders:",_19);
objj_msgSend(_17,"updateHex:",_19);
objj_msgSend(_17,"updateLabels");
}
}),new objj_method(sel_getUid("updateHSBSliders:"),function(_1a,_1b,_1c){
with(_1a){
var hsb=objj_msgSend(_1c,"hsbComponents");
objj_msgSend(_hueSlider,"setFloatValue:",hsb[0]);
objj_msgSend(_saturationSlider,"setFloatValue:",hsb[1]);
objj_msgSend(_brightnessSlider,"setFloatValue:",hsb[2]);
}
}),new objj_method(sel_getUid("updateHex:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSend(_hexValue,"setStringValue:",objj_msgSend(_1f,"hexString"));
}
}),new objj_method(sel_getUid("updateRGBSliders:"),function(_20,_21,_22){
with(_20){
var rgb=objj_msgSend(_22,"components");
objj_msgSend(_redSlider,"setFloatValue:",rgb[0]);
objj_msgSend(_greenSlider,"setFloatValue:",rgb[1]);
objj_msgSend(_blueSlider,"setFloatValue:",rgb[2]);
}
}),new objj_method(sel_getUid("updateLabels"),function(_23,_24){
with(_23){
objj_msgSend(_hueValue,"setStringValue:",ROUND(objj_msgSend(_hueSlider,"floatValue")));
objj_msgSend(_saturationValue,"setStringValue:",ROUND(objj_msgSend(_saturationSlider,"floatValue")));
objj_msgSend(_brightnessValue,"setStringValue:",ROUND(objj_msgSend(_brightnessSlider,"floatValue")));
objj_msgSend(_redValue,"setStringValue:",ROUND(objj_msgSend(_redSlider,"floatValue")*255));
objj_msgSend(_greenValue,"setStringValue:",ROUND(objj_msgSend(_greenSlider,"floatValue")*255));
objj_msgSend(_blueValue,"setStringValue:",ROUND(objj_msgSend(_blueSlider,"floatValue")*255));
}
}),new objj_method(sel_getUid("provideNewButtonImage"),function(_25,_26){
with(_25){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","slider_button.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("provideNewAlternateButtonImage"),function(_27,_28){
with(_27){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",CPColorPicker),"pathForResource:","slider_button_h.png"),CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("controlTextDidEndEditing:"),function(_29,_2a,_2b){
with(_29){
var _2c=objj_msgSend(_2b,"object"),_2d=objj_msgSend(objj_msgSend(_2c,"stringValue"),"stringByTrimmingWhitespace");
if(_2c===_hexValue){
var _2e=objj_msgSend(CPColor,"colorWithHexString:",_2d);
if(_2e){
objj_msgSend(_29,"setColor:",_2e);
objj_msgSend(objj_msgSend(_29,"colorPanel"),"setColor:",_2e);
}
}else{
switch(_2c){
case _redValue:
objj_msgSend(_redSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_redSlider);
break;
case _greenValue:
objj_msgSend(_greenSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_greenSlider);
break;
case _blueValue:
objj_msgSend(_blueSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),255)/255,0));
objj_msgSend(_29,"sliderChanged:",_blueSlider);
break;
case _hueValue:
objj_msgSend(_hueSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),360),0));
objj_msgSend(_29,"sliderChanged:",_hueSlider);
break;
case _saturationValue:
objj_msgSend(_saturationSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),100),0));
objj_msgSend(_29,"sliderChanged:",_saturationSlider);
break;
case _brightnessValue:
objj_msgSend(_brightnessSlider,"setFloatValue:",MAX(MIN(ROUND(_2d),100),0));
objj_msgSend(_29,"sliderChanged:",_brightnessSlider);
break;
}
}
}
})]);
p;9;CPSound.jt;4955;@STATIC;1.0;I;21;Foundation/CPObject.jt;4910;
objj_executeFile("Foundation/CPObject.j",NO);
CPSoundLoadStateEmpty=0;
CPSoundLoadStateLoading=1;
CPSoundLoadStateCanBePlayed=2;
CPSoundLoadStateError=3;
CPSoundPlayBackStatePlay=0;
CPSoundPlayBackStateStop=1;
CPSoundPlayBackStatePause=2;
var _1=objj_allocateClassPair(CPObject,"CPSound"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_name"),new objj_ivar("_delegate"),new objj_ivar("_playRequestBeforeLoad"),new objj_ivar("_audioTag"),new objj_ivar("_loadStatus"),new objj_ivar("_playBackStatus")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("name"),function(_3,_4){
with(_3){
return _name;
}
}),new objj_method(sel_getUid("setName:"),function(_5,_6,_7){
with(_5){
_name=_7;
}
}),new objj_method(sel_getUid("delegate"),function(_8,_9){
with(_8){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_a,_b,_c){
with(_a){
_delegate=_c;
}
}),new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
if(_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPSound").super_class},"init")){
_loadStatus=CPSoundLoadStateEmpty;
_loops=NO;
_audioTag=document.createElement("audio");
_audioTag.preload=YES;
_playRequestBeforeLoad=NO;
_audioTag.addEventListener("canplay",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundDidload");
},true);
_audioTag.addEventListener("ended",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundDidEnd");
},true);
_audioTag.addEventListener("error",function(){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_d,"_soundError");
},true);
}
return _d;
}
}),new objj_method(sel_getUid("initWithContentsOfFile:byReference:"),function(_f,_10,_11,_12){
with(_f){
if(_f=objj_msgSend(_f,"init")){
_loadStatus=CPSoundLoadStateLoading;
_audioTag.src=_11;
}
return _f;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:byReference:"),function(_13,_14,_15,_16){
with(_13){
return objj_msgSend(_13,"initWithContentsOfFile:byReference:",objj_msgSend(_15,"absoluteString"),NO);
}
}),new objj_method(sel_getUid("initWithData:"),function(_17,_18,_19){
with(_17){
if(_17=objj_msgSend(_17,"init")){
_loadStatus=CPSoundLoadStateLoading;
_audioTag.src=objj_msgSend(_19,"rawString");
}
return _17;
}
}),new objj_method(sel_getUid("_soundDidload"),function(_1a,_1b){
with(_1a){
_loadStatus=CPSoundLoadStateCanBePlayed;
if(_playRequestBeforeLoad){
_playRequestBeforeLoad=NO;
objj_msgSend(_1a,"play");
}
}
}),new objj_method(sel_getUid("_soundDidEnd"),function(_1c,_1d){
with(_1c){
if(!objj_msgSend(_1c,"loops")){
objj_msgSend(_1c,"stop");
}
}
}),new objj_method(sel_getUid("_soundError"),function(_1e,_1f){
with(_1e){
_loadStatus=CPSoundLoadStateError;
CPLog.error("Cannot load sound. Maybe the format of your sound is not compatible with your browser.");
}
}),new objj_method(sel_getUid("play"),function(_20,_21){
with(_20){
if(_loadStatus===CPSoundLoadStateLoading){
_playRequestBeforeLoad=YES;
return YES;
}
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStatePlay)){
return NO;
}
_audioTag.play();
_playBackStatus=CPSoundPlayBackStatePlay;
return YES;
}
}),new objj_method(sel_getUid("stop"),function(_22,_23){
with(_22){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStateStop)){
return NO;
}
_audioTag.pause();
_audioTag.currentTime=0;
_playBackStatus=CPSoundPlayBackStateStop;
if(_delegate&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("sound:didFinishPlaying:"))){
objj_msgSend(_delegate,"sound:didFinishPlaying:",_22,YES);
}
return YES;
}
}),new objj_method(sel_getUid("pause"),function(_24,_25){
with(_24){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus===CPSoundPlayBackStatePause)){
return NO;
}
_audioTag.pause();
_playBackStatus=CPSoundPlayBackStatePause;
return YES;
}
}),new objj_method(sel_getUid("resume"),function(_26,_27){
with(_26){
if((_loadStatus!==CPSoundLoadStateCanBePlayed)||(_playBackStatus!==CPSoundPlayBackStatePause)){
return NO;
}
_audioTag.play();
_playBackStatus=CPSoundPlayBackStatePlay;
return YES;
}
}),new objj_method(sel_getUid("loops"),function(_28,_29){
with(_28){
return _audioTag.loop;
}
}),new objj_method(sel_getUid("setLoops:"),function(_2a,_2b,_2c){
with(_2a){
_audioTag.loop=_2c;
}
}),new objj_method(sel_getUid("volume"),function(_2d,_2e){
with(_2d){
return _audioTag.volume;
}
}),new objj_method(sel_getUid("setVolume:"),function(_2f,_30,_31){
with(_2f){
if(_31>1){
_31=1;
}else{
if(_31<0){
_31=0;
}
}
_audioTag.volume=_31;
}
}),new objj_method(sel_getUid("duration"),function(_32,_33){
with(_32){
return _audioTag.duration;
}
}),new objj_method(sel_getUid("isPlaying"),function(_34,_35){
with(_34){
return (_playBackStatus===CPSoundPlayBackStatePlay);
}
})]);
p;13;CPSplitView.jt;27400;@STATIC;1.0;i;13;CPButtonBar.ji;9;CPImage.ji;8;CPView.jt;27337;
objj_executeFile("CPButtonBar.j",YES);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
CPSplitViewDidResizeSubviewsNotification="CPSplitViewDidResizeSubviewsNotification";
CPSplitViewWillResizeSubviewsNotification="CPSplitViewWillResizeSubviewsNotification";
var _1=nil,_2=nil,_3=1,_4=1<<1,_5=1<<2;
var _6=objj_allocateClassPair(CPView,"CPSplitView"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_delegate"),new objj_ivar("_isVertical"),new objj_ivar("_isPaneSplitter"),new objj_ivar("_currentDivider"),new objj_ivar("_initialOffset"),new objj_ivar("_preCollapsePositions"),new objj_ivar("_originComponent"),new objj_ivar("_sizeComponent"),new objj_ivar("_DOMDividerElements"),new objj_ivar("_dividerImagePath"),new objj_ivar("_drawingDivider"),new objj_ivar("_autosaveName"),new objj_ivar("_shouldAutosave"),new objj_ivar("_needsRestoreFromAutosave"),new objj_ivar("_needsResizeSubviews"),new objj_ivar("_suppressResizeNotificationsMask"),new objj_ivar("_buttonBars")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("initWithFrame:"),function(_8,_9,_a){
with(_8){
if(_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("CPSplitView").super_class},"initWithFrame:",_a)){
_suppressResizeNotificationsMask=0;
_preCollapsePositions=objj_msgSend(CPMutableDictionary,"new");
_currentDivider=CPNotFound;
_DOMDividerElements=[];
_buttonBars=[];
_shouldAutosave=YES;
objj_msgSend(_8,"_setVertical:",YES);
}
return _8;
}
}),new objj_method(sel_getUid("dividerThickness"),function(_b,_c){
with(_b){
return objj_msgSend(_b,"currentValueForThemeAttribute:",objj_msgSend(_b,"isPaneSplitter")?"pane-divider-thickness":"divider-thickness");
}
}),new objj_method(sel_getUid("isVertical"),function(_d,_e){
with(_d){
return _isVertical;
}
}),new objj_method(sel_getUid("setVertical:"),function(_f,_10,_11){
with(_f){
if(!objj_msgSend(_f,"_setVertical:",_11)){
return;
}
var _12=objj_msgSend(_f,"frame"),_13=objj_msgSend(_f,"dividerThickness");
objj_msgSend(_f,"_postNotificationWillResize");
var _14=ROUND((_12.size[_sizeComponent]-_13*(_subviews.length-1))/_subviews.length),_15=0,_16=_subviews.length;
if(objj_msgSend(_f,"isVertical")){
for(;_15<_16;++_15){
objj_msgSend(_subviews[_15],"setFrame:",CGRectMake(ROUND((_14+_13)*_15),0,_14,_12.size.height));
}
}else{
for(;_15<_16;++_15){
objj_msgSend(_subviews[_15],"setFrame:",CGRectMake(0,ROUND((_14+_13)*_15),_12.size.width,_14));
}
}
objj_msgSend(_f,"setNeedsDisplay:",YES);
objj_msgSend(_f,"_postNotificationDidResize");
}
}),new objj_method(sel_getUid("_setVertical:"),function(_17,_18,_19){
with(_17){
var _1a=(_isVertical!=_19);
_isVertical=_19;
_originComponent=objj_msgSend(_17,"isVertical")?"x":"y";
_sizeComponent=objj_msgSend(_17,"isVertical")?"width":"height";
_dividerImagePath=objj_msgSend(_17,"isVertical")?objj_msgSend(_2,"filename"):objj_msgSend(_1,"filename");
return _1a;
}
}),new objj_method(sel_getUid("isPaneSplitter"),function(_1b,_1c){
with(_1b){
return _isPaneSplitter;
}
}),new objj_method(sel_getUid("setIsPaneSplitter:"),function(_1d,_1e,_1f){
with(_1d){
if(_isPaneSplitter==_1f){
return;
}
_isPaneSplitter=_1f;
if(_DOMDividerElements[_drawingDivider]){
objj_msgSend(_1d,"_setupDOMDivider");
}
_needsResizeSubviews=YES;
objj_msgSend(_1d,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_20,_21,_22){
with(_20){
_needsResizeSubviews=YES;
}
}),new objj_method(sel_getUid("isSubviewCollapsed:"),function(_23,_24,_25){
with(_23){
return objj_msgSend(_25,"frame").size[_sizeComponent]<1?YES:NO;
}
}),new objj_method(sel_getUid("rectOfDividerAtIndex:"),function(_26,_27,_28){
with(_26){
var _29=objj_msgSend(_subviews[_28],"frame"),_2a=CGRectMakeZero();
_2a.size=objj_msgSend(_26,"frame").size;
_2a.size[_sizeComponent]=objj_msgSend(_26,"dividerThickness");
_2a.origin[_originComponent]=_29.origin[_originComponent]+_29.size[_sizeComponent];
return _2a;
}
}),new objj_method(sel_getUid("effectiveRectOfDividerAtIndex:"),function(_2b,_2c,_2d){
with(_2b){
var _2e=objj_msgSend(_2b,"rectOfDividerAtIndex:",_2d),_2f=2;
_2e.size[_sizeComponent]+=_2f*2;
_2e.origin[_originComponent]-=_2f;
return _2e;
}
}),new objj_method(sel_getUid("drawRect:"),function(_30,_31,_32){
with(_30){
var _33=objj_msgSend(_subviews,"count")-1;
while((_33--)>0){
_drawingDivider=_33;
objj_msgSend(_30,"drawDividerInRect:",objj_msgSend(_30,"rectOfDividerAtIndex:",_33));
}
}
}),new objj_method(sel_getUid("willRemoveSubview:"),function(_34,_35,_36){
with(_34){
var _37=_DOMDividerElements.pop();
if(_37){
_DOMElement.removeChild(_37);
}
_needsResizeSubviews=YES;
objj_msgSend(_34,"setNeedsLayout");
objj_msgSend(_34,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_38,_39){
with(_38){
objj_msgSend(_38,"_adjustSubviewsWithCalculatedSize");
}
}),new objj_method(sel_getUid("drawDividerInRect:"),function(_3a,_3b,_3c){
with(_3a){
if(!_DOMDividerElements[_drawingDivider]){
_DOMDividerElements[_drawingDivider]=document.createElement("div");
_DOMDividerElements[_drawingDivider].style.position="absolute";
_DOMDividerElements[_drawingDivider].style.backgroundRepeat="repeat";
_DOMElement.appendChild(_DOMDividerElements[_drawingDivider]);
}
objj_msgSend(_3a,"_setupDOMDivider");
if(NULL){
var _3d={x:CGPointMake((_3c.origin.x),(_3c.origin.y)).x*NULL.a+CGPointMake((_3c.origin.x),(_3c.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_3c.origin.x),(_3c.origin.y)).x*NULL.b+CGPointMake((_3c.origin.x),(_3c.origin.y)).y*NULL.d+NULL.ty};
}else{
var _3d={x:(_3c.origin.x),y:(_3c.origin.y)};
}
_DOMDividerElements[_drawingDivider].style.left=ROUND(_3d.x)+"px";
_DOMDividerElements[_drawingDivider].style.top=ROUND(_3d.y)+"px";
_DOMDividerElements[_drawingDivider].style.width=MAX(0,ROUND((_3c.size.width)))+"px";
_DOMDividerElements[_drawingDivider].style.height=MAX(0,ROUND((_3c.size.height)))+"px";
}
}),new objj_method(sel_getUid("_setupDOMDivider"),function(_3e,_3f){
with(_3e){
if(_isPaneSplitter){
_DOMDividerElements[_drawingDivider].style.backgroundColor="";
_DOMDividerElements[_drawingDivider].style.backgroundImage="url('"+_dividerImagePath+"')";
}else{
_DOMDividerElements[_drawingDivider].style.backgroundColor=objj_msgSend(objj_msgSend(_3e,"currentValueForThemeAttribute:","pane-divider-color"),"cssString");
_DOMDividerElements[_drawingDivider].style.backgroundImage="";
}
}
}),new objj_method(sel_getUid("viewWillDraw"),function(_40,_41){
with(_40){
objj_msgSend(_40,"_adjustSubviewsWithCalculatedSize");
}
}),new objj_method(sel_getUid("_adjustSubviewsWithCalculatedSize"),function(_42,_43){
with(_42){
if(!_needsResizeSubviews){
return;
}
_needsResizeSubviews=NO;
objj_msgSend(_42,"resizeSubviewsWithOldSize:",objj_msgSend(_42,"_calculateSize"));
}
}),new objj_method(sel_getUid("_calculateSize"),function(_44,_45){
with(_44){
var _46=objj_msgSend(_44,"subviews"),_47=_46.length,_48=CGSizeMakeZero();
if(objj_msgSend(_44,"isVertical")){
_48.width+=objj_msgSend(_44,"dividerThickness")*(_47-1);
_48.height=CGRectGetHeight(objj_msgSend(_44,"frame"));
}else{
_48.width=CGRectGetWidth(objj_msgSend(_44,"frame"));
_48.height+=objj_msgSend(_44,"dividerThickness")*(_47-1);
}
while(_47--){
_48[_sizeComponent]+=objj_msgSend(_46[_47],"frame").size[_sizeComponent];
}
return _48;
}
}),new objj_method(sel_getUid("cursorAtPoint:hitDividerAtIndex:"),function(_49,_4a,_4b,_4c){
with(_49){
var _4d=objj_msgSend(_subviews[_4c],"frame"),_4e=_4d.origin[_originComponent]+_4d.size[_sizeComponent],_4f=objj_msgSend(_49,"effectiveRectOfDividerAtIndex:",_4c),_50=_buttonBars[_4c],_51=null,_52=null;
if(_50!=null){
_51=objj_msgSend(_50,"resizeControlFrame");
_51.origin=objj_msgSend(_49,"convertPoint:fromView:",_51.origin,_50);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:"))){
_4f=objj_msgSend(_delegate,"splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:",_49,_4f,_4f,_4c);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:additionalEffectiveRectOfDividerAtIndex:"))){
_52=objj_msgSend(_delegate,"splitView:additionalEffectiveRectOfDividerAtIndex:",_49,_4c);
}
return CGRectContainsPoint(_4f,_4b)||(_52&&CGRectContainsPoint(_52,_4b))||(_51&&CGRectContainsPoint(_51,_4b));
}
}),new objj_method(sel_getUid("hitTest:"),function(_53,_54,_55){
with(_53){
if(objj_msgSend(_53,"isHidden")||!objj_msgSend(_53,"hitTests")||!CGRectContainsPoint(objj_msgSend(_53,"frame"),_55)){
return nil;
}
var _56=objj_msgSend(_53,"convertPoint:fromView:",_55,objj_msgSend(_53,"superview")),_57=objj_msgSend(_subviews,"count")-1;
for(var i=0;i<_57;i++){
if(objj_msgSend(_53,"cursorAtPoint:hitDividerAtIndex:",_56,i)){
return _53;
}
}
return objj_msgSendSuper({receiver:_53,super_class:objj_getClass("CPSplitView").super_class},"hitTest:",_55);
}
}),new objj_method(sel_getUid("trackDivider:"),function(_58,_59,_5a){
with(_58){
var _5b=objj_msgSend(_5a,"type");
if(_5b==CPLeftMouseUp){
if(_currentDivider!=CPNotFound){
_currentDivider=CPNotFound;
objj_msgSend(_58,"_updateResizeCursor:",_5a);
}
return;
}
if(_5b==CPLeftMouseDown){
var _5c=objj_msgSend(_58,"convertPoint:fromView:",objj_msgSend(_5a,"locationInWindow"),nil),_5d=objj_msgSend(_subviews,"count")-1;
_currentDivider=CPNotFound;
for(var i=0;i<_5d;i++){
var _5e=objj_msgSend(_subviews[i],"frame"),_5f=_5e.origin[_originComponent]+_5e.size[_sizeComponent];
if(objj_msgSend(_58,"cursorAtPoint:hitDividerAtIndex:",_5c,i)){
if(objj_msgSend(_5a,"clickCount")==2&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:"))){
var _60=objj_msgSend(_58,"minPossiblePositionOfDividerAtIndex:",i),_61=objj_msgSend(_58,"maxPossiblePositionOfDividerAtIndex:",i),_62=objj_msgSend(_preCollapsePositions,"objectForKey:",""+i)||0;
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_58,_subviews[i])&&objj_msgSend(_delegate,"splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:",_58,_subviews[i],i)){
if(objj_msgSend(_58,"isSubviewCollapsed:",_subviews[i])){
objj_msgSend(_58,"setPosition:ofDividerAtIndex:",_62?_62:(_60+(_61-_60)/2),i);
}else{
objj_msgSend(_58,"setPosition:ofDividerAtIndex:",_60,i);
}
}else{
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_58,_subviews[i+1])&&objj_msgSend(_delegate,"splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:",_58,_subviews[i+1],i)){
if(objj_msgSend(_58,"isSubviewCollapsed:",_subviews[i+1])){
objj_msgSend(_58,"setPosition:ofDividerAtIndex:",_62?_62:(_60+(_61-_60)/2),i);
}else{
objj_msgSend(_58,"setPosition:ofDividerAtIndex:",_61,i);
}
}
}
}else{
_currentDivider=i;
_initialOffset=_5f-_5c[_originComponent];
objj_msgSend(_58,"_postNotificationWillResize");
}
}
}
if(_currentDivider===CPNotFound){
return;
}
}else{
if(_5b==CPLeftMouseDragged&&_currentDivider!=CPNotFound){
var _5c=objj_msgSend(_58,"convertPoint:fromView:",objj_msgSend(_5a,"locationInWindow"),nil);
objj_msgSend(_58,"setPosition:ofDividerAtIndex:",(_5c[_originComponent]+_initialOffset),_currentDivider);
objj_msgSend(_58,"_updateResizeCursor:",_5a);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_58,sel_getUid("trackDivider:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_63,_64,_65){
with(_63){
objj_msgSend(_63,"trackDivider:",_65);
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_66,_67){
with(_66){
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_68,_69,_6a){
with(_68){
if(_currentDivider==CPNotFound){
objj_msgSend(_68,"_updateResizeCursor:",_6a);
}
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_6b,_6c,_6d){
with(_6b){
if(_currentDivider==CPNotFound){
objj_msgSend(_6b,"_updateResizeCursor:",_6d);
}
}
}),new objj_method(sel_getUid("mouseExited:"),function(_6e,_6f,_70){
with(_6e){
if(_currentDivider==CPNotFound){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}
}),new objj_method(sel_getUid("_updateResizeCursor:"),function(_71,_72,_73){
with(_71){
var _74=objj_msgSend(_71,"convertPoint:fromView:",objj_msgSend(_73,"locationInWindow"),nil);
if(objj_msgSend(_73,"type")===CPLeftMouseUp&&!objj_msgSend(objj_msgSend(_71,"window"),"acceptsMouseMovedEvents")){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
return;
}
for(var i=0,_75=objj_msgSend(_subviews,"count")-1;i<_75;i++){
if(_currentDivider===i||(_currentDivider==CPNotFound&&objj_msgSend(_71,"cursorAtPoint:hitDividerAtIndex:",_74,i))){
var _76=objj_msgSend(_subviews[i],"frame"),_77=_76.size[_sizeComponent],_78=_76.origin[_originComponent]+_77,_79=objj_msgSend(_subviews[i+1],"frame"),_7a=_79.size[_sizeComponent],_7b=objj_msgSend(_71,"_realPositionForPosition:ofDividerAtIndex:",_78-1,i)<_78,_7c=objj_msgSend(_71,"_realPositionForPosition:ofDividerAtIndex:",_78+1,i)>_78,_7d=objj_msgSend(CPCursor,"arrowCursor");
if(_77===0){
_7c=YES;
}else{
if(!_7b&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))&&objj_msgSend(_delegate,"splitView:canCollapseSubview:",_71,_subviews[i])){
_7b=YES;
}
}
if(_7a===0){
_7c=NO;
_7b=YES;
}else{
if(!_7c&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))&&objj_msgSend(_delegate,"splitView:canCollapseSubview:",_71,_subviews[i+1])){
_7c=YES;
}
}
if(_isVertical&&_7b&&_7c){
_7d=objj_msgSend(CPCursor,"resizeLeftRightCursor");
}else{
if(_isVertical&&_7b){
_7d=objj_msgSend(CPCursor,"resizeLeftCursor");
}else{
if(_isVertical&&_7c){
_7d=objj_msgSend(CPCursor,"resizeRightCursor");
}else{
if(_7b&&_7c){
_7d=objj_msgSend(CPCursor,"resizeUpDownCursor");
}else{
if(_7b){
_7d=objj_msgSend(CPCursor,"resizeUpCursor");
}else{
if(_7c){
_7d=objj_msgSend(CPCursor,"resizeDownCursor");
}
}
}
}
}
}
objj_msgSend(_7d,"set");
return;
}
}
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}),new objj_method(sel_getUid("maxPossiblePositionOfDividerAtIndex:"),function(_7e,_7f,_80){
with(_7e){
var _81=objj_msgSend(_subviews[_80+1],"frame");
if(_80+1<objj_msgSend(_subviews,"count")-1){
return _81.origin[_originComponent]+_81.size[_sizeComponent]-objj_msgSend(_7e,"dividerThickness");
}else{
return objj_msgSend(_7e,"frame").size[_sizeComponent]-objj_msgSend(_7e,"dividerThickness");
}
}
}),new objj_method(sel_getUid("minPossiblePositionOfDividerAtIndex:"),function(_82,_83,_84){
with(_82){
if(_84>0){
var _85=objj_msgSend(_subviews[_84-1],"frame");
return _85.origin[_originComponent]+_85.size[_sizeComponent]+objj_msgSend(_82,"dividerThickness");
}else{
return 0;
}
}
}),new objj_method(sel_getUid("_realPositionForPosition:ofDividerAtIndex:"),function(_86,_87,_88,_89){
with(_86){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainSplitPosition:ofSubviewAt:"))){
var _8a=objj_msgSend(_delegate,"splitView:constrainSplitPosition:ofSubviewAt:",_86,_88,_89);
if((!isNaN(parseFloat(_8a))&&isFinite(_8a))){
_88=_8a;
}
}
var _8b=objj_msgSend(_86,"maxPossiblePositionOfDividerAtIndex:",_89),_8c=objj_msgSend(_86,"minPossiblePositionOfDividerAtIndex:",_89),_8d=_8b,_8e=_8c;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainMinCoordinate:ofSubviewAt:"))){
var _8f=objj_msgSend(_delegate,"splitView:constrainMinCoordinate:ofSubviewAt:",_86,_8c,_89);
if((!isNaN(parseFloat(_8f))&&isFinite(_8f))){
_8e=_8f;
}
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:constrainMaxCoordinate:ofSubviewAt:"))){
var _90=objj_msgSend(_delegate,"splitView:constrainMaxCoordinate:ofSubviewAt:",_86,_8b,_89);
if((!isNaN(parseFloat(_90))&&isFinite(_90))){
_8d=_90;
}
}
var _91=_subviews[_89],_92=_subviews[_89+1],_93=MAX(MIN(_88,_8d),_8e);
if(_88<_8c+(_8e-_8c)/2){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))){
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_86,_91)){
_93=_8c;
}
}
}
if(_88>_8b-(_8b-_8d)/2){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:canCollapseSubview:"))){
if(objj_msgSend(_delegate,"splitView:canCollapseSubview:",_86,_92)){
_93=_8b;
}
}
}
return _93;
}
}),new objj_method(sel_getUid("setPosition:ofDividerAtIndex:"),function(_94,_95,_96,_97){
with(_94){
if(YES){
_suppressResizeNotificationsMask|=_3;
}else{
_suppressResizeNotificationsMask=0;
}
objj_msgSend(_94,"_adjustSubviewsWithCalculatedSize");
var _98=objj_msgSend(_94,"_realPositionForPosition:ofDividerAtIndex:",_96,_97),_99=_subviews[_97],_9a=objj_msgSend(_99,"frame"),_9b=_subviews[_97+1],_9c=objj_msgSend(_9b,"frame"),_9d=0,_9e=_9a.size[_sizeComponent];
_9a.size[_sizeComponent]=_98-_9a.origin[_originComponent];
if(_9e!==0&&_9a.size[_sizeComponent]===0){
_9d=_9e;
}
if(_9e!==_9a.size[_sizeComponent]){
if((_suppressResizeNotificationsMask&_4)===0){
objj_msgSend(_94,"_postNotificationWillResize");
_suppressResizeNotificationsMask|=_4;
}
objj_msgSend(_subviews[_97],"setFrame:",_9a);
if((_suppressResizeNotificationsMask&_3)!==0){
_suppressResizeNotificationsMask|=_5;
}else{
objj_msgSend(_94,"_postNotificationDidResize");
}
}
_9e=_9c.size[_sizeComponent];
var _9f=_9c.origin[_originComponent];
_9c.size[_sizeComponent]=_9c.origin[_originComponent]+_9c.size[_sizeComponent]-_98-objj_msgSend(_94,"dividerThickness");
if(_9e!==0&&_9c.size[_sizeComponent]===0){
_9d=_9c.origin[_originComponent];
}
_9c.origin[_originComponent]=_98+objj_msgSend(_94,"dividerThickness");
if(_9e!==_9c.size[_sizeComponent]||_9f!==_9c.origin[_originComponent]){
if((_suppressResizeNotificationsMask&_4)===0){
objj_msgSend(_94,"_postNotificationWillResize");
_suppressResizeNotificationsMask|=_4;
}
objj_msgSend(_subviews[_97+1],"setFrame:",_9c);
if((_suppressResizeNotificationsMask&_3)!==0){
_suppressResizeNotificationsMask|=_5;
}else{
objj_msgSend(_94,"_postNotificationDidResize");
}
}
if(_9d){
objj_msgSend(_preCollapsePositions,"setObject:forKey:",_9d,""+_97);
}
objj_msgSend(_94,"setNeedsDisplay:",YES);
if(((_suppressResizeNotificationsMask&_5)!==0)){
objj_msgSend(_94,"_postNotificationDidResize");
}
if(NO){
_suppressResizeNotificationsMask|=_3;
}else{
_suppressResizeNotificationsMask=0;
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_a0,_a1,_a2){
with(_a0){
if(_needsRestoreFromAutosave){
_shouldAutosave=NO;
}else{
objj_msgSend(_a0,"_adjustSubviewsWithCalculatedSize");
}
objj_msgSendSuper({receiver:_a0,super_class:objj_getClass("CPSplitView").super_class},"setFrameSize:",_a2);
if(_needsRestoreFromAutosave){
_needsRestoreFromAutosave=NO;
objj_msgSend(_a0,"_restoreFromAutosave");
_shouldAutosave=YES;
}
objj_msgSend(_a0,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_a3,_a4,_a5){
with(_a3){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:resizeSubviewsWithOldSize:"))){
objj_msgSend(_delegate,"splitView:resizeSubviewsWithOldSize:",_a3,_a5);
return;
}
objj_msgSend(_a3,"adjustSubviews");
}
}),new objj_method(sel_getUid("adjustSubviews"),function(_a6,_a7){
with(_a6){
var _a8=objj_msgSend(_subviews,"count");
if(!_a8){
return;
}
if((_suppressResizeNotificationsMask&_4)===0){
objj_msgSend(_a6,"_postNotificationWillResize");
_suppressResizeNotificationsMask|=_4;
}
objj_msgSend(_a6,"_postNotificationWillResize");
var _a9=0,_aa=objj_msgSend(_a6,"bounds"),_ab=_aa.size[_sizeComponent],_ac=objj_msgSend(_a6,"_calculateSize"),_ad=objj_msgSend(_a6,"dividerThickness"),_ae=_a8-1,_af=0,_b0=0,_b1={},_b2=[],_b3=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitView:shouldAdjustSizeOfSubview:"));
for(_a9=0;_a9<_a8;++_a9){
var _b4=_subviews[_a9],_b5=!_b3||objj_msgSend(_delegate,"splitView:shouldAdjustSizeOfSubview:",_a6,_b4),_b6=objj_msgSend(_b4,"frame").size[_sizeComponent];
_b1[_a9]=_b5;
_b2.push(_b6);
if(_b5){
_af+=_b6;
_b0++;
}
}
var _b7=_ac[_sizeComponent]-_af,_b8=_ab-_b7,_b9=0;
if(_b8<0){
_b9=-_b8;
_b8=0;
}
var _ba=_a8-_b0;
for(_a9=0;_a9<_a8;++_a9){
var _b4=_subviews[_a9],_bb=CGRectMakeCopy(_aa),_b5=_b1[_a9],_bc=0;
if(_a9+1===_a8){
_bc=_ab-_bb.origin[_originComponent];
}else{
if(!_b5){
var _bd=MIN(_b9/_ba,_b2[_a9]);
_bc=_b2[_a9]-_bd;
_b9-=_bd;
_ba--;
}else{
if(_af>0){
_bc=_b8*_b2[_a9]/_af;
}else{
_bc=_b8/_b0;
}
}
}
_bc=MAX(0,ROUND(_bc));
_bb.size[_sizeComponent]=_bc;
objj_msgSend(_b4,"setFrame:",_bb);
_aa.origin[_originComponent]+=_bc+_ad;
}
if((_suppressResizeNotificationsMask&_3)!==0){
_suppressResizeNotificationsMask|=_5;
}else{
objj_msgSend(_a6,"_postNotificationDidResize");
}
}
}),new objj_method(sel_getUid("setDelegate:"),function(_be,_bf,_c0){
with(_be){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewDidResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_delegate,CPSplitViewDidResizeSubviewsNotification,_be);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewWillResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:name:object:",_delegate,CPSplitViewWillResizeSubviewsNotification,_be);
}
_delegate=_c0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewDidResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_delegate,sel_getUid("splitViewDidResizeSubviews:"),CPSplitViewDidResizeSubviewsNotification,_be);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("splitViewWillResizeSubviews:"))){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_delegate,sel_getUid("splitViewWillResizeSubviews:"),CPSplitViewWillResizeSubviewsNotification,_be);
}
}
}),new objj_method(sel_getUid("setButtonBar:forDividerAtIndex:"),function(_c1,_c2,_c3,_c4){
with(_c1){
if(!_c3){
_buttonBars[_c4]=nil;
return;
}
var _c5=objj_msgSend(_c3,"superview"),_c6=_c3;
while(_c5&&_c5!==_c1){
_c6=_c5;
_c5=objj_msgSend(_c5,"superview");
}
if(_c5!==_c1){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"CPSplitView button bar must be a subview of the split view.");
}
var _c7=objj_msgSend(objj_msgSend(_c1,"subviews"),"indexOfObject:",_c6);
objj_msgSend(_c3,"setHasResizeControl:",YES);
objj_msgSend(_c3,"setResizeControlIsLeftAligned:",_c4<_c7);
_buttonBars[_c4]=_c3;
}
}),new objj_method(sel_getUid("_postNotificationWillResize"),function(_c8,_c9){
with(_c8){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPSplitViewWillResizeSubviewsNotification,_c8);
}
}),new objj_method(sel_getUid("_postNotificationDidResize"),function(_ca,_cb){
with(_ca){
objj_msgSend(_ca,"_autosave");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPSplitViewDidResizeSubviewsNotification,_ca);
}
}),new objj_method(sel_getUid("setAutosaveName:"),function(_cc,_cd,_ce){
with(_cc){
if(_autosaveName==_ce){
return;
}
_autosaveName=_ce;
}
}),new objj_method(sel_getUid("autosaveName"),function(_cf,_d0){
with(_cf){
return _autosaveName;
}
}),new objj_method(sel_getUid("_autosave"),function(_d1,_d2){
with(_d1){
if(!_shouldAutosave||!_autosaveName){
return;
}
var _d3=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_d4=objj_msgSend(_d1,"_framesKeyForAutosaveName:",objj_msgSend(_d1,"autosaveName")),_d5=objj_msgSend(_d1,"_precollapseKeyForAutosaveName:",objj_msgSend(_d1,"autosaveName")),_d6=objj_msgSend(_subviews,"count"),_d7=objj_msgSend(CPMutableArray,"new"),_d8=objj_msgSend(CPMutableArray,"new");
for(var i=0;i<_d6;i++){
var _d9=objj_msgSend(_subviews[i],"frame");
objj_msgSend(_d7,"addObject:",CPStringFromRect(_d9));
objj_msgSend(_d8,"addObject:",objj_msgSend(_preCollapsePositions,"objectForKey:",""+i));
}
objj_msgSend(_d3,"setObject:forKey:",_d7,_d4);
objj_msgSend(_d3,"setObject:forKey:",_d8,_d5);
}
}),new objj_method(sel_getUid("_restoreFromAutosave"),function(_da,_db){
with(_da){
if(!_autosaveName){
return;
}
var _dc=objj_msgSend(_da,"_framesKeyForAutosaveName:",objj_msgSend(_da,"autosaveName")),_dd=objj_msgSend(_da,"_precollapseKeyForAutosaveName:",objj_msgSend(_da,"autosaveName")),_de=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_df=objj_msgSend(_de,"objectForKey:",_dc),_e0=objj_msgSend(_de,"objectForKey:",_dd);
if(_df){
var _e1=objj_msgSend(_da,"dividerThickness"),_e2=0;
_shouldAutosave=NO;
for(var i=0,_e3=objj_msgSend(_df,"count")-1;i<_e3;i++){
var _e4=CPRectFromString(_df[i]);
_e2+=_e4.size[_sizeComponent];
objj_msgSend(_da,"setPosition:ofDividerAtIndex:",_e2,i);
_e2+=_e1;
}
_shouldAutosave=YES;
}
if(_e0){
_preCollapsePositions=objj_msgSend(CPMutableDictionary,"new");
for(var i=0,_e3=objj_msgSend(_e0,"count");i<_e3;i++){
objj_msgSend(_preCollapsePositions,"setObject:forKey:",_e0[i],i+"");
}
}
}
}),new objj_method(sel_getUid("_framesKeyForAutosaveName:"),function(_e5,_e6,_e7){
with(_e5){
if(!_e7){
return nil;
}
return "CPSplitView Subview Frames "+_e7;
}
}),new objj_method(sel_getUid("_precollapseKeyForAutosaveName:"),function(_e8,_e9,_ea){
with(_e8){
if(!_ea){
return nil;
}
return "CPSplitView Subview Precollapse Positions "+_ea;
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("defaultThemeClass"),function(_eb,_ec){
with(_eb){
return "splitview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_ed,_ee){
with(_ed){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[1,10,objj_msgSend(CPColor,"grayColor")],["divider-thickness","pane-divider-thickness","pane-divider-color"]);
}
}),new objj_method(sel_getUid("initialize"),function(_ef,_f0){
with(_ef){
if(_ef!=objj_msgSend(CPSplitView,"class")){
return;
}
var _f1=objj_msgSend(CPBundle,"bundleForClass:",_ef);
_1=CPImageInBundle("CPSplitView/CPSplitViewHorizontal.png",CGSizeMake(5,10),_f1);
_2=CPImageInBundle("CPSplitView/CPSplitViewVertical.png",CGSizeMake(10,5),_f1);
}
})]);
var _f2="CPSplitViewDelegateKey",_f3="CPSplitViewIsVerticalKey",_f4="CPSplitViewIsPaneSplitterKey",_f5="CPSplitViewButtonBarsKey",_f6="CPSplitViewAutosaveNameKey";
var _6=objj_getClass("CPSplitView");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPSplitView\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("initWithCoder:"),function(_f7,_f8,_f9){
with(_f7){
_f7=objj_msgSendSuper({receiver:_f7,super_class:objj_getClass("CPSplitView").super_class},"initWithCoder:",_f9);
if(_f7){
_suppressResizeNotificationsMask=0;
_preCollapsePositions=objj_msgSend(CPMutableDictionary,"new");
_currentDivider=CPNotFound;
_shouldAutosave=YES;
_DOMDividerElements=[];
_buttonBars=objj_msgSend(_f9,"decodeObjectForKey:",_f5)||[];
objj_msgSend(_f7,"setDelegate:",objj_msgSend(_f9,"decodeObjectForKey:",_f2));
_isPaneSplitter=objj_msgSend(_f9,"decodeBoolForKey:",_f4);
objj_msgSend(_f7,"_setVertical:",objj_msgSend(_f9,"decodeBoolForKey:",_f3));
objj_msgSend(_f7,"setAutosaveName:",objj_msgSend(_f9,"decodeObjectForKey:",_f6));
if(_autosaveName){
_needsRestoreFromAutosave=YES;
}
}
return _f7;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_fa,_fb,_fc){
with(_fa){
objj_msgSendSuper({receiver:_fa,super_class:objj_getClass("CPSplitView").super_class},"encodeWithCoder:",_fc);
objj_msgSend(_fc,"encodeConditionalObject:forKey:",_delegate,_f2);
objj_msgSend(_fc,"encodeBool:forKey:",_isVertical,_f3);
objj_msgSend(_fc,"encodeBool:forKey:",_isPaneSplitter,_f4);
objj_msgSend(_fc,"encodeObject:forKey:",_autosaveName,_f6);
}
})]);
p;11;CPStepper.jt;9311;@STATIC;1.0;I;18;AppKit/CPControl.jI;17;AppKit/CPButton.jI;20;AppKit/CPTextField.jt;9222;
objj_executeFile("AppKit/CPControl.j",NO);
objj_executeFile("AppKit/CPButton.j",NO);
objj_executeFile("AppKit/CPTextField.j",NO);
var _1=objj_allocateClassPair(CPControl,"CPStepper"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_valueWraps"),new objj_ivar("_autorepeat"),new objj_ivar("_increment"),new objj_ivar("_maxValue"),new objj_ivar("_minValue"),new objj_ivar("_buttonDown"),new objj_ivar("_buttonUp")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("valueWraps"),function(_3,_4){
with(_3){
return _valueWraps;
}
}),new objj_method(sel_getUid("setValueWraps:"),function(_5,_6,_7){
with(_5){
_valueWraps=_7;
}
}),new objj_method(sel_getUid("autorepeat"),function(_8,_9){
with(_8){
return _autorepeat;
}
}),new objj_method(sel_getUid("_setAutorepeat:"),function(_a,_b,_c){
with(_a){
_autorepeat=_c;
}
}),new objj_method(sel_getUid("increment"),function(_d,_e){
with(_d){
return _increment;
}
}),new objj_method(sel_getUid("setIncrement:"),function(_f,_10,_11){
with(_f){
_increment=_11;
}
}),new objj_method(sel_getUid("maxValue"),function(_12,_13){
with(_12){
return _maxValue;
}
}),new objj_method(sel_getUid("setMaxValue:"),function(_14,_15,_16){
with(_14){
_maxValue=_16;
}
}),new objj_method(sel_getUid("minValue"),function(_17,_18){
with(_17){
return _minValue;
}
}),new objj_method(sel_getUid("setMinValue:"),function(_19,_1a,_1b){
with(_19){
_minValue=_1b;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_1c,_1d,_1e){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPStepper").super_class},"initWithFrame:",_1e)){
_maxValue=59;
_minValue=0;
_increment=1;
_valueWraps=YES;
_autorepeat=YES;
objj_msgSend(_1c,"setDoubleValue:",0);
objj_msgSend(_1c,"_init");
}
return _1c;
}
}),new objj_method(sel_getUid("_init"),function(_1f,_20){
with(_1f){
_buttonUp=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_buttonUp,"setContinuous:",_autorepeat);
objj_msgSend(_buttonUp,"setTarget:",_1f);
objj_msgSend(_buttonUp,"setAction:",sel_getUid("_buttonDidClick:"));
objj_msgSend(_buttonUp,"setAutoresizingMask:",CPViewNotSizable);
objj_msgSend(_1f,"addSubview:",_buttonUp);
_buttonDown=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_buttonDown,"setContinuous:",_autorepeat);
objj_msgSend(_buttonDown,"setTarget:",_1f);
objj_msgSend(_buttonDown,"setAction:",sel_getUid("_buttonDidClick:"));
objj_msgSend(_buttonDown,"setAutoresizingMask:",CPViewNotSizable);
objj_msgSend(_1f,"setContinuous:",_autorepeat);
objj_msgSend(_1f,"addSubview:",_buttonDown);
objj_msgSend(_1f,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setEnabled:"),function(_21,_22,_23){
with(_21){
objj_msgSendSuper({receiver:_21,super_class:objj_getClass("CPStepper").super_class},"setEnabled:",_23);
objj_msgSend(_buttonUp,"setEnabled:",_23);
objj_msgSend(_buttonDown,"setEnabled:",_23);
}
}),new objj_method(sel_getUid("setFrame:"),function(_24,_25,_26){
with(_24){
var _27=objj_msgSend(_24,"valueForThemeAttribute:","up-button-size"),_28=objj_msgSend(_24,"valueForThemeAttribute:","down-button-size"),_29={width:_27.width,height:_27.height+_28.height},_2a={origin:{x:_26.origin.x,y:_26.origin.y},size:{width:_26.size.width,height:_26.size.height}};
_2a.size.width=MAX(_29.width,_2a.size.width);
_2a.size.height=MAX(_29.height,_2a.size.height);
objj_msgSendSuper({receiver:_24,super_class:objj_getClass("CPStepper").super_class},"setFrame:",_2a);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_2b,_2c){
with(_2b){
var _2d=objj_msgSend(_2b,"frame"),_2e=objj_msgSend(_2b,"valueForThemeAttribute:","up-button-size"),_2f=objj_msgSend(_2b,"valueForThemeAttribute:","down-button-size"),_30={origin:{x:_2d.size.width-_2e.width,y:0},size:{width:_2e.width,height:_2e.height}},_31={origin:{x:_2d.size.width-_2f.width,y:_2e.height},size:{width:_2f.width,height:_2f.height}};
objj_msgSend(_buttonUp,"setFrame:",_30);
objj_msgSend(_buttonDown,"setFrame:",_31);
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered),"bezel-color",CPThemeStateBordered);
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered|CPThemeStateDisabled),"bezel-color",CPThemeStateBordered|CPThemeStateDisabled);
objj_msgSend(_buttonUp,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-up-button",CPThemeStateBordered|CPThemeStateHighlighted),"bezel-color",CPThemeStateBordered|CPThemeStateHighlighted);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered),"bezel-color",CPThemeStateBordered);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered|CPThemeStateDisabled),"bezel-color",CPThemeStateBordered|CPThemeStateDisabled);
objj_msgSend(_buttonDown,"setValue:forThemeAttribute:inState:",objj_msgSend(_2b,"valueForThemeAttribute:inState:","bezel-color-down-button",CPThemeStateBordered|CPThemeStateHighlighted),"bezel-color",CPThemeStateBordered|CPThemeStateHighlighted);
}
}),new objj_method(sel_getUid("setAutorepeat:"),function(_32,_33,_34){
with(_32){
if(_34!==_autorepeat){
objj_msgSend(_buttonUp,"setContinuous:",_34);
objj_msgSend(_buttonDown,"setContinuous:",_34);
}
objj_msgSend(_32,"setContinuous:",_34);
}
}),new objj_method(sel_getUid("setDoubleValue:"),function(_35,_36,_37){
with(_35){
if(_37>_maxValue){
objj_msgSendSuper({receiver:_35,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_valueWraps?_minValue:_maxValue);
}else{
if(_37<_minValue){
objj_msgSendSuper({receiver:_35,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_valueWraps?_maxValue:_minValue);
}else{
objj_msgSendSuper({receiver:_35,super_class:objj_getClass("CPStepper").super_class},"setDoubleValue:",_37);
}
}
}
}),new objj_method(sel_getUid("_buttonDidClick:"),function(_38,_39,_3a){
with(_38){
if(!objj_msgSend(_38,"isEnabled")){
return;
}
if(_3a==_buttonUp){
objj_msgSend(_38,"setDoubleValue:",(objj_msgSend(_38,"doubleValue")+_increment));
}else{
objj_msgSend(_38,"setDoubleValue:",(objj_msgSend(_38,"doubleValue")-_increment));
}
if(_target&&_action&&objj_msgSend(_target,"respondsToSelector:",_action)){
objj_msgSend(_38,"sendAction:to:",_action,_target);
}
}
}),new objj_method(sel_getUid("performClickUp:"),function(_3b,_3c,_3d){
with(_3b){
objj_msgSend(_buttonUp,"performClick:",_3d);
}
}),new objj_method(sel_getUid("performClickDown:"),function(_3e,_3f,_40){
with(_3e){
objj_msgSend(_buttonDown,"performClick:",_40);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("stepperWithInitialValue:minValue:maxValue:"),function(_41,_42,_43,_44,_45){
with(_41){
var _46=objj_msgSend(objj_msgSend(CPStepper,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:19,height:25}});
objj_msgSend(_46,"setDoubleValue:",_43);
objj_msgSend(_46,"setMinValue:",_44);
objj_msgSend(_46,"setMaxValue:",_45);
return _46;
}
}),new objj_method(sel_getUid("stepper"),function(_47,_48){
with(_47){
return objj_msgSend(CPStepper,"stepperWithInitialValue:minValue:maxValue:",0,0,59);
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_49,_4a){
with(_49){
return "stepper";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_4b,_4c){
with(_4b){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),{width:0,height:0},{width:0,height:0}],["bezel-color-up-button","bezel-color-down-button","up-button-size","down-button-size"]);
}
})]);
var _4d="CPStepperMinValue",_4e="CPStepperMaxValue",_4f="CPStepperValueWraps",_50="CPStepperAutorepeat",_51="CPStepperIncrement";
var _1=objj_getClass("CPStepper");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPStepper\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_52,_53,_54){
with(_52){
if(_52=objj_msgSendSuper({receiver:_52,super_class:objj_getClass("CPStepper").super_class},"initWithCoder:",_54)){
_increment=objj_msgSend(_54,"decodeIntForKey:",_51);
_minValue=objj_msgSend(_54,"decodeIntForKey:",_4d);
_maxValue=objj_msgSend(_54,"decodeIntForKey:",_4e);
_valueWraps=objj_msgSend(_54,"decodeBoolForKey:",_4f);
_autorepeat=objj_msgSend(_54,"decodeBoolForKey:",_50);
objj_msgSend(_52,"_init");
}
return _52;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_55,_56,_57){
with(_55){
objj_msgSendSuper({receiver:_55,super_class:objj_getClass("CPStepper").super_class},"encodeWithCoder:",_57);
objj_msgSend(_57,"encodeInt:forKey:",_increment,_51);
if(_minValue){
objj_msgSend(_57,"encodeInt:forKey:",_minValue,_4d);
}
if(_maxValue){
objj_msgSend(_57,"encodeInt:forKey:",_maxValue,_4e);
}
if(_valueWraps){
objj_msgSend(_57,"encodeBool:forKey:",_valueWraps,_4f);
}
if(_autorepeat){
objj_msgSend(_57,"encodeBool:forKey:",_autorepeat,_50);
}
}
})]);
p;17;CPStringDrawing.jt;1148;@STATIC;1.0;I;21;Foundation/CPString.ji;18;CPPlatformString.jt;1080;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPPlatformString.j",YES);
var _1={};
CPStringSizeCachingEnabled=YES;
var _2=objj_getClass("CPString");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPString\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("cssString"),function(_4,_5){
with(_4){
return _4;
}
}),new objj_method(sel_getUid("sizeWithFont:"),function(_6,_7,_8){
with(_6){
return objj_msgSend(_6,"sizeWithFont:inWidth:",_8,NULL);
}
}),new objj_method(sel_getUid("sizeWithFont:inWidth:"),function(_9,_a,_b,_c){
with(_9){
if(!CPStringSizeCachingEnabled){
return objj_msgSend(CPPlatformString,"sizeOfString:withFont:forWidth:",_9,_b,_c);
}
var _d=_9+objj_msgSend(_b,"cssString")+_c,_e=_1[_d];
if(_e===undefined){
_e=objj_msgSend(CPPlatformString,"sizeOfString:withFont:forWidth:",_9,_b,_c);
_1[_d]=_e;
}
return CGSizeMakeCopy(_e);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("metricsOfFont:"),function(_f,_10,_11){
with(_f){
return objj_msgSend(CPPlatformString,"metricsOfFont:",_11);
}
})]);
p;15;CPTableColumn.jt;15233;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;21;Foundation/CPObject.jI;23;Foundation/CPIndexSet.jI;29;Foundation/CPSortDescriptor.jI;21;Foundation/CPString.ji;19;CPTableHeaderView.jt;15045;
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPSortDescriptor.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPTableHeaderView.j",YES);
CPTableColumnNoResizing=0;
CPTableColumnAutoresizingMask=1<<0;
CPTableColumnUserResizingMask=1<<1;
var _1=objj_allocateClassPair(CPObject,"CPTableColumn"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_tableView"),new objj_ivar("_headerView"),new objj_ivar("_dataView"),new objj_ivar("_dataViewData"),new objj_ivar("_width"),new objj_ivar("_minWidth"),new objj_ivar("_maxWidth"),new objj_ivar("_resizingMask"),new objj_ivar("_identifier"),new objj_ivar("_isEditable"),new objj_ivar("_sortDescriptorPrototype"),new objj_ivar("_isHidden"),new objj_ivar("_headerToolTip"),new objj_ivar("_disableResizingPosting")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("disableResizingPosting"),function(_3,_4){
with(_3){
return _disableResizingPosting;
}
}),new objj_method(sel_getUid("setDisableResizingPosting:"),function(_5,_6,_7){
with(_5){
_disableResizingPosting=_7;
}
}),new objj_method(sel_getUid("init"),function(_8,_9){
with(_8){
return objj_msgSend(_8,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_a,_b,_c){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("CPTableColumn").super_class},"init");
if(_a){
_dataViewData={};
_width=100;
_minWidth=10;
_maxWidth=1000000;
_resizingMask=CPTableColumnAutoresizingMask|CPTableColumnUserResizingMask;
_disableResizingPosting=NO;
objj_msgSend(_a,"setIdentifier:",_c);
var _d=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_a,"setHeaderView:",_d);
objj_msgSend(_a,"setDataView:",objj_msgSend(CPTextField,"new"));
}
return _a;
}
}),new objj_method(sel_getUid("setTableView:"),function(_e,_f,_10){
with(_e){
_tableView=_10;
}
}),new objj_method(sel_getUid("tableView"),function(_11,_12){
with(_11){
return _tableView;
}
}),new objj_method(sel_getUid("_tryToResizeToWidth:"),function(_13,_14,_15){
with(_13){
var min=objj_msgSend(_13,"minWidth"),max=objj_msgSend(_13,"maxWidth"),_16=ROUND(MIN(MAX(_15,min),max));
objj_msgSend(_13,"setWidth:",_16);
return _16-_15;
}
}),new objj_method(sel_getUid("setWidth:"),function(_17,_18,_19){
with(_17){
_19=+_19;
if(_width===_19){
return;
}
var _1a=MIN(MAX(_19,objj_msgSend(_17,"minWidth")),objj_msgSend(_17,"maxWidth"));
if(_width===_1a){
return;
}
var _1b=_width;
_width=_1a;
var _1c=objj_msgSend(_17,"tableView");
if(_1c){
var _1d=objj_msgSend(objj_msgSend(_1c,"tableColumns"),"indexOfObjectIdenticalTo:",_17),_1e=_1c._dirtyTableColumnRangeIndex;
if(_1e<0){
_1c._dirtyTableColumnRangeIndex=_1d;
}else{
_1c._dirtyTableColumnRangeIndex=MIN(_1d,_1c._dirtyTableColumnRangeIndex);
}
var _1f=_1c._exposedRows,_20=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_1d,objj_msgSend(_1c._exposedColumns,"lastIndex")-_1d+1));
objj_msgSend(_1c,"_layoutDataViewsInRows:columns:",_1f,_20);
objj_msgSend(_1c,"tile");
if(!_disableResizingPosting){
objj_msgSend(_17,"_postDidResizeNotificationWithOldWidth:",_1b);
}
}
}
}),new objj_method(sel_getUid("width"),function(_21,_22){
with(_21){
return _width;
}
}),new objj_method(sel_getUid("setMinWidth:"),function(_23,_24,_25){
with(_23){
_25=+_25;
if(_minWidth===_25){
return;
}
_minWidth=_25;
var _26=objj_msgSend(_23,"width"),_27=MAX(_26,objj_msgSend(_23,"minWidth"));
if(_26!==_27){
objj_msgSend(_23,"setWidth:",_27);
}
}
}),new objj_method(sel_getUid("minWidth"),function(_28,_29){
with(_28){
return _minWidth;
}
}),new objj_method(sel_getUid("setMaxWidth:"),function(_2a,_2b,_2c){
with(_2a){
_2c=+_2c;
if(_maxWidth===_2c){
return;
}
_maxWidth=_2c;
var _2d=objj_msgSend(_2a,"width"),_2e=MIN(_2d,objj_msgSend(_2a,"maxWidth"));
if(_2d!==_2e){
objj_msgSend(_2a,"setWidth:",_2e);
}
}
}),new objj_method(sel_getUid("maxWidth"),function(_2f,_30){
with(_2f){
return _maxWidth;
}
}),new objj_method(sel_getUid("setResizingMask:"),function(_31,_32,_33){
with(_31){
_resizingMask=_33;
}
}),new objj_method(sel_getUid("resizingMask"),function(_34,_35){
with(_34){
return _resizingMask;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_36,_37){
with(_36){
var _38=(objj_msgSend(_headerView,"frame").size.width);
if(_38<objj_msgSend(_36,"minWidth")){
objj_msgSend(_36,"setMinWidth:",_38);
}else{
if(_38>objj_msgSend(_36,"maxWidth")){
objj_msgSend(_36,"setMaxWidth:",_38);
}
}
if(_width!==_38){
objj_msgSend(_36,"setWidth:",_38);
}
}
}),new objj_method(sel_getUid("setHeaderView:"),function(_39,_3a,_3b){
with(_39){
if(!_3b){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Attempt to set nil header view on "+objj_msgSend(_39,"description"));
}
_headerView=_3b;
var _3c=objj_msgSend(_tableView,"headerView");
objj_msgSend(_3c,"setNeedsLayout");
objj_msgSend(_3c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("headerView"),function(_3d,_3e){
with(_3d){
return _headerView;
}
}),new objj_method(sel_getUid("setDataView:"),function(_3f,_40,_41){
with(_3f){
if(_dataView){
_dataViewData[objj_msgSend(_dataView,"UID")]=nil;
}
objj_msgSend(_41,"setThemeState:",CPThemeStateTableDataView);
_dataView=_41;
_dataViewData[objj_msgSend(_41,"UID")]=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_41);
}
}),new objj_method(sel_getUid("dataView"),function(_42,_43){
with(_42){
return _dataView;
}
}),new objj_method(sel_getUid("dataViewForRow:"),function(_44,_45,_46){
with(_44){
return objj_msgSend(_44,"dataView");
}
}),new objj_method(sel_getUid("_newDataViewForRow:"),function(_47,_48,_49){
with(_47){
var _4a=objj_msgSend(_47,"dataViewForRow:",_49),_4b=objj_msgSend(_4a,"UID");
var x=objj_msgSend(_47,"tableView")._cachedDataViews[_4b];
if(x&&x.length){
return x.pop();
}
if(!_dataViewData[_4b]){
_dataViewData[_4b]=objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_4a);
}
var _4c=objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",_dataViewData[_4b]);
_4c.identifier=_4b;
objj_msgSend(_4c,"setAutoresizingMask:",CPViewNotSizable);
return _4c;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_4d,_4e,_4f){
with(_4d){
_identifier=_4f;
}
}),new objj_method(sel_getUid("identifier"),function(_50,_51){
with(_50){
return _identifier;
}
}),new objj_method(sel_getUid("setEditable:"),function(_52,_53,_54){
with(_52){
_isEditable=_54;
}
}),new objj_method(sel_getUid("isEditable"),function(_55,_56){
with(_55){
return _isEditable;
}
}),new objj_method(sel_getUid("setSortDescriptorPrototype:"),function(_57,_58,_59){
with(_57){
_sortDescriptorPrototype=_59;
}
}),new objj_method(sel_getUid("sortDescriptorPrototype"),function(_5a,_5b){
with(_5a){
return _sortDescriptorPrototype;
}
}),new objj_method(sel_getUid("setHidden:"),function(_5c,_5d,_5e){
with(_5c){
_5e=!!_5e;
if(_isHidden===_5e){
return;
}
_isHidden=_5e;
objj_msgSend(objj_msgSend(_5c,"headerView"),"setHidden:",_5e);
objj_msgSend(objj_msgSend(_5c,"tableView"),"_tableColumnVisibilityDidChange:",_5c);
}
}),new objj_method(sel_getUid("isHidden"),function(_5f,_60){
with(_5f){
return _isHidden;
}
}),new objj_method(sel_getUid("setHeaderToolTip:"),function(_61,_62,_63){
with(_61){
_headerToolTip=_63;
}
}),new objj_method(sel_getUid("headerToolTip"),function(_64,_65){
with(_64){
return _headerToolTip;
}
}),new objj_method(sel_getUid("_postDidResizeNotificationWithOldWidth:"),function(_66,_67,_68){
with(_66){
objj_msgSend(objj_msgSend(_66,"tableView"),"_didResizeTableColumn:",_66);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewColumnDidResizeNotification,objj_msgSend(_66,"tableView"),objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_66,_68],["CPTableColumn","CPOldWidth"]));
}
})]);
var _1=objj_allocateClassPair(CPBinder,"CPTableColumnValueBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setValueFor:"),function(_69,_6a,_6b){
with(_69){
var _6c=objj_msgSend(_source,"tableView"),_6d=objj_msgSend(objj_msgSend(_6c,"tableColumns"),"indexOfObjectIdenticalTo:",_source),_6e=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_6c,"numberOfRows"))),_6f=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_6d);
objj_msgSend(_6c,"reloadDataForRowIndexes:columnIndexes:",_6e,_6f);
}
})]);
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"),function(_70,_71,_72,_73,_74,_75){
with(_70){
objj_msgSendSuper({receiver:_70,super_class:objj_getClass("CPTableColumn").super_class},"bind:toObject:withKeyPath:options:",_72,_73,_74,_75);
if(!objj_msgSend(_72,"isEqual:","someListOfExceptedBindings(notAcceptedBindings)")){
var _76=_74.lastIndexOf("arrangedObjects."),_77=_73;
if(_76>1){
var _78=_74.substring(0,_76-1);
_77=objj_msgSend(_73,"valueForKeyPath:",_78);
}
objj_msgSend(objj_msgSend(_70,"tableView"),"_establishBindingsIfUnbound:",_77);
}
}
}),new objj_method(sel_getUid("_prepareDataView:forRow:"),function(_79,_7a,_7b,_7c){
with(_79){
var _7d=objj_msgSend(CPBinder,"allBindingsForObject:",_79),_7e=objj_msgSend(_7d,"allKeys");
for(var i=0,_7f=objj_msgSend(_7e,"count");i<_7f;i++){
var _80=_7e[i],_81=objj_msgSend(_7b,"_replacementKeyPathForBinding:",_80),_82=objj_msgSend(_7d,"objectForKey:",_80),_83=_82._info,_84=objj_msgSend(_83,"objectForKey:",CPObservedObjectKey),_85=objj_msgSend(_83,"objectForKey:",CPObservedKeyPathKey),_86=_85.lastIndexOf("."),_87;
if(_86===CPNotFound){
_87=objj_msgSend(objj_msgSend(_84,"valueForKeyPath:",_85),"objectAtIndex:",_7c);
}else{
var _88=_85.substring(0,_86),_89=_85.substring(_86+1),_8a=objj_msgSend(_84,"valueForKeyPath:",_88);
if(objj_msgSend(_8a,"isKindOfClass:",CPArray)){
_87=objj_msgSend(objj_msgSend(_8a,"objectAtIndex:",_7c),"valueForKeyPath:",_89);
}else{
_87=objj_msgSend(objj_msgSend(_8a,"valueForKeyPath:",_89),"objectAtIndex:",_7c);
}
}
_87=objj_msgSend(_82,"transformValue:withOptions:",_87,objj_msgSend(_83,"objectForKey:",CPOptionsKey));
objj_msgSend(_7b,"setValue:forKey:",_87,"objectValue");
}
}
}),new objj_method(sel_getUid("_reverseSetDataView:forRow:"),function(_8b,_8c,_8d,_8e){
with(_8b){
var _8f=objj_msgSend(CPBinder,"allBindingsForObject:",_8b),_90=objj_msgSend(_8f,"allKeys"),_91=objj_msgSend(_8d,"valueForKey:","objectValue");
for(var i=0,_92=objj_msgSend(_90,"count");i<_92;i++){
var _93=_90[i],_94=objj_msgSend(_8d,"_replacementKeyPathForBinding:",_93),_95=objj_msgSend(_8f,"objectForKey:",_93),_96=_95._info,_97=objj_msgSend(_96,"objectForKey:",CPObservedObjectKey),_98=objj_msgSend(_96,"objectForKey:",CPObservedKeyPathKey),_99=objj_msgSend(_96,"objectForKey:",CPOptionsKey),_9a=_98.lastIndexOf(".");
_91=objj_msgSend(_95,"reverseTransformValue:withOptions:",_91,_99);
if(_9a===CPNotFound){
objj_msgSend(objj_msgSend(_97,"valueForKeyPath:",_98),"replaceObjectAtIndex:withObject:",_8e,_91);
}else{
var _9b=_98.substring(0,_9a),_9c=_98.substring(_9a+1),_9d=objj_msgSend(_97,"valueForKeyPath:",_9b);
if(objj_msgSend(_9d,"isKindOfClass:",CPArray)){
objj_msgSend(objj_msgSend(_9d,"objectAtIndex:",_8e),"setValue:forKeyPath:",_91,_9c);
}else{
objj_msgSend(objj_msgSend(_9d,"valueForKeyPath:",_9c),"replaceObjectAtIndex:withObject:",_8e,_91);
}
}
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_9e,_9f,_a0){
with(_9e){
if(_a0==CPValueBinding){
return objj_msgSend(CPTableColumnValueBinder,"class");
}
return objj_msgSendSuper({receiver:_9e,super_class:objj_getMetaClass("CPTableColumn").super_class},"_binderClassForBinding:",_a0);
}
})]);
var _a1="CPTableColumnIdentifierKey",_a2="CPTableColumnHeaderViewKey",_a3="CPTableColumnDataViewKey",_a4="CPTableColumnWidthKey",_a5="CPTableColumnMinWidthKey",_a6="CPTableColumnMaxWidthKey",_a7="CPTableColumnResizingMaskKey",_a8="CPTableColumnIsHiddenKey",_a9="CPSortDescriptorPrototypeKey",_aa="CPTableColumnIsEditableKey";
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_ab,_ac,_ad){
with(_ab){
_ab=objj_msgSendSuper({receiver:_ab,super_class:objj_getClass("CPTableColumn").super_class},"init");
if(_ab){
_dataViewData={};
_width=objj_msgSend(_ad,"decodeFloatForKey:",_a4);
_minWidth=objj_msgSend(_ad,"decodeFloatForKey:",_a5);
_maxWidth=objj_msgSend(_ad,"decodeFloatForKey:",_a6);
objj_msgSend(_ab,"setIdentifier:",objj_msgSend(_ad,"decodeObjectForKey:",_a1));
objj_msgSend(_ab,"setHeaderView:",objj_msgSend(_ad,"decodeObjectForKey:",_a2));
objj_msgSend(_ab,"setDataView:",objj_msgSend(_ad,"decodeObjectForKey:",_a3));
_resizingMask=objj_msgSend(_ad,"decodeIntForKey:",_a7);
_isHidden=objj_msgSend(_ad,"decodeBoolForKey:",_a8);
_isEditable=objj_msgSend(_ad,"decodeBoolForKey:",_aa);
_sortDescriptorPrototype=objj_msgSend(_ad,"decodeObjectForKey:",_a9);
}
return _ab;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_ae,_af,_b0){
with(_ae){
objj_msgSend(_b0,"encodeObject:forKey:",_identifier,_a1);
objj_msgSend(_b0,"encodeFloat:forKey:",_width,_a4);
objj_msgSend(_b0,"encodeFloat:forKey:",_minWidth,_a5);
objj_msgSend(_b0,"encodeFloat:forKey:",_maxWidth,_a6);
objj_msgSend(_b0,"encodeObject:forKey:",_headerView,_a2);
objj_msgSend(_b0,"encodeObject:forKey:",_dataView,_a3);
objj_msgSend(_b0,"encodeObject:forKey:",_resizingMask,_a7);
objj_msgSend(_b0,"encodeBool:forKey:",_isHidden,_a8);
objj_msgSend(_b0,"encodeBool:forKey:",_isEditable,_aa);
objj_msgSend(_b0,"encodeObject:forKey:",_sortDescriptorPrototype,_a9);
}
})]);
var _1=objj_getClass("CPTableColumn");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("setHeaderCell:"),function(_b1,_b2,_b3){
with(_b1){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"setHeaderCell: is not supported. Use -setHeaderView:aView instead.");
}
}),new objj_method(sel_getUid("headerCell"),function(_b4,_b5){
with(_b4){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"headCell is not supported. Use -headerView instead.");
}
}),new objj_method(sel_getUid("setDataCell:"),function(_b6,_b7,_b8){
with(_b6){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"setDataCell: is not supported. Use -setDataView:aView instead.");
}
}),new objj_method(sel_getUid("dataCell"),function(_b9,_ba){
with(_b9){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataCell is not supported. Use -dataView instead.");
}
}),new objj_method(sel_getUid("dataCellForRow:"),function(_bb,_bc,row){
with(_bb){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"dataCellForRow: is not supported. Use -dataViewForRow:row instead.");
}
})]);
p;19;CPTableHeaderView.jt;21743;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;15;CPTableColumn.ji;13;CPTableView.ji;8;CPView.jt;21645;
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPTableColumnHeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_textField")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"_init");
}
return _3;
}
}),new objj_method(sel_getUid("_init"),function(_6,_7){
with(_6){
_textField=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_textField,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_textField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_textField,"setAlignment:",CPLeftTextAlignment);
objj_msgSend(_textField,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_6,"addSubview:",_textField);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_8,_9){
with(_8){
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","background-color"));
var _a=objj_msgSend(_8,"currentValueForThemeAttribute:","text-inset"),_b=objj_msgSend(_8,"bounds");
objj_msgSend(_textField,"setFrame:",{origin:{x:_a.right,y:_a.top},size:{width:_b.size.width-_a.right-_a.left,height:_b.size.height-_a.top-_a.bottom}});
objj_msgSend(_textField,"setTextColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_textField,"setFont:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-font"));
objj_msgSend(_textField,"setTextShadowColor:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_textField,"setTextShadowOffset:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-shadow-offset"));
objj_msgSend(_textField,"setAlignment:",objj_msgSend(_8,"currentValueForThemeAttribute:","text-alignment"));
}
}),new objj_method(sel_getUid("setStringValue:"),function(_c,_d,_e){
with(_c){
objj_msgSend(_textField,"setText:",_e);
}
}),new objj_method(sel_getUid("stringValue"),function(_f,_10){
with(_f){
return objj_msgSend(_textField,"text");
}
}),new objj_method(sel_getUid("textField"),function(_11,_12){
with(_11){
return _textField;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_13,_14){
with(_13){
objj_msgSend(_textField,"sizeToFit");
}
}),new objj_method(sel_getUid("setFont:"),function(_15,_16,_17){
with(_15){
objj_msgSend(_15,"setValue:forThemeAttribute:",_17,"text-font");
}
}),new objj_method(sel_getUid("_setIndicatorImage:"),function(_18,_19,_1a){
with(_18){
if(_1a){
objj_msgSend(_textField,"setImage:",_1a);
objj_msgSend(_textField,"setImagePosition:",CPImageRight);
}else{
objj_msgSend(_textField,"setImagePosition:",CPNoImage);
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_1b,_1c){
with(_1b){
return "columnHeader";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_1d,_1e){
with(_1d){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),CGInsetMakeZero(),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),CGSizeMakeZero()],["background-color","text-alignment","text-inset","text-color","text-font","text-shadow-color","text-shadow-offset"]);
}
})]);
var _1f="_CPTableColumnHeaderViewStringValueKey",_20="_CPTableColumnHeaderViewFontKey",_21="_CPTableColumnHeaderViewImageKey";
var _1=objj_getClass("_CPTableColumnHeaderView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPTableColumnHeaderView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_22,_23,_24){
with(_22){
if(_22=objj_msgSendSuper({receiver:_22,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"initWithCoder:",_24)){
objj_msgSend(_22,"_init");
objj_msgSend(_22,"_setIndicatorImage:",objj_msgSend(_24,"decodeObjectForKey:",_21));
objj_msgSend(_22,"setStringValue:",objj_msgSend(_24,"decodeObjectForKey:",_1f));
objj_msgSend(_22,"setFont:",objj_msgSend(_24,"decodeObjectForKey:",_20));
}
return _22;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_25,_26,_27){
with(_25){
objj_msgSendSuper({receiver:_25,super_class:objj_getClass("_CPTableColumnHeaderView").super_class},"encodeWithCoder:",_27);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"text"),_1f);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"image"),_21);
objj_msgSend(_27,"encodeObject:forKey:",objj_msgSend(_textField,"font"),_20);
}
})]);
var _1=objj_allocateClassPair(CPView,"CPTableHeaderView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownLocation"),new objj_ivar("_previousTrackingLocation"),new objj_ivar("_activeColumn"),new objj_ivar("_pressedColumn"),new objj_ivar("_isResizing"),new objj_ivar("_isDragging"),new objj_ivar("_isTrackingColumn"),new objj_ivar("_drawsColumnLines"),new objj_ivar("_columnOldWidth"),new objj_ivar("_tableView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("tableView"),function(_28,_29){
with(_28){
return _tableView;
}
}),new objj_method(sel_getUid("setTableView:"),function(_2a,_2b,_2c){
with(_2a){
_tableView=_2c;
}
}),new objj_method(sel_getUid("_init"),function(_2d,_2e){
with(_2d){
_mouseDownLocation={x:0,y:0};
_previousTrackingLocation={x:0,y:0};
_activeColumn=-1;
_pressedColumn=-1;
_isResizing=NO;
_isDragging=NO;
_isTrackingColumn=NO;
_drawsColumnLines=YES;
_columnOldWidth=0;
objj_msgSend(_2d,"setBackgroundColor:",objj_msgSend(_2d,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_2f,_30,_31){
with(_2f){
_2f=objj_msgSendSuper({receiver:_2f,super_class:objj_getClass("CPTableHeaderView").super_class},"initWithFrame:",_31);
if(_2f){
objj_msgSend(_2f,"_init");
}
return _2f;
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(_32,_33,_34){
with(_32){
return objj_msgSend(_tableView,"columnAtPoint:",CGPointMake(_34.x,_34.y));
}
}),new objj_method(sel_getUid("headerRectOfColumn:"),function(_35,_36,_37){
with(_35){
var _38=CGRectMakeCopy(objj_msgSend(_35,"bounds")),_39=objj_msgSend(_tableView,"rectOfColumn:",_37);
_38.origin.x=(_39.origin.x);
_38.size.width=(_39.size.width);
return _38;
}
}),new objj_method(sel_getUid("setDrawsColumnLines:"),function(_3a,_3b,_3c){
with(_3a){
_drawsColumnLines=_3c;
}
}),new objj_method(sel_getUid("drawsColumnLines"),function(_3d,_3e){
with(_3d){
return _drawsColumnLines;
}
}),new objj_method(sel_getUid("_cursorRectForColumn:"),function(_3f,_40,_41){
with(_3f){
if(_41==-1||!(objj_msgSend(_tableView._tableColumns[_41],"resizingMask")&CPTableColumnUserResizingMask)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _42=objj_msgSend(_3f,"headerRectOfColumn:",_41);
_42.origin.x=(_42.origin.x+_42.size.width)-5;
_42.size.width=20;
return _42;
}
}),new objj_method(sel_getUid("_setPressedColumn:"),function(_43,_44,_45){
with(_43){
if(_pressedColumn!=-1){
var _46=objj_msgSend(_tableView._tableColumns[_pressedColumn],"headerView");
objj_msgSend(_46,"unsetThemeState:",CPThemeStateHighlighted);
}
if(_45!=-1){
var _46=objj_msgSend(_tableView._tableColumns[_45],"headerView");
objj_msgSend(_46,"setThemeState:",CPThemeStateHighlighted);
}
_pressedColumn=_45;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_47,_48,_49){
with(_47){
objj_msgSend(_47,"trackMouse:",_49);
}
}),new objj_method(sel_getUid("trackMouse:"),function(_4a,_4b,_4c){
with(_4a){
var _4d=objj_msgSend(_4c,"type"),_4e=objj_msgSend(_4a,"convertPoint:fromView:",objj_msgSend(_4c,"locationInWindow"),nil);
_4e.x-=5;
var _4f=objj_msgSend(_4a,"columnAtPoint:",_4e),_50=objj_msgSend(_4a,"shouldResizeTableColumn:at:",_4f,{x:_4e.x+5,y:_4e.y});
if(_4d===CPLeftMouseUp){
if(_50){
objj_msgSend(_4a,"stopResizingTableColumn:at:",_activeColumn,_4e);
}else{
if(objj_msgSend(_4a,"_shouldStopTrackingTableColumn:at:",_4f,_4e)){
objj_msgSend(_tableView,"_didClickTableColumn:modifierFlags:",_4f,objj_msgSend(_4c,"modifierFlags"));
objj_msgSend(_4a,"stopTrackingTableColumn:at:",_4f,_4e);
_isTrackingColumn=NO;
}
}
objj_msgSend(_4a,"_updateResizeCursor:",objj_msgSend(CPApp,"currentEvent"));
_activeColumn=CPNotFound;
return;
}
if(_4d===CPLeftMouseDown){
if(_4f===-1){
return;
}
_mouseDownLocation=_4e;
_activeColumn=_4f;
objj_msgSend(_tableView,"_sendDelegateDidMouseDownInHeader:",_4f);
if(_50){
objj_msgSend(_4a,"startResizingTableColumn:at:",_4f,_4e);
}else{
objj_msgSend(_4a,"startTrackingTableColumn:at:",_4f,_4e);
_isTrackingColumn=YES;
}
}else{
if(_4d===CPLeftMouseDragged){
if(_50){
objj_msgSend(_4a,"continueResizingTableColumn:at:",_activeColumn,_4e);
}else{
if(_activeColumn===_4f&&(_4e.x>=(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.x)&&_4e.y>=(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.y)&&_4e.x<(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.x+objj_msgSend(_4a,"headerRectOfColumn:",_4f).size.width)&&_4e.y<(objj_msgSend(_4a,"headerRectOfColumn:",_4f).origin.y+objj_msgSend(_4a,"headerRectOfColumn:",_4f).size.height))){
if(_isTrackingColumn&&_pressedColumn!==-1){
if(!objj_msgSend(_4a,"continueTrackingTableColumn:at:",_4f,_4e)){
return;
}
}else{
objj_msgSend(_4a,"startTrackingTableColumn:at:",_4f,_4e);
}
}else{
if(_isTrackingColumn&&_pressedColumn!==-1){
objj_msgSend(_4a,"stopTrackingTableColumn:at:",_activeColumn,_4e);
}
}
}
}
}
_previousTrackingLocation=_4e;
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_4a,sel_getUid("trackMouse:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("startTrackingTableColumn:at:"),function(_51,_52,_53,_54){
with(_51){
objj_msgSend(_51,"_setPressedColumn:",_53);
}
}),new objj_method(sel_getUid("continueTrackingTableColumn:at:"),function(_55,_56,_57,_58){
with(_55){
if(objj_msgSend(_55,"_shouldDragTableColumn:at:",_57,_58)){
var _59=objj_msgSend(_55,"headerRectOfColumn:",_57),_5a={x:0,y:0},_5b=objj_msgSend(_tableView,"_dragViewForColumn:event:offset:",_57,objj_msgSend(CPApp,"currentEvent"),_5a),_5c={x:0,y:0};
_5c.x=((_59.origin.x)+_5a.x)+(_58.x-_mouseDownLocation.x);
_5c.y=(_59.origin.y)+_5a.y;
objj_msgSend(_55,"dragView:at:offset:event:pasteboard:source:slideBack:",_5b,_5c,{width:0,height:0},objj_msgSend(CPApp,"currentEvent"),objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard),_55,YES);
return NO;
}
return YES;
}
}),new objj_method(sel_getUid("_shouldStopTrackingTableColumn:at:"),function(_5d,_5e,_5f,_60){
with(_5d){
return _isTrackingColumn&&_activeColumn===_5f&&(_60.x>=(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.x)&&_60.y>=(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.y)&&_60.x<(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.x+objj_msgSend(_5d,"headerRectOfColumn:",_5f).size.width)&&_60.y<(objj_msgSend(_5d,"headerRectOfColumn:",_5f).origin.y+objj_msgSend(_5d,"headerRectOfColumn:",_5f).size.height));
}
}),new objj_method(sel_getUid("stopTrackingTableColumn:at:"),function(_61,_62,_63,_64){
with(_61){
objj_msgSend(_61,"_setPressedColumn:",CPNotFound);
objj_msgSend(_61,"_updateResizeCursor:",objj_msgSend(CPApp,"currentEvent"));
}
}),new objj_method(sel_getUid("_shouldDragTableColumn:at:"),function(_65,_66,_67,_68){
with(_65){
return objj_msgSend(_tableView,"allowsColumnReordering")&&ABS(_68.x-_mouseDownLocation.x)>=10;
}
}),new objj_method(sel_getUid("_headerRectOfLastVisibleColumn"),function(_69,_6a){
with(_69){
var _6b=objj_msgSend(_tableView,"tableColumns"),_6c=objj_msgSend(_6b,"count");
while(_6c--){
var _6d=objj_msgSend(_6b,"objectAtIndex:",_6c);
if(!objj_msgSend(_6d,"isHidden")){
return objj_msgSend(_69,"headerRectOfColumn:",_6c);
}
}
return nil;
}
}),new objj_method(sel_getUid("_constrainDragView:at:"),function(_6e,_6f,_70,_71){
with(_6e){
var _72=objj_msgSend(_tableView,"tableColumns"),_73=objj_msgSend(_6e,"_headerRectOfLastVisibleColumn"),_74=objj_msgSend(_6e,"headerRectOfColumn:",_activeColumn),_75=objj_msgSend(_70,"window"),_76=objj_msgSend(_75,"frame");
_76.origin=objj_msgSend(objj_msgSend(_6e,"window"),"convertGlobalToBase:",_76.origin);
_76.origin=objj_msgSend(_6e,"convertPoint:fromView:",_76.origin,nil);
_76.origin.x=MAX(0,MIN((_76.origin.x),(_73.origin.x+_73.size.width)-(_74.size.width)));
_76.origin.y=(_73.origin.y);
_76.origin=objj_msgSend(_6e,"convertPoint:toView:",_76.origin,nil);
_76.origin=objj_msgSend(objj_msgSend(_6e,"window"),"convertBaseToGlobal:",_76.origin);
objj_msgSend(_75,"setFrame:",_76);
}
}),new objj_method(sel_getUid("_moveColumn:toColumn:"),function(_77,_78,_79,_7a){
with(_77){
objj_msgSend(_tableView,"moveColumn:toColumn:",_79,_7a);
_activeColumn=_7a;
_pressedColumn=_activeColumn;
}
}),new objj_method(sel_getUid("draggedView:beganAt:"),function(_7b,_7c,_7d,_7e){
with(_7b){
_isDragging=YES;
var _7f=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_activeColumn);
objj_msgSend(objj_msgSend(_7f,"headerView"),"setHidden:",YES);
objj_msgSend(_tableView,"_setDraggedColumn:",_7f);
objj_msgSend(_7b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("draggedView:movedTo:"),function(_80,_81,_82,_83){
with(_80){
objj_msgSend(_80,"_constrainDragView:at:",_82,_83);
var _84=objj_msgSend(_82,"window"),_85=objj_msgSend(_84,"frame");
var _86=CGPointCreateCopy(_83);
if(_83.x<_previousTrackingLocation.x){
_86={x:(_85.origin.x),y:(_85.origin.y)};
}else{
if(_83.x>_previousTrackingLocation.x){
_86={x:(_85.origin.x+_85.size.width),y:(_85.origin.y)};
}
}
_86=objj_msgSend(objj_msgSend(_80,"window"),"convertGlobalToBase:",_86);
_86=objj_msgSend(_80,"convertPoint:fromView:",_86,nil);
var _87=objj_msgSend(_80,"columnAtPoint:",_86);
if(_87!==-1){
var _88=objj_msgSend(_80,"headerRectOfColumn:",_87),_89=objj_msgSend(_80,"convertPoint:fromView:",CGPointMake((_88.origin.x+(_88.size.width)/2),(_88.origin.y+(_88.size.height)/2)),_80);
if(_87<_activeColumn&&_86.x<_89.x){
objj_msgSend(_80,"_moveColumn:toColumn:",_activeColumn,_87);
}else{
if(_87>_activeColumn&&_86.x>_89.x){
objj_msgSend(_80,"_moveColumn:toColumn:",_activeColumn,_87);
}
}
}
_previousTrackingLocation=_83;
}
}),new objj_method(sel_getUid("draggedView:endedAt:operation:"),function(_8a,_8b,_8c,_8d,_8e){
with(_8a){
_isDragging=NO;
_isTrackingColumn=NO;
objj_msgSend(_tableView,"_setDraggedColumn:",nil);
objj_msgSend(objj_msgSend(objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_activeColumn),"headerView"),"setHidden:",NO);
objj_msgSend(_8a,"stopTrackingTableColumn:at:",_activeColumn,_8d);
objj_msgSend(_8a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("shouldResizeTableColumn:at:"),function(_8f,_90,_91,_92){
with(_8f){
if(_isResizing){
return YES;
}
if(_isTrackingColumn){
return NO;
}
return objj_msgSend(_tableView,"allowsColumnResizing")&&(_92.x>=(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.x)&&_92.y>=(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.y)&&_92.x<(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.x+objj_msgSend(_8f,"_cursorRectForColumn:",_91).size.width)&&_92.y<(objj_msgSend(_8f,"_cursorRectForColumn:",_91).origin.y+objj_msgSend(_8f,"_cursorRectForColumn:",_91).size.height));
}
}),new objj_method(sel_getUid("startResizingTableColumn:at:"),function(_93,_94,_95,_96){
with(_93){
_isResizing=YES;
var _97=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_95);
objj_msgSend(_97,"setDisableResizingPosting:",YES);
objj_msgSend(_tableView,"setDisableAutomaticResizing:",YES);
}
}),new objj_method(sel_getUid("continueResizingTableColumn:at:"),function(_98,_99,_9a,_9b){
with(_98){
var _9c=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_9a),_9d=objj_msgSend(_9c,"width")+_9b.x-_previousTrackingLocation.x;
if(_9d<objj_msgSend(_9c,"minWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeRightCursor"),"set");
}else{
if(_9d>objj_msgSend(_9c,"maxWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftCursor"),"set");
}else{
_tableView._lastColumnShouldSnap=NO;
objj_msgSend(_9c,"setWidth:",_9d);
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftRightCursor"),"set");
objj_msgSend(_98,"setNeedsLayout");
objj_msgSend(_98,"setNeedsDisplay:",YES);
}
}
}
}),new objj_method(sel_getUid("stopResizingTableColumn:at:"),function(_9e,_9f,_a0,_a1){
with(_9e){
var _a2=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_a0);
objj_msgSend(_a2,"_postDidResizeNotificationWithOldWidth:",_columnOldWidth);
objj_msgSend(_a2,"setDisableResizingPosting:",NO);
objj_msgSend(_tableView,"setDisableAutomaticResizing:",NO);
_isResizing=NO;
}
}),new objj_method(sel_getUid("_updateResizeCursor:"),function(_a3,_a4,_a5){
with(_a3){
if(!objj_msgSend(_tableView,"allowsColumnResizing")||(objj_msgSend(_a5,"type")===CPLeftMouseUp&&!objj_msgSend(objj_msgSend(_a3,"window"),"acceptsMouseMovedEvents"))){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
return;
}
var _a6=objj_msgSend(_a3,"convertPoint:fromView:",objj_msgSend(_a5,"locationInWindow"),nil),_a7=CGPointMake(_a6.x-5,_a6.y),_a8=objj_msgSend(_a3,"columnAtPoint:",_a7);
if(_a8>=0&&(_a6.x>=(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.x)&&_a6.y>=(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.y)&&_a6.x<(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.x+objj_msgSend(_a3,"_cursorRectForColumn:",_a8).size.width)&&_a6.y<(objj_msgSend(_a3,"_cursorRectForColumn:",_a8).origin.y+objj_msgSend(_a3,"_cursorRectForColumn:",_a8).size.height))){
var _a9=objj_msgSend(objj_msgSend(_tableView,"tableColumns"),"objectAtIndex:",_a8),_aa=objj_msgSend(_a9,"width");
if(_aa==objj_msgSend(_a9,"minWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeRightCursor"),"set");
}else{
if(_aa==objj_msgSend(_a9,"maxWidth")){
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftCursor"),"set");
}else{
objj_msgSend(objj_msgSend(CPCursor,"resizeLeftRightCursor"),"set");
}
}
}else{
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}
}),new objj_method(sel_getUid("mouseEntered:"),function(_ab,_ac,_ad){
with(_ab){
objj_msgSend(_ab,"_updateResizeCursor:",_ad);
}
}),new objj_method(sel_getUid("mouseMoved:"),function(_ae,_af,_b0){
with(_ae){
objj_msgSend(_ae,"_updateResizeCursor:",_b0);
}
}),new objj_method(sel_getUid("mouseExited:"),function(_b1,_b2,_b3){
with(_b1){
objj_msgSend(objj_msgSend(CPCursor,"arrowCursor"),"set");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_b4,_b5){
with(_b4){
var _b6=objj_msgSend(_tableView,"tableColumns"),_b7=objj_msgSend(_b6,"count");
for(var i=0;i<_b7;i++){
var _b8=objj_msgSend(_b6,"objectAtIndex:",i),_b9=objj_msgSend(_b8,"headerView"),_ba=objj_msgSend(_b4,"headerRectOfColumn:",i);
_ba.origin.x-=0.5;
_ba.size.width-=1;
_ba.size.height-=0.5;
objj_msgSend(_b9,"setFrame:",_ba);
if(objj_msgSend(_b9,"superview")!=_b4){
objj_msgSend(_b4,"addSubview:",_b9);
}
}
objj_msgSend(_b4,"setBackgroundColor:",objj_msgSend(_b4,"currentValueForThemeAttribute:","background-color"));
}
}),new objj_method(sel_getUid("drawRect:"),function(_bb,_bc,_bd){
with(_bb){
if(!_tableView||!objj_msgSend(_bb,"drawsColumnLines")){
return;
}
var _be=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_bf=objj_msgSend(_tableView,"columnIndexesInRect:",_bd),_c0=[],_c1=objj_msgSend(_tableView,"tableColumns"),_c2=_tableView._exposedColumns,_c3=objj_msgSend(_c2,"firstIndex"),_c4=CPMakeRange(_c3,objj_msgSend(_c2,"lastIndex")-_c3+1);
CGContextSetLineWidth(_be,1);
CGContextSetStrokeColor(_be,objj_msgSend(_bb,"currentValueForThemeAttribute:","divider-color"));
objj_msgSend(_bf,"getIndexes:maxCount:inIndexRange:",_c0,-1,_c4);
var _c5=0,_c6=_c0.length,_c7;
CGContextBeginPath(_be);
for(;_c5<_c6;_c5++){
var _c8=_c0[_c5],_c9=objj_msgSend(_bb,"headerRectOfColumn:",_c8);
_c7=(_c9.origin.x+_c9.size.width);
CGContextMoveToPoint(_be,FLOOR(_c7)-0.5,ROUND((_c9.origin.y)));
CGContextAddLineToPoint(_be,FLOOR(_c7)-0.5,ROUND((_c9.origin.y+_c9.size.height))-1);
}
CGContextClosePath(_be);
CGContextStrokePath(_be);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_ca,_cb){
with(_ca){
return "tableHeaderRow";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_cc,_cd){
with(_cc){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPColor,"grayColor")],["background-color","divider-color"]);
}
})]);
var _ce="CPTableHeaderViewTableViewKey",_cf="CPTableHeaderViewDrawsColumnLines";
var _1=objj_getClass("CPTableHeaderView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTableHeaderView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_d0,_d1,_d2){
with(_d0){
if(_d0=objj_msgSendSuper({receiver:_d0,super_class:objj_getClass("CPTableHeaderView").super_class},"initWithCoder:",_d2)){
objj_msgSend(_d0,"_init");
_tableView=objj_msgSend(_d2,"decodeObjectForKey:",_ce);
if(objj_msgSend(_d2,"containsValueForKey:",_cf)){
_drawsColumnLines=objj_msgSend(_d2,"decodeBoolForKey:",_cf);
}else{
_drawsColumnLines=YES;
CPLog.warn("The tableview header being decoded is using an old cib. Please run Nib2Cib.");
}
}
return _d0;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_d3,_d4,_d5){
with(_d3){
objj_msgSendSuper({receiver:_d3,super_class:objj_getClass("CPTableHeaderView").super_class},"encodeWithCoder:",_d5);
objj_msgSend(_d5,"encodeObject:forKey:",_tableView,_ce);
objj_msgSend(_d5,"encodeBool:forKey:",_drawsColumnLines,_cf);
}
})]);
p;13;CPTableView.jt;111180;@STATIC;1.0;I;20;Foundation/CPArray.jI;23;Foundation/CPIndexSet.ji;12;CGGradient.ji;11;CPControl.ji;15;CPTableColumn.ji;15;_CPCornerView.ji;12;CPScroller.jt;111016;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("CGGradient.j",YES);
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPTableColumn.j",YES);
objj_executeFile("_CPCornerView.j",YES);
objj_executeFile("CPScroller.j",YES);
CPTableViewColumnDidMoveNotification="CPTableViewColumnDidMoveNotification";
CPTableViewColumnDidResizeNotification="CPTableViewColumnDidResizeNotification";
CPTableViewSelectionDidChangeNotification="CPTableViewSelectionDidChangeNotification";
CPTableViewSelectionIsChangingNotification="CPTableViewSelectionIsChangingNotification";
var _1=1<<0,_2=1<<1,_3=1<<2,_4=1<<3,_5=1<<4,_6=1<<5,_7=1<<6,_8=1<<7;
var _9=1<<0,_a=1<<1,_b=1<<2,_c=1<<3,_d=1<<4,_e=1<<5,_f=1<<6,_10=1<<7,_11=1<<8,_12=1<<9,_13=1<<10,_14=1<<11,_15=1<<12,_16=1<<13,_17=1<<14,_18=1<<15,_19=1<<16,_1a=1<<17,_1b=1<<18,_1c=1<<19,_1d=1<<20;
CPTableViewDraggingDestinationFeedbackStyleNone=-1;
CPTableViewDraggingDestinationFeedbackStyleRegular=0;
CPTableViewDraggingDestinationFeedbackStyleSourceList=1;
CPTableViewDropOn=0;
CPTableViewDropAbove=1;
CPSourceListGradient="CPSourceListGradient";
CPSourceListTopLineColor="CPSourceListTopLineColor";
CPSourceListBottomLineColor="CPSourceListBottomLineColor";
CPTableViewSelectionHighlightStyleNone=-1;
CPTableViewSelectionHighlightStyleRegular=0;
CPTableViewSelectionHighlightStyleSourceList=1;
CPTableViewGridNone=0;
CPTableViewSolidVerticalGridLineMask=1<<0;
CPTableViewSolidHorizontalGridLineMask=1<<1;
CPTableViewNoColumnAutoresizing=0;
CPTableViewUniformColumnAutoresizingStyle=1;
CPTableViewSequentialColumnAutoresizingStyle=2;
CPTableViewReverseSequentialColumnAutoresizingStyle=3;
CPTableViewLastColumnOnlyAutoresizingStyle=4;
CPTableViewFirstColumnOnlyAutoresizingStyle=5;
var _1e=objj_allocateClassPair(CPView,"_CPTableDrawView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_tableView")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("initWithTableView:"),function(_20,_21,_22){
with(_20){
_20=objj_msgSendSuper({receiver:_20,super_class:objj_getClass("_CPTableDrawView").super_class},"init");
if(_20){
_tableView=_22;
}
return _20;
}
}),new objj_method(sel_getUid("drawRect:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(_23,"frame"),_27=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextTranslateCTM(_27,-(_26.origin.x),-(_26.origin.y));
objj_msgSend(_tableView,"_drawRect:",_25);
}
})]);
var _1e=objj_allocateClassPair(CPControl,"CPTableView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_dataSource"),new objj_ivar("_implementedDataSourceMethods"),new objj_ivar("_delegate"),new objj_ivar("_implementedDelegateMethods"),new objj_ivar("_tableColumns"),new objj_ivar("_tableColumnRanges"),new objj_ivar("_dirtyTableColumnRangeIndex"),new objj_ivar("_numberOfHiddenColumns"),new objj_ivar("_reloadAllRows"),new objj_ivar("_objectValues"),new objj_ivar("_exposedRect"),new objj_ivar("_exposedRows"),new objj_ivar("_exposedColumns"),new objj_ivar("_dataViewsForTableColumns"),new objj_ivar("_cachedDataViews"),new objj_ivar("_allowsColumnReordering"),new objj_ivar("_allowsColumnResizing"),new objj_ivar("_allowsColumnSelection"),new objj_ivar("_allowsMultipleSelection"),new objj_ivar("_allowsEmptySelection"),new objj_ivar("_sortDescriptors"),new objj_ivar("_intercellSpacing"),new objj_ivar("_rowHeight"),new objj_ivar("_usesAlternatingRowBackgroundColors"),new objj_ivar("_alternatingRowBackgroundColors"),new objj_ivar("_selectionHighlightStyle"),new objj_ivar("_currentHighlightedTableColumn"),new objj_ivar("_gridStyleMask"),new objj_ivar("_numberOfRows"),new objj_ivar("_groupRows"),new objj_ivar("_cachedRowHeights"),new objj_ivar("_autosaveName"),new objj_ivar("_autosaveTableColumns"),new objj_ivar("_headerView"),new objj_ivar("_cornerView"),new objj_ivar("_selectedColumnIndexes"),new objj_ivar("_selectedRowIndexes"),new objj_ivar("_selectionAnchorRow"),new objj_ivar("_lastSelectedRow"),new objj_ivar("_previouslySelectedRowIndexes"),new objj_ivar("_startTrackingPoint"),new objj_ivar("_startTrackingTimestamp"),new objj_ivar("_trackingPointMovedOutOfClickSlop"),new objj_ivar("_editingCellIndex"),new objj_ivar("_tableDrawView"),new objj_ivar("_doubleAction"),new objj_ivar("_clickedRow"),new objj_ivar("_columnAutoResizingStyle"),new objj_ivar("_lastTrackedRowIndex"),new objj_ivar("_originalMouseDownPoint"),new objj_ivar("_verticalMotionCanDrag"),new objj_ivar("_destinationDragStyle"),new objj_ivar("_isSelectingSession"),new objj_ivar("_draggedRowIndexes"),new objj_ivar("_wasSelectionBroken"),new objj_ivar("_dropOperationFeedbackView"),new objj_ivar("_dragOperationDefaultMask"),new objj_ivar("_retargetedDropRow"),new objj_ivar("_retargetedDropOperation"),new objj_ivar("_disableAutomaticResizing"),new objj_ivar("_lastColumnShouldSnap"),new objj_ivar("_implementsCustomDrawRow"),new objj_ivar("_draggedColumn"),new objj_ivar("_differedColumnDataToRemove")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("disableAutomaticResizing"),function(_28,_29){
with(_28){
return _disableAutomaticResizing;
}
}),new objj_method(sel_getUid("setDisableAutomaticResizing:"),function(_2a,_2b,_2c){
with(_2a){
_disableAutomaticResizing=_2c;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_2d,_2e,_2f){
with(_2d){
_2d=objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("CPTableView").super_class},"initWithFrame:",_2f);
if(_2d){
_allowsColumnReordering=YES;
_allowsColumnResizing=YES;
_allowsMultipleSelection=NO;
_allowsEmptySelection=YES;
_allowsColumnSelection=NO;
_disableAutomaticResizing=NO;
_selectionHighlightStyle=CPTableViewSelectionHighlightStyleRegular;
objj_msgSend(_2d,"setUsesAlternatingRowBackgroundColors:",NO);
objj_msgSend(_2d,"setAlternatingRowBackgroundColors:",[objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",245/255,249/255,252/255,1)]);
_tableColumns=[];
_tableColumnRanges=[];
_dirtyTableColumnRangeIndex=CPNotFound;
_numberOfHiddenColumns=0;
_intercellSpacing={width:3,height:2};
_rowHeight=23;
objj_msgSend(_2d,"setGridColor:",objj_msgSend(CPColor,"colorWithHexString:","dce0e2"));
objj_msgSend(_2d,"setGridStyleMask:",CPTableViewGridNone);
objj_msgSend(_2d,"setHeaderView:",objj_msgSend(objj_msgSend(CPTableHeaderView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(_2d,"bounds").size.width,height:_rowHeight}}));
objj_msgSend(_2d,"setCornerView:",objj_msgSend(objj_msgSend(_CPCornerView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:objj_msgSend(CPScroller,"scrollerWidth"),height:(objj_msgSend(_headerView,"frame").size.height)}}));
_currentHighlightedTableColumn=nil;
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
_verticalMotionCanDrag=YES;
_isSelectingSession=NO;
_retargetedDropRow=nil;
_retargetedDropOperation=nil;
_dragOperationDefaultMask=nil;
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleRegular;
objj_msgSend(_2d,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_2d,"_init");
}
return _2d;
}
}),new objj_method(sel_getUid("_init"),function(_30,_31){
with(_30){
_lastSelectedRow=-1;
_selectedColumnIndexes=objj_msgSend(CPIndexSet,"indexSet");
_selectedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
_dropOperationFeedbackView=objj_msgSend(objj_msgSend(_CPDropOperationDrawingView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_dropOperationFeedbackView,"setTableView:",_30);
_lastColumnShouldSnap=NO;
if(!_alternatingRowBackgroundColors){
_alternatingRowBackgroundColors=[objj_msgSend(CPColor,"whiteColor"),objj_msgSend(CPColor,"colorWithHexString:","e4e7ff")];
}
_tableColumnRanges=[];
_dirtyTableColumnRangeIndex=0;
_numberOfHiddenColumns=0;
_objectValues={};
_dataViewsForTableColumns={};
_numberOfRows=0;
_exposedRows=objj_msgSend(CPIndexSet,"indexSet");
_exposedColumns=objj_msgSend(CPIndexSet,"indexSet");
_cachedDataViews={};
_cachedRowHeights=[];
_groupRows=objj_msgSend(CPIndexSet,"indexSet");
_tableDrawView=objj_msgSend(objj_msgSend(_CPTableDrawView,"alloc"),"initWithTableView:",_30);
objj_msgSend(_tableDrawView,"setBackgroundColor:",objj_msgSend(CPColor,"clearColor"));
objj_msgSend(_30,"addSubview:",_tableDrawView);
_draggedColumn=nil;
_differedColumnDataToRemove=[];
_implementsCustomDrawRow=objj_msgSend(_30,"implementsSelector:",sel_getUid("drawRow:clipRect:"));
if(!_sortDescriptors){
_sortDescriptors=[];
}
}
}),new objj_method(sel_getUid("setDataSource:"),function(_32,_33,_34){
with(_32){
if(_dataSource===_34){
return;
}
_dataSource=_34;
_implementedDataSourceMethods=0;
if(!_dataSource){
return;
}
var _35=!!objj_msgSend(_32,"infoForBinding:","content");
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("numberOfRowsInTableView:"))){
_implementedDataSourceMethods|=_1;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:objectValueForTableColumn:row:"))){
_implementedDataSourceMethods|=_2;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:setObjectValue:forTableColumn:row:"))){
_implementedDataSourceMethods|=_3;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:acceptDrop:row:dropOperation:"))){
_implementedDataSourceMethods|=_4;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:namesOfPromisedFilesDroppedAtDestination:forDraggedRowsWithIndexes:"))){
_implementedDataSourceMethods|=_5;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"))){
_implementedDataSourceMethods|=_6;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"))){
_implementedDataSourceMethods|=_7;
}
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:sortDescriptorsDidChange:"))){
_implementedDataSourceMethods|=_8;
}
objj_msgSend(_32,"reloadData");
}
}),new objj_method(sel_getUid("dataSource"),function(_36,_37){
with(_36){
return _dataSource;
}
}),new objj_method(sel_getUid("reloadDataForRowIndexes:columnIndexes:"),function(_38,_39,_3a,_3b){
with(_38){
objj_msgSend(_38,"reloadData");
}
}),new objj_method(sel_getUid("reloadData"),function(_3c,_3d){
with(_3c){
_reloadAllRows=YES;
_objectValues={};
_cachedRowHeights=[];
objj_msgSend(_groupRows,"removeAllIndexes");
objj_msgSend(_3c,"noteNumberOfRowsChanged");
objj_msgSend(_3c,"setNeedsLayout");
objj_msgSend(_3c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setDoubleAction:"),function(_3e,_3f,_40){
with(_3e){
_doubleAction=_40;
}
}),new objj_method(sel_getUid("doubleAction"),function(_41,_42){
with(_41){
return _doubleAction;
}
}),new objj_method(sel_getUid("clickedRow"),function(_43,_44){
with(_43){
return _clickedRow;
}
}),new objj_method(sel_getUid("setAllowsColumnReordering:"),function(_45,_46,_47){
with(_45){
_allowsColumnReordering=!!_47;
}
}),new objj_method(sel_getUid("allowsColumnReordering"),function(_48,_49){
with(_48){
return _allowsColumnReordering;
}
}),new objj_method(sel_getUid("setAllowsColumnResizing:"),function(_4a,_4b,_4c){
with(_4a){
_allowsColumnResizing=!!_4c;
}
}),new objj_method(sel_getUid("allowsColumnResizing"),function(_4d,_4e){
with(_4d){
return _allowsColumnResizing;
}
}),new objj_method(sel_getUid("setAllowsMultipleSelection:"),function(_4f,_50,_51){
with(_4f){
_allowsMultipleSelection=!!_51;
}
}),new objj_method(sel_getUid("allowsMultipleSelection"),function(_52,_53){
with(_52){
return _allowsMultipleSelection;
}
}),new objj_method(sel_getUid("setAllowsEmptySelection:"),function(_54,_55,_56){
with(_54){
_allowsEmptySelection=!!_56;
}
}),new objj_method(sel_getUid("allowsEmptySelection"),function(_57,_58){
with(_57){
return _allowsEmptySelection;
}
}),new objj_method(sel_getUid("setAllowsColumnSelection:"),function(_59,_5a,_5b){
with(_59){
_allowsColumnSelection=!!_5b;
}
}),new objj_method(sel_getUid("allowsColumnSelection"),function(_5c,_5d){
with(_5c){
return _allowsColumnSelection;
}
}),new objj_method(sel_getUid("setIntercellSpacing:"),function(_5e,_5f,_60){
with(_5e){
if((_intercellSpacing.width==_60.width&&_intercellSpacing.height==_60.height)){
return;
}
_intercellSpacing={width:_60.width,height:_60.height};
_dirtyTableColumnRangeIndex=0;
objj_msgSend(_5e,"_recalculateTableColumnRanges");
objj_msgSend(_5e,"setNeedsLayout");
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
objj_msgSend(_headerView,"setNeedsLayout");
objj_msgSend(_5e,"reloadData");
}
}),new objj_method(sel_getUid("intercellSpacing"),function(_61,_62){
with(_61){
return {width:_intercellSpacing.width,height:_intercellSpacing.height};
}
}),new objj_method(sel_getUid("setRowHeight:"),function(_63,_64,_65){
with(_63){
_65=+_65;
if(_rowHeight===_65){
return;
}
_rowHeight=MAX(0,_65);
objj_msgSend(_63,"setNeedsLayout");
}
}),new objj_method(sel_getUid("rowHeight"),function(_66,_67){
with(_66){
return _rowHeight;
}
}),new objj_method(sel_getUid("setUsesAlternatingRowBackgroundColors:"),function(_68,_69,_6a){
with(_68){
_usesAlternatingRowBackgroundColors=_6a;
}
}),new objj_method(sel_getUid("usesAlternatingRowBackgroundColors"),function(_6b,_6c){
with(_6b){
return _usesAlternatingRowBackgroundColors;
}
}),new objj_method(sel_getUid("setAlternatingRowBackgroundColors:"),function(_6d,_6e,_6f){
with(_6d){
objj_msgSend(_6d,"setValue:forThemeAttribute:",_6f,"alternating-row-colors");
objj_msgSend(_6d,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("alternatingRowBackgroundColors"),function(_70,_71){
with(_70){
return objj_msgSend(_70,"currentValueForThemeAttribute:","alternating-row-colors");
}
}),new objj_method(sel_getUid("selectionHighlightStyle"),function(_72,_73){
with(_72){
return _selectionHighlightStyle;
}
}),new objj_method(sel_getUid("setSelectionHighlightStyle:"),function(_74,_75,_76){
with(_74){
_selectionHighlightStyle=_76;
objj_msgSend(_74,"setNeedsDisplay:",YES);
if(_76===CPTableViewSelectionHighlightStyleSourceList){
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleSourceList;
}else{
_destinationDragStyle=CPTableViewDraggingDestinationFeedbackStyleRegular;
}
}
}),new objj_method(sel_getUid("setSelectionHighlightColor:"),function(_77,_78,_79){
with(_77){
objj_msgSend(_77,"setValue:forThemeAttribute:",_79,"selection-color");
objj_msgSend(_77,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("selectionHighlightColor"),function(_7a,_7b){
with(_7a){
return objj_msgSend(_7a,"currentValueForThemeAttribute:","selection-color");
}
}),new objj_method(sel_getUid("setSelectionGradientColors:"),function(_7c,_7d,_7e){
with(_7c){
objj_msgSend(_7c,"setValue:forThemeAttribute:",_7e,"sourcelist-selection-color");
objj_msgSend(_7c,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("selectionGradientColors"),function(_7f,_80){
with(_7f){
return objj_msgSend(_7f,"currentValueForThemeAttribute:","sourcelist-selection-color");
}
}),new objj_method(sel_getUid("setGridColor:"),function(_81,_82,_83){
with(_81){
objj_msgSend(_81,"setValue:forThemeAttribute:",_83,"grid-color");
objj_msgSend(_81,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("gridColor"),function(_84,_85){
with(_84){
return objj_msgSend(_84,"currentValueForThemeAttribute:","grid-color");
}
}),new objj_method(sel_getUid("setGridStyleMask:"),function(_86,_87,_88){
with(_86){
if(_gridStyleMask===_88){
return;
}
_gridStyleMask=_88;
objj_msgSend(_86,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("gridStyleMask"),function(_89,_8a){
with(_89){
return _gridStyleMask;
}
}),new objj_method(sel_getUid("addTableColumn:"),function(_8b,_8c,_8d){
with(_8b){
objj_msgSend(_tableColumns,"addObject:",_8d);
objj_msgSend(_8d,"setTableView:",_8b);
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=(_tableColumns.length)-1;
}else{
_dirtyTableColumnRangeIndex=MIN((_tableColumns.length)-1,_dirtyTableColumnRangeIndex);
}
if(objj_msgSend(objj_msgSend(_8b,"sortDescriptors"),"count")>0){
var _8e=objj_msgSend(objj_msgSend(_8b,"sortDescriptors"),"objectAtIndex:",0);
if(_8d===objj_msgSend(_8b,"_tableColumnForSortDescriptor:",_8e)){
var _8f=objj_msgSend(_8e,"ascending")?objj_msgSend(_8b,"_tableHeaderSortImage"):objj_msgSend(_8b,"_tableHeaderReverseSortImage");
objj_msgSend(_8b,"setIndicatorImage:inTableColumn:",_8f,_8d);
}
}
objj_msgSend(_8b,"tile");
objj_msgSend(_8b,"setNeedsLayout");
}
}),new objj_method(sel_getUid("removeTableColumn:"),function(_90,_91,_92){
with(_90){
if(objj_msgSend(_92,"tableView")!==_90){
return;
}
var _93=objj_msgSend(_tableColumns,"indexOfObjectIdenticalTo:",_92);
if(_93===CPNotFound){
return;
}
objj_msgSend(_differedColumnDataToRemove,"addObject:",{"column":_92,"shouldBeHidden":objj_msgSend(_92,"isHidden")});
objj_msgSend(_92,"setHidden:",YES);
objj_msgSend(_92,"setTableView:",nil);
var _94=objj_msgSend(_92,"UID");
if(_objectValues[_94]){
_objectValues[_94]=nil;
}
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=_93;
}else{
_dirtyTableColumnRangeIndex=MIN(_93,_dirtyTableColumnRangeIndex);
}
objj_msgSend(_90,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_setDraggedColumn:"),function(_95,_96,_97){
with(_95){
if(_draggedColumn===_97){
return;
}
_draggedColumn=_97;
objj_msgSend(_95,"reloadDataForRowIndexes:columnIndexes:",_exposedRows,objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_tableColumns,"indexOfObject:",_97)));
}
}),new objj_method(sel_getUid("_moveColumn:toColumn:"),function(_98,_99,_9a,_9b){
with(_98){
_9a=+_9a;
_9b=+_9b;
if(_9a===_9b){
return;
}
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=MIN(_9a,_9b);
}else{
_dirtyTableColumnRangeIndex=MIN(_9a,_9b,_dirtyTableColumnRangeIndex);
}
var _9c=_tableColumns[_9a];
objj_msgSend(_tableColumns,"removeObjectAtIndex:",_9a);
objj_msgSend(_tableColumns,"insertObject:atIndex:",_9c,_9b);
objj_msgSend(objj_msgSend(_98,"headerView"),"setNeedsLayout");
objj_msgSend(objj_msgSend(_98,"headerView"),"setNeedsDisplay:",YES);
var _9d=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_98,"numberOfRows"))),_9e=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_9a,_9b));
objj_msgSend(_98,"reloadDataForRowIndexes:columnIndexes:",_9d,_9e);
}
}),new objj_method(sel_getUid("moveColumn:toColumn:"),function(_9f,_a0,_a1,_a2){
with(_9f){
objj_msgSend(_9f,"_moveColumn:toColumn:",_a1,_a2);
objj_msgSend(_9f,"_autosave");
}
}),new objj_method(sel_getUid("_tableColumnVisibilityDidChange:"),function(_a3,_a4,_a5){
with(_a3){
var _a6=objj_msgSend(objj_msgSend(_a3,"tableColumns"),"indexOfObjectIdenticalTo:",_a5);
if(_dirtyTableColumnRangeIndex<0){
_dirtyTableColumnRangeIndex=_a6;
}else{
_dirtyTableColumnRangeIndex=MIN(_a6,_dirtyTableColumnRangeIndex);
}
objj_msgSend(objj_msgSend(_a3,"headerView"),"setNeedsLayout");
objj_msgSend(objj_msgSend(_a3,"headerView"),"setNeedsDisplay:",YES);
var _a7=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_a3,"numberOfRows")));
objj_msgSend(_a3,"reloadDataForRowIndexes:columnIndexes:",_a7,objj_msgSend(CPIndexSet,"indexSetWithIndex:",_a6));
}
}),new objj_method(sel_getUid("tableColumns"),function(_a8,_a9){
with(_a8){
return _tableColumns;
}
}),new objj_method(sel_getUid("columnWithIdentifier:"),function(_aa,_ab,_ac){
with(_aa){
var _ad=0,_ae=(_tableColumns.length);
for(;_ad<_ae;++_ad){
if(objj_msgSend(_tableColumns[_ad],"identifier")===_ac){
return _ad;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tableColumnWithIdentifier:"),function(_af,_b0,_b1){
with(_af){
var _b2=objj_msgSend(_af,"columnWithIdentifier:",_b1);
if(_b2===CPNotFound){
return nil;
}
return _tableColumns[_b2];
}
}),new objj_method(sel_getUid("_didResizeTableColumn:"),function(_b3,_b4,_b5){
with(_b3){
objj_msgSend(_b3,"_autosave");
}
}),new objj_method(sel_getUid("selectColumnIndexes:byExtendingSelection:"),function(_b6,_b7,_b8,_b9){
with(_b6){
if((objj_msgSend(_b8,"firstIndex")!=CPNotFound&&objj_msgSend(_b8,"firstIndex")<0)||objj_msgSend(_b8,"lastIndex")>=objj_msgSend(_b6,"numberOfColumns")){
return;
}
if(objj_msgSend(_selectedRowIndexes,"count")>0){
objj_msgSend(_b6,"_updateHighlightWithOldRows:newRows:",_selectedRowIndexes,objj_msgSend(CPIndexSet,"indexSet"));
_selectedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
}
var _ba=objj_msgSend(_selectedColumnIndexes,"copy");
if(_b9){
objj_msgSend(_selectedColumnIndexes,"addIndexes:",_b8);
}else{
_selectedColumnIndexes=objj_msgSend(_b8,"copy");
}
objj_msgSend(_b6,"_updateHighlightWithOldColumns:newColumns:",_ba,_selectedColumnIndexes);
objj_msgSend(_b6,"setNeedsDisplay:",YES);
if(_headerView){
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
}
objj_msgSend(_b6,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("_setSelectedRowIndexes:"),function(_bb,_bc,_bd){
with(_bb){
if(objj_msgSend(_selectedRowIndexes,"isEqualToIndexSet:",_bd)){
return;
}
var _be=_selectedRowIndexes;
_lastSelectedRow=(objj_msgSend(_bd,"count")>0)?objj_msgSend(_bd,"lastIndex"):-1;
_selectedRowIndexes=objj_msgSend(_bd,"copy");
objj_msgSend(_bb,"_updateHighlightWithOldRows:newRows:",_be,_selectedRowIndexes);
objj_msgSend(_bb,"setNeedsDisplay:",YES);
var _bf=objj_msgSend(objj_msgSend(_bb,"class"),"_binderClassForBinding:","selectionIndexes");
objj_msgSend(objj_msgSend(_bf,"getBinding:forObject:","selectionIndexes",_bb),"reverseSetValueFor:","selectedRowIndexes");
objj_msgSend(_bb,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("selectRowIndexes:byExtendingSelection:"),function(_c0,_c1,_c2,_c3){
with(_c0){
if(objj_msgSend(_c2,"isEqualToIndexSet:",_selectedRowIndexes)||((objj_msgSend(_c2,"firstIndex")!=CPNotFound&&objj_msgSend(_c2,"firstIndex")<0)||objj_msgSend(_c2,"lastIndex")>=objj_msgSend(_c0,"numberOfRows"))){
return;
}
if(objj_msgSend(_selectedColumnIndexes,"count")>0){
objj_msgSend(_c0,"_updateHighlightWithOldColumns:newColumns:",_selectedColumnIndexes,objj_msgSend(CPIndexSet,"indexSet"));
_selectedColumnIndexes=objj_msgSend(CPIndexSet,"indexSet");
if(_headerView){
objj_msgSend(_headerView,"setNeedsDisplay:",YES);
}
}
var _c4;
if(_c3){
_c4=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_c4,"addIndexes:",_c2);
}else{
_c4=objj_msgSend(_c2,"copy");
}
objj_msgSend(_c0,"_setSelectedRowIndexes:",_c4);
}
}),new objj_method(sel_getUid("_updateHighlightWithOldRows:newRows:"),function(_c5,_c6,_c7,_c8){
with(_c5){
var _c9=objj_msgSend(_exposedRows,"firstIndex"),_ca=objj_msgSend(_exposedRows,"lastIndex")-_c9+1,_cb=[],_cc=[],_cd=objj_msgSend(_c7,"copy"),_ce=objj_msgSend(_c8,"copy");
objj_msgSend(_cd,"removeMatches:",_ce);
objj_msgSend(_cd,"getIndexes:maxCount:inIndexRange:",_cb,-1,CPMakeRange(_c9,_ca));
objj_msgSend(_ce,"getIndexes:maxCount:inIndexRange:",_cc,-1,CPMakeRange(_c9,_ca));
for(var _cf in _dataViewsForTableColumns){
var _d0=_dataViewsForTableColumns[_cf],_d1=_cb.length;
while(_d1--){
objj_msgSend(_c5,"_performSelection:forRow:context:",NO,_cb[_d1],_d0);
}
_d1=_cc.length;
while(_d1--){
objj_msgSend(_c5,"_performSelection:forRow:context:",YES,_cc[_d1],_d0);
}
}
}
}),new objj_method(sel_getUid("_performSelection:forRow:context:"),function(_d2,_d3,_d4,_d5,_d6){
with(_d2){
var _d7=_d6[_d5],_d8=_d4?"setThemeState:":"unsetThemeState:";
objj_msgSend(_d7,"performSelector:withObject:",CPSelectorFromString(_d8),CPThemeStateSelectedDataView);
}
}),new objj_method(sel_getUid("_updateHighlightWithOldColumns:newColumns:"),function(_d9,_da,_db,_dc){
with(_d9){
var _dd=objj_msgSend(_exposedColumns,"firstIndex"),_de=objj_msgSend(_exposedColumns,"lastIndex")-_dd+1,_df=[],_e0=[],_e1=objj_msgSend(_db,"copy"),_e2=objj_msgSend(_dc,"copy"),_e3=[];
objj_msgSend(_e1,"removeMatches:",_e2);
objj_msgSend(_e1,"getIndexes:maxCount:inIndexRange:",_df,-1,CPMakeRange(_dd,_de));
objj_msgSend(_e2,"getIndexes:maxCount:inIndexRange:",_e0,-1,CPMakeRange(_dd,_de));
objj_msgSend(_exposedRows,"getIndexes:maxCount:inIndexRange:",_e3,-1,nil);
var _e4=_e3.length,_e5=_df.length;
while(_e5--){
var _e6=_df[_e5],_e7=objj_msgSend(_tableColumns[_e6],"UID"),_e8=_dataViewsForTableColumns[_e7];
for(var i=0;i<_e4;i++){
var _e9=_e3[i],_ea=_e8[_e9];
objj_msgSend(_ea,"unsetThemeState:",CPThemeStateSelectedDataView);
}
if(_headerView){
var _eb=objj_msgSend(_tableColumns[_e6],"headerView");
objj_msgSend(_eb,"unsetThemeState:",CPThemeStateSelected);
}
}
_e5=_e0.length;
while(_e5--){
var _e6=_e0[_e5],_e7=objj_msgSend(_tableColumns[_e6],"UID"),_e8=_dataViewsForTableColumns[_e7];
for(var i=0;i<_e4;i++){
var _e9=_e3[i],_ea=_e8[_e9];
objj_msgSend(_ea,"setThemeState:",CPThemeStateSelectedDataView);
}
if(_headerView){
var _eb=objj_msgSend(_tableColumns[_e6],"headerView");
objj_msgSend(_eb,"setThemeState:",CPThemeStateSelected);
}
}
}
}),new objj_method(sel_getUid("selectedColumn"),function(_ec,_ed){
with(_ec){
return objj_msgSend(_selectedColumnIndexes,"lastIndex");
}
}),new objj_method(sel_getUid("selectedColumnIndexes"),function(_ee,_ef){
with(_ee){
return _selectedColumnIndexes;
}
}),new objj_method(sel_getUid("selectedRow"),function(_f0,_f1){
with(_f0){
return _lastSelectedRow;
}
}),new objj_method(sel_getUid("selectedRowIndexes"),function(_f2,_f3){
with(_f2){
return objj_msgSend(_selectedRowIndexes,"copy");
}
}),new objj_method(sel_getUid("deselectColumn:"),function(_f4,_f5,_f6){
with(_f4){
var _f7=objj_msgSend(_selectedColumnIndexes,"copy");
objj_msgSend(_f7,"removeIndex:",_f6);
objj_msgSend(_f4,"selectColumnIndexes:byExtendingSelection:",_f7,NO);
objj_msgSend(_f4,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("deselectRow:"),function(_f8,_f9,_fa){
with(_f8){
var _fb=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_fb,"removeIndex:",_fa);
objj_msgSend(_f8,"selectRowIndexes:byExtendingSelection:",_fb,NO);
objj_msgSend(_f8,"_noteSelectionDidChange");
}
}),new objj_method(sel_getUid("numberOfSelectedColumns"),function(_fc,_fd){
with(_fc){
return objj_msgSend(_selectedColumnIndexes,"count");
}
}),new objj_method(sel_getUid("numberOfSelectedRows"),function(_fe,_ff){
with(_fe){
return objj_msgSend(_selectedRowIndexes,"count");
}
}),new objj_method(sel_getUid("isColumnSelected:"),function(self,_100,_101){
with(self){
return objj_msgSend(_selectedColumnIndexes,"containsIndex:",_101);
}
}),new objj_method(sel_getUid("isRowSelected:"),function(self,_102,aRow){
with(self){
return objj_msgSend(_selectedRowIndexes,"containsIndex:",aRow);
}
}),new objj_method(sel_getUid("deselectAll"),function(self,_103){
with(self){
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
}
}),new objj_method(sel_getUid("numberOfColumns"),function(self,_104){
with(self){
return (_tableColumns.length);
}
}),new objj_method(sel_getUid("numberOfRows"),function(self,_105){
with(self){
if(_numberOfRows!==nil){
return _numberOfRows;
}
var _106=objj_msgSend(self,"infoForBinding:","content");
if(_106){
var _107=objj_msgSend(_106,"objectForKey:",CPObservedObjectKey),_108=objj_msgSend(_106,"objectForKey:",CPObservedKeyPathKey);
_numberOfRows=objj_msgSend(objj_msgSend(_107,"valueForKeyPath:",_108),"count");
}else{
if(_dataSource&&(_implementedDataSourceMethods&_1)){
_numberOfRows=objj_msgSend(_dataSource,"numberOfRowsInTableView:",self)||0;
}else{
if(_dataSource){
CPLog("no content binding established and data source "+objj_msgSend(_dataSource,"description")+" does not implement numberOfRowsInTableView:");
}
_numberOfRows=0;
}
}
return _numberOfRows;
}
}),new objj_method(sel_getUid("editColumn:row:withEvent:select:"),function(self,_109,_10a,_10b,_10c,flag){
with(self){
if(!objj_msgSend(self,"isRowSelected:",_10b)){
objj_msgSend(objj_msgSend(CPException,"exceptionWithName:reason:userInfo:","Error","Attempt to edit row="+_10b+" when not selected.",nil),"raise");
}
objj_msgSend(self,"scrollRowToVisible:",_10b);
objj_msgSend(self,"scrollColumnToVisible:",_10a);
_editingCellIndex=CGPointMake(_10a,_10b);
_editingCellIndex._shouldSelect=flag;
objj_msgSend(self,"reloadDataForRowIndexes:columnIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_10b),objj_msgSend(CPIndexSet,"indexSetWithIndex:",_10a));
}
}),new objj_method(sel_getUid("editedColumn"),function(self,_10d){
with(self){
if(!_editingCellIndex){
return CPNotFound;
}
return _editingCellIndex.x;
}
}),new objj_method(sel_getUid("editedRow"),function(self,_10e){
with(self){
if(!_editingCellIndex){
return CPNotFound;
}
return _editingCellIndex.y;
}
}),new objj_method(sel_getUid("cornerView"),function(self,_10f){
with(self){
return _cornerView;
}
}),new objj_method(sel_getUid("setCornerView:"),function(self,_110,_111){
with(self){
if(_cornerView===_111){
return;
}
_cornerView=_111;
var _112=objj_msgSend(self,"enclosingScrollView");
if(objj_msgSend(_112,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))&&objj_msgSend(_112,"documentView")===self){
objj_msgSend(_112,"_updateCornerAndHeaderView");
}
}
}),new objj_method(sel_getUid("headerView"),function(self,_113){
with(self){
return _headerView;
}
}),new objj_method(sel_getUid("setHeaderView:"),function(self,_114,_115){
with(self){
if(_headerView===_115){
return;
}
objj_msgSend(_headerView,"setTableView:",nil);
_headerView=_115;
if(_headerView){
objj_msgSend(_headerView,"setTableView:",self);
objj_msgSend(_headerView,"setFrameSize:",{width:(objj_msgSend(self,"frame").size.width),height:(objj_msgSend(_headerView,"frame").size.height)});
}else{
objj_msgSend(_cornerView,"removeFromSuperview");
_cornerView=nil;
}
var _116=objj_msgSend(self,"enclosingScrollView");
if(objj_msgSend(_116,"isKindOfClass:",objj_msgSend(CPScrollView,"class"))&&objj_msgSend(_116,"documentView")===self){
objj_msgSend(_116,"_updateCornerAndHeaderView");
}
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_recalculateTableColumnRanges"),function(self,_117){
with(self){
if(_dirtyTableColumnRangeIndex<0){
return;
}
_numberOfHiddenColumns=0;
var _118=_dirtyTableColumnRangeIndex,_119=(_tableColumns.length),x=_118===0?0:CPMaxRange(_tableColumnRanges[_118-1]);
for(;_118<_119;++_118){
var _11a=_tableColumns[_118];
if(objj_msgSend(_11a,"isHidden")){
_numberOfHiddenColumns+=1;
_tableColumnRanges[_118]=CPMakeRange(x,0);
}else{
var _11b=objj_msgSend(_tableColumns[_118],"width")+_intercellSpacing.width;
_tableColumnRanges[_118]=CPMakeRange(x,_11b);
x+=_11b;
}
}
_tableColumnRanges.length=_119;
_dirtyTableColumnRangeIndex=CPNotFound;
}
}),new objj_method(sel_getUid("rectOfColumn:"),function(self,_11c,_11d){
with(self){
_11d=+_11d;
if(_11d<0||_11d>=(_tableColumns.length)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _11e=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_11d);
if(objj_msgSend(_11e,"isHidden")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _11f=_tableColumnRanges[_11d];
return {origin:{x:_11f.location,y:0},size:{width:_11f.length,height:(objj_msgSend(self,"bounds").size.height)}};
}
}),new objj_method(sel_getUid("_rectOfRow:checkRange:"),function(self,_120,_121,_122){
with(self){
var _123=objj_msgSend(self,"numberOfRows")-1;
if(_122&&(_121>_123||_121<0)){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
if(_implementedDelegateMethods&_d){
var _124=MIN(_121,_123);
if(_124!==CPNotFound){
var y=_cachedRowHeights[_124].heightAboveRow,_125=_cachedRowHeights[_124].height+_intercellSpacing.height,_126=_121-_124;
}else{
y=_121*(_rowHeight+_intercellSpacing.height);
_125=_rowHeight+_intercellSpacing.height;
}
if(_126>0){
y+=_126*(_rowHeight+_intercellSpacing.height);
_125=_rowHeight+_intercellSpacing.height;
}
}else{
var y=_121*(_rowHeight+_intercellSpacing.height),_125=_rowHeight+_intercellSpacing.height;
}
return {origin:{x:0,y:y},size:{width:(objj_msgSend(self,"bounds").size.width),height:_125}};
}
}),new objj_method(sel_getUid("rectOfRow:"),function(self,_127,_128){
with(self){
return objj_msgSend(self,"_rectOfRow:checkRange:",_128,YES);
}
}),new objj_method(sel_getUid("rowsInRect:"),function(self,_129,_12a){
with(self){
if(_numberOfRows<=0){
return CPMakeRange(0,0);
}
var _12b=objj_msgSend(self,"bounds");
if(!CGRectIntersectsRect(_12a,_12b)){
return CPMakeRange(0,0);
}
var _12c=objj_msgSend(self,"rowAtPoint:",_12a.origin);
if(_12c<0){
_12c=0;
}
var _12d=objj_msgSend(self,"rowAtPoint:",{x:0,y:(_12a.origin.y+_12a.size.height)});
if(_12d<0){
_12d=_numberOfRows-1;
}
return CPMakeRange(_12c,_12d-_12c+1);
}
}),new objj_method(sel_getUid("_unboundedRowsInRect:"),function(self,_12e,_12f){
with(self){
var _130=objj_msgSend(self,"rowsInRect:",_12f),_131=CPMaxRange(_130),_132=objj_msgSend(self,"_rectOfRow:checkRange:",_131,NO),_133=(_12f.origin.y+_12f.size.height),_134=(_132.origin.y+_132.size.height);
if(_133<=_134){
return _130;
}
var _135=CEIL(_133-_134)/(objj_msgSend(self,"rowHeight")+_intercellSpacing.height);
_130.length+=_135+1;
return _130;
}
}),new objj_method(sel_getUid("columnIndexesInRect:"),function(self,_136,_137){
with(self){
var _138=MAX(0,objj_msgSend(self,"columnAtPoint:",{x:_137.origin.x,y:0})),_139=objj_msgSend(self,"columnAtPoint:",{x:(_137.origin.x+_137.size.width),y:0});
if(_139===CPNotFound){
_139=(_tableColumns.length)-1;
}
if(_numberOfHiddenColumns<=0){
return objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_138,_139-_138+1));
}
var _13a=objj_msgSend(CPIndexSet,"indexSet");
for(;_138<=_139;++_138){
var _13b=_tableColumns[_138];
if(!objj_msgSend(_13b,"isHidden")){
objj_msgSend(_13a,"addIndex:",_138);
}
}
return _13a;
}
}),new objj_method(sel_getUid("columnAtPoint:"),function(self,_13c,_13d){
with(self){
var _13e=objj_msgSend(self,"bounds");
if(!(_13d.x>=(_13e.origin.x)&&_13d.y>=(_13e.origin.y)&&_13d.x<(_13e.origin.x+_13e.size.width)&&_13d.y<(_13e.origin.y+_13e.size.height))){
return CPNotFound;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var x=_13d.x,low=0,high=_tableColumnRanges.length-1;
while(low<=high){
var _13f=FLOOR(low+(high-low)/2),_140=_tableColumnRanges[_13f];
if(x<_140.location){
high=_13f-1;
}else{
if(x>=CPMaxRange(_140)){
low=_13f+1;
}else{
var _141=_tableColumnRanges.length;
while(_13f<_141&&objj_msgSend(_tableColumns[_13f],"isHidden")){
++_13f;
}
if(_13f<_141){
return _13f;
}
return CPNotFound;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("rowAtPoint:"),function(self,_142,_143){
with(self){
if(_implementedDelegateMethods&_d){
return objj_msgSend(_cachedRowHeights,"indexOfObject:inSortedRange:options:usingComparator:",_143,nil,0,function(_144,_145){
var _146=_145.heightAboveRow;
if(_144.y<_146){
return CPOrderedAscending;
}
if(_144.y>_146+_145.height+_intercellSpacing.height){
return CPOrderedDescending;
}
return CPOrderedSame;
});
}
var y=_143.y,row=FLOOR(y/(_rowHeight+_intercellSpacing.height));
if(row>=_numberOfRows){
return CPNotFound;
}
return row;
}
}),new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"),function(self,_147,_148,aRow){
with(self){
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
if(_148>objj_msgSend(self,"numberOfColumns")||aRow>objj_msgSend(self,"numberOfRows")){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
var _149=_tableColumnRanges[_148],_14a=objj_msgSend(self,"rectOfRow:",aRow),_14b=FLOOR(_intercellSpacing.width/2),_14c=FLOOR(_intercellSpacing.height/2);
return {origin:{x:_149.location+_14b,y:(_14a.origin.y)+_14c},size:{width:_149.length-_intercellSpacing.width,height:(_14a.size.height)-_intercellSpacing.height}};
}
}),new objj_method(sel_getUid("resizeWithOldSuperviewSize:"),function(self,_14d,_14e){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"resizeWithOldSuperviewSize:",_14e);
if(_disableAutomaticResizing){
return;
}
var mask=_columnAutoResizingStyle;
if(!_lastColumnShouldSnap){
var _14f=objj_msgSend(self,"superview");
if(!_14f||!objj_msgSend(_14f,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
return;
}
var _150=objj_msgSend(_14f,"bounds").size.width,_151=(objj_msgSend(self,"rectOfColumn:",objj_msgSend(self,"numberOfColumns")-1).origin.x+objj_msgSend(self,"rectOfColumn:",objj_msgSend(self,"numberOfColumns")-1).size.width);
if(_151>=_150&&_151<=_14e.width||_151<=_150&&_151>=_14e.width){
_lastColumnShouldSnap=YES;
}else{
if(mask===CPTableViewUniformColumnAutoresizingStyle){
return;
}
}
}
if(mask===CPTableViewUniformColumnAutoresizingStyle){
objj_msgSend(self,"_resizeAllColumnUniformlyWithOldSize:",_14e);
}else{
if(mask===CPTableViewLastColumnOnlyAutoresizingStyle){
objj_msgSend(self,"sizeLastColumnToFit");
}else{
if(mask===CPTableViewFirstColumnOnlyAutoresizingStyle){
objj_msgSend(self,"_autoResizeFirstColumn");
}
}
}
}
}),new objj_method(sel_getUid("_autoResizeFirstColumn"),function(self,_152){
with(self){
var _153=objj_msgSend(self,"superview");
if(!_153){
return;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _154=(_tableColumns.length),_155=nil,_156=0,i=0;
for(;i<_154;i++){
var _157=_tableColumns[i];
if(!objj_msgSend(_157,"isHidden")){
if(!_155){
_155=_157;
}
_156+=objj_msgSend(_157,"width")+_intercellSpacing.width;
}
}
if(_155){
var _158=objj_msgSend(_153,"bounds").size,_159=_158.width-_156;
_159+=objj_msgSend(_155,"width");
objj_msgSend(_155,"_tryToResizeToWidth:",_159);
}
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_resizeAllColumnUniformlyWithOldSize:"),function(self,_15a,_15b){
with(self){
var _15c=objj_msgSend(self,"superview");
if(!_15c||!objj_msgSend(_15c,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
return;
}
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _15d=objj_msgSend(_15c,"bounds").size.width,_15e=(_tableColumns.length),_15f=objj_msgSend(CPIndexSet,"indexSet"),_160=0,i=0;
for(;i<_15e;i++){
var _161=_tableColumns[i];
if(!objj_msgSend(_161,"isHidden")&&(objj_msgSend(_161,"resizingMask")&CPTableColumnAutoresizingMask)){
objj_msgSend(_15f,"addIndex:",i);
}
}
var _162=(objj_msgSend(self,"rectOfColumn:",objj_msgSend(_15f,"lastIndex")).origin.x+objj_msgSend(self,"rectOfColumn:",objj_msgSend(_15f,"lastIndex")).size.width),_160=_15d-_162,_163=objj_msgSend(_15f,"count"),_164=0;
while(_160&&_163){
_164+=_160/_163;
_160=0;
var _165=CPNotFound;
while((_165=objj_msgSend(_15f,"indexGreaterThanIndex:",_165))!==CPNotFound){
var item=_tableColumns[_165],_166=objj_msgSend(item,"width")+_164,_167=objj_msgSend(item,"_tryToResizeToWidth:",_166);
if(_167){
objj_msgSend(_15f,"removeIndex:",_165);
_160+=_167;
}
}
}
while(_15e--&&objj_msgSend(_tableColumns[_15e],"isHidden")){
}
var _168=_15d-(objj_msgSend(self,"rectOfColumn:",_15e).origin.x+objj_msgSend(self,"rectOfColumn:",_15e).size.width)-(objj_msgSend(self,"intercellSpacing").width||1),_169=objj_msgSend(item,"width")+_168;
objj_msgSend(item,"_tryToResizeToWidth:",_169);
}
}),new objj_method(sel_getUid("setColumnAutoresizingStyle:"),function(self,_16a,_16b){
with(self){
_columnAutoResizingStyle=_16b;
}
}),new objj_method(sel_getUid("columnAutoresizingStyle"),function(self,_16c){
with(self){
return _columnAutoResizingStyle;
}
}),new objj_method(sel_getUid("sizeLastColumnToFit"),function(self,_16d){
with(self){
_lastColumnShouldSnap=YES;
var _16e=objj_msgSend(self,"superview");
if(!_16e){
return;
}
var _16f=objj_msgSend(_16e,"bounds").size;
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _170=(_tableColumns.length);
while(_170--&&objj_msgSend(_tableColumns[_170],"isHidden")){
}
if(_170>=0){
var _171=_tableColumns[_170],_172=MAX(0,_16f.width-CGRectGetMinX(objj_msgSend(self,"rectOfColumn:",_170))-_intercellSpacing.width);
objj_msgSend(_171,"_tryToResizeToWidth:",_172);
}
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("noteNumberOfRowsChanged"),function(self,_173){
with(self){
var _174=_numberOfRows;
_numberOfRows=nil;
_cachedRowHeights=[];
objj_msgSend(self,"noteHeightOfRowsWithIndexesChanged:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(self,"numberOfRows"))));
var _175=_174-_numberOfRows;
if(_175>0){
var _176=objj_msgSend(_selectedRowIndexes,"count");
objj_msgSend(_selectedRowIndexes,"removeIndexesInRange:",CPMakeRange(_numberOfRows,_175));
if(!objj_msgSend(_selectedRowIndexes,"containsIndex:",objj_msgSend(self,"selectedRow"))){
_lastSelectedRow=CPNotFound;
}
if(_176>objj_msgSend(_selectedRowIndexes,"count")){
objj_msgSend(self,"_noteSelectionDidChange");
}
}
objj_msgSend(self,"tile");
}
}),new objj_method(sel_getUid("noteHeightOfRowsWithIndexesChanged:"),function(self,_177,_178){
with(self){
if(!(_implementedDelegateMethods&_d)){
return;
}
var i=objj_msgSend(_178,"firstIndex"),_179=_numberOfRows-i,_17a=(i>0)?_cachedRowHeights[i-1].height+_cachedRowHeights[i-1].heightAboveRow+_intercellSpacing.height:0;
for(;i<_179;i++){
if(objj_msgSend(_178,"containsIndex:",i)){
var _17b=objj_msgSend(_delegate,"tableView:heightOfRow:",self,i);
}
_cachedRowHeights[i]={"height":_17b,"heightAboveRow":_17a};
_17a+=_17b+_intercellSpacing.height;
}
}
}),new objj_method(sel_getUid("tile"),function(self,_17c){
with(self){
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _17d=_tableColumnRanges.length>0?CPMaxRange(objj_msgSend(_tableColumnRanges,"lastObject")):0,_17e=objj_msgSend(self,"superview");
if(!(_implementedDelegateMethods&_d)){
var _17f=(_rowHeight+_intercellSpacing.height)*_numberOfRows;
}else{
if(objj_msgSend(self,"numberOfRows")===0){
var _17f=0;
}else{
if(objj_msgSend(self,"numberOfRows")!==_cachedRowHeights.length){
objj_msgSend(self,"noteHeightOfRowsWithIndexesChanged:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(self,"numberOfRows"))));
}
var _180=_cachedRowHeights[_cachedRowHeights.length-1],_17f=_180.heightAboveRow+_180.height+_intercellSpacing.height;
}
}
if(objj_msgSend(_17e,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
var _181=objj_msgSend(_17e,"bounds").size;
_17d=MAX(_181.width,_17d);
_17f=MAX(_181.height,_17f);
}
objj_msgSend(self,"setFrameSize:",{width:_17d,height:_17f});
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("scrollRowToVisible:"),function(self,_182,_183){
with(self){
var _184=objj_msgSend(self,"visibleRect"),_185=objj_msgSend(self,"rectOfRow:",_183);
_184.origin.y=_185.origin.y;
_184.size.height=_185.size.height;
objj_msgSend(self,"scrollRectToVisible:",_184);
}
}),new objj_method(sel_getUid("scrollColumnToVisible:"),function(self,_186,_187){
with(self){
var _188=objj_msgSend(self,"visibleRect"),_189=objj_msgSend(self,"rectOfColumn:",_187);
_188.origin.x=_189.origin.x;
_188.size.width=_189.size.width;
objj_msgSend(self,"scrollRectToVisible:",_188);
objj_msgSend(_headerView,"scrollRectToVisible:",_189);
}
}),new objj_method(sel_getUid("setAutosaveName:"),function(self,_18a,_18b){
with(self){
if(_autosaveName===_18b){
return;
}
_autosaveName=_18b;
objj_msgSend(self,"setAutosaveTableColumns:",!!_18b);
objj_msgSend(self,"_restoreFromAutosave");
}
}),new objj_method(sel_getUid("autosaveName"),function(self,_18c){
with(self){
return _autosaveName;
}
}),new objj_method(sel_getUid("setAutosaveTableColumns:"),function(self,_18d,_18e){
with(self){
_autosaveTableColumns=_18e;
}
}),new objj_method(sel_getUid("autosaveTableColumns"),function(self,_18f){
with(self){
return _autosaveTableColumns;
}
}),new objj_method(sel_getUid("_columnsKeyForAutosaveName:"),function(self,_190,_191){
with(self){
return "CPTableView Columns "+_191;
}
}),new objj_method(sel_getUid("_autosaveEnabled"),function(self,_192){
with(self){
return objj_msgSend(self,"autosaveName")&&objj_msgSend(self,"autosaveTableColumns");
}
}),new objj_method(sel_getUid("_autosave"),function(self,_193){
with(self){
if(!objj_msgSend(self,"_autosaveEnabled")){
return;
}
var _194=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_195=objj_msgSend(self,"autosaveName");
var _196=objj_msgSend(self,"tableColumns"),_197=[];
for(var i=0;i<objj_msgSend(_196,"count");i++){
var _198=objj_msgSend(_196,"objectAtIndex:",i),_199=objj_msgSend(CPDictionary,"dictionaryWithJSObject:",{"identifier":objj_msgSend(_198,"identifier"),"width":objj_msgSend(_198,"width")});
objj_msgSend(_197,"addObject:",_199);
}
objj_msgSend(_194,"setObject:forKey:",_197,objj_msgSend(self,"_columnsKeyForAutosaveName:",_195));
}
}),new objj_method(sel_getUid("_restoreFromAutosave"),function(self,_19a){
with(self){
if(!objj_msgSend(self,"_autosaveEnabled")){
return;
}
var _19b=objj_msgSend(CPUserDefaults,"standardUserDefaults"),_19c=objj_msgSend(self,"autosaveName"),_19d=objj_msgSend(_19b,"objectForKey:",objj_msgSend(self,"_columnsKeyForAutosaveName:",_19c));
for(var i=0;i<objj_msgSend(_19d,"count");i++){
var _19e=objj_msgSend(_19d,"objectAtIndex:",i),_19f=objj_msgSend(_19e,"objectForKey:","identifier"),_1a0=objj_msgSend(self,"columnWithIdentifier:",_19f),_1a1=objj_msgSend(self,"tableColumnWithIdentifier:",_19f);
objj_msgSend(self,"_moveColumn:toColumn:",_1a0,i);
objj_msgSend(_1a1,"setWidth:",objj_msgSend(_19e,"objectForKey:","width"));
}
}
}),new objj_method(sel_getUid("setDelegate:"),function(self,_1a2,_1a3){
with(self){
if(_delegate===_1a3){
return;
}
var _1a4=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_delegate){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidMove:"))){
objj_msgSend(_1a4,"removeObserver:name:object:",_delegate,CPTableViewColumnDidMoveNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidResize:"))){
objj_msgSend(_1a4,"removeObserver:name:object:",_delegate,CPTableViewColumnDidResizeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionDidChange:"))){
objj_msgSend(_1a4,"removeObserver:name:object:",_delegate,CPTableViewSelectionDidChangeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionIsChanging:"))){
objj_msgSend(_1a4,"removeObserver:name:object:",_delegate,CPTableViewSelectionIsChangingNotification,self);
}
}
_delegate=_1a3;
_implementedDelegateMethods=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("selectionShouldChangeInTableView:"))){
_implementedDelegateMethods|=_9;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:dataViewForTableColumn:row:"))){
_implementedDelegateMethods|=_a;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:didClickTableColumn:"))){
_implementedDelegateMethods|=_b;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:didDragTableColumn:"))){
_implementedDelegateMethods|=_c;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:heightOfRow:"))){
_implementedDelegateMethods|=_d;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:isGroupRow:"))){
_implementedDelegateMethods|=_e;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:mouseDownInHeaderOfTableColumn:"))){
_implementedDelegateMethods|=_f;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:nextTypeSelectMatchFromRow:toRow:forString:"))){
_implementedDelegateMethods|=_10;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:selectionIndexesForProposedSelection:"))){
_implementedDelegateMethods|=_11;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldEditTableColumn:row:"))){
_implementedDelegateMethods|=_12;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldSelectRow:"))){
_implementedDelegateMethods|=_13;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldSelectTableColumn:"))){
_implementedDelegateMethods|=_14;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldShowViewExpansionForTableColumn:row:"))){
_implementedDelegateMethods|=_15;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldTrackView:forTableColumn:row:"))){
_implementedDelegateMethods|=_16;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:shouldTypeSelectForEvent:withCurrentSearchString:"))){
_implementedDelegateMethods|=_17;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:toolTipForView:rect:tableColumn:row:mouseLocation:"))){
_implementedDelegateMethods|=_18;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:typeSelectStringForTableColumn:row:"))){
_implementedDelegateMethods|=_19;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:willDisplayView:forTableColumn:row:"))){
_implementedDelegateMethods|=_1a;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableView:menuForTableColumn:row:"))){
_implementedDelegateMethods|=_1d;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidMove:"))){
objj_msgSend(_1a4,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewColumnDidMove:"),CPTableViewColumnDidMoveNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewColumnDidResize:"))){
objj_msgSend(_1a4,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewColumnDidResize:"),CPTableViewColumnDidResizeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionDidChange:"))){
objj_msgSend(_1a4,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewSelectionDidChange:"),CPTableViewSelectionDidChangeNotification,self);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewSelectionIsChanging:"))){
objj_msgSend(_1a4,"addObserver:selector:name:object:",_delegate,sel_getUid("tableViewSelectionIsChanging:"),CPTableViewSelectionIsChangingNotification,self);
}
}
}),new objj_method(sel_getUid("delegate"),function(self,_1a5){
with(self){
return _delegate;
}
}),new objj_method(sel_getUid("_sendDelegateDidClickColumn:"),function(self,_1a6,_1a7){
with(self){
if(_implementedDelegateMethods&_b){
objj_msgSend(_delegate,"tableView:didClickTableColumn:",self,_tableColumns[_1a7]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDidDragColumn:"),function(self,_1a8,_1a9){
with(self){
if(_implementedDelegateMethods&_c){
objj_msgSend(_delegate,"tableView:didDragTableColumn:",self,_tableColumns[_1a9]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDidMouseDownInHeader:"),function(self,_1aa,_1ab){
with(self){
if(_implementedDelegateMethods&_f){
objj_msgSend(_delegate,"tableView:mouseDownInHeaderOfTableColumn:",self,_tableColumns[_1ab]);
}
}
}),new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"),function(self,_1ac){
with(self){
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tableViewDeleteKeyPressed:"))){
objj_msgSend(_delegate,"tableViewDeleteKeyPressed:",self);
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_sendDataSourceSortDescriptorsDidChange:"),function(self,_1ad,_1ae){
with(self){
if(_implementedDataSourceMethods&_8){
objj_msgSend(_dataSource,"tableView:sortDescriptorsDidChange:",self,_1ae);
}
}
}),new objj_method(sel_getUid("_didClickTableColumn:modifierFlags:"),function(self,_1af,_1b0,_1b1){
with(self){
objj_msgSend(self,"_sendDelegateDidClickColumn:",_1b0);
if(_allowsColumnSelection){
objj_msgSend(self,"_noteSelectionIsChanging");
if(_1b1&CPCommandKeyMask){
if(objj_msgSend(self,"isColumnSelected:",_1b0)){
objj_msgSend(self,"deselectColumn:",_1b0);
}else{
if(objj_msgSend(self,"allowsMultipleSelection")==YES){
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_1b0),YES);
}
}
return;
}else{
if(_1b1&CPShiftKeyMask){
var _1b2=MIN(_1b0,objj_msgSend(_selectedColumnIndexes,"lastIndex")),_1b3=MAX(_1b0,objj_msgSend(_selectedColumnIndexes,"firstIndex"));
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_1b2,_1b3-_1b2+1)),YES);
return;
}else{
objj_msgSend(self,"selectColumnIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_1b0),NO);
}
}
}
objj_msgSend(self,"_changeSortDescriptorsForClickOnColumn:",_1b0);
}
}),new objj_method(sel_getUid("_changeSortDescriptorsForClickOnColumn:"),function(self,_1b4,_1b5){
with(self){
var _1b6=objj_msgSend(_tableColumns,"objectAtIndex:",_1b5),_1b7=objj_msgSend(_1b6,"sortDescriptorPrototype");
if(!_1b7){
return;
}
var _1b8=nil,_1b9=objj_msgSend(self,"sortDescriptors"),_1ba=objj_msgSend(CPArray,"arrayWithArray:",_1b9),e=objj_msgSend(_1ba,"objectEnumerator"),_1bb=nil,_1bc=objj_msgSend(CPArray,"array");
if(objj_msgSend(_sortDescriptors,"count")>0){
_1b8=objj_msgSend(objj_msgSend(self,"sortDescriptors"),"objectAtIndex:",0);
}
while((_1bb=objj_msgSend(e,"nextObject"))!==nil){
if(objj_msgSend(objj_msgSend(_1bb,"key"),"isEqual:",objj_msgSend(_1b7,"key"))){
objj_msgSend(_1bc,"addObject:",_1bb);
}
}
if(objj_msgSend(objj_msgSend(_1b7,"key"),"isEqual:",objj_msgSend(_1b8,"key"))){
_1b7=objj_msgSend(_1b8,"reversedSortDescriptor");
}
objj_msgSend(_1ba,"removeObjectsInArray:",_1bc);
objj_msgSend(_1ba,"insertObject:atIndex:",_1b7,0);
objj_msgSend(self,"setHighlightedTableColumn:",_1b6);
objj_msgSend(self,"setSortDescriptors:",_1ba);
}
}),new objj_method(sel_getUid("setIndicatorImage:inTableColumn:"),function(self,_1bd,_1be,_1bf){
with(self){
if(_1bf){
var _1c0=objj_msgSend(_1bf,"headerView");
if(objj_msgSend(_1c0,"respondsToSelector:",sel_getUid("_setIndicatorImage:"))){
objj_msgSend(_1c0,"_setIndicatorImage:",_1be);
}
}
}
}),new objj_method(sel_getUid("_tableHeaderSortImage"),function(self,_1c1){
with(self){
return objj_msgSend(self,"currentValueForThemeAttribute:","sort-image");
}
}),new objj_method(sel_getUid("_tableHeaderReverseSortImage"),function(self,_1c2){
with(self){
return objj_msgSend(self,"currentValueForThemeAttribute:","sort-image-reversed");
}
}),new objj_method(sel_getUid("highlightedTableColumn"),function(self,_1c3){
with(self){
return _currentHighlightedTableColumn;
}
}),new objj_method(sel_getUid("setHighlightedTableColumn:"),function(self,_1c4,_1c5){
with(self){
if(_currentHighlightedTableColumn==_1c5){
return;
}
if(_headerView){
if(_currentHighlightedTableColumn!=nil){
objj_msgSend(objj_msgSend(_currentHighlightedTableColumn,"headerView"),"unsetThemeState:",CPThemeStateSelected);
}
if(_1c5!=nil){
objj_msgSend(objj_msgSend(_1c5,"headerView"),"setThemeState:",CPThemeStateSelected);
}
}
_currentHighlightedTableColumn=_1c5;
}
}),new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"),function(self,_1c6,_1c7,_1c8){
with(self){
return objj_msgSend(_1c7,"count")>0&&objj_msgSend(self,"numberOfRows")>0;
}
}),new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"),function(self,_1c9,_1ca,_1cb,_1cc,_1cd){
with(self){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:","Frameworks/AppKit/Resources/GenericFile.png",CGSizeMake(32,32));
}
}),new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"),function(self,_1ce,_1cf,_1d0,_1d1,_1d2){
with(self){
var _1d3=objj_msgSend(self,"bounds"),view=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",_1d3);
objj_msgSend(view,"setAlphaValue:",0.7);
var _1d4=objj_msgSend(_1d0,"count");
while(_1d4--){
var _1d5=objj_msgSend(_1d0,"objectAtIndex:",_1d4),row=objj_msgSend(_1cf,"firstIndex");
while(row!==CPNotFound){
var _1d6=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_1d5);
objj_msgSend(_1d6,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_1d4,row));
objj_msgSend(_1d6,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_1d5,row));
objj_msgSend(_1d5,"_prepareDataView:forRow:",_1d6,row);
objj_msgSend(view,"addSubview:",_1d6);
row=objj_msgSend(_1cf,"indexGreaterThanIndex:",row);
}
}
var _1d7=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_1d1,"locationInWindow"),nil);
_1d2.x=(_1d3.size.width)/2-_1d7.x;
_1d2.y=(_1d3.size.height)/2-_1d7.y;
return view;
}
}),new objj_method(sel_getUid("_dragViewForColumn:event:offset:"),function(self,_1d8,_1d9,_1da,_1db){
with(self){
var _1dc=objj_msgSend(objj_msgSend(_CPColumnDragView,"alloc"),"initWithLineColor:",objj_msgSend(self,"gridColor")),_1dd=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_1d9),_1de={origin:{x:0,y:0},size:{width:objj_msgSend(_1dd,"width"),height:(objj_msgSend(self,"exposedRect").size.height)+23}},_1df=objj_msgSend(self,"rectOfColumn:",_1d9),_1e0=objj_msgSend(_1dd,"headerView"),row=objj_msgSend(_exposedRows,"firstIndex");
while(row!==CPNotFound){
var _1e1=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_1dd),_1e2=objj_msgSend(self,"frameOfDataViewAtColumn:row:",_1d9,row);
_1e2.origin.x=0;
_1e2.origin.y=((_1e2.origin.y)-(objj_msgSend(self,"exposedRect").origin.y))+23;
objj_msgSend(_1e1,"setFrame:",_1e2);
objj_msgSend(_1e1,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_1dd,row));
objj_msgSend(_1dc,"addSubview:",_1e1);
row=objj_msgSend(_exposedRows,"indexGreaterThanIndex:",row);
}
var _1e3=objj_msgSend(_1e0,"frame");
_1e3.origin={x:0,y:0};
var _1e4=objj_msgSend(objj_msgSend(_CPTableColumnHeaderView,"alloc"),"initWithFrame:",_1e3);
objj_msgSend(_1e4,"setStringValue:",objj_msgSend(_1e0,"stringValue"));
objj_msgSend(_1e4,"setThemeState:",objj_msgSend(_1e0,"themeState"));
objj_msgSend(_1dc,"addSubview:",_1e4);
objj_msgSend(_1dc,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_1dc,"setAlphaValue:",0.7);
objj_msgSend(_1dc,"setFrame:",_1de);
return _1dc;
}
}),new objj_method(sel_getUid("setDraggingSourceOperationMask:forLocal:"),function(self,_1e5,mask,_1e6){
with(self){
_dragOperationDefaultMask=mask;
}
}),new objj_method(sel_getUid("setDropRow:dropOperation:"),function(self,_1e7,row,_1e8){
with(self){
if(row>objj_msgSend(self,"numberOfRows")&&_1e8===CPTableViewDropOn){
var _1e9=objj_msgSend(self,"numberOfRows")+1,_1ea="Attempt to set dropRow="+row+" dropOperation=CPTableViewDropOn when [0 - "+_1e9+"] is valid range of rows.";
objj_msgSend(objj_msgSend(CPException,"exceptionWithName:reason:userInfo:","Error",_1ea,nil),"raise");
}
_retargetedDropRow=row;
_retargetedDropOperation=_1e8;
}
}),new objj_method(sel_getUid("setDraggingDestinationFeedbackStyle:"),function(self,_1eb,_1ec){
with(self){
_destinationDragStyle=_1ec;
}
}),new objj_method(sel_getUid("draggingDestinationFeedbackStyle"),function(self,_1ed){
with(self){
return _destinationDragStyle;
}
}),new objj_method(sel_getUid("setVerticalMotionCanBeginDrag:"),function(self,_1ee,_1ef){
with(self){
_verticalMotionCanDrag=_1ef;
}
}),new objj_method(sel_getUid("verticalMotionCanBeginDrag"),function(self,_1f0){
with(self){
return _verticalMotionCanDrag;
}
}),new objj_method(sel_getUid("_tableColumnForSortDescriptor:"),function(self,_1f1,_1f2){
with(self){
var _1f3=objj_msgSend(self,"tableColumns");
for(var i=0;i<objj_msgSend(_1f3,"count");i++){
var _1f4=objj_msgSend(_1f3,"objectAtIndex:",i),_1f5=objj_msgSend(_1f4,"sortDescriptorPrototype");
if(!_1f5){
continue;
}
if(objj_msgSend(_1f5,"key")===objj_msgSend(_1f2,"key")&&objj_msgSend(_1f5,"selector")===objj_msgSend(_1f2,"selector")){
return _1f4;
}
}
return nil;
}
}),new objj_method(sel_getUid("setSortDescriptors:"),function(self,_1f6,_1f7){
with(self){
var _1f8=objj_msgSend(objj_msgSend(self,"sortDescriptors"),"copy"),_1f9=nil;
if(_1f7==nil){
_1f9=objj_msgSend(CPArray,"array");
}else{
_1f9=objj_msgSend(CPArray,"arrayWithArray:",_1f7);
}
if(objj_msgSend(_1f9,"isEqual:",_1f8)){
return;
}
_sortDescriptors=_1f9;
var _1fa=nil,_1fb=nil;
if(objj_msgSend(_1f9,"count")>0){
var _1fc=objj_msgSend(_1f9,"objectAtIndex:",0);
_1fb=objj_msgSend(self,"_tableColumnForSortDescriptor:",_1fc);
}
if(objj_msgSend(_1f8,"count")>0){
var _1fd=objj_msgSend(_1f8,"objectAtIndex:",0);
_1fa=objj_msgSend(self,"_tableColumnForSortDescriptor:",_1fd);
}
var _1fe=objj_msgSend(_1fc,"ascending")?objj_msgSend(self,"_tableHeaderSortImage"):objj_msgSend(self,"_tableHeaderReverseSortImage");
objj_msgSend(self,"setIndicatorImage:inTableColumn:",nil,_1fa);
objj_msgSend(self,"setIndicatorImage:inTableColumn:",_1fe,_1fb);
objj_msgSend(self,"_sendDataSourceSortDescriptorsDidChange:",_1f8);
var _1ff=objj_msgSend(objj_msgSend(self,"class"),"_binderClassForBinding:","sortDescriptors");
objj_msgSend(objj_msgSend(_1ff,"getBinding:forObject:","sortDescriptors",self),"reverseSetValueFor:","sortDescriptors");
}
}),new objj_method(sel_getUid("sortDescriptors"),function(self,_200){
with(self){
return _sortDescriptors;
}
}),new objj_method(sel_getUid("_objectValueForTableColumn:row:"),function(self,_201,_202,_203){
with(self){
var _204=objj_msgSend(_202,"UID"),_205=_objectValues[_204];
if(!_205){
_205=[];
_objectValues[_204]=_205;
}
var _206=_205[_203];
if(_206===undefined){
if(_implementedDataSourceMethods&_2){
_206=objj_msgSend(_dataSource,"tableView:objectValueForTableColumn:row:",self,_202,_203);
_205[_203]=_206;
}else{
if(!objj_msgSend(self,"infoForBinding:","content")){
CPLog("no content binding established and data source "+objj_msgSend(_dataSource,"description")+" does not implement tableView:objectValueForTableColumn:row:");
}
}
}
return _206;
}
}),new objj_method(sel_getUid("exposedRect"),function(self,_207){
with(self){
if(!_exposedRect){
var _208=objj_msgSend(self,"superview");
if(objj_msgSend(_208,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
_exposedRect=objj_msgSend(_208,"bounds");
}else{
_exposedRect=objj_msgSend(self,"bounds");
}
}
return _exposedRect;
}
}),new objj_method(sel_getUid("load"),function(self,_209){
with(self){
if(_reloadAllRows){
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_exposedRows,_exposedColumns);
_exposedRows=objj_msgSend(CPIndexSet,"indexSet");
_exposedColumns=objj_msgSend(CPIndexSet,"indexSet");
_reloadAllRows=NO;
}
var _20a=objj_msgSend(self,"exposedRect"),_20b=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",objj_msgSend(self,"rowsInRect:",_20a)),_20c=objj_msgSend(self,"columnIndexesInRect:",_20a),_20d=objj_msgSend(_exposedRows,"copy"),_20e=objj_msgSend(_exposedColumns,"copy");
objj_msgSend(_20d,"removeIndexes:",_20b);
objj_msgSend(_20e,"removeIndexes:",_20c);
var _20f=objj_msgSend(_20b,"copy"),_210=objj_msgSend(_20c,"copy");
objj_msgSend(_20f,"removeIndexes:",_exposedRows);
objj_msgSend(_210,"removeIndexes:",_exposedColumns);
var _211=objj_msgSend(_20b,"copy"),_212=objj_msgSend(_20c,"copy");
objj_msgSend(_211,"removeIndexes:",_20f);
objj_msgSend(_212,"removeIndexes:",_210);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_211,_20e);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_20d,_212);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_20d,_20e);
objj_msgSend(self,"_unloadDataViewsInRows:columns:",_20f,_210);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_211,_210);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_20f,_212);
objj_msgSend(self,"_loadDataViewsInRows:columns:",_20f,_210);
_exposedRows=_20b;
_exposedColumns=_20c;
objj_msgSend(_tableDrawView,"setFrame:",_20a);
objj_msgSend(self,"setNeedsDisplay:",YES);
for(var _213 in _cachedDataViews){
var _214=_cachedDataViews[_213],_215=_214.length;
while(_215--){
objj_msgSend(_214[_215],"removeFromSuperview");
}
}
if(objj_msgSend(_differedColumnDataToRemove,"count")){
for(var i=0;i<_differedColumnDataToRemove.length;i++){
var data=_differedColumnDataToRemove[i],_216=data.column;
objj_msgSend(_216,"setHidden:",data.shouldBeHidden);
objj_msgSend(_tableColumns,"removeObject:",_216);
}
objj_msgSend(_differedColumnDataToRemove,"removeAllObjects");
}
}
}),new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"),function(self,_217,rows,_218){
with(self){
if(!objj_msgSend(rows,"count")||!objj_msgSend(_218,"count")){
return;
}
var _219=[],_21a=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_219,-1,nil);
objj_msgSend(_218,"getIndexes:maxCount:inIndexRange:",_21a,-1,nil);
var _21b=0,_21c=_21a.length;
for(;_21b<_21c;++_21b){
var _21d=_21a[_21b],_21e=_tableColumns[_21d],_21f=objj_msgSend(_21e,"UID"),_220=0,_221=_219.length;
for(;_220<_221;++_220){
var row=_219[_220],_222=_dataViewsForTableColumns[_21f];
if(!_222||row>=_222.length){
continue;
}
var _223=objj_msgSend(_222,"objectAtIndex:",row);
objj_msgSend(_222,"replaceObjectAtIndex:withObject:",row,nil);
objj_msgSend(self,"_enqueueReusableDataView:",_223);
}
}
}
}),new objj_method(sel_getUid("_loadDataViewsInRows:columns:"),function(self,_224,rows,_225){
with(self){
if(!objj_msgSend(rows,"count")||!objj_msgSend(_225,"count")){
return;
}
var _226=[],_227=[],_228=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_226,-1,nil);
objj_msgSend(_225,"getIndexes:maxCount:inIndexRange:",_228,-1,nil);
if(_dirtyTableColumnRangeIndex!==CPNotFound){
objj_msgSend(self,"_recalculateTableColumnRanges");
}
var _229=0,_22a=_228.length;
for(;_229<_22a;++_229){
var _22b=_228[_229],_22c=_tableColumns[_22b];
if(objj_msgSend(_22c,"isHidden")||_22c===_draggedColumn){
continue;
}
var _22d=objj_msgSend(_22c,"UID");
if(!_dataViewsForTableColumns[_22d]){
_dataViewsForTableColumns[_22d]=[];
}
var _22e=0,_22f=_226.length,_230=objj_msgSend(_selectedColumnIndexes,"containsIndex:",_22b);
for(;_22e<_22f;++_22e){
var row=_226[_22e],_231=objj_msgSend(self,"_newDataViewForRow:tableColumn:",row,_22c),_232=objj_msgSend(_231,"isKindOfClass:",objj_msgSend(CPButton,"class")),_233=objj_msgSend(_231,"isKindOfClass:",objj_msgSend(CPTextField,"class"));
objj_msgSend(_231,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_22b,row));
objj_msgSend(_231,"setObjectValue:",objj_msgSend(self,"_objectValueForTableColumn:row:",_22c,row));
objj_msgSend(_22c,"_prepareDataView:forRow:",_231,row);
if(_230||objj_msgSend(self,"isRowSelected:",row)){
objj_msgSend(_231,"setThemeState:",CPThemeStateSelectedDataView);
}else{
objj_msgSend(_231,"unsetThemeState:",CPThemeStateSelectedDataView);
}
if(_implementedDelegateMethods&_e){
if(objj_msgSend(_delegate,"tableView:isGroupRow:",self,row)){
objj_msgSend(_groupRows,"addIndex:",row);
objj_msgSend(_231,"setThemeState:",CPThemeStateGroupRow);
}else{
objj_msgSend(_groupRows,"removeIndexesInRange:",CPMakeRange(row,1));
objj_msgSend(_231,"unsetThemeState:",CPThemeStateGroupRow);
}
objj_msgSend(self,"setNeedsDisplay:",YES);
}
if(_implementedDelegateMethods&_1a){
objj_msgSend(_delegate,"tableView:willDisplayView:forTableColumn:row:",self,_231,_22c,row);
}
if(objj_msgSend(_231,"superview")!==self){
objj_msgSend(self,"addSubview:",_231);
}
_dataViewsForTableColumns[_22d][row]=_231;
if(_232||(_editingCellIndex&&_editingCellIndex.x===_22b&&_editingCellIndex.y===row)){
if(_233){
objj_msgSend(_231,"setEditable:",YES);
objj_msgSend(_231,"setSendsActionOnEndEditing:",YES);
objj_msgSend(_231,"setSelectable:",YES);
objj_msgSend(_231,"selectText:",nil);
objj_msgSend(_231,"setBezeled:",YES);
objj_msgSend(_231,"setDelegate:",self);
}
objj_msgSend(_231,"setTarget:",self);
objj_msgSend(_231,"setAction:",sel_getUid("_commitDataViewObjectValue:"));
_231.tableViewEditedColumnObj=_22c;
_231.tableViewEditedRowIndex=row;
}else{
if(_233){
objj_msgSend(_231,"setEditable:",NO);
objj_msgSend(_231,"setSelectable:",NO);
}
}
}
}
}
}),new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"),function(self,_234,rows,_235){
with(self){
var _236=[],_237=[];
objj_msgSend(rows,"getIndexes:maxCount:inIndexRange:",_236,-1,nil);
objj_msgSend(_235,"getIndexes:maxCount:inIndexRange:",_237,-1,nil);
var _238=0,_239=_237.length;
for(;_238<_239;++_238){
var _23a=_237[_238],_23b=_tableColumns[_23a],_23c=objj_msgSend(_23b,"UID"),_23d=_dataViewsForTableColumns[_23c],_23e=0,_23f=_236.length;
for(;_23e<_23f;++_23e){
var row=_236[_23e],_240=_23d[row];
objj_msgSend(_240,"setFrame:",objj_msgSend(self,"frameOfDataViewAtColumn:row:",_23a,row));
}
}
}
}),new objj_method(sel_getUid("_commitDataViewObjectValue:"),function(self,_241,_242){
with(self){
if(_editingCellIndex===nil){
return;
}
_editingCellIndex=nil;
if(_implementedDataSourceMethods&_3){
objj_msgSend(_dataSource,"tableView:setObjectValue:forTableColumn:row:",self,objj_msgSend(_242,"objectValue"),_242.tableViewEditedColumnObj,_242.tableViewEditedRowIndex);
}
objj_msgSend(_242.tableViewEditedColumnObj,"_reverseSetDataView:forRow:",_242,_242.tableViewEditedRowIndex);
if(objj_msgSend(_242,"respondsToSelector:",sel_getUid("setEditable:"))){
objj_msgSend(_242,"setEditable:",NO);
}
if(objj_msgSend(_242,"respondsToSelector:",sel_getUid("setSelectable:"))){
objj_msgSend(_242,"setSelectable:",NO);
}
if(objj_msgSend(_242,"isKindOfClass:",objj_msgSend(CPTextField,"class"))){
objj_msgSend(_242,"setBezeled:",NO);
}
objj_msgSend(self,"reloadDataForRowIndexes:columnIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_242.tableViewEditedRowIndex),objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_tableColumns,"indexOfObject:",_242.tableViewEditedColumnObj)));
objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",self);
}
}),new objj_method(sel_getUid("controlTextDidBlur:"),function(self,_243,_244){
with(self){
var _245=objj_msgSend(_244,"object");
if(objj_msgSend(_245,"respondsToSelector:",sel_getUid("setEditable:"))){
objj_msgSend(_245,"setEditable:",NO);
}
if(objj_msgSend(_245,"respondsToSelector:",sel_getUid("setSelectable:"))){
objj_msgSend(_245,"setSelectable:",NO);
}
if(objj_msgSend(_245,"isKindOfClass:",objj_msgSend(CPTextField,"class"))){
objj_msgSend(_245,"setBezeled:",NO);
}
_editingCellIndex=nil;
}
}),new objj_method(sel_getUid("_newDataViewForRow:tableColumn:"),function(self,_246,aRow,_247){
with(self){
if((_implementedDelegateMethods&_a)){
var _248=objj_msgSend(_delegate,"tableView:dataViewForTableColumn:row:",self,_247,aRow);
objj_msgSend(_247,"setDataView:",_248);
}
return objj_msgSend(_247,"_newDataViewForRow:",aRow);
}
}),new objj_method(sel_getUid("_enqueueReusableDataView:"),function(self,_249,_24a){
with(self){
if(!_24a){
return;
}
var _24b=_24a.identifier;
if(!_cachedDataViews[_24b]){
_cachedDataViews[_24b]=[_24a];
}else{
_cachedDataViews[_24b].push(_24a);
}
}
}),new objj_method(sel_getUid("setFrameSize:"),function(self,_24c,_24d){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setFrameSize:",_24d);
if(_headerView){
objj_msgSend(_headerView,"setFrameSize:",{width:(objj_msgSend(self,"frame").size.width),height:(objj_msgSend(_headerView,"frame").size.height)});
}
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(self,_24e,_24f){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setFrameOrigin:",_24f);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(self,_250,_251){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setBoundsOrigin:",_251);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setBoundsSize:"),function(self,_252,_253){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setBoundsSize:",_253);
_exposedRect=nil;
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(self,_254,_255){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setNeedsDisplay:",_255);
objj_msgSend(_tableDrawView,"setNeedsDisplay:",_255);
objj_msgSend(objj_msgSend(self,"headerView"),"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setNeedsLayout"),function(self,_256){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"setNeedsLayout");
objj_msgSend(objj_msgSend(self,"headerView"),"setNeedsLayout");
}
}),new objj_method(sel_getUid("_drawRect:"),function(self,_257,_258){
with(self){
var _259=objj_msgSend(self,"exposedRect");
objj_msgSend(self,"drawBackgroundInClipRect:",_259);
objj_msgSend(self,"highlightSelectionInClipRect:",_259);
objj_msgSend(self,"drawGridInClipRect:",_259);
if(_implementsCustomDrawRow){
objj_msgSend(self,"_drawRows:clipRect:",_exposedRows,_259);
}
}
}),new objj_method(sel_getUid("drawBackgroundInClipRect:"),function(self,_25a,_25b){
with(self){
if(!_usesAlternatingRowBackgroundColors){
return;
}
var _25c=objj_msgSend(self,"alternatingRowBackgroundColors"),_25d=objj_msgSend(_25c,"count");
if(_25d===0){
return;
}
var _25e=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
if(_25d===1){
CGContextSetFillColor(_25e,_25c[0]);
CGContextFillRect(_25e,_25b);
return;
}
var _25f=objj_msgSend(self,"_unboundedRowsInRect:",_25b),_260=FLOOR(_25f.location/_25d)*_25d,_261=CPMaxRange(_25f),_262=0,_263=[];
while(_262<_25d){
CGContextBeginPath(_25e);
for(var row=_260+_262;row<=_261;row+=_25d){
if(!objj_msgSend(_groupRows,"containsIndex:",row)){
CGContextAddRect(_25e,CGRectIntersection(_25b,objj_msgSend(self,"_rectOfRow:checkRange:",row,NO)));
}else{
_263.push(CGRectIntersection(_25b,objj_msgSend(self,"_rectOfRow:checkRange:",row,NO)));
}
}
CGContextClosePath(_25e);
CGContextSetFillColor(_25e,_25c[_262]);
CGContextFillPath(_25e);
_262++;
}
objj_msgSend(self,"_drawGroupRowsForRects:",_263);
}
}),new objj_method(sel_getUid("drawGridInClipRect:"),function(self,_264,_265){
with(self){
var _266=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_267=objj_msgSend(self,"gridStyleMask");
if(!(_267&(CPTableViewSolidHorizontalGridLineMask|CPTableViewSolidVerticalGridLineMask))){
return;
}
CGContextBeginPath(_266);
if(_267&CPTableViewSolidHorizontalGridLineMask){
var _268=objj_msgSend(self,"_unboundedRowsInRect:",_265),row=_268.location,_269=CPMaxRange(_268)-1,rowY=-0.5,minX=(_265.origin.x),maxX=(_265.origin.x+_265.size.width);
for(;row<=_269;++row){
var _26a=objj_msgSend(self,"_rectOfRow:checkRange:",row,NO),rowY=(_26a.origin.y+_26a.size.height)-0.5;
CGContextMoveToPoint(_266,minX,rowY);
CGContextAddLineToPoint(_266,maxX,rowY);
}
if(_rowHeight>0){
var _26b=_rowHeight+_intercellSpacing.height,_26c=(_265.origin.y+_265.size.height);
while(rowY<_26c){
rowY+=_26b;
CGContextMoveToPoint(_266,minX,rowY);
CGContextAddLineToPoint(_266,maxX,rowY);
}
}
}
if(_267&CPTableViewSolidVerticalGridLineMask){
var _26d=objj_msgSend(self,"columnIndexesInRect:",_265),_26e=[];
objj_msgSend(_26d,"getIndexes:maxCount:inIndexRange:",_26e,-1,nil);
var _26f=0,_270=_26e.length,minY=(_265.origin.y),maxY=(_265.origin.y+_265.size.height);
for(;_26f<_270;++_26f){
var _271=objj_msgSend(self,"rectOfColumn:",_26e[_26f]),_272=(_271.origin.x+_271.size.width)-0.5;
CGContextMoveToPoint(_266,_272,minY);
CGContextAddLineToPoint(_266,_272,maxY);
}
}
CGContextClosePath(_266);
CGContextSetStrokeColor(_266,objj_msgSend(self,"gridColor"));
CGContextStrokePath(_266);
}
}),new objj_method(sel_getUid("highlightSelectionInClipRect:"),function(self,_273,_274){
with(self){
if(_selectionHighlightStyle===CPTableViewSelectionHighlightStyleNone){
return;
}
var _275=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_276=[],_277=sel_getUid("rectOfRow:");
if(objj_msgSend(_selectedRowIndexes,"count")>=1){
var _278=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",objj_msgSend(self,"rowsInRect:",_274)),_279=objj_msgSend(_278,"firstIndex"),_27a=CPMakeRange(_279,objj_msgSend(_278,"lastIndex")-_279+1);
objj_msgSend(_selectedRowIndexes,"getIndexes:maxCount:inIndexRange:",_276,-1,_27a);
}else{
if(objj_msgSend(_selectedColumnIndexes,"count")>=1){
_277=sel_getUid("rectOfColumn:");
var _27b=objj_msgSend(self,"columnIndexesInRect:",_274),_27c=objj_msgSend(_27b,"firstIndex"),_27a=CPMakeRange(_27c,objj_msgSend(_27b,"lastIndex")-_27c+1);
objj_msgSend(_selectedColumnIndexes,"getIndexes:maxCount:inIndexRange:",_276,-1,_27a);
}
}
var _27d,_27e=_27d=objj_msgSend(_276,"count");
if(!_27d){
return;
}
var _27f=(CPFeatureIsCompatible(CPHTMLCanvasFeature)&&_selectionHighlightStyle===CPTableViewSelectionHighlightStyleSourceList&&objj_msgSend(_selectedRowIndexes,"count")>=1),_280=0.5*(_gridStyleMask&CPTableViewSolidHorizontalGridLineMask);
CGContextBeginPath(_275);
if(_27f){
var _281=objj_msgSend(self,"selectionGradientColors"),_282=objj_msgSend(_281,"objectForKey:",CPSourceListTopLineColor),_283=objj_msgSend(_281,"objectForKey:",CPSourceListBottomLineColor),_284=objj_msgSend(_281,"objectForKey:",CPSourceListGradient);
}
var _285=objj_msgSend(self,"selectionHighlightColor");
if(objj_msgSend(_groupRows,"count")){
var _286=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",212/255,1),_287=objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",185/255,1),_288=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[212/255,212/255,212/255,1,197/255,197/255,197/255,1],[0,1],2);
}
while(_27d--){
var _289=_276[_27d],_28a=CGRectIntersection(objj_msgSend(self,_277,_289),_274);
if(!_27f){
var _28b=objj_msgSend(_groupRows,"containsIndex:",_289);
}
if(_27f||_28b){
var minX=(_28a.origin.x),minY=(_28a.origin.y),maxX=(_28a.origin.x+_28a.size.width),maxY=(_28a.origin.y+_28a.size.height)-_280;
if(!_27f){
objj_msgSend(_285,"setFill");
CGContextClosePath(_275);
CGContextFillPath(_275);
CGContextBeginPath(_275);
}
CGContextAddRect(_275,_28a);
CGContextDrawLinearGradient(_275,(_28b)?_288:_284,_28a.origin,{x:minX,y:maxY},0);
CGContextClosePath(_275);
CGContextBeginPath(_275);
CGContextMoveToPoint(_275,minX,minY+0.5);
CGContextAddLineToPoint(_275,maxX,minY+0.5);
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,(_28b)?_286:_282);
CGContextStrokePath(_275);
CGContextBeginPath(_275);
CGContextMoveToPoint(_275,minX,maxY-0.5);
CGContextAddLineToPoint(_275,maxX,maxY-0.5);
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,(_28b)?_287:_283);
CGContextStrokePath(_275);
}else{
var _28c=objj_msgSend(self,"currentValueForThemeAttribute:","selection-radius");
if(_28c>0){
var minX=CGRectGetMinX(_28a),maxX=CGRectGetMaxX(_28a),minY=CGRectGetMinY(_28a),maxY=CGRectGetMaxY(_28a);
CGContextMoveToPoint(_275,minX+_28c,minY);
CGContextAddArcToPoint(_275,maxX,minY,maxX,minY+_28c,_28c);
CGContextAddArcToPoint(_275,maxX,maxY,maxX-_28c,maxY,_28c);
CGContextAddArcToPoint(_275,minX,maxY,minX,maxY-_28c,_28c);
CGContextAddArcToPoint(_275,minX,minY,minX+_28c,minY,_28c);
}else{
CGContextAddRect(_275,_28a);
}
}
}
CGContextClosePath(_275);
if(!_27f){
objj_msgSend(_285,"setFill");
CGContextFillPath(_275);
}
CGContextBeginPath(_275);
var _28d=objj_msgSend(self,"gridStyleMask");
for(var i=0;i<_27e;i++){
var rect=objj_msgSend(self,_277,_276[i]),minX=(rect.origin.x)-0.5,maxX=(rect.origin.x+rect.size.width)-0.5,minY=(rect.origin.y)-0.5,maxY=(rect.origin.y+rect.size.height)-0.5;
if(objj_msgSend(_selectedRowIndexes,"count")>=1&&_28d&CPTableViewSolidVerticalGridLineMask){
var _27b=objj_msgSend(self,"columnIndexesInRect:",_274),_28e=[],_28f=objj_msgSend(_27b,"firstIndex"),_27a=CPMakeRange(_28f,objj_msgSend(_27b,"lastIndex")-_28f+1);
objj_msgSend(_27b,"getIndexes:maxCount:inIndexRange:",_28e,-1,_27a);
var _290=objj_msgSend(_28e,"count");
for(var c=_28f;c<_290;c++){
var _291=objj_msgSend(self,"rectOfColumn:",_28e[c]),colX=(_291.origin.x+_291.size.width)+0.5;
CGContextMoveToPoint(_275,colX,minY);
CGContextAddLineToPoint(_275,colX,maxY);
}
}
if(objj_msgSend(_276,"containsObject:",_276[i]+1)){
CGContextMoveToPoint(_275,minX,maxY);
CGContextAddLineToPoint(_275,maxX,maxY);
}
}
CGContextClosePath(_275);
CGContextSetStrokeColor(_275,objj_msgSend(self,"currentValueForThemeAttribute:","highlighted-grid-color"));
CGContextStrokePath(_275);
}
}),new objj_method(sel_getUid("_drawGroupRowsForRects:"),function(self,_292,_293){
with(self){
if((CPFeatureIsCompatible(CPHTMLCanvasFeature)&&_selectionHighlightStyle===CPTableViewSelectionHighlightStyleSourceList)||!_293.length){
return;
}
var _294=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),i=_293.length;
CGContextBeginPath(_294);
var _295=objj_msgSend(self,"selectionGradientColors"),_296=objj_msgSend(CPColor,"colorWithHexString:","d3d3d3"),_297=objj_msgSend(CPColor,"colorWithHexString:","bebebd"),_298=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[220/255,220/255,220/255,1,199/255,199/255,199/255,1],[0,1],2),_299=YES;
while(i--){
var _29a=_293[i];
CGContextAddRect(_294,_29a);
if(_299){
var minX=CGRectGetMinX(_29a),minY=CGRectGetMinY(_29a),maxX=CGRectGetMaxX(_29a),maxY=CGRectGetMaxY(_29a);
CGContextDrawLinearGradient(_294,_298,_29a.origin,CGPointMake(minX,maxY),0);
CGContextClosePath(_294);
CGContextBeginPath(_294);
CGContextMoveToPoint(_294,minX,minY);
CGContextAddLineToPoint(_294,maxX,minY);
CGContextClosePath(_294);
CGContextSetStrokeColor(_294,_296);
CGContextStrokePath(_294);
CGContextBeginPath(_294);
CGContextMoveToPoint(_294,minX,maxY);
CGContextAddLineToPoint(_294,maxX,maxY-1);
CGContextClosePath(_294);
CGContextSetStrokeColor(_294,_297);
CGContextStrokePath(_294);
}
}
CGContextClosePath(_294);
}
}),new objj_method(sel_getUid("_drawRows:clipRect:"),function(self,_29b,_29c,_29d){
with(self){
var row=objj_msgSend(_29c,"firstIndex");
while(row!==CPNotFound){
objj_msgSend(self,"drawRow:clipRect:",row,CGRectIntersection(_29d,objj_msgSend(self,"rectOfRow:",row)));
row=objj_msgSend(_29c,"indexGreaterThanIndex:",row);
}
}
}),new objj_method(sel_getUid("drawRow:clipRect:"),function(self,_29e,row,rect){
with(self){
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_29f){
with(self){
objj_msgSend(self,"load");
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(self,_2a0,_2a1){
with(self){
var _2a2=objj_msgSend(self,"superview"),_2a3=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_2a2){
objj_msgSend(_2a3,"removeObserver:name:object:",self,CPViewFrameDidChangeNotification,_2a2);
objj_msgSend(_2a3,"removeObserver:name:object:",self,CPViewBoundsDidChangeNotification,_2a2);
}
if(objj_msgSend(_2a1,"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
objj_msgSend(_2a1,"setPostsFrameChangedNotifications:",YES);
objj_msgSend(_2a1,"setPostsBoundsChangedNotifications:",YES);
objj_msgSend(_2a3,"addObserver:selector:name:object:",self,sel_getUid("superviewFrameChanged:"),CPViewFrameDidChangeNotification,_2a1);
objj_msgSend(_2a3,"addObserver:selector:name:object:",self,sel_getUid("superviewBoundsChanged:"),CPViewBoundsDidChangeNotification,_2a1);
}
}
}),new objj_method(sel_getUid("superviewBoundsChanged:"),function(self,_2a4,_2a5){
with(self){
_exposedRect=nil;
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("superviewFrameChanged:"),function(self,_2a6,_2a7){
with(self){
_exposedRect=nil;
objj_msgSend(self,"tile");
}
}),new objj_method(sel_getUid("tracksMouseOutsideOfFrame"),function(self,_2a8){
with(self){
return YES;
}
}),new objj_method(sel_getUid("startTrackingAt:"),function(self,_2a9,_2aa){
with(self){
if(!objj_msgSend(objj_msgSend(self,"window"),"makeFirstResponder:",self)){
return NO;
}
var row=objj_msgSend(self,"rowAtPoint:",_2aa);
if(row<0&&_allowsEmptySelection){
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSet"),NO);
}
objj_msgSend(self,"_noteSelectionIsChanging");
if(objj_msgSend(self,"mouseDownFlags")&CPShiftKeyMask){
_selectionAnchorRow=(ABS(objj_msgSend(_selectedRowIndexes,"firstIndex")-row)<ABS(objj_msgSend(_selectedRowIndexes,"lastIndex")-row))?objj_msgSend(_selectedRowIndexes,"firstIndex"):objj_msgSend(_selectedRowIndexes,"lastIndex");
}else{
_selectionAnchorRow=row;
}
_startTrackingPoint=_2aa;
_startTrackingTimestamp=new Date();
if(_implementedDataSourceMethods&_3){
_trackingPointMovedOutOfClickSlop=NO;
}
if(row>=0&&!(_implementedDataSourceMethods&_7)){
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",row);
}
return YES;
}
}),new objj_method(sel_getUid("menuForEvent:"),function(self,_2ab,_2ac){
with(self){
if(!(_implementedDelegateMethods&_1d)){
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"menuForEvent:",_2ac);
}
var _2ad=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2ac,"locationInWindow"),nil),row=objj_msgSend(self,"rowAtPoint:",_2ad),_2ae=objj_msgSend(self,"columnAtPoint:",_2ad),_2af=objj_msgSend(objj_msgSend(self,"tableColumns"),"objectAtIndex:",_2ae);
return objj_msgSend(_delegate,"tableView:menuForTableColumn:row:",self,_2af,row);
}
}),new objj_method(sel_getUid("trackMouse:"),function(self,_2b0,_2b1){
with(self){
if(!objj_msgSend(_draggedRowIndexes,"count")){
objj_msgSend(self,"autoscroll:",_2b1);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"trackMouse:",_2b1);
}else{
objj_msgSend(CPApp,"sendEvent:",_2b1);
}
}
}),new objj_method(sel_getUid("continueTracking:at:"),function(self,_2b2,_2b3,_2b4){
with(self){
var row=objj_msgSend(self,"rowAtPoint:",_2b4);
if(!_isSelectingSession&&_implementedDataSourceMethods&_7){
if(row>=0&&(ABS(_startTrackingPoint.x-_2b4.x)>3||(_verticalMotionCanDrag&&ABS(_startTrackingPoint.y-_2b4.y)>3))||(objj_msgSend(_selectedRowIndexes,"containsIndex:",row))){
if(objj_msgSend(_selectedRowIndexes,"containsIndex:",row)){
_draggedRowIndexes=objj_msgSend(objj_msgSend(CPIndexSet,"alloc"),"initWithIndexSet:",_selectedRowIndexes);
}else{
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSetWithIndex:",row);
}
var _2b5=objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard);
if(objj_msgSend(self,"canDragRowsWithIndexes:atPoint:",_draggedRowIndexes,_2b4)&&objj_msgSend(_dataSource,"tableView:writeRowsWithIndexes:toPasteboard:",self,_draggedRowIndexes,_2b5)){
var _2b6=objj_msgSend(CPApp,"currentEvent"),_2b7=CPPointMakeZero(),_2b8=objj_msgSend(_tableColumns,"objectsAtIndexes:",_exposedColumns);
var view=objj_msgSend(self,"dragViewForRowsWithIndexes:tableColumns:event:offset:",_draggedRowIndexes,_2b8,_2b6,_2b7);
if(!view){
var _2b9=objj_msgSend(self,"dragImageForRowsWithIndexes:tableColumns:event:offset:",_draggedRowIndexes,_2b8,_2b6,_2b7);
view=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CPMakeRect(0,0,objj_msgSend(_2b9,"size").width,objj_msgSend(_2b9,"size").height));
objj_msgSend(view,"setImage:",_2b9);
}
var _2ba=objj_msgSend(view,"bounds"),_2bb=CPPointMake(_2b4.x-CGRectGetWidth(_2ba)/2+_2b7.x,_2b4.y-CGRectGetHeight(_2ba)/2+_2b7.y);
objj_msgSend(self,"dragView:at:offset:event:pasteboard:source:slideBack:",view,_2bb,CPPointMakeZero(),objj_msgSend(CPApp,"currentEvent"),_2b5,self,YES);
_startTrackingPoint=nil;
return NO;
}
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
}else{
if(ABS(_startTrackingPoint.x-_2b4.x)<5&&ABS(_startTrackingPoint.y-_2b4.y)<5){
return YES;
}
}
}
_isSelectingSession=YES;
if(row>=0&&row!==_lastTrackedRowIndex){
_lastTrackedRowIndex=row;
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",row);
}
if((_implementedDataSourceMethods&_3)&&!_trackingPointMovedOutOfClickSlop){
var _2bc=5;
if(ABS(_2b4.x-_startTrackingPoint.x)>_2bc||ABS(_2b4.y-_startTrackingPoint.y)>_2bc){
_trackingPointMovedOutOfClickSlop=YES;
}
}
return YES;
}
}),new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"),function(self,_2bd,_2be,_2bf,_2c0){
with(self){
if(objj_msgSend(objj_msgSend(self,"window"),"firstResponder")!==self){
return;
}
_isSelectingSession=NO;
var _2c1=1000,_2c2,_2c3,_2c4,_2c5=YES;
if(_implementedDataSourceMethods&_7){
_2c4=objj_msgSend(self,"rowAtPoint:",_2bf);
if(_2c4!==-1){
if(objj_msgSend(_draggedRowIndexes,"count")>0){
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
return;
}
_previouslySelectedRowIndexes=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(self,"_updateSelectionWithMouseAtRow:",_2c4);
}
}
if(_2c0&&!_trackingPointMovedOutOfClickSlop&&(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"clickCount")>1)&&((_implementedDataSourceMethods&_3)||objj_msgSend(self,"infoForBinding:","content"))){
_2c2=objj_msgSend(self,"columnAtPoint:",_2be);
if(_2c2!==-1){
_2c3=_tableColumns[_2c2];
if(objj_msgSend(_2c3,"isEditable")){
_2c4=objj_msgSend(self,"rowAtPoint:",_2bf);
if(_2c4!==-1){
if(_implementedDelegateMethods&_12){
_2c5=objj_msgSend(_delegate,"tableView:shouldEditTableColumn:row:",self,_2c3,_2c4);
}
if(_2c5){
objj_msgSend(self,"editColumn:row:withEvent:select:",_2c2,_2c4,nil,YES);
return;
}
}
}
}
}
if(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"clickCount")===2&&_doubleAction){
_clickedRow=objj_msgSend(self,"rowAtPoint:",_2bf);
objj_msgSend(self,"sendAction:to:",_doubleAction,_target);
}
}
}),new objj_method(sel_getUid("draggingEntered:"),function(self,_2c6,_2c7){
with(self){
var _2c8=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2c7,"draggingLocation"),nil),_2c9=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2c8),row=objj_msgSend(self,"_proposedRowAtPoint:",_2c8);
if(_retargetedDropRow!==nil){
row=_retargetedDropRow;
}
var _2ca=objj_msgSend(self,"registeredDraggedTypes"),_2cb=objj_msgSend(_2ca,"count"),i=0;
for(;i<_2cb;i++){
if(objj_msgSend(objj_msgSend(objj_msgSend(_2c7,"draggingPasteboard"),"types"),"containsObject:",objj_msgSend(_2ca,"objectAtIndex:",i))){
return objj_msgSend(self,"_validateDrop:proposedRow:proposedDropOperation:",_2c7,row,_2c9);
}
}
return CPDragOperationNone;
}
}),new objj_method(sel_getUid("draggingExited:"),function(self,_2cc,_2cd){
with(self){
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
}
}),new objj_method(sel_getUid("draggingEnded:"),function(self,_2ce,_2cf){
with(self){
objj_msgSend(self,"_draggingEnded");
}
}),new objj_method(sel_getUid("_draggingEnded"),function(self,_2d0){
with(self){
_retargetedDropOperation=nil;
_retargetedDropRow=nil;
_draggedRowIndexes=objj_msgSend(CPIndexSet,"indexSet");
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
}
}),new objj_method(sel_getUid("wantsPeriodicDraggingUpdates"),function(self,_2d1){
with(self){
return YES;
}
}),new objj_method(sel_getUid("_proposedDropOperationAtPoint:"),function(self,_2d2,_2d3){
with(self){
if(_retargetedDropOperation!==nil){
return _retargetedDropOperation;
}
var row=objj_msgSend(self,"_proposedRowAtPoint:",_2d3),_2d4=objj_msgSend(self,"rectOfRow:",row);
if(objj_msgSend(self,"intercellSpacing").height<5){
_2d4=CPRectInset(_2d4,0,5-objj_msgSend(self,"intercellSpacing").height);
}
if(CGRectContainsPoint(_2d4,_2d3)&&row<_numberOfRows){
return CPTableViewDropOn;
}
return CPTableViewDropAbove;
}
}),new objj_method(sel_getUid("_proposedRowAtPoint:"),function(self,_2d5,_2d6){
with(self){
var row=objj_msgSend(self,"rowAtPoint:",_2d6),_2d7=row+1,rect=objj_msgSend(self,"rectOfRow:",row),_2d8=(rect.origin.y+rect.size.height),_2d9=_2d8-((_2d8-(rect.origin.y))*0.3),_2da=objj_msgSend(self,"numberOfRows");
if(row<0){
row=((rect.origin.y+rect.size.height)<_2d6.y)?_2da:row;
}else{
if(_2d6.y>MAX(_2d9,_2d8-6)){
row=_2d7;
}
}
row=MIN(_2da,row);
return row;
}
}),new objj_method(sel_getUid("_validateDrop:proposedRow:proposedDropOperation:"),function(self,_2db,info,row,_2dc){
with(self){
if(_implementedDataSourceMethods&_6){
return objj_msgSend(_dataSource,"tableView:validateDrop:proposedRow:proposedDropOperation:",self,info,row,_2dc);
}
return CPDragOperationNone;
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewOnRow:"),function(self,_2dd,_2de){
with(self){
if(_2de>=objj_msgSend(self,"numberOfRows")){
_2de=objj_msgSend(self,"numberOfRows")-1;
}
return objj_msgSend(self,"_rectOfRow:checkRange:",_2de,NO);
}
}),new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"),function(self,_2df,_2e0,_2e1,_2e2){
with(self){
if(_2e1>objj_msgSend(self,"numberOfRows")){
_2e1=objj_msgSend(self,"numberOfRows");
}
return objj_msgSend(self,"_rectOfRow:checkRange:",_2e1,NO);
}
}),new objj_method(sel_getUid("draggingUpdated:"),function(self,_2e3,_2e4){
with(self){
_retargetedDropRow=nil;
_retargetedDropOperation=nil;
var _2e5=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2e4,"draggingLocation"),nil),_2e6=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2e5),_2e7=objj_msgSend(self,"numberOfRows"),row=objj_msgSend(self,"_proposedRowAtPoint:",_2e5),_2e8=objj_msgSend(self,"_validateDrop:proposedRow:proposedDropOperation:",_2e4,row,_2e6);
if(_retargetedDropRow!==nil){
row=_retargetedDropRow;
}
if(_retargetedDropOperation!==nil){
_2e6=_retargetedDropOperation;
}
if(_2e6===CPTableViewDropOn&&row>=_2e7){
row=_2e7-1;
}
var rect={origin:{x:0,y:0},size:{width:0,height:0}};
if(row===-1){
rect=objj_msgSend(self,"exposedRect");
}else{
if(_2e6===CPTableViewDropAbove){
rect=objj_msgSend(self,"_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:",row-1,row,_2e5);
}else{
rect=objj_msgSend(self,"_rectForDropHighlightViewOnRow:",row);
}
}
objj_msgSend(_dropOperationFeedbackView,"setDropOperation:",row!==-1?_2e6:CPDragOperationNone);
objj_msgSend(_dropOperationFeedbackView,"setHidden:",(_2e8==CPDragOperationNone));
objj_msgSend(_dropOperationFeedbackView,"setFrame:",rect);
objj_msgSend(_dropOperationFeedbackView,"setCurrentRow:",row);
objj_msgSend(self,"addSubview:",_dropOperationFeedbackView);
return _2e8;
}
}),new objj_method(sel_getUid("prepareForDragOperation:"),function(self,_2e9,_2ea){
with(self){
objj_msgSend(_dropOperationFeedbackView,"removeFromSuperview");
return (_implementedDataSourceMethods&_6);
}
}),new objj_method(sel_getUid("performDragOperation:"),function(self,_2eb,_2ec){
with(self){
var _2ed=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_2ec,"draggingLocation"),nil),_2ee=objj_msgSend(self,"_proposedDropOperationAtPoint:",_2ed),row=_retargetedDropRow;
if(row===nil){
var row=objj_msgSend(self,"_proposedRowAtPoint:",_2ed);
}
return objj_msgSend(_dataSource,"tableView:acceptDrop:row:dropOperation:",self,_2ec,row,_2ee);
}
}),new objj_method(sel_getUid("concludeDragOperation:"),function(self,_2ef,_2f0){
with(self){
objj_msgSend(self,"reloadData");
}
}),new objj_method(sel_getUid("draggedImage:endedAt:operation:"),function(self,_2f1,_2f2,_2f3,_2f4){
with(self){
if(objj_msgSend(_dataSource,"respondsToSelector:",sel_getUid("tableView:didEndDraggedImage:atPosition:operation:"))){
objj_msgSend(_dataSource,"tableView:didEndDraggedImage:atPosition:operation:",self,_2f2,_2f3,_2f4);
}
}
}),new objj_method(sel_getUid("draggedView:endedAt:operation:"),function(self,_2f5,_2f6,_2f7,_2f8){
with(self){
objj_msgSend(self,"_draggingEnded");
objj_msgSend(self,"draggedImage:endedAt:operation:",_2f6,_2f7,_2f8);
}
}),new objj_method(sel_getUid("_updateSelectionWithMouseAtRow:"),function(self,_2f9,aRow){
with(self){
if(aRow<0){
return;
}
var _2fa,_2fb=NO;
if(objj_msgSend(self,"mouseDownFlags")&(CPCommandKeyMask|CPControlKeyMask|CPAlternateKeyMask)){
if(objj_msgSend(_selectedRowIndexes,"containsIndex:",aRow)){
_2fa=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_2fa,"removeIndex:",aRow);
}else{
if(_allowsMultipleSelection){
_2fa=objj_msgSend(_selectedRowIndexes,"copy");
objj_msgSend(_2fa,"addIndex:",aRow);
}else{
_2fa=objj_msgSend(CPIndexSet,"indexSetWithIndex:",aRow);
}
}
}else{
if(_allowsMultipleSelection){
_2fa=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(MIN(aRow,_selectionAnchorRow),ABS(aRow-_selectionAnchorRow)+1));
_2fb=objj_msgSend(self,"mouseDownFlags")&CPShiftKeyMask&&((_lastSelectedRow==objj_msgSend(_selectedRowIndexes,"lastIndex")&&aRow>_lastSelectedRow)||(_lastSelectedRow==objj_msgSend(_selectedRowIndexes,"firstIndex")&&aRow<_lastSelectedRow));
}else{
if(aRow>=0&&aRow<_numberOfRows){
_2fa=objj_msgSend(CPIndexSet,"indexSetWithIndex:",aRow);
}else{
_2fa=objj_msgSend(CPIndexSet,"indexSet");
}
}
}
if(objj_msgSend(_2fa,"isEqualToIndexSet:",_selectedRowIndexes)){
return;
}
if(_implementedDelegateMethods&_9&&!objj_msgSend(_delegate,"selectionShouldChangeInTableView:",self)){
return;
}
if(_implementedDelegateMethods&_11){
_2fa=objj_msgSend(_delegate,"tableView:selectionIndexesForProposedSelection:",self,_2fa);
}
if(_implementedDelegateMethods&_13){
var _2fc=[];
objj_msgSend(_2fa,"getIndexes:maxCount:inIndexRange:",_2fc,-1,nil);
var _2fd=_2fc.length;
while(_2fd--){
var _2fe=_2fc[_2fd];
if(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,_2fe)){
objj_msgSend(_2fa,"removeIndex:",_2fe);
}
}
if(objj_msgSend(_2fa,"count")===0){
return;
}
}
if(!_allowsEmptySelection&&objj_msgSend(_2fa,"count")===0){
return;
}
if(objj_msgSend(_2fa,"isEqualToIndexSet:",_selectedRowIndexes)){
return;
}
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",_2fa,_2fb);
_lastSelectedRow=objj_msgSend(_2fa,"containsIndex:",aRow)?aRow:objj_msgSend(_2fa,"lastIndex");
}
}),new objj_method(sel_getUid("_noteSelectionIsChanging"),function(self,_2ff){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewSelectionIsChangingNotification,self,nil);
}
}),new objj_method(sel_getUid("_noteSelectionDidChange"),function(self,_300){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPTableViewSelectionDidChangeNotification,self,nil);
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(self,_301){
with(self){
return YES;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(self,_302){
with(self){
return YES;
}
}),new objj_method(sel_getUid("keyDown:"),function(self,_303,_304){
with(self){
var _305=objj_msgSend(_304,"charactersIgnoringModifiers"),_306=objj_msgSend(_304,"modifierFlags");
if(_305===CPUpArrowFunctionKey||_305===CPDownArrowFunctionKey){
if(objj_msgSend(self,"numberOfRows")!==0){
objj_msgSend(self,"_moveSelectionWithEvent:upward:",_304,(_305===CPUpArrowFunctionKey));
return;
}
}else{
if(_305===CPDeleteCharacter||_305===CPDeleteFunctionKey){
if(objj_msgSend(self,"_sendDelegateDeleteKeyPressed")){
return;
}
}
}
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"keyDown:",_304);
}
}),new objj_method(sel_getUid("_selectionIsBroken"),function(self,_307){
with(self){
return objj_msgSend(self,"selectedRowIndexes")._ranges.length!==1;
}
}),new objj_method(sel_getUid("_moveSelectionWithEvent:upward:"),function(self,_308,_309,_30a){
with(self){
if(_implementedDelegateMethods&_9&&!objj_msgSend(_delegate,"selectionShouldChangeInTableView:",self)){
return;
}
var _30b=objj_msgSend(self,"selectedRowIndexes");
if(objj_msgSend(_30b,"count")>0){
var _30c=((objj_msgSend(_309,"modifierFlags")&CPShiftKeyMask)&&_allowsMultipleSelection),i=objj_msgSend(self,"selectedRow");
if(objj_msgSend(self,"_selectionIsBroken")){
while(objj_msgSend(_30b,"containsIndex:",i)){
_30a?i--:i++;
}
_wasSelectionBroken=true;
}else{
if(_wasSelectionBroken&&((_30a&&i!==objj_msgSend(_30b,"firstIndex"))||(!_30a&&i!==objj_msgSend(_30b,"lastIndex")))){
_30a?i=objj_msgSend(_30b,"firstIndex")-1:i=objj_msgSend(_30b,"lastIndex");
_wasSelectionBroken=false;
}else{
_30a?i--:i++;
}
}
}else{
var _30c=NO;
if(objj_msgSend(self,"numberOfRows")>0){
var i=_30a?objj_msgSend(self,"numberOfRows")-1:0;
}
}
if(i>=objj_msgSend(self,"numberOfRows")||i<0){
return;
}
if(_implementedDelegateMethods&_13){
while(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,i)&&(i<objj_msgSend(self,"numberOfRows")||i>0)){
_30a?i--:i++;
}
if(!objj_msgSend(_delegate,"tableView:shouldSelectRow:",self,i)){
return;
}
}
if(_30c&&objj_msgSend(_30b,"containsIndex:",i)){
var _30d=i;
_30a?i++:i--;
objj_msgSend(_30b,"removeIndex:",i);
_30c=NO;
}else{
if(_30c){
if(objj_msgSend(_30b,"containsIndex:",i)){
i=_30a?objj_msgSend(_30b,"firstIndex")-1:objj_msgSend(_30b,"lastIndex")+1;
i=MIN(MAX(i,0),objj_msgSend(self,"numberOfRows")-1);
}
objj_msgSend(_30b,"addIndex:",i);
var _30d=i;
}else{
_30b=objj_msgSend(CPIndexSet,"indexSetWithIndex:",i);
var _30d=i;
}
}
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",_30b,_30c);
_lastSelectedRow=_30d;
if(i!==CPNotFound){
objj_msgSend(self,"scrollRowToVisible:",i);
}
}
})]);
class_addMethods(_1f,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_30e){
with(self){
return "tableview";
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_30f){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["alternating-row-colors","grid-color","highlighted-grid-color","selection-color","sourcelist-selection-color","sort-image","sort-image-reversed","selection-radius"]);
}
})]);
var _1e=objj_getClass("CPTableView");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("_replacementKeyPathForBinding:"),function(self,_310,_311){
with(self){
if(_311==="selectionIndexes"){
return "selectedRowIndexes";
}
return objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"_replacementKeyPathForBinding:",_311);
}
}),new objj_method(sel_getUid("_establishBindingsIfUnbound:"),function(self,_312,_313){
with(self){
if(objj_msgSend(objj_msgSend(self,"infoForBinding:","content"),"objectForKey:",CPObservedObjectKey)!==_313){
objj_msgSend(self,"bind:toObject:withKeyPath:options:","content",_313,"arrangedObjects",nil);
}
if(objj_msgSend(objj_msgSend(self,"infoForBinding:","selectionIndexes"),"objectForKey:",CPObservedObjectKey)!==_313){
objj_msgSend(self,"bind:toObject:withKeyPath:options:","selectionIndexes",_313,"selectionIndexes",nil);
}
}
}),new objj_method(sel_getUid("setContent:"),function(self,_314,_315){
with(self){
objj_msgSend(self,"reloadData");
}
})]);
var _316="CPTableViewDataSourceKey",_317="CPTableViewDelegateKey",_318="CPTableViewHeaderViewKey",_319="CPTableViewTableColumnsKey",_31a="CPTableViewRowHeightKey",_31b="CPTableViewIntercellSpacingKey",_31c="CPTableViewSelectionHighlightStyleKey",_31d="CPTableViewMultipleSelectionKey",_31e="CPTableViewEmptySelectionKey",_31f="CPTableViewColumnReorderingKey",_320="CPTableViewColumnResizingKey",_321="CPTableViewColumnSelectionKey",_322="CPTableViewColumnAutoresizingStyleKey",_323="CPTableViewGridColorKey",_324="CPTableViewGridStyleMaskKey",_325="CPTableViewUsesAlternatingBackgroundKey",_326="CPTableViewAlternatingRowColorsKey",_318="CPTableViewHeaderViewKey",_327="CPTableViewCornerViewKey",_328="CPTableViewAutosaveNameKey";
var _1e=objj_getClass("CPTableView");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("initWithCoder:"),function(self,_329,_32a){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"initWithCoder:",_32a);
if(self){
_allowsColumnReordering=objj_msgSend(_32a,"decodeBoolForKey:",_31f);
_allowsColumnResizing=objj_msgSend(_32a,"decodeBoolForKey:",_320);
_allowsMultipleSelection=objj_msgSend(_32a,"decodeBoolForKey:",_31d);
_allowsEmptySelection=objj_msgSend(_32a,"decodeBoolForKey:",_31e);
_allowsColumnSelection=objj_msgSend(_32a,"decodeBoolForKey:",_321);
_selectionHighlightStyle=objj_msgSend(_32a,"decodeIntForKey:",_31c);
_columnAutoResizingStyle=objj_msgSend(_32a,"decodeIntForKey:",_322);
_tableColumns=objj_msgSend(_32a,"decodeObjectForKey:",_319)||[];
objj_msgSend(_tableColumns,"makeObjectsPerformSelector:withObject:",sel_getUid("setTableView:"),self);
_rowHeight=objj_msgSend(_32a,"decodeFloatForKey:",_31a)||23;
_intercellSpacing=objj_msgSend(_32a,"decodeSizeForKey:",_31b);
if((_intercellSpacing.width=={width:0,height:0}.width&&_intercellSpacing.height=={width:0,height:0}.height)){
_intercellSpacing={width:3,height:2};
}
objj_msgSend(self,"setGridColor:",objj_msgSend(_32a,"decodeObjectForKey:",_323));
_gridStyleMask=objj_msgSend(_32a,"decodeIntForKey:",_324);
_usesAlternatingRowBackgroundColors=objj_msgSend(_32a,"decodeObjectForKey:",_325);
objj_msgSend(self,"setAlternatingRowBackgroundColors:",objj_msgSend(_32a,"decodeObjectForKey:",_326));
_headerView=objj_msgSend(_32a,"decodeObjectForKey:",_318);
_cornerView=objj_msgSend(_32a,"decodeObjectForKey:",_327);
objj_msgSend(self,"setDataSource:",objj_msgSend(_32a,"decodeObjectForKey:",_316));
objj_msgSend(self,"setDelegate:",objj_msgSend(_32a,"decodeObjectForKey:",_317));
objj_msgSend(self,"_init");
objj_msgSend(self,"viewWillMoveToSuperview:",objj_msgSend(self,"superview"));
objj_msgSend(self,"setAutosaveName:",objj_msgSend(_32a,"decodeObjectForKey:",_328));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_32b,_32c){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTableView").super_class},"encodeWithCoder:",_32c);
objj_msgSend(_32c,"encodeObject:forKey:",_dataSource,_316);
objj_msgSend(_32c,"encodeObject:forKey:",_delegate,_317);
objj_msgSend(_32c,"encodeFloat:forKey:",_rowHeight,_31a);
objj_msgSend(_32c,"encodeSize:forKey:",_intercellSpacing,_31b);
objj_msgSend(_32c,"encodeInt:forKey:",_selectionHighlightStyle,_31c);
objj_msgSend(_32c,"encodeInt:forKey:",_columnAutoResizingStyle,_322);
objj_msgSend(_32c,"encodeBool:forKey:",_allowsMultipleSelection,_31d);
objj_msgSend(_32c,"encodeBool:forKey:",_allowsEmptySelection,_31e);
objj_msgSend(_32c,"encodeBool:forKey:",_allowsColumnReordering,_31f);
objj_msgSend(_32c,"encodeBool:forKey:",_allowsColumnResizing,_320);
objj_msgSend(_32c,"encodeBool:forKey:",_allowsColumnSelection,_321);
objj_msgSend(_32c,"encodeObject:forKey:",_tableColumns,_319);
objj_msgSend(_32c,"encodeObject:forKey:",objj_msgSend(self,"gridColor"),_323);
objj_msgSend(_32c,"encodeInt:forKey:",_gridStyleMask,_324);
objj_msgSend(_32c,"encodeBool:forKey:",_usesAlternatingRowBackgroundColors,_325);
objj_msgSend(_32c,"encodeObject:forKey:",objj_msgSend(self,"alternatingRowBackgroundColors"),_326);
objj_msgSend(_32c,"encodeObject:forKey:",_cornerView,_327);
objj_msgSend(_32c,"encodeObject:forKey:",_headerView,_318);
objj_msgSend(_32c,"encodeObject:forKey:",_autosaveName,_328);
}
})]);
var _1e=objj_getClass("CPIndexSet");
if(!_1e){
throw new SyntaxError("*** Could not find definition for class \"CPIndexSet\"");
}
var _1f=_1e.isa;
class_addMethods(_1e,[new objj_method(sel_getUid("removeMatches:"),function(self,_32d,_32e){
with(self){
var _32f=objj_msgSend(self,"firstIndex"),_330=MIN(_32f,objj_msgSend(_32e,"firstIndex")),_331=(_330==_32f);
while(_330!=CPNotFound){
var _332=(_331)?_32e:self,_333=objj_msgSend(_332,"indexGreaterThanOrEqualToIndex:",_330);
if(_333==_330){
objj_msgSend(self,"removeIndex:",_330);
objj_msgSend(_32e,"removeIndex:",_330);
}
_330=_333;
_331=!_331;
}
}
})]);
var _1e=objj_allocateClassPair(CPView,"_CPDropOperationDrawingView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("dropOperation"),new objj_ivar("tableView"),new objj_ivar("currentRow"),new objj_ivar("isBlinking")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("dropOperation"),function(self,_334){
with(self){
return dropOperation;
}
}),new objj_method(sel_getUid("setDropOperation:"),function(self,_335,_336){
with(self){
dropOperation=_336;
}
}),new objj_method(sel_getUid("tableView"),function(self,_337){
with(self){
return tableView;
}
}),new objj_method(sel_getUid("setTableView:"),function(self,_338,_339){
with(self){
tableView=_339;
}
}),new objj_method(sel_getUid("currentRow"),function(self,_33a){
with(self){
return currentRow;
}
}),new objj_method(sel_getUid("setCurrentRow:"),function(self,_33b,_33c){
with(self){
currentRow=_33c;
}
}),new objj_method(sel_getUid("isBlinking"),function(self,_33d){
with(self){
return isBlinking;
}
}),new objj_method(sel_getUid("setIsBlinking:"),function(self,_33e,_33f){
with(self){
isBlinking=_33f;
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_340,_341){
with(self){
if(tableView._destinationDragStyle===CPTableViewDraggingDestinationFeedbackStyleNone||isBlinking){
return;
}
var _342=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_342,objj_msgSend(CPColor,"colorWithHexString:","4886ca"));
CGContextSetLineWidth(_342,3);
if(currentRow===-1){
CGContextStrokeRect(_342,objj_msgSend(self,"bounds"));
}else{
if(dropOperation===CPTableViewDropOn){
var _343=objj_msgSend(tableView,"selectedRowIndexes"),_344={origin:{x:_341.origin.x+2,y:_341.origin.y+2},size:{width:_341.size.width-4,height:_341.size.height-5}};
if(objj_msgSend(_343,"containsIndex:",currentRow)){
CGContextSetLineWidth(_342,2);
CGContextSetStrokeColor(_342,objj_msgSend(CPColor,"whiteColor"));
}else{
CGContextSetFillColor(_342,objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",72/255,134/255,202/255,0.25));
CGContextFillRoundedRectangleInRect(_342,_344,8,YES,YES,YES,YES);
}
CGContextStrokeRoundedRectangleInRect(_342,_344,8,YES,YES,YES,YES);
}else{
if(dropOperation===CPTableViewDropAbove){
objj_msgSend(self,"setFrameOrigin:",{x:_frame.origin.x,y:_frame.origin.y-8});
var _343=objj_msgSend(tableView,"selectedRowIndexes");
if(objj_msgSend(_343,"containsIndex:",currentRow-1)||objj_msgSend(_343,"containsIndex:",currentRow)){
CGContextSetStrokeColor(_342,objj_msgSend(CPColor,"whiteColor"));
CGContextSetLineWidth(_342,4);
CGContextStrokeEllipseInRect(_342,{origin:{x:_341.origin.x+4,y:_341.origin.y+4},size:{width:8,height:8}});
CGContextBeginPath(_342);
CGContextMoveToPoint(_342,10,_341.origin.y+8);
CGContextAddLineToPoint(_342,_341.size.width-_341.origin.y-8,_341.origin.y+8);
CGContextClosePath(_342);
CGContextStrokePath(_342);
CGContextSetStrokeColor(_342,objj_msgSend(CPColor,"colorWithHexString:","4886ca"));
CGContextSetLineWidth(_342,3);
}
CGContextStrokeEllipseInRect(_342,{origin:{x:_341.origin.x+4,y:_341.origin.y+4},size:{width:8,height:8}});
CGContextBeginPath(_342);
CGContextMoveToPoint(_342,10,_341.origin.y+8);
CGContextAddLineToPoint(_342,_341.size.width-_341.origin.y-8,_341.origin.y+8);
CGContextClosePath(_342);
CGContextStrokePath(_342);
}
}
}
}
}),new objj_method(sel_getUid("blink"),function(self,_345){
with(self){
if(dropOperation!==CPTableViewDropOn){
return;
}
isBlinking=YES;
var _346=function(){
objj_msgSend(self,"setHidden:",NO);
isBlinking=NO;
};
var _347=function(){
objj_msgSend(self,"setHidden:",YES);
isBlinking=YES;
};
objj_msgSend(self,"setHidden:",YES);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.1,_346,NO);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.19,_347,NO);
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:callback:repeats:",0.27,_346,NO);
}
})]);
var _1e=objj_allocateClassPair(CPView,"_CPColumnDragView"),_1f=_1e.isa;
class_addIvars(_1e,[new objj_ivar("_lineColor")]);
objj_registerClassPair(_1e);
class_addMethods(_1e,[new objj_method(sel_getUid("initWithLineColor:"),function(self,_348,_349){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPColumnDragView").super_class},"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
if(self){
_lineColor=_349;
}
return self;
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_34a,_34b){
with(self){
var _34c=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetStrokeColor(_34c,_lineColor);
var _34d=[{x:0.5,y:0},{x:0.5,y:_34b.size.height}];
CGContextStrokeLineSegments(_34c,_34d,2);
_34d=[{x:_34b.size.width-0.5,y:0},{x:_34b.size.width-0.5,y:_34b.size.height}];
CGContextStrokeLineSegments(_34c,_34d,2);
}
})]);
p;11;CPTabView.jt;10851;@STATIC;1.0;i;7;CPBox.ji;20;CPSegmentedControl.ji;15;CPTabViewItem.ji;8;CPView.jt;10763;
objj_executeFile("CPBox.j",YES);
objj_executeFile("CPSegmentedControl.j",YES);
objj_executeFile("CPTabViewItem.j",YES);
objj_executeFile("CPView.j",YES);
CPTopTabsBezelBorder=0;
CPBottomTabsBezelBorder=2;
CPNoTabsBezelBorder=4;
CPNoTabsLineBorder=5;
CPNoTabsNoBorder=6;
var _1=1,_2=2,_3=4,_4=8;
var _5=objj_allocateClassPair(CPView,"CPTabView"),_6=_5.isa;
class_addIvars(_5,[new objj_ivar("_items"),new objj_ivar("_tabs"),new objj_ivar("_box"),new objj_ivar("_selectedIndex"),new objj_ivar("_type"),new objj_ivar("_font"),new objj_ivar("_delegate"),new objj_ivar("_delegateSelectors")]);
objj_registerClassPair(_5);
class_addMethods(_5,[new objj_method(sel_getUid("initWithFrame:"),function(_7,_8,_9){
with(_7){
if(_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPTabView").super_class},"initWithFrame:",_9)){
_items=objj_msgSend(CPArray,"array");
objj_msgSend(_7,"_init");
objj_msgSend(_7,"setTabViewType:",CPTopTabsBezelBorder);
}
return _7;
}
}),new objj_method(sel_getUid("_init"),function(_a,_b){
with(_a){
_selectedIndex=CPNotFound;
_tabs=objj_msgSend(objj_msgSend(CPSegmentedControl,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_tabs,"setHitTests:",NO);
var _c=objj_msgSend(_tabs,"valueForThemeAttribute:","default-height");
objj_msgSend(_tabs,"setFrameSize:",CGSizeMake(0,_c));
_box=objj_msgSend(objj_msgSend(CPBox,"alloc"),"initWithFrame:",objj_msgSend(_a,"bounds"));
objj_msgSend(_a,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithCalibratedWhite:alpha:",0.95,1));
objj_msgSend(_box,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_tabs,"setAutoresizingMask:",CPViewMinXMargin|CPViewMaxXMargin);
objj_msgSend(_a,"addSubview:",_box);
objj_msgSend(_a,"addSubview:",_tabs);
}
}),new objj_method(sel_getUid("addTabViewItem:"),function(_d,_e,_f){
with(_d){
objj_msgSend(_d,"insertTabViewItem:atIndex:",_f,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("insertTabViewItem:atIndex:"),function(_10,_11,_12,_13){
with(_10){
objj_msgSend(_items,"insertObject:atIndex:",_12,_13);
objj_msgSend(_10,"_updateItems");
objj_msgSend(_10,"_repositionTabs");
objj_msgSend(_12,"_setTabView:",_10);
if(_delegateSelectors&_4){
objj_msgSend(_delegate,"tabViewDidChangeNumberOfTabViewItems:",_10);
}
}
}),new objj_method(sel_getUid("removeTabViewItem:"),function(_14,_15,_16){
with(_14){
var _17=objj_msgSend(_items,"count");
for(var i=0;i<_17;i++){
if(objj_msgSend(_items,"objectAtIndex:",i)===_16){
objj_msgSend(_items,"removeObjectAtIndex:",i);
break;
}
}
objj_msgSend(_14,"_updateItems");
objj_msgSend(_14,"_repositionTabs");
objj_msgSend(_16,"_setTabView:",nil);
if(_delegateSelectors&_4){
objj_msgSend(_delegate,"tabViewDidChangeNumberOfTabViewItems:",_14);
}
}
}),new objj_method(sel_getUid("indexOfTabViewItem:"),function(_18,_19,_1a){
with(_18){
return objj_msgSend(_items,"indexOfObjectIdenticalTo:",_1a);
}
}),new objj_method(sel_getUid("indexOfTabViewItemWithIdentifier:"),function(_1b,_1c,_1d){
with(_1b){
for(var _1e=objj_msgSend(_items,"count");_1e>=0;_1e--){
if(objj_msgSend(objj_msgSend(_items[_1e],"identifier"),"isEqual:",_1d)){
return _1e;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("numberOfTabViewItems"),function(_1f,_20){
with(_1f){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("tabViewItemAtIndex:"),function(_21,_22,_23){
with(_21){
return objj_msgSend(_items,"objectAtIndex:",_23);
}
}),new objj_method(sel_getUid("tabViewItems"),function(_24,_25){
with(_24){
return objj_msgSend(_items,"copy");
}
}),new objj_method(sel_getUid("selectFirstTabViewItem:"),function(_26,_27,_28){
with(_26){
if(objj_msgSend(_items,"count")===0){
return;
}
objj_msgSend(_26,"selectTabViewItemAtIndex:",0);
}
}),new objj_method(sel_getUid("selectLastTabViewItem:"),function(_29,_2a,_2b){
with(_29){
if(objj_msgSend(_items,"count")===0){
return;
}
objj_msgSend(_29,"selectTabViewItemAtIndex:",objj_msgSend(_items,"count")-1);
}
}),new objj_method(sel_getUid("selectNextTabViewItem:"),function(_2c,_2d,_2e){
with(_2c){
if(_selectedIndex===CPNotFound){
return;
}
var _2f=_selectedIndex+1;
if(_2f===objj_msgSend(_items,"count")){
return;
}
objj_msgSend(_2c,"selectTabViewItemAtIndex:",_2f);
}
}),new objj_method(sel_getUid("selectPreviousTabViewItem:"),function(_30,_31,_32){
with(_30){
if(_selectedIndex===CPNotFound){
return;
}
var _33=_selectedIndex-1;
if(_33<0){
return;
}
objj_msgSend(_30,"selectTabViewItemAtIndex:",_33);
}
}),new objj_method(sel_getUid("selectTabViewItem:"),function(_34,_35,_36){
with(_34){
objj_msgSend(_34,"selectTabViewItemAtIndex:",objj_msgSend(_34,"indexOfTabViewItem:",_36));
}
}),new objj_method(sel_getUid("selectTabViewItemAtIndex:"),function(_37,_38,_39){
with(_37){
if(_39===_selectedIndex){
return;
}
var _3a=objj_msgSend(_37,"tabViewItemAtIndex:",_39);
if((_delegateSelectors&_2)&&!objj_msgSend(_delegate,"tabView:shouldSelectTabViewItem:",_37,_3a)){
return NO;
}
if(_delegateSelectors&_3){
objj_msgSend(_delegate,"tabView:willSelectTabViewItem:",_37,_3a);
}
objj_msgSend(_tabs,"selectSegmentWithTag:",_39);
objj_msgSend(_37,"_setSelectedIndex:",_39);
if(_delegateSelectors&_1){
objj_msgSend(_delegate,"tabView:didSelectTabViewItem:",_37,_3a);
}
return YES;
}
}),new objj_method(sel_getUid("selectedTabViewItem"),function(_3b,_3c){
with(_3b){
if(_selectedIndex!=CPNotFound){
return objj_msgSend(_items,"objectAtIndex:",_selectedIndex);
}
return nil;
}
}),new objj_method(sel_getUid("font"),function(_3d,_3e){
with(_3d){
return _font;
}
}),new objj_method(sel_getUid("setFont:"),function(_3f,_40,_41){
with(_3f){
if(objj_msgSend(_font,"isEqual:",_41)){
return;
}
_font=_41;
objj_msgSend(_tabs,"setFont:",_font);
}
}),new objj_method(sel_getUid("setTabViewType:"),function(_42,_43,_44){
with(_42){
if(_type===_44){
return;
}
_type=_44;
if(_type!==CPTopTabsBezelBorder&&_type!==CPBottomTabsBezelBorder){
objj_msgSend(_box,"setFrame:",objj_msgSend(_42,"bounds"));
objj_msgSend(_tabs,"removeFromSuperview");
}else{
var _45=objj_msgSend(_42,"frame"),_46=CGRectGetHeight(objj_msgSend(_tabs,"frame")),_47=_type===CPTopTabsBezelBorder?_46/2:0;
objj_msgSend(_box,"setFrame:",CGRectMake(0,_47,CGRectGetWidth(_45),CGRectGetHeight(_45)-_46/2));
objj_msgSend(_42,"addSubview:",_tabs);
}
switch(_type){
case CPTopTabsBezelBorder:
case CPBottomTabsBezelBorder:
case CPNoTabsBezelBorder:
objj_msgSend(_box,"setBorderType:",CPBezelBorder);
break;
case CPNoTabsLineBorder:
objj_msgSend(_box,"setBorderType:",CPLineBorder);
break;
case CPNoTabsNoBorder:
objj_msgSend(_box,"setBorderType:",CPNoBorder);
break;
}
}
}),new objj_method(sel_getUid("tabViewType"),function(_48,_49){
with(_48){
return _type;
}
}),new objj_method(sel_getUid("delegate"),function(_4a,_4b){
with(_4a){
return _delegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_4c,_4d,_4e){
with(_4c){
if(_delegate==_4e){
return;
}
_delegate=_4e;
_delegateSelectors=0;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:shouldSelectTabViewItem:"))){
_delegateSelectors|=_2;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:willSelectTabViewItem:"))){
_delegateSelectors|=_3;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabView:didSelectTabViewItem:"))){
_delegateSelectors|=_1;
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("tabViewDidChangeNumberOfTabViewItems:"))){
_delegateSelectors|=_4;
}
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(_box,"setBackgroundColor:",_51);
}
}),new objj_method(sel_getUid("backgroundColor"),function(_52,_53){
with(_52){
return objj_msgSend(_box,"backgroundColor");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_54,_55,_56){
with(_54){
var _57=objj_msgSend(_tabs,"testSegment:",objj_msgSend(_tabs,"convertPoint:fromView:",objj_msgSend(_56,"locationInWindow"),nil));
if(_57!=CPNotFound&&objj_msgSend(_54,"selectTabViewItemAtIndex:",_57)){
objj_msgSend(_tabs,"trackSegment:",_56);
}
}
}),new objj_method(sel_getUid("_repositionTabs"),function(_58,_59){
with(_58){
var _5a=CGRectGetWidth(objj_msgSend(_58,"bounds"))/2,_5b=CGRectGetHeight(objj_msgSend(_tabs,"bounds"))/2;
if(_type===CPBottomTabsBezelBorder){
objj_msgSend(_tabs,"setCenter:",CGPointMake(_5a,CGRectGetHeight(objj_msgSend(_58,"bounds"))-_5b));
}else{
objj_msgSend(_tabs,"setCenter:",CGPointMake(_5a,_5b));
}
}
}),new objj_method(sel_getUid("_setSelectedIndex:"),function(_5c,_5d,_5e){
with(_5c){
_selectedIndex=_5e;
objj_msgSend(_5c,"_setContentViewForItem:",objj_msgSend(_items,"objectAtIndex:",_selectedIndex));
}
}),new objj_method(sel_getUid("_setContentViewForItem:"),function(_5f,_60,_61){
with(_5f){
objj_msgSend(_box,"setContentView:",objj_msgSend(_61,"view"));
}
}),new objj_method(sel_getUid("_updateItems"),function(_62,_63){
with(_62){
var _64=objj_msgSend(_items,"count");
objj_msgSend(_tabs,"setSegmentCount:",_64);
for(var i=0;i<_64;i++){
objj_msgSend(_tabs,"setLabel:forSegment:",objj_msgSend(objj_msgSend(_items,"objectAtIndex:",i),"label"),i);
objj_msgSend(_tabs,"setTag:forSegment:",i,i);
}
if(_selectedIndex===CPNotFound){
objj_msgSend(_62,"selectFirstTabViewItem:",_62);
}
}
})]);
var _65="CPTabViewItemsKey",_66="CPTabViewSelectedItemKey",_67="CPTabViewTypeKey",_68="CPTabViewFontKey",_69="CPTabViewDelegateKey";
var _5=objj_getClass("CPTabView");
if(!_5){
throw new SyntaxError("*** Could not find definition for class \"CPTabView\"");
}
var _6=_5.isa;
class_addMethods(_5,[new objj_method(sel_getUid("initWithCoder:"),function(_6a,_6b,_6c){
with(_6a){
if(_6a=objj_msgSendSuper({receiver:_6a,super_class:objj_getClass("CPTabView").super_class},"initWithCoder:",_6c)){
objj_msgSend(_6a,"_init");
_font=objj_msgSend(_6c,"decodeObjectForKey:",_68);
objj_msgSend(_tabs,"setFont:",_font);
_items=objj_msgSend(_6c,"decodeObjectForKey:",_65);
objj_msgSend(_items,"makeObjectsPerformSelector:withObject:",sel_getUid("_setTabView:"),_6a);
objj_msgSend(_6a,"_updateItems");
objj_msgSend(_6a,"_repositionTabs");
objj_msgSend(_6a,"setDelegate:",objj_msgSend(_6c,"decodeObjectForKey:",_69));
var _6d=objj_msgSend(_6c,"decodeObjectForKey:",_66);
if(_6d){
objj_msgSend(_6a,"selectTabViewItem:",_6d);
}
objj_msgSend(_6a,"setTabViewType:",objj_msgSend(_6c,"decodeIntForKey:",_67));
}
return _6a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6e,_6f,_70){
with(_6e){
objj_msgSendSuper({receiver:_6e,super_class:objj_getClass("CPTabView").super_class},"encodeWithCoder:",_70);
objj_msgSend(_70,"encodeObject:forKey:",_items,_65);
var _71=objj_msgSend(_6e,"selectedTabViewItem");
if(_71){
objj_msgSend(_70,"encodeObject:forKey:",_71,_66);
}
objj_msgSend(_70,"encodeInt:forKey:",_type,_67);
objj_msgSend(_70,"encodeObject:forKey:",_font,_68);
objj_msgSend(_70,"encodeConditionalObject:forKey:",_delegate,_69);
}
})]);
p;15;CPTabViewItem.jt;2995;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;2938;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPView.j",YES);
CPSelectedTab=0;
CPBackgroundTab=1;
CPPressedTab=2;
var _1=objj_allocateClassPair(CPObject,"CPTabViewItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier"),new objj_ivar("_label"),new objj_ivar("_view"),new objj_ivar("_auxiliaryView"),new objj_ivar("_tabView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPTabViewItem").super_class},"init");
if(_5){
_identifier=_7;
}
return _5;
}
}),new objj_method(sel_getUid("setLabel:"),function(_8,_9,_a){
with(_8){
_label=_a;
}
}),new objj_method(sel_getUid("label"),function(_b,_c){
with(_b){
return _label;
}
}),new objj_method(sel_getUid("tabState"),function(_d,_e){
with(_d){
return _tabState;
}
}),new objj_method(sel_getUid("setIdentifier:"),function(_f,_10,_11){
with(_f){
_identifier=_11;
}
}),new objj_method(sel_getUid("identifier"),function(_12,_13){
with(_12){
return _identifier;
}
}),new objj_method(sel_getUid("setView:"),function(_14,_15,_16){
with(_14){
if(_view==_16){
return;
}
_view=_16;
if(objj_msgSend(_tabView,"selectedTabViewItem")==_14){
objj_msgSend(_tabView,"_setContentViewForItem:",_14);
}
}
}),new objj_method(sel_getUid("view"),function(_17,_18){
with(_17){
return _view;
}
}),new objj_method(sel_getUid("setAuxiliaryView:"),function(_19,_1a,_1b){
with(_19){
_auxiliaryView=_1b;
}
}),new objj_method(sel_getUid("auxiliaryView"),function(_1c,_1d){
with(_1c){
return _auxiliaryView;
}
}),new objj_method(sel_getUid("tabView"),function(_1e,_1f){
with(_1e){
return _tabView;
}
}),new objj_method(sel_getUid("_setTabView:"),function(_20,_21,_22){
with(_20){
_tabView=_22;
}
})]);
var _23="CPTabViewItemIdentifierKey",_24="CPTabViewItemLabelKey",_25="CPTabViewItemViewKey",_26="CPTabViewItemAuxViewKey";
var _1=objj_getClass("CPTabViewItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTabViewItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_27,_28,_29){
with(_27){
_27=objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPTabViewItem").super_class},"init");
if(_27){
_identifier=objj_msgSend(_29,"decodeObjectForKey:",_23);
_label=objj_msgSend(_29,"decodeObjectForKey:",_24);
_view=objj_msgSend(_29,"decodeObjectForKey:",_25);
_auxiliaryView=objj_msgSend(_29,"decodeObjectForKey:",_26);
}
return _27;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_2a,_2b,_2c){
with(_2a){
objj_msgSend(_2c,"encodeObject:forKey:",_identifier,_23);
objj_msgSend(_2c,"encodeObject:forKey:",_label,_24);
objj_msgSend(_2c,"encodeObject:forKey:",_view,_25);
objj_msgSend(_2c,"encodeObject:forKey:",_auxiliaryView,_26);
}
})]);
p;8;CPText.jt;219;@STATIC;1.0;t;201;
CPEnterCharacter="";
CPBackspaceCharacter="\b";
CPTabCharacter="\t";
CPNewlineCharacter="\n";
CPFormFeedCharacter="\f";
CPCarriageReturnCharacter="\r";
CPBackTabCharacter="";
CPDeleteCharacter="";
p;13;CPTextField.jt;36043;@STATIC;1.0;i;11;CPControl.ji;17;CPStringDrawing.ji;17;CPCompatibility.ji;21;_CPImageAndTextView.jt;35937;
objj_executeFile("CPControl.j",YES);
objj_executeFile("CPStringDrawing.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("_CPImageAndTextView.j",YES);
CPTextFieldSquareBezel=0;
CPTextFieldRoundedBezel=1;
CPTextFieldDidFocusNotification="CPTextFieldDidFocusNotification";
CPTextFieldDidBlurNotification="CPTextFieldDidBlurNotification";
var _1=nil,_2=nil,_3=nil,_4=nil,_5=nil,_6=NO,_7=NO,_8=NO,_9=nil,_a=nil,_b=nil;
var _c="•";
var _d=objj_getClass("CPString");
if(!_d){
throw new SyntaxError("*** Could not find definition for class \"CPString\"");
}
var _e=_d.isa;
class_addMethods(_d,[new objj_method(sel_getUid("string"),function(_f,_10){
with(_f){
return _f;
}
})]);
CPTextFieldStateRounded=CPThemeState("rounded");
CPTextFieldStatePlaceholder=CPThemeState("placeholder");
var _d=objj_allocateClassPair(CPControl,"CPTextField"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_isEditing"),new objj_ivar("_isEditable"),new objj_ivar("_isSelectable"),new objj_ivar("_isSecure"),new objj_ivar("_willBecomeFirstResponderByClick"),new objj_ivar("_drawsBackground"),new objj_ivar("_textFieldBackgroundColor"),new objj_ivar("_placeholderString"),new objj_ivar("_stringValue"),new objj_ivar("_delegate"),new objj_ivar("_bezelStyle"),new objj_ivar("_isBordered"),new objj_ivar("_controlSize")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("_inputElement"),function(_11,_12){
with(_11){
if(!_1){
_1=document.createElement("input");
_1.style.position="absolute";
_1.style.border="0px";
_1.style.padding="0px";
_1.style.margin="0px";
_1.style.whiteSpace="pre";
_1.style.background="transparent";
_1.style.outline="none";
_b=function(_13){
if(_4&&_4._DOMElement!=_1.parentNode){
return;
}
if(!_6){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
return;
}
CPTextFieldHandleBlur(_13,_1);
_7=YES;
return true;
};
CPTextFieldHandleBlur=function(_14){
_4=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
_1.onblur=_b;
_3=_1;
}
if(CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature)){
if(objj_msgSend(_11,"isSecure")){
_1.type="password";
}else{
_1.type="text";
}
return _1;
}
if(objj_msgSend(_11,"isSecure")){
if(!_2){
_2=document.createElement("input");
_2.style.position="absolute";
_2.style.border="0px";
_2.style.padding="0px";
_2.style.margin="0px";
_2.style.whiteSpace="pre";
_2.style.background="transparent";
_2.style.outline="none";
_2.type="password";
_2.onblur=_b;
}
_1=_2;
}else{
_1=_3;
}
return _1;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_15,_16,_17){
with(_15){
_15=objj_msgSendSuper({receiver:_15,super_class:objj_getClass("CPTextField").super_class},"initWithFrame:",_17);
if(_15){
objj_msgSend(_15,"setStringValue:","");
objj_msgSend(_15,"setPlaceholderString:","");
_sendActionOn=CPKeyUpMask|CPKeyDownMask;
objj_msgSend(_15,"setValue:forThemeAttribute:",CPLeftTextAlignment,"alignment");
}
return _15;
}
}),new objj_method(sel_getUid("setEditable:"),function(_18,_19,_1a){
with(_18){
if(_isEditable===_1a){
return;
}
_isEditable=_1a;
if(_1a){
_isSelectable=YES;
}
if(!_1a&&objj_msgSend(objj_msgSend(_18,"window"),"firstResponder")===_18){
objj_msgSend(objj_msgSend(_18,"window"),"makeFirstResponder:",nil);
}
}
}),new objj_method(sel_getUid("isEditable"),function(_1b,_1c){
with(_1b){
return _isEditable;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSendSuper({receiver:_1d,super_class:objj_getClass("CPTextField").super_class},"setEnabled:",_1f);
if(!_1f&&objj_msgSend(objj_msgSend(_1d,"window"),"firstResponder")===_1d){
objj_msgSend(objj_msgSend(_1d,"window"),"makeFirstResponder:",nil);
}
}
}),new objj_method(sel_getUid("setSelectable:"),function(_20,_21,_22){
with(_20){
_isSelectable=_22;
}
}),new objj_method(sel_getUid("isSelectable"),function(_23,_24){
with(_23){
return _isSelectable;
}
}),new objj_method(sel_getUid("setSecure:"),function(_25,_26,_27){
with(_25){
_isSecure=_27;
}
}),new objj_method(sel_getUid("isSecure"),function(_28,_29){
with(_28){
return _isSecure;
}
}),new objj_method(sel_getUid("setBezeled:"),function(_2a,_2b,_2c){
with(_2a){
if(_2c){
objj_msgSend(_2a,"setThemeState:",CPThemeStateBezeled);
}else{
objj_msgSend(_2a,"unsetThemeState:",CPThemeStateBezeled);
}
}
}),new objj_method(sel_getUid("isBezeled"),function(_2d,_2e){
with(_2d){
return objj_msgSend(_2d,"hasThemeState:",CPThemeStateBezeled);
}
}),new objj_method(sel_getUid("setBezelStyle:"),function(_2f,_30,_31){
with(_2f){
var _32=_31===CPTextFieldRoundedBezel;
if(_32){
objj_msgSend(_2f,"setThemeState:",CPTextFieldStateRounded);
}else{
objj_msgSend(_2f,"unsetThemeState:",CPTextFieldStateRounded);
}
}
}),new objj_method(sel_getUid("bezelStyle"),function(_33,_34){
with(_33){
if(objj_msgSend(_33,"hasThemeState:",CPTextFieldStateRounded)){
return CPTextFieldRoundedBezel;
}
return CPTextFieldSquareBezel;
}
}),new objj_method(sel_getUid("setBordered:"),function(_35,_36,_37){
with(_35){
if(_37){
objj_msgSend(_35,"setThemeState:",CPThemeStateBordered);
}else{
objj_msgSend(_35,"unsetThemeState:",CPThemeStateBordered);
}
}
}),new objj_method(sel_getUid("isBordered"),function(_38,_39){
with(_38){
return objj_msgSend(_38,"hasThemeState:",CPThemeStateBordered);
}
}),new objj_method(sel_getUid("setDrawsBackground:"),function(_3a,_3b,_3c){
with(_3a){
if(_drawsBackground==_3c){
return;
}
_drawsBackground=_3c;
objj_msgSend(_3a,"setNeedsLayout");
objj_msgSend(_3a,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawsBackground"),function(_3d,_3e){
with(_3d){
return _drawsBackground;
}
}),new objj_method(sel_getUid("setTextFieldBackgroundColor:"),function(_3f,_40,_41){
with(_3f){
if(_textFieldBackgroundColor==_41){
return;
}
_textFieldBackgroundColor=_41;
objj_msgSend(_3f,"setNeedsLayout");
objj_msgSend(_3f,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("textFieldBackgroundColor"),function(_42,_43){
with(_42){
return _textFieldBackgroundColor;
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_44,_45){
with(_44){
return objj_msgSend(_44,"isEditable")&&objj_msgSend(_44,"isEnabled");
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_46,_47){
with(_46){
if(_4&&objj_msgSend(_4,"window")!==objj_msgSend(_46,"window")){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
}
objj_msgSend(_46,"setThemeState:",CPThemeStateEditing);
objj_msgSend(_46,"_updatePlaceholderState");
objj_msgSend(_46,"setNeedsLayout");
_isEditing=NO;
_stringValue=objj_msgSend(_46,"stringValue");
var _48=objj_msgSend(_46,"_inputElement"),_49=objj_msgSend(_46,"currentValueForThemeAttribute:","font");
objj_msgSend(_49,"_getMetrics");
_48.value=_stringValue;
_48.style.color=objj_msgSend(objj_msgSend(_46,"currentValueForThemeAttribute:","text-color"),"cssString");
_48.style.font=objj_msgSend(_49,"cssString");
_48.style.zIndex=1000;
switch(objj_msgSend(_46,"alignment")){
case CPCenterTextAlignment:
_48.style.textAlign="center";
break;
case CPRightTextAlignment:
_48.style.textAlign="right";
break;
default:
_48.style.textAlign="left";
}
var _4a=objj_msgSend(_46,"contentRectForBounds:",objj_msgSend(_46,"bounds")),_4b=objj_msgSend(_46,"currentValueForThemeAttribute:","vertical-alignment");
switch(_4b){
case CPTopVerticalTextAlignment:
var _4c=((_4a.origin.y)+1)+"px";
break;
case CPCenterVerticalTextAlignment:
var _4c=((_4a.origin.y+(_4a.size.height)/2)-(_49._lineHeight/2)+1)+"px";
break;
case CPBottomVerticalTextAlignment:
var _4c=((_4a.origin.y+_4a.size.height)-_49._lineHeight)+"px";
break;
default:
var _4c=((_4a.origin.y)+1)+"px";
break;
}
_48.style.top=_4c;
_48.style.left=((_4a.origin.x)-1)+"px";
_48.style.width=(_4a.size.width)+"px";
_48.style.height=_49._lineHeight+"px";
_DOMElement.appendChild(_48);
window.setTimeout(function(){
_48.focus();
if(!_willBecomeFirstResponderByClick){
objj_msgSend(_46,"_selectText:immediately:",_46,YES);
}
_willBecomeFirstResponderByClick=NO;
objj_msgSend(_46,"textDidFocus:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPTextFieldDidFocusNotification,_46,nil));
_4=_46;
},0);
objj_msgSend(objj_msgSend(objj_msgSend(_46,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
_8=YES;
if(document.attachEvent){
_9=objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.onselectstart;
_a=objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.ondrag;
objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.ondrag=function(){
};
objj_msgSend(objj_msgSend(_46,"window"),"platformWindow")._DOMBodyElement.onselectstart=function(){
};
}
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_4d,_4e){
with(_4d){
objj_msgSend(_4d,"unsetThemeState:",CPThemeStateEditing);
var _4f=objj_msgSend(_4d,"_inputElement"),_50=_4f.value,_51="";
if(_50!==_stringValue){
objj_msgSend(_4d,"_setStringValue:",_50);
}
if(objj_msgSend(_4d,"_valueIsValid:",_50)===NO){
objj_msgSend(_4d,"setThemeState:",CPThemeStateEditing);
_4f.focus();
return NO;
}
_stringValue=objj_msgSend(_4d,"stringValue");
_willBecomeFirstResponderByClick=NO;
objj_msgSend(_4d,"_updatePlaceholderState");
objj_msgSend(_4d,"setNeedsLayout");
_6=YES;
if(_8){
_4f.blur();
}
if(!_7){
_b();
}
_7=NO;
_6=NO;
if(_4f.parentNode==_DOMElement){
_4f.parentNode.removeChild(_4f);
}
_8=NO;
if(document.attachEvent){
objj_msgSend(objj_msgSend(_4d,"window"),"platformWindow")._DOMBodyElement.ondrag=_a;
objj_msgSend(objj_msgSend(_4d,"window"),"platformWindow")._DOMBodyElement.onselectstart=_9;
_9=nil;
_a=nil;
}
_isEditing=NO;
objj_msgSend(_4d,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_4d,nil));
if(objj_msgSend(_4d,"sendsActionOnEndEditing")){
objj_msgSend(_4d,"sendAction:to:",objj_msgSend(_4d,"action"),objj_msgSend(_4d,"target"));
}
objj_msgSend(_4d,"textDidBlur:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPTextFieldDidBlurNotification,_4d,nil));
return YES;
}
}),new objj_method(sel_getUid("_valueIsValid:"),function(_52,_53,_54){
with(_52){
var _55="";
if(objj_msgSend(_52,"_setStringValue:isNewValue:errorDescription:",_54,NO,function(_56){
if(arguments.length){
return _55=_56;
}
return _55;
})===NO){
var _57=NO;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("control:didFailToFormatString:errorDescription:"))){
_57=objj_msgSend(_delegate,"control:didFailToFormatString:errorDescription:",_52,_54,_55);
}
if(_57===NO){
return NO;
}
}
return YES;
}
}),new objj_method(sel_getUid("needsPanelToBecomeKey"),function(_58,_59){
with(_58){
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_5a,_5b,_5c){
with(_5a){
if(objj_msgSend(_5a,"isEditable")&&objj_msgSend(_5a,"isEnabled")){
_willBecomeFirstResponderByClick=YES;
objj_msgSend(objj_msgSend(_5a,"window"),"makeFirstResponder:",_5a);
}else{
if(objj_msgSend(_5a,"isSelectable")){
if(document.attachEvent){
_9=objj_msgSend(objj_msgSend(_5a,"window"),"platformWindow")._DOMBodyElement.onselectstart;
_a=objj_msgSend(objj_msgSend(_5a,"window"),"platformWindow")._DOMBodyElement.ondrag;
objj_msgSend(objj_msgSend(_5a,"window"),"platformWindow")._DOMBodyElement.ondrag=function(){
};
objj_msgSend(objj_msgSend(_5a,"window"),"platformWindow")._DOMBodyElement.onselectstart=function(){
};
}
return objj_msgSend(objj_msgSend(objj_msgSend(_5c,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}else{
return objj_msgSend(objj_msgSend(_5a,"nextResponder"),"mouseDown:",_5c);
}
}
}
}),new objj_method(sel_getUid("mouseUp:"),function(_5d,_5e,_5f){
with(_5d){
if(!objj_msgSend(_5d,"isSelectable")&&(!objj_msgSend(_5d,"isEditable")||!objj_msgSend(_5d,"isEnabled"))){
objj_msgSend(objj_msgSend(_5d,"nextResponder"),"mouseUp:",_5f);
}else{
if(objj_msgSend(_5d,"isSelectable")){
if(document.attachEvent){
objj_msgSend(objj_msgSend(_5d,"window"),"platformWindow")._DOMBodyElement.ondrag=_a;
objj_msgSend(objj_msgSend(_5d,"window"),"platformWindow")._DOMBodyElement.onselectstart=_9;
_9=nil;
_a=nil;
}
return objj_msgSend(objj_msgSend(objj_msgSend(_5f,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("mouseDragged:"),function(_60,_61,_62){
with(_60){
if(!objj_msgSend(_60,"isSelectable")&&(!objj_msgSend(_60,"isEditable")||!objj_msgSend(_60,"isEnabled"))){
objj_msgSend(objj_msgSend(_60,"nextResponder"),"mouseDragged:",_62);
}else{
if(objj_msgSend(_60,"isSelectable")){
return objj_msgSend(objj_msgSend(objj_msgSend(_62,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("keyUp:"),function(_63,_64,_65){
with(_63){
var _66=objj_msgSend(_63,"_inputElement").value;
if(_66!==_stringValue){
objj_msgSend(_63,"_setStringValue:",_66);
if(!_isEditing){
_isEditing=YES;
objj_msgSend(_63,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_63,nil));
}
objj_msgSend(_63,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_63,nil));
}
objj_msgSend(objj_msgSend(objj_msgSend(_63,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
}
}),new objj_method(sel_getUid("keyDown:"),function(_67,_68,_69){
with(_67){
objj_msgSend(objj_msgSend(objj_msgSend(_67,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
objj_msgSend(_67,"interpretKeyEvents:",[_69]);
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_6a,_6b,_6c){
with(_6a){
if(objj_msgSend(_6a,"respondsToSelector:",_6c)){
objj_msgSend(_6a,"performSelector:",_6c);
}
}
}),new objj_method(sel_getUid("insertNewline:"),function(_6d,_6e,_6f){
with(_6d){
var _70=objj_msgSend(_6d,"_inputElement").value;
if(_70!==_stringValue){
objj_msgSend(_6d,"_setStringValue:",_70);
}
if(objj_msgSend(_6d,"_valueIsValid:",_stringValue)){
if(_isEditing){
_isEditing=NO;
objj_msgSend(_6d,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_6d,nil));
}
if(!objj_msgSend(_6d,"action")||objj_msgSend(_6d,"sendAction:to:",objj_msgSend(_6d,"action"),objj_msgSend(_6d,"target"))){
objj_msgSend(_6d,"selectAll:",nil);
}
}
objj_msgSend(objj_msgSend(objj_msgSend(_6d,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",NO);
}
}),new objj_method(sel_getUid("insertNewlineIgnoringFieldEditor:"),function(_71,_72,_73){
with(_71){
objj_msgSend(_71,"_insertCharacterIgnoringFieldEditor:",CPNewlineCharacter);
}
}),new objj_method(sel_getUid("insertTabIgnoringFieldEditor:"),function(_74,_75,_76){
with(_74){
objj_msgSend(_74,"_insertCharacterIgnoringFieldEditor:",CPTabCharacter);
}
}),new objj_method(sel_getUid("_insertCharacterIgnoringFieldEditor:"),function(_77,_78,_79){
with(_77){
var _7a=_stringValue,_7b=objj_msgSend(_77,"selectedRange"),_7c=objj_msgSend(_77,"_inputElement");
_7c.value=objj_msgSend(_7c.value,"stringByReplacingCharactersInRange:withString:",objj_msgSend(_77,"selectedRange"),_79);
objj_msgSend(_77,"_setStringValue:",_7c.value);
if(_7a!==_stringValue){
if(!_isEditing){
_isEditing=YES;
objj_msgSend(_77,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_77,nil));
}
objj_msgSend(_77,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_77,nil));
}
}
}),new objj_method(sel_getUid("textDidBlur:"),function(_7d,_7e,_7f){
with(_7d){
if(objj_msgSend(_7f,"object")!=_7d){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotification:",_7f);
}
}),new objj_method(sel_getUid("textDidFocus:"),function(_80,_81,_82){
with(_80){
if(objj_msgSend(_82,"object")!=_80){
return;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotification:",_82);
}
}),new objj_method(sel_getUid("textDidChange:"),function(_83,_84,_85){
with(_83){
if(objj_msgSend(_85,"object")!==_83){
return;
}
objj_msgSend(_83,"_continuouslyReverseSetBinding");
objj_msgSendSuper({receiver:_83,super_class:objj_getClass("CPTextField").super_class},"textDidChange:",_85);
}
}),new objj_method(sel_getUid("objectValue"),function(_86,_87){
with(_86){
return objj_msgSendSuper({receiver:_86,super_class:objj_getClass("CPTextField").super_class},"objectValue");
}
}),new objj_method(sel_getUid("_setStringValue:"),function(_88,_89,_8a){
with(_88){
return objj_msgSend(_88,"_setStringValue:isNewValue:errorDescription:",_8a,YES,nil);
}
}),new objj_method(sel_getUid("_setStringValue:isNewValue:errorDescription:"),function(_8b,_8c,_8d,_8e,_8f){
with(_8b){
_stringValue=_8d;
var _90=_8d,_91=objj_msgSend(_8b,"formatter"),_92=YES;
if(_91){
var _93=nil;
if(objj_msgSend(_91,"getObjectValue:forString:errorDescription:",function(_94){
if(arguments.length){
return _93=_94;
}
return _93;
},_8d,_8f)){
_90=_93;
}else{
_90=undefined;
_92=NO;
}
_8e|=_90!==objj_msgSendSuper({receiver:_8b,super_class:objj_getClass("CPTextField").super_class},"objectValue");
}
if(_8e){
objj_msgSend(_8b,"willChangeValueForKey:","objectValue");
objj_msgSendSuper({receiver:_8b,super_class:objj_getClass("CPTextField").super_class},"setObjectValue:",_90);
objj_msgSend(_8b,"_updatePlaceholderState");
objj_msgSend(_8b,"didChangeValueForKey:","objectValue");
}
return _92;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_95,_96,_97){
with(_95){
objj_msgSendSuper({receiver:_95,super_class:objj_getClass("CPTextField").super_class},"setObjectValue:",_97);
var _98=objj_msgSend(_95,"formatter");
if(_98){
var _99=objj_msgSend(_95,"hasThemeState:",CPThemeStateEditing)?objj_msgSend(_98,"editingStringForObjectValue:",_97):objj_msgSend(_98,"stringForObjectValue:",_97);
if(_99===nil){
var _9a=nil;
if(objj_msgSend(_98,"getObjectValue:forString:errorDescription:",function(_9b){
if(arguments.length){
return _9a=_9b;
}
return _9a;
},"",nil)===NO){
_9a=undefined;
}
objj_msgSendSuper({receiver:_95,super_class:objj_getClass("CPTextField").super_class},"setObjectValue:",_9a);
}
}
_stringValue=objj_msgSend(_95,"stringValue");
if(_4===_95||objj_msgSend(objj_msgSend(_95,"window"),"firstResponder")===_95){
objj_msgSend(_95,"_inputElement").value=_stringValue;
}
objj_msgSend(_95,"_updatePlaceholderState");
}
}),new objj_method(sel_getUid("_updatePlaceholderState"),function(_9c,_9d){
with(_9c){
if((!_stringValue||_stringValue.length===0)&&!objj_msgSend(_9c,"hasThemeState:",CPThemeStateEditing)){
objj_msgSend(_9c,"setThemeState:",CPTextFieldStatePlaceholder);
}else{
objj_msgSend(_9c,"unsetThemeState:",CPTextFieldStatePlaceholder);
}
}
}),new objj_method(sel_getUid("setPlaceholderString:"),function(_9e,_9f,_a0){
with(_9e){
if(_placeholderString===_a0){
return;
}
_placeholderString=_a0;
if(objj_msgSend(_9e,"hasThemeState:",CPTextFieldStatePlaceholder)){
objj_msgSend(_9e,"setNeedsLayout");
objj_msgSend(_9e,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("placeholderString"),function(_a1,_a2){
with(_a1){
return _placeholderString;
}
}),new objj_method(sel_getUid("sizeToFit"),function(_a3,_a4){
with(_a3){
objj_msgSend(_a3,"setFrameSize:",objj_msgSend(_a3,"_minimumFrameSize"));
}
}),new objj_method(sel_getUid("_minimumFrameSize"),function(_a5,_a6){
with(_a5){
var _a7=objj_msgSend(_a5,"frameSize"),_a8=objj_msgSend(_a5,"currentValueForThemeAttribute:","content-inset"),_a9=objj_msgSend(_a5,"currentValueForThemeAttribute:","min-size"),_aa=objj_msgSend(_a5,"currentValueForThemeAttribute:","max-size"),_ab=objj_msgSend(_a5,"lineBreakMode"),_ac=(_stringValue||" "),_ad={width:_a7.width,height:_a7.height},_ae=objj_msgSend(_a5,"currentValueForThemeAttribute:","font");
_ad.width-=_a8.left+_a8.right;
_ad.height-=_a8.top+_a8.bottom;
if(_a7.width!==0&&!objj_msgSend(_a5,"isBezeled")&&(_ab===CPLineBreakByWordWrapping||_ab===CPLineBreakByCharWrapping)){
_ad=objj_msgSend(_ac,"sizeWithFont:inWidth:",_ae,_ad.width);
}else{
_ad=objj_msgSend(_ac,"sizeWithFont:",_ae);
}
_a7.height=_ad.height+_a8.top+_a8.bottom;
if(objj_msgSend(_a5,"isBezeled")){
_a7.height=MAX(_a7.height,_a9.height);
if(_aa.width>0){
_a7.width=MIN(_a7.width,_aa.width);
}
if(_aa.height>0){
_a7.height=MIN(_a7.height,_aa.height);
}
}else{
_a7.width=_ad.width+_a8.left+_a8.right;
}
_a7.width=MAX(_a7.width,_a9.width);
return _a7;
}
}),new objj_method(sel_getUid("selectText:"),function(_af,_b0,_b1){
with(_af){
objj_msgSend(_af,"_selectText:immediately:",_b1,NO);
}
}),new objj_method(sel_getUid("_selectText:immediately:"),function(_b2,_b3,_b4,_b5){
with(_b2){
if((objj_msgSend(_b2,"isEditable")||objj_msgSend(_b2,"isSelectable"))){
var _b6=objj_msgSend(_b2,"window");
var _b7=objj_msgSend(_b2,"_inputElement");
if(objj_msgSend(_b6,"firstResponder")===_b2){
if(_b5){
_b7.select();
}else{
window.setTimeout(function(){
_b7.select();
},0);
}
}else{
if(_b6!==nil&&objj_msgSend(_b6,"makeFirstResponder:",_b2)){
objj_msgSend(_b2,"_selectText:immediately:",_b4,_b5);
}
}
}
}
}),new objj_method(sel_getUid("copy:"),function(_b8,_b9,_ba){
with(_b8){
if(!objj_msgSend(CPPlatform,"isBrowser")){
var _bb=objj_msgSend(_b8,"selectedRange");
if(_bb.length<1){
return;
}
var _bc=objj_msgSend(CPPasteboard,"generalPasteboard"),_bd=objj_msgSend(_stringValue,"substringWithRange:",_bb);
objj_msgSend(_bc,"declareTypes:owner:",[CPStringPboardType],nil);
objj_msgSend(_bc,"setString:forType:",_bd,CPStringPboardType);
}
}
}),new objj_method(sel_getUid("cut:"),function(_be,_bf,_c0){
with(_be){
if(!objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_be,"copy:",_c0);
objj_msgSend(_be,"deleteBackward:",_c0);
}else{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_be,sel_getUid("keyUp:"),nil,NO);
}
}
}),new objj_method(sel_getUid("paste:"),function(_c1,_c2,_c3){
with(_c1){
if(!objj_msgSend(CPPlatform,"isBrowser")){
var _c4=objj_msgSend(CPPasteboard,"generalPasteboard");
if(!objj_msgSend(objj_msgSend(_c4,"types"),"containsObject:",CPStringPboardType)){
return;
}
objj_msgSend(_c1,"deleteBackward:",_c3);
var _c5=objj_msgSend(_c1,"selectedRange"),_c6=objj_msgSend(_c4,"stringForType:",CPStringPboardType),_c7=objj_msgSend(_stringValue,"stringByReplacingCharactersInRange:withString:",_c5,_c6);
objj_msgSend(_c1,"setStringValue:",_c7);
objj_msgSend(_c1,"setSelectedRange:",CPMakeRange(_c5.location+_c6.length,0));
}else{
objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0,_c1,sel_getUid("keyUp:"),nil,NO);
}
}
}),new objj_method(sel_getUid("selectedRange"),function(_c8,_c9){
with(_c8){
if(objj_msgSend(objj_msgSend(_c8,"window"),"firstResponder")!==_c8){
return CPMakeRange(0,0);
}
try{
var _ca=objj_msgSend(_c8,"_inputElement"),_cb=_ca.selectionStart,_cc=_ca.selectionEnd;
if(objj_msgSend(_cb,"isKindOfClass:",CPNumber)){
return CPMakeRange(_cb,_cc-_cb);
}
var _cd=_ca.ownerDocument||_ca.document,_ce=_cd.selection.createRange(),_cf=_ca.createTextRange();
if(_cf.inRange(_ce)){
_cf.setEndPoint("EndToStart",_ce);
return CPMakeRange(_cf.text.length,_ce.text.length);
}
}
catch(e){
}
return CPMakeRange(0,0);
}
}),new objj_method(sel_getUid("setSelectedRange:"),function(_d0,_d1,_d2){
with(_d0){
if(!objj_msgSend(objj_msgSend(_d0,"window"),"firstResponder")===_d0){
return;
}
var _d3=objj_msgSend(_d0,"_inputElement");
try{
if(objj_msgSend(_d3.selectionStart,"isKindOfClass:",CPNumber)){
_d3.selectionStart=_d2.location;
_d3.selectionEnd=CPMaxRange(_d2);
}else{
var _d4=_d3.ownerDocument||_d3.document,_d5=_d4.selection.createRange(),_d6=_d3.createTextRange();
if(_d6.inRange(_d5)){
_d6.collapse(true);
_d6.move("character",_d2.location);
_d6.moveEnd("character",_d2.length);
_d6.select();
}
}
}
catch(e){
}
}
}),new objj_method(sel_getUid("selectAll:"),function(_d7,_d8,_d9){
with(_d7){
objj_msgSend(_d7,"selectText:",_d9);
}
}),new objj_method(sel_getUid("deleteBackward:"),function(_da,_db,_dc){
with(_da){
var _dd=objj_msgSend(_da,"selectedRange");
if(_dd.length<2){
return;
}
_dd.location+=1;
_dd.length-=1;
var _de=objj_msgSend(_stringValue,"stringByReplacingCharactersInRange:withString:",_dd,"");
objj_msgSend(_da,"setStringValue:",_de);
objj_msgSend(_da,"setSelectedRange:",CPMakeRange(_dd.location,0));
}
}),new objj_method(sel_getUid("setDelegate:"),function(_df,_e0,_e1){
with(_df){
var _e2=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_delegate){
objj_msgSend(_e2,"removeObserver:name:object:",_delegate,CPControlTextDidBeginEditingNotification,_df);
objj_msgSend(_e2,"removeObserver:name:object:",_delegate,CPControlTextDidChangeNotification,_df);
objj_msgSend(_e2,"removeObserver:name:object:",_delegate,CPControlTextDidEndEditingNotification,_df);
objj_msgSend(_e2,"removeObserver:name:object:",_delegate,CPTextFieldDidFocusNotification,_df);
objj_msgSend(_e2,"removeObserver:name:object:",_delegate,CPTextFieldDidBlurNotification,_df);
}
_delegate=_e1;
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidBeginEditing:"))){
objj_msgSend(_e2,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidBeginEditing:"),CPControlTextDidBeginEditingNotification,_df);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidChange:"))){
objj_msgSend(_e2,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidChange:"),CPControlTextDidChangeNotification,_df);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidEndEditing:"))){
objj_msgSend(_e2,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidEndEditing:"),CPControlTextDidEndEditingNotification,_df);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidFocus:"))){
objj_msgSend(_e2,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidFocus:"),CPTextFieldDidFocusNotification,_df);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("controlTextDidBlur:"))){
objj_msgSend(_e2,"addObserver:selector:name:object:",_delegate,sel_getUid("controlTextDidBlur:"),CPTextFieldDidBlurNotification,_df);
}
}
}),new objj_method(sel_getUid("delegate"),function(_e3,_e4){
with(_e3){
return _delegate;
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_e5,_e6,_e7){
with(_e5){
var _e8=objj_msgSend(_e5,"currentValueForThemeAttribute:","content-inset");
if(!_e8){
return _e7;
}
_e7.origin.x+=_e8.left;
_e7.origin.y+=_e8.top;
_e7.size.width-=_e8.left+_e8.right;
_e7.size.height-=_e8.top+_e8.bottom;
return _e7;
}
}),new objj_method(sel_getUid("bezelRectForBounds:"),function(_e9,_ea,_eb){
with(_e9){
var _ec=objj_msgSend(_e9,"currentValueForThemeAttribute:","bezel-inset");
if(((_ec).top===0&&(_ec).right===0&&(_ec).bottom===0&&(_ec).left===0)){
return _eb;
}
_eb.origin.x+=_ec.left;
_eb.origin.y+=_ec.top;
_eb.size.width-=_ec.left+_ec.right;
_eb.size.height-=_ec.top+_ec.bottom;
return _eb;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(_ed,_ee,_ef){
with(_ed){
if(_ef==="bezel-view"){
return objj_msgSend(_ed,"bezelRectForBounds:",objj_msgSend(_ed,"bounds"));
}else{
if(_ef==="content-view"){
return objj_msgSend(_ed,"contentRectForBounds:",objj_msgSend(_ed,"bounds"));
}
}
return objj_msgSendSuper({receiver:_ed,super_class:objj_getClass("CPTextField").super_class},"rectForEphemeralSubviewNamed:",_ef);
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(_f0,_f1,_f2){
with(_f0){
if(_f2==="bezel-view"){
var _f3=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_f3,"setHitTests:",NO);
return _f3;
}else{
var _f3=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_f3,"setHitTests:",NO);
return _f3;
}
return objj_msgSendSuper({receiver:_f0,super_class:objj_getClass("CPTextField").super_class},"createEphemeralSubviewNamed:",_f2);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_f4,_f5){
with(_f4){
var _f6=objj_msgSend(_f4,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
if(_f6){
objj_msgSend(_f6,"setBackgroundColor:",objj_msgSend(_f4,"currentValueForThemeAttribute:","bezel-color"));
}
var _f7=objj_msgSend(_f4,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_f7){
objj_msgSend(_f7,"setHidden:",objj_msgSend(_f4,"hasThemeState:",CPThemeStateEditing));
var _f8="";
if(objj_msgSend(_f4,"hasThemeState:",CPTextFieldStatePlaceholder)){
_f8=objj_msgSend(_f4,"placeholderString");
}else{
_f8=_stringValue;
if(objj_msgSend(_f4,"isSecure")){
_f8=_f9(_f8);
}
}
objj_msgSend(_f7,"setText:",_f8);
objj_msgSend(_f7,"setTextColor:",objj_msgSend(_f4,"currentValueForThemeAttribute:","text-color"));
objj_msgSend(_f7,"setFont:",objj_msgSend(_f4,"currentValueForThemeAttribute:","font"));
objj_msgSend(_f7,"setAlignment:",objj_msgSend(_f4,"currentValueForThemeAttribute:","alignment"));
objj_msgSend(_f7,"setVerticalAlignment:",objj_msgSend(_f4,"currentValueForThemeAttribute:","vertical-alignment"));
objj_msgSend(_f7,"setLineBreakMode:",objj_msgSend(_f4,"currentValueForThemeAttribute:","line-break-mode"));
objj_msgSend(_f7,"setTextShadowColor:",objj_msgSend(_f4,"currentValueForThemeAttribute:","text-shadow-color"));
objj_msgSend(_f7,"setTextShadowOffset:",objj_msgSend(_f4,"currentValueForThemeAttribute:","text-shadow-offset"));
}
}
}),new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"),function(_fa,_fb,_fc,_fd){
with(_fa){
var _fe=_fd.length,_ff=objj_msgSend(_fd[0],"valueForKeyPath:",_fc);
objj_msgSend(_fa,"setStringValue:",_ff);
objj_msgSend(_fa,"setPlaceholderString:","");
while(_fe-->1){
if(_ff!==objj_msgSend(_fd[_fe],"valueForKeyPath:",_fc)){
objj_msgSend(_fa,"setPlaceholderString:","Multiple Values");
objj_msgSend(_fa,"setStringValue:","");
}
}
}
})]);
class_addMethods(_e,[new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:"),function(self,_100,_101,_102,_103){
with(self){
return objj_msgSend(self,"textFieldWithStringValue:placeholder:width:theme:",_101,_102,_103,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:theme:"),function(self,_104,_105,_106,_107,_108){
with(self){
var _109=objj_msgSend(objj_msgSend(self,"alloc"),"initWithFrame:",CGRectMake(0,0,_107,29));
objj_msgSend(_109,"setTheme:",_108);
objj_msgSend(_109,"setStringValue:",_105);
objj_msgSend(_109,"setPlaceholderString:",_106);
objj_msgSend(_109,"setBordered:",YES);
objj_msgSend(_109,"setBezeled:",YES);
objj_msgSend(_109,"setEditable:",YES);
objj_msgSend(_109,"sizeToFit");
return _109;
}
}),new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:"),function(self,_10a,_10b,_10c,_10d){
with(self){
return objj_msgSend(self,"roundedTextFieldWithStringValue:placeholder:width:theme:",_10b,_10c,_10d,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:theme:"),function(self,_10e,_10f,_110,_111,_112){
with(self){
var _113=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMake(0,0,_111,29));
objj_msgSend(_113,"setTheme:",_112);
objj_msgSend(_113,"setStringValue:",_10f);
objj_msgSend(_113,"setPlaceholderString:",_110);
objj_msgSend(_113,"setBezelStyle:",CPTextFieldRoundedBezel);
objj_msgSend(_113,"setBordered:",YES);
objj_msgSend(_113,"setBezeled:",YES);
objj_msgSend(_113,"setEditable:",YES);
objj_msgSend(_113,"sizeToFit");
return _113;
}
}),new objj_method(sel_getUid("labelWithTitle:"),function(self,_114,_115){
with(self){
return objj_msgSend(self,"labelWithTitle:theme:",_115,objj_msgSend(CPTheme,"defaultTheme"));
}
}),new objj_method(sel_getUid("labelWithTitle:theme:"),function(self,_116,_117,_118){
with(self){
var _119=objj_msgSend(objj_msgSend(self,"alloc"),"init");
objj_msgSend(_119,"setStringValue:",_117);
objj_msgSend(_119,"sizeToFit");
return _119;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(self,_11a){
with(self){
return "textfield";
}
}),new objj_method(sel_getUid("_binderClassForBinding:"),function(self,_11b,_11c){
with(self){
if(_11c===CPValueBinding){
return objj_msgSend(_CPTextFieldValueBinder,"class");
}
return objj_msgSendSuper({receiver:self,super_class:objj_getMetaClass("CPTextField").super_class},"_binderClassForBinding:",_11c);
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_11d){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[{top:(0),right:(0),bottom:(0),left:(0)},{top:(2),right:(2),bottom:(2),left:(2)},objj_msgSend(CPNull,"null")],["bezel-inset","content-inset","bezel-color"]);
}
})]);
var _f9=function(_11e){
if(!_11e){
return "";
}
return Array(_11e.length+1).join(_c);
};
var _11f="CPTextFieldIsEditableKey",_120="CPTextFieldIsSelectableKey",_121="CPTextFieldIsBorderedKey",_122="CPTextFieldIsBezeledKey",_123="CPTextFieldBezelStyleKey",_124="CPTextFieldDrawsBackgroundKey",_125="CPTextFieldLineBreakModeKey",_126="CPTextFieldAlignmentKey",_127="CPTextFieldBackgroundColorKey",_128="CPTextFieldPlaceholderStringKey";
var _d=objj_getClass("CPTextField");
if(!_d){
throw new SyntaxError("*** Could not find definition for class \"CPTextField\"");
}
var _e=_d.isa;
class_addMethods(_d,[new objj_method(sel_getUid("initWithCoder:"),function(self,_129,_12a){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTextField").super_class},"initWithCoder:",_12a);
if(self){
objj_msgSend(self,"setEditable:",objj_msgSend(_12a,"decodeBoolForKey:",_11f));
objj_msgSend(self,"setSelectable:",objj_msgSend(_12a,"decodeBoolForKey:",_120));
objj_msgSend(self,"setDrawsBackground:",objj_msgSend(_12a,"decodeBoolForKey:",_124));
objj_msgSend(self,"setTextFieldBackgroundColor:",objj_msgSend(_12a,"decodeObjectForKey:",_127));
objj_msgSend(self,"setLineBreakMode:",objj_msgSend(_12a,"decodeIntForKey:",_125));
objj_msgSend(self,"setAlignment:",objj_msgSend(_12a,"decodeIntForKey:",_126));
objj_msgSend(self,"setPlaceholderString:",objj_msgSend(_12a,"decodeObjectForKey:",_128));
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_12b,_12c){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTextField").super_class},"encodeWithCoder:",_12c);
objj_msgSend(_12c,"encodeBool:forKey:",_isEditable,_11f);
objj_msgSend(_12c,"encodeBool:forKey:",_isSelectable,_120);
objj_msgSend(_12c,"encodeBool:forKey:",_drawsBackground,_124);
objj_msgSend(_12c,"encodeObject:forKey:",_textFieldBackgroundColor,_127);
objj_msgSend(_12c,"encodeInt:forKey:",objj_msgSend(self,"lineBreakMode"),_125);
objj_msgSend(_12c,"encodeInt:forKey:",objj_msgSend(self,"alignment"),_126);
objj_msgSend(_12c,"encodeObject:forKey:",_placeholderString,_128);
}
})]);
var _d=objj_allocateClassPair(CPBinder,"_CPTextFieldValueBinder"),_e=_d.isa;
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"),function(self,_12d,_12e){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPTextFieldValueBinder").super_class},"_updatePlaceholdersWithOptions:",_12e);
objj_msgSend(self,"_setPlaceholder:forMarker:isDefault:","Multiple Values",CPMultipleValuesMarker,YES);
objj_msgSend(self,"_setPlaceholder:forMarker:isDefault:","No Selection",CPNoSelectionMarker,YES);
objj_msgSend(self,"_setPlaceholder:forMarker:isDefault:","Not Applicable",CPNotApplicableMarker,YES);
objj_msgSend(self,"_setPlaceholder:forMarker:isDefault:","",CPNullMarker,YES);
}
}),new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"),function(self,_12f,_130,_131,_132){
with(self){
objj_msgSend(_source,"setPlaceholderString:",_130);
objj_msgSend(_source,"setObjectValue:",nil);
}
}),new objj_method(sel_getUid("setValue:forBinding:"),function(self,_133,_134,_135){
with(self){
objj_msgSend(_source,"setObjectValue:",_134);
}
})]);
p;9;CPTheme.jt;13406;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jI;30;Foundation/CPKeyedUnarchiver.jt;13299;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
var _1={},_2=nil,_3=nil;
var _4=objj_allocateClassPair(CPObject,"CPTheme"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_name"),new objj_ivar("_attributes")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithName:"),function(_6,_7,_8){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPTheme").super_class},"init");
if(_6){
_name=_8;
_attributes=objj_msgSend(CPDictionary,"dictionary");
_1[_name]=_6;
}
return _6;
}
}),new objj_method(sel_getUid("name"),function(_9,_a){
with(_9){
return _name;
}
}),new objj_method(sel_getUid("classNames"),function(_b,_c){
with(_b){
return objj_msgSend(_attributes,"allKeys");
}
}),new objj_method(sel_getUid("attributesForClass:"),function(_d,_e,_f){
with(_d){
if(!_f){
return nil;
}
var _10=nil;
if(objj_msgSend(_f,"isKindOfClass:",objj_msgSend(CPString,"class"))){
var _11=CPClassFromString(_f);
if(_11){
_f=_11;
}else{
_10=_f;
}
}
if(!_10){
if(objj_msgSend(_f,"isKindOfClass:",objj_msgSend(CPView,"class"))){
if(objj_msgSend(_f,"respondsToSelector:",sel_getUid("defaultThemeClass"))){
_10=objj_msgSend(_f,"defaultThemeClass");
}else{
if(objj_msgSend(_f,"respondsToSelector:",sel_getUid("themeClass"))){
CPLog.warn("%@ themeClass is deprecated in favor of defaultThemeClass",CPStringFromClass(objj_msgSend(anObject,"class")));
_10=objj_msgSend(_f,"themeClass");
}else{
return nil;
}
}
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"aClass must be a class object or a string.");
}
}
return objj_msgSend(_attributes,"objectForKey:",_10);
}
}),new objj_method(sel_getUid("attributeNamesForClass:"),function(_12,_13,_14){
with(_12){
var _15=objj_msgSend(_12,"attributesForClass:",_14);
if(_15){
return objj_msgSend(_15,"allKeys");
}else{
return objj_msgSend(CPArray,"array");
}
}
}),new objj_method(sel_getUid("attributeWithName:forClass:"),function(_16,_17,_18,_19){
with(_16){
var _1a=objj_msgSend(_16,"attributesForClass:",_19);
if(!_1a){
return nil;
}
return objj_msgSend(_1a,"objectForKey:",_18);
}
}),new objj_method(sel_getUid("valueForAttributeWithName:forClass:"),function(_1b,_1c,_1d,_1e){
with(_1b){
return objj_msgSend(_1b,"valueForAttributeWithName:inState:forClass:",_1d,CPThemeStateNormal,_1e);
}
}),new objj_method(sel_getUid("valueForAttributeWithName:inState:forClass:"),function(_1f,_20,_21,_22,_23){
with(_1f){
var _24=objj_msgSend(_1f,"attributeWithName:forClass:",_21,_23);
if(!_24){
return nil;
}
return objj_msgSend(_24,"valueForState:",_22);
}
}),new objj_method(sel_getUid("takeThemeFromObject:"),function(_25,_26,_27){
with(_25){
var _28=objj_msgSend(_27,"_themeAttributeDictionary"),_29=nil,_2a=objj_msgSend(_28,"keyEnumerator"),_2b=objj_msgSend(_27,"themeClass");
while((_29=objj_msgSend(_2a,"nextObject"))!==nil){
objj_msgSend(_25,"_recordAttribute:forClass:",objj_msgSend(_28,"objectForKey:",_29),_2b);
}
}
}),new objj_method(sel_getUid("_recordAttribute:forClass:"),function(_2c,_2d,_2e,_2f){
with(_2c){
if(!objj_msgSend(_2e,"hasValues")){
return;
}
var _30=objj_msgSend(_attributes,"objectForKey:",_2f);
if(!_30){
_30=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_attributes,"setObject:forKey:",_30,_2f);
}
var _31=objj_msgSend(_2e,"name"),_32=objj_msgSend(_30,"objectForKey:",_31);
if(_32){
objj_msgSend(_30,"setObject:forKey:",objj_msgSend(_32,"attributeMergedWithAttribute:",_2e),_31);
}else{
objj_msgSend(_30,"setObject:forKey:",_2e,_31);
}
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("setDefaultTheme:"),function(_33,_34,_35){
with(_33){
_2=_35;
}
}),new objj_method(sel_getUid("defaultTheme"),function(_36,_37){
with(_36){
return _2;
}
}),new objj_method(sel_getUid("setDefaultHudTheme:"),function(_38,_39,_3a){
with(_38){
_3=_3a;
}
}),new objj_method(sel_getUid("defaultHudTheme"),function(_3b,_3c){
with(_3b){
if(!_3){
_3=objj_msgSend(CPTheme,"themeNamed:",objj_msgSend(objj_msgSend(_3b,"defaultTheme"),"name")+"-HUD");
}
return _3;
}
}),new objj_method(sel_getUid("themeNamed:"),function(_3d,_3e,_3f){
with(_3d){
return _1[_3f];
}
})]);
var _40="CPThemeNameKey",_41="CPThemeAttributesKey";
var _4=objj_getClass("CPTheme");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPTheme\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_42,_43,_44){
with(_42){
_42=objj_msgSendSuper({receiver:_42,super_class:objj_getClass("CPTheme").super_class},"init");
if(_42){
_name=objj_msgSend(_44,"decodeObjectForKey:",_40);
_attributes=objj_msgSend(_44,"decodeObjectForKey:",_41);
_1[_name]=_42;
}
return _42;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_45,_46,_47){
with(_45){
objj_msgSend(_47,"encodeObject:forKey:",_name,_40);
objj_msgSend(_47,"encodeObject:forKey:",_attributes,_41);
}
})]);
var _4=objj_allocateClassPair(CPKeyedUnarchiver,"_CPThemeKeyedUnarchiver"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_bundle")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initForReadingWithData:bundle:"),function(_48,_49,_4a,_4b){
with(_48){
_48=objj_msgSendSuper({receiver:_48,super_class:objj_getClass("_CPThemeKeyedUnarchiver").super_class},"initForReadingWithData:",_4a);
if(_48){
_bundle=_4b;
}
return _48;
}
}),new objj_method(sel_getUid("bundle"),function(_4c,_4d){
with(_4c){
return _bundle;
}
}),new objj_method(sel_getUid("awakenCustomResources"),function(_4e,_4f){
with(_4e){
return YES;
}
})]);
var _50={},_51={},_52=0;
CPThemeState=function(_53){
var _54=_50[_53];
if(_54===undefined){
if(_53.indexOf("+")===-1){
_54=1<<_52++;
}else{
var _54=0,_55=_53.split("+"),_56=_55.length;
while(_56--){
var _57=_55[_56],_58=_50[_57];
if(_58===undefined){
_58=1<<_52++;
_50[_57]=_58;
_51[_58]=_57;
}
_54|=_58;
}
}
_50[_53]=_54;
_51[_54]=_53;
}
return _54;
};
CPThemeStateName=function(_59){
var _5a=_51[_59];
if(_5a!==undefined){
return _5a;
}
if(!(_59&(_59-1))){
return "";
}
var _5b=1,_5a="";
for(;_5b<_59;_5b<<=1){
if(_59&_5b){
_5a+=(_5a.length===0?"":"+")+_51[_5b];
}
}
_51[_59]=_5a;
return _5a;
};
_51[0]="normal";
CPThemeStateNormal=_50["normal"]=0;
CPThemeStateDisabled=CPThemeState("disabled");
CPThemeStateHovered=CPThemeState("hovered");
CPThemeStateHighlighted=CPThemeState("highlighted");
CPThemeStateSelected=CPThemeState("selected");
CPThemeStateTableDataView=CPThemeState("tableDataView");
CPThemeStateSelectedDataView=CPThemeStateSelectedTableDataView=CPThemeState("selectedTableDataView");
CPThemeStateGroupRow=CPThemeState("CPThemeStateGroupRow");
CPThemeStateBezeled=CPThemeState("bezeled");
CPThemeStateBordered=CPThemeState("bordered");
CPThemeStateEditable=CPThemeState("editable");
CPThemeStateEditing=CPThemeState("editing");
CPThemeStateVertical=CPThemeState("vertical");
CPThemeStateDefault=CPThemeState("default");
CPThemeStateCircular=CPThemeState("circular");
var _4=objj_allocateClassPair(CPObject,"_CPThemeAttribute"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_name"),new objj_ivar("_defaultValue"),new objj_ivar("_values"),new objj_ivar("_cache"),new objj_ivar("_parentAttribute")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("values"),function(_5c,_5d){
with(_5c){
return _values;
}
}),new objj_method(sel_getUid("initWithName:defaultValue:"),function(_5e,_5f,_60,_61){
with(_5e){
_5e=objj_msgSendSuper({receiver:_5e,super_class:objj_getClass("_CPThemeAttribute").super_class},"init");
if(_5e){
_cache={};
_name=_60;
_defaultValue=_61;
_values=objj_msgSend(CPDictionary,"dictionary");
}
return _5e;
}
}),new objj_method(sel_getUid("name"),function(_62,_63){
with(_62){
return _name;
}
}),new objj_method(sel_getUid("defaultValue"),function(_64,_65){
with(_64){
return _defaultValue;
}
}),new objj_method(sel_getUid("hasValues"),function(_66,_67){
with(_66){
return objj_msgSend(_values,"count")>0;
}
}),new objj_method(sel_getUid("isTrivial"),function(_68,_69){
with(_68){
return (objj_msgSend(_values,"count")===1)&&(Number(objj_msgSend(_values,"allKeys")[0])===CPThemeStateNormal);
}
}),new objj_method(sel_getUid("setValue:"),function(_6a,_6b,_6c){
with(_6a){
_cache={};
if(_6c===undefined||_6c===nil){
_values=objj_msgSend(CPDictionary,"dictionary");
}else{
_values=objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_6c,String(CPThemeStateNormal));
}
}
}),new objj_method(sel_getUid("setValue:forState:"),function(_6d,_6e,_6f,_70){
with(_6d){
_cache={};
if((_6f===undefined)||(_6f===nil)){
objj_msgSend(_values,"removeObjectForKey:",String(_70));
}else{
objj_msgSend(_values,"setObject:forKey:",_6f,String(_70));
}
}
}),new objj_method(sel_getUid("value"),function(_71,_72){
with(_71){
return objj_msgSend(_71,"valueForState:",CPThemeStateNormal);
}
}),new objj_method(sel_getUid("valueForState:"),function(_73,_74,_75){
with(_73){
var _76=_cache[_75];
if(_76!==undefined){
return _76;
}
_76=objj_msgSend(_values,"objectForKey:",String(_75));
if((_76===undefined||_76===nil)&&_75!==CPThemeStateNormal){
if(_75&(_75-1)){
var _77=0,_78=objj_msgSend(_values,"allKeys"),_79=_78.length;
while(_79--){
var _7a=Number(_78[_79]);
if((_7a&_75)===_7a){
var _7b=_7c[_7a];
if(_7b===undefined){
_7b=_7d(_7a);
}
if(_7b>_77){
_77=_7b;
_76=objj_msgSend(_values,"objectForKey:",String(_7a));
}
}
}
}
if(_76===undefined||_76===nil){
_76=objj_msgSend(_values,"objectForKey:",String(CPThemeStateNormal));
}
}
if(_76===undefined||_76===nil){
_76=objj_msgSend(_parentAttribute,"valueForState:",_75);
}
if(_76===undefined||_76===nil){
_76=_defaultValue;
}
_cache[_75]=_76;
return _76;
}
}),new objj_method(sel_getUid("setParentAttribute:"),function(_7e,_7f,_80){
with(_7e){
if(_parentAttribute===_80){
return;
}
_cache={};
_parentAttribute=_80;
}
}),new objj_method(sel_getUid("attributeMergedWithAttribute:"),function(_81,_82,_83){
with(_81){
var _84=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_name,_defaultValue);
_84._values=objj_msgSend(_values,"copy");
objj_msgSend(_84._values,"addEntriesFromDictionary:",_83._values);
return _84;
}
})]);
var _4=objj_getClass("_CPThemeAttribute");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"_CPThemeAttribute\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_85,_86,_87){
with(_85){
_85=objj_msgSendSuper({receiver:_85,super_class:objj_getClass("_CPThemeAttribute").super_class},"init");
if(_85){
_cache={};
_name=objj_msgSend(_87,"decodeObjectForKey:","name");
_defaultValue=objj_msgSend(_87,"decodeObjectForKey:","defaultValue");
_values=objj_msgSend(CPDictionary,"dictionary");
if(objj_msgSend(_87,"containsValueForKey:","value")){
var _88=CPThemeStateNormal;
if(objj_msgSend(_87,"containsValueForKey:","state")){
_88=CPThemeState(objj_msgSend(_87,"decodeObjectForKey:","state"));
}
objj_msgSend(_values,"setObject:forKey:",objj_msgSend(_87,"decodeObjectForKey:","value"),_88);
}else{
var _89=objj_msgSend(_87,"decodeObjectForKey:","values"),_8a=objj_msgSend(_89,"allKeys"),_8b=_8a.length;
while(_8b--){
var key=_8a[_8b];
objj_msgSend(_values,"setObject:forKey:",objj_msgSend(_89,"objectForKey:",key),CPThemeState(key));
}
}
}
return _85;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_8c,_8d,_8e){
with(_8c){
objj_msgSend(_8e,"encodeObject:forKey:",_name,"name");
objj_msgSend(_8e,"encodeObject:forKey:",_defaultValue,"defaultValue");
var _8f=objj_msgSend(_values,"allKeys"),_90=_8f.length;
if(_90===1){
var _91=_8f[0];
if(Number(_91)!==CPThemeStateNormal){
objj_msgSend(_8e,"encodeObject:forKey:",CPThemeStateName(Number(_91)),"state");
}
objj_msgSend(_8e,"encodeObject:forKey:",objj_msgSend(_values,"objectForKey:",_91),"value");
}else{
var _92=objj_msgSend(CPDictionary,"dictionary");
while(_90--){
var key=_8f[_90];
objj_msgSend(_92,"setObject:forKey:",objj_msgSend(_values,"objectForKey:",key),CPThemeStateName(Number(key)));
}
objj_msgSend(_8e,"encodeObject:forKey:",_92,"values");
}
}
})]);
var _7c=[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5,2,3,3,4,3,4,4,5,3,4,4,5,4,5,5,6];
var _7d=function(_93){
var _94=0,_95=_93;
while(_93){
++_94;
_93&=(_93-1);
}
_7c[_95]=_94;
return _94;
};
_7d.displayName="numberOfOnes";
CPThemeAttributeEncode=function(_96,_97){
var _98=_97._values,_99=objj_msgSend(_98,"count"),key="$a"+objj_msgSend(_97,"name");
if(_99===1){
var _9a=objj_msgSend(_98,"allKeys")[0];
if(Number(_9a)===0){
objj_msgSend(_96,"encodeObject:forKey:",objj_msgSend(_98,"objectForKey:",_9a),key);
return YES;
}
}
if(_99>=1){
objj_msgSend(_96,"encodeObject:forKey:",_97,key);
return YES;
}
return NO;
};
CPThemeAttributeDecode=function(_9b,_9c,_9d,_9e,_9f){
var key="$a"+_9c;
if(!objj_msgSend(_9b,"containsValueForKey:",key)){
var _a0=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_9c,_9d);
}else{
var _a0=objj_msgSend(_9b,"decodeObjectForKey:",key);
if(!_a0.isa||!objj_msgSend(_a0,"isKindOfClass:",objj_msgSend(_CPThemeAttribute,"class"))){
var _a1=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_9c,_9d);
objj_msgSend(_a1,"setValue:",_a0);
_a0=_a1;
}
}
if(_9e&&_9f){
objj_msgSend(_a0,"setParentAttribute:",objj_msgSend(_9e,"attributeWithName:forClass:",_9c,_9f));
}
return _a0;
};
p;14;CPThemeBlend.jt;1813;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CPTheme.ji;22;_CPCibCustomResource.ji;23;_CPCibKeyedUnarchiver.jt;1700;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPTheme.j",YES);
objj_executeFile("_CPCibCustomResource.j",YES);
objj_executeFile("_CPCibKeyedUnarchiver.j",YES);
var _1=objj_allocateClassPair(CPObject,"CPThemeBlend"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_bundle"),new objj_ivar("_themes"),new objj_ivar("_loadDelegate")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithContentsOfURL:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPThemeBlend").super_class},"init");
if(_3){
_bundle=objj_msgSend(objj_msgSend(CPBundle,"alloc"),"initWithPath:",_5);
}
return _3;
}
}),new objj_method(sel_getUid("themes"),function(_6,_7){
with(_6){
return _themes;
}
}),new objj_method(sel_getUid("themeNames"),function(_8,_9){
with(_8){
var _a=[];
for(var i=0;i<_themes.length;++i){
_a.push(_themes[i].substring(0,_themes[i].indexOf(".keyedtheme")));
}
return _a;
}
}),new objj_method(sel_getUid("loadWithDelegate:"),function(_b,_c,_d){
with(_b){
_loadDelegate=_d;
objj_msgSend(_bundle,"loadWithDelegate:",_b);
}
}),new objj_method(sel_getUid("bundleDidFinishLoading:"),function(_e,_f,_10){
with(_e){
_themes=objj_msgSend(_bundle,"objectForInfoDictionaryKey:","CPKeyedThemes");
var _11=_themes.length;
while(_11--){
var _12=objj_msgSend(_10,"pathForResource:",_themes[_11]),_13=objj_msgSend(objj_msgSend(_CPThemeKeyedUnarchiver,"alloc"),"initForReadingWithData:bundle:",objj_msgSend(objj_msgSend(CPURL,"URLWithString:",_12),"staticResourceData"),_bundle);
objj_msgSend(_13,"decodeObjectForKey:","root");
objj_msgSend(_13,"finishDecoding");
}
objj_msgSend(_loadDelegate,"blendDidFinishLoading:",_e);
}
})]);
p;14;CPTokenField.jt;34146;@STATIC;1.0;I;27;Foundation/CPCharacterSet.jI;23;Foundation/CPIndexSet.jI;20;Foundation/CPTimer.ji;10;CPButton.ji;14;CPScrollView.ji;13;CPTextField.ji;13;CPTableView.ji;10;CPWindow.ji;15;_CPMenuWindow.jt;33936;
objj_executeFile("Foundation/CPCharacterSet.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("Foundation/CPTimer.j",NO);
objj_executeFile("CPButton.j",YES);
objj_executeFile("CPScrollView.j",YES);
objj_executeFile("CPTextField.j",YES);
objj_executeFile("CPTableView.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
var _1=nil,_2=nil,_3=nil,_4=nil,_5=nil,_6=NO,_7=NO,_8=NO,_9=nil,_a=nil,_b=NO,_c=nil,_d=nil,_e=nil,_f=nil;
var _10="CPThemeStateAutoCompleting",_11="CPTokenFieldTableColumnIdentifier",_12=0,_13=1,_14=2;
var _15=objj_allocateClassPair(CPTextField,"CPTokenField"),_16=_15.isa;
class_addIvars(_15,[new objj_ivar("_tokenScrollView"),new objj_ivar("_shouldScrollTo"),new objj_ivar("_selectedRange"),new objj_ivar("_autocompleteContainer"),new objj_ivar("_autocompleteScrollView"),new objj_ivar("_autocompleteView"),new objj_ivar("_completionDelay"),new objj_ivar("_showCompletionsTimer"),new objj_ivar("_cachedCompletions"),new objj_ivar("_tokenizingCharacterSet"),new objj_ivar("_mouseDownEvent"),new objj_ivar("_preventResign"),new objj_ivar("_shouldNotifyTarget")]);
objj_registerClassPair(_15);
class_addMethods(_15,[new objj_method(sel_getUid("tokenizingCharacterSet"),function(_17,_18){
with(_17){
return _tokenizingCharacterSet;
}
}),new objj_method(sel_getUid("setTokenizingCharacterSet:"),function(_19,_1a,_1b){
with(_19){
_tokenizingCharacterSet=_1b;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_1c,_1d,_1e){
with(_1c){
if(_1c=objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPTokenField").super_class},"initWithFrame:",_1e)){
_completionDelay=objj_msgSend(CPTokenField,"defaultCompletionDelay");
_tokenizingCharacterSet=objj_msgSend(objj_msgSend(_1c,"class"),"defaultTokenizingCharacterSet");
objj_msgSend(_1c,"setBezeled:",YES);
objj_msgSend(_1c,"_init");
objj_msgSend(_1c,"setObjectValue:",[]);
objj_msgSend(_1c,"setNeedsLayout");
}
return _1c;
}
}),new objj_method(sel_getUid("_init"),function(_1f,_20){
with(_1f){
_selectedRange=CPMakeRange(0,0);
var _21=objj_msgSend(_1f,"frame");
_tokenScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_tokenScrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_tokenScrollView,"setHasVerticalScroller:",NO);
objj_msgSend(_tokenScrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
var _22=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_22,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_tokenScrollView,"setDocumentView:",_22);
objj_msgSend(_1f,"addSubview:",_tokenScrollView);
_cachedCompletions=[];
_autocompleteContainer=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CPRectMake(0,0,_21.size.width,92));
objj_msgSend(_autocompleteContainer,"setBackgroundColor:",objj_msgSend(_CPMenuWindow,"backgroundColorForBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle));
_autocompleteScrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",CPRectMake(1,1,_21.size.width-2,90));
objj_msgSend(_autocompleteScrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_autocompleteScrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_autocompleteContainer,"addSubview:",_autocompleteScrollView);
_autocompleteView=objj_msgSend(objj_msgSend(CPTableView,"alloc"),"initWithFrame:",CPRectMakeZero());
var _23=objj_msgSend(objj_msgSend(CPTableColumn,"alloc"),"initWithIdentifier:",_11);
objj_msgSend(_23,"setResizingMask:",CPTableColumnAutoresizingMask);
objj_msgSend(_autocompleteView,"addTableColumn:",_23);
objj_msgSend(_autocompleteView,"setDataSource:",_1f);
objj_msgSend(_autocompleteView,"setDelegate:",_1f);
objj_msgSend(_autocompleteView,"setAllowsMultipleSelection:",NO);
objj_msgSend(_autocompleteView,"setHeaderView:",nil);
objj_msgSend(_autocompleteView,"setCornerView:",nil);
objj_msgSend(_autocompleteView,"setRowHeight:",30);
objj_msgSend(_autocompleteView,"setGridStyleMask:",CPTableViewSolidHorizontalGridLineMask);
objj_msgSend(_autocompleteView,"setBackgroundColor:",objj_msgSend(CPColor,"clearColor"));
objj_msgSend(_autocompleteView,"setGridColor:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",242/255,243/255,245/255,1));
objj_msgSend(_autocompleteScrollView,"setDocumentView:",_autocompleteView);
}
}),new objj_method(sel_getUid("_retrieveCompletions"),function(_24,_25){
with(_24){
var _26=0;
_cachedCompletions=objj_msgSend(_24,"tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:",_24,objj_msgSend(_24,"_inputElement").value,0,_26);
objj_msgSend(_autocompleteView,"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_26),NO);
objj_msgSend(_autocompleteView,"reloadData");
}
}),new objj_method(sel_getUid("_autocompleteWithDOMEvent:"),function(_27,_28,_29){
with(_27){
if(!objj_msgSend(_27,"_inputElement").value&&(!_cachedCompletions||!objj_msgSend(_27,"hasThemeState:",_10))){
return;
}
objj_msgSend(_27,"_hideCompletions");
var _2a=_cachedCompletions?_cachedCompletions[objj_msgSend(_autocompleteView,"selectedRow")]:nil,_2b=_2a!==""&&objj_msgSend(_27,"_inputElement").value!=="";
if(!_2a){
_2a=objj_msgSend(_27,"_inputElement").value;
}
if(!_2a||_2a===""){
if(_29&&_29.keyCode===CPTabKeyCode){
if(!_29.shiftKey){
objj_msgSend(objj_msgSend(_27,"window"),"selectNextKeyView:",_27);
}else{
objj_msgSend(objj_msgSend(_27,"window"),"selectPreviousKeyView:",_27);
}
}else{
objj_msgSend(objj_msgSend(_27,"window"),"makeFirstResponder:",nil);
}
return;
}
var _2c=objj_msgSend(_27,"objectValue");
if(_2b){
objj_msgSend(_2c,"removeObjectAtIndex:",_selectedRange.location);
}
var _2d=objj_msgSend(_27,"tokenField:shouldAddObjects:atIndex:",_27,objj_msgSend(CPArray,"arrayWithObject:",_2a),_selectedRange.location),_2e=objj_msgSend(_2d,"count");
if(_2d){
for(var i=0;i<_2e;i++){
objj_msgSend(_2c,"insertObject:atIndex:",objj_msgSend(_2d,"objectAtIndex:",i),_selectedRange.location+i);
}
}
var _2f=_selectedRange.location;
objj_msgSend(_27,"setObjectValue:",_2c);
if(_2e){
_2f+=_2e;
}
_selectedRange=CPMakeRange(_2f,0);
objj_msgSend(_27,"_inputElement").value="";
objj_msgSend(_27,"setNeedsLayout");
objj_msgSend(_27,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("_autocomplete"),function(_30,_31){
with(_30){
objj_msgSend(_30,"_autocompleteWithDOMEvent:",nil);
}
}),new objj_method(sel_getUid("_selectToken:byExtendingSelection:"),function(_32,_33,_34,_35){
with(_32){
var _36=objj_msgSend(objj_msgSend(_32,"_tokens"),"indexOfObject:",_34);
if(_36==CPNotFound){
if(!_35){
_selectedRange=CPMakeRange(objj_msgSend(objj_msgSend(_32,"_tokens"),"count"),0);
}
}else{
if(_35){
_selectedRange=CPUnionRange(_selectedRange,CPMakeRange(_36,1));
}else{
_selectedRange=CPMakeRange(_36,1);
}
}
objj_msgSend(_32,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_deselectToken:"),function(_37,_38,_39){
with(_37){
var _3a=objj_msgSend(objj_msgSend(_37,"_tokens"),"indexOfObject:",_39);
if(CPLocationInRange(_3a,_selectedRange)){
_selectedRange=CPMakeRange(MAX(_3a,_selectedRange.location),MIN(_selectedRange.length,_3a-_selectedRange.location));
}
objj_msgSend(_37,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_deleteToken:"),function(_3b,_3c,_3d){
with(_3b){
var _3e=objj_msgSend(objj_msgSend(_3b,"_tokens"),"indexOfObject:",_3d),_3f=objj_msgSend(_3b,"objectValue");
if(_3e<_selectedRange.location){
_selectedRange.location--;
}else{
objj_msgSend(_3b,"_deselectToken:",_3d);
}
var _40=CPCopyRange(_selectedRange);
objj_msgSend(_3f,"removeObjectAtIndex:",_3e);
objj_msgSend(_3b,"setObjectValue:",_3f);
_selectedRange=_40;
objj_msgSend(_3b,"setNeedsLayout");
objj_msgSend(_3b,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("_controlTextDidChange"),function(_41,_42){
with(_41){
var _43=objj_msgSend(objj_msgSend(_41,"class"),"_binderClassForBinding:",CPValueBinding),_44=objj_msgSend(_43,"getBinding:forObject:",CPValueBinding,_41);
if(_44){
objj_msgSend(_44,"reverseSetValueFor:","objectValue");
}
objj_msgSend(_41,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_41,nil));
_shouldNotifyTarget=YES;
}
}),new objj_method(sel_getUid("_removeSelectedTokens:"),function(_45,_46,_47){
with(_45){
var _48=objj_msgSend(_45,"objectValue");
for(var i=_selectedRange.length-1;i>=0;i--){
objj_msgSend(_48,"removeObjectAtIndex:",_selectedRange.location+i);
}
var _49=_selectedRange.location;
objj_msgSend(_45,"setObjectValue:",_48);
_selectedRange=CPMakeRange(_49,0);
objj_msgSend(_45,"_controlTextDidChange");
}
}),new objj_method(sel_getUid("_updatePlaceholderState"),function(_4a,_4b){
with(_4a){
if((objj_msgSend(objj_msgSend(_4a,"_tokens"),"count")===0)&&!objj_msgSend(_4a,"hasThemeState:",CPThemeStateEditing)){
objj_msgSend(_4a,"setThemeState:",CPTextFieldStatePlaceholder);
}else{
objj_msgSend(_4a,"unsetThemeState:",CPTextFieldStatePlaceholder);
}
}
}),new objj_method(sel_getUid("becomeFirstResponder"),function(_4c,_4d){
with(_4c){
if(_4&&objj_msgSend(_4,"window")!==objj_msgSend(_4c,"window")){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
}
objj_msgSend(_4c,"setThemeState:",CPThemeStateEditing);
objj_msgSend(_4c,"_updatePlaceholderState");
objj_msgSend(_4c,"setNeedsLayout");
var _4e=objj_msgSend(_4c,"stringValue"),_4f=objj_msgSend(_4c,"_inputElement");
_4f.value=nil;
_4f.style.color=objj_msgSend(objj_msgSend(_4c,"currentValueForThemeAttribute:","text-color"),"cssString");
_4f.style.font=objj_msgSend(objj_msgSend(_4c,"currentValueForThemeAttribute:","font"),"cssString");
_4f.style.zIndex=1000;
switch(objj_msgSend(_4c,"alignment")){
case CPCenterTextAlignment:
_4f.style.textAlign="center";
break;
case CPRightTextAlignment:
_4f.style.textAlign="right";
break;
default:
_4f.style.textAlign="left";
}
var _50=objj_msgSend(_4c,"contentRectForBounds:",objj_msgSend(_4c,"bounds"));
_4f.style.top=CGRectGetMinY(_50)+"px";
_4f.style.left=(CGRectGetMinX(_50)-1)+"px";
_4f.style.width=CGRectGetWidth(_50)+"px";
_4f.style.height=CGRectGetHeight(_50)+"px";
objj_msgSend(_tokenScrollView,"documentView")._DOMElement.appendChild(_4f);
window.setTimeout(function(){
_4f.focus();
_4=_4c;
},0);
objj_msgSend(_4c,"textDidBeginEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidBeginEditingNotification,_4c,nil));
objj_msgSend(objj_msgSend(objj_msgSend(_4c,"window"),"platformWindow"),"_propagateCurrentDOMEvent:",YES);
_8=YES;
if(document.attachEvent){
_9=document.body.onselectstart;
_a=document.body.ondrag;
document.body.ondrag=function(){
};
document.body.onselectstart=function(){
};
}
return YES;
}
}),new objj_method(sel_getUid("resignFirstResponder"),function(_51,_52){
with(_51){
if(_preventResign){
return NO;
}
objj_msgSend(_51,"unsetThemeState:",CPThemeStateEditing);
objj_msgSend(_51,"_autocomplete");
var _53=objj_msgSend(_51,"_inputElement");
_6=YES;
_53.blur();
if(!_7){
_c();
}
_7=NO;
_6=NO;
if(_53.parentNode==objj_msgSend(_tokenScrollView,"documentView")._DOMElement){
_53.parentNode.removeChild(_53);
}
_8=NO;
if(document.attachEvent){
_9=nil;
_a=nil;
document.body.ondrag=_a;
document.body.onselectstart=_9;
}
objj_msgSend(_51,"_updatePlaceholderState");
objj_msgSend(_51,"setNeedsLayout");
if(_shouldNotifyTarget){
_shouldNotifyTarget=NO;
objj_msgSend(_51,"textDidEndEditing:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidEndEditingNotification,_51,nil));
if(objj_msgSend(_51,"sendsActionOnEndEditing")){
objj_msgSend(_51,"sendAction:to:",objj_msgSend(_51,"action"),objj_msgSend(_51,"target"));
}
}
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_54,_55,_56){
with(_54){
_preventResign=YES;
_mouseDownEvent=_56;
objj_msgSend(_54,"_selectToken:byExtendingSelection:",nil,NO);
objj_msgSendSuper({receiver:_54,super_class:objj_getClass("CPTokenField").super_class},"mouseDown:",_56);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_57,_58,_59){
with(_57){
_preventResign=NO;
_mouseDownEvent=nil;
}
}),new objj_method(sel_getUid("mouseDownOnToken:withEvent:"),function(_5a,_5b,_5c,_5d){
with(_5a){
_preventResign=YES;
_mouseDownEvent=_5d;
}
}),new objj_method(sel_getUid("mouseUpOnToken:withEvent:"),function(_5e,_5f,_60,_61){
with(_5e){
if(_mouseDownEvent&&CGPointEqualToPoint(objj_msgSend(_mouseDownEvent,"locationInWindow"),objj_msgSend(_61,"locationInWindow"))){
objj_msgSend(_5e,"_selectToken:byExtendingSelection:",_60,objj_msgSend(_61,"modifierFlags")&CPShiftKeyMask);
objj_msgSend(objj_msgSend(_5e,"window"),"makeFirstResponder:",_5e);
_shouldScrollTo=_60;
}
_preventResign=NO;
}
}),new objj_method(sel_getUid("_tokens"),function(_62,_63){
with(_62){
return objj_msgSendSuper({receiver:_62,super_class:objj_getClass("CPTokenField").super_class},"objectValue");
}
}),new objj_method(sel_getUid("stringValue"),function(_64,_65){
with(_64){
return objj_msgSend(objj_msgSend(_64,"objectValue"),"componentsJoinedByString:",",");
}
}),new objj_method(sel_getUid("objectValue"),function(_66,_67){
with(_66){
var _68=[];
for(var i=0,_69=objj_msgSend(objj_msgSend(_66,"_tokens"),"count");i<_69;i++){
var _6a=objj_msgSend(objj_msgSend(_66,"_tokens"),"objectAtIndex:",i);
if(objj_msgSend(_6a,"isKindOfClass:",objj_msgSend(CPString,"class"))){
continue;
}
objj_msgSend(_68,"addObject:",objj_msgSend(_6a,"representedObject"));
}
if(objj_msgSend(_66,"_inputElement").value!=""){
objj_msgSend(_68,"insertObject:atIndex:",objj_msgSend(_66,"_inputElement").value,_selectedRange.location);
}
return _68;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_6b,_6c,_6d){
with(_6b){
if(_6d!==nil&&!objj_msgSend(_6d,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
objj_msgSendSuper({receiver:_6b,super_class:objj_getClass("CPTokenField").super_class},"setObjectValue:",nil);
return;
}
var _6e=objj_msgSendSuper({receiver:_6b,super_class:objj_getClass("CPTokenField").super_class},"objectValue");
if(_6d===_6e||objj_msgSend(_6d,"isEqualToArray:",_6e)){
return;
}
var _6f=objj_msgSend(_tokenScrollView,"documentView");
var _70=objj_msgSend(_6b,"_tokens"),_71=[];
if(_6d!==nil){
for(var i=0,_72=objj_msgSend(_6d,"count");i<_72;i++){
var _73=_6d[i],_74=objj_msgSend(_6b,"tokenField:displayStringForRepresentedObject:",_6b,_73),_75=nil;
for(var j=0,_76=objj_msgSend(_70,"count");j<_76;j++){
var _77=_70[j];
if(objj_msgSend(_77,"representedObject")==_73){
objj_msgSend(_70,"removeObjectAtIndex:",j);
_75=_77;
break;
}
}
if(_75===nil){
_75=objj_msgSend(objj_msgSend(_CPTokenFieldToken,"alloc"),"init");
objj_msgSend(_75,"setTokenField:",_6b);
objj_msgSend(_75,"setRepresentedObject:",_73);
objj_msgSend(_75,"setStringValue:",_74);
objj_msgSend(_6f,"addSubview:",_75);
}
_71.push(_75);
}
}
for(var j=0,_76=objj_msgSend(_70,"count");j<_76;j++){
objj_msgSend(_70[j],"removeFromSuperview");
}
_value=_71;
objj_msgSend(_6b,"_selectToken:byExtendingSelection:",nil,NO);
objj_msgSend(_6b,"_updatePlaceholderState");
_shouldScrollTo=_14;
objj_msgSend(_6b,"setNeedsLayout");
objj_msgSend(_6b,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_78,_79,_7a,_7b){
with(_78){
_shouldNotifyTarget=NO;
objj_msgSendSuper({receiver:_78,super_class:objj_getClass("CPTokenField").super_class},"sendAction:to:",_7a,_7b);
}
}),new objj_method(sel_getUid("_setStringValue:"),function(_7c,_7d,_7e){
with(_7c){
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_7f,_80){
with(_7f){
objj_msgSend(objj_msgSend(objj_msgSend(_7f,"window"),"contentView"),"addSubview:",_autocompleteContainer);
_autocompleteContainer._DOMElement.style.zIndex=1000;
}
}),new objj_method(sel_getUid("removeFromSuperview"),function(_81,_82){
with(_81){
objj_msgSend(_autocompleteContainer,"removeFromSuperview");
}
}),new objj_method(sel_getUid("_inputElement"),function(_83,_84){
with(_83){
if(!_1){
_1=document.createElement("input");
_1.style.position="absolute";
_1.style.border="0px";
_1.style.padding="0px";
_1.style.margin="0px";
_1.style.whiteSpace="pre";
_1.style.background="transparent";
_1.style.outline="none";
_c=function(_85){
if(_4&&objj_msgSend(_4._tokenScrollView,"documentView")._DOMElement!=_1.parentNode){
return;
}
if(_4&&_4._preventResign){
return false;
}
if(!_6&&!_b){
objj_msgSend(objj_msgSend(_4,"window"),"makeFirstResponder:",nil);
return;
}
CPTokenFieldHandleBlur(_85,_1);
_7=YES;
return true;
};
_f=function(_86){
_86=_86||window.event;
_5=objj_msgSend(_4,"stringValue");
var _87=objj_msgSend(objj_msgSend(_4,"autocompleteView"),"selectedRow");
if(_86.keyCode===CPUpArrowKeyCode){
_87-=1;
}else{
if(_86.keyCode===CPDownArrowKeyCode){
_87+=1;
}
}
if(_87>objj_msgSend(objj_msgSend(_4,"autocompleteView"),"numberOfRows")-1){
_87=objj_msgSend(objj_msgSend(_4,"autocompleteView"),"numberOfRows")-1;
}
if(_87<0){
_87=0;
}
objj_msgSend(objj_msgSend(_4,"autocompleteView"),"selectRowIndexes:byExtendingSelection:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_87),NO);
var _88=objj_msgSend(_4,"autocompleteView"),_89=objj_msgSend(objj_msgSend(_88,"enclosingScrollView"),"contentView"),_8a=objj_msgSend(_88,"rectOfRow:",_87),_8b=_4;
if(_8a&&!CPRectContainsRect(objj_msgSend(_89,"bounds"),_8a)){
objj_msgSend(_89,"scrollToPoint:",objj_msgSend(_88,"rectOfRow:",_87).origin);
}
if(_86.keyCode===CPReturnKeyCode||_86.keyCode===CPTabKeyCode){
if(_86.preventDefault){
_86.preventDefault();
}
if(_86.stopPropagation){
_86.stopPropagation();
}
_86.cancelBubble=true;
if(!objj_msgSend(_4,"hasThemeState:",_10)){
if(_86&&_86.keyCode===CPReturnKeyCode){
objj_msgSend(_8b,"sendAction:to:",objj_msgSend(_8b,"action"),objj_msgSend(_8b,"target"));
objj_msgSend(objj_msgSend(_8b,"window"),"makeFirstResponder:",nil);
}else{
if(_86&&_86.keyCode===CPTabKeyCode){
if(!_86.shiftKey){
objj_msgSend(objj_msgSend(_8b,"window"),"selectNextKeyView:",_8b);
}else{
objj_msgSend(objj_msgSend(_8b,"window"),"selectPreviousKeyView:",_8b);
}
}
}
}
objj_msgSend(_8b,"_autocompleteWithDOMEvent:",_86);
objj_msgSend(_8b,"setNeedsLayout");
}else{
if(_86.keyCode===CPEscapeKeyCode){
objj_msgSend(_4,"_hideCompletions");
}else{
if(_86.keyCode===CPUpArrowKeyCode||_86.keyCode===CPDownArrowKeyCode){
if(_86.preventDefault){
_86.preventDefault();
}
if(_86.stopPropagation){
_86.stopPropagation();
}
_86.cancelBubble=true;
}else{
if(_86.keyCode==CPLeftArrowKeyCode&&_8b._selectedRange.location>0&&_1.value==""){
if(!_86.shiftKey){
if(_8b._selectedRange.length){
_8b._selectedRange.length=0;
}else{
_8b._selectedRange.location--;
}
}else{
_8b._selectedRange.location--;
_8b._selectedRange.length++;
}
_8b._shouldScrollTo=_13;
objj_msgSend(_8b,"setNeedsLayout");
}else{
if(_86.keyCode==CPRightArrowKeyCode&&_8b._selectedRange.location<objj_msgSend(objj_msgSend(_8b,"_tokens"),"count")&&_1.value==""){
if(!_86.shiftKey){
if(_8b._selectedRange.length){
_8b._selectedRange.location=CPMaxRange(_8b._selectedRange);
_8b._selectedRange.length=0;
}else{
_8b._selectedRange.location=MIN(objj_msgSend(objj_msgSend(_8b,"_tokens"),"count"),_8b._selectedRange.location+_8b._selectedRange.length+1);
}
}else{
_8b._selectedRange.length++;
}
_8b._shouldScrollTo=_14;
objj_msgSend(_8b,"setNeedsLayout");
}else{
if(_86.keyCode===CPDeleteKeyCode){
if(_1.value==""){
objj_msgSend(_83,"_hideCompletions");
if(CPEmptyRange(_4._selectedRange)){
if(_4._selectedRange.location>0){
var _8c=objj_msgSend(_4,"_tokens"),_8d=objj_msgSend(_8c,"objectAtIndex:",(_4._selectedRange.location-1));
objj_msgSend(_4,"_selectToken:byExtendingSelection:",_8d,NO);
}
}else{
objj_msgSend(_4,"_removeSelectedTokens:",nil);
}
}else{
objj_msgSend(_4,"_delayedShowCompletions");
}
}else{
if(_86.keyCode===CPDeleteForwardKeyCode&&_1.value==""){
objj_msgSend(_83,"_hideCompletions");
if(CPEmptyRange(_4._selectedRange)){
var _8c=objj_msgSend(_4,"_tokens");
if(_4._selectedRange.location<objj_msgSend(_8c,"count")){
objj_msgSend(_4,"_deleteToken:",_8c[_4._selectedRange.location]);
}
}else{
objj_msgSend(_4,"_removeSelectedTokens:",nil);
}
}
}
}
}
}
}
}
return true;
};
_e=function(_8e){
_8e=_8e||window.event;
var _8f=String.fromCharCode(_8e.keyCode||_8e.which),_90=_4;
if(objj_msgSend(objj_msgSend(_90,"tokenizingCharacterSet"),"characterIsMember:",_8f)){
if(_8e.preventDefault){
_8e.preventDefault();
}
if(_8e.stopPropagation){
_8e.stopPropagation();
}
_8e.cancelBubble=true;
objj_msgSend(_90,"_autocompleteWithDOMEvent:",_8e);
objj_msgSend(_90,"setNeedsLayout");
return true;
}
objj_msgSend(_4,"_delayedShowCompletions");
_90._selectedRange.length=0;
objj_msgSend(_90,"setNeedsLayout");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
_d=function(){
if(objj_msgSend(_4,"stringValue")!==_5){
_5=objj_msgSend(_4,"stringValue");
objj_msgSend(_4,"textDidChange:",objj_msgSend(CPNotification,"notificationWithName:object:userInfo:",CPControlTextDidChangeNotification,_4,nil));
}
objj_msgSend(_83,"setNeedsLayout");
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
CPTokenFieldHandleBlur=function(_91){
_4=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
if(document.attachEvent){
_1.attachEvent("on"+CPDOMEventKeyUp,_d);
_1.attachEvent("on"+CPDOMEventKeyDown,_f);
_1.attachEvent("on"+CPDOMEventKeyPress,_e);
}else{
_1.addEventListener(CPDOMEventKeyUp,_d,NO);
_1.addEventListener(CPDOMEventKeyDown,_f,NO);
_1.addEventListener(CPDOMEventKeyPress,_e,NO);
}
_1.onblur=_c;
_3=_1;
}
if(CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature)){
if(objj_msgSend(_4,"isSecure")){
_1.type="password";
}else{
_1.type="text";
}
return _1;
}
return _1;
}
}),new objj_method(sel_getUid("setCompletionDelay:"),function(_92,_93,_94){
with(_92){
_completionDelay=_94;
}
}),new objj_method(sel_getUid("completionDelay"),function(_95,_96){
with(_95){
return _completionDelay;
}
}),new objj_method(sel_getUid("_showCompletions:"),function(_97,_98,_99){
with(_97){
objj_msgSend(_97,"_retrieveCompletions");
objj_msgSend(_97,"setThemeState:",_10);
objj_msgSend(_97,"setNeedsLayout");
}
}),new objj_method(sel_getUid("_delayedShowCompletions"),function(_9a,_9b){
with(_9a){
_showCompletionsTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",objj_msgSend(_9a,"completionDelay"),_9a,sel_getUid("_showCompletions:"),nil,NO);
}
}),new objj_method(sel_getUid("_cancelShowCompletions"),function(_9c,_9d){
with(_9c){
if(objj_msgSend(_showCompletionsTimer,"isValid")){
objj_msgSend(_showCompletionsTimer,"invalidate");
}
}
}),new objj_method(sel_getUid("_hideCompletions"),function(_9e,_9f){
with(_9e){
objj_msgSend(_9e,"_cancelShowCompletions");
objj_msgSend(_9e,"unsetThemeState:",_10);
objj_msgSend(_9e,"setNeedsLayout");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_a0,_a1){
with(_a0){
objj_msgSendSuper({receiver:_a0,super_class:objj_getClass("CPTokenField").super_class},"layoutSubviews");
objj_msgSend(_tokenScrollView,"setFrame:",objj_msgSend(_a0,"rectForEphemeralSubviewNamed:","content-view"));
var _a2=objj_msgSend(_a0,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","content-view",CPWindowAbove,"bezel-view");
if(_a2){
objj_msgSend(_a2,"setHidden:",objj_msgSend(_a0,"stringValue")!=="");
}
var _a3=objj_msgSend(_a0,"frame"),_a4=objj_msgSend(_tokenScrollView,"documentView"),_a5=objj_msgSend(_a0,"_tokens");
objj_msgSend(objj_msgSend(_autocompleteView,"tableColumnWithIdentifier:",_11),"setWidth:",objj_msgSend(objj_msgSend(_autocompleteScrollView,"contentView"),"frame").size.width);
if(objj_msgSend(_a0,"hasThemeState:",_10)&&objj_msgSend(_cachedCompletions,"count")){
objj_msgSend(_autocompleteContainer,"setHidden:",NO);
var _a6=objj_msgSend(_a0,"convertPoint:toView:",objj_msgSend(_a0,"bounds").origin,objj_msgSend(_autocompleteContainer,"superview"));
objj_msgSend(_autocompleteContainer,"setFrameOrigin:",CPPointMake(_a6.x,_a6.y+_a3.size.height));
objj_msgSend(_autocompleteContainer,"setFrameSize:",CPSizeMake(CPRectGetWidth(objj_msgSend(_a0,"bounds")),92));
objj_msgSend(_autocompleteScrollView,"setFrameSize:",CPSizeMake(objj_msgSend(_autocompleteContainer,"frame").size.width-2,90));
}else{
objj_msgSend(_autocompleteContainer,"setHidden:",YES);
}
if(!objj_msgSend(_a5,"isKindOfClass:",objj_msgSend(CPArray,"class"))){
return;
}
var _a7=CGRectMakeCopy(objj_msgSend(_a4,"bounds")),_a8=_a7.origin,_a9=_a7.size,_aa=CPPointMake(_a8.x,_a8.y),_ab=CPSizeMake(2,2),_ac=objj_msgSend(objj_msgSend(_a0,"window"),"firstResponder")==_a0,_ad=objj_msgSend(_CPTokenFieldToken,"new");
objj_msgSend(_ad,"sizeToFit");
var _ae=CGRectGetHeight(objj_msgSend(_ad,"bounds"));
var _af=function(_b0,_b1){
var r=CGRectMake(0,0,_b0,_b1);
if(_aa.x+_b0>=_a9.width&&_aa.x>_a8.x){
_aa.x=_a8.x;
_aa.y+=_b1+_ab.height;
}
r.origin.x=_aa.x;
r.origin.y=_aa.y;
if(CGRectGetHeight(objj_msgSend(_a4,"bounds"))<_aa.y+_b1){
objj_msgSend(_a4,"setFrame:",CGRectMake(0,0,CGRectGetWidth(objj_msgSend(_tokenScrollView,"bounds")),_aa.y+_b1));
}
_aa.x+=_b0+_ab.width;
return r;
};
var _b2=function(_b3){
var _b4=objj_msgSend(_a0,"_inputElement"),_b5=1;
if(_selectedRange.length===0){
_b5=objj_msgSend((_b4.value||"")+"X","sizeWithFont:",objj_msgSend(_a0,"font")).width;
if(_b3){
_b5=MAX(_a9.width-_aa.x-1,_b5);
}
}
var _b6=_af(_b5,_ae);
_b4.style.left=_b6.origin.x+"px";
_b4.style.top=_b6.origin.y+"px";
_b4.style.width=_b6.size.width+"px";
_b4.style.height=_b6.size.height+"px";
if(_selectedRange.length==0){
objj_msgSend(objj_msgSend(_tokenScrollView,"documentView"),"scrollRectToVisible:",_b6);
}
};
for(var i=0,_b7=objj_msgSend(_a5,"count");i<_b7;i++){
if(_ac&&i==CPMaxRange(_selectedRange)){
_b2(false);
}
var _b8=objj_msgSend(_a5,"objectAtIndex:",i);
if(objj_msgSend(_b8,"isKindOfClass:",objj_msgSend(CPString,"class"))){
continue;
}
objj_msgSend(_b8,"setHighlighted:",CPLocationInRange(i,_selectedRange));
objj_msgSend(_b8,"sizeToFit");
var _b9=objj_msgSend(_a4,"bounds").size,_ba=objj_msgSend(_b8,"bounds").size,_bb=_af(_ba.width,_ba.height);
objj_msgSend(_b8,"setFrame:",_bb);
}
if(_ac&&CPMaxRange(_selectedRange)>=objj_msgSend(_a5,"count")){
_b2(true);
}
if(_ac&&_selectedRange.length){
objj_msgSend(_a0,"_inputElement").style.left="-10000px";
objj_msgSend(_a0,"_inputElement").focus();
}
if(CGRectGetHeight(objj_msgSend(_a4,"bounds"))>_aa.y+_ae){
objj_msgSend(_a4,"setFrame:",CGRectMake(0,0,CGRectGetWidth(objj_msgSend(_tokenScrollView,"bounds")),_aa.y+_ae));
}
if(_shouldScrollTo!==_12){
if(!(_ac&&_selectedRange.length==0)){
var _bc=_shouldScrollTo;
if(_bc===_13){
_bc=_a5[_selectedRange.location];
}else{
if(_bc===_14){
_bc=_a5[MAX(0,CPMaxRange(_selectedRange)-1)];
}
}
objj_msgSend(_a0,"_scrollTokenViewToVisible:",_bc);
}
_shouldScrollTo=_12;
}
}
}),new objj_method(sel_getUid("_scrollTokenViewToVisible:"),function(_bd,_be,_bf){
with(_bd){
if(!_bf){
return;
}
return objj_msgSend(objj_msgSend(_tokenScrollView,"documentView"),"scrollRectToVisible:",objj_msgSend(_bf,"frame"));
}
}),new objj_method(sel_getUid("numberOfRowsInTableView:"),function(_c0,_c1,_c2){
with(_c0){
return objj_msgSend(_cachedCompletions,"count");
}
}),new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"),function(_c3,_c4,_c5,_c6,row){
with(_c3){
return objj_msgSend(_c3,"tokenField:displayStringForRepresentedObject:",_c3,objj_msgSend(_cachedCompletions,"objectAtIndex:",row));
}
}),new objj_method(sel_getUid("tableViewSelectionDidChange:"),function(_c7,_c8,_c9){
with(_c7){
window.setTimeout(function(){
objj_msgSend(objj_msgSend(_c7,"window"),"makeFirstResponder:",_c7);
},2);
}
}),new objj_method(sel_getUid("autocompleteView"),function(_ca,_cb){
with(_ca){
return _autocompleteView;
}
})]);
class_addMethods(_16,[new objj_method(sel_getUid("defaultTokenizingCharacterSet"),function(_cc,_cd){
with(_cc){
return objj_msgSend(CPCharacterSet,"characterSetWithCharactersInString:",",");
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(_ce,_cf){
with(_ce){
return "tokenfield";
}
}),new objj_method(sel_getUid("defaultCompletionDelay"),function(_d0,_d1){
with(_d0){
return 0.5;
}
})]);
var _15=objj_getClass("CPTokenField");
if(!_15){
throw new SyntaxError("*** Could not find definition for class \"CPTokenField\"");
}
var _16=_15.isa;
class_addMethods(_15,[new objj_method(sel_getUid("tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:"),function(_d2,_d3,_d4,_d5,_d6,_d7){
with(_d2){
if(objj_msgSend(objj_msgSend(_d2,"delegate"),"respondsToSelector:",sel_getUid("tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:"))){
return objj_msgSend(objj_msgSend(_d2,"delegate"),"tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:",_d4,_d5,_d6,_d7);
}
return [];
}
}),new objj_method(sel_getUid("tokenField:displayStringForRepresentedObject:"),function(_d8,_d9,_da,_db){
with(_d8){
if(objj_msgSend(objj_msgSend(_d8,"delegate"),"respondsToSelector:",sel_getUid("tokenField:displayStringForRepresentedObject:"))){
var _dc=objj_msgSend(objj_msgSend(_d8,"delegate"),"tokenField:displayStringForRepresentedObject:",_da,_db);
if(_dc!==nil){
return _dc;
}
}
return _db;
}
}),new objj_method(sel_getUid("tokenField:shouldAddObjects:atIndex:"),function(_dd,_de,_df,_e0,_e1){
with(_dd){
var _e2=objj_msgSend(_dd,"delegate");
if(objj_msgSend(_e2,"respondsToSelector:",sel_getUid("tokenField:shouldAddObjects:atIndex:"))){
var _e3=objj_msgSend(_e2,"tokenField:shouldAddObjects:atIndex:",_df,_e0,_e1);
if(_e3!==nil){
return _e3;
}
}
return _e0;
}
})]);
var _15=objj_allocateClassPair(CPTextField,"_CPTokenFieldToken"),_16=_15.isa;
class_addIvars(_15,[new objj_ivar("_deleteButton"),new objj_ivar("_tokenField"),new objj_ivar("_representedObject")]);
objj_registerClassPair(_15);
class_addMethods(_15,[new objj_method(sel_getUid("initWithFrame:"),function(_e4,_e5,_e6){
with(_e4){
if(_e4=objj_msgSendSuper({receiver:_e4,super_class:objj_getClass("_CPTokenFieldToken").super_class},"initWithFrame:",_e6)){
_deleteButton=objj_msgSend(objj_msgSend(_CPTokenFieldTokenCloseButton,"alloc"),"initWithFrame:",CPRectMakeZero());
objj_msgSend(_e4,"addSubview:",_deleteButton);
objj_msgSend(_e4,"setEditable:",NO);
objj_msgSend(_e4,"setHighlighted:",NO);
objj_msgSend(_e4,"setBezeled:",YES);
}
return _e4;
}
}),new objj_method(sel_getUid("tokenField"),function(_e7,_e8){
with(_e7){
return _tokenField;
}
}),new objj_method(sel_getUid("setTokenField:"),function(_e9,_ea,_eb){
with(_e9){
_tokenField=_eb;
}
}),new objj_method(sel_getUid("representedObject"),function(_ec,_ed){
with(_ec){
return _representedObject;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_ee,_ef,_f0){
with(_ee){
_representedObject=_f0;
}
}),new objj_method(sel_getUid("_minimumFrameSize"),function(_f1,_f2){
with(_f1){
var _f3=CGSizeMakeZero(),_f4=objj_msgSend(_f1,"currentValueForThemeAttribute:","min-size"),_f5=objj_msgSend(_f1,"currentValueForThemeAttribute:","content-inset");
_f3.height=_f4.height;
_f3.width=MAX(_f4.width,objj_msgSend((objj_msgSend(_f1,"stringValue")||" "),"sizeWithFont:",objj_msgSend(_f1,"font")).width+_f5.left+_f5.right);
return _f3;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_f6,_f7){
with(_f6){
objj_msgSendSuper({receiver:_f6,super_class:objj_getClass("_CPTokenFieldToken").super_class},"layoutSubviews");
var _f8=objj_msgSend(_f6,"layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:","bezel-view",CPWindowBelow,"content-view");
if(_f8){
objj_msgSend(_deleteButton,"setTarget:",_f6);
objj_msgSend(_deleteButton,"setAction:",sel_getUid("_delete:"));
var _f9=objj_msgSend(_f8,"frame"),_fa=objj_msgSend(_deleteButton,"currentValueForThemeAttribute:","offset"),_fb=objj_msgSend(_deleteButton,"currentValueForThemeAttribute:","min-size");
objj_msgSend(_deleteButton,"setFrame:",CPRectMake(CPRectGetMaxX(_f9)-_fa.x,CPRectGetMinY(_f9)+_fa.y,_fb.width,_fb.height));
}
}
}),new objj_method(sel_getUid("mouseDown:"),function(_fc,_fd,_fe){
with(_fc){
objj_msgSend(_tokenField,"mouseDownOnToken:withEvent:",_fc,_fe);
}
}),new objj_method(sel_getUid("mouseUp:"),function(_ff,_100,_101){
with(_ff){
objj_msgSend(_tokenField,"mouseUpOnToken:withEvent:",_ff,_101);
}
}),new objj_method(sel_getUid("_delete:"),function(self,_102,_103){
with(self){
objj_msgSend(_tokenField,"_deleteToken:",self);
}
})]);
class_addMethods(_16,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_104){
with(self){
return "tokenfield-token";
}
})]);
var _15=objj_allocateClassPair(CPButton,"_CPTokenFieldTokenCloseButton"),_16=_15.isa;
objj_registerClassPair(_15);
class_addMethods(_16,[new objj_method(sel_getUid("themeAttributes"),function(self,_105){
with(self){
var _106=objj_msgSend(CPButton,"themeAttributes");
objj_msgSend(_106,"setObject:forKey:",CGPointMake(15,5),"offset");
return _106;
}
}),new objj_method(sel_getUid("defaultThemeClass"),function(self,_107){
with(self){
return "tokenfield-token-close-button";
}
})]);
var _108="CPTokenFieldTokenizingCharacterSetKey",_109="CPTokenFieldCompletionDelay";
var _15=objj_getClass("CPTokenField");
if(!_15){
throw new SyntaxError("*** Could not find definition for class \"CPTokenField\"");
}
var _16=_15.isa;
class_addMethods(_15,[new objj_method(sel_getUid("initWithCoder:"),function(self,_10a,_10b){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTokenField").super_class},"initWithCoder:",_10b);
if(self){
_tokenizingCharacterSet=objj_msgSend(_10b,"decodeObjectForKey:",_108)||objj_msgSend(objj_msgSend(self,"class"),"defaultTokenizingCharacterSet");
_completionDelay=objj_msgSend(_10b,"decodeDoubleForKey:",_109)||objj_msgSend(objj_msgSend(self,"class"),"defaultCompletionDelay");
objj_msgSend(self,"_init");
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_10c,_10d){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPTokenField").super_class},"encodeWithCoder:",_10d);
objj_msgSend(_10d,"encodeInt:forKey:",_tokenizingCharacterSet,_108);
objj_msgSend(_10d,"encodeDouble:forKey:",_completionDelay,_109);
}
})]);
p;11;CPToolbar.jt;27823;@STATIC;1.0;I;21;Foundation/CPObject.ji;15;CPPopUpButton.ji;15;CPToolbarItem.jt;27737;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CPPopUpButton.j",YES);
objj_executeFile("CPToolbarItem.j",YES);
CPToolbarDisplayModeDefault=0;
CPToolbarDisplayModeIconAndLabel=1;
CPToolbarDisplayModeIconOnly=2;
CPToolbarDisplayModeLabelOnly=3;
CPToolbarSizeModeDefault=0;
CPToolbarSizeModeRegular=1;
CPToolbarSizeModeSmall=2;
var _1=nil,_2=nil;
var _3=objj_allocateClassPair(CPObject,"CPToolbar"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_identifier"),new objj_ivar("_displayMode"),new objj_ivar("_showsBaselineSeparator"),new objj_ivar("_allowsUserCustomization"),new objj_ivar("_isVisible"),new objj_ivar("_sizeMode"),new objj_ivar("_desiredHeight"),new objj_ivar("_delegate"),new objj_ivar("_itemIdentifiers"),new objj_ivar("_identifiedItems"),new objj_ivar("_defaultItems"),new objj_ivar("_allowedItems"),new objj_ivar("_selectableItems"),new objj_ivar("_items"),new objj_ivar("_itemsSortedByVisibilityPriority"),new objj_ivar("_toolbarView"),new objj_ivar("_window")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("displayMode"),function(_5,_6){
with(_5){
return _displayMode;
}
}),new objj_method(sel_getUid("setDisplayMode:"),function(_7,_8,_9){
with(_7){
_displayMode=_9;
}
}),new objj_method(sel_getUid("sizeMode"),function(_a,_b){
with(_a){
return _sizeMode;
}
}),new objj_method(sel_getUid("setSizeMode:"),function(_c,_d,_e){
with(_c){
_sizeMode=_e;
}
}),new objj_method(sel_getUid("init"),function(_f,_10){
with(_f){
return objj_msgSend(_f,"initWithIdentifier:","");
}
}),new objj_method(sel_getUid("initWithIdentifier:"),function(_11,_12,_13){
with(_11){
_11=objj_msgSendSuper({receiver:_11,super_class:objj_getClass("CPToolbar").super_class},"init");
if(_11){
_items=[];
_identifier=_13;
_isVisible=YES;
_sizeMode=CPToolbarSizeModeDefault;
_desiredHeight=0;
objj_msgSend(CPToolbar,"_addToolbar:forIdentifier:",_11,_identifier);
}
return _11;
}
}),new objj_method(sel_getUid("setDisplayMode:"),function(_14,_15,_16){
with(_14){
}
}),new objj_method(sel_getUid("identifier"),function(_17,_18){
with(_17){
return _identifier;
}
}),new objj_method(sel_getUid("delegate"),function(_19,_1a){
with(_19){
return _delegate;
}
}),new objj_method(sel_getUid("isVisible"),function(_1b,_1c){
with(_1b){
return _isVisible;
}
}),new objj_method(sel_getUid("setVisible:"),function(_1d,_1e,_1f){
with(_1d){
if(_isVisible===_1f){
return;
}
_isVisible=_1f;
objj_msgSend(_window,"_noteToolbarChanged");
}
}),new objj_method(sel_getUid("setSizeMode:"),function(_20,_21,_22){
with(_20){
if(_22===_sizeMode){
return;
}
_sizeMode=_22;
objj_msgSend(objj_msgSend(_20,"_toolbarView"),"setFrame:",objj_msgSend(_20,"_toolbarViewFrame"));
objj_msgSend(_window,"_noteToolbarChanged");
}
}),new objj_method(sel_getUid("_window"),function(_23,_24){
with(_23){
return _window;
}
}),new objj_method(sel_getUid("_setWindow:"),function(_25,_26,_27){
with(_25){
_window=_27;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_28,_29,_2a){
with(_28){
if(_delegate===_2a){
return;
}
_delegate=_2a;
objj_msgSend(_28,"_reloadToolbarItems");
}
}),new objj_method(sel_getUid("setDisplayMode:"),function(_2b,_2c,_2d){
with(_2b){
if(_displayMode===_2d){
return;
}
_displayMode=_2d;
objj_msgSend(_2b,"_reloadToolbarItems");
}
}),new objj_method(sel_getUid("_loadConfiguration"),function(_2e,_2f){
with(_2e){
}
}),new objj_method(sel_getUid("_toolbarViewFrame"),function(_30,_31){
with(_30){
var _32=_desiredHeight||(_sizeMode!=CPToolbarSizeModeSmall?objj_msgSend(_30,"_valueForThemeAttribute:","regular-size-height"):objj_msgSend(_30,"_valueForThemeAttribute:","small-size-height"));
return CPRectMake(0,0,1200,_32);
}
}),new objj_method(sel_getUid("_valueForThemeAttribute:"),function(_33,_34,_35){
with(_33){
return objj_msgSend(objj_msgSend(objj_msgSend(_33,"class"),"_themeAttributes"),"valueForKey:",_35);
}
}),new objj_method(sel_getUid("_toolbarView"),function(_36,_37){
with(_36){
if(!_toolbarView){
_toolbarView=objj_msgSend(objj_msgSend(_CPToolbarView,"alloc"),"initWithFrame:",objj_msgSend(_36,"_toolbarViewFrame"));
objj_msgSend(_toolbarView,"setToolbar:",_36);
objj_msgSend(_toolbarView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
return _toolbarView;
}
}),new objj_method(sel_getUid("_reloadToolbarItems"),function(_38,_39){
with(_38){
_itemIdentifiers=objj_msgSend(_defaultItems,"valueForKey:","itemIdentifier")||[];
if(_delegate){
var _3a=objj_msgSend(objj_msgSend(_delegate,"toolbarDefaultItemIdentifiers:",_38),"mutableCopy");
if(_3a){
_itemIdentifiers=objj_msgSend(_itemIdentifiers,"arrayByAddingObjectsFromArray:",_3a);
}
}
var _3b=0,_3c=objj_msgSend(_itemIdentifiers,"count");
_items=[];
for(;_3b<_3c;++_3b){
var _3d=_itemIdentifiers[_3b],_3e=objj_msgSend(CPToolbarItem,"_standardItemWithItemIdentifier:",_3d);
if(!_3e){
_3e=objj_msgSend(_identifiedItems,"objectForKey:",_3d);
}
if(!_3e&&_delegate){
_3e=objj_msgSend(_delegate,"toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:",_38,_3d,YES);
}
_3e=objj_msgSend(_3e,"copy");
if(_3e===nil){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Toolbar delegate "+_delegate+" returned nil toolbar item for identifier \""+_3d+"\"");
}
_3e._toolbar=_38;
objj_msgSend(_items,"addObject:",_3e);
}
_itemsSortedByVisibilityPriority=objj_msgSend(_items,"sortedArrayUsingFunction:context:",_3f,NULL);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
}),new objj_method(sel_getUid("items"),function(_40,_41){
with(_40){
return _items;
}
}),new objj_method(sel_getUid("visibleItems"),function(_42,_43){
with(_42){
return objj_msgSend(_toolbarView,"visibleItems");
}
}),new objj_method(sel_getUid("itemsSortedByVisibilityPriority"),function(_44,_45){
with(_44){
return _itemsSortedByVisibilityPriority;
}
}),new objj_method(sel_getUid("validateVisibleItems"),function(_46,_47){
with(_46){
var _48=objj_msgSend(_46,"visibleItems"),_49=objj_msgSend(_48,"count");
while(_49--){
objj_msgSend(_48[_49],"validate");
}
}
}),new objj_method(sel_getUid("_itemForItemIdentifier:willBeInsertedIntoToolbar:"),function(_4a,_4b,_4c,_4d){
with(_4a){
var _4e=objj_msgSend(_identifiedItems,"objectForKey:",_4c);
if(!_4e){
_4e=objj_msgSend(CPToolbarItem,"_standardItemWithItemIdentifier:",_4c);
if(_delegate&&!_4e){
_4e=objj_msgSend(objj_msgSend(_delegate,"toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:",_4a,_4c,_4d),"copy");
if(!_4e){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Toolbar delegate "+_delegate+" returned nil toolbar item for identifier "+_4c);
}
}
objj_msgSend(_identifiedItems,"setObject:forKey:",_4e,_4c);
}
return _4e;
}
}),new objj_method(sel_getUid("_itemsWithIdentifiers:"),function(_4f,_50,_51){
with(_4f){
var _52=[];
for(var i=0;i<_51.length;i++){
objj_msgSend(_52,"addObject:",objj_msgSend(_4f,"_itemForItemIdentifier:willBeInsertedIntoToolbar:",_51[i],NO));
}
return _52;
}
}),new objj_method(sel_getUid("_defaultToolbarItems"),function(_53,_54){
with(_53){
if(!_defaultItems&&objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("toolbarDefaultItemIdentifiers:"))){
_defaultItems=[];
var _55=objj_msgSend(_delegate,"toolbarDefaultItemIdentifiers:",_53),_56=0,_57=objj_msgSend(_55,"count");
for(;_56<_57;++_56){
objj_msgSend(_defaultItems,"addObject:",objj_msgSend(_53,"_itemForItemIdentifier:willBeInsertedIntoToolbar:",_55[_56],NO));
}
}
return _defaultItems;
}
}),new objj_method(sel_getUid("toolbarItemDidChange:"),function(_58,_59,_5a){
with(_58){
if(objj_msgSend(_identifiedItems,"objectForKey:",objj_msgSend(_5a,"itemIdentifier"))){
objj_msgSend(_identifiedItems,"setObject:forKey:",_5a,objj_msgSend(_5a,"itemIdentifier"));
}
var _5b=0,_5c=objj_msgSend(_items,"count");
for(;_5b<=_5c;++_5b){
var _5d=_items[_5b];
if(objj_msgSend(_5d,"itemIdentifier")===objj_msgSend(_5a,"itemIdentifier")){
_items[_5b]=_5a;
_itemsSortedByVisibilityPriority=objj_msgSend(_items,"sortedArrayUsingFunction:context:",_3f,NULL);
objj_msgSend(_toolbarView,"reloadToolbarItems");
}
}
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_5e,_5f){
with(_5e){
if(_5e!=objj_msgSend(CPToolbar,"class")){
return;
}
_1=objj_msgSend(CPDictionary,"dictionary");
_2=objj_msgSend(CPDictionary,"dictionary");
}
}),new objj_method(sel_getUid("_addToolbar:forIdentifier:"),function(_60,_61,_62,_63){
with(_60){
var _64=objj_msgSend(_1,"objectForKey:",_63);
if(!_64){
_64=[];
objj_msgSend(_1,"setObject:forKey:",_64,_63);
}
objj_msgSend(_64,"addObject:",_62);
}
}),new objj_method(sel_getUid("_themeAttributes"),function(_65,_66){
with(_65){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[{top:(4),right:(4),bottom:(4),left:(_67)},59,46],["content-inset","regular-size-height","small-size-height"]);
}
})]);
var _68="CPToolbarIdentifierKey",_69="CPToolbarDisplayModeKey",_6a="CPToolbarShowsBaselineSeparatorKey",_6b="CPToolbarAllowsUserCustomizationKey",_6c="CPToolbarIsVisibleKey",_6d="CPToolbarDelegateKey",_6e="CPToolbarIdentifiedItemsKey",_6f="CPToolbarDefaultItemsKey",_70="CPToolbarAllowedItemsKey",_71="CPToolbarSelectableItemsKey",_72="CPToolbarSizeModeKey";
var _3=objj_getClass("CPToolbar");
if(!_3){
throw new SyntaxError("*** Could not find definition for class \"CPToolbar\"");
}
var _4=_3.isa;
class_addMethods(_3,[new objj_method(sel_getUid("initWithCoder:"),function(_73,_74,_75){
with(_73){
_73=objj_msgSendSuper({receiver:_73,super_class:objj_getClass("CPToolbar").super_class},"init");
if(_73){
_identifier=objj_msgSend(_75,"decodeObjectForKey:",_68);
_displayMode=objj_msgSend(_75,"decodeIntForKey:",_69);
_showsBaselineSeparator=objj_msgSend(_75,"decodeBoolForKey:",_6a);
_allowsUserCustomization=objj_msgSend(_75,"decodeBoolForKey:",_6b);
_isVisible=objj_msgSend(_75,"decodeBoolForKey:",_6c);
_sizeMode=objj_msgSend(_75,"decodeIntForKey:",_72);
_identifiedItems=objj_msgSend(_75,"decodeObjectForKey:",_6e);
_defaultItems=objj_msgSend(_75,"decodeObjectForKey:",_6f);
_allowedItems=objj_msgSend(_75,"decodeObjectForKey:",_70);
_selectableItems=objj_msgSend(_75,"decodeObjectForKey:",_71);
objj_msgSend(objj_msgSend(_identifiedItems,"allValues"),"makeObjectsPerformSelector:withObject:",sel_getUid("_setToolbar:"),_73);
_items=[];
objj_msgSend(CPToolbar,"_addToolbar:forIdentifier:",_73,_identifier);
objj_msgSend(_73,"setDelegate:",objj_msgSend(_75,"decodeObjectForKey:",_6d));
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("_reloadToolbarItems"),_73,nil,0,[CPDefaultRunLoopMode]);
}
return _73;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_76,_77,_78){
with(_76){
objj_msgSend(_78,"encodeObject:forKey:",_identifier,_68);
objj_msgSend(_78,"encodeInt:forKey:",_displayMode,_69);
objj_msgSend(_78,"encodeBool:forKey:",_showsBaselineSeparator,_6a);
objj_msgSend(_78,"encodeBool:forKey:",_allowsUserCustomization,_6b);
objj_msgSend(_78,"encodeBool:forKey:",_isVisible,_6c);
objj_msgSend(_78,"encodeInt:forKey:",_sizeMode,_72);
objj_msgSend(_78,"encodeObject:forKey:",_identifiedItems,_6e);
objj_msgSend(_78,"encodeObject:forKey:",_defaultItems,_6f);
objj_msgSend(_78,"encodeObject:forKey:",_allowedItems,_70);
objj_msgSend(_78,"encodeObject:forKey:",_selectableItems,_71);
objj_msgSend(_78,"encodeConditionalObject:forKey:",_delegate,_6d);
}
})]);
var _79=nil,_7a=nil,_7b=nil;
var _67=10,_7c=20;
var _7d=function(_7e,_7f,_80,_81){
return {index:_7e,view:_7f,label:_80,minWidth:_81};
};
var _3=objj_allocateClassPair(CPView,"_CPToolbarView"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_toolbar"),new objj_ivar("_flexibleWidthIndexes"),new objj_ivar("_visibleFlexibleWidthIndexes"),new objj_ivar("_itemInfos"),new objj_ivar("_viewsForToolbarItems"),new objj_ivar("_visibleItems"),new objj_ivar("_invisibleItems"),new objj_ivar("_additionalItemsButton"),new objj_ivar("_labelColor"),new objj_ivar("_labelShadowColor"),new objj_ivar("_minWidth"),new objj_ivar("_FIXME_isHUD")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("visibleItems"),function(_82,_83){
with(_82){
return _visibleItems;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_84,_85,_86){
with(_84){
_84=objj_msgSendSuper({receiver:_84,super_class:objj_getClass("_CPToolbarView").super_class},"initWithFrame:",_86);
if(_84){
_minWidth=0;
_labelColor=objj_msgSend(CPColor,"blackColor");
_labelShadowColor=objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.75);
_additionalItemsButton=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:pullsDown:",{origin:{x:0,y:0},size:{width:10,height:15}},YES);
objj_msgSend(_additionalItemsButton,"setBordered:",NO);
objj_msgSend(_additionalItemsButton,"setImagePosition:",CPImageOnly);
objj_msgSend(objj_msgSend(_additionalItemsButton,"menu"),"setShowsStateColumn:",NO);
objj_msgSend(objj_msgSend(_additionalItemsButton,"menu"),"setAutoenablesItems:",NO);
objj_msgSend(_additionalItemsButton,"setAlternateImage:",_7b);
}
return _84;
}
}),new objj_method(sel_getUid("setToolbar:"),function(_87,_88,_89){
with(_87){
_toolbar=_89;
}
}),new objj_method(sel_getUid("toolbar"),function(_8a,_8b){
with(_8a){
return _toolbar;
}
}),new objj_method(sel_getUid("FIXME_setIsHUD:"),function(_8c,_8d,_8e){
with(_8c){
if(_FIXME_isHUD===_8e){
return;
}
_FIXME_isHUD=_8e;
var _8f=objj_msgSend(_toolbar,"items"),_90=objj_msgSend(_8f,"count");
while(_90--){
objj_msgSend(objj_msgSend(_8c,"viewForItem:",_8f[_90]),"FIXME_setIsHUD:",_8e);
}
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_91,_92,_93){
with(_91){
objj_msgSend(_91,"tile");
}
}),new objj_method(sel_getUid("viewForItem:"),function(_94,_95,_96){
with(_94){
return _viewsForToolbarItems[objj_msgSend(_96,"UID")]||nil;
}
}),new objj_method(sel_getUid("tile"),function(_97,_98){
with(_97){
var _99=objj_msgSend(_toolbar,"items"),_9a=(objj_msgSend(_97,"bounds").size.width),_9b=_minWidth,_9c=[];
_visibleItems=_99;
if(_9a<_9b){
_9a-=_7c;
_visibleItems=objj_msgSend(_visibleItems,"copy");
var _9d=objj_msgSend(_toolbar,"itemsSortedByVisibilityPriority"),_9e=_9d.length;
while(_9b>_9a&&_9e){
var _9f=_9d[--_9e],_a0=objj_msgSend(_97,"viewForItem:",_9f);
_9b-=objj_msgSend(_a0,"minSize").width+_67;
objj_msgSend(_visibleItems,"removeObjectIdenticalTo:",_9f);
objj_msgSend(_9c,"addObject:",_9f);
objj_msgSend(_a0,"setHidden:",YES);
objj_msgSend(_a0,"FIXME_setIsHUD:",_FIXME_isHUD);
}
}
var _9e=objj_msgSend(_99,"count"),_a1=0;
while(_9e--){
var _a0=objj_msgSend(_97,"viewForItem:",_99[_9e]),_a2=objj_msgSend(_a0,"minSize");
if(_a1<_a2.height){
_a1=_a2.height;
}
}
var _a3=objj_msgSend(_toolbar,"_valueForThemeAttribute:","content-inset"),_a4=_a1?_a1+_a3.top+_a3.bottom:0;
if(_a4!=_toolbar._desiredHeight){
_toolbar._desiredHeight=_a4;
objj_msgSend(_97,"setFrame:",objj_msgSend(_toolbar,"_toolbarViewFrame"));
objj_msgSend(_toolbar._window,"_noteToolbarChanged");
return;
}
var _9e=_visibleItems.length,_a5=objj_msgSend(CPIndexSet,"indexSet");
while(_9e--){
var _9f=_visibleItems[_9e],_a0=objj_msgSend(_97,"viewForItem:",_9f),_a2=objj_msgSend(_a0,"minSize");
if(_a2.width!==objj_msgSend(_a0,"maxSize").width){
objj_msgSend(_a5,"addIndex:",_9e);
}else{
objj_msgSend(_a0,"setFrameSize:",{width:_a2.width,height:_a1});
}
objj_msgSend(_a0,"setHidden:",NO);
}
var _a6=_9a-_9b,_a7=0;
while(_a6&&objj_msgSend(_a5,"count")){
_a7+=_a6/objj_msgSend(_a5,"count");
_a6=0;
var _a8=CPNotFound;
while((_a8=objj_msgSend(_a5,"indexGreaterThanIndex:",_a8))!==CPNotFound){
var _9f=_visibleItems[_a8],_a0=objj_msgSend(_97,"viewForItem:",_9f),_a9=objj_msgSend(_a0,"minSize").width+_a7,_aa=MIN(_a9,objj_msgSend(_a0,"maxSize").width);
if(_aa<_a9){
objj_msgSend(_a5,"removeIndex:",_a8);
_a6+=_a9-_aa;
}
objj_msgSend(_a0,"setFrameSize:",{width:_aa,height:_a1});
}
}
var _a8=0,_9e=_visibleItems.length,x=_a3.left,_a3=objj_msgSend(_toolbar,"_valueForThemeAttribute:","content-inset"),y=_a3.top;
for(;_a8<_9e;++_a8){
var _a0=objj_msgSend(_97,"viewForItem:",_visibleItems[_a8]),_ab=(objj_msgSend(_a0,"frame").size.width);
objj_msgSend(_a0,"setFrame:",{origin:{x:x,y:y},size:{width:_ab,height:_a1}});
x+=_ab+_67;
}
var _ac=NO;
if(objj_msgSend(_9c,"count")){
var _a8=0,_9e=objj_msgSend(_99,"count");
_invisibleItems=[];
for(;_a8<_9e;++_a8){
var _9f=_99[_a8];
if(objj_msgSend(_9c,"indexOfObjectIdenticalTo:",_9f)!==CPNotFound){
objj_msgSend(_invisibleItems,"addObject:",_9f);
var _ad=objj_msgSend(_9f,"itemIdentifier");
if(_ad!==CPToolbarSpaceItemIdentifier&&_ad!==CPToolbarFlexibleSpaceItemIdentifier&&_ad!==CPToolbarSeparatorItemIdentifier){
_ac=YES;
}
}
}
}
if(_ac){
objj_msgSend(_additionalItemsButton,"setFrameOrigin:",{x:_9a+5,y:((objj_msgSend(_97,"bounds").size.height)-(objj_msgSend(_additionalItemsButton,"frame").size.height))/2});
objj_msgSend(_97,"addSubview:",_additionalItemsButton);
objj_msgSend(_additionalItemsButton,"removeAllItems");
objj_msgSend(_additionalItemsButton,"addItemWithTitle:","Additional Items");
objj_msgSend(objj_msgSend(_additionalItemsButton,"itemArray")[0],"setImage:",_7a);
var _a8=0,_9e=objj_msgSend(_invisibleItems,"count"),_ae=NO;
for(;_a8<_9e;++_a8){
var _9f=_invisibleItems[_a8],_ad=objj_msgSend(_9f,"itemIdentifier");
if(_ad===CPToolbarSpaceItemIdentifier||_ad===CPToolbarFlexibleSpaceItemIdentifier){
continue;
}
if(_ad===CPToolbarSeparatorItemIdentifier){
if(_ae){
objj_msgSend(_additionalItemsButton,"addItem:",objj_msgSend(CPMenuItem,"separatorItem"));
}
continue;
}
_ae=YES;
var _af=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",objj_msgSend(_9f,"label"),sel_getUid("didSelectMenuItem:"),nil);
objj_msgSend(_af,"setRepresentedObject:",_9f);
objj_msgSend(_af,"setImage:",objj_msgSend(_9f,"image"));
objj_msgSend(_af,"setTarget:",_97);
objj_msgSend(_af,"setEnabled:",objj_msgSend(_9f,"isEnabled"));
objj_msgSend(_additionalItemsButton,"addItem:",_af);
}
}else{
objj_msgSend(_additionalItemsButton,"removeFromSuperview");
}
}
}),new objj_method(sel_getUid("didSelectMenuItem:"),function(_b0,_b1,_b2){
with(_b0){
var _b3=objj_msgSend(_b2,"representedObject");
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_b3,"action"),objj_msgSend(_b3,"target"),_b3);
}
}),new objj_method(sel_getUid("reloadToolbarItems"),function(_b4,_b5){
with(_b4){
var _b6=objj_msgSend(_b4,"subviews"),_b7=_b6.length;
while(_b7--){
objj_msgSend(_b6[_b7],"removeFromSuperview");
}
var _b8=objj_msgSend(_toolbar,"items"),_b9=0;
_b7=_b8.length;
_minWidth=_67;
_viewsForToolbarItems={};
for(;_b9<_b7;++_b9){
var _ba=_b8[_b9],_bb=objj_msgSend(objj_msgSend(_CPToolbarItemView,"alloc"),"initWithToolbarItem:toolbar:",_ba,_b4);
_viewsForToolbarItems[objj_msgSend(_ba,"UID")]=_bb;
if(objj_msgSend(_ba,"toolTip")&&objj_msgSend(_bb,"respondsToSelector:",sel_getUid("setToolTip:"))){
objj_msgSend(_bb,"setToolTip:",objj_msgSend(_ba,"toolTip"));
}
objj_msgSend(_b4,"addSubview:",_bb);
_minWidth+=objj_msgSend(_bb,"minSize").width+_67;
}
objj_msgSend(_b4,"tile");
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("initialize"),function(_bc,_bd){
with(_bc){
if(_bc!==objj_msgSend(_CPToolbarView,"class")){
return;
}
var _be=objj_msgSend(CPBundle,"bundleForClass:",_bc);
_7a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_be,"pathForResource:","_CPToolbarView/_CPToolbarViewExtraItemsImage.png"),CPSizeMake(10,15));
_7b=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_be,"pathForResource:","_CPToolbarView/_CPToolbarViewExtraItemsAlternateImage.png"),{width:10,height:15});
}
})]);
var _3f=function(lhs,rhs){
var _bf=objj_msgSend(lhs,"visibilityPriority"),_c0=objj_msgSend(rhs,"visibilityPriority");
if(_bf==_c0){
return CPOrderedSame;
}
if(_bf>_c0){
return CPOrderedAscending;
}
return CPOrderedDescending;
};
var _c1=2;
var _3=objj_allocateClassPair(CPControl,"_CPToolbarItemView"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_labelSize"),new objj_ivar("_toolbarItem"),new objj_ivar("_toolbar"),new objj_ivar("_imageView"),new objj_ivar("_view"),new objj_ivar("_labelField"),new objj_ivar("_FIXME_isHUD")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("minSize"),function(_c2,_c3){
with(_c2){
return _minSize;
}
}),new objj_method(sel_getUid("maxSize"),function(_c4,_c5){
with(_c4){
return _maxSize;
}
}),new objj_method(sel_getUid("initWithToolbarItem:toolbar:"),function(_c6,_c7,_c8,_c9){
with(_c6){
_c6=objj_msgSendSuper({receiver:_c6,super_class:objj_getClass("_CPToolbarItemView").super_class},"init");
if(_c6){
_toolbarItem=_c8;
_labelField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:0,height:0}});
objj_msgSend(_labelField,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",11));
objj_msgSend(_labelField,"setTextColor:",objj_msgSend(_c6,"FIXME_labelColor"));
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_c6,"FIXME_labelShadowColor"));
objj_msgSend(_labelField,"setTextShadowOffset:",{width:0,height:1});
objj_msgSend(_labelField,"setAutoresizingMask:",CPViewWidthSizable|CPViewMinXMargin);
objj_msgSend(_c6,"addSubview:",_labelField);
objj_msgSend(_c6,"updateFromItem");
_toolbar=_c9;
var _ca=["label","image","alternateImage","minSize","maxSize","target","action","enabled"],_cb=0,_cc=objj_msgSend(_ca,"count");
for(;_cb<_cc;++_cb){
objj_msgSend(_toolbarItem,"addObserver:forKeyPath:options:context:",_c6,_ca[_cb],0,NULL);
}
}
return _c6;
}
}),new objj_method(sel_getUid("FIXME_setIsHUD:"),function(_cd,_ce,_cf){
with(_cd){
_FIXME_isHUD=_cf;
objj_msgSend(_labelField,"setTextColor:",objj_msgSend(_cd,"FIXME_labelColor"));
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_cd,"FIXME_labelShadowColor"));
}
}),new objj_method(sel_getUid("updateFromItem"),function(_d0,_d1){
with(_d0){
var _d2=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_d2===CPToolbarSpaceItemIdentifier||_d2===CPToolbarFlexibleSpaceItemIdentifier||_d2===CPToolbarSeparatorItemIdentifier){
objj_msgSend(_view,"removeFromSuperview");
objj_msgSend(_imageView,"removeFromSuperview");
_minSize=objj_msgSend(_toolbarItem,"minSize");
_maxSize=objj_msgSend(_toolbarItem,"maxSize");
if(_d2===CPToolbarSeparatorItemIdentifier){
_view=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:2,height:32}});
sizes={};
sizes["CPToolbarItemSeparator"]=[{width:2,height:26},{width:2,height:1},{width:2,height:26}];
objj_msgSend(_view,"setBackgroundColor:",_CPControlThreePartImagePattern(YES,sizes,"CPToolbarItem","Separator"));
objj_msgSend(_d0,"addSubview:",_view);
}
return;
}
objj_msgSend(_d0,"setTarget:",objj_msgSend(_toolbarItem,"target"));
objj_msgSend(_d0,"setAction:",objj_msgSend(_toolbarItem,"action"));
var _d3=objj_msgSend(_toolbarItem,"view")||nil;
if(_d3!==_view){
if(!_d3){
objj_msgSend(_view,"removeFromSuperview");
}else{
objj_msgSend(_d0,"addSubview:",_d3);
objj_msgSend(_imageView,"removeFromSuperview");
}
_view=_d3;
}
if(!_view){
if(!_imageView){
_imageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",objj_msgSend(_d0,"bounds"));
objj_msgSend(_imageView,"setImageScaling:",CPImageScaleProportionallyDown);
objj_msgSend(_d0,"addSubview:",_imageView);
}
objj_msgSend(_imageView,"setImage:",objj_msgSend(_toolbarItem,"image"));
}
var _d4=objj_msgSend(_toolbarItem,"minSize"),_d5=objj_msgSend(_toolbarItem,"maxSize");
objj_msgSend(_labelField,"setStringValue:",objj_msgSend(_toolbarItem,"label"));
objj_msgSend(_labelField,"sizeToFit");
objj_msgSend(_d0,"setEnabled:",objj_msgSend(_toolbarItem,"isEnabled"));
_labelSize=objj_msgSend(_labelField,"frame").size;
var _d6=objj_msgSend(objj_msgSend(_toolbarItem,"toolbar"),"displayMode")===CPToolbarDisplayModeIconOnly,_d7=objj_msgSend(objj_msgSend(_toolbarItem,"toolbar"),"displayMode")===CPToolbarDisplayModeLabelOnly;
objj_msgSend(_labelField,"setHidden:",_d6);
objj_msgSend(_view,"setHidden:",_d7);
_minSize={width:MAX(_labelSize.width,_d4.width),height:(_d7?0:_d4.height)+(_d6?0:_labelSize.height+_c1)};
_maxSize={width:MAX(_labelSize.width,_d5.width),height:100000000};
objj_msgSend(_toolbar,"tile");
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_d8,_d9){
with(_d8){
var _da=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_da===CPToolbarSpaceItemIdentifier||_da===CPToolbarFlexibleSpaceItemIdentifier){
return;
}
var _db=objj_msgSend(_d8,"bounds"),_dc=(_db.size.width);
if(_da===CPToolbarSeparatorItemIdentifier){
return objj_msgSend(_view,"setFrame:",{origin:{x:ROUND((_dc-2)/2),y:0},size:{width:2,height:(_db.size.height)}});
}
var _dd=_view||_imageView,_de=objj_msgSend(_toolbarItem,"maxSize"),_df=objj_msgSend(objj_msgSend(_toolbarItem,"toolbar"),"displayMode")===CPToolbarDisplayModeIconOnly,_e0=(_db.size.height)-(_df?0:_labelSize.height),_e1=MIN(_de.width,_dc),_e2=MIN(_de.height,_e0);
objj_msgSend(_dd,"setFrame:",{origin:{x:ROUND((_dc-_e1)/2),y:ROUND((_e0-_e2)/2)},size:{width:_e1,height:_e2}});
objj_msgSend(_labelField,"setFrameOrigin:",{x:ROUND((_dc-_labelSize.width)/2),y:(_db.size.height)-_labelSize.height});
}
}),new objj_method(sel_getUid("mouseDown:"),function(_e3,_e4,_e5){
with(_e3){
if(objj_msgSend(_toolbarItem,"view")){
return objj_msgSend(objj_msgSend(_e3,"nextResponder"),"mouseDown:",_e5);
}
var _e6=objj_msgSend(_toolbarItem,"itemIdentifier");
if(_e6===CPToolbarSpaceItemIdentifier||_e6===CPToolbarFlexibleSpaceItemIdentifier||_e6===CPToolbarSeparatorItemIdentifier){
return objj_msgSend(objj_msgSend(_e3,"nextResponder"),"mouseDown:",_e5);
}
objj_msgSendSuper({receiver:_e3,super_class:objj_getClass("_CPToolbarItemView").super_class},"mouseDown:",_e5);
}
}),new objj_method(sel_getUid("setEnabled:"),function(_e7,_e8,_e9){
with(_e7){
objj_msgSendSuper({receiver:_e7,super_class:objj_getClass("_CPToolbarItemView").super_class},"setEnabled:",_e9);
if(_e9){
objj_msgSend(_imageView,"setAlphaValue:",1);
objj_msgSend(_labelField,"setAlphaValue:",1);
}else{
objj_msgSend(_imageView,"setAlphaValue:",0.5);
objj_msgSend(_labelField,"setAlphaValue:",0.5);
}
objj_msgSend(_toolbar,"tile");
}
}),new objj_method(sel_getUid("FIXME_labelColor"),function(_ea,_eb){
with(_ea){
if(_FIXME_isHUD){
return objj_msgSend(CPColor,"whiteColor");
}
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("FIXME_labelShadowColor"),function(_ec,_ed){
with(_ec){
if(_FIXME_isHUD){
return objj_msgSend(_ec,"isHighlighted")?objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.5):objj_msgSend(CPColor,"clearColor");
}
return objj_msgSend(_ec,"isHighlighted")?objj_msgSend(CPColor,"colorWithWhite:alpha:",0,0.3):objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.75);
}
}),new objj_method(sel_getUid("setHighlighted:"),function(_ee,_ef,_f0){
with(_ee){
objj_msgSendSuper({receiver:_ee,super_class:objj_getClass("_CPToolbarItemView").super_class},"setHighlighted:",_f0);
if(_f0){
var _f1=objj_msgSend(_toolbarItem,"alternateImage");
if(_f1){
objj_msgSend(_imageView,"setImage:",_f1);
}
objj_msgSend(_labelField,"setTextShadowOffset:",{width:0,height:0});
}else{
var _f2=objj_msgSend(_toolbarItem,"image");
if(_f2){
objj_msgSend(_imageView,"setImage:",_f2);
}
objj_msgSend(_labelField,"setTextShadowOffset:",{width:0,height:1});
}
objj_msgSend(_labelField,"setTextShadowColor:",objj_msgSend(_ee,"FIXME_labelShadowColor"));
}
}),new objj_method(sel_getUid("sendAction:to:"),function(_f3,_f4,_f5,_f6){
with(_f3){
objj_msgSend(CPApp,"sendAction:to:from:",_f5,_f6,_toolbarItem);
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(_f7,_f8,_f9,_fa,_fb,_fc){
with(_f7){
if(_f9==="enabled"){
objj_msgSend(_f7,"setEnabled:",objj_msgSend(_fa,"isEnabled"));
}else{
if(_f9==="target"){
objj_msgSend(_f7,"setTarget:",objj_msgSend(_fa,"target"));
}else{
if(_f9==="action"){
objj_msgSend(_f7,"setAction:",objj_msgSend(_fa,"action"));
}else{
objj_msgSend(_f7,"updateFromItem");
}
}
}
}
})]);
p;15;CPToolbarItem.jt;13698;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPView.ji;29;_CPToolbarFlexibleSpaceItem.ji;26;_CPToolbarShowColorsItem.ji;25;_CPToolbarSeparatorItem.ji;21;_CPToolbarSpaceItem.jt;13480;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPView.j",YES);
CPToolbarItemVisibilityPriorityStandard=0;
CPToolbarItemVisibilityPriorityLow=-1000;
CPToolbarItemVisibilityPriorityHigh=1000;
CPToolbarItemVisibilityPriorityUser=2000;
CPToolbarSeparatorItemIdentifier="CPToolbarSeparatorItem";
CPToolbarSpaceItemIdentifier="CPToolbarSpaceItem";
CPToolbarFlexibleSpaceItemIdentifier="CPToolbarFlexibleSpaceItem";
CPToolbarShowColorsItemIdentifier="CPToolbarShowColorsItem";
CPToolbarShowFontsItemIdentifier="CPToolbarShowFontsItem";
CPToolbarCustomizeToolbarItemIdentifier="CPToolbarCustomizeToolbarItem";
CPToolbarPrintItemIdentifier="CPToolbarPrintItem";
var _1=objj_allocateClassPair(CPObject,"CPToolbarItem"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_itemIdentifier"),new objj_ivar("_toolbar"),new objj_ivar("_label"),new objj_ivar("_paletteLabel"),new objj_ivar("_toolTip"),new objj_ivar("_tag"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_isEnabled"),new objj_ivar("_image"),new objj_ivar("_alternateImage"),new objj_ivar("_view"),new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_visibilityPriority"),new objj_ivar("_autovalidates")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithItemIdentifier:","");
}
}),new objj_method(sel_getUid("initWithItemIdentifier:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPToolbarItem").super_class},"init");
if(_5){
_itemIdentifier=_7;
_tag=0;
_isEnabled=YES;
_minSize=CGSizeMakeZero();
_maxSize=CGSizeMakeZero();
_visibilityPriority=CPToolbarItemVisibilityPriorityStandard;
_autovalidates=YES;
}
return _5;
}
}),new objj_method(sel_getUid("itemIdentifier"),function(_8,_9){
with(_8){
return _itemIdentifier;
}
}),new objj_method(sel_getUid("toolbar"),function(_a,_b){
with(_a){
return _toolbar;
}
}),new objj_method(sel_getUid("_setToolbar:"),function(_c,_d,_e){
with(_c){
_toolbar=_e;
}
}),new objj_method(sel_getUid("label"),function(_f,_10){
with(_f){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_11,_12,_13){
with(_11){
_label=_13;
}
}),new objj_method(sel_getUid("paletteLabel"),function(_14,_15){
with(_14){
return _paletteLabel;
}
}),new objj_method(sel_getUid("setPaletteLabel:"),function(_16,_17,_18){
with(_16){
_paletteLabel=_18;
}
}),new objj_method(sel_getUid("toolTip"),function(_19,_1a){
with(_19){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("toolTip"))){
return objj_msgSend(_view,"toolTip");
}
return _toolTip;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_1b,_1c,_1d){
with(_1b){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setToolTip:"))){
objj_msgSend(_view,"setToolTip:",_1d);
}
_toolTip=_1d;
}
}),new objj_method(sel_getUid("tag"),function(_1e,_1f){
with(_1e){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("tag"))){
return objj_msgSend(_view,"tag");
}
return _tag;
}
}),new objj_method(sel_getUid("setTag:"),function(_20,_21,_22){
with(_20){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTag:"))){
objj_msgSend(_view,"setTag:",_22);
}
_tag=_22;
}
}),new objj_method(sel_getUid("target"),function(_23,_24){
with(_23){
if(_view){
return objj_msgSend(_view,"respondsToSelector:",sel_getUid("target"))?objj_msgSend(_view,"target"):nil;
}
return _target;
}
}),new objj_method(sel_getUid("setTarget:"),function(_25,_26,_27){
with(_25){
if(!_view){
_target=_27;
}else{
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTarget:"))){
objj_msgSend(_view,"setTarget:",_27);
}
}
}
}),new objj_method(sel_getUid("action"),function(_28,_29){
with(_28){
if(_view){
return objj_msgSend(_view,"respondsToSelector:",sel_getUid("action"))?objj_msgSend(_view,"action"):nil;
}
return _action;
}
}),new objj_method(sel_getUid("setAction:"),function(_2a,_2b,_2c){
with(_2a){
if(!_view){
_action=_2c;
}else{
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_view,"setAction:",_2c);
}
}
}
}),new objj_method(sel_getUid("isEnabled"),function(_2d,_2e){
with(_2d){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("isEnabled"))){
return objj_msgSend(_view,"isEnabled");
}
return _isEnabled;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_2f,_30,_31){
with(_2f){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setEnabled:"))){
objj_msgSend(_view,"setEnabled:",_31);
}
_isEnabled=_31;
}
}),new objj_method(sel_getUid("image"),function(_32,_33){
with(_32){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("image"))){
return objj_msgSend(_view,"image");
}
return _image;
}
}),new objj_method(sel_getUid("setImage:"),function(_34,_35,_36){
with(_34){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setImage:"))){
objj_msgSend(_view,"setImage:",_36);
}
_image=_36;
if(!_image){
return;
}
if(_minSize.width===0&&_minSize.height===0&&_maxSize.width===0&&_maxSize.height===0){
var _37=objj_msgSend(_image,"size");
if(_37.width>0||_37.height>0){
objj_msgSend(_34,"setMinSize:",_37);
objj_msgSend(_34,"setMaxSize:",_37);
}
}
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_38,_39,_3a){
with(_38){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setAlternateImage:"))){
objj_msgSend(_view,"setAlternateImage:",_3a);
}
_alternateImage=_3a;
}
}),new objj_method(sel_getUid("alternateImage"),function(_3b,_3c){
with(_3b){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("alternateIamge"))){
return objj_msgSend(_view,"alternateImage");
}
return _alternateImage;
}
}),new objj_method(sel_getUid("view"),function(_3d,_3e){
with(_3d){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_3f,_40,_41){
with(_3f){
if(_view==_41){
return;
}
_view=_41;
if(_view){
if(_tag!==0&&objj_msgSend(_view,"respondsToSelector:",sel_getUid("setTag:"))){
objj_msgSend(_view,"setTag:",_tag);
}
_target=nil;
_action=nil;
}
}
}),new objj_method(sel_getUid("minSize"),function(_42,_43){
with(_42){
return _minSize;
}
}),new objj_method(sel_getUid("setMinSize:"),function(_44,_45,_46){
with(_44){
if(!_46.height||!_46.width){
return;
}
_minSize=CGSizeMakeCopy(_46);
_maxSize=CGSizeMake(MAX(_minSize.width,_maxSize.width),MAX(_minSize.height,_maxSize.height));
}
}),new objj_method(sel_getUid("maxSize"),function(_47,_48){
with(_47){
return _maxSize;
}
}),new objj_method(sel_getUid("setMaxSize:"),function(_49,_4a,_4b){
with(_49){
if(!_4b.height||!_4b.width){
return;
}
_maxSize=CGSizeMakeCopy(_4b);
_minSize=CGSizeMake(MIN(_minSize.width,_maxSize.width),MIN(_minSize.height,_maxSize.height));
}
}),new objj_method(sel_getUid("visibilityPriority"),function(_4c,_4d){
with(_4c){
return _visibilityPriority;
}
}),new objj_method(sel_getUid("setVisibilityPriority:"),function(_4e,_4f,_50){
with(_4e){
_visibilityPriority=_50;
}
}),new objj_method(sel_getUid("validate"),function(_51,_52){
with(_51){
var _53=objj_msgSend(_51,"action"),_54=objj_msgSend(_51,"target");
if(_view){
if(objj_msgSend(_54,"respondsToSelector:",sel_getUid("validateToolbarItem:"))){
objj_msgSend(_51,"setEnabled:",objj_msgSend(_54,"validateToolbarItem:",_51));
}
return;
}
if(!_53){
return objj_msgSend(_51,"setEnabled:",NO);
}
if(_54&&!objj_msgSend(_54,"respondsToSelector:",_53)){
return objj_msgSend(_51,"setEnabled:",NO);
}
_54=objj_msgSend(CPApp,"targetForAction:to:from:",_53,_54,_51);
if(!_54){
return objj_msgSend(_51,"setEnabled:",NO);
}
if(objj_msgSend(_54,"respondsToSelector:",sel_getUid("validateToolbarItem:"))){
objj_msgSend(_51,"setEnabled:",objj_msgSend(_54,"validateToolbarItem:",_51));
}else{
objj_msgSend(_51,"setEnabled:",YES);
}
}
}),new objj_method(sel_getUid("autovalidates"),function(_55,_56){
with(_55){
return _autovalidates;
}
}),new objj_method(sel_getUid("setAutovalidates:"),function(_57,_58,_59){
with(_57){
_autovalidates=!!_59;
}
})]);
var _5a="CPToolbarItemItemIdentifierKey",_5b="CPToolbarItemLabelKey",_5c="CPToolbarItemPaletteLabelKey",_5d="CPToolbarItemToolTipKey",_5e="CPToolbarItemTagKey",_5f="CPToolbarItemTargetKey",_60="CPToolbarItemActionKey",_61="CPToolbarItemEnabledKey",_62="CPToolbarItemImageKey",_63="CPToolbarItemAlternateImageKey",_64="CPToolbarItemViewKey",_65="CPToolbarItemMinSizeKey",_66="CPToolbarItemMaxSizeKey",_67="CPToolbarItemVisibilityPriorityKey",_68="CPToolbarItemAutovalidatesKey";
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_69,_6a,_6b){
with(_69){
_69=objj_msgSendSuper({receiver:_69,super_class:objj_getClass("CPToolbarItem").super_class},"init");
if(_69){
_itemIdentifier=objj_msgSend(_6b,"decodeObjectForKey:",_5a);
_minSize=objj_msgSend(_6b,"decodeSizeForKey:",_65);
_maxSize=objj_msgSend(_6b,"decodeSizeForKey:",_66);
objj_msgSend(_69,"setLabel:",objj_msgSend(_6b,"decodeObjectForKey:",_5b));
objj_msgSend(_69,"setPaletteLabel:",objj_msgSend(_6b,"decodeObjectForKey:",_5c));
objj_msgSend(_69,"setToolTip:",objj_msgSend(_6b,"decodeObjectForKey:",_5d));
objj_msgSend(_69,"setTag:",objj_msgSend(_6b,"decodeObjectForKey:",_5e));
objj_msgSend(_69,"setTarget:",objj_msgSend(_6b,"decodeObjectForKey:",_5f));
objj_msgSend(_69,"setAction:",CPSelectorFromString(objj_msgSend(_6b,"decodeObjectForKey:",_60)));
objj_msgSend(_69,"setEnabled:",objj_msgSend(_6b,"decodeBoolForKey:",_61));
objj_msgSend(_69,"setImage:",objj_msgSend(_6b,"decodeObjectForKey:",_62));
objj_msgSend(_69,"setAlternateImage:",objj_msgSend(_6b,"decodeObjectForKey:",_63));
objj_msgSend(_69,"setView:",objj_msgSend(_6b,"decodeObjectForKey:",_64));
objj_msgSend(_69,"setVisibilityPriority:",objj_msgSend(_6b,"decodeIntForKey:",_67));
objj_msgSend(_69,"setAutovalidates:",objj_msgSend(_6b,"decodeBoolForKey:",_68));
}
return _69;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6c,_6d,_6e){
with(_6c){
objj_msgSend(_6e,"encodeObject:forKey:",_itemIdentifier,_5a);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"label"),_5b);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"paletteLabel"),_5c);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"toolTip"),_5d);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"tag"),_5e);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"target"),_5f);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"action"),_60);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"isEnabled"),_61);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"image"),_62);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"alternateImage"),_63);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"view"),_64);
objj_msgSend(_6e,"encodeSize:forKey:",objj_msgSend(_6c,"minSize"),_65);
objj_msgSend(_6e,"encodeSize:forKey:",objj_msgSend(_6c,"maxSize"),_66);
objj_msgSend(_6e,"encodeObject:forKey:",objj_msgSend(_6c,"visibilityPriority"),_67);
objj_msgSend(_6e,"encodeBool:forKey:",objj_msgSend(_6c,"autovalidates"),_68);
}
})]);
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("copy"),function(_6f,_70){
with(_6f){
var _71=objj_msgSend(objj_msgSend(objj_msgSend(_6f,"class"),"alloc"),"initWithItemIdentifier:",_itemIdentifier);
if(_view){
objj_msgSend(_71,"setView:",objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_view)));
}
objj_msgSend(_71,"_setToolbar:",_toolbar);
objj_msgSend(_71,"setLabel:",_label);
objj_msgSend(_71,"setPaletteLabel:",_paletteLabel);
objj_msgSend(_71,"setToolTip:",objj_msgSend(_6f,"toolTip"));
objj_msgSend(_71,"setTag:",objj_msgSend(_6f,"tag"));
objj_msgSend(_71,"setTarget:",objj_msgSend(_6f,"target"));
objj_msgSend(_71,"setAction:",objj_msgSend(_6f,"action"));
objj_msgSend(_71,"setEnabled:",objj_msgSend(_6f,"isEnabled"));
objj_msgSend(_71,"setImage:",objj_msgSend(_6f,"image"));
objj_msgSend(_71,"setAlternateImage:",objj_msgSend(_6f,"alternateImage"));
objj_msgSend(_71,"setMinSize:",_minSize);
objj_msgSend(_71,"setMaxSize:",_maxSize);
objj_msgSend(_71,"setVisibilityPriority:",objj_msgSend(_6f,"visibilityPriority"));
objj_msgSend(_71,"setAutovalidates:",objj_msgSend(_6f,"autovalidates"));
return _71;
}
})]);
var _1=objj_getClass("CPToolbarItem");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
}
var _2=_1.isa;
class_addMethods(_2,[new objj_method(sel_getUid("_standardItemWithItemIdentifier:"),function(_72,_73,_74){
with(_72){
switch(_74){
case CPToolbarSeparatorItemIdentifier:
return objj_msgSend(_CPToolbarSeparatorItem,"new");
case CPToolbarSpaceItemIdentifier:
return objj_msgSend(_CPToolbarSpaceItem,"new");
case CPToolbarFlexibleSpaceItemIdentifier:
return objj_msgSend(_CPToolbarFlexibleSpaceItem,"new");
case CPToolbarShowColorsItemIdentifier:
return objj_msgSend(_CPToolbarShowColorsItem,"new");
case CPToolbarShowFontsItemIdentifier:
return nil;
case CPToolbarCustomizeToolbarItemIdentifier:
return nil;
case CPToolbarPrintItemIdentifier:
return nil;
}
return nil;
}
})]);
objj_executeFile("_CPToolbarFlexibleSpaceItem.j",YES);
objj_executeFile("_CPToolbarShowColorsItem.j",YES);
objj_executeFile("_CPToolbarSeparatorItem.j",YES);
objj_executeFile("_CPToolbarSpaceItem.j",YES);
p;12;CPTreeNode.jt;3869;@STATIC;1.0;I;21;Foundation/CPObject.jI;24;Foundation/CPIndexPath.jt;3795;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPIndexPath.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPTreeNode"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_representedObject"),new objj_ivar("_parentNode"),new objj_ivar("_childNodes")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("representedObject"),function(_3,_4){
with(_3){
return _representedObject;
}
}),new objj_method(sel_getUid("parentNode"),function(_5,_6){
with(_5){
return _parentNode;
}
}),new objj_method(sel_getUid("initWithRepresentedObject:"),function(_7,_8,_9){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPTreeNode").super_class},"init");
if(_7){
_representedObject=_9;
_childNodes=[];
}
return _7;
}
}),new objj_method(sel_getUid("isLeaf"),function(_a,_b){
with(_a){
return objj_msgSend(_childNodes,"count")<=0;
}
}),new objj_method(sel_getUid("childNodes"),function(_c,_d){
with(_c){
return objj_msgSend(_childNodes,"copy");
}
}),new objj_method(sel_getUid("mutableChildNodes"),function(_e,_f){
with(_e){
return objj_msgSend(_e,"mutableArrayValueForKey:","childNodes");
}
}),new objj_method(sel_getUid("insertObject:inChildNodesAtIndex:"),function(_10,_11,_12,_13){
with(_10){
objj_msgSend(objj_msgSend(_12._parentNode,"mutableChildNodes"),"removeObjectIdenticalTo:",_12);
_12._parentNode=_10;
objj_msgSend(_childNodes,"insertObject:atIndex:",_12,_13);
}
}),new objj_method(sel_getUid("removeObjectFromChildNodesAtIndex:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_childNodes,"objectAtIndex:",_16)._parentNode=nil;
objj_msgSend(_childNodes,"removeObjectAtIndex:",_16);
}
}),new objj_method(sel_getUid("replaceObjectFromChildNodesAtIndex:withObject:"),function(_17,_18,_19,_1a){
with(_17){
var _1b=objj_msgSend(_childNodes,"objectAtIndex:",_19);
_1b._parentNode=nil;
_1a._parentNode=_17;
objj_msgSend(_childNodes,"replaceObjectAtIndex:withObject:",_19,_1a);
}
}),new objj_method(sel_getUid("objectInChildNodesAtIndex:"),function(_1c,_1d,_1e){
with(_1c){
return _childNodes[_1e];
}
}),new objj_method(sel_getUid("sortWithSortDescriptors:recursively:"),function(_1f,_20,_21,_22){
with(_1f){
objj_msgSend(_childNodes,"sortUsingDescriptors:",_21);
if(!_22){
return;
}
var _23=objj_msgSend(_childNodes,"count");
while(_23--){
objj_msgSend(_childNodes[_23],"sortWithSortDescriptors:recursively:",_21,YES);
}
}
}),new objj_method(sel_getUid("descendantNodeAtIndexPath:"),function(_24,_25,_26){
with(_24){
var _27=0,_28=objj_msgSend(_26,"length"),_29=_24;
for(;_27<_28;++_27){
_29=objj_msgSend(_29,"objectInChildNodesAtIndex:",objj_msgSend(_26,"indexAtPosition:",_27));
}
return _29;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("treeNodeWithRepresentedObject:"),function(_2a,_2b,_2c){
with(_2a){
return objj_msgSend(objj_msgSend(_2a,"alloc"),"initWithRepresentedObject:",_2c);
}
})]);
var _2d="CPTreeNodeRepresentedObjectKey",_2e="CPTreeNodeParentNodeKey",_2f="CPTreeNodeChildNodesKey";
var _1=objj_getClass("CPTreeNode");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPTreeNode\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_30,_31,_32){
with(_30){
_30=objj_msgSendSuper({receiver:_30,super_class:objj_getClass("CPTreeNode").super_class},"init");
if(_30){
_representedObject=objj_msgSend(_32,"decodeObjectForKey:",_2d);
_parentNode=objj_msgSend(_32,"decodeObjectForKey:",_2e);
_childNodes=objj_msgSend(_32,"decodeObjectForKey:",_2f);
}
return _30;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_33,_34,_35){
with(_33){
objj_msgSend(_35,"encodeObject:forKey:",_representedObject,_2d);
objj_msgSend(_35,"encodeConditionalObject:forKey:",_parentNode,_2e);
objj_msgSend(_35,"encodeObject:forKey:",_childNodes,_2f);
}
})]);
p;26;CPUserDefaultsController.jt;7327;@STATIC;1.0;I;21;Foundation/CPString.jI;21;AppKit/CPController.jt;7256;
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("AppKit/CPController.j",NO);
var _1=nil;
var _2=objj_allocateClassPair(CPController,"CPUserDefaultsController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_defaults"),new objj_ivar("_initialValues"),new objj_ivar("_appliesImmediately")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("defaults"),function(_4,_5){
with(_4){
return _defaults;
}
}),new objj_method(sel_getUid("initialValues"),function(_6,_7){
with(_6){
return _initialValues;
}
}),new objj_method(sel_getUid("setInitialValues:"),function(_8,_9,_a){
with(_8){
_initialValues=_a;
}
}),new objj_method(sel_getUid("appliesImmediately"),function(_b,_c){
with(_b){
return _appliesImmediately;
}
}),new objj_method(sel_getUid("setAppliesImmediately:"),function(_d,_e,_f){
with(_d){
_appliesImmediately=_f;
}
}),new objj_method(sel_getUid("initWithDefaults:initialValues:"),function(_10,_11,_12,_13){
with(_10){
if(_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CPUserDefaultsController").super_class},"init")){
if(!_12){
_12=objj_msgSend(CPUserDefaults,"standardUserDefaults");
}
_defaults=_12;
_initialValues=objj_msgSend(_13,"copy");
_appliesImmediately=YES;
_valueProxy=objj_msgSend(objj_msgSend(_CPUserDefaultsControllerProxy,"alloc"),"initWithController:",_10);
}
return _10;
}
}),new objj_method(sel_getUid("values"),function(_14,_15){
with(_14){
return _valueProxy;
}
}),new objj_method(sel_getUid("hasUnappliedChanges"),function(_16,_17){
with(_16){
return objj_msgSend(_valueProxy,"hasUnappliedChanges");
}
}),new objj_method(sel_getUid("save:"),function(_18,_19,_1a){
with(_18){
objj_msgSend(_valueProxy,"save");
}
}),new objj_method(sel_getUid("revert:"),function(_1b,_1c,_1d){
with(_1b){
objj_msgSend(_valueProxy,"revert");
}
}),new objj_method(sel_getUid("revertToInitialValues:"),function(_1e,_1f,_20){
with(_1e){
objj_msgSend(_valueProxy,"revertToInitialValues");
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("sharedUserDefaultsController"),function(_21,_22){
with(_21){
if(!_1){
_1=objj_msgSend(objj_msgSend(CPUserDefaultsController,"alloc"),"initWithDefaults:initialValues:",nil,nil);
}
return _1;
}
})]);
var _23="CPUserDefaultsControllerSharedKey";
var _2=objj_getClass("CPUserDefaultsController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPUserDefaultsController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_24,_25,_26){
with(_24){
if(objj_msgSend(_26,"decodeBoolForKey:",_23)){
return objj_msgSend(CPUserDefaultsController,"sharedUserDefaultsController");
}
_24=objj_msgSendSuper({receiver:_24,super_class:objj_getClass("CPUserDefaultsController").super_class},"initWithCoder:",_26);
if(_24){
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"decoding of non-shared CPUserDefaultsController not implemented");
}
return _24;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_27,_28,_29){
with(_27){
objj_msgSendSuper({receiver:_27,super_class:objj_getClass("CPUserDefaultsController").super_class},"encodeWithCoder:",_29);
if(_27===_1){
objj_msgSend(_29,"encodeBool:forKey:",YES,_23);
return;
}
objj_msgSend(CPException,"raise:reason:",CPUnsupportedMethodException,"encoding of non-shared CPUserDefaultsController not implemented");
}
})]);
var _2=objj_allocateClassPair(CPObject,"_CPUserDefaultsControllerProxy"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_controller"),new objj_ivar("_cachedValues")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithController:"),function(_2a,_2b,_2c){
with(_2a){
if(_2a=objj_msgSendSuper({receiver:_2a,super_class:objj_getClass("_CPUserDefaultsControllerProxy").super_class},"init")){
_controller=_2c;
_cachedValues=objj_msgSend(CPMutableDictionary,"dictionary");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"addObserver:selector:name:object:",_2a,sel_getUid("userDefaultsDidChange:"),CPUserDefaultsDidChangeNotification,objj_msgSend(_controller,"defaults"));
}
return _2a;
}
}),new objj_method(sel_getUid("dealloc"),function(_2d,_2e){
with(_2d){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"removeObserver:",_2d);
objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("_CPUserDefaultsControllerProxy").super_class},"dealloc");
}
}),new objj_method(sel_getUid("valueForKey:"),function(_2f,_30,_31){
with(_2f){
var _32=objj_msgSend(_cachedValues,"objectForKey:",_31);
if(_32===nil){
_32=objj_msgSend(objj_msgSend(_controller,"defaults"),"objectForKey:",_31);
if(_32===nil){
_32=objj_msgSend(objj_msgSend(_controller,"initialValues"),"objectForKey:",_31);
}
if(_32!==nil){
objj_msgSend(_cachedValues,"setObject:forKey:",_32,_31);
}
}
return _32;
}
}),new objj_method(sel_getUid("setValue:forKey:"),function(_33,_34,_35,_36){
with(_33){
objj_msgSend(_33,"willChangeValueForKey:",_36);
objj_msgSend(_cachedValues,"setObject:forKey:",_35,_36);
if(objj_msgSend(_controller,"appliesImmediately")){
objj_msgSend(objj_msgSend(_controller,"defaults"),"setObject:forKey:",_35,_36);
}
objj_msgSend(_33,"didChangeValueForKey:",_36);
}
}),new objj_method(sel_getUid("revert"),function(_37,_38){
with(_37){
var _39=objj_msgSend(_cachedValues,"allKeys"),_3a=objj_msgSend(_39,"count");
while(_3a--){
var key=_39[_3a];
objj_msgSend(_37,"willChangeValueForKey:",key);
objj_msgSend(_cachedValues,"removeObjectForKey:",key);
objj_msgSend(_37,"didChangeValueForKey:",key);
}
}
}),new objj_method(sel_getUid("save"),function(_3b,_3c){
with(_3b){
var _3d=objj_msgSend(_cachedValues,"allKeys"),_3e=objj_msgSend(_3d,"count");
while(_3e--){
var key=_3d[_3e];
objj_msgSend(objj_msgSend(_controller,"defaults"),"setObject:forKey:",objj_msgSend(_cachedValues,"objectForKey:",key),key);
}
}
}),new objj_method(sel_getUid("revertToInitialValues"),function(_3f,_40){
with(_3f){
var _41=objj_msgSend(_controller,"initialValues"),_42=objj_msgSend(_cachedValues,"allKeys"),_43=objj_msgSend(_42,"count");
while(_43--){
var key=_42[_43];
objj_msgSend(_3f,"willChangeValueForKey:",key);
var _44=objj_msgSend(_41,"objectForKey:",key);
if(_44!==nil){
objj_msgSend(_cachedValues,"setObject:forKey:",_44,key);
}else{
objj_msgSend(_cachedValues,"removeObjectForKey:",key);
}
objj_msgSend(_3f,"didChangeValueForKey:",key);
}
}
}),new objj_method(sel_getUid("userDefaultsDidChange:"),function(_45,_46,_47){
with(_45){
var _48=objj_msgSend(_controller,"defaults"),_49=objj_msgSend(_cachedValues,"allKeys"),_4a=objj_msgSend(_49,"count");
while(_4a--){
var key=_49[_4a],_4b=objj_msgSend(_cachedValues,"objectForKey:",key),_4c=objj_msgSend(_48,"objectForKey:",key);
if(!objj_msgSend(_4b,"isEqual:",_4c)){
objj_msgSend(_45,"willChangeValueForKey:",key);
objj_msgSend(_cachedValues,"setObject:forKey:",_4c,key);
objj_msgSend(_45,"didChangeValueForKey:",key);
}
}
}
}),new objj_method(sel_getUid("hasUnappliedChanges"),function(_4d,_4e){
with(_4d){
var _4f=objj_msgSend(_controller,"defaults"),_50=objj_msgSend(_cachedValues,"allKeys"),_51=objj_msgSend(_50,"count");
while(_51--){
var key=_50[_51],_52=objj_msgSend(_cachedValues,"objectForKey:",key),_53=objj_msgSend(_4f,"objectForKey:",key);
if(!objj_msgSend(_52,"isEqual:",_53)){
return YES;
}
}
return NO;
}
})]);
p;8;CPView.jt;68862;@STATIC;1.0;I;20;Foundation/CPArray.jI;26;Foundation/CPObjJRuntime.jI;18;Foundation/CPSet.ji;19;CGAffineTransform.ji;12;CGGeometry.ji;9;CPColor.ji;12;CPGeometry.ji;19;CPGraphicsContext.ji;13;CPResponder.ji;9;CPTheme.ji;18;_CPDisplayServer.jt;68614;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObjJRuntime.j",NO);
objj_executeFile("Foundation/CPSet.j",NO);
objj_executeFile("CGAffineTransform.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPColor.j",YES);
objj_executeFile("CPGeometry.j",YES);
objj_executeFile("CPGraphicsContext.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPTheme.j",YES);
objj_executeFile("_CPDisplayServer.j",YES);
CPViewNotSizable=0;
CPViewMinXMargin=1;
CPViewWidthSizable=2;
CPViewMaxXMargin=4;
CPViewMinYMargin=8;
CPViewHeightSizable=16;
CPViewMaxYMargin=32;
CPViewBoundsDidChangeNotification="CPViewBoundsDidChangeNotification";
CPViewFrameDidChangeNotification="CPViewFrameDidChangeNotification";
var _1=nil,_2=nil;
var _3=nil,_4=0,_5=1,_6=2,_7=3,_8=4;
var _9={},_a=1<<0,_b=1<<1;
var _c,_d,_e=1;
var _f=objj_allocateClassPair(CPResponder,"CPView"),_10=_f.isa;
class_addIvars(_f,[new objj_ivar("_window"),new objj_ivar("_superview"),new objj_ivar("_subviews"),new objj_ivar("_graphicsContext"),new objj_ivar("_tag"),new objj_ivar("_frame"),new objj_ivar("_bounds"),new objj_ivar("_boundsTransform"),new objj_ivar("_inverseBoundsTransform"),new objj_ivar("_registeredDraggedTypes"),new objj_ivar("_registeredDraggedTypesArray"),new objj_ivar("_isHidden"),new objj_ivar("_hitTests"),new objj_ivar("_clipsToBounds"),new objj_ivar("_postsFrameChangedNotifications"),new objj_ivar("_postsBoundsChangedNotifications"),new objj_ivar("_inhibitFrameAndBoundsChangedNotifications"),new objj_ivar("_inLiveResize"),new objj_ivar("_DOMElement"),new objj_ivar("_DOMContentsElement"),new objj_ivar("_DOMImageParts"),new objj_ivar("_DOMImageSizes"),new objj_ivar("_backgroundType"),new objj_ivar("_dirtyRect"),new objj_ivar("_opacity"),new objj_ivar("_backgroundColor"),new objj_ivar("_autoresizesSubviews"),new objj_ivar("_autoresizingMask"),new objj_ivar("_layer"),new objj_ivar("_wantsLayer"),new objj_ivar("_isInFullScreenMode"),new objj_ivar("_fullScreenModeState"),new objj_ivar("_needsLayout"),new objj_ivar("_ephemeralSubviews"),new objj_ivar("_theme"),new objj_ivar("_themeClass"),new objj_ivar("_themeAttributes"),new objj_ivar("_themeState"),new objj_ivar("_ephemeralSubviewsForNames"),new objj_ivar("_ephereralSubviews"),new objj_ivar("_nextKeyView"),new objj_ivar("_previousKeyView"),new objj_ivar("_viewClassFlags"),new objj_ivar("_toolTip"),new objj_ivar("_toolTipFunctionIn"),new objj_ivar("_toolTipFunctionOut"),new objj_ivar("_toolTipInstalled")]);
objj_registerClassPair(_f);
class_addMethods(_f,[new objj_method(sel_getUid("toolTip"),function(_11,_12){
with(_11){
return _toolTip;
}
}),new objj_method(sel_getUid("_setToolTip:"),function(_13,_14,_15){
with(_13){
_toolTip=_15;
}
}),new objj_method(sel_getUid("_setupViewFlags"),function(_16,_17){
with(_16){
var _18=objj_msgSend(_16,"class"),_19=objj_msgSend(_18,"UID");
if(_9[_19]===undefined){
var _1a=0;
if(objj_msgSend(_18,"instanceMethodForSelector:",sel_getUid("drawRect:"))!==objj_msgSend(CPView,"instanceMethodForSelector:",sel_getUid("drawRect:"))){
_1a|=_a;
}
if(objj_msgSend(_18,"instanceMethodForSelector:",sel_getUid("layoutSubviews"))!==objj_msgSend(CPView,"instanceMethodForSelector:",sel_getUid("layoutSubviews"))){
_1a|=_b;
}
_9[_19]=_1a;
}
_viewClassFlags=_9[_19];
}
}),new objj_method(sel_getUid("_setupToolTipHandlers"),function(_1b,_1c){
with(_1b){
_toolTipInstalled=NO;
_toolTipFunctionIn=function(e){
objj_msgSend(_1b,"_fireToolTip");
};
_toolTipFunctionOut=function(e){
objj_msgSend(_1b,"_invalidateToolTip");
};
}
}),new objj_method(sel_getUid("init"),function(_1d,_1e){
with(_1d){
return objj_msgSend(_1d,"initWithFrame:",CGRectMakeZero());
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_1f,_20,_21){
with(_1f){
_1f=objj_msgSendSuper({receiver:_1f,super_class:objj_getClass("CPView").super_class},"init");
if(_1f){
var _22=(_21.size.width),_23=(_21.size.height);
_subviews=[];
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
_tag=-1;
_frame={origin:{x:_21.origin.x,y:_21.origin.y},size:{width:_21.size.width,height:_21.size.height}};
_bounds={origin:{x:0,y:0},size:{width:_22,height:_23}};
_autoresizingMask=CPViewNotSizable;
_autoresizesSubviews=YES;
_clipsToBounds=YES;
_opacity=1;
_isHidden=NO;
_hitTests=YES;
_DOMElement=_3.cloneNode(false);
if(NULL){
var _24={x:CGPointMake((_21.origin.x),(_21.origin.y)).x*NULL.a+CGPointMake((_21.origin.x),(_21.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_21.origin.x),(_21.origin.y)).x*NULL.b+CGPointMake((_21.origin.x),(_21.origin.y)).y*NULL.d+NULL.ty};
}else{
var _24={x:(_21.origin.x),y:(_21.origin.y)};
}
_DOMElement.style.left=ROUND(_24.x)+"px";
_DOMElement.style.top=ROUND(_24.y)+"px";
_DOMElement.style.width=MAX(0,ROUND(_22))+"px";
_DOMElement.style.height=MAX(0,ROUND(_23))+"px";
if(typeof (appkit_tag_dom_elements)!=="undefined"&&!!appkit_tag_dom_elements){
_DOMElement.setAttribute("data-cappuccino-view",objj_msgSend(_1f,"className"));
}
_DOMImageParts=[];
_DOMImageSizes=[];
_theme=objj_msgSend(CPTheme,"defaultTheme");
_themeState=CPThemeStateNormal;
objj_msgSend(_1f,"_setupToolTipHandlers");
objj_msgSend(_1f,"_setupViewFlags");
objj_msgSend(_1f,"_loadThemeAttributes");
}
return _1f;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_25,_26,_27){
with(_25){
if(_toolTip==_27){
return;
}
_toolTip=_27;
if(_toolTip){
objj_msgSend(_25,"_installToolTipEventHandlers");
}else{
objj_msgSend(_25,"_uninstallToolTipEventHandlers");
}
}
}),new objj_method(sel_getUid("_installToolTipEventHandlers"),function(_28,_29){
with(_28){
if(_toolTipInstalled){
return;
}
if(_DOMElement.addEventListener){
_DOMElement.addEventListener("mouseover",_toolTipFunctionIn,NO);
_DOMElement.addEventListener("keypress",_toolTipFunctionOut,NO);
_DOMElement.addEventListener("mouseout",_toolTipFunctionOut,NO);
}else{
if(_DOMElement.attachEvent){
_DOMElement.attachEvent("onmouseover",_toolTipFunctionIn);
_DOMElement.attachEvent("onkeypress",_toolTipFunctionOut);
_DOMElement.attachEvent("onmouseout",_toolTipFunctionOut);
}
}
_toolTipInstalled=YES;
}
}),new objj_method(sel_getUid("_uninstallToolTipEventHandlers"),function(_2a,_2b){
with(_2a){
if(!_toolTipInstalled){
return;
}
if(_DOMElement.removeEventListener){
_DOMElement.removeEventListener("mouseover",_toolTipFunctionIn,NO);
_DOMElement.removeEventListener("keypress",_toolTipFunctionOut,NO);
_DOMElement.removeEventListener("mouseout",_toolTipFunctionOut,NO);
}else{
if(_DOMElement.detachEvent){
_DOMElement.detachEvent("onmouseover",_toolTipFunctionIn);
_DOMElement.detachEvent("onkeypress",_toolTipFunctionOut);
_DOMElement.detachEvent("onmouseout",_toolTipFunctionOut);
}
}
_toolTipInstalled=NO;
}
}),new objj_method(sel_getUid("_fireToolTip"),function(_2c,_2d){
with(_2c){
if(_d){
objj_msgSend(_d,"invalidate");
if(_c){
objj_msgSend(_c,"close");
}
_c=nil;
}
if(_toolTip){
_d=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",_e,_2c,sel_getUid("_showToolTip:"),nil,NO);
}
}
}),new objj_method(sel_getUid("_invalidateToolTip"),function(_2e,_2f){
with(_2e){
if(_d){
objj_msgSend(_d,"invalidate");
_d=nil;
}
if(_c){
objj_msgSend(_c,"close");
_c=nil;
}
}
}),new objj_method(sel_getUid("_showToolTip:"),function(_30,_31,_32){
with(_30){
if(_c){
objj_msgSend(_c,"close");
}
_c=objj_msgSend(_CPToolTip,"toolTipWithString:",_toolTip);
}
}),new objj_method(sel_getUid("superview"),function(_33,_34){
with(_33){
return _superview;
}
}),new objj_method(sel_getUid("subviews"),function(_35,_36){
with(_35){
return objj_msgSend(_subviews,"copy");
}
}),new objj_method(sel_getUid("window"),function(_37,_38){
with(_37){
return _window;
}
}),new objj_method(sel_getUid("addSubview:"),function(_39,_3a,_3b){
with(_39){
objj_msgSend(_39,"_insertSubview:atIndex:",_3b,CPNotFound);
}
}),new objj_method(sel_getUid("addSubview:positioned:relativeTo:"),function(_3c,_3d,_3e,_3f,_40){
with(_3c){
var _41=_40?objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_40):CPNotFound;
if(_41===CPNotFound){
_41=(_3f===CPWindowAbove)?objj_msgSend(_subviews,"count"):0;
}else{
if(_3f===CPWindowAbove){
++_41;
}
}
objj_msgSend(_3c,"_insertSubview:atIndex:",_3e,_41);
}
}),new objj_method(sel_getUid("_insertSubview:atIndex:"),function(_42,_43,_44,_45){
with(_42){
if(_44===_42){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"can't add a view as a subview of itself");
}
var _46=_subviews.length;
objj_msgSend(objj_msgSend(_42,"window"),"_dirtyKeyViewLoop");
if(_44._superview==_42){
var _47=objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_44);
if(_47===_45||_47===_46-1&&_45===_46){
return;
}
objj_msgSend(_subviews,"removeObjectAtIndex:",_47);
_DOMElement.removeChild(_44._DOMElement);
if(_45>_47){
--_45;
}
--_46;
}else{
objj_msgSend(_44,"removeFromSuperview");
objj_msgSend(_44,"_setWindow:",_window);
objj_msgSend(_44,"viewWillMoveToSuperview:",_42);
_44._superview=_42;
}
if(_45===CPNotFound||_45>=_46){
_subviews.push(_44);
_DOMElement.appendChild(_44._DOMElement);
}else{
_subviews.splice(_45,0,_44);
_DOMElement.insertBefore(_44._DOMElement,_subviews[_45+1]._DOMElement);
}
objj_msgSend(_44,"setNextResponder:",_42);
objj_msgSend(_44,"viewDidMoveToSuperview");
objj_msgSend(_42,"didAddSubview:",_44);
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_48,_49,_4a){
with(_48){
}
}),new objj_method(sel_getUid("removeFromSuperview"),function(_4b,_4c){
with(_4b){
if(!_superview){
return;
}
objj_msgSend(objj_msgSend(_4b,"window"),"_dirtyKeyViewLoop");
objj_msgSend(_superview,"willRemoveSubview:",_4b);
objj_msgSend(_superview._subviews,"removeObject:",_4b);
_superview._DOMElement.removeChild(_DOMElement);
_superview=nil;
objj_msgSend(_4b,"_setWindow:",nil);
}
}),new objj_method(sel_getUid("replaceSubview:with:"),function(_4d,_4e,_4f,_50){
with(_4d){
if(_4f._superview!=_4d){
return;
}
var _51=objj_msgSend(_subviews,"indexOfObjectIdenticalTo:",_4f);
objj_msgSend(_4f,"removeFromSuperview");
objj_msgSend(_4d,"_insertSubview:atIndex:",_50,_51);
}
}),new objj_method(sel_getUid("setSubviews:"),function(_52,_53,_54){
with(_52){
if(!_54){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"newSubviews cannot be nil in -[CPView setSubviews:]");
}
if(objj_msgSend(_subviews,"isEqual:",_54)){
return;
}
if(objj_msgSend(_subviews,"count")===0){
var _55=0,_56=objj_msgSend(_54,"count");
for(;_55<_56;++_55){
objj_msgSend(_52,"addSubview:",_54[_55]);
}
return;
}
if(objj_msgSend(_54,"count")===0){
var _56=objj_msgSend(_subviews,"count");
while(_56--){
objj_msgSend(_subviews[_56],"removeFromSuperview");
}
return;
}
var _57=objj_msgSend(CPMutableSet,"setWithArray:",_subviews);
objj_msgSend(_57,"removeObjectsInArray:",_54);
objj_msgSend(_57,"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
var _58=objj_msgSend(CPMutableSet,"setWithArray:",_54);
objj_msgSend(_58,"removeObjectsInArray:",_subviews);
var _59=nil,_5a=objj_msgSend(_58,"objectEnumerator");
while((_59=objj_msgSend(_5a,"nextObject"))!==nil){
objj_msgSend(_52,"addSubview:",_59);
}
if(objj_msgSend(_subviews,"isEqual:",_54)){
return;
}
_subviews=objj_msgSend(_54,"copy");
var _55=0,_56=objj_msgSend(_subviews,"count");
for(;_55<_56;++_55){
var _5b=_subviews[_55];
_DOMElement.removeChild(_5b._DOMElement);
_DOMElement.appendChild(_5b._DOMElement);
}
}
}),new objj_method(sel_getUid("_setWindow:"),function(_5c,_5d,_5e){
with(_5c){
if(_window===_5e){
return;
}
objj_msgSend(objj_msgSend(_5c,"window"),"_dirtyKeyViewLoop");
if(objj_msgSend(_window,"firstResponder")===_5c){
objj_msgSend(_window,"makeFirstResponder:",nil);
}
objj_msgSend(_5c,"viewWillMoveToWindow:",_5e);
if(_registeredDraggedTypes){
objj_msgSend(_window,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_5e,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
}
_window=_5e;
var _5f=objj_msgSend(_subviews,"count");
while(_5f--){
objj_msgSend(_subviews[_5f],"_setWindow:",_5e);
}
objj_msgSend(_5c,"viewDidMoveToWindow");
objj_msgSend(objj_msgSend(_5c,"window"),"_dirtyKeyViewLoop");
}
}),new objj_method(sel_getUid("isDescendantOf:"),function(_60,_61,_62){
with(_60){
var _63=_60;
do{
if(_63==_62){
return YES;
}
}while(_63=objj_msgSend(_63,"superview"));
return NO;
}
}),new objj_method(sel_getUid("viewDidMoveToSuperview"),function(_64,_65){
with(_64){
objj_msgSend(_64,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_66,_67){
with(_66){
}
}),new objj_method(sel_getUid("viewWillMoveToSuperview:"),function(_68,_69,_6a){
with(_68){
}
}),new objj_method(sel_getUid("viewWillMoveToWindow:"),function(_6b,_6c,_6d){
with(_6b){
}
}),new objj_method(sel_getUid("willRemoveSubview:"),function(_6e,_6f,_70){
with(_6e){
}
}),new objj_method(sel_getUid("enclosingMenuItem"),function(_71,_72){
with(_71){
var _73=_71;
while(_73&&!objj_msgSend(_73,"isKindOfClass:",objj_msgSend(_CPMenuItemView,"class"))){
_73=objj_msgSend(_73,"superview");
}
if(_73){
return _73._menuItem;
}
return nil;
}
}),new objj_method(sel_getUid("setTag:"),function(_74,_75,_76){
with(_74){
_tag=_76;
}
}),new objj_method(sel_getUid("tag"),function(_77,_78){
with(_77){
return _tag;
}
}),new objj_method(sel_getUid("viewWithTag:"),function(_79,_7a,_7b){
with(_79){
if(objj_msgSend(_79,"tag")==_7b){
return _79;
}
var _7c=0,_7d=_subviews.length;
for(;_7c<_7d;++_7c){
var _7e=objj_msgSend(_subviews[_7c],"viewWithTag:",_7b);
if(_7e){
return _7e;
}
}
return nil;
}
}),new objj_method(sel_getUid("isFlipped"),function(_7f,_80){
with(_7f){
return YES;
}
}),new objj_method(sel_getUid("setFrame:"),function(_81,_82,_83){
with(_81){
if(((_frame.origin.x==_83.origin.x&&_frame.origin.y==_83.origin.y)&&(_frame.size.width==_83.size.width&&_frame.size.height==_83.size.height))){
return;
}
_inhibitFrameAndBoundsChangedNotifications=YES;
objj_msgSend(_81,"setFrameOrigin:",_83.origin);
objj_msgSend(_81,"setFrameSize:",_83.size);
_inhibitFrameAndBoundsChangedNotifications=NO;
if(_postsFrameChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_81);
}
}
}),new objj_method(sel_getUid("frame"),function(_84,_85){
with(_84){
return {origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}};
}
}),new objj_method(sel_getUid("frameOrigin"),function(_86,_87){
with(_86){
return {x:_frame.origin.x,y:_frame.origin.y};
}
}),new objj_method(sel_getUid("frameSize"),function(_88,_89){
with(_88){
return {width:_frame.size.width,height:_frame.size.height};
}
}),new objj_method(sel_getUid("setCenter:"),function(_8a,_8b,_8c){
with(_8a){
objj_msgSend(_8a,"setFrameOrigin:",CGPointMake(_8c.x-_frame.size.width/2,_8c.y-_frame.size.height/2));
}
}),new objj_method(sel_getUid("center"),function(_8d,_8e){
with(_8d){
return CGPointMake(_frame.size.width/2+_frame.origin.x,_frame.size.height/2+_frame.origin.y);
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_8f,_90,_91){
with(_8f){
var _92=_frame.origin;
if(!_91||(_92.x==_91.x&&_92.y==_91.y)){
return;
}
_92.x=_91.x;
_92.y=_91.y;
if(_postsFrameChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_8f);
}
var _93=_superview?_superview._boundsTransform:NULL;
if(_93){
var _94={x:CGPointMake(_92.x,_92.y).x*_93.a+CGPointMake(_92.x,_92.y).y*_93.c+_93.tx,y:CGPointMake(_92.x,_92.y).x*_93.b+CGPointMake(_92.x,_92.y).y*_93.d+_93.ty};
}else{
var _94={x:_92.x,y:_92.y};
}
_DOMElement.style.left=ROUND(_94.x)+"px";
_DOMElement.style.top=ROUND(_94.y)+"px";
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_95,_96,_97){
with(_95){
var _98=_frame.size;
if(!_97||(_98.width==_97.width&&_98.height==_97.height)){
return;
}
var _99={width:_98.width,height:_98.height};
_98.width=_97.width;
_98.height=_97.height;
if(YES){
_bounds.size.width=_97.width;
_bounds.size.height=_97.height;
}
if(_layer){
objj_msgSend(_layer,"_owningViewBoundsChanged");
}
if(_autoresizesSubviews){
objj_msgSend(_95,"resizeSubviewsWithOldSize:",_99);
}
objj_msgSend(_95,"setNeedsLayout");
objj_msgSend(_95,"setNeedsDisplay:",YES);
_DOMElement.style.width=MAX(0,ROUND(_98.width))+"px";
_DOMElement.style.height=MAX(0,ROUND(_98.height))+"px";
if(_DOMContentsElement){
_DOMContentsElement.width=MAX(0,ROUND(_98.width));
_DOMContentsElement.height=MAX(0,ROUND(_98.height));
_DOMContentsElement.style.width=MAX(0,ROUND(_98.width))+"px";
_DOMContentsElement.style.height=MAX(0,ROUND(_98.height))+"px";
}
if(_backgroundType!==_4){
if(_backgroundType===_8){
_DOMImageParts[0].style.width=MAX(0,ROUND(_98.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_98.height))+"px";
}else{
var _9a=objj_msgSend(objj_msgSend(_backgroundColor,"patternImage"),"imageSlices");
if(_backgroundType===_5){
_DOMImageParts[0].style.width=MAX(0,ROUND(_98.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[1].style.width=MAX(0,ROUND(_98.width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_98.height-_DOMImageSizes[0].height-_DOMImageSizes[2].height))+"px";
_DOMImageParts[2].style.width=MAX(0,ROUND(_98.width))+"px";
_DOMImageParts[2].style.height=MAX(0,ROUND(_DOMImageSizes[2].height))+"px";
}else{
if(_backgroundType===_6){
_DOMImageParts[0].style.width=MAX(0,ROUND(_DOMImageSizes[0].width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_98.height))+"px";
_DOMImageParts[1].style.width=MAX(0,ROUND(_98.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_98.height))+"px";
_DOMImageParts[2].style.width=MAX(0,ROUND(_DOMImageSizes[2].width))+"px";
_DOMImageParts[2].style.height=MAX(0,ROUND(_98.height))+"px";
}else{
if(_backgroundType===_7){
var _9b=_98.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width,_9c=_98.height-_DOMImageSizes[0].height-_DOMImageSizes[6].height;
_DOMImageParts[1].style.width=MAX(0,ROUND(_9b))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[3].style.width=MAX(0,ROUND(_DOMImageSizes[3].width))+"px";
_DOMImageParts[3].style.height=MAX(0,ROUND(_9c))+"px";
_DOMImageParts[4].style.width=MAX(0,ROUND(_9b))+"px";
_DOMImageParts[4].style.height=MAX(0,ROUND(_9c))+"px";
_DOMImageParts[5].style.width=MAX(0,ROUND(_DOMImageSizes[5].width))+"px";
_DOMImageParts[5].style.height=MAX(0,ROUND(_9c))+"px";
_DOMImageParts[7].style.width=MAX(0,ROUND(_9b))+"px";
_DOMImageParts[7].style.height=MAX(0,ROUND(_DOMImageSizes[7].height))+"px";
}
}
}
}
}
if(_postsFrameChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,_95);
}
}
}),new objj_method(sel_getUid("setBounds:"),function(_9d,_9e,_9f){
with(_9d){
if(((_bounds.origin.x==_9f.origin.x&&_bounds.origin.y==_9f.origin.y)&&(_bounds.size.width==_9f.size.width&&_bounds.size.height==_9f.size.height))){
return;
}
_inhibitFrameAndBoundsChangedNotifications=YES;
objj_msgSend(_9d,"setBoundsOrigin:",_9f.origin);
objj_msgSend(_9d,"setBoundsSize:",_9f.size);
_inhibitFrameAndBoundsChangedNotifications=NO;
if(_postsBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_9d);
}
}
}),new objj_method(sel_getUid("bounds"),function(_a0,_a1){
with(_a0){
return {origin:{x:_bounds.origin.x,y:_bounds.origin.y},size:{width:_bounds.size.width,height:_bounds.size.height}};
}
}),new objj_method(sel_getUid("boundsOrigin"),function(_a2,_a3){
with(_a2){
return {x:_bounds.origin.x,y:_bounds.origin.y};
}
}),new objj_method(sel_getUid("boundsSize"),function(_a4,_a5){
with(_a4){
return {width:_bounds.size.width,height:_bounds.size.height};
}
}),new objj_method(sel_getUid("setBoundsOrigin:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=_bounds.origin;
if((_a9.x==_a8.x&&_a9.y==_a8.y)){
return;
}
_a9.x=_a8.x;
_a9.y=_a8.y;
if(_a9.x!=0||_a9.y!=0){
_boundsTransform={a:1,b:0,c:0,d:1,tx:-_a9.x,ty:-_a9.y};
_inverseBoundsTransform=CGAffineTransformInvert(_boundsTransform);
}else{
_boundsTransform=nil;
_inverseBoundsTransform=nil;
}
var _aa=_subviews.length;
while(_aa--){
var _ab=_subviews[_aa],_a9=_ab._frame.origin;
if(_boundsTransform){
var _ac={x:CGPointMake(_a9.x,_a9.y).x*_boundsTransform.a+CGPointMake(_a9.x,_a9.y).y*_boundsTransform.c+_boundsTransform.tx,y:CGPointMake(_a9.x,_a9.y).x*_boundsTransform.b+CGPointMake(_a9.x,_a9.y).y*_boundsTransform.d+_boundsTransform.ty};
}else{
var _ac={x:_a9.x,y:_a9.y};
}
_ab._DOMElement.style.left=ROUND(_ac.x)+"px";
_ab._DOMElement.style.top=ROUND(_ac.y)+"px";
}
if(_postsBoundsChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_a6);
}
}
}),new objj_method(sel_getUid("setBoundsSize:"),function(_ad,_ae,_af){
with(_ad){
var _b0=_bounds.size;
if((_b0.width==_af.width&&_b0.height==_af.height)){
return;
}
var _b1=_frame.size;
if(!(_b0.width==_b1.width&&_b0.height==_b1.height)){
var _b2=_bounds.origin;
_b2.x/=_b0.width/_b1.width;
_b2.y/=_b0.height/_b1.height;
}
_b0.width=_af.width;
_b0.height=_af.height;
if(!(_b0.width==_b1.width&&_b0.height==_b1.height)){
var _b2=_bounds.origin;
_b2.x*=_b0.width/_b1.width;
_b2.y*=_b0.height/_b1.height;
}
if(_postsBoundsChangedNotifications&&!_inhibitFrameAndBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,_ad);
}
}
}),new objj_method(sel_getUid("resizeWithOldSuperviewSize:"),function(_b3,_b4,_b5){
with(_b3){
var _b6=objj_msgSend(_b3,"autoresizingMask");
if(_b6==CPViewNotSizable){
return;
}
var _b7=_superview._frame,_b8={origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}},dX=((_b7.size.width)-_b5.width)/(((_b6&CPViewMinXMargin)?1:0)+(_b6&CPViewWidthSizable?1:0)+(_b6&CPViewMaxXMargin?1:0)),dY=((_b7.size.height)-_b5.height)/((_b6&CPViewMinYMargin?1:0)+(_b6&CPViewHeightSizable?1:0)+(_b6&CPViewMaxYMargin?1:0));
if(_b6&CPViewMinXMargin){
_b8.origin.x+=dX;
}
if(_b6&CPViewWidthSizable){
_b8.size.width+=dX;
}
if(_b6&CPViewMinYMargin){
_b8.origin.y+=dY;
}
if(_b6&CPViewHeightSizable){
_b8.size.height+=dY;
}
objj_msgSend(_b3,"setFrame:",_b8);
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_b9,_ba,_bb){
with(_b9){
var _bc=_subviews.length;
while(_bc--){
objj_msgSend(_subviews[_bc],"resizeWithOldSuperviewSize:",_bb);
}
}
}),new objj_method(sel_getUid("setAutoresizesSubviews:"),function(_bd,_be,_bf){
with(_bd){
_autoresizesSubviews=!!_bf;
}
}),new objj_method(sel_getUid("autoresizesSubviews"),function(_c0,_c1){
with(_c0){
return _autoresizesSubviews;
}
}),new objj_method(sel_getUid("setAutoresizingMask:"),function(_c2,_c3,_c4){
with(_c2){
_autoresizingMask=_c4;
}
}),new objj_method(sel_getUid("autoresizingMask"),function(_c5,_c6){
with(_c5){
return _autoresizingMask;
}
}),new objj_method(sel_getUid("enterFullScreenMode"),function(_c7,_c8){
with(_c7){
return objj_msgSend(_c7,"enterFullScreenMode:withOptions:",nil,nil);
}
}),new objj_method(sel_getUid("enterFullScreenMode:withOptions:"),function(_c9,_ca,_cb,_cc){
with(_c9){
_fullScreenModeState=_cd(_c9);
var _ce=objj_msgSend(objj_msgSend(CPWindow,"alloc"),"initWithContentRect:styleMask:",objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"contentBounds"),CPBorderlessWindowMask);
objj_msgSend(_ce,"setLevel:",CPScreenSaverWindowLevel);
objj_msgSend(_ce,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
var _cf=objj_msgSend(_ce,"contentView");
objj_msgSend(_cf,"setBackgroundColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_cf,"addSubview:",_c9);
objj_msgSend(_c9,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_c9,"setFrame:",CGRectMakeCopy(objj_msgSend(_cf,"bounds")));
objj_msgSend(_ce,"makeKeyAndOrderFront:",_c9);
objj_msgSend(_ce,"makeFirstResponder:",_c9);
_isInFullScreenMode=YES;
return YES;
}
}),new objj_method(sel_getUid("exitFullScreenMode"),function(_d0,_d1){
with(_d0){
objj_msgSend(_d0,"exitFullScreenModeWithOptions:",nil);
}
}),new objj_method(sel_getUid("exitFullScreenModeWithOptions:"),function(_d2,_d3,_d4){
with(_d2){
if(!_isInFullScreenMode){
return;
}
_isInFullScreenMode=NO;
objj_msgSend(_d2,"setFrame:",_fullScreenModeState.frame);
objj_msgSend(_d2,"setAutoresizingMask:",_fullScreenModeState.autoresizingMask);
objj_msgSend(_fullScreenModeState.superview,"_insertSubview:atIndex:",_d2,_fullScreenModeState.index);
objj_msgSend(objj_msgSend(_d2,"window"),"orderOut:",_d2);
}
}),new objj_method(sel_getUid("isInFullScreenMode"),function(_d5,_d6){
with(_d5){
return _isInFullScreenMode;
}
}),new objj_method(sel_getUid("setHidden:"),function(_d7,_d8,_d9){
with(_d7){
_d9=!!_d9;
if(_isHidden===_d9){
return;
}
_isHidden=_d9;
_DOMElement.style.display=_isHidden?"none":"block";
if(_d9){
var _da=objj_msgSend(_window,"firstResponder");
if(objj_msgSend(_da,"isKindOfClass:",objj_msgSend(CPView,"class"))){
do{
if(_d7==_da){
objj_msgSend(_window,"makeFirstResponder:",objj_msgSend(_d7,"nextValidKeyView"));
break;
}
}while(_da=objj_msgSend(_da,"superview"));
}
objj_msgSend(_d7,"_notifyViewDidHide");
}else{
objj_msgSend(_d7,"_notifyViewDidUnhide");
}
}
}),new objj_method(sel_getUid("_notifyViewDidHide"),function(_db,_dc){
with(_db){
objj_msgSend(_db,"viewDidHide");
var _dd=objj_msgSend(_subviews,"count");
while(_dd--){
objj_msgSend(_subviews[_dd],"_notifyViewDidHide");
}
}
}),new objj_method(sel_getUid("_notifyViewDidUnhide"),function(_de,_df){
with(_de){
objj_msgSend(_de,"viewDidUnhide");
var _e0=objj_msgSend(_subviews,"count");
while(_e0--){
objj_msgSend(_subviews[_e0],"_notifyViewDidUnhide");
}
}
}),new objj_method(sel_getUid("isHidden"),function(_e1,_e2){
with(_e1){
return _isHidden;
}
}),new objj_method(sel_getUid("setClipsToBounds:"),function(_e3,_e4,_e5){
with(_e3){
if(_clipsToBounds===_e5){
return;
}
_clipsToBounds=_e5;
_DOMElement.style.overflow=_clipsToBounds?"hidden":"visible";
}
}),new objj_method(sel_getUid("clipsToBounds"),function(_e6,_e7){
with(_e6){
return _clipsToBounds;
}
}),new objj_method(sel_getUid("setAlphaValue:"),function(_e8,_e9,_ea){
with(_e8){
if(_opacity==_ea){
return;
}
_opacity=_ea;
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
if(_ea===1){
try{
_DOMElement.style.removeAttribute("filter");
}
catch(anException){
}
}else{
_DOMElement.style.filter="alpha(opacity="+_ea*100+")";
}
}else{
_DOMElement.style.opacity=_ea;
}
}
}),new objj_method(sel_getUid("alphaValue"),function(_eb,_ec){
with(_eb){
return _opacity;
}
}),new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"),function(_ed,_ee){
with(_ed){
var _ef=_ed;
while(_ef&&!objj_msgSend(_ef,"isHidden")){
_ef=objj_msgSend(_ef,"superview");
}
return _ef!==nil;
}
}),new objj_method(sel_getUid("_isVisible"),function(_f0,_f1){
with(_f0){
return !objj_msgSend(_f0,"isHiddenOrHasHiddenAncestor")&&objj_msgSend(objj_msgSend(_f0,"window"),"isVisible");
}
}),new objj_method(sel_getUid("viewDidHide"),function(_f2,_f3){
with(_f2){
}
}),new objj_method(sel_getUid("viewDidUnhide"),function(_f4,_f5){
with(_f4){
}
}),new objj_method(sel_getUid("acceptsFirstMouse:"),function(_f6,_f7,_f8){
with(_f6){
return YES;
}
}),new objj_method(sel_getUid("hitTests"),function(_f9,_fa){
with(_f9){
return _hitTests;
}
}),new objj_method(sel_getUid("setHitTests:"),function(_fb,_fc,_fd){
with(_fb){
_hitTests=!!_fd;
}
}),new objj_method(sel_getUid("hitTest:"),function(_fe,_ff,_100){
with(_fe){
if(_isHidden||!_hitTests||!CPRectContainsPoint(_frame,_100)){
return nil;
}
var view=nil,i=_subviews.length,_101={x:_100.x-(_frame.origin.x),y:_100.y-(_frame.origin.y)};
if(_inverseBoundsTransform){
_101={x:_101.x*_inverseBoundsTransform.a+_101.y*_inverseBoundsTransform.c+_inverseBoundsTransform.tx,y:_101.x*_inverseBoundsTransform.b+_101.y*_inverseBoundsTransform.d+_inverseBoundsTransform.ty};
}
while(i--){
if(view=objj_msgSend(_subviews[i],"hitTest:",_101)){
return view;
}
}
return _fe;
}
}),new objj_method(sel_getUid("needsPanelToBecomeKey"),function(self,_102){
with(self){
return NO;
}
}),new objj_method(sel_getUid("mouseDownCanMoveWindow"),function(self,_103){
with(self){
return !objj_msgSend(self,"isOpaque");
}
}),new objj_method(sel_getUid("mouseDown:"),function(self,_104,_105){
with(self){
if(objj_msgSend(self,"mouseDownCanMoveWindow")){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"mouseDown:",_105);
}
}
}),new objj_method(sel_getUid("rightMouseDown:"),function(self,_106,_107){
with(self){
var menu=objj_msgSend(self,"menuForEvent:",_107);
if(menu){
objj_msgSend(CPMenu,"popUpContextMenu:withEvent:forView:",menu,_107,self);
}else{
if(objj_msgSend(objj_msgSend(self,"nextResponder"),"isKindOfClass:",CPView)){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"rightMouseDown:",_107);
}else{
objj_msgSend(objj_msgSend(objj_msgSend(_107,"window"),"platformWindow"),"_propagateContextMenuDOMEvent:",YES);
}
}
}
}),new objj_method(sel_getUid("menuForEvent:"),function(self,_108,_109){
with(self){
return objj_msgSend(self,"menu")||objj_msgSend(objj_msgSend(self,"class"),"defaultMenu");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(self,_10a,_10b){
with(self){
if(_backgroundColor==_10b){
return;
}
if(_10b==objj_msgSend(CPNull,"null")){
_10b=nil;
}
_backgroundColor=_10b;
var _10c=objj_msgSend(_backgroundColor,"patternImage"),_10d=_backgroundColor&&(objj_msgSend(_backgroundColor,"patternImage")||objj_msgSend(_backgroundColor,"alphaComponent")>0),_10e=_10d&&objj_msgSend(_backgroundColor,"alphaComponent")<1,_10f=CPFeatureIsCompatible(CPCSSRGBAFeature),_110=_10e&&!_10f,_111=0;
if(objj_msgSend(_10c,"isThreePartImage")){
_backgroundType=objj_msgSend(_10c,"isVertical")?_5:_6;
_111=3-_DOMImageParts.length;
}else{
if(objj_msgSend(_10c,"isNinePartImage")){
_backgroundType=_7;
_111=9-_DOMImageParts.length;
}else{
_backgroundType=_110?_8:_4;
_111=(_110?1:0)-_DOMImageParts.length;
}
}
if(_111>0){
while(_111--){
var _112=_3.cloneNode(false);
_112.style.zIndex=-1000;
_DOMImageParts.push(_112);
_DOMElement.appendChild(_112);
}
}else{
_111=-_111;
while(_111--){
_DOMElement.removeChild(_DOMImageParts.pop());
}
}
if(_backgroundType===_4||_backgroundType===_8){
var _113=_10d?objj_msgSend(_backgroundColor,"cssString"):"";
if(_110){
_DOMElement.style.background="";
_DOMImageParts[0].style.background=objj_msgSend(_backgroundColor,"cssString");
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
_DOMImageParts[0].style.filter="alpha(opacity="+objj_msgSend(_backgroundColor,"alphaComponent")*100+")";
}else{
_DOMImageParts[0].style.opacity=objj_msgSend(_backgroundColor,"alphaComponent");
}
var size=objj_msgSend(self,"bounds").size;
_DOMImageParts[0].style.width=MAX(0,ROUND(size.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(size.height))+"px";
}else{
_DOMElement.style.background=_113;
}
}else{
var _114=objj_msgSend(_10c,"imageSlices"),_115=MIN(_DOMImageParts.length,_114.length),_116=_frame.size;
while(_115--){
var _117=_114[_115],size=_DOMImageSizes[_115]=_117?objj_msgSend(_117,"size"):{width:0,height:0};
_DOMImageParts[_115].style.width=MAX(0,ROUND(size.width))+"px";
_DOMImageParts[_115].style.height=MAX(0,ROUND(size.height))+"px";
_DOMImageParts[_115].style.background=_117?"url(\""+objj_msgSend(_117,"filename")+"\")":"";
if(!_10f){
if(CPFeatureIsCompatible(CPOpacityRequiresFilterFeature)){
try{
_DOMImageParts[_115].style.removeAttribute("filter");
}
catch(anException){
}
}else{
_DOMImageParts[_115].style.opacity=1;
}
}
}
if(_backgroundType==_7){
var _118=_116.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width,_119=_116.height-_DOMImageSizes[0].height-_DOMImageSizes[6].height;
_DOMImageParts[1].style.width=MAX(0,ROUND(_118))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[3].style.width=MAX(0,ROUND(_DOMImageSizes[3].width))+"px";
_DOMImageParts[3].style.height=MAX(0,ROUND(_119))+"px";
_DOMImageParts[4].style.width=MAX(0,ROUND(_118))+"px";
_DOMImageParts[4].style.height=MAX(0,ROUND(_119))+"px";
_DOMImageParts[5].style.width=MAX(0,ROUND(_DOMImageSizes[5].width))+"px";
_DOMImageParts[5].style.height=MAX(0,ROUND(_119))+"px";
_DOMImageParts[7].style.width=MAX(0,ROUND(_118))+"px";
_DOMImageParts[7].style.height=MAX(0,ROUND(_DOMImageSizes[7].height))+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[0].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:_DOMImageSizes[0].width,y:0};
}
_DOMImageParts[1].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[1].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[2].style.right=ROUND(_11a.x)+"px";
_DOMImageParts[2].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:_DOMImageSizes[1].height};
}
_DOMImageParts[3].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[3].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,_DOMImageSizes[0].height).y*NULL.d+NULL.ty};
}else{
var _11a={x:_DOMImageSizes[0].width,y:_DOMImageSizes[0].height};
}
_DOMImageParts[4].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[4].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[1].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[1].height).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:_DOMImageSizes[1].height};
}
_DOMImageParts[5].style.right=ROUND(_11a.x)+"px";
_DOMImageParts[5].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[6].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[6].style.bottom=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(_DOMImageSizes[6].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[6].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[6].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[6].width,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:_DOMImageSizes[6].width,y:0};
}
_DOMImageParts[7].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[7].style.bottom=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[8].style.right=ROUND(_11a.x)+"px";
_DOMImageParts[8].style.bottom=ROUND(_11a.y)+"px";
}else{
if(_backgroundType==_5){
_DOMImageParts[0].style.width=MAX(0,ROUND(_116.width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_DOMImageSizes[0].height))+"px";
_DOMImageParts[1].style.width=MAX(0,ROUND(_116.width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_116.height-_DOMImageSizes[0].height-_DOMImageSizes[2].height))+"px";
_DOMImageParts[2].style.width=MAX(0,ROUND(_116.width))+"px";
_DOMImageParts[2].style.height=MAX(0,ROUND(_DOMImageSizes[2].height))+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[0].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,_DOMImageSizes[0].height).x*NULL.a+CGPointMake(0,_DOMImageSizes[0].height).y*NULL.c+NULL.tx,y:CGPointMake(0,_DOMImageSizes[0].height).x*NULL.b+CGPointMake(0,_DOMImageSizes[0].height).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:_DOMImageSizes[0].height};
}
_DOMImageParts[1].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[1].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[2].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[2].style.bottom=ROUND(_11a.y)+"px";
}else{
if(_backgroundType==_6){
_DOMImageParts[0].style.width=MAX(0,ROUND(_DOMImageSizes[0].width))+"px";
_DOMImageParts[0].style.height=MAX(0,ROUND(_116.height))+"px";
_DOMImageParts[1].style.width=MAX(0,ROUND(_116.width-_DOMImageSizes[0].width-_DOMImageSizes[2].width))+"px";
_DOMImageParts[1].style.height=MAX(0,ROUND(_116.height))+"px";
_DOMImageParts[2].style.width=MAX(0,ROUND(_DOMImageSizes[2].width))+"px";
_DOMImageParts[2].style.height=MAX(0,ROUND(_116.height))+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[0].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[0].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.a+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.c+NULL.tx,y:CGPointMake(_DOMImageSizes[0].width,0).x*NULL.b+CGPointMake(_DOMImageSizes[0].width,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:_DOMImageSizes[0].width,y:0};
}
_DOMImageParts[1].style.left=ROUND(_11a.x)+"px";
_DOMImageParts[1].style.top=ROUND(_11a.y)+"px";
if(NULL){
var _11a={x:CGPointMake(0,0).x*NULL.a+CGPointMake(0,0).y*NULL.c+NULL.tx,y:CGPointMake(0,0).x*NULL.b+CGPointMake(0,0).y*NULL.d+NULL.ty};
}else{
var _11a={x:0,y:0};
}
_DOMImageParts[2].style.right=ROUND(_11a.x)+"px";
_DOMImageParts[2].style.top=ROUND(_11a.y)+"px";
}
}
}
}
}
}),new objj_method(sel_getUid("backgroundColor"),function(self,_11b){
with(self){
return _backgroundColor;
}
}),new objj_method(sel_getUid("convertPoint:fromView:"),function(self,_11c,_11d,_11e){
with(self){
return CGPointApplyAffineTransform(_11d,_11f(_11e,self));
}
}),new objj_method(sel_getUid("convertPointFromBase:"),function(self,_120,_121){
with(self){
return CGPointApplyAffineTransform(_121,_11f(nil,self));
}
}),new objj_method(sel_getUid("convertPoint:toView:"),function(self,_122,_123,_124){
with(self){
return CGPointApplyAffineTransform(_123,_11f(self,_124));
}
}),new objj_method(sel_getUid("convertPointToBase:"),function(self,_125,_126){
with(self){
return CGPointApplyAffineTransform(_126,_11f(self,nil));
}
}),new objj_method(sel_getUid("convertSize:fromView:"),function(self,_127,_128,_129){
with(self){
return CGSizeApplyAffineTransform(_128,_11f(_129,self));
}
}),new objj_method(sel_getUid("convertSize:toView:"),function(self,_12a,_12b,_12c){
with(self){
return CGSizeApplyAffineTransform(_12b,_11f(self,_12c));
}
}),new objj_method(sel_getUid("convertRect:fromView:"),function(self,_12d,_12e,_12f){
with(self){
return CGRectApplyAffineTransform(_12e,_11f(_12f,self));
}
}),new objj_method(sel_getUid("convertRectFromBase:"),function(self,_130,_131){
with(self){
return CGRectApplyAffineTransform(_131,_11f(nil,self));
}
}),new objj_method(sel_getUid("convertRect:toView:"),function(self,_132,_133,_134){
with(self){
return CGRectApplyAffineTransform(_133,_11f(self,_134));
}
}),new objj_method(sel_getUid("convertRectToBase:"),function(self,_135,_136){
with(self){
return CGRectApplyAffineTransform(_136,_11f(self,nil));
}
}),new objj_method(sel_getUid("setPostsFrameChangedNotifications:"),function(self,_137,_138){
with(self){
_138=!!_138;
if(_postsFrameChangedNotifications===_138){
return;
}
_postsFrameChangedNotifications=_138;
if(_postsFrameChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewFrameDidChangeNotification,self);
}
}
}),new objj_method(sel_getUid("postsFrameChangedNotifications"),function(self,_139){
with(self){
return _postsFrameChangedNotifications;
}
}),new objj_method(sel_getUid("setPostsBoundsChangedNotifications:"),function(self,_13a,_13b){
with(self){
_13b=!!_13b;
if(_postsBoundsChangedNotifications===_13b){
return;
}
_postsBoundsChangedNotifications=_13b;
if(_postsBoundsChangedNotifications){
objj_msgSend(_1,"postNotificationName:object:",CPViewBoundsDidChangeNotification,self);
}
}
}),new objj_method(sel_getUid("postsBoundsChangedNotifications"),function(self,_13c){
with(self){
return _postsBoundsChangedNotifications;
}
}),new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"),function(self,_13d,_13e,_13f,_140,_141,_142,_143,_144){
with(self){
objj_msgSend(_window,"dragImage:at:offset:event:pasteboard:source:slideBack:",_13e,objj_msgSend(self,"convertPoint:toView:",_13f,nil),_140,_141,_142,_143,_144);
}
}),new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"),function(self,_145,_146,_147,_148,_149,_14a,_14b,_14c){
with(self){
objj_msgSend(_window,"dragView:at:offset:event:pasteboard:source:slideBack:",_146,objj_msgSend(self,"convertPoint:toView:",_147,nil),_148,_149,_14a,_14b,_14c);
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(self,_14d,_14e){
with(self){
if(!_14e||!objj_msgSend(_14e,"count")){
return;
}
var _14f=objj_msgSend(self,"window");
objj_msgSend(_14f,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_registeredDraggedTypes,"addObjectsFromArray:",_14e);
objj_msgSend(_14f,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypesArray=nil;
}
}),new objj_method(sel_getUid("registeredDraggedTypes"),function(self,_150){
with(self){
if(!_registeredDraggedTypesArray){
_registeredDraggedTypesArray=objj_msgSend(_registeredDraggedTypes,"allObjects");
}
return _registeredDraggedTypesArray;
}
}),new objj_method(sel_getUid("unregisterDraggedTypes"),function(self,_151){
with(self){
objj_msgSend(objj_msgSend(self,"window"),"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
}
}),new objj_method(sel_getUid("drawRect:"),function(self,_152,_153){
with(self){
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(self,_154,_155){
with(self){
if(_155){
objj_msgSend(self,"setNeedsDisplayInRect:",objj_msgSend(self,"bounds"));
}
}
}),new objj_method(sel_getUid("setNeedsDisplayInRect:"),function(self,_156,_157){
with(self){
if(!(_viewClassFlags&_a)){
return;
}
if((_157.size.width<=0||_157.size.height<=0)){
return;
}
if(_dirtyRect&&!(_dirtyRect.size.width<=0||_dirtyRect.size.height<=0)){
_dirtyRect=CGRectUnion(_157,_dirtyRect);
}else{
_dirtyRect={origin:{x:_157.origin.x,y:_157.origin.y},size:{width:_157.size.width,height:_157.size.height}};
}
_CPDisplayServerAddDisplayObject(self);
}
}),new objj_method(sel_getUid("needsDisplay"),function(self,_158){
with(self){
return _dirtyRect&&!(_dirtyRect.size.width<=0||_dirtyRect.size.height<=0);
}
}),new objj_method(sel_getUid("displayIfNeeded"),function(self,_159){
with(self){
if(objj_msgSend(self,"needsDisplay")){
objj_msgSend(self,"displayRect:",_dirtyRect);
}
}
}),new objj_method(sel_getUid("display"),function(self,_15a){
with(self){
objj_msgSend(self,"displayRect:",objj_msgSend(self,"visibleRect"));
}
}),new objj_method(sel_getUid("displayIfNeededInRect:"),function(self,_15b,_15c){
with(self){
if(objj_msgSend(self,"needsDisplay")){
objj_msgSend(self,"displayRect:",_15c);
}
}
}),new objj_method(sel_getUid("displayRect:"),function(self,_15d,_15e){
with(self){
objj_msgSend(self,"viewWillDraw");
objj_msgSend(self,"displayRectIgnoringOpacity:inContext:",_15e,nil);
_dirtyRect=NULL;
}
}),new objj_method(sel_getUid("displayRectIgnoringOpacity:inContext:"),function(self,_15f,_160,_161){
with(self){
if(objj_msgSend(self,"isHidden")){
return;
}
objj_msgSend(self,"lockFocus");
CGContextClearRect(objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_160);
objj_msgSend(self,"drawRect:",_160);
objj_msgSend(self,"unlockFocus");
}
}),new objj_method(sel_getUid("viewWillDraw"),function(self,_162){
with(self){
}
}),new objj_method(sel_getUid("lockFocus"),function(self,_163){
with(self){
if(!_graphicsContext){
var _164=CGBitmapGraphicsContextCreate();
_DOMContentsElement=_164.DOMElement;
_DOMContentsElement.style.zIndex=-100;
_DOMContentsElement.style.overflow="hidden";
_DOMContentsElement.style.position="absolute";
_DOMContentsElement.style.visibility="visible";
_DOMContentsElement.width=ROUND((_frame.size.width));
_DOMContentsElement.height=ROUND((_frame.size.height));
_DOMContentsElement.style.top="0px";
_DOMContentsElement.style.left="0px";
_DOMContentsElement.style.width=ROUND((_frame.size.width))+"px";
_DOMContentsElement.style.height=ROUND((_frame.size.height))+"px";
_DOMElement.appendChild(_DOMContentsElement);
_graphicsContext=objj_msgSend(CPGraphicsContext,"graphicsContextWithGraphicsPort:flipped:",_164,YES);
}
objj_msgSend(CPGraphicsContext,"setCurrentContext:",_graphicsContext);
CGContextSaveGState(objj_msgSend(_graphicsContext,"graphicsPort"));
}
}),new objj_method(sel_getUid("unlockFocus"),function(self,_165){
with(self){
CGContextRestoreGState(objj_msgSend(_graphicsContext,"graphicsPort"));
objj_msgSend(CPGraphicsContext,"setCurrentContext:",nil);
}
}),new objj_method(sel_getUid("setNeedsLayout"),function(self,_166){
with(self){
if(!(_viewClassFlags&_b)){
return;
}
_needsLayout=YES;
_CPDisplayServerAddLayoutObject(self);
}
}),new objj_method(sel_getUid("layoutIfNeeded"),function(self,_167){
with(self){
if(_needsLayout){
_needsLayout=NO;
objj_msgSend(self,"layoutSubviews");
}
}
}),new objj_method(sel_getUid("layoutSubviews"),function(self,_168){
with(self){
}
}),new objj_method(sel_getUid("isOpaque"),function(self,_169){
with(self){
return NO;
}
}),new objj_method(sel_getUid("visibleRect"),function(self,_16a){
with(self){
if(!_superview){
return _bounds;
}
return CGRectIntersection(objj_msgSend(self,"convertRect:fromView:",objj_msgSend(_superview,"visibleRect"),_superview),_bounds);
}
}),new objj_method(sel_getUid("_enclosingClipView"),function(self,_16b){
with(self){
var _16c=_superview,_16d=objj_msgSend(CPClipView,"class");
while(_16c&&!objj_msgSend(_16c,"isKindOfClass:",_16d)){
_16c=_16c._superview;
}
return _16c;
}
}),new objj_method(sel_getUid("scrollPoint:"),function(self,_16e,_16f){
with(self){
var _170=objj_msgSend(self,"_enclosingClipView");
if(!_170){
return;
}
objj_msgSend(_170,"scrollToPoint:",objj_msgSend(self,"convertPoint:toView:",_16f,_170));
}
}),new objj_method(sel_getUid("scrollRectToVisible:"),function(self,_171,_172){
with(self){
var _173=objj_msgSend(self,"visibleRect");
_172=CGRectIntersection(_172,_bounds);
if((_172.size.width<=0||_172.size.height<=0)||CGRectContainsRect(_173,_172)){
return NO;
}
var _174=objj_msgSend(self,"_enclosingClipView");
if(!_174){
return NO;
}
var _175={x:_173.origin.x,y:_173.origin.y};
if((_172.origin.x)<=(_173.origin.x)){
_175.x=(_172.origin.x);
}else{
if((_172.origin.x+_172.size.width)>(_173.origin.x+_173.size.width)){
_175.x+=(_172.origin.x+_172.size.width)-(_173.origin.x+_173.size.width);
}
}
if((_172.origin.y)<=(_173.origin.y)){
_175.y=CGRectGetMinY(_172);
}else{
if((_172.origin.y+_172.size.height)>(_173.origin.y+_173.size.height)){
_175.y+=(_172.origin.y+_172.size.height)-(_173.origin.y+_173.size.height);
}
}
objj_msgSend(_174,"scrollToPoint:",CGPointMake(_175.x,_175.y));
return YES;
}
}),new objj_method(sel_getUid("autoscroll:"),function(self,_176,_177){
with(self){
return objj_msgSend(objj_msgSend(self,"superview"),"autoscroll:",_177);
}
}),new objj_method(sel_getUid("adjustScroll:"),function(self,_178,_179){
with(self){
return _179;
}
}),new objj_method(sel_getUid("scrollRect:by:"),function(self,_17a,_17b,_17c){
with(self){
}
}),new objj_method(sel_getUid("enclosingScrollView"),function(self,_17d){
with(self){
var _17e=_superview,_17f=objj_msgSend(CPScrollView,"class");
while(_17e&&!objj_msgSend(_17e,"isKindOfClass:",_17f)){
_17e=_17e._superview;
}
return _17e;
}
}),new objj_method(sel_getUid("scrollClipView:toPoint:"),function(self,_180,_181,_182){
with(self){
objj_msgSend(_181,"scrollToPoint:",_182);
}
}),new objj_method(sel_getUid("reflectScrolledClipView:"),function(self,_183,_184){
with(self){
}
}),new objj_method(sel_getUid("inLiveResize"),function(self,_185){
with(self){
return _inLiveResize;
}
}),new objj_method(sel_getUid("viewWillStartLiveResize"),function(self,_186){
with(self){
_inLiveResize=YES;
}
}),new objj_method(sel_getUid("viewDidEndLiveResize"),function(self,_187){
with(self){
_inLiveResize=NO;
}
})]);
class_addMethods(_10,[new objj_method(sel_getUid("initialize"),function(self,_188){
with(self){
if(self!==objj_msgSend(CPView,"class")){
return;
}
_3=document.createElement("div");
var _189=_3.style;
_189.overflow="hidden";
_189.position="absolute";
_189.visibility="visible";
_189.zIndex=0;
_1=objj_msgSend(CPNotificationCenter,"defaultCenter");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingFrame"),function(self,_18a){
with(self){
return objj_msgSend(CPSet,"setWithObjects:","frameOrigin","frameSize");
}
}),new objj_method(sel_getUid("keyPathsForValuesAffectingBounds"),function(self,_18b){
with(self){
return objj_msgSend(CPSet,"setWithObjects:","boundsOrigin","boundsSize");
}
}),new objj_method(sel_getUid("defaultMenu"),function(self,_18c){
with(self){
return nil;
}
})]);
var _f=objj_getClass("CPView");
if(!_f){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _10=_f.isa;
class_addMethods(_f,[new objj_method(sel_getUid("performKeyEquivalent:"),function(self,_18d,_18e){
with(self){
var _18f=objj_msgSend(_subviews,"count");
while(_18f--){
if(objj_msgSend(_subviews[_18f],"performKeyEquivalent:",_18e)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("canBecomeKeyView"),function(self,_190){
with(self){
return objj_msgSend(self,"acceptsFirstResponder")&&!objj_msgSend(self,"isHiddenOrHasHiddenAncestor");
}
}),new objj_method(sel_getUid("nextKeyView"),function(self,_191){
with(self){
return _nextKeyView;
}
}),new objj_method(sel_getUid("nextValidKeyView"),function(self,_192){
with(self){
var _193=objj_msgSend(self,"nextKeyView"),_194=_193;
while(_193&&!objj_msgSend(_193,"canBecomeKeyView")){
_193=objj_msgSend(_193,"nextKeyView");
if(_193===_194){
return nil;
}
}
return _193;
}
}),new objj_method(sel_getUid("previousKeyView"),function(self,_195){
with(self){
return _previousKeyView;
}
}),new objj_method(sel_getUid("previousValidKeyView"),function(self,_196){
with(self){
var _197=objj_msgSend(self,"previousKeyView"),_198=_197;
while(_197&&!objj_msgSend(_197,"canBecomeKeyView")){
_197=objj_msgSend(_197,"previousKeyView");
if(_197===_198){
return nil;
}
}
return _197;
}
}),new objj_method(sel_getUid("_setPreviousKeyView:"),function(self,_199,_19a){
with(self){
if(objj_msgSend(_19a,"isEqual:",self)){
_previousKeyView=nil;
}else{
_previousKeyView=_19a;
}
}
}),new objj_method(sel_getUid("setNextKeyView:"),function(self,_19b,next){
with(self){
if(objj_msgSend(next,"isEqual:",self)){
_nextKeyView=nil;
}else{
_nextKeyView=next;
objj_msgSend(_nextKeyView,"_setPreviousKeyView:",self);
}
}
})]);
var _f=objj_getClass("CPView");
if(!_f){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _10=_f.isa;
class_addMethods(_f,[new objj_method(sel_getUid("setLayer:"),function(self,_19c,_19d){
with(self){
if(_layer==_19d){
return;
}
if(_layer){
_layer._owningView=nil;
_DOMElement.removeChild(_layer._DOMElement);
}
_layer=_19d;
if(_layer){
var _19e=CGRectMakeCopy(objj_msgSend(self,"bounds"));
objj_msgSend(_layer,"_setOwningView:",self);
_layer._DOMElement.style.zIndex=100;
_DOMElement.appendChild(_layer._DOMElement);
}
}
}),new objj_method(sel_getUid("layer"),function(self,_19f){
with(self){
return _layer;
}
}),new objj_method(sel_getUid("setWantsLayer:"),function(self,_1a0,_1a1){
with(self){
_wantsLayer=!!_1a1;
}
}),new objj_method(sel_getUid("wantsLayer"),function(self,_1a2){
with(self){
return _wantsLayer;
}
})]);
var _f=objj_getClass("CPView");
if(!_f){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _10=_f.isa;
class_addMethods(_f,[new objj_method(sel_getUid("themeState"),function(self,_1a3){
with(self){
return _themeState;
}
}),new objj_method(sel_getUid("hasThemeState:"),function(self,_1a4,_1a5){
with(self){
if(_1a5===CPThemeStateNormal&&_themeState===CPThemeStateNormal){
return YES;
}
return !!(_themeState&((typeof _1a5==="string")?CPThemeState(_1a5):_1a5));
}
}),new objj_method(sel_getUid("setThemeState:"),function(self,_1a6,_1a7){
with(self){
var _1a8=(typeof _1a7==="string")?CPThemeState(_1a7):_1a7;
if(_themeState&_1a8){
return NO;
}
_themeState|=_1a8;
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("unsetThemeState:"),function(self,_1a9,_1aa){
with(self){
var _1ab=((typeof _1aa==="string")?CPThemeState(_1aa):_1aa);
if(!(_themeState&_1ab)){
return NO;
}
_themeState&=~_1ab;
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
return YES;
}
}),new objj_method(sel_getUid("themeClass"),function(self,_1ac){
with(self){
if(_themeClass){
return _themeClass;
}
return objj_msgSend(objj_msgSend(self,"class"),"defaultThemeClass");
}
}),new objj_method(sel_getUid("setThemeClass:"),function(self,_1ad,_1ae){
with(self){
_themeClass=_1ae;
objj_msgSend(self,"_loadThemeAttributes");
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_loadThemeAttributes"),function(self,_1af){
with(self){
var _1b0=objj_msgSend(self,"class"),_1b1=objj_msgSend(_1b0,"_themeAttributes"),_1b2=_1b1.length;
if(!_1b2){
return;
}
var _1b3=objj_msgSend(self,"theme"),_1b4=objj_msgSend(self,"themeClass");
_themeAttributes={};
while(_1b2--){
var _1b5=_1b1[_1b2--],_1b6=objj_msgSend(objj_msgSend(_CPThemeAttribute,"alloc"),"initWithName:defaultValue:",_1b5,_1b1[_1b2]);
objj_msgSend(_1b6,"setParentAttribute:",objj_msgSend(_1b3,"attributeWithName:forClass:",_1b5,_1b4));
_themeAttributes[_1b5]=_1b6;
}
}
}),new objj_method(sel_getUid("setTheme:"),function(self,_1b7,_1b8){
with(self){
if(_theme===_1b8){
return;
}
_theme=_1b8;
objj_msgSend(self,"viewDidChangeTheme");
}
}),new objj_method(sel_getUid("theme"),function(self,_1b9){
with(self){
return _theme;
}
}),new objj_method(sel_getUid("viewDidChangeTheme"),function(self,_1ba){
with(self){
if(!_themeAttributes){
return;
}
var _1bb=objj_msgSend(self,"theme"),_1bc=objj_msgSend(self,"themeClass");
for(var _1bd in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_1bd)){
objj_msgSend(_themeAttributes[_1bd],"setParentAttribute:",objj_msgSend(_1bb,"attributeWithName:forClass:",_1bd,_1bc));
}
}
objj_msgSend(self,"setNeedsLayout");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_themeAttributeDictionary"),function(self,_1be){
with(self){
var _1bf=objj_msgSend(CPDictionary,"dictionary");
if(_themeAttributes){
var _1c0=objj_msgSend(self,"theme");
for(var _1c1 in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_1c1)){
objj_msgSend(_1bf,"setObject:forKey:",_themeAttributes[_1c1],_1c1);
}
}
}
return _1bf;
}
}),new objj_method(sel_getUid("setValue:forThemeAttribute:inState:"),function(self,_1c2,_1c3,_1c4,_1c5){
with(self){
if(!_themeAttributes||!_themeAttributes[_1c4]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1c4+"'");
}
var _1c6=objj_msgSend(self,"currentValueForThemeAttribute:",_1c4);
objj_msgSend(_themeAttributes[_1c4],"setValue:forState:",_1c3,_1c5);
if(objj_msgSend(self,"currentValueForThemeAttribute:",_1c4)===_1c6){
return;
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("setValue:forThemeAttribute:"),function(self,_1c7,_1c8,_1c9){
with(self){
if(!_themeAttributes||!_themeAttributes[_1c9]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1c9+"'");
}
var _1ca=objj_msgSend(self,"currentValueForThemeAttribute:",_1c9);
objj_msgSend(_themeAttributes[_1c9],"setValue:",_1c8);
if(objj_msgSend(self,"currentValueForThemeAttribute:",_1c9)===_1ca){
return;
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
}),new objj_method(sel_getUid("valueForThemeAttribute:inState:"),function(self,_1cb,_1cc,_1cd){
with(self){
if(!_themeAttributes||!_themeAttributes[_1cc]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1cc+"'");
}
return objj_msgSend(_themeAttributes[_1cc],"valueForState:",_1cd);
}
}),new objj_method(sel_getUid("valueForThemeAttribute:"),function(self,_1ce,_1cf){
with(self){
if(!_themeAttributes||!_themeAttributes[_1cf]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1cf+"'");
}
return objj_msgSend(_themeAttributes[_1cf],"value");
}
}),new objj_method(sel_getUid("currentValueForThemeAttribute:"),function(self,_1d0,_1d1){
with(self){
if(!_themeAttributes||!_themeAttributes[_1d1]){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,objj_msgSend(self,"className")+" does not contain theme attribute '"+_1d1+"'");
}
return objj_msgSend(_themeAttributes[_1d1],"valueForState:",_themeState);
}
}),new objj_method(sel_getUid("hasThemeAttribute:"),function(self,_1d2,_1d3){
with(self){
return (_themeAttributes&&_themeAttributes[_1d3]!==undefined);
}
}),new objj_method(sel_getUid("registerThemeValues:"),function(self,_1d4,_1d5){
with(self){
for(var i=0;i<_1d5.length;++i){
var _1d6=_1d5[i],_1d7=_1d6[0],_1d8=_1d6[1],_1d9=_1d6[2];
if(_1d9){
objj_msgSend(self,"setValue:forThemeAttribute:inState:",_1d8,_1d7,_1d9);
}else{
objj_msgSend(self,"setValue:forThemeAttribute:",_1d8,_1d7);
}
}
}
}),new objj_method(sel_getUid("registerThemeValues:inherit:"),function(self,_1da,_1db,_1dc){
with(self){
if(_1dc){
objj_msgSend(self,"registerThemeValues:",_1dc);
}
if(_1db){
objj_msgSend(self,"registerThemeValues:",_1db);
}
}
}),new objj_method(sel_getUid("createEphemeralSubviewNamed:"),function(self,_1dd,_1de){
with(self){
return nil;
}
}),new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"),function(self,_1df,_1e0){
with(self){
return {origin:{x:0,y:0},size:{width:0,height:0}};
}
}),new objj_method(sel_getUid("layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:"),function(self,_1e1,_1e2,_1e3,_1e4){
with(self){
if(!_ephemeralSubviewsForNames){
_ephemeralSubviewsForNames={};
_ephemeralSubviews=objj_msgSend(CPSet,"set");
}
var _1e5=objj_msgSend(self,"rectForEphemeralSubviewNamed:",_1e2);
if(_1e5){
if(!_ephemeralSubviewsForNames[_1e2]){
_ephemeralSubviewsForNames[_1e2]=objj_msgSend(self,"createEphemeralSubviewNamed:",_1e2);
objj_msgSend(_ephemeralSubviews,"addObject:",_ephemeralSubviewsForNames[_1e2]);
if(_ephemeralSubviewsForNames[_1e2]){
objj_msgSend(self,"addSubview:positioned:relativeTo:",_ephemeralSubviewsForNames[_1e2],_1e3,_ephemeralSubviewsForNames[_1e4]);
}
}
if(_ephemeralSubviewsForNames[_1e2]){
objj_msgSend(_ephemeralSubviewsForNames[_1e2],"setFrame:",_1e5);
}
}else{
if(_ephemeralSubviewsForNames[_1e2]){
objj_msgSend(_ephemeralSubviewsForNames[_1e2],"removeFromSuperview");
objj_msgSend(_ephemeralSubviews,"removeObject:",_ephemeralSubviewsForNames[_1e2]);
delete _ephemeralSubviewsForNames[_1e2];
}
}
return _ephemeralSubviewsForNames[_1e2];
}
}),new objj_method(sel_getUid("ephemeralSubviewNamed:"),function(self,_1e6,_1e7){
with(self){
if(!_ephemeralSubviewsForNames){
return nil;
}
return (_ephemeralSubviewsForNames[_1e7]||nil);
}
})]);
class_addMethods(_10,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_1e8){
with(self){
return nil;
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_1e9){
with(self){
return nil;
}
}),new objj_method(sel_getUid("_themeAttributes"),function(self,_1ea){
with(self){
if(!_2){
_2={};
}
var _1eb=objj_msgSend(self,"class"),_1ec=objj_msgSend(CPView,"class"),_1ed=[],_1ee=objj_msgSend(CPNull,"null");
for(;_1eb&&_1eb!==_1ec;_1eb=objj_msgSend(_1eb,"superclass")){
var _1ef=_2[class_getName(_1eb)];
if(_1ef){
_1ed=_1ed.length?_1ed.concat(_1ef):_1ed;
_2[objj_msgSend(self,"className")]=_1ed;
break;
}
var _1f0=objj_msgSend(_1eb,"themeAttributes");
if(!_1f0){
continue;
}
var _1f1=objj_msgSend(_1f0,"allKeys"),_1f2=_1f1.length;
while(_1f2--){
var _1f3=_1f1[_1f2],_1f4=objj_msgSend(_1f0,"objectForKey:",_1f3);
_1ed.push(_1f4===_1ee?nil:_1f4);
_1ed.push(_1f3);
}
}
return _1ed;
}
})]);
var _1f5="CPViewAutoresizingMask",_1f6="CPViewAutoresizesSubviews",_1f7="CPViewBackgroundColor",_1f8="CPViewBoundsKey",_1f9="CPViewFrameKey",_1fa="CPViewHitTestsKey",_1fb="CPViewToolTipKey",_1fc="CPViewIsHiddenKey",_1fd="CPViewOpacityKey",_1fe="CPViewSubviewsKey",_1ff="CPViewSuperviewKey",_200="CPViewTagKey",_201="CPViewThemeClassKey",_202="CPViewThemeStateKey",_203="CPViewWindowKey",_204="CPViewNextKeyViewKey",_205="CPViewPreviousKeyViewKey";
var _f=objj_getClass("CPView");
if(!_f){
throw new SyntaxError("*** Could not find definition for class \"CPView\"");
}
var _10=_f.isa;
class_addMethods(_f,[new objj_method(sel_getUid("initWithCoder:"),function(self,_206,_207){
with(self){
_DOMElement=_3.cloneNode(false);
_frame=objj_msgSend(_207,"decodeRectForKey:",_1f9);
_bounds=objj_msgSend(_207,"decodeRectForKey:",_1f8);
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"initWithCoder:",_207);
if(self){
_tag=objj_msgSend(_207,"containsValueForKey:",_200)?objj_msgSend(_207,"decodeIntForKey:",_200):-1;
_window=objj_msgSend(_207,"decodeObjectForKey:",_203);
_subviews=objj_msgSend(_207,"decodeObjectForKey:",_1fe)||[];
_superview=objj_msgSend(_207,"decodeObjectForKey:",_1ff);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
if(_autoresizingMask===nil){
_autoresizingMask=objj_msgSend(_207,"decodeIntForKey:",_1f5)||CPViewNotSizable;
}
_autoresizesSubviews=!objj_msgSend(_207,"containsValueForKey:",_1f6)||objj_msgSend(_207,"decodeBoolForKey:",_1f6);
_hitTests=!objj_msgSend(_207,"containsValueForKey:",_1fa)||objj_msgSend(_207,"decodeBoolForKey:",_1fa);
objj_msgSend(self,"_setupToolTipHandlers");
_toolTip=objj_msgSend(_207,"decodeObjectForKey:",_1fb);
if(_toolTip){
objj_msgSend(self,"_installToolTipEventHandlers");
}
_DOMImageParts=[];
_DOMImageSizes=[];
if(NULL){
var _208={x:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.a+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.b+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.d+NULL.ty};
}else{
var _208={x:(_frame.origin.x),y:(_frame.origin.y)};
}
_DOMElement.style.left=ROUND(_208.x)+"px";
_DOMElement.style.top=ROUND(_208.y)+"px";
_DOMElement.style.width=MAX(0,ROUND((_frame.size.width)))+"px";
_DOMElement.style.height=MAX(0,ROUND((_frame.size.height)))+"px";
var _209=0,_20a=_subviews.length;
for(;_209<_20a;++_209){
_DOMElement.appendChild(_subviews[_209]._DOMElement);
}
objj_msgSend(self,"setHidden:",objj_msgSend(_207,"decodeBoolForKey:",_1fc));
if(objj_msgSend(_207,"containsValueForKey:",_1fd)){
objj_msgSend(self,"setAlphaValue:",objj_msgSend(_207,"decodeIntForKey:",_1fd));
}else{
_opacity=1;
}
objj_msgSend(self,"setBackgroundColor:",objj_msgSend(_207,"decodeObjectForKey:",_1f7));
objj_msgSend(self,"_setupViewFlags");
_theme=objj_msgSend(CPTheme,"defaultTheme");
_themeClass=objj_msgSend(_207,"decodeObjectForKey:",_201);
_themeState=CPThemeState(objj_msgSend(_207,"decodeIntForKey:",_202));
_themeAttributes={};
var _20b=objj_msgSend(self,"class"),_20c=objj_msgSend(self,"themeClass"),_20d=objj_msgSend(_20b,"_themeAttributes"),_20a=_20d.length;
while(_20a--){
var _20e=_20d[_20a--];
_themeAttributes[_20e]=CPThemeAttributeDecode(_207,_20e,_20d[_20a],_theme,_20c);
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(self,"setNeedsLayout");
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_20f,_210){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPView").super_class},"encodeWithCoder:",_210);
if(_tag!==-1){
objj_msgSend(_210,"encodeInt:forKey:",_tag,_200);
}
objj_msgSend(_210,"encodeRect:forKey:",_frame,_1f9);
objj_msgSend(_210,"encodeRect:forKey:",_bounds,_1f8);
if(_window!==nil){
objj_msgSend(_210,"encodeConditionalObject:forKey:",_window,_203);
}
var _211=objj_msgSend(_subviews,"count"),_212=_subviews;
if(_211>0&&objj_msgSend(_ephemeralSubviews,"count")>0){
_212=objj_msgSend(_212,"copy");
while(_211--){
if(objj_msgSend(_ephemeralSubviews,"containsObject:",_212[_211])){
_212.splice(_211,1);
}
}
}
if(_212.length>0){
objj_msgSend(_210,"encodeObject:forKey:",_212,_1fe);
}
if(_superview!==nil){
objj_msgSend(_210,"encodeConditionalObject:forKey:",_superview,_1ff);
}
if(_autoresizingMask!==CPViewNotSizable){
objj_msgSend(_210,"encodeInt:forKey:",_autoresizingMask,_1f5);
}
if(!_autoresizesSubviews){
objj_msgSend(_210,"encodeBool:forKey:",_autoresizesSubviews,_1f6);
}
if(_backgroundColor!==nil){
objj_msgSend(_210,"encodeObject:forKey:",_backgroundColor,_1f7);
}
if(_hitTests!==YES){
objj_msgSend(_210,"encodeBool:forKey:",_hitTests,_1fa);
}
if(_opacity!==1){
objj_msgSend(_210,"encodeFloat:forKey:",_opacity,_1fd);
}
if(_isHidden){
objj_msgSend(_210,"encodeBool:forKey:",_isHidden,_1fc);
}
if(_toolTip){
objj_msgSend(_210,"encodeObject:forKey:",_toolTip,_1fb);
}
var _213=objj_msgSend(self,"nextKeyView");
if(_213!==nil&&!objj_msgSend(_213,"isEqual:",self)){
objj_msgSend(_210,"encodeConditionalObject:forKey:",_213,_204);
}
var _214=objj_msgSend(self,"previousKeyView");
if(_214!==nil&&!objj_msgSend(_214,"isEqual:",self)){
objj_msgSend(_210,"encodeConditionalObject:forKey:",_214,_205);
}
objj_msgSend(_210,"encodeObject:forKey:",objj_msgSend(self,"themeClass"),_201);
objj_msgSend(_210,"encodeInt:forKey:",CPThemeStateName(_themeState),_202);
for(var _215 in _themeAttributes){
if(_themeAttributes.hasOwnProperty(_215)){
CPThemeAttributeEncode(_210,_themeAttributes[_215]);
}
}
}
})]);
var _cd=function(_216){
var _217=_216._superview;
return {autoresizingMask:_216._autoresizingMask,frame:CGRectMakeCopy(_216._frame),index:(_217?objj_msgSend(_217._subviews,"indexOfObjectIdenticalTo:",_216):0),superview:_217};
};
var _11f=function(_218,_219){
var _21a=CGAffineTransformMakeIdentity(),_21b=YES,_21c=nil,_21d=nil;
if(_218){
var view=_218;
while(view&&view!=_219){
var _21e=view._frame;
_21a.tx+=(_21e.origin.x);
_21a.ty+=(_21e.origin.y);
if(view._boundsTransform){
var tx=_21a.tx*view._boundsTransform.a+_21a.ty*view._boundsTransform.c+view._boundsTransform.tx;
_21a.ty=_21a.tx*view._boundsTransform.b+_21a.ty*view._boundsTransform.d+view._boundsTransform.ty;
_21a.tx=tx;
var a=_21a.a*view._boundsTransform.a+_21a.b*view._boundsTransform.c,b=_21a.a*view._boundsTransform.b+_21a.b*view._boundsTransform.d,c=_21a.c*view._boundsTransform.a+_21a.d*view._boundsTransform.c;
_21a.d=_21a.c*view._boundsTransform.b+_21a.d*view._boundsTransform.d;
_21a.a=a;
_21a.b=b;
_21a.c=c;
}
view=view._superview;
}
if(view===_219){
return _21a;
}else{
if(_218&&_219){
_21c=objj_msgSend(_218,"window");
_21d=objj_msgSend(_219,"window");
if(_21c&&_21d&&_21c!==_21d){
_21b=NO;
var _21e=objj_msgSend(_21c,"frame");
_21a.tx+=(_21e.origin.x);
_21a.ty+=(_21e.origin.y);
}
}
}
}
var view=_219;
while(view){
var _21e=view._frame;
_21a.tx-=(_21e.origin.x);
_21a.ty-=(_21e.origin.y);
if(view._boundsTransform){
var tx=_21a.tx*view._inverseBoundsTransform.a+_21a.ty*view._inverseBoundsTransform.c+view._inverseBoundsTransform.tx;
_21a.ty=_21a.tx*view._inverseBoundsTransform.b+_21a.ty*view._inverseBoundsTransform.d+view._inverseBoundsTransform.ty;
_21a.tx=tx;
var a=_21a.a*view._inverseBoundsTransform.a+_21a.b*view._inverseBoundsTransform.c,b=_21a.a*view._inverseBoundsTransform.b+_21a.b*view._inverseBoundsTransform.d,c=_21a.c*view._inverseBoundsTransform.a+_21a.d*view._inverseBoundsTransform.c;
_21a.d=_21a.c*view._inverseBoundsTransform.b+_21a.d*view._inverseBoundsTransform.d;
_21a.a=a;
_21a.b=b;
_21a.c=c;
}
view=view._superview;
}
if(!_21b){
var _21e=objj_msgSend(_21d,"frame");
_21a.tx-=(_21e.origin.x);
_21a.ty-=(_21e.origin.y);
}
return _21a;
};
p;17;CPViewAnimation.jt;5328;@STATIC;1.0;i;13;CPAnimation.jt;5291;
objj_executeFile("CPAnimation.j",YES);
CPViewAnimationTargetKey="CPViewAnimationTargetKey";
CPViewAnimationStartFrameKey="CPViewAnimationStartFrameKey";
CPViewAnimationEndFrameKey="CPViewAnimationEndFrameKey";
CPViewAnimationEffectKey="CPViewAnimationEffectKey";
CPViewAnimationFadeInEffect="CPViewAnimationFadeInEffect";
CPViewAnimationFadeOutEffect="CPViewAnimationFadeOutEffect";
var _1=objj_allocateClassPair(CPAnimation,"CPViewAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_viewAnimations")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithViewAnimations:"),function(_3,_4,_5){
with(_3){
if(_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPViewAnimation").super_class},"initWithDuration:animationCurve:",0.5,CPAnimationLinear)){
objj_msgSend(_3,"setViewAnimations:",_5);
}
return _3;
}
}),new objj_method(sel_getUid("startAnimation"),function(_6,_7){
with(_6){
var _8=objj_msgSend(_viewAnimations,"count");
while(_8--){
var _9=objj_msgSend(_viewAnimations,"objectAtIndex:",_8),_a=objj_msgSend(_6,"_targetView:",_9),_b=objj_msgSend(_6,"_startFrame:",_9);
objj_msgSend(_a,"setFrame:",_b);
var _c=objj_msgSend(_6,"_effect:",_9);
if(_c===CPViewAnimationFadeInEffect){
objj_msgSend(_a,"setAlphaValue:",0);
objj_msgSend(_6,"_targetView:setHidden:",_a,NO);
}else{
if(_c===CPViewAnimationFadeOutEffect){
objj_msgSend(_a,"setAlphaValue:",1);
}
}
}
objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPViewAnimation").super_class},"startAnimation");
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(_d,_e,_f){
with(_d){
objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPViewAnimation").super_class},"setCurrentProgress:",_f);
var _10=objj_msgSend(_viewAnimations,"count");
while(_10--){
var _11=objj_msgSend(_viewAnimations,"objectAtIndex:",_10),_12=objj_msgSend(_d,"_targetView:",_11),_13=objj_msgSend(_d,"_startFrame:",_11),_14=objj_msgSend(_d,"_endFrame:",_11),_15={origin:{x:0,y:0},size:{width:0,height:0}},_16=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("CPViewAnimation").super_class},"currentValue");
_15.origin.x=_14.origin.x-_13.origin.x;
_15.origin.y=_14.origin.y-_13.origin.y;
_15.size.width=_14.size.width-_13.size.width;
_15.size.height=_14.size.height-_13.size.height;
var _17={origin:{x:0,y:0},size:{width:0,height:0}};
_17.origin.x=_13.origin.x+_15.origin.x*_16;
_17.origin.y=_13.origin.y+_15.origin.y*_16;
_17.size.width=_13.size.width+_15.size.width*_16;
_17.size.height=_13.size.height+_15.size.height*_16;
objj_msgSend(_12,"setFrame:",_17);
var _18=objj_msgSend(_d,"_effect:",_11);
if(_18===CPViewAnimationFadeInEffect){
objj_msgSend(_12,"setAlphaValue:",1*_16);
}else{
if(_18===CPViewAnimationFadeOutEffect){
objj_msgSend(_12,"setAlphaValue:",1+(0-1)*_16);
}
}
if(_f===1){
objj_msgSend(_d,"_targetView:setHidden:",_12,(_14.size.width<=0||_14.size.height<=0)||objj_msgSend(_12,"alphaValue")===0);
}
}
}
}),new objj_method(sel_getUid("stopAnimation"),function(_19,_1a){
with(_19){
var _1b=objj_msgSend(_viewAnimations,"count");
while(_1b--){
var _1c=objj_msgSend(_viewAnimations,"objectAtIndex:",_1b),_1d=objj_msgSend(_19,"_targetView:",_1c),_1e=objj_msgSend(_19,"_endFrame:",_1c);
objj_msgSend(_1d,"setFrame:",_1e);
var _1f=objj_msgSend(_19,"_effect:",_1c);
if(_1f===CPViewAnimationFadeInEffect){
objj_msgSend(_1d,"setAlphaValue:",1);
}else{
if(_1f===CPViewAnimationFadeOutEffect){
objj_msgSend(_1d,"setAlphaValue:",0);
}
}
objj_msgSend(_19,"_targetView:setHidden:",_1d,(_1e.size.width<=0||_1e.size.height<=0)||objj_msgSend(_1d,"alphaValue")===0);
}
objj_msgSendSuper({receiver:_19,super_class:objj_getClass("CPViewAnimation").super_class},"stopAnimation");
}
}),new objj_method(sel_getUid("_targetView:setHidden:"),function(_20,_21,_22,_23){
with(_20){
if(objj_msgSend(_22,"isKindOfClass:",objj_msgSend(CPWindow,"class"))){
if(_23){
objj_msgSend(_22,"orderOut:",_20);
}else{
objj_msgSend(_22,"orderFront:",_20);
}
}else{
objj_msgSend(_22,"setHidden:",_23);
}
}
}),new objj_method(sel_getUid("_targetView:"),function(_24,_25,_26){
with(_24){
var _27=objj_msgSend(_26,"valueForKey:",CPViewAnimationTargetKey);
if(!_27){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,objj_msgSend(CPString,"stringWithFormat:","view animation: %@ does not have a target view",objj_msgSend(_26,"description")));
}
return _27;
}
}),new objj_method(sel_getUid("_startFrame:"),function(_28,_29,_2a){
with(_28){
var _2b=objj_msgSend(_2a,"valueForKey:",CPViewAnimationStartFrameKey);
if(!_2b){
return objj_msgSend(objj_msgSend(_28,"_targetView:",_2a),"frame");
}
return _2b;
}
}),new objj_method(sel_getUid("_endFrame:"),function(_2c,_2d,_2e){
with(_2c){
var _2f=objj_msgSend(_2e,"valueForKey:",CPViewAnimationEndFrameKey);
if(!_2f){
return objj_msgSend(objj_msgSend(_2c,"_targetView:",_2e),"frame");
}
return _2f;
}
}),new objj_method(sel_getUid("_effect:"),function(_30,_31,_32){
with(_30){
return objj_msgSend(_32,"valueForKey:",CPViewAnimationEffectKey);
}
}),new objj_method(sel_getUid("viewAnimations"),function(_33,_34){
with(_33){
return _viewAnimations;
}
}),new objj_method(sel_getUid("setViewAnimations:"),function(_35,_36,_37){
with(_35){
if(_37!=_viewAnimations){
objj_msgSend(_35,"stopAnimation");
_viewAnimations=objj_msgSend(_37,"copy");
}
}
})]);
p;18;CPViewController.jt;5704;@STATIC;1.0;I;20;Foundation/CPArray.ji;15;CPApplication.ji;7;CPCib.ji;13;CPResponder.jt;5611;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPResponder.j",YES);
var _1;
var _2=objj_allocateClassPair(CPResponder,"CPViewController"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_view"),new objj_ivar("_isLoading"),new objj_ivar("_isLazy"),new objj_ivar("_representedObject"),new objj_ivar("_title"),new objj_ivar("_cibName"),new objj_ivar("_cibBundle"),new objj_ivar("_cibExternalNameTable")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("view"),function(_4,_5){
with(_4){
return _view;
}
}),new objj_method(sel_getUid("setView:"),function(_6,_7,_8){
with(_6){
_view=_8;
}
}),new objj_method(sel_getUid("representedObject"),function(_9,_a){
with(_9){
return _representedObject;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_b,_c,_d){
with(_b){
_representedObject=_d;
}
}),new objj_method(sel_getUid("title"),function(_e,_f){
with(_e){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_10,_11,_12){
with(_10){
_title=_12;
}
}),new objj_method(sel_getUid("cibName"),function(_13,_14){
with(_13){
return _cibName;
}
}),new objj_method(sel_getUid("cibBundle"),function(_15,_16){
with(_15){
return _cibBundle;
}
}),new objj_method(sel_getUid("cibExternalNameTable"),function(_17,_18){
with(_17){
return _cibExternalNameTable;
}
}),new objj_method(sel_getUid("init"),function(_19,_1a){
with(_19){
return objj_msgSend(_19,"initWithCibName:bundle:",nil,nil);
}
}),new objj_method(sel_getUid("initWithCibName:bundle:"),function(_1b,_1c,_1d,_1e){
with(_1b){
return objj_msgSend(_1b,"initWithCibName:bundle:externalNameTable:",_1d,_1e,nil);
}
}),new objj_method(sel_getUid("initWithCibName:bundle:owner:"),function(_1f,_20,_21,_22,_23){
with(_1f){
return objj_msgSend(_1f,"initWithCibName:bundle:externalNameTable:",_21,_22,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_23,CPCibOwner));
}
}),new objj_method(sel_getUid("initWithCibName:bundle:externalNameTable:"),function(_24,_25,_26,_27,_28){
with(_24){
_24=objj_msgSendSuper({receiver:_24,super_class:objj_getClass("CPViewController").super_class},"init");
if(_24){
_cibName=_26;
_cibBundle=_27||objj_msgSend(CPBundle,"mainBundle");
_cibExternalNameTable=_28||objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_24,CPCibOwner);
_isLoading=NO;
_isLazy=NO;
}
return _24;
}
}),new objj_method(sel_getUid("loadView"),function(_29,_2a){
with(_29){
if(_view){
return;
}
if(_cibName){
var cib=objj_msgSend(_1,"objectForKey:",_cibName);
if(!cib){
cib=objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithCibNamed:bundle:",_cibName,_cibBundle);
objj_msgSend(_1,"setObject:forKey:",cib,_cibName);
}
objj_msgSend(cib,"instantiateCibWithExternalNameTable:",_cibExternalNameTable);
}else{
_view=objj_msgSend(CPView,"new");
}
}
}),new objj_method(sel_getUid("view"),function(_2b,_2c){
with(_2b){
if(!_view){
_isLoading=YES;
var _2d=objj_msgSend(_cibExternalNameTable,"objectForKey:",CPCibOwner);
if(objj_msgSend(_2d,"respondsToSelector:",sel_getUid("viewControllerWillLoadCib:"))){
objj_msgSend(_2d,"viewControllerWillLoadCib:",_2b);
}
objj_msgSend(_2b,"loadView");
if(_view===nil&&objj_msgSend(_2d,"isKindOfClass:",objj_msgSend(CPDocument,"class"))){
objj_msgSend(_2b,"setView:",objj_msgSend(_2d,"valueForKey:","view"));
}
if(!_view){
var _2e=objj_msgSend(CPString,"stringWithFormat:","View for %@ could not be loaded from Cib or no view specified. Override loadView to load the view manually.",_2b);
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,_2e);
}
if(objj_msgSend(_2d,"respondsToSelector:",sel_getUid("viewControllerDidLoadCib:"))){
objj_msgSend(_2d,"viewControllerDidLoadCib:",_2b);
}
_isLoading=NO;
objj_msgSend(_2b,"viewDidLoad");
}else{
if(_isLazy){
_isLazy=NO;
objj_msgSend(_2b,"viewDidLoad");
}
}
return _view;
}
}),new objj_method(sel_getUid("viewDidLoad"),function(_2f,_30){
with(_2f){
}
}),new objj_method(sel_getUid("setView:"),function(_31,_32,_33){
with(_31){
_view=_33;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_34,_35){
with(_34){
if(_34===CPViewController){
_1=objj_msgSend(CPDictionary,"dictionary");
}
}
})]);
var _36="CPViewControllerViewKey",_37="CPViewControllerTitleKey",_38="CPViewControllerCibNameKey",_39="CPViewControllerBundleKey";
var _2=objj_getClass("CPViewController");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPViewController\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_3a,_3b,_3c){
with(_3a){
_3a=objj_msgSendSuper({receiver:_3a,super_class:objj_getClass("CPViewController").super_class},"initWithCoder:",_3c);
if(_3a){
_view=objj_msgSend(_3c,"decodeObjectForKey:",_36);
_title=objj_msgSend(_3c,"decodeObjectForKey:",_37);
_cibName=objj_msgSend(_3c,"decodeObjectForKey:",_38);
var _3d=objj_msgSend(_3c,"decodeObjectForKey:",_39);
_cibBundle=_3d?objj_msgSend(CPBundle,"bundleWithPath:",_3d):objj_msgSend(CPBundle,"mainBundle");
_cibExternalNameTable=objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_3a,CPCibOwner);
_isLazy=YES;
}
return _3a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_3e,_3f,_40){
with(_3e){
objj_msgSendSuper({receiver:_3e,super_class:objj_getClass("CPViewController").super_class},"encodeWithCoder:",_40);
objj_msgSend(_40,"encodeObject:forKey:",_view,_36);
objj_msgSend(_40,"encodeObject:forKey:",_title,_37);
objj_msgSend(_40,"encodeObject:forKey:",_cibName,_38);
objj_msgSend(_40,"encodeObject:forKey:",objj_msgSend(_cibBundle,"bundlePath"),_39);
}
})]);
p;11;CPWebView.jt;18470;@STATIC;1.0;i;8;CPView.ji;14;CPScrollView.jt;18419;
objj_executeFile("CPView.j",YES);
objj_executeFile("CPScrollView.j",YES);
CPWebViewProgressStartedNotification="CPWebViewProgressStartedNotification";
CPWebViewProgressFinishedNotification="CPWebViewProgressFinishedNotification";
CPWebViewScrollAuto=0;
CPWebViewScrollAppKit=1;
CPWebViewScrollNative=2;
CPWebViewScrollNone=3;
CPWebViewAppKitScrollPollInterval=1;
CPWebViewAppKitScrollMaxPollCount=3;
var _1=objj_allocateClassPair(CPView,"CPWebView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_scrollView"),new objj_ivar("_frameView"),new objj_ivar("_iframe"),new objj_ivar("_mainFrameURL"),new objj_ivar("_backwardStack"),new objj_ivar("_forwardStack"),new objj_ivar("_ignoreLoadStart"),new objj_ivar("_ignoreLoadEnd"),new objj_ivar("_isLoading"),new objj_ivar("_downloadDelegate"),new objj_ivar("_frameLoadDelegate"),new objj_ivar("_policyDelegate"),new objj_ivar("_resourceLoadDelegate"),new objj_ivar("_UIDelegate"),new objj_ivar("_wso"),new objj_ivar("_url"),new objj_ivar("_html"),new objj_ivar("_loadCallback"),new objj_ivar("_scrollMode"),new objj_ivar("_effectiveScrollMode"),new objj_ivar("_contentIsAccessible"),new objj_ivar("_contentSizeCheckTimer"),new objj_ivar("_contentSizePollCount"),new objj_ivar("_loadHTMLStringTimer"),new objj_ivar("_drawsBackground")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:frameName:groupName:"),function(_3,_4,_5,_6,_7){
with(_3){
if(_3=objj_msgSend(_3,"initWithFrame:",_5)){
_iframe.name=_6;
}
return _3;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_8,_9,_a){
with(_8){
if(_8=objj_msgSendSuper({receiver:_8,super_class:objj_getClass("CPWebView").super_class},"initWithFrame:",_a)){
_mainFrameURL=nil;
_backwardStack=[];
_forwardStack=[];
_scrollMode=CPWebViewScrollAuto;
_contentIsAccessible=YES;
_isLoading=NO;
_drawsBackground=YES;
objj_msgSend(_8,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_8,"_initDOMWithFrame:",_a);
}
return _8;
}
}),new objj_method(sel_getUid("_initDOMWithFrame:"),function(_b,_c,_d){
with(_b){
_ignoreLoadStart=YES;
_ignoreLoadEnd=YES;
_iframe=document.createElement("iframe");
_iframe.name="iframe_"+FLOOR(RAND()*10000);
_iframe.style.width="100%";
_iframe.style.height="100%";
_iframe.style.borderWidth="0px";
_iframe.frameBorder="0";
objj_msgSend(_b,"_applyBackgroundColor");
_loadCallback=function(){
if(!_ignoreLoadStart){
objj_msgSend(_b,"_startedLoading");
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=_iframe.src;
objj_msgSend(_forwardStack,"removeAllObjects");
}else{
_ignoreLoadStart=NO;
}
if(!_ignoreLoadEnd){
objj_msgSend(_b,"_finishedLoading");
}else{
_ignoreLoadEnd=NO;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
};
if(_iframe.addEventListener){
_iframe.addEventListener("load",_loadCallback,false);
}else{
if(_iframe.attachEvent){
_iframe.attachEvent("onload",_loadCallback);
}
}
_frameView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",objj_msgSend(_b,"bounds"));
objj_msgSend(_frameView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_scrollView=objj_msgSend(objj_msgSend(CPScrollView,"alloc"),"initWithFrame:",objj_msgSend(_b,"bounds"));
objj_msgSend(_scrollView,"setAutohidesScrollers:",YES);
objj_msgSend(_scrollView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_scrollView,"setDocumentView:",_frameView);
_frameView._DOMElement.appendChild(_iframe);
objj_msgSend(_b,"_updateEffectiveScrollMode");
objj_msgSend(_b,"addSubview:",_scrollView);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_e,_f,_10){
with(_e){
objj_msgSendSuper({receiver:_e,super_class:objj_getClass("CPWebView").super_class},"setFrameSize:",_10);
objj_msgSend(_e,"_resizeWebFrame");
}
}),new objj_method(sel_getUid("viewDidUnhide"),function(_11,_12){
with(_11){
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"contentSize"));
objj_msgSend(_11,"_resizeWebFrame");
objj_msgSend(_11,"_scheduleContentSizeCheck");
}
}),new objj_method(sel_getUid("_attachScrollEventIfNecessary"),function(_13,_14){
with(_13){
if(_effectiveScrollMode!==CPWebViewScrollAppKit){
return;
}
var win=null;
try{
win=objj_msgSend(_13,"DOMWindow");
}
catch(e){
}
if(win&&win.addEventListener){
var _15=function(_16){
var _17=objj_msgSend(_13,"bounds"),_18=CGPointMake(CGRectGetMidX(_17),CGRectGetMidY(_17)),_19=objj_msgSend(_13,"convertPoint:toView:",_18,nil),_1a=objj_msgSend(objj_msgSend(_13,"window"),"convertBaseToBridge:",_19);
_16._overrideLocation=_1a;
objj_msgSend(objj_msgSend(objj_msgSend(_13,"window"),"platformWindow"),"scrollEvent:",_16);
};
win.addEventListener("DOMMouseScroll",_15,false);
}
}
}),new objj_method(sel_getUid("_resizeWebFrame"),function(_1b,_1c){
with(_1b){
if(!objj_msgSend(_1b,"_isVisible")){
return;
}
if(_effectiveScrollMode===CPWebViewScrollAppKit){
var _1d=objj_msgSend(_frameView,"visibleRect");
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(CGRectGetMaxX(_1d),CGRectGetMaxY(_1d)));
var win=null;
try{
win=objj_msgSend(_1b,"DOMWindow");
}
catch(e){
}
if(win&&win.document&&win.document.body){
var _1e=win.document.body.scrollWidth,_1f=win.document.body.scrollHeight;
_iframe.setAttribute("width",_1e);
_iframe.setAttribute("height",_1f);
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(_1e,_1f));
}else{
if(!win||!win.document){
CPLog.warn("using default size 800*1600");
objj_msgSend(_frameView,"setFrameSize:",CGSizeMake(800,1600));
}
}
objj_msgSend(_frameView,"scrollRectToVisible:",_1d);
}
}
}),new objj_method(sel_getUid("setScrollMode:"),function(_20,_21,_22){
with(_20){
if(_scrollMode==_22){
return;
}
_scrollMode=_22;
objj_msgSend(_20,"_updateEffectiveScrollMode");
}
}),new objj_method(sel_getUid("effectiveScrollMode"),function(_23,_24){
with(_23){
return _effectiveScrollMode;
}
}),new objj_method(sel_getUid("_updateEffectiveScrollMode"),function(_25,_26){
with(_25){
var _27=CPWebViewScrollAppKit;
if(_scrollMode==CPWebViewScrollNative||(_scrollMode==CPWebViewScrollAuto&&!_contentIsAccessible)||CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_27=CPWebViewScrollNative;
}else{
if(_scrollMode==CPWebViewScrollAppKit&&!_contentIsAccessible){
CPLog.warn(_25+" unable to use CPWebViewScrollAppKit scroll mode due to same origin policy.");
_27=CPWebViewScrollNative;
}
}
if(_27!==_effectiveScrollMode){
objj_msgSend(_25,"_setEffectiveScrollMode:",_27);
}
}
}),new objj_method(sel_getUid("_setEffectiveScrollMode:"),function(_28,_29,_2a){
with(_28){
_effectiveScrollMode=_2a;
_ignoreLoadStart=YES;
_ignoreLoadEnd=YES;
var _2b=_iframe.parentNode;
_2b.removeChild(_iframe);
if(_effectiveScrollMode===CPWebViewScrollAppKit){
objj_msgSend(_scrollView,"setHasHorizontalScroller:",YES);
objj_msgSend(_scrollView,"setHasVerticalScroller:",YES);
_iframe.setAttribute("scrolling","no");
}else{
if(_effectiveScrollMode===CPWebViewScrollNone){
objj_msgSend(_scrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_scrollView,"setHasVerticalScroller:",NO);
_iframe.setAttribute("scrolling","no");
}else{
objj_msgSend(_scrollView,"setHasHorizontalScroller:",NO);
objj_msgSend(_scrollView,"setHasVerticalScroller:",NO);
_iframe.setAttribute("scrolling","auto");
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"bounds").size);
}
}
_2b.appendChild(_iframe);
objj_msgSend(_28,"_applyBackgroundColor");
objj_msgSend(_28,"_resizeWebFrame");
}
}),new objj_method(sel_getUid("_maybePollWebFrameSize"),function(_2c,_2d){
with(_2c){
if(CPWebViewAppKitScrollMaxPollCount==0||_contentSizePollCount++<CPWebViewAppKitScrollMaxPollCount){
objj_msgSend(_2c,"_resizeWebFrame");
}else{
objj_msgSend(_contentSizeCheckTimer,"invalidate");
}
}
}),new objj_method(sel_getUid("loadHTMLString:"),function(_2e,_2f,_30){
with(_2e){
objj_msgSend(_2e,"loadHTMLString:baseURL:",_30,nil);
}
}),new objj_method(sel_getUid("loadHTMLString:baseURL:"),function(_31,_32,_33,URL){
with(_31){
objj_msgSend(_frameView,"setFrameSize:",objj_msgSend(_scrollView,"contentSize"));
objj_msgSend(_31,"_startedLoading");
_ignoreLoadStart=YES;
_url=nil;
_html=_33;
objj_msgSend(_31,"_load");
}
}),new objj_method(sel_getUid("_loadMainFrameURL"),function(_34,_35){
with(_34){
objj_msgSend(_34,"_startedLoading");
_ignoreLoadStart=YES;
_url=_mainFrameURL;
_html=nil;
objj_msgSend(_34,"_load");
}
}),new objj_method(sel_getUid("_load"),function(_36,_37){
with(_36){
if(_url){
var _38=objj_msgSend(CPURL,"URLWithString:",_url);
_contentIsAccessible=objj_msgSend(_38,"_passesSameOriginPolicy");
objj_msgSend(_36,"_updateEffectiveScrollMode");
_ignoreLoadEnd=NO;
_iframe.src=_url;
}else{
if(_html!==nil){
_iframe.src="";
_contentIsAccessible=YES;
objj_msgSend(_36,"_updateEffectiveScrollMode");
_ignoreLoadEnd=NO;
if(_loadHTMLStringTimer!==nil){
window.clearTimeout(_loadHTMLStringTimer);
_loadHTMLStringTimer=nil;
}
_loadHTMLStringTimer=window.setTimeout(function(){
var win=objj_msgSend(_36,"DOMWindow");
if(win){
win.document.write(_html||"<html><body></body></html>");
}
window.setTimeout(_loadCallback,1);
},0);
}
}
}
}),new objj_method(sel_getUid("_startedLoading"),function(_39,_3a){
with(_39){
_isLoading=YES;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWebViewProgressStartedNotification,_39);
if(objj_msgSend(_frameLoadDelegate,"respondsToSelector:",sel_getUid("webView:didStartProvisionalLoadForFrame:"))){
objj_msgSend(_frameLoadDelegate,"webView:didStartProvisionalLoadForFrame:",_39,nil);
}
}
}),new objj_method(sel_getUid("_finishedLoading"),function(_3b,_3c){
with(_3b){
_isLoading=NO;
objj_msgSend(_3b,"_resizeWebFrame");
objj_msgSend(_3b,"_attachScrollEventIfNecessary");
objj_msgSend(_3b,"_scheduleContentSizeCheck");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWebViewProgressFinishedNotification,_3b);
if(objj_msgSend(_frameLoadDelegate,"respondsToSelector:",sel_getUid("webView:didFinishLoadForFrame:"))){
objj_msgSend(_frameLoadDelegate,"webView:didFinishLoadForFrame:",_3b,nil);
}
}
}),new objj_method(sel_getUid("_scheduleContentSizeCheck"),function(_3d,_3e){
with(_3d){
objj_msgSend(_contentSizeCheckTimer,"invalidate");
if(_effectiveScrollMode==CPWebViewScrollAppKit){
_contentSizePollCount=0;
_contentSizeCheckTimer=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",CPWebViewAppKitScrollPollInterval,_3d,sel_getUid("_maybePollWebFrameSize"),nil,YES);
}
}
}),new objj_method(sel_getUid("isLoading"),function(_3f,_40){
with(_3f){
return _isLoading;
}
}),new objj_method(sel_getUid("mainFrameURL"),function(_41,_42){
with(_41){
return _mainFrameURL;
}
}),new objj_method(sel_getUid("setMainFrameURL:"),function(_43,_44,_45){
with(_43){
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=_45;
objj_msgSend(_forwardStack,"removeAllObjects");
objj_msgSend(_43,"_loadMainFrameURL");
}
}),new objj_method(sel_getUid("goBack"),function(_46,_47){
with(_46){
if(_backwardStack.length>0){
if(_mainFrameURL){
objj_msgSend(_forwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=objj_msgSend(_backwardStack,"lastObject");
objj_msgSend(_backwardStack,"removeLastObject");
objj_msgSend(_46,"_loadMainFrameURL");
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("goForward"),function(_48,_49){
with(_48){
if(_forwardStack.length>0){
if(_mainFrameURL){
objj_msgSend(_backwardStack,"addObject:",_mainFrameURL);
}
_mainFrameURL=objj_msgSend(_forwardStack,"lastObject");
objj_msgSend(_forwardStack,"removeLastObject");
objj_msgSend(_48,"_loadMainFrameURL");
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("canGoBack"),function(_4a,_4b){
with(_4a){
return (_backwardStack.length>0);
}
}),new objj_method(sel_getUid("canGoForward"),function(_4c,_4d){
with(_4c){
return (_forwardStack.length>0);
}
}),new objj_method(sel_getUid("backForwardList"),function(_4e,_4f){
with(_4e){
return {back:_backwardStack,forward:_forwardStack};
}
}),new objj_method(sel_getUid("close"),function(_50,_51){
with(_50){
_iframe.parentNode.removeChild(_iframe);
}
}),new objj_method(sel_getUid("DOMWindow"),function(_52,_53){
with(_52){
return (_iframe.contentDocument&&_iframe.contentDocument.defaultView)||_iframe.contentWindow;
}
}),new objj_method(sel_getUid("windowScriptObject"),function(_54,_55){
with(_54){
var win=objj_msgSend(_54,"DOMWindow");
if(!_wso||win!=objj_msgSend(_wso,"window")){
if(win){
_wso=objj_msgSend(objj_msgSend(CPWebScriptObject,"alloc"),"initWithWindow:",win);
}else{
_wso=nil;
}
}
return _wso;
}
}),new objj_method(sel_getUid("stringByEvaluatingJavaScriptFromString:"),function(_56,_57,_58){
with(_56){
var _59=objj_msgSend(_56,"objectByEvaluatingJavaScriptFromString:",_58);
return _59?String(_59):nil;
}
}),new objj_method(sel_getUid("objectByEvaluatingJavaScriptFromString:"),function(_5a,_5b,_5c){
with(_5a){
return objj_msgSend(objj_msgSend(_5a,"windowScriptObject"),"evaluateWebScript:",_5c);
}
}),new objj_method(sel_getUid("computedStyleForElement:pseudoElement:"),function(_5d,_5e,_5f,_60){
with(_5d){
var win=objj_msgSend(objj_msgSend(_5d,"windowScriptObject"),"window");
if(win){
return win.document.defaultView.getComputedStyle(_5f,_60);
}
return nil;
}
}),new objj_method(sel_getUid("drawsBackground"),function(_61,_62){
with(_61){
return _drawsBackground;
}
}),new objj_method(sel_getUid("setDrawsBackground:"),function(_63,_64,_65){
with(_63){
if(_65==_drawsBackground){
return;
}
_drawsBackground=_65;
objj_msgSend(_63,"_applyBackgroundColor");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_66,_67,_68){
with(_66){
objj_msgSendSuper({receiver:_66,super_class:objj_getClass("CPWebView").super_class},"setBackgroundColor:",_68);
objj_msgSend(_66,"_applyBackgroundColor");
}
}),new objj_method(sel_getUid("_applyBackgroundColor"),function(_69,_6a){
with(_69){
if(_iframe){
var _6b=objj_msgSend(_69,"backgroundColor")||objj_msgSend(CPColor,"whiteColor");
_iframe.allowtransparency=!_drawsBackground;
_iframe.style.backgroundColor=_drawsBackground?objj_msgSend(_6b,"cssString"):"transparent";
}
}
}),new objj_method(sel_getUid("takeStringURLFrom:"),function(_6c,_6d,_6e){
with(_6c){
objj_msgSend(_6c,"setMainFrameURL:",objj_msgSend(_6e,"stringValue"));
}
}),new objj_method(sel_getUid("goBack:"),function(_6f,_70,_71){
with(_6f){
objj_msgSend(_6f,"goBack");
}
}),new objj_method(sel_getUid("goForward:"),function(_72,_73,_74){
with(_72){
objj_msgSend(_72,"goForward");
}
}),new objj_method(sel_getUid("stopLoading:"),function(_75,_76,_77){
with(_75){
}
}),new objj_method(sel_getUid("reload:"),function(_78,_79,_7a){
with(_78){
if(!_url&&(_html!==nil)){
objj_msgSend(_78,"loadHTMLString:",_html);
}else{
objj_msgSend(_78,"_loadMainFrameURL");
}
}
}),new objj_method(sel_getUid("print:"),function(_7b,_7c,_7d){
with(_7b){
try{
objj_msgSend(_7b,"DOMWindow").print();
}
catch(e){
alert("Please click the webpage and select \"Print\" from the \"File\" menu");
}
}
}),new objj_method(sel_getUid("downloadDelegate"),function(_7e,_7f){
with(_7e){
return _downloadDelegate;
}
}),new objj_method(sel_getUid("setDownloadDelegate:"),function(_80,_81,_82){
with(_80){
_downloadDelegate=_82;
}
}),new objj_method(sel_getUid("frameLoadDelegate"),function(_83,_84){
with(_83){
return _frameLoadDelegate;
}
}),new objj_method(sel_getUid("setFrameLoadDelegate:"),function(_85,_86,_87){
with(_85){
_frameLoadDelegate=_87;
}
}),new objj_method(sel_getUid("policyDelegate"),function(_88,_89){
with(_88){
return _policyDelegate;
}
}),new objj_method(sel_getUid("setPolicyDelegate:"),function(_8a,_8b,_8c){
with(_8a){
_policyDelegate=_8c;
}
}),new objj_method(sel_getUid("resourceLoadDelegate"),function(_8d,_8e){
with(_8d){
return _resourceLoadDelegate;
}
}),new objj_method(sel_getUid("setResourceLoadDelegate:"),function(_8f,_90,_91){
with(_8f){
_resourceLoadDelegate=_91;
}
}),new objj_method(sel_getUid("UIDelegate"),function(_92,_93){
with(_92){
return _UIDelegate;
}
}),new objj_method(sel_getUid("setUIDelegate:"),function(_94,_95,_96){
with(_94){
_UIDelegate=_96;
}
})]);
var _1=objj_allocateClassPair(CPObject,"CPWebScriptObject"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_window")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithWindow:"),function(_97,_98,_99){
with(_97){
if(_97=objj_msgSendSuper({receiver:_97,super_class:objj_getClass("CPWebScriptObject").super_class},"init")){
_window=_99;
}
return _97;
}
}),new objj_method(sel_getUid("callWebScriptMethod:withArguments:"),function(_9a,_9b,_9c,_9d){
with(_9a){
if(typeof _window[_9c]=="function"){
try{
return _window[_9c].apply(_9d);
}
catch(e){
}
}
return undefined;
}
}),new objj_method(sel_getUid("evaluateWebScript:"),function(_9e,_9f,_a0){
with(_9e){
try{
return _window.eval(_a0);
}
catch(e){
}
return undefined;
}
}),new objj_method(sel_getUid("window"),function(_a1,_a2){
with(_a1){
return _window;
}
})]);
var _1=objj_getClass("CPWebView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPWebView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_a3,_a4,_a5){
with(_a3){
_a3=objj_msgSendSuper({receiver:_a3,super_class:objj_getClass("CPWebView").super_class},"initWithCoder:",_a5);
if(_a3){
_mainFrameURL=nil;
_backwardStack=[];
_forwardStack=[];
_scrollMode=CPWebViewScrollAuto;
objj_msgSend(_a3,"_initDOMWithFrame:",objj_msgSend(_a3,"frame"));
if(!objj_msgSend(_a3,"backgroundColor")){
objj_msgSend(_a3,"setBackgroundColor:",objj_msgSend(CPColor,"whiteColor"));
}
objj_msgSend(_a3,"_updateEffectiveScrollMode");
}
return _a3;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=_subviews;
_subviews=[];
objj_msgSendSuper({receiver:_a6,super_class:objj_getClass("CPWebView").super_class},"encodeWithCoder:",_a8);
_subviews=_a9;
}
})]);
var _1=objj_getClass("CPURL");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPURL\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("_passesSameOriginPolicy"),function(_aa,_ab){
with(_aa){
var _ac=objj_msgSend(CPURL,"URLWithString:",window.location.href);
if(objj_msgSend(_ac,"isFileURL")&&CPFeatureIsCompatible(CPSOPDisabledFromFileURLs)){
return YES;
}
return (objj_msgSend(_ac,"scheme")==objj_msgSend(_aa,"scheme")&&objj_msgSend(_ac,"host")==objj_msgSend(_aa,"host")&&objj_msgSend(_ac,"port")==objj_msgSend(_aa,"port"));
}
})]);
p;20;CPWindowController.jt;9265;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;13;CPResponder.ji;10;CPWindow.ji;12;CPDocument.jt;9144;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPWindow.j",YES);
objj_executeFile("CPDocument.j",YES);
var _1=objj_allocateClassPair(CPResponder,"CPWindowController"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_window"),new objj_ivar("_documents"),new objj_ivar("_document"),new objj_ivar("_shouldCloseDocument"),new objj_ivar("_supportsMultipleDocuments"),new objj_ivar("_cibOwner"),new objj_ivar("_windowCibName"),new objj_ivar("_windowCibPath"),new objj_ivar("_viewController"),new objj_ivar("_viewControllerContainerView")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
return objj_msgSend(_3,"initWithWindow:",nil);
}
}),new objj_method(sel_getUid("initWithWindow:"),function(_5,_6,_7){
with(_5){
_5=objj_msgSendSuper({receiver:_5,super_class:objj_getClass("CPWindowController").super_class},"init");
if(_5){
objj_msgSend(_5,"setWindow:",_7);
objj_msgSend(_5,"setShouldCloseDocument:",NO);
objj_msgSend(_5,"setNextResponder:",CPApp);
_documents=[];
}
return _5;
}
}),new objj_method(sel_getUid("initWithWindowCibName:"),function(_8,_9,_a){
with(_8){
return objj_msgSend(_8,"initWithWindowCibName:owner:",_a,_8);
}
}),new objj_method(sel_getUid("initWithWindowCibName:owner:"),function(_b,_c,_d,_e){
with(_b){
_b=objj_msgSend(_b,"initWithWindow:",nil);
if(_b){
_cibOwner=_e;
_windowCibName=_d;
}
return _b;
}
}),new objj_method(sel_getUid("initWithWindowCibPath:owner:"),function(_f,_10,_11,_12){
with(_f){
_f=objj_msgSend(_f,"initWithWindow:",nil);
if(_f){
_cibOwner=_12;
_windowCibPath=_11;
}
return _f;
}
}),new objj_method(sel_getUid("loadWindow"),function(_13,_14){
with(_13){
if(_window){
return;
}
objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"loadCibFile:externalNameTable:",objj_msgSend(_13,"windowCibPath"),objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_cibOwner,CPCibOwner));
}
}),new objj_method(sel_getUid("showWindow:"),function(_15,_16,_17){
with(_15){
var _18=objj_msgSend(_15,"window");
if(objj_msgSend(_18,"respondsToSelector:",sel_getUid("becomesKeyOnlyIfNeeded"))&&objj_msgSend(_18,"becomesKeyOnlyIfNeeded")){
objj_msgSend(_18,"orderFront:",_17);
}else{
objj_msgSend(_18,"makeKeyAndOrderFront:",_17);
}
}
}),new objj_method(sel_getUid("isWindowLoaded"),function(_19,_1a){
with(_19){
return _window!==nil;
}
}),new objj_method(sel_getUid("window"),function(_1b,_1c){
with(_1b){
if(!_window){
objj_msgSend(_1b,"windowWillLoad");
objj_msgSend(_document,"windowControllerWillLoadCib:",_1b);
objj_msgSend(_1b,"loadWindow");
if(_window===nil&&objj_msgSend(_cibOwner,"isKindOfClass:",objj_msgSend(CPDocument,"class"))){
objj_msgSend(_1b,"setWindow:",objj_msgSend(_cibOwner,"valueForKey:","window"));
}
if(!_window){
var _1d=objj_msgSend(CPString,"stringWithFormat:","Window for %@ could not be loaded from Cib or no window specified.                                                         Override loadWindow to load the window manually.",_1b);
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,_1d);
}
objj_msgSend(_1b,"windowDidLoad");
objj_msgSend(_document,"windowControllerDidLoadCib:",_1b);
objj_msgSend(_1b,"synchronizeWindowTitleWithDocumentName");
}
return _window;
}
}),new objj_method(sel_getUid("setWindow:"),function(_1e,_1f,_20){
with(_1e){
objj_msgSend(_window,"setWindowController:",nil);
_window=_20;
objj_msgSend(_window,"setWindowController:",_1e);
objj_msgSend(_window,"setNextResponder:",_1e);
}
}),new objj_method(sel_getUid("windowDidLoad"),function(_21,_22){
with(_21){
}
}),new objj_method(sel_getUid("windowWillLoad"),function(_23,_24){
with(_23){
}
}),new objj_method(sel_getUid("setDocument:"),function(_25,_26,_27){
with(_25){
if(_document===_27){
return;
}
var _28=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_document){
if(!objj_msgSend(_25,"supportsMultipleDocuments")){
objj_msgSend(_25,"removeDocument:",_document);
}
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentWillSaveNotification,_document);
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentDidSaveNotification,_document);
objj_msgSend(_28,"removeObserver:name:object:",_25,CPDocumentDidFailToSaveNotification,_document);
}
_document=_27;
if(_document){
objj_msgSend(_25,"addDocument:",_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentWillSave:"),CPDocumentWillSaveNotification,_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentDidSave:"),CPDocumentDidSaveNotification,_document);
objj_msgSend(_28,"addObserver:selector:name:object:",_25,sel_getUid("_documentDidFailToSave:"),CPDocumentDidFailToSaveNotification,_document);
objj_msgSend(_25,"setDocumentEdited:",objj_msgSend(_document,"isDocumentEdited"));
}
var _29=objj_msgSend(_document,"viewControllerForWindowController:",_25);
if(_29){
objj_msgSend(_25,"setViewController:",_29);
}
objj_msgSend(_25,"synchronizeWindowTitleWithDocumentName");
objj_msgSend(objj_msgSend(objj_msgSend(_25,"window"),"toolbar"),"validateVisibleItems");
}
}),new objj_method(sel_getUid("setSupportsMultipleDocuments:"),function(_2a,_2b,_2c){
with(_2a){
_supportsMultipleDocuments=_2c;
}
}),new objj_method(sel_getUid("supportsMultipleDocuments"),function(_2d,_2e){
with(_2d){
return _supportsMultipleDocuments;
}
}),new objj_method(sel_getUid("addDocument:"),function(_2f,_30,_31){
with(_2f){
if(_31&&!objj_msgSend(_documents,"containsObject:",_31)){
objj_msgSend(_documents,"addObject:",_31);
}
}
}),new objj_method(sel_getUid("removeDocument:"),function(_32,_33,_34){
with(_32){
var _35=objj_msgSend(_documents,"indexOfObjectIdenticalTo:",_34);
if(_35===CPNotFound){
return;
}
objj_msgSend(_documents,"removeObjectAtIndex:",_35);
if(_document===_34&&objj_msgSend(_documents,"count")){
objj_msgSend(_32,"setDocument:",objj_msgSend(_documents,"objectAtIndex:",MIN(_35,objj_msgSend(_documents,"count")-1)));
}
}
}),new objj_method(sel_getUid("removeDocumentAndCloseIfNecessary:"),function(_36,_37,_38){
with(_36){
objj_msgSend(_36,"removeDocument:",_38);
if(!objj_msgSend(_documents,"count")){
objj_msgSend(_36,"close");
}
}
}),new objj_method(sel_getUid("documents"),function(_39,_3a){
with(_39){
return _documents;
}
}),new objj_method(sel_getUid("setViewControllerContainerView:"),function(_3b,_3c,_3d){
with(_3b){
_viewControllerContainerView=_3d;
}
}),new objj_method(sel_getUid("viewControllerContainerView"),function(_3e,_3f){
with(_3e){
return _viewControllerContainerView;
}
}),new objj_method(sel_getUid("setViewController:"),function(_40,_41,_42){
with(_40){
var _43=objj_msgSend(_40,"viewControllerContainerView")||objj_msgSend(objj_msgSend(_40,"window"),"contentView"),_44=objj_msgSend(_viewController,"view"),_45=_44?objj_msgSend(_44,"frame"):objj_msgSend(_43,"bounds");
objj_msgSend(_44,"removeFromSuperview");
_viewController=_42;
_44=objj_msgSend(_viewController,"view");
if(_44){
objj_msgSend(_44,"setFrame:",_45);
objj_msgSend(_43,"addSubview:",_44);
}
}
}),new objj_method(sel_getUid("viewController"),function(_46,_47){
with(_46){
return _viewController;
}
}),new objj_method(sel_getUid("_documentWillSave:"),function(_48,_49,_4a){
with(_48){
objj_msgSend(objj_msgSend(_48,"window"),"setDocumentSaving:",YES);
}
}),new objj_method(sel_getUid("_documentDidSave:"),function(_4b,_4c,_4d){
with(_4b){
objj_msgSend(objj_msgSend(_4b,"window"),"setDocumentSaving:",NO);
}
}),new objj_method(sel_getUid("_documentDidFailToSave:"),function(_4e,_4f,_50){
with(_4e){
objj_msgSend(objj_msgSend(_4e,"window"),"setDocumentSaving:",NO);
}
}),new objj_method(sel_getUid("document"),function(_51,_52){
with(_51){
return _document;
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_53,_54,_55){
with(_53){
objj_msgSend(objj_msgSend(_53,"window"),"setDocumentEdited:",_55);
}
}),new objj_method(sel_getUid("close"),function(_56,_57){
with(_56){
objj_msgSend(objj_msgSend(_56,"window"),"close");
}
}),new objj_method(sel_getUid("setShouldCloseDocument:"),function(_58,_59,_5a){
with(_58){
_shouldCloseDocument=_5a;
}
}),new objj_method(sel_getUid("shouldCloseDocument"),function(_5b,_5c){
with(_5b){
return _shouldCloseDocument;
}
}),new objj_method(sel_getUid("owner"),function(_5d,_5e){
with(_5d){
return _cibOwner;
}
}),new objj_method(sel_getUid("windowCibName"),function(_5f,_60){
with(_5f){
if(_windowCibName){
return _windowCibName;
}
return objj_msgSend(objj_msgSend(_windowCibPath,"lastPathComponent"),"stringByDeletingPathExtension");
}
}),new objj_method(sel_getUid("windowCibPath"),function(_61,_62){
with(_61){
if(_windowCibPath){
return _windowCibPath;
}
return objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_windowCibName+".cib");
}
}),new objj_method(sel_getUid("synchronizeWindowTitleWithDocumentName"),function(_63,_64){
with(_63){
if(!_document||!_window){
return;
}
objj_msgSend(_window,"setTitle:",objj_msgSend(_63,"windowTitleForDocumentDisplayName:",objj_msgSend(_document,"displayName")));
}
}),new objj_method(sel_getUid("windowTitleForDocumentDisplayName:"),function(_65,_66,_67){
with(_65){
return _67;
}
})]);
p;13;CPWorkspace.jt;728;@STATIC;1.0;I;21;Foundation/CPString.jt;684;
objj_executeFile("Foundation/CPString.j",NO);
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CPWorkspace"),_3=_2.isa;
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("openFile:"),function(_4,_5,_6){
with(_4){
var _7=objj_msgSend(CPURL,"URLWithString:",_6);
return objj_msgSend(_4,"openURL:",_7);
}
}),new objj_method(sel_getUid("openURL:"),function(_8,_9,_a){
with(_8){
if(!_a||!objj_msgSend(_a,"absoluteURL")){
return NO;
}
window.open(objj_msgSend(_a,"absoluteURL"));
return YES;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("sharedWorkspace"),function(_b,_c){
with(_b){
if(!_1){
_1=objj_msgSend(CPWorkspace,"new");
}
return _1;
}
})]);
p;20;_CPCibClassSwapper.jt;1367;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;1296;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="_CPCibClassSwapperClassNameKey",_2="_CPCibClassSwapperOriginalClassNameKey";
var _3=objj_allocateClassPair(CPObject,"_CPCibClassSwapper"),_4=_3.isa;
objj_registerClassPair(_3);
class_addMethods(_4,[new objj_method(sel_getUid("allocObjectWithCoder:className:"),function(_5,_6,_7,_8){
with(_5){
var _9=objj_msgSend(_7,"classForClassName:",_8);
if(!_9){
_9=objj_lookUpClass(_8);
if(!_9){
return nil;
}
}
return objj_msgSend(_9,"alloc");
}
}),new objj_method(sel_getUid("allocWithCoder:"),function(_a,_b,_c){
with(_a){
if(objj_msgSend(_c,"respondsToSelector:",sel_getUid("usesOriginalClasses"))&&objj_msgSend(_c,"usesOriginalClasses")){
var _d=objj_msgSend(_c,"decodeObjectForKey:",_2),_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,_d);
}else{
var _d=objj_msgSend(_c,"decodeObjectForKey:",_1),_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,_d);
if(!_e){
CPLog.error("Unable to find class "+_d+" referenced in cib file.");
_e=objj_msgSend(_a,"allocObjectWithCoder:className:",_c,objj_msgSend(_c,"decodeObjectForKey:",_2));
}
}
if(!_e){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Unable to find class "+_d+" referenced in cib file.");
}
return _e;
}
})]);
p;20;_CPCibCustomObject.jt;1717;@STATIC;1.0;I;21;Foundation/CPObject.jt;1672;
objj_executeFile("Foundation/CPObject.j",NO);
var _1="_CPCibCustomObjectClassName";
var _2=objj_allocateClassPair(CPObject,"_CPCibCustomObject"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_className")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("customClassName"),function(_4,_5){
with(_4){
return _className;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_6,_7,_8){
with(_6){
_className=_8;
}
}),new objj_method(sel_getUid("description"),function(_9,_a){
with(_9){
return objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPCibCustomObject").super_class},"description")+" ("+objj_msgSend(_9,"customClassName")+")";
}
})]);
var _2=objj_getClass("_CPCibCustomObject");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomObject\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_b,_c,_d){
with(_b){
_b=objj_msgSendSuper({receiver:_b,super_class:objj_getClass("_CPCibCustomObject").super_class},"init");
if(_b){
_className=objj_msgSend(_d,"decodeObjectForKey:",_1);
}
return _b;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e,_f,_10){
with(_e){
objj_msgSend(_10,"encodeObject:forKey:",_className,_1);
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_11,_12){
with(_11){
var _13=CPClassFromString(_className);
if(_13===objj_msgSend(_11,"class")){
_className="CPObject";
return _11;
}
if(!_13){
_13=objj_msgSend(CPObject,"class");
}
if(_13===objj_msgSend(CPApplication,"class")){
return objj_msgSend(CPApplication,"sharedApplication");
}
return objj_msgSend(objj_msgSend(_13,"alloc"),"init");
}
})]);
p;22;_CPCibCustomResource.jt;4483;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;4412;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="_CPCibCustomResourceClassNameKey",_2="_CPCibCustomResourceResourceNameKey",_3="_CPCibCustomResourcePropertiesKey";
var _4=objj_allocateClassPair(CPObject,"_CPCibCustomResource"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_className"),new objj_ivar("_resourceName"),new objj_ivar("_properties")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithClassName:resourceName:properties:"),function(_6,_7,_8,_9,_a){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("_CPCibCustomResource").super_class},"init");
if(_6){
_className=_8;
_resourceName=_9;
_properties=_a;
}
return _6;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_b,_c,_d){
with(_b){
_b=objj_msgSendSuper({receiver:_b,super_class:objj_getClass("_CPCibCustomResource").super_class},"init");
if(_b){
_className=objj_msgSend(_d,"decodeObjectForKey:",_1);
_resourceName=objj_msgSend(_d,"decodeObjectForKey:",_2);
_properties=objj_msgSend(_d,"decodeObjectForKey:",_3);
}
return _b;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_e,_f,_10){
with(_e){
objj_msgSend(_10,"encodeObject:forKey:",_className,_1);
objj_msgSend(_10,"encodeObject:forKey:",_resourceName,_2);
objj_msgSend(_10,"encodeObject:forKey:",_properties,_3);
}
}),new objj_method(sel_getUid("awakeAfterUsingCoder:"),function(_11,_12,_13){
with(_11){
if(objj_msgSend(_13,"respondsToSelector:",sel_getUid("bundle"))&&(!objj_msgSend(_13,"respondsToSelector:",sel_getUid("awakenCustomResources"))||objj_msgSend(_13,"awakenCustomResources"))){
if(_className==="CPImage"){
if(_resourceName=="CPAddTemplate"){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","plus_button.png"),CGSizeMake(11,12));
}else{
if(_resourceName=="CPRemoveTemplate"){
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPButtonBar,"class")),"pathForResource:","minus_button.png"),CGSizeMake(11,4));
}
}
return objj_msgSend(_11,"imageFromBundle:",objj_msgSend(_13,"bundle"));
}
}
return _11;
}
}),new objj_method(sel_getUid("imageFromBundle:"),function(_14,_15,_16){
with(_14){
if(!_16){
var _17=_properties.valueForKey("bundleClass");
if(_17){
_17=CPClassFromString(_17);
if(_17){
_16=objj_msgSend(CPBundle,"bundleForClass:",_17);
}
}else{
_16=objj_msgSend(CPBundle,"mainBundle");
}
}
return objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_16,"pathForResource:",_resourceName),_properties.valueForKey("size"));
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("imageResourceWithName:size:"),function(_18,_19,_1a,_1b){
with(_18){
return objj_msgSend(objj_msgSend(_18,"alloc"),"initWithClassName:resourceName:properties:","CPImage",_1a,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_1b,"size"));
}
}),new objj_method(sel_getUid("imageResourceWithName:size:bundleClass:"),function(_1c,_1d,_1e,_1f,_20){
with(_1c){
return objj_msgSend(objj_msgSend(_1c,"alloc"),"initWithClassName:resourceName:properties:","CPImage",_1e,objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[_1f,_20],["size","bundleClass"]));
}
})]);
var _4=objj_getClass("_CPCibCustomResource");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomResource\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("filename"),function(_21,_22){
with(_21){
return objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_resourceName);
}
}),new objj_method(sel_getUid("size"),function(_23,_24){
with(_23){
return objj_msgSend(_properties,"objectForKey:","size");
}
}),new objj_method(sel_getUid("isThreePartImage"),function(_25,_26){
with(_25){
return NO;
}
}),new objj_method(sel_getUid("isNinePartImage"),function(_27,_28){
with(_27){
return NO;
}
}),new objj_method(sel_getUid("loadStatus"),function(_29,_2a){
with(_29){
return CPImageLoadStatusCompleted;
}
}),new objj_method(sel_getUid("delegate"),function(_2b,_2c){
with(_2b){
return nil;
}
}),new objj_method(sel_getUid("description"),function(_2d,_2e){
with(_2d){
var _2f=objj_msgSend(_2d,"imageFromBundle:",nil);
return objj_msgSend(_2f,"description");
}
})]);
p;18;_CPCibCustomView.jt;2402;@STATIC;1.0;i;8;CPView.jt;2371;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPCibCustomView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_className")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("customClassName"),function(_3,_4){
with(_3){
return _className;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_5,_6,_7){
with(_5){
if(_className===_7){
return;
}
_className=_7;
objj_msgSend(_5,"setNeedsDisplay:",YES);
objj_msgSend(_5,"setNeedsLayout");
}
})]);
var _8="_CPCibCustomViewClassNameKey";
var _1=objj_getClass("_CPCibCustomView");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomView\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_9,_a,_b){
with(_9){
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPCibCustomView").super_class},"initWithCoder:",_b);
if(_9){
_className=objj_msgSend(_b,"decodeObjectForKey:",_8);
}
return _9;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_c,_d,_e){
with(_c){
objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPCibCustomView").super_class},"encodeWithCoder:",_e);
objj_msgSend(_e,"encodeObject:forKey:",_className,_8);
}
}),new objj_method(sel_getUid("customClassName"),function(_f,_10){
with(_f){
return _className;
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_11,_12){
with(_11){
var _13=CPClassFromString(_className);
if(!_13){
_13=objj_msgSend(CPView,"class");
}
if(_13===objj_msgSend(_11,"class")){
_className="CPView";
return _11;
}
var _14=objj_msgSend(objj_msgSend(_13,"alloc"),"initWithFrame:",objj_msgSend(_11,"frame"));
if(_14){
objj_msgSend(_14,"setBounds:",objj_msgSend(_11,"bounds"));
var _15=objj_msgSend(_11,"subviews"),_16=0,_17=_15.length;
for(;_16<_17;++_16){
objj_msgSend(_14,"addSubview:",_15[_16]);
}
objj_msgSend(_14,"setAutoresizingMask:",objj_msgSend(_11,"autoresizingMask"));
objj_msgSend(_14,"setAutoresizesSubviews:",objj_msgSend(_11,"autoresizesSubviews"));
objj_msgSend(_14,"setHitTests:",objj_msgSend(_11,"hitTests"));
objj_msgSend(_14,"setHidden:",objj_msgSend(_11,"isHidden"));
objj_msgSend(_14,"setAlphaValue:",objj_msgSend(_11,"alphaValue"));
objj_msgSend(_superview,"replaceSubview:with:",_11,_14);
objj_msgSend(_14,"setBackgroundColor:",objj_msgSend(_11,"backgroundColor"));
}
return _14;
}
})]);
p;23;_CPCibKeyedUnarchiver.jt;1485;@STATIC;1.0;I;30;Foundation/CPKeyedUnarchiver.jt;1431;
objj_executeFile("Foundation/CPKeyedUnarchiver.j",NO);
var _1=objj_allocateClassPair(CPKeyedUnarchiver,"_CPCibKeyedUnarchiver"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_bundle"),new objj_ivar("_awakenCustomResources"),new objj_ivar("_externalObjectsForProxyIdentifiers")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initForReadingWithData:bundle:awakenCustomResources:"),function(_3,_4,_5,_6,_7){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPCibKeyedUnarchiver").super_class},"initForReadingWithData:",_5);
if(_3){
_bundle=_6;
_awakenCustomResources=_7;
objj_msgSend(_3,"setDelegate:",_3);
}
return _3;
}
}),new objj_method(sel_getUid("bundle"),function(_8,_9){
with(_8){
return _bundle;
}
}),new objj_method(sel_getUid("awakenCustomResources"),function(_a,_b){
with(_a){
return _awakenCustomResources;
}
}),new objj_method(sel_getUid("setExternalObjectsForProxyIdentifiers:"),function(_c,_d,_e){
with(_c){
_externalObjectsForProxyIdentifiers=_e;
}
}),new objj_method(sel_getUid("externalObjectForProxyIdentifier:"),function(_f,_10,_11){
with(_f){
return objj_msgSend(_externalObjectsForProxyIdentifiers,"objectForKey:",_11);
}
}),new objj_method(sel_getUid("replaceObjectAtUID:withObject:"),function(_12,_13,_14,_15){
with(_12){
_objects[_14]=_15;
}
}),new objj_method(sel_getUid("objectAtUID:"),function(_16,_17,_18){
with(_16){
return _objects[_18];
}
})]);
p;18;_CPCibObjectData.jt;6666;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;7;CPCib.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;22;CPCibOutletConnector.ji;23;CPCibBindingConnector.ji;33;CPCibRuntimeAttributesConnector.ji;20;CPCibHelpConnector.jt;6392;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPCib.j",YES);
objj_executeFile("CPCibConnector.j",YES);
objj_executeFile("CPCibControlConnector.j",YES);
objj_executeFile("CPCibOutletConnector.j",YES);
objj_executeFile("CPCibBindingConnector.j",YES);
objj_executeFile("CPCibRuntimeAttributesConnector.j",YES);
objj_executeFile("CPCibHelpConnector.j",YES);
var _1=objj_allocateClassPair(CPObject,"_CPCibObjectData"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_namesKeys"),new objj_ivar("_namesValues"),new objj_ivar("_accessibilityConnectors"),new objj_ivar("_accessibilityOidsKeys"),new objj_ivar("_accessibilityOidsValues"),new objj_ivar("_classesKeys"),new objj_ivar("_classesValues"),new objj_ivar("_connections"),new objj_ivar("_fontManager"),new objj_ivar("_framework"),new objj_ivar("_nextOid"),new objj_ivar("_objectsKeys"),new objj_ivar("_objectsValues"),new objj_ivar("_oidKeys"),new objj_ivar("_oidValues"),new objj_ivar("_fileOwner"),new objj_ivar("_visibleWindows"),new objj_ivar("_replacementObjects")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPCibObjectData").super_class},"init");
if(_3){
_namesKeys=[];
_namesValues=[];
_classesKeys=[];
_classesValues=[];
_connections=[];
_framework="";
_nextOid=[];
_objectsKeys=[];
_objectsValues=[];
_oidKeys=[];
_oidValues=[];
_fileOwner=nil;
_visibleWindows=objj_msgSend(CPSet,"set");
}
return _3;
}
}),new objj_method(sel_getUid("displayVisibleWindows"),function(_5,_6){
with(_5){
var _7=nil,_8=objj_msgSend(_visibleWindows,"objectEnumerator");
while((_7=objj_msgSend(_8,"nextObject"))!==nil){
objj_msgSend(_replacementObjects[objj_msgSend(_7,"UID")],"makeKeyAndOrderFront:",_5);
}
}
})]);
var _9="_CPCibObjectDataNamesKeysKey",_a="_CPCibObjectDataNamesValuesKey",_b="_CPCibObjectDataAccessibilityConnectors",_c="_CPCibObjectDataAccessibilityOidsKeys",_d="_CPCibObjectDataAccessibilityOidsValues",_e="_CPCibObjectDataClassesKeysKey",_f="_CPCibObjectDataClassesValuesKey",_10="_CPCibObjectDataConnectionsKey",_11="_CPCibObjectDataFontManagerKey",_12="_CPCibObjectDataFrameworkKey",_13="_CPCibObjectDataNextOidKey",_14="_CPCibObjectDataObjectsKeysKey",_15="_CPCibObjectDataObjectsValuesKey",_16="_CPCibObjectDataOidKeysKey",_17="_CPCibObjectDataOidValuesKey",_18="_CPCibObjectDataFileOwnerKey",_19="_CPCibObjectDataVisibleWindowsKey";
var _1=objj_getClass("_CPCibObjectData");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibObjectData\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_1a,_1b,_1c){
with(_1a){
_1a=objj_msgSendSuper({receiver:_1a,super_class:objj_getClass("_CPCibObjectData").super_class},"init");
if(_1a){
_replacementObjects={};
_namesKeys=objj_msgSend(_1c,"decodeObjectForKey:",_9);
_namesValues=objj_msgSend(_1c,"decodeObjectForKey:",_a);
_classesKeys=objj_msgSend(_1c,"decodeObjectForKey:",_e);
_classesValues=objj_msgSend(_1c,"decodeObjectForKey:",_f);
_connections=objj_msgSend(_1c,"decodeObjectForKey:",_10);
_framework=objj_msgSend(_1c,"decodeObjectForKey:",_12);
_nextOid=objj_msgSend(_1c,"decodeIntForKey:",_13);
_objectsKeys=objj_msgSend(_1c,"decodeObjectForKey:",_14);
_objectsValues=objj_msgSend(_1c,"decodeObjectForKey:",_15);
_oidKeys=objj_msgSend(_1c,"decodeObjectForKey:",_16);
_oidValues=objj_msgSend(_1c,"decodeObjectForKey:",_17);
_fileOwner=objj_msgSend(_1c,"decodeObjectForKey:",_18);
_visibleWindows=objj_msgSend(_1c,"decodeObjectForKey:",_19);
}
return _1a;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_1d,_1e,_1f){
with(_1d){
objj_msgSend(_1f,"encodeObject:forKey:",_namesKeys,_9);
objj_msgSend(_1f,"encodeObject:forKey:",_namesValues,_a);
objj_msgSend(_1f,"encodeObject:forKey:",_classesKeys,_e);
objj_msgSend(_1f,"encodeObject:forKey:",_classesValues,_f);
objj_msgSend(_1f,"encodeObject:forKey:",_connections,_10);
objj_msgSend(_1f,"encodeObject:forKey:",_framework,_12);
objj_msgSend(_1f,"encodeInt:forKey:",_nextOid,_13);
objj_msgSend(_1f,"encodeObject:forKey:",_objectsKeys,_14);
objj_msgSend(_1f,"encodeObject:forKey:",_objectsValues,_15);
objj_msgSend(_1f,"encodeObject:forKey:",_oidKeys,_16);
objj_msgSend(_1f,"encodeObject:forKey:",_oidValues,_17);
objj_msgSend(_1f,"encodeObject:forKey:",_fileOwner,_18);
objj_msgSend(_1f,"encodeObject:forKey:",_visibleWindows,_19);
}
}),new objj_method(sel_getUid("instantiateWithOwner:topLevelObjects:"),function(_20,_21,_22,_23){
with(_20){
var _24=objj_msgSend(_objectsKeys,"count");
while(_24--){
var _25=_objectsKeys[_24],_26=_objectsValues[_24],_27=_25;
if(objj_msgSend(_25,"respondsToSelector:",sel_getUid("_cibInstantiate"))){
var _27=objj_msgSend(_25,"_cibInstantiate");
if(_27!==_25){
_replacementObjects[objj_msgSend(_25,"UID")]=_27;
if(objj_msgSend(_27,"isKindOfClass:",CPView)){
var _28=objj_msgSend(_27,"superview");
if(objj_msgSend(_28,"isKindOfClass:",CPClipView)){
var _29=objj_msgSend(_28,"superview");
if(objj_msgSend(_29,"isKindOfClass:",CPScrollView)){
objj_msgSend(_29,"setDocumentView:",_27);
}
}
}
}
}
if(_23&&_26===_fileOwner&&_25!==_fileOwner){
_23.push(_27);
}
}
}
}),new objj_method(sel_getUid("establishConnectionsWithOwner:topLevelObjects:"),function(_2a,_2b,_2c,_2d){
with(_2a){
_replacementObjects[objj_msgSend(_fileOwner,"UID")]=_2c;
var _2e=0,_2f=_connections.length,_30=[],_31=nil;
for(;_2e<_2f;++_2e){
_31=_connections[_2e];
if(objj_msgSend(_31,"isKindOfClass:",CPCibRuntimeAttributesConnector)){
_30.push(_31);
}else{
objj_msgSend(_31,"replaceObjects:",_replacementObjects);
objj_msgSend(_31,"establishConnection");
}
}
_2f=_30.length;
for(_2e=0;_2e<_2f;++_2e){
_31=_30[_2e];
objj_msgSend(_31,"replaceObjects:",_replacementObjects);
objj_msgSend(_31,"establishConnection");
}
}
}),new objj_method(sel_getUid("awakeWithOwner:topLevelObjects:"),function(_32,_33,_34,_35){
with(_32){
var _36=objj_msgSend(_objectsKeys,"count");
while(_36--){
var _37=_objectsKeys[_36],_38=_replacementObjects[objj_msgSend(_37,"UID")];
if(_38){
_37=_38;
}
if(_37!==_34&&objj_msgSend(_37,"respondsToSelector:",sel_getUid("awakeFromCib"))){
objj_msgSend(_37,"awakeFromCib");
}
}
if(objj_msgSend(_34,"respondsToSelector:",sel_getUid("awakeFromCib"))){
objj_msgSend(_34,"awakeFromCib");
}
}
})]);
p;19;_CPCibProxyObject.jt;1009;@STATIC;1.0;I;21;Foundation/CPObject.jt;965;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"_CPCibProxyObject"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_identifier")]);
objj_registerClassPair(_1);
var _3="CPIdentifier";
var _1=objj_getClass("_CPCibProxyObject");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"_CPCibProxyObject\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("_CPCibProxyObject").super_class},"init");
if(_4){
_identifier=objj_msgSend(_6,"decodeObjectForKey:",_3);
}
if(objj_msgSend(_6,"respondsToSelector:",sel_getUid("externalObjectForProxyIdentifier:"))){
return objj_msgSend(_6,"externalObjectForProxyIdentifier:",_identifier);
}
return _4;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_7,_8,_9){
with(_7){
objj_msgSend(_9,"encodeObject:forKey:",_identifier,_3);
}
})]);
p;22;_CPCibWindowTemplate.jt;4470;@STATIC;1.0;I;21;Foundation/CPObject.ji;12;CGGeometry.ji;10;CPWindow.jt;4393;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPWindow.j",YES);
var _1="_CPCibWindowTemplateMinSizeKey",_2="_CPCibWindowTemplateMaxSizeKey",_3="_CPCibWindowTemplateViewClassKey",_4="_CPCibWindowTemplateWindowClassKey",_5="_CPCibWindowTemplateWindowRectKey",_6="_CPCibWindowTempatStyleMaskKey",_7="_CPCibWindowTemplateWindowTitleKey",_8="_CPCibWindowTemplateWindowViewKey",_9="_CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop",_a="_CPCibWindowTemplateWindowIsFullPlatformWindowKey";
var _b=objj_allocateClassPair(CPObject,"_CPCibWindowTemplate"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_viewClass"),new objj_ivar("_windowClass"),new objj_ivar("_windowRect"),new objj_ivar("_windowStyleMask"),new objj_ivar("_windowTitle"),new objj_ivar("_windowView"),new objj_ivar("_windowAutorecalculatesKeyViewLoop"),new objj_ivar("_windowIsFullPlatformWindow")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
_d=objj_msgSendSuper({receiver:_d,super_class:objj_getClass("_CPCibWindowTemplate").super_class},"init");
if(_d){
_windowClass="CPWindow";
_windowRect=CGRectMake(0,0,400,200);
_windowStyleMask=CPTitledWindowMask|CPClosableWindowMask|CPMiniaturizableWindowMask|CPResizableWindowMask;
_windowTitle="Window";
_windowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,400,200));
_windowIsFullPlatformWindow=NO;
}
return _d;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_f,_10,_11){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("_CPCibWindowTemplate").super_class},"init");
if(_f){
if(objj_msgSend(_11,"containsValueForKey:",_1)){
_minSize=objj_msgSend(_11,"decodeSizeForKey:",_1);
}
if(objj_msgSend(_11,"containsValueForKey:",_2)){
_maxSize=objj_msgSend(_11,"decodeSizeForKey:",_2);
}
_viewClass=objj_msgSend(_11,"decodeObjectForKey:",_3);
_windowClass=objj_msgSend(_11,"decodeObjectForKey:",_4);
_windowRect=objj_msgSend(_11,"decodeRectForKey:",_5);
_windowStyleMask=objj_msgSend(_11,"decodeIntForKey:",_6);
_windowTitle=objj_msgSend(_11,"decodeObjectForKey:",_7);
_windowView=objj_msgSend(_11,"decodeObjectForKey:",_8);
_windowAutorecalculatesKeyViewLoop=objj_msgSend(_11,"decodeBoolForKey:",_9);
_windowIsFullPlatformWindow=objj_msgSend(_11,"decodeBoolForKey:",_a);
}
return _f;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_12,_13,_14){
with(_12){
if(_minSize){
objj_msgSend(_14,"encodeSize:forKey:",_minSize,_1);
}
if(_maxSize){
objj_msgSend(_14,"encodeSize:forKey:",_maxSize,_2);
}
objj_msgSend(_14,"encodeObject:forKey:",_viewClass,_3);
objj_msgSend(_14,"encodeObject:forKey:",_windowClass,_4);
objj_msgSend(_14,"encodeRect:forKey:",_windowRect,_5);
objj_msgSend(_14,"encodeInt:forKey:",_windowStyleMask,_6);
objj_msgSend(_14,"encodeObject:forKey:",_windowTitle,_7);
objj_msgSend(_14,"encodeObject:forKey:",_windowView,_8);
if(_windowAutorecalculatesKeyViewLoop){
objj_msgSend(_14,"encodeObject:forKey:",_windowAutorecalculatesKeyViewLoop,_9);
}
if(_windowIsFullPlatformWindow){
objj_msgSend(_14,"encodeObject:forKey:",_windowIsFullPlatformWindow,_a);
}
}
}),new objj_method(sel_getUid("customClassName"),function(_15,_16){
with(_15){
return _windowClass;
}
}),new objj_method(sel_getUid("setCustomClassName:"),function(_17,_18,_19){
with(_17){
_windowClass=_19;
}
}),new objj_method(sel_getUid("windowClass"),function(_1a,_1b){
with(_1a){
return _windowClass;
}
}),new objj_method(sel_getUid("_cibInstantiate"),function(_1c,_1d){
with(_1c){
var _1e=CPClassFromString(objj_msgSend(_1c,"windowClass")),_1f=objj_msgSend(objj_msgSend(_1e,"alloc"),"initWithContentRect:styleMask:",_windowRect,_windowStyleMask);
if(_minSize){
objj_msgSend(_1f,"setMinSize:",_minSize);
}
if(_maxSize){
objj_msgSend(_1f,"setMaxSize:",_maxSize);
}
objj_msgSend(_1f,"setTitle:",_windowTitle);
objj_msgSend(_windowView,"setAutoresizesSubviews:",NO);
objj_msgSend(_1f,"setContentView:",_windowView);
objj_msgSend(_windowView,"setAutoresizesSubviews:",YES);
if(objj_msgSend(_viewClass,"isKindOfClass:",objj_msgSend(CPToolbar,"class"))){
objj_msgSend(_1f,"setToolbar:",_viewClass);
}
objj_msgSend(_1f,"setAutorecalculatesKeyViewLoop:",_windowAutorecalculatesKeyViewLoop);
objj_msgSend(_1f,"setFullBridge:",_windowIsFullPlatformWindow);
return _1f;
}
})]);
p;7;CPCib.jt;5458;@STATIC;1.0;I;21;Foundation/CPObject.jI;28;Foundation/CPURLConnection.jI;25;Foundation/CPURLRequest.ji;20;_CPCibClassSwapper.ji;20;_CPCibCustomObject.ji;22;_CPCibCustomResource.ji;18;_CPCibCustomView.ji;23;_CPCibKeyedUnarchiver.ji;18;_CPCibObjectData.ji;19;_CPCibProxyObject.ji;22;_CPCibWindowTemplate.jt;5148;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPURLConnection.j",NO);
objj_executeFile("Foundation/CPURLRequest.j",NO);
objj_executeFile("_CPCibClassSwapper.j",YES);
objj_executeFile("_CPCibCustomObject.j",YES);
objj_executeFile("_CPCibCustomResource.j",YES);
objj_executeFile("_CPCibCustomView.j",YES);
objj_executeFile("_CPCibKeyedUnarchiver.j",YES);
objj_executeFile("_CPCibObjectData.j",YES);
objj_executeFile("_CPCibProxyObject.j",YES);
objj_executeFile("_CPCibWindowTemplate.j",YES);
CPCibOwner="CPCibOwner";
CPCibTopLevelObjects="CPCibTopLevelObjects";
CPCibReplacementClasses="CPCibReplacementClasses";
CPCibExternalObjects="CPCibExternalObjects";
var _1="CPCibObjectDataKey";
var _2=objj_allocateClassPair(CPObject,"CPCib"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_data"),new objj_ivar("_bundle"),new objj_ivar("_awakenCustomResources"),new objj_ivar("_loadDelegate")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithContentsOfURL:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPCib").super_class},"init");
if(_4){
_data=objj_msgSend(CPURLConnection,"sendSynchronousRequest:returningResponse:",objj_msgSend(CPURLRequest,"requestWithURL:",_6),nil);
_awakenCustomResources=YES;
}
return _4;
}
}),new objj_method(sel_getUid("initWithContentsOfURL:loadDelegate:"),function(_7,_8,_9,_a){
with(_7){
_7=objj_msgSendSuper({receiver:_7,super_class:objj_getClass("CPCib").super_class},"init");
if(_7){
objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",objj_msgSend(CPURLRequest,"requestWithURL:",_9),_7);
_awakenCustomResources=YES;
_loadDelegate=_a;
}
return _7;
}
}),new objj_method(sel_getUid("initWithCibNamed:bundle:"),function(_b,_c,_d,_e){
with(_b){
if(!objj_msgSend(_d,"hasSuffix:",".cib")){
_d=objj_msgSend(_d,"stringByAppendingString:",".cib");
}
_b=objj_msgSend(_b,"initWithContentsOfURL:",objj_msgSend(_e||objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_d));
if(_b){
_bundle=_e;
}
return _b;
}
}),new objj_method(sel_getUid("initWithCibNamed:bundle:loadDelegate:"),function(_f,_10,_11,_12,_13){
with(_f){
if(!objj_msgSend(_11,"hasSuffix:",".cib")){
_11=objj_msgSend(_11,"stringByAppendingString:",".cib");
}
_f=objj_msgSend(_f,"initWithContentsOfURL:loadDelegate:",objj_msgSend(_12||objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_11),_13);
if(_f){
_bundle=_12;
}
return _f;
}
}),new objj_method(sel_getUid("_setAwakenCustomResources:"),function(_14,_15,_16){
with(_14){
_awakenCustomResources=_16;
}
}),new objj_method(sel_getUid("_awakenCustomResources"),function(_17,_18){
with(_17){
return _awakenCustomResources;
}
}),new objj_method(sel_getUid("instantiateCibWithExternalNameTable:"),function(_19,_1a,_1b){
with(_19){
var _1c=_bundle,_1d=objj_msgSend(_1b,"objectForKey:",CPCibOwner);
if(!_1c&&_1d){
_1c=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_1d,"class"));
}
var _1e=objj_msgSend(objj_msgSend(_CPCibKeyedUnarchiver,"alloc"),"initForReadingWithData:bundle:awakenCustomResources:",_data,_1c,_awakenCustomResources),_1f=objj_msgSend(_1b,"objectForKey:",CPCibReplacementClasses);
if(_1f){
var key=nil,_20=objj_msgSend(_1f,"keyEnumerator");
while((key=objj_msgSend(_20,"nextObject"))!==nil){
objj_msgSend(_1e,"setClass:forClassName:",objj_msgSend(_1f,"objectForKey:",key),key);
}
}
objj_msgSend(_1e,"setExternalObjectsForProxyIdentifiers:",objj_msgSend(_1b,"objectForKey:",CPCibExternalObjects));
var _21=objj_msgSend(_1e,"decodeObjectForKey:",_1);
if(!_21||!objj_msgSend(_21,"isKindOfClass:",objj_msgSend(_CPCibObjectData,"class"))){
return NO;
}
var _22=objj_msgSend(_1b,"objectForKey:",CPCibTopLevelObjects);
objj_msgSend(_21,"instantiateWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"establishConnectionsWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"awakeWithOwner:topLevelObjects:",_1d,_22);
objj_msgSend(_21,"displayVisibleWindows");
return YES;
}
}),new objj_method(sel_getUid("instantiateCibWithOwner:topLevelObjects:"),function(_23,_24,_25,_26){
with(_23){
return objj_msgSend(_23,"instantiateCibWithExternalNameTable:",objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_25,CPCibOwner,_26,CPCibTopLevelObjects));
}
})]);
var _2=objj_getClass("CPCib");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPCib\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("connection:didReceiveData:"),function(_27,_28,_29,_2a){
with(_27){
if(!_2a){
return objj_msgSend(_27,"connection:didFailWithError:",_29,nil);
}
_data=objj_msgSend(CPData,"dataWithRawString:",_2a);
}
}),new objj_method(sel_getUid("connection:didFailWithError:"),function(_2b,_2c,_2d,_2e){
with(_2b){
if(objj_msgSend(_loadDelegate,"respondsToSelector:",sel_getUid("cibDidFailToLoad:"))){
objj_msgSend(_loadDelegate,"cibDidFailToLoad:",_2b);
}
_loadDelegate=nil;
}
}),new objj_method(sel_getUid("connectionDidFinishLoading:"),function(_2f,_30,_31){
with(_2f){
if(objj_msgSend(_loadDelegate,"respondsToSelector:",sel_getUid("cibDidFinishLoading:"))){
objj_msgSend(_loadDelegate,"cibDidFinishLoading:",_2f);
}
_loadDelegate=nil;
}
})]);
p;23;CPCibBindingConnector.jt;1347;@STATIC;1.0;i;16;CPCibConnector.jt;1307;
objj_executeFile("CPCibConnector.j",YES);
var _1="CPCibBindingConnectorBindingKey",_2="CPCibBindingConnectorKeyPathKey",_3="CPCibBindingConnectorOptionsKey";
var _4=objj_allocateClassPair(CPCibConnector,"CPCibBindingConnector"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_binding"),new objj_ivar("_keyPath"),new objj_ivar("_options")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
if(_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPCibBindingConnector").super_class},"initWithCoder:",_8)){
_binding=objj_msgSend(_8,"decodeObjectForKey:",_1);
_keyPath=objj_msgSend(_8,"decodeObjectForKey:",_2);
_options=objj_msgSend(_8,"decodeObjectForKey:",_3);
}
return _6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
objj_msgSendSuper({receiver:_9,super_class:objj_getClass("CPCibBindingConnector").super_class},"encodeWithCoder:",_b);
objj_msgSend(_b,"encodeObject:forKey:",_binding,_1);
objj_msgSend(_b,"encodeObject:forKey:",_keyPath,_2);
objj_msgSend(_b,"encodeObject:forKey:",_options,_3);
}
}),new objj_method(sel_getUid("establishConnection"),function(_c,_d){
with(_c){
objj_msgSend(_source,"bind:toObject:withKeyPath:options:",_binding,_destination,_keyPath,_options);
}
})]);
p;16;CPCibConnector.jt;2363;@STATIC;1.0;I;21;Foundation/CPObject.jI;29;Foundation/CPKeyValueCoding.jt;2284;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPKeyValueCoding.j",NO);
var _1="_CPCibConnectorSourceKey",_2="_CPCibConnectorDestinationKey",_3="_CPCibConnectorLabelKey";
var _4=objj_allocateClassPair(CPObject,"CPCibConnector"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_source"),new objj_ivar("_destination"),new objj_ivar("_label")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("source"),function(_6,_7){
with(_6){
return _source;
}
}),new objj_method(sel_getUid("setSource:"),function(_8,_9,_a){
with(_8){
_source=_a;
}
}),new objj_method(sel_getUid("destination"),function(_b,_c){
with(_b){
return _destination;
}
}),new objj_method(sel_getUid("setDestination:"),function(_d,_e,_f){
with(_d){
_destination=_f;
}
}),new objj_method(sel_getUid("label"),function(_10,_11){
with(_10){
return _label;
}
}),new objj_method(sel_getUid("setLabel:"),function(_12,_13,_14){
with(_12){
_label=_14;
}
}),new objj_method(sel_getUid("replaceObject:withObject:"),function(_15,_16,_17,_18){
with(_15){
if(_source===_17){
_source=_18;
}
if(_destination===_17){
_destination=_18;
}
}
}),new objj_method(sel_getUid("replaceObjects:"),function(_19,_1a,_1b){
with(_19){
var _1c=_1b[objj_msgSend(_source,"UID")];
if(_1c!==undefined){
_source=_1c;
}
_1c=_1b[objj_msgSend(_destination,"UID")];
if(_1c!==undefined){
_destination=_1c;
}
}
})]);
var _4=objj_getClass("CPCibConnector");
if(!_4){
throw new SyntaxError("*** Could not find definition for class \"CPCibConnector\"");
}
var _5=_4.isa;
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_1d,_1e,_1f){
with(_1d){
_1d=objj_msgSendSuper({receiver:_1d,super_class:objj_getClass("CPCibConnector").super_class},"init");
if(_1d){
_source=objj_msgSend(_1f,"decodeObjectForKey:",_1);
_destination=objj_msgSend(_1f,"decodeObjectForKey:",_2);
_label=objj_msgSend(_1f,"decodeObjectForKey:",_3);
}
return _1d;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_20,_21,_22){
with(_20){
objj_msgSend(_22,"encodeObject:forKey:",_source,_1);
objj_msgSend(_22,"encodeObject:forKey:",_destination,_2);
objj_msgSend(_22,"encodeObject:forKey:",_label,_3);
}
})]);
var _4=objj_allocateClassPair(CPCibConnector,"_CPCibConnector"),_5=_4.isa;
objj_registerClassPair(_4);
p;23;CPCibControlConnector.jt;1526;@STATIC;1.0;i;16;CPCibConnector.jt;1486;
objj_executeFile("CPCibConnector.j",YES);
var _1=objj_allocateClassPair(CPCibConnector,"CPCibControlConnector"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("establishConnection"),function(_3,_4){
with(_3){
var _5=_label,_6=objj_msgSend(_5,"length");
if(_6&&_5.charAt(_6-1)!==":"){
_5+=":";
}
var _7=CPSelectorFromString(_5);
if(!_7){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] selector "+_5+" does not exist.");
}
if(_destination&&!objj_msgSend(_destination,"respondsToSelector:",_7)){
CPLog.warn("Could not connect the action "+_7+" to target of class "+objj_msgSend(_destination,"className"));
}
if(objj_msgSend(_source,"respondsToSelector:",sel_getUid("setAction:"))){
objj_msgSend(_source,sel_getUid("setAction:"),_7);
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] "+objj_msgSend(_source,"description")+" does not respond to setAction:");
}
if(objj_msgSend(_source,"respondsToSelector:",sel_getUid("setTarget:"))){
objj_msgSend(_source,sel_getUid("setTarget:"),_destination);
}else{
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"-["+objj_msgSend(_3,"className")+" "+_4+"] "+objj_msgSend(_source,"description")+" does not respond to setTarget:");
}
}
})]);
var _1=objj_allocateClassPair(CPCibControlConnector,"_CPCibControlConnector"),_2=_1.isa;
objj_registerClassPair(_1);
p;20;CPCibHelpConnector.jt;1220;@STATIC;1.0;i;16;CPCibConnector.jt;1180;
objj_executeFile("CPCibConnector.j",YES);
var _1=objj_allocateClassPair(CPCibConnector,"CPCibHelpConnector"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_destination"),new objj_ivar("_file"),new objj_ivar("_marker")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_3,_4,_5){
with(_3){
if(_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPCibHelpConnector").super_class},"initWithCoder:",_5)){
_destination=objj_msgSend(_5,"decodeObjectForKey:","_destination");
_file=objj_msgSend(_5,"decodeObjectForKey:","_file");
_marker=objj_msgSend(_5,"decodeObjectForKey:","_marker");
}
return _3;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_6,_7,_8){
with(_6){
objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPCibHelpConnector").super_class},"encodeWithCoder:",_8);
objj_msgSend(_8,"encodeObject:forKey:",_destination,"_destination");
objj_msgSend(_8,"encodeObject:forKey:",_file,"_file");
objj_msgSend(_8,"encodeObject:forKey:",_marker,"_marker");
}
}),new objj_method(sel_getUid("establishConnection"),function(_9,_a){
with(_9){
objj_msgSend(_destination,"setToolTip:",_marker);
}
})]);
p;14;CPCibLoading.jt;3586;@STATIC;1.0;I;21;Foundation/CPBundle.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;3485;
objj_executeFile("Foundation/CPBundle.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1="CPCibOwner";
var _2=objj_getClass("CPObject");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("awakeFromCib"),function(_4,_5){
with(_4){
}
})]);
var _2=objj_getClass("CPBundle");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPBundle\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("loadCibFile:externalNameTable:"),function(_6,_7,_8,_9){
with(_6){
return objj_msgSend(objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:",_8),"instantiateCibWithExternalNameTable:",_9);
}
}),new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"),function(_a,_b,_c,_d,_e){
with(_a){
return (objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithCibNamed:bundle:loadDelegate:",_c,_a,objj_msgSend(objj_msgSend(_CPCibLoadDelegate,"alloc"),"initWithLoadDelegate:externalNameTable:",_e,_d)));
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("loadCibFile:externalNameTable:"),function(_f,_10,_11,_12){
with(_f){
return objj_msgSend(objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:",_11),"instantiateCibWithExternalNameTable:",_12);
}
}),new objj_method(sel_getUid("loadCibNamed:owner:"),function(_13,_14,_15,_16){
with(_13){
if(!objj_msgSend(_15,"hasSuffix:",".cib")){
_15=objj_msgSend(_15,"stringByAppendingString:",".cib");
}
var _17=_16?objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_16,"class")):objj_msgSend(CPBundle,"mainBundle"),_18=objj_msgSend(_17,"pathForResource:",_15);
return objj_msgSend(_13,"loadCibFile:externalNameTable:",_18,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_16,_1));
}
}),new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"),function(_19,_1a,_1b,_1c,_1d){
with(_19){
return (objj_msgSend(objj_msgSend(CPCib,"alloc"),"initWithContentsOfURL:loadDelegate:",_1b,objj_msgSend(objj_msgSend(_CPCibLoadDelegate,"alloc"),"initWithLoadDelegate:externalNameTable:",_1d,_1c)));
}
}),new objj_method(sel_getUid("loadCibNamed:owner:loadDelegate:"),function(_1e,_1f,_20,_21,_22){
with(_1e){
if(!objj_msgSend(_20,"hasSuffix:",".cib")){
_20=objj_msgSend(_20,"stringByAppendingString:",".cib");
}
var _23=_21?objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_21,"class")):objj_msgSend(CPBundle,"mainBundle"),_24=objj_msgSend(_23,"pathForResource:",_20);
return objj_msgSend(_1e,"loadCibFile:externalNameTable:loadDelegate:",_24,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_21,_1),_22);
}
})]);
var _2=objj_allocateClassPair(CPObject,"_CPCibLoadDelegate"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_loadDelegate"),new objj_ivar("_externalNameTable")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithLoadDelegate:externalNameTable:"),function(_25,_26,_27,_28){
with(_25){
_25=objj_msgSend(_25,"init");
if(_25){
_loadDelegate=_27;
_externalNameTable=_28;
}
return _25;
}
}),new objj_method(sel_getUid("cibDidFinishLoading:"),function(_29,_2a,_2b){
with(_29){
objj_msgSend(_2b,"instantiateCibWithExternalNameTable:",_externalNameTable);
objj_msgSend(_loadDelegate,"cibDidFinishLoading:",_2b);
}
}),new objj_method(sel_getUid("cibDidFailToLoad:"),function(_2c,_2d,_2e){
with(_2c){
objj_msgSend(_loadDelegate,"cibDidFailToLoad:",_2e);
}
})]);
p;22;CPCibOutletConnector.jt;703;@STATIC;1.0;i;16;CPCibConnector.jt;664;
objj_executeFile("CPCibConnector.j",YES);
var _1=objj_allocateClassPair(CPCibConnector,"CPCibOutletConnector"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("establishConnection"),function(_3,_4){
with(_3){
try{
objj_msgSend(_source,"setValue:forKey:",_destination,_label);
}
catch(anException){
if(objj_msgSend(anException,"name")===CPUndefinedKeyException){
CPLog.warn("Could not connect the outlet "+_label+" of target of class "+objj_msgSend(_source,"className"));
}else{
throw anException;
}
}
}
})]);
var _1=objj_allocateClassPair(CPCibOutletConnector,"_CPCibOutletConnector"),_2=_1.isa;
objj_registerClassPair(_1);
p;33;CPCibRuntimeAttributesConnector.jt;1405;@STATIC;1.0;i;16;CPCibConnector.jt;1365;
objj_executeFile("CPCibConnector.j",YES);
var _1="CPCibRuntimeAttributesConnectorObjectKey",_2="CPCibRuntimeAttributesConnectorKeyPathsKey",_3="CPCibRuntimeAttributesConnectorValuesKey";
var _4=objj_allocateClassPair(CPCibConnector,"CPCibRuntimeAttributesConnector"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_keyPaths"),new objj_ivar("_values")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithCoder:"),function(_6,_7,_8){
with(_6){
if(_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPCibRuntimeAttributesConnector").super_class},"initWithCoder:",_8)){
_source=objj_msgSend(_8,"decodeObjectForKey:",_1);
_keyPaths=objj_msgSend(_8,"decodeObjectForKey:",_2);
_values=objj_msgSend(_8,"decodeObjectForKey:",_3);
}
return _6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_9,_a,_b){
with(_9){
objj_msgSendSuper({receiver:_9,super_class:objj_getClass("CPCibRuntimeAttributesConnector").super_class},"encodeWithCoder:",_b);
objj_msgSend(_b,"encodeObject:forKey:",_source,_1);
objj_msgSend(_b,"encodeObject:forKey:",_keyPaths,_2);
objj_msgSend(_b,"encodeObject:forKey:",_values,_3);
}
}),new objj_method(sel_getUid("establishConnection"),function(_c,_d){
with(_c){
var _e=objj_msgSend(_keyPaths,"count");
while(_e--){
objj_msgSend(_source,"setValue:forKeyPath:",_values[_e],_keyPaths[_e]);
}
}
})]);
p;13;CAAnimation.jt;3814;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;23;CAMediaTimingFunction.jt;3715;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CAMediaTimingFunction.j",YES);
var _1=objj_allocateClassPair(CPObject,"CAAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_isRemovedOnCompletion"),new objj_ivar("_delegate")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("init"),function(_3,_4){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CAAnimation").super_class},"init");
if(_3){
_isRemovedOnCompletion=YES;
}
return _3;
}
}),new objj_method(sel_getUid("shouldArchiveValueForKey:"),function(_5,_6,_7){
with(_5){
return YES;
}
}),new objj_method(sel_getUid("setRemovedOnCompletion:"),function(_8,_9,_a){
with(_8){
_isRemovedOnCompletion=_a;
}
}),new objj_method(sel_getUid("removedOnCompletion"),function(_b,_c){
with(_b){
return _isRemovedOnCompletion;
}
}),new objj_method(sel_getUid("isRemovedOnCompletion"),function(_d,_e){
with(_d){
return _isRemovedOnCompletion;
}
}),new objj_method(sel_getUid("timingFunction"),function(_f,_10){
with(_f){
return nil;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_11,_12,_13){
with(_11){
_delegate=_13;
}
}),new objj_method(sel_getUid("delegate"),function(_14,_15){
with(_14){
return _delegate;
}
}),new objj_method(sel_getUid("runActionForKey:object:arguments:"),function(_16,_17,_18,_19,_1a){
with(_16){
objj_msgSend(_19,"addAnimation:forKey:",_16,_18);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("animation"),function(_1b,_1c){
with(_1b){
return objj_msgSend(objj_msgSend(_1b,"alloc"),"init");
}
}),new objj_method(sel_getUid("defaultValueForKey:"),function(_1d,_1e,_1f){
with(_1d){
return nil;
}
})]);
var _1=objj_allocateClassPair(CAAnimation,"CAPropertyAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_keyPath"),new objj_ivar("_isCumulative"),new objj_ivar("_isAdditive")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setKeyPath:"),function(_20,_21,_22){
with(_20){
_keyPath=_22;
}
}),new objj_method(sel_getUid("keyPath"),function(_23,_24){
with(_23){
return _keyPath;
}
}),new objj_method(sel_getUid("setCumulative:"),function(_25,_26,_27){
with(_25){
_isCumulative=_27;
}
}),new objj_method(sel_getUid("cumulative"),function(_28,_29){
with(_28){
return _isCumulative;
}
}),new objj_method(sel_getUid("isCumulative"),function(_2a,_2b){
with(_2a){
return _isCumulative;
}
}),new objj_method(sel_getUid("setAdditive:"),function(_2c,_2d,_2e){
with(_2c){
_isAdditive=_2e;
}
}),new objj_method(sel_getUid("additive"),function(_2f,_30){
with(_2f){
return _isAdditive;
}
}),new objj_method(sel_getUid("isAdditive"),function(_31,_32){
with(_31){
return _isAdditive;
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("animationWithKeyPath:"),function(_33,_34,_35){
with(_33){
var _36=objj_msgSend(_33,"animation");
objj_msgSend(_36,"setKeyPath:",_35);
return _36;
}
})]);
var _1=objj_allocateClassPair(CAPropertyAnimation,"CABasicAnimation"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_fromValue"),new objj_ivar("_toValue"),new objj_ivar("_byValue")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setFromValue:"),function(_37,_38,_39){
with(_37){
_fromValue=_39;
}
}),new objj_method(sel_getUid("fromValue"),function(_3a,_3b){
with(_3a){
return _fromValue;
}
}),new objj_method(sel_getUid("setToValue:"),function(_3c,_3d,_3e){
with(_3c){
_toValue=_3e;
}
}),new objj_method(sel_getUid("toValue"),function(_3f,_40){
with(_3f){
return _toValue;
}
}),new objj_method(sel_getUid("setByValue:"),function(_41,_42,_43){
with(_41){
_byValue=_43;
}
}),new objj_method(sel_getUid("byValue"),function(_44,_45){
with(_44){
return _byValue;
}
})]);
p;16;CABackingStore.jt;737;@STATIC;1.0;i;12;CGGeometry.ji;17;CPCompatibility.jt;680;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPCompatibility.j",YES);
CABackingStoreGetContext=function(_1){
return _1.context;
};
if(CPFeatureIsCompatible(CPHTMLCanvasFeature)){
CABackingStoreCreate=function(){
var _2=document.createElement("canvas");
_2.style.position="absolute";
return {context:_2.getContext("2d"),buffer:_2,_image:_2};
};
CABackingStoreSetSize=function(_3,_4){
var _5=_3.buffer;
_5.width=_4.width;
_5.height=_4.height;
_5.style.width=_4.width+"px";
_5.style.height=_4.height+"px";
};
}else{
CABackingStoreCreate=function(){
var _6=CGBitmapGraphicsContextCreate();
_6.buffer="";
return {context:_6};
};
CABackingStoreSetSize=function(_7,_8){
};
}
p;14;CAFlashLayer.jt;851;@STATIC;1.0;i;9;CALayer.ji;14;CPFlashMovie.jt;801;
objj_executeFile("CALayer.j",YES);
objj_executeFile("CPFlashMovie.j",YES);
var _1=objj_allocateClassPair(CALayer,"CAFlashLayer"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_flashMovie")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setFlashMovie:"),function(_3,_4,_5){
with(_3){
if(_flashMovie==_5){
return;
}
_flashMovie=_5;
_DOMElement.innerHTML="<object width = \"100%\" height = \"100%\"><param name = \"movie\" value = \""+_5._fileName+"\"></param><param name = \"wmode\" value = \"transparent\"></param><embed src = \""+_5._fileName+"\" type = \"application/x-shockwave-flash\" wmode = \"transparent\" width = \"100%\" height = \"100%\"></embed></object>";
}
}),new objj_method(sel_getUid("flashMovie"),function(_6,_7){
with(_6){
return _flashMovie;
}
})]);
p;9;CALayer.jt;21785;@STATIC;1.0;I;21;Foundation/CPObject.ji;16;CABackingStore.ji;11;CGContext.ji;12;CGGeometry.jt;21685;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("CABackingStore.j",YES);
objj_executeFile("CGContext.j",YES);
objj_executeFile("CGGeometry.j",YES);
var _1=1,_2=2,_3=4,_4=8,_5=16;
var _6=NO;
var _7=1,_8=2,_9=4,_a=8,_b=16,_c=_9|_7|_8;
var _d=nil;
var _e=objj_allocateClassPair(CPObject,"CALayer"),_f=_e.isa;
class_addIvars(_e,[new objj_ivar("_frame"),new objj_ivar("_bounds"),new objj_ivar("_position"),new objj_ivar("_zPosition"),new objj_ivar("_anchorPoint"),new objj_ivar("_affineTransform"),new objj_ivar("_sublayerTransform"),new objj_ivar("_sublayerTransformForSublayers"),new objj_ivar("_backingStoreFrame"),new objj_ivar("_standardBackingStoreFrame"),new objj_ivar("_hasSublayerTransform"),new objj_ivar("_hasCustomBackingStoreFrame"),new objj_ivar("_opacity"),new objj_ivar("_isHidden"),new objj_ivar("_backgroundColor"),new objj_ivar("_superlayer"),new objj_ivar("_sublayers"),new objj_ivar("_runLoopUpdateMask"),new objj_ivar("_needsDisplayOnBoundsChange"),new objj_ivar("_delegate"),new objj_ivar("_delegateRespondsToDisplayLayerSelector"),new objj_ivar("_delegateRespondsToDrawLayerInContextSelector"),new objj_ivar("_DOMElement"),new objj_ivar("_DOMContentsElement"),new objj_ivar("_contents"),new objj_ivar("_context"),new objj_ivar("_owningView"),new objj_ivar("_transformToLayer"),new objj_ivar("_transformFromLayer")]);
objj_registerClassPair(_e);
class_addMethods(_e,[new objj_method(sel_getUid("init"),function(_10,_11){
with(_10){
_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CALayer").super_class},"init");
if(_10){
_frame=CGRectMakeZero();
_backingStoreFrame=CGRectMakeZero();
_standardBackingStoreFrame=CGRectMakeZero();
_bounds=CGRectMakeZero();
_position=CGPointMakeZero();
_zPosition=0;
_anchorPoint=CGPointMake(0.5,0.5);
_affineTransform=CGAffineTransformMakeIdentity();
_sublayerTransform=CGAffineTransformMakeIdentity();
_transformToLayer=CGAffineTransformMakeIdentity();
_transformFromLayer=CGAffineTransformMakeIdentity();
_opacity=1;
_isHidden=NO;
_masksToBounds=NO;
_sublayers=[];
_DOMElement=document.createElement("div");
_DOMElement.style.overflow="visible";
_DOMElement.style.position="absolute";
_DOMElement.style.visibility="visible";
_DOMElement.style.top="0px";
_DOMElement.style.left="0px";
_DOMElement.style.zIndex=0;
_DOMElement.style.width="0px";
_DOMElement.style.height="0px";
}
return _10;
}
}),new objj_method(sel_getUid("setBounds:"),function(_12,_13,_14){
with(_12){
if(CGRectEqualToRect(_bounds,_14)){
return;
}
var _15=_bounds.origin;
_bounds={origin:{x:_14.origin.x,y:_14.origin.y},size:{width:_14.size.width,height:_14.size.height}};
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_12);
}
_CALayerRecalculateGeometry(_12,_1);
}
}),new objj_method(sel_getUid("bounds"),function(_16,_17){
with(_16){
return _bounds;
}
}),new objj_method(sel_getUid("setPosition:"),function(_18,_19,_1a){
with(_18){
if(CGPointEqualToPoint(_position,_1a)){
return;
}
_position={x:_1a.x,y:_1a.y};
_CALayerRecalculateGeometry(_18,_2);
}
}),new objj_method(sel_getUid("position"),function(_1b,_1c){
with(_1b){
return _position;
}
}),new objj_method(sel_getUid("setZPosition:"),function(_1d,_1e,_1f){
with(_1d){
if(_zPosition==_1f){
return;
}
_zPosition=_1f;
objj_msgSend(_1d,"registerRunLoopUpdateWithMask:",_9);
}
}),new objj_method(sel_getUid("setAnchorPoint:"),function(_20,_21,_22){
with(_20){
_22={x:_22.x,y:_22.y};
_22.x=MIN(1,MAX(0,_22.x));
_22.y=MIN(1,MAX(0,_22.y));
if(CGPointEqualToPoint(_anchorPoint,_22)){
return;
}
_anchorPoint=_22;
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_20);
}
if(_owningView){
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
}
_CALayerRecalculateGeometry(_20,_3);
}
}),new objj_method(sel_getUid("anchorPoint"),function(_23,_24){
with(_23){
return _anchorPoint;
}
}),new objj_method(sel_getUid("setAffineTransform:"),function(_25,_26,_27){
with(_25){
if(CGAffineTransformEqualToTransform(_affineTransform,_27)){
return;
}
_affineTransform={a:_27.a,b:_27.b,c:_27.c,d:_27.d,tx:_27.tx,ty:_27.ty};
_CALayerRecalculateGeometry(_25,_4);
}
}),new objj_method(sel_getUid("affineTransform"),function(_28,_29){
with(_28){
return _affineTransform;
}
}),new objj_method(sel_getUid("setSublayerTransform:"),function(_2a,_2b,_2c){
with(_2a){
if(CGAffineTransformEqualToTransform(_sublayerTransform,_2c)){
return;
}
var _2d=_hasSublayerTransform;
_sublayerTransform={a:_2c.a,b:_2c.b,c:_2c.c,d:_2c.d,tx:_2c.tx,ty:_2c.ty};
_hasSublayerTransform=!(_sublayerTransform.a==1&&_sublayerTransform.b==0&&_sublayerTransform.c==0&&_sublayerTransform.d==1&&_sublayerTransform.tx==0&&_sublayerTransform.ty==0);
if(_hasSublayerTransform){
_CALayerUpdateSublayerTransformForSublayers(_2a);
var _2e=_sublayers.length;
while(_2e--){
_CALayerRecalculateGeometry(_sublayers[_2e],_5);
}
}
}
}),new objj_method(sel_getUid("sublayerTransform"),function(_2f,_30){
with(_2f){
return _sublayerTransform;
}
}),new objj_method(sel_getUid("transformToLayer"),function(_31,_32){
with(_31){
return _transformToLayer;
}
}),new objj_method(sel_getUid("setFrame:"),function(_33,_34,_35){
with(_33){
alert("FIXME IMPLEMENT");
}
}),new objj_method(sel_getUid("frame"),function(_36,_37){
with(_36){
if(!_frame){
_frame=objj_msgSend(_36,"convertRect:toLayer:",_bounds,_superlayer);
}
return _frame;
}
}),new objj_method(sel_getUid("backingStoreFrame"),function(_38,_39){
with(_38){
return _backingStoreFrame;
}
}),new objj_method(sel_getUid("setBackingStoreFrame:"),function(_3a,_3b,_3c){
with(_3a){
_hasCustomBackingStoreFrame=(_3c!=nil);
if(_3c==nil){
_3c=CGRectMakeCopy(_standardBackingStoreFrame);
}else{
if(_superlayer){
_3c=objj_msgSend(_superlayer,"convertRect:toLayer:",_3c,nil);
var _3d=objj_msgSend(_superlayer,"bounds"),_3e=objj_msgSend(_superlayer,"convertRect:toLayer:",_3d,nil);
_3c.origin.x-=(_3e.origin.x);
_3c.origin.y-=(_3e.origin.y);
}else{
_3c=CGRectMakeCopy(_3c);
}
}
if(!CGPointEqualToPoint(_backingStoreFrame.origin,_3c.origin)){
objj_msgSend(_3a,"registerRunLoopUpdateWithMask:",_7);
}
if(!CGSizeEqualToSize(_backingStoreFrame.size,_3c.size)){
objj_msgSend(_3a,"registerRunLoopUpdateWithMask:",_8);
}
_backingStoreFrame=_3c;
}
}),new objj_method(sel_getUid("contents"),function(_3f,_40){
with(_3f){
return _contents;
}
}),new objj_method(sel_getUid("setContents:"),function(_41,_42,_43){
with(_41){
if(_contents==_43){
return;
}
_contents=_43;
objj_msgSend(_41,"composite");
}
}),new objj_method(sel_getUid("composite"),function(_44,_45){
with(_44){
if(_6&&!_contents||!_context){
return;
}
CGContextClearRect(_context,{origin:{x:0,y:0},size:{width:(_backingStoreFrame.size.width),height:(_backingStoreFrame.size.height)}});
var _46;
if(_superlayer){
var _47=_CALayerGetTransform(_superlayer,nil),_48=CGPointApplyAffineTransform(_superlayer._bounds.origin,_47);
_46=CGAffineTransformConcat(_transformFromLayer,_47);
_46.tx-=_48.x;
_46.ty-=_48.y;
}else{
_46=CGAffineTransformCreateCopy(_transformFromLayer);
}
_46.tx-=(_backingStoreFrame.origin.x);
_46.ty-=(_backingStoreFrame.origin.y);
CGContextSaveGState(_context);
CGContextConcatCTM(_context,_46);
if(_6){
_context.drawImage(_contents.buffer,(_bounds.origin.x),(_bounds.origin.y));
}else{
objj_msgSend(_44,"drawInContext:",_context);
}
CGContextRestoreGState(_context);
}
}),new objj_method(sel_getUid("display"),function(_49,_4a){
with(_49){
if(!_context){
_context=CGBitmapGraphicsContextCreate();
_DOMContentsElement=_context.DOMElement;
_DOMContentsElement.style.zIndex=-100;
_DOMContentsElement.style.overflow="hidden";
_DOMContentsElement.style.position="absolute";
_DOMContentsElement.style.visibility="visible";
_DOMContentsElement.width=ROUND((_backingStoreFrame.size.width));
_DOMContentsElement.height=ROUND((_backingStoreFrame.size.height));
_DOMContentsElement.style.top="0px";
_DOMContentsElement.style.left="0px";
_DOMContentsElement.style.width=ROUND((_backingStoreFrame.size.width))+"px";
_DOMContentsElement.style.height=ROUND((_backingStoreFrame.size.height))+"px";
_DOMElement.appendChild(_DOMContentsElement);
}
if(_6){
if(_delegateRespondsToDisplayLayerSelector){
return objj_msgSend(_delegate,"displayInLayer:",_49);
}
if((_backingStoreFrame.size.width)==0||(_backingStoreFrame.size.height)==0){
return;
}
if(!_contents){
_contents=CABackingStoreCreate();
}
CABackingStoreSetSize(_contents,_bounds.size);
objj_msgSend(_49,"drawInContext:",CABackingStoreGetContext(_contents));
}
objj_msgSend(_49,"composite");
}
}),new objj_method(sel_getUid("drawInContext:"),function(_4b,_4c,_4d){
with(_4b){
if(_backgroundColor){
CGContextSetFillColor(_4d,_backgroundColor);
CGContextFillRect(_4d,_bounds);
}
if(_delegateRespondsToDrawLayerInContextSelector){
objj_msgSend(_delegate,"drawLayer:inContext:",_4b,_4d);
}
}
}),new objj_method(sel_getUid("opacity"),function(_4e,_4f){
with(_4e){
return _opacity;
}
}),new objj_method(sel_getUid("setOpacity:"),function(_50,_51,_52){
with(_50){
if(_opacity==_52){
return;
}
_opacity=_52;
_DOMElement.style.opacity=_52;
_DOMElement.style.filter="alpha(opacity="+_52*100+")";
}
}),new objj_method(sel_getUid("setHidden:"),function(_53,_54,_55){
with(_53){
_isHidden=_55;
_DOMElement.style.display=_55?"none":"block";
}
}),new objj_method(sel_getUid("hidden"),function(_56,_57){
with(_56){
return _isHidden;
}
}),new objj_method(sel_getUid("isHidden"),function(_58,_59){
with(_58){
return _isHidden;
}
}),new objj_method(sel_getUid("setMasksToBounds:"),function(_5a,_5b,_5c){
with(_5a){
if(_masksToBounds==_5c){
return;
}
_masksToBounds=_5c;
_DOMElement.style.overflow=_masksToBounds?"hidden":"visible";
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_5d,_5e,_5f){
with(_5d){
_backgroundColor=_5f;
objj_msgSend(_5d,"setNeedsDisplay");
}
}),new objj_method(sel_getUid("backgroundColor"),function(_60,_61){
with(_60){
return _backgroundColor;
}
}),new objj_method(sel_getUid("sublayers"),function(_62,_63){
with(_62){
return _sublayers;
}
}),new objj_method(sel_getUid("superlayer"),function(_64,_65){
with(_64){
return _superlayer;
}
}),new objj_method(sel_getUid("addSublayer:"),function(_66,_67,_68){
with(_66){
objj_msgSend(_66,"insertSublayer:atIndex:",_68,_sublayers.length);
return;
if(_DOMContentsElement&&_68._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"addObject:",_68);
_DOMElement.appendChild(_68._DOMElement);
}
}),new objj_method(sel_getUid("removeFromSuperlayer"),function(_69,_6a){
with(_69){
if(_owningView){
objj_msgSend(_owningView,"setLayer:",nil);
}
if(!_superlayer){
return;
}
_superlayer._DOMElement.removeChild(_DOMElement);
objj_msgSend(_superlayer._sublayers,"removeObject:",_69);
_superlayer=nil;
}
}),new objj_method(sel_getUid("insertSublayer:atIndex:"),function(_6b,_6c,_6d,_6e){
with(_6b){
if(!_6d){
return;
}
var _6f=objj_msgSend(_6d,"superlayer");
if(_6f==_6b){
var _70=objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_6d);
if(_70==_6e){
return;
}
objj_msgSend(_sublayers,"removeObjectAtIndex:",_70);
if(_70<_6e){
--_6e;
}
}else{
if(_6f!=nil){
objj_msgSend(_6d,"removeFromSuperlayer");
}
}
if(_DOMContentsElement&&_6d._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"insertObject:atIndex:",_6d,_6e);
if(_6e>=_sublayers.length-1){
_DOMElement.appendChild(_6d._DOMElement);
}else{
_DOMElement.insertBefore(_6d._DOMElement,_sublayers[_6e+1]._DOMElement);
}
_6d._superlayer=_6b;
if(_6b!=_6f){
_CALayerRecalculateGeometry(_6d,268435455);
}
}
}),new objj_method(sel_getUid("insertSublayer:below:"),function(_71,_72,_73,_74){
with(_71){
var _75=_74?objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_74):0;
objj_msgSend(_71,"insertSublayer:atIndex:",_73,_75==CPNotFound?_sublayers.length:_75);
}
}),new objj_method(sel_getUid("insertSublayer:above:"),function(_76,_77,_78,_79){
with(_76){
var _7a=_79?objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_79):_sublayers.length;
if(_7a==CPNotFound){
objj_msgSend(CPException,"raise:reason:","CALayerNotFoundException","aSublayer is not a sublayer of this layer");
}
objj_msgSend(_sublayers,"insertObject:atIndex:",_78,_7a==CPNotFound?_sublayers.length:_7a+1);
}
}),new objj_method(sel_getUid("replaceSublayer:with:"),function(_7b,_7c,_7d,_7e){
with(_7b){
if(_7d==_7e){
return;
}
if(_7d._superlayer!=_7b){
alert("EXCEPTION");
return;
}
if(_DOMContentsElement&&_7e._zPosition>_DOMContentsElement.style.zIndex){
_DOMContentsElement.style.zIndex-=100;
}
objj_msgSend(_sublayers,"replaceObjectAtIndex:withObject:",objj_msgSend(_sublayers,"indexOfObjectIdenticalTo:",_7d),_7e);
_DOMElement.replaceChild(_7d._DOMElement,_7e._DOMElement);
}
}),new objj_method(sel_getUid("registerRunLoopUpdateWithMask:"),function(_7f,_80,_81){
with(_7f){
if(_d==nil){
_d={};
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("runLoopUpdateLayers"),CALayer,nil,0,[CPDefaultRunLoopMode]);
}
_runLoopUpdateMask|=_81;
_d[objj_msgSend(_7f,"UID")]=_7f;
}
}),new objj_method(sel_getUid("setNeedsComposite"),function(_82,_83){
with(_82){
objj_msgSend(_82,"registerRunLoopUpdateWithMask:",_b);
}
}),new objj_method(sel_getUid("setNeedsDisplay"),function(_84,_85){
with(_84){
objj_msgSend(_84,"registerRunLoopUpdateWithMask:",_a);
}
}),new objj_method(sel_getUid("setNeedsDisplayOnBoundsChange:"),function(_86,_87,_88){
with(_86){
_needsDisplayOnBoundsChange=_88;
}
}),new objj_method(sel_getUid("needsDisplayOnBoundsChange"),function(_89,_8a){
with(_89){
return _needsDisplayOnBoundsChange;
}
}),new objj_method(sel_getUid("setNeedsDisplayInRect:"),function(_8b,_8c,_8d){
with(_8b){
_dirtyRect=_8d;
objj_msgSend(_8b,"display");
}
}),new objj_method(sel_getUid("convertPoint:fromLayer:"),function(_8e,_8f,_90,_91){
with(_8e){
return CGPointApplyAffineTransform(_90,_CALayerGetTransform(_91,_8e));
}
}),new objj_method(sel_getUid("convertPoint:toLayer:"),function(_92,_93,_94,_95){
with(_92){
return CGPointApplyAffineTransform(_94,_CALayerGetTransform(_92,_95));
}
}),new objj_method(sel_getUid("convertRect:fromLayer:"),function(_96,_97,_98,_99){
with(_96){
return CGRectApplyAffineTransform(_98,_CALayerGetTransform(_99,_96));
}
}),new objj_method(sel_getUid("convertRect:toLayer:"),function(_9a,_9b,_9c,_9d){
with(_9a){
return CGRectApplyAffineTransform(_9c,_CALayerGetTransform(_9a,_9d));
}
}),new objj_method(sel_getUid("containsPoint:"),function(_9e,_9f,_a0){
with(_9e){
return (_a0.x>=(_bounds.origin.x)&&_a0.y>=(_bounds.origin.y)&&_a0.x<(_bounds.origin.x+_bounds.size.width)&&_a0.y<(_bounds.origin.y+_bounds.size.height));
}
}),new objj_method(sel_getUid("hitTest:"),function(_a1,_a2,_a3){
with(_a1){
if(_isHidden){
return nil;
}
var _a4=CGPointApplyAffineTransform(_a3,_transformToLayer);
if(!(_a4.x>=(_bounds.origin.x)&&_a4.y>=(_bounds.origin.y)&&_a4.x<(_bounds.origin.x+_bounds.size.width)&&_a4.y<(_bounds.origin.y+_bounds.size.height))){
return nil;
}
var _a5=nil,_a6=_sublayers.length;
while(_a6--){
if(_a5=objj_msgSend(_sublayers[_a6],"hitTest:",_a4)){
return _a5;
}
}
return _a1;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_a7,_a8,_a9){
with(_a7){
if(_delegate==_a9){
return;
}
_delegate=_a9;
_delegateRespondsToDisplayLayerSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("displayLayer:"));
_delegateRespondsToDrawLayerInContextSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("drawLayer:inContext:"));
if(_delegateRespondsToDisplayLayerSelector||_delegateRespondsToDrawLayerInContextSelector){
objj_msgSend(_a7,"setNeedsDisplay");
}
}
}),new objj_method(sel_getUid("delegate"),function(_aa,_ab){
with(_aa){
return _delegate;
}
}),new objj_method(sel_getUid("_setOwningView:"),function(_ac,_ad,_ae){
with(_ac){
_owningView=_ae;
if(_owningView){
_owningView=_ae;
_bounds.size=CGSizeMakeCopy(objj_msgSend(_owningView,"bounds").size);
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
}
_CALayerRecalculateGeometry(_ac,_2|_1);
}
}),new objj_method(sel_getUid("_owningViewBoundsChanged"),function(_af,_b0){
with(_af){
_bounds.size=CGSizeMakeCopy(objj_msgSend(_owningView,"bounds").size);
_position=CGPointMake((_bounds.size.width)*_anchorPoint.x,(_bounds.size.height)*_anchorPoint.y);
_CALayerRecalculateGeometry(_af,_2|_1);
}
}),new objj_method(sel_getUid("_update"),function(_b1,_b2){
with(_b1){
window.loop=true;
var _b3=_runLoopUpdateMask;
if(_b3&_c){
_CALayerUpdateDOM(_b1,_b3);
}
if(_b3&_a){
objj_msgSend(_b1,"display");
}else{
if(_b3&_8||_b3&_b){
objj_msgSend(_b1,"composite");
}
}
_runLoopUpdateMask=0;
window.loop=false;
}
})]);
class_addMethods(_f,[new objj_method(sel_getUid("layer"),function(_b4,_b5){
with(_b4){
return objj_msgSend(objj_msgSend(objj_msgSend(_b4,"class"),"alloc"),"init");
}
}),new objj_method(sel_getUid("runLoopUpdateLayers"),function(_b6,_b7){
with(_b6){
for(UID in _d){
var _b8=_d[UID],_b9=_b8._runLoopUpdateMask;
if(_b9&_c){
_CALayerUpdateDOM(_b8,_b9);
}
if(_b9&_a){
objj_msgSend(_b8,"display");
}else{
if(_b9&_8||_b9&_b){
objj_msgSend(_b8,"composite");
}
}
_b8._runLoopUpdateMask=0;
}
window.loop=false;
_d=nil;
}
})]);
_CALayerUpdateSublayerTransformForSublayers=function(_ba){
var _bb=_ba._bounds,_bc=_ba._anchorPoint,_bd=(_bb.size.width)*_bc.x,_be=(_bb.size.height)*_bc.y;
_ba._sublayerTransformForSublayers=CGAffineTransformConcat(CGAffineTransformMakeTranslation(-_bd,-_be),CGAffineTransformConcat(_ba._sublayerTransform,CGAffineTransformMakeTranslation(_bd,_be)));
};
_CALayerUpdateDOM=function(_bf,_c0){
var _c1=_bf._DOMElement.style;
if(_c0&_9){
_c1.zIndex=_bf._zPosition;
}
var _c2=_bf._backingStoreFrame;
if(_c0&_7){
_c1.top=ROUND((_c2.origin.y))+"px";
_c1.left=ROUND((_c2.origin.x))+"px";
}
if(_c0&_8){
var _c3=MAX(0,ROUND((_c2.size.width))),_c4=MAX(0,ROUND((_c2.size.height))),_c5=_bf._DOMContentsElement;
_c1.width=_c3+"px";
_c1.height=_c4+"px";
if(_c5){
_c5.width=_c3;
_c5.height=_c4;
_c5.style.width=_c3+"px";
_c5.style.height=_c4+"px";
}
}
};
_CALayerRecalculateGeometry=function(_c6,_c7){
var _c8=_c6._bounds,_c9=_c6._superlayer,_ca=(_c8.size.width),_cb=(_c8.size.height),_cc=_c6._position,_cd=_c6._anchorPoint,_ce=_c6._affineTransform,_cf={width:_c6._backingStoreFrame.width,height:_c6._backingStoreFrame.height},_d0=_c6._hasCustomBackingStoreFrame;
_c6._transformFromLayer=CGAffineTransformConcat(CGAffineTransformMakeTranslation(-_ca*_cd.x-(_c6._bounds.origin.x),-_cb*_cd.y-(_c6._bounds.origin.y)),CGAffineTransformConcat(_ce,CGAffineTransformMakeTranslation(_cc.x,_cc.y)));
if(_c9&&_c9._hasSublayerTransform){
var tx=_c6._transformFromLayer.tx*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.ty*_c9._sublayerTransformForSublayers.c+_c9._sublayerTransformForSublayers.tx;
_c6._transformFromLayer.ty=_c6._transformFromLayer.tx*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.ty*_c9._sublayerTransformForSublayers.d+_c9._sublayerTransformForSublayers.ty;
_c6._transformFromLayer.tx=tx;
var a=_c6._transformFromLayer.a*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.b*_c9._sublayerTransformForSublayers.c,b=_c6._transformFromLayer.a*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.b*_c9._sublayerTransformForSublayers.d,c=_c6._transformFromLayer.c*_c9._sublayerTransformForSublayers.a+_c6._transformFromLayer.d*_c9._sublayerTransformForSublayers.c;
_c6._transformFromLayer.d=_c6._transformFromLayer.c*_c9._sublayerTransformForSublayers.b+_c6._transformFromLayer.d*_c9._sublayerTransformForSublayers.d;
_c6._transformFromLayer.a=a;
_c6._transformFromLayer.b=b;
_c6._transformFromLayer.c=c;
}
_c6._transformToLayer=CGAffineTransformInvert(_c6._transformFromLayer);
_c6._frame=nil;
_c6._standardBackingStoreFrame=objj_msgSend(_c6,"convertRect:toLayer:",_c8,nil);
if(_c9){
var _c8=objj_msgSend(_c9,"bounds"),_d1=objj_msgSend(_c9,"convertRect:toLayer:",_c8,nil);
_c6._standardBackingStoreFrame.origin.x-=(_d1.origin.x);
_c6._standardBackingStoreFrame.origin.y-=(_d1.origin.y);
}
var _d2=_c6._standardBackingStoreFrame.origin,_d3=_c6._standardBackingStoreFrame.size;
_d2.x=FLOOR(_d2.x);
_d2.y=FLOOR(_d2.y);
_d3.width=CEIL(_d3.width)+1;
_d3.height=CEIL(_d3.height)+1;
if(!_d0){
var _d4=CGRectMakeCopy(_c6._standardBackingStoreFrame);
if(ROUND((_d4.origin.x))!=ROUND((_c6._backingStoreFrame.origin.x))||ROUND((_d4.origin.y))!=ROUND((_c6._backingStoreFrame.origin.y))){
objj_msgSend(_c6,"registerRunLoopUpdateWithMask:",_7);
}
if(((_d4.size.width)!=ROUND((_c6._backingStoreFrame.size.width))||(_d4.size.height)!=ROUND((_c6._backingStoreFrame.size.height)))){
objj_msgSend(_c6,"registerRunLoopUpdateWithMask:",_8);
}
_c6._backingStoreFrame=_d4;
}
if(_c7&_1&&_c6._needsDisplayOnBoundsChange){
objj_msgSend(_c6,"setNeedsDisplay");
}else{
if(_d0||(_c7&~(_2|_3))){
objj_msgSend(_c6,"setNeedsComposite");
}
}
var _d5=_c6._sublayers,_d6=0,_d7=_d5.length;
for(;_d6<_d7;++_d6){
_CALayerRecalculateGeometry(_d5[_d6],_c7);
}
};
_CALayerGetTransform=function(_d8,_d9){
var _da=CGAffineTransformMakeIdentity();
if(_d8){
var _db=_d8;
while(_db&&_db!=_d9){
var _dc=_db._transformFromLayer;
var tx=_da.tx*_dc.a+_da.ty*_dc.c+_dc.tx;
_da.ty=_da.tx*_dc.b+_da.ty*_dc.d+_dc.ty;
_da.tx=tx;
var a=_da.a*_dc.a+_da.b*_dc.c,b=_da.a*_dc.b+_da.b*_dc.d,c=_da.c*_dc.a+_da.d*_dc.c;
_da.d=_da.c*_dc.b+_da.d*_dc.d;
_da.a=a;
_da.b=b;
_da.c=c;
_db=_db._superlayer;
}
if(_db==_d9){
return _da;
}
}
var _dd=[],_db=_d9;
while(_db){
_dd.push(_db);
_db=_db._superlayer;
}
var _de=_dd.length;
while(_de--){
var _df=_dd[_de]._transformToLayer;
var tx=_da.tx*_df.a+_da.ty*_df.c+_df.tx;
_da.ty=_da.tx*_df.b+_da.ty*_df.d+_df.ty;
_da.tx=tx;
var a=_da.a*_df.a+_da.b*_df.c,b=_da.a*_df.b+_da.b*_df.d,c=_da.c*_df.a+_da.d*_df.c;
_da.d=_da.c*_df.b+_da.d*_df.d;
_da.a=a;
_da.b=b;
_da.c=c;
}
return _da;
};
p;23;CAMediaTimingFunction.jt;2263;@STATIC;1.0;I;21;Foundation/CPObject.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;2162;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
kCAMediaTimingFunctionLinear="kCAMediaTimingFunctionLinear";
kCAMediaTimingFunctionEaseIn="kCAMediaTimingFunctionEaseIn";
kCAMediaTimingFunctionEaseOut="kCAMediaTimingFunctionEaseOut";
kCAMediaTimingFunctionEaseInEaseOut="kCAMediaTimingFunctionEaseInEaseOut";
var _1=nil;
var _2=objj_allocateClassPair(CPObject,"CAMediaTimingFunction"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_c1x"),new objj_ivar("_c1y"),new objj_ivar("_c2x"),new objj_ivar("_c2y")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithControlPoints::::"),function(_4,_5,_6,_7,_8,_9){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CAMediaTimingFunction").super_class},"init");
if(_4){
_c1x=_6;
_c1y=_7;
_c2x=_8;
_c2y=_9;
}
return _4;
}
}),new objj_method(sel_getUid("getControlPointAtIndex:values:"),function(_a,_b,_c,_d){
with(_a){
if(_c==0){
_d[0]=0;
_d[1]=0;
}else{
if(_c==1){
_d[0]=_c1x;
_d[1]=_c1y;
}else{
if(_c==2){
_d[0]=_c2x;
_d[1]=_c2y;
}else{
_d[0]=1;
_d[1]=1;
}
}
}
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("functionWithName:"),function(_e,_f,_10){
with(_e){
if(!_1){
_1=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0,0,1,1),kCAMediaTimingFunctionLinear);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0.42,0,1,1),kCAMediaTimingFunctionEaseIn);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0,0,0.58,1),kCAMediaTimingFunctionEaseOut);
objj_msgSend(_1,"setObject:forKey:",objj_msgSend(CAMediaTimingFunction,"functionWithControlPoints::::",0.42,0,0.58,1),kCAMediaTimingFunctionEaseInEaseOut);
}
return objj_msgSend(_1,"objectForKey:",_10);
}
}),new objj_method(sel_getUid("functionWithControlPoints::::"),function(_11,_12,c1x,c1y,c2x,c2y){
with(_11){
return objj_msgSend(objj_msgSend(_11,"alloc"),"initWithControlPoints::::",c1x,c1y,c2x,c2y);
}
})]);
p;19;CGAffineTransform.jt;2936;@STATIC;1.0;i;12;CGGeometry.jt;2900;
objj_executeFile("CGGeometry.j",YES);
CGAffineTransformMake=function(a,b,c,d,tx,ty){
return {a:a,b:b,c:c,d:d,tx:tx,ty:ty};
};
CGAffineTransformMakeIdentity=function(){
return {a:1,b:0,c:0,d:1,tx:0,ty:0};
};
CGAffineTransformMakeCopy=function(_1){
return {a:_1.a,b:_1.b,c:_1.c,d:_1.d,tx:_1.tx,ty:_1.ty};
};
CGAffineTransformMakeScale=function(sx,sy){
return {a:sx,b:0,c:0,d:sy,tx:0,ty:0};
};
CGAffineTransformMakeTranslation=function(tx,ty){
return {a:1,b:0,c:0,d:1,tx:tx,ty:ty};
};
CGAffineTransformTranslate=function(_2,tx,ty){
return {a:_2.a,b:_2.b,c:_2.c,d:_2.d,tx:_2.tx+_2.a*tx+_2.c*ty,ty:_2.ty+_2.b*tx+_2.d*ty};
};
CGAffineTransformScale=function(_3,sx,sy){
return {a:_3.a*sx,b:_3.b*sx,c:_3.c*sy,d:_3.d*sy,tx:_3.tx,ty:_3.ty};
};
CGAffineTransformConcat=function(_4,_5){
return {a:_4.a*_5.a+_4.b*_5.c,b:_4.a*_5.b+_4.b*_5.d,c:_4.c*_5.a+_4.d*_5.c,d:_4.c*_5.b+_4.d*_5.d,tx:_4.tx*_5.a+_4.ty*_5.c+_5.tx,ty:_4.tx*_5.b+_4.ty*_5.d+_5.ty};
};
CGPointApplyAffineTransform=function(_6,_7){
return {x:_6.x*_7.a+_6.y*_7.c+_7.tx,y:_6.x*_7.b+_6.y*_7.d+_7.ty};
};
CGSizeApplyAffineTransform=function(_8,_9){
return {width:_8.width*_9.a+_8.height*_9.c,height:_8.width*_9.b+_8.height*_9.d};
};
CGAffineTransformIsIdentity=function(_a){
return (_a.a==1&&_a.b==0&&_a.c==0&&_a.d==1&&_a.tx==0&&_a.ty==0);
};
CGAffineTransformEqualToTransform=function(_b,_c){
return (_b.a==_c.a&&_b.b==_c.b&&_b.c==_c.c&&_b.d==_c.d&&_b.tx==_c.tx&&_b.ty==_c.ty);
};
CGStringCreateWithCGAffineTransform=function(_d){
return (" [[ "+_d.a+", "+_d.b+", 0 ], [ "+_d.c+", "+_d.d+", 0 ], [ "+_d.tx+", "+_d.ty+", 1]]");
};
CGAffineTransformCreateCopy=function(_e){
return {a:_e.a,b:_e.b,c:_e.c,d:_e.d,tx:_e.tx,ty:_e.ty};
};
CGAffineTransformMakeRotation=function(_f){
var sin=SIN(_f),cos=COS(_f);
return {a:cos,b:sin,c:-sin,d:cos,tx:0,ty:0};
};
CGAffineTransformRotate=function(_10,_11){
var sin=SIN(_11),cos=COS(_11);
return {a:_10.a*cos+_10.c*sin,b:_10.b*cos+_10.d*sin,c:_10.c*cos-_10.a*sin,d:_10.d*cos-_10.b*sin,tx:_10.tx,ty:_10.ty};
};
CGAffineTransformInvert=function(_12){
var _13=1/(_12.a*_12.d-_12.b*_12.c);
return {a:_13*_12.d,b:-_13*_12.b,c:-_13*_12.c,d:_13*_12.a,tx:_13*(_12.c*_12.ty-_12.d*_12.tx),ty:_13*(_12.b*_12.tx-_12.a*_12.ty)};
};
CGRectApplyAffineTransform=function(_14,_15){
var top=(_14.origin.y),_16=(_14.origin.x),_17=(_14.origin.x+_14.size.width),_18=(_14.origin.y+_14.size.height),_19=CGPointApplyAffineTransform({x:_16,y:top},_15),_1a=CGPointApplyAffineTransform({x:_17,y:top},_15),_1b=CGPointApplyAffineTransform({x:_16,y:_18},_15),_1c=CGPointApplyAffineTransform({x:_17,y:_18},_15),_1d=MIN(_19.x,_1a.x,_1b.x,_1c.x),_1e=MAX(_19.x,_1a.x,_1b.x,_1c.x),_1f=MIN(_19.y,_1a.y,_1b.y,_1c.y),_20=MAX(_19.y,_1a.y,_1b.y,_1c.y);
return {origin:{x:_1d,y:_1f},size:{width:(_1e-_1d),height:(_20-_1f)}};
};
CPStringFromCGAffineTransform=function(_21){
return "{"+_21.a+", "+_21.b+", "+_21.c+", "+_21.d+", "+_21.tx+", "+_21.ty+"}";
};
p;9;CGColor.jt;2235;@STATIC;1.0;i;14;CGColorSpace.jt;2197;
objj_executeFile("CGColorSpace.j",YES);
var _1=0;
CFHashCode=function(_2){
if(!_2.hash){
_2.hash=++_1;
}
return _2;
};
kCGColorWhite="kCGColorWhite";
kCGColorBlack="kCGColorBlack";
kCGColorClear="kCGColorClear";
var _3={};
CGColorGetConstantColor=function(_4){
alert("FIX ME");
};
CGColorRetain=function(_5){
return _5;
};
CGColorRelease=function(){
};
CGColorCreate=function(_6,_7){
if(!_6||!_7){
return NULL;
}
var _7=_7.slice();
CGColorSpaceStandardizeComponents(_6,_7);
var _8=CFHashCode(_6)+_7.join("");
if(_3[_8]){
return _3[_8];
}
return _3[_8]={colorspace:_6,pattern:NULL,components:_7};
};
CGColorCreateCopy=function(_9){
return _9;
};
CGColorCreateGenericGray=function(_a,_b){
return CGColorCreate(CGColorSpaceCreateDeviceRGB(),[_a,_a,_a,_b]);
};
CGColorCreateGenericRGB=function(_c,_d,_e,_f){
return CGColorCreate(CGColorSpaceCreateDeviceRGB(),[_c,_d,_e,_f]);
};
CGColorCreateGenericCMYK=function(_10,_11,_12,_13,_14){
return CGColorCreate(CGColorSpaceCreateDeviceCMYK(),[_10,_11,_12,_13,_14]);
};
CGColorCreateCopyWithAlpha=function(_15,_16){
if(!_15){
return _15;
}
var _17=_15.components.slice();
if(_16==_17[_17.length-1]){
return _15;
}
_17[_17.length-1]=_16;
if(_15.pattern){
return CGColorCreateWithPattern(_15.colorspace,_15.pattern,_17);
}else{
return CGColorCreate(_15.colorspace,_17);
}
};
CGColorCreateWithPattern=function(_18,_19,_1a){
if(!_18||!_19||!_1a){
return NULL;
}
return {colorspace:_18,pattern:_19,components:_1a.slice()};
};
CGColorEqualToColor=function(lhs,rhs){
if(lhs==rhs){
return true;
}
if(!lhs||!rhs){
return false;
}
var _1b=lhs.components,_1c=rhs.components,_1d=_1b.length;
if(_1d!=_1c.length){
return false;
}
while(_1d--){
if(_1b[_1d]!=_1c[_1d]){
return false;
}
}
if(lhs.pattern!=rhs.pattern){
return false;
}
if(CGColorSpaceEqualToColorSpace(lhs.colorspace,rhs.colorspace)){
return false;
}
return true;
};
CGColorGetAlpha=function(_1e){
var _1f=_1e.components;
return _1f[_1f.length-1];
};
CGColorGetColorSpace=function(_20){
return _20.colorspace;
};
CGColorGetComponents=function(_21){
return _21.components;
};
CGColorGetNumberOfComponents=function(_22){
return _22.components.length;
};
CGColorGetPattern=function(_23){
return _23.pattern;
};
p;14;CGColorSpace.jt;3521;@STATIC;1.0;t;3502;
kCGColorSpaceModelUnknown=-1;
kCGColorSpaceModelMonochrome=0;
kCGColorSpaceModelRGB=1;
kCGColorSpaceModelCMYK=2;
kCGColorSpaceModelLab=3;
kCGColorSpaceModelDeviceN=4;
kCGColorSpaceModelIndexed=5;
kCGColorSpaceModelPattern=6;
kCGColorSpaceGenericGray="CGColorSpaceGenericGray";
kCGColorSpaceGenericRGB="CGColorSpaceGenericRGB";
kCGColorSpaceGenericCMYK="CGColorSpaceGenericCMYK";
kCGColorSpaceGenericRGBLinear="CGColorSpaceGenericRGBLinear";
kCGColorSpaceGenericRGBHDR="CGColorSpaceGenericRGBHDR";
kCGColorSpaceAdobeRGB1998="CGColorSpaceAdobeRGB1998";
kCGColorSpaceSRGB="CGColorSpaceSRGB";
var _1={};
CGColorSpaceCreateCalibratedGray=function(_2,_3,_4){
return {model:kCGColorSpaceModelMonochrome,count:1,base:NULL};
};
CGColorSpaceCreateCalibratedRGB=function(_5,_6,_7){
return {model:kCGColorSpaceModelRGB,count:1,base:NULL};
};
CGColorSpaceCreateICCBased=function(_8,_9,_a,_b){
return NULL;
};
CGColorSpaceCreateLab=function(_c,_d,_e){
return NULL;
};
CGColorSpaceCreateDeviceCMYK=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericCMYK);
};
CGColorSpaceCreateDeviceGray=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericGray);
};
CGColorSpaceCreateDeviceRGB=function(){
return CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
};
CGColorSpaceCreateWithPlatformColorSpace=function(){
return NULL;
};
CGColorSpaceCreateIndexed=function(_f,_10,_11){
return NULL;
};
CGColorSpaceCreatePattern=function(_12){
if(_12){
return {model:kCGColorSpaceModelPattern,count:_12.count,base:_12};
}
return {model:kCGColorSpaceModelPattern,count:0,base:NULL};
};
CGColorSpaceCreateWithName=function(_13){
var _14=_1[_13];
if(_14){
return _14;
}
switch(_13){
case kCGColorSpaceGenericGray:
return _1[_13]={model:kCGColorSpaceModelMonochrome,count:1,base:NULL};
case kCGColorSpaceGenericRGB:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceGenericCMYK:
return _1[_13]={model:kCGColorSpaceModelCMYK,count:4,base:NULL};
case kCGColorSpaceGenericRGBLinear:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceGenericRGBHDR:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceAdobeRGB1998:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
case kCGColorSpaceSRGB:
return _1[_13]={model:kCGColorSpaceModelRGB,count:3,base:NULL};
}
return NULL;
};
CGColorSpaceCopyICCProfile=function(_15){
return NULL;
};
CGColorSpaceGetNumberOfComponents=function(_16){
return _16.count;
};
CGColorSpaceGetTypeID=function(_17){
};
CGColorSpaceGetModel=function(_18){
return _18.model;
};
CGColorSpaceGetBaseColorSpace=function(_19){
};
CGColorSpaceGetColorTableCount=function(_1a){
};
CGColorSpaceGetColorTable=function(_1b){
};
CGColorSpaceRelease=function(_1c){
};
CGColorSpaceRetain=function(_1d){
return _1d;
};
CGColorSpaceStandardizeComponents=function(_1e,_1f){
var _20=_1e.count;
if(_20>_1f.length){
_1f[_20]=1;
return;
}
var _21=_1f[_20];
if(_21<0){
_1f[_20]=0;
}else{
if(_21>1){
_1f[_20]=1;
}else{
_1f[_20]=ROUND(_21*1000)/1000;
}
}
if(_1e.base){
_1e=_1e.base;
}
switch(_1e.model){
case kCGColorSpaceModelMonochrome:
case kCGColorSpaceModelRGB:
case kCGColorSpaceModelCMYK:
case kCGColorSpaceModelDeviceN:
while(_20--){
if(_20>_1f.length){
_1f[_20]=1;
return;
}
var _21=_1f[_20];
if(_21<0){
_1f[_20]=0;
}else{
if(_21>1){
_1f[_20]=1;
}else{
_1f[_20]=ROUND(_21*255)/255;
}
}
}
break;
case kCGColorSpaceModelIndexed:
case kCGColorSpaceModelLab:
case kCGColorSpaceModelPattern:
break;
}
};
p;11;CGContext.jt;21494;@STATIC;1.0;i;19;CGAffineTransform.ji;17;CPCompatibility.ji;12;CGGeometry.ji;8;CGPath.jt;21399;
objj_executeFile("CGAffineTransform.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CGPath.j",YES);
kCGLineCapButt=0;
kCGLineCapRound=1;
kCGLineCapSquare=2;
kCGLineJoinMiter=0;
kCGLineJoinRound=1;
kCGLineJoinBevel=2;
kCGPathFill=0;
kCGPathEOFill=1;
kCGPathStroke=2;
kCGPathFillStroke=3;
kCGPathEOFillStroke=4;
kCGBlendModeNormal=0;
kCGBlendModeMultiply=1;
kCGBlendModeScreen=2;
kCGBlendModeOverlay=3;
kCGBlendModeDarken=4;
kCGBlendModeLighten=5;
kCGBlendModeColorDodge=6;
kCGBlendModeColorBurn=7;
kCGBlendModeSoftLight=8;
kCGBlendModeHardLight=9;
kCGBlendModeDifference=10;
kCGBlendModeExclusion=11;
kCGBlendModeHue=12;
kCGBlendModeSaturation=13;
kCGBlendModeColor=14;
kCGBlendModeLuminosity=15;
kCGBlendModeClear=16;
kCGBlendModeCopy=17;
kCGBlendModeSourceIn=18;
kCGBlendModeSourceOut=19;
kCGBlendModeSourceAtop=20;
kCGBlendModeDestinationOver=21;
kCGBlendModeDestinationIn=22;
kCGBlendModeDestinationOut=23;
kCGBlendModeDestinationAtop=24;
kCGBlendModeXOR=25;
kCGBlendModePlusDarker=26;
kCGBlendModePlusLighter=27;
CGContextRelease=function(){
};
CGContextRetain=function(_1){
return _1;
};
if(!CPFeatureIsCompatible(CPHTMLCanvasFeature)){
CGGStateCreate=function(){
return {alpha:1,strokeStyle:"#000",fillStyle:"#ccc",lineWidth:1,lineJoin:kCGLineJoinMiter,lineCap:kCGLineCapButt,miterLimit:10,globalAlpha:1,blendMode:kCGBlendModeNormal,shadowOffset:{width:0,height:0},shadowBlur:0,shadowColor:NULL,CTM:{a:1,b:0,c:0,d:1,tx:0,ty:0}};
};
CGGStateCreateCopy=function(_2){
return {alpha:_2.alpha,strokeStyle:_2.strokeStyle,fillStyle:_2.fillStyle,lineWidth:_2.lineWidth,lineJoin:_2.lineJoin,lineCap:_2.lineCap,miterLimit:_2.miterLimit,globalAlpha:_2.globalAlpha,blendMode:_2.blendMode,shadowOffset:{width:_2.shadowOffset.width,height:_2.shadowOffset.height},shadowBlur:_2.shadowBlur,shadowColor:_2.shadowColor,CTM:{a:_2.CTM.a,b:_2.CTM.b,c:_2.CTM.c,d:_2.CTM.d,tx:_2.CTM.tx,ty:_2.CTM.ty}};
};
CGBitmapGraphicsContextCreate=function(){
return {DOMElement:document.createElement("div"),path:NULL,gState:CGGStateCreate(),gStateStack:[]};
};
CGContextSaveGState=function(_3){
_3.gStateStack.push(CGGStateCreateCopy(_3.gState));
};
CGContextRestoreGState=function(_4){
_4.gState=_4.gStateStack.pop();
};
CGContextSetLineCap=function(_5,_6){
_5.gState.lineCap=_6;
};
CGContextSetLineJoin=function(_7,_8){
_7.gState.lineJoin=_8;
};
CGContextSetLineWidth=function(_9,_a){
_9.gState.lineWidth=_a;
};
CGContextSetMiterLimit=function(_b,_c){
_b.gState.miterLimit=_c;
};
CGContextSetBlendMode=function(_d,_e){
_d.gState.blendMode=_e;
};
CGContextAddArc=function(_f,x,y,_10,_11,_12,_13){
CGPathAddArc(_f.path,_f.gState.CTM,x,y,_10,_11,_12,_13);
};
CGContextAddArcToPoint=function(_14,x1,y1,x2,y2,_15){
CGPathAddArcToPoint(_14.path,_14.gState.CTM,x1,y1,x2,y2,_15);
};
CGContextAddCurveToPoint=function(_16,_17,_18,_19,_1a,x,y){
CGPathAddCurveToPoint(_16.path,_16.gState.CTM,_17,_18,_19,_1a,x,y);
};
CGContextAddLines=function(_1b,_1c,_1d){
CGPathAddLines(_1b.path,_1b.gState.CTM,_1c,_1d);
};
CGContextAddLineToPoint=function(_1e,x,y){
CGPathAddLineToPoint(_1e.path,_1e.gState.CTM,x,y);
};
CGContextAddPath=function(_1f,_20){
if(!_1f||CGPathIsEmpty(_20)){
return;
}
if(!_1f.path){
_1f.path=CGPathCreateMutable();
}
CGPathAddPath(_1f.path,_1f.gState.CTM,_20);
};
CGContextAddQuadCurveToPoint=function(_21,cpx,cpy,x,y){
CGPathAddQuadCurveToPoint(_21.path,_21.gState.CTM,cpx,cpy,x,y);
};
CGContextAddRect=function(_22,_23){
CGPathAddRect(_22.path,_22.gState.CTM,_23);
};
CGContextAddRects=function(_24,_25,_26){
CGPathAddRects(_24.path,_24.gState.CTM,_25,_26);
};
CGContextBeginPath=function(_27){
_27.path=CGPathCreateMutable();
};
CGContextClosePath=function(_28){
CGPathCloseSubpath(_28.path);
};
CGContextMoveToPoint=function(_29,x,y){
if(!_29.path){
_29.path=CGPathCreateMutable();
}
CGPathMoveToPoint(_29.path,_29.gState.CTM,x,y);
};
CGContextFillRect=function(_2a,_2b){
CGContextFillRects(_2a,[_2b],1);
};
CGContextFillRects=function(_2c,_2d,_2e){
if(arguments[2]===undefined){
var _2e=_2d.length;
}
CGContextBeginPath(_2c);
CGContextAddRects(_2c,_2d,_2e);
CGContextClosePath(_2c);
CGContextDrawPath(_2c,kCGPathFill);
};
CGContextStrokeRect=function(_2f,_30){
CGContextBeginPath(_2f);
CGContextAddRect(_2f,_30);
CGContextClosePath(_2f);
CGContextDrawPath(_2f,kCGPathStroke);
};
CGContextStrokeRectWithWidth=function(_31,_32,_33){
CGContextSaveGState(_31);
CGContextSetLineWidth(_31,_33);
CGContextStrokeRect(_31,_32);
CGContextRestoreGState(_31);
};
CGContextConcatCTM=function(_34,_35){
var CTM=_34.gState.CTM;
var tx=CTM.tx*_35.a+CTM.ty*_35.c+_35.tx;
CTM.ty=CTM.tx*_35.b+CTM.ty*_35.d+_35.ty;
CTM.tx=tx;
var a=CTM.a*_35.a+CTM.b*_35.c,b=CTM.a*_35.b+CTM.b*_35.d,c=CTM.c*_35.a+CTM.d*_35.c;
CTM.d=CTM.c*_35.b+CTM.d*_35.d;
CTM.a=a;
CTM.b=b;
CTM.c=c;
};
CGContextGetCTM=function(_36){
return _36.gState.CTM;
};
CGContextRotateCTM=function(_37,_38){
var _39=_37.gState;
_39.CTM=CGAffineTransformRotate(_39.CTM,_38);
};
CGContextScaleCTM=function(_3a,sx,sy){
var _3b=_3a.gState;
_3b.CTM={a:_3b.CTM.a*sx,b:_3b.CTM.b*sx,c:_3b.CTM.c*sy,d:_3b.CTM.d*sy,tx:_3b.CTM.tx,ty:_3b.CTM.ty};
};
CGContextTranslateCTM=function(_3c,tx,ty){
var _3d=_3c.gState;
_3d.CTM={a:_3d.CTM.a,b:_3d.CTM.b,c:_3d.CTM.c,d:_3d.CTM.d,tx:_3d.CTM.tx+_3d.CTM.a*tx+_3d.CTM.c*ty,ty:_3d.CTM.ty+_3d.CTM.b*tx+_3d.CTM.d*ty};
};
CGContextSetShadow=function(_3e,_3f,_40){
var _41=_3e.gState;
_41.shadowOffset={width:_3f.width,height:_3f.height};
_41.shadowBlur=_40;
_41.shadowColor=objj_msgSend(CPColor,"shadowColor");
};
CGContextSetShadowWithColor=function(_42,_43,_44,_45){
var _46=_42.gState;
_46.shadowOffset={width:_43.width,height:_43.height};
_46.shadowBlur=_44;
_46.shadowColor=_45;
};
CGContextSetAlpha=function(_47,_48){
_47.gState.alpha=MAX(MIN(_48,1),0);
};
}
CGContextEOFillPath=function(_49){
CGContextDrawPath(_49,kCGPathEOFill);
};
CGContextFillPath=function(_4a){
CGContextDrawPath(_4a,kCGPathFill);
CGContextClosePath(_4a);
};
var _4b=4*((SQRT2-1)/3);
CGContextAddEllipseInRect=function(_4c,_4d){
CGContextBeginPath(_4c);
CGContextAddPath(_4c,CGPathWithEllipseInRect(_4d));
CGContextClosePath(_4c);
};
CGContextFillEllipseInRect=function(_4e,_4f){
CGContextBeginPath(_4e);
CGContextAddEllipseInRect(_4e,_4f);
CGContextClosePath(_4e);
CGContextFillPath(_4e);
};
CGContextStrokeEllipseInRect=function(_50,_51){
CGContextBeginPath(_50);
CGContextAddEllipseInRect(_50,_51);
CGContextClosePath(_50);
CGContextStrokePath(_50);
};
CGContextStrokePath=function(_52){
CGContextDrawPath(_52,kCGPathStroke);
CGContextClosePath(_52);
};
CGContextStrokeLineSegments=function(_53,_54,_55){
var i=0;
if(_55===NULL){
var _55=_54.length;
}
CGContextBeginPath(_53);
for(;i<_55;i+=2){
CGContextMoveToPoint(_53,_54[i].x,_54[i].y);
CGContextAddLineToPoint(_53,_54[i+1].x,_54[i+1].y);
}
CGContextStrokePath(_53);
};
CGContextSetFillColor=function(_56,_57){
if(_57){
_56.gState.fillStyle=objj_msgSend(_57,"cssString");
}
};
CGContextSetStrokeColor=function(_58,_59){
if(_59){
_58.gState.strokeStyle=objj_msgSend(_59,"cssString");
}
};
CGContextFillRoundedRectangleInRect=function(_5a,_5b,_5c,ne,se,sw,nw){
CGContextBeginPath(_5a);
CGContextAddPath(_5a,CGPathWithRoundedRectangleInRect(_5b,_5c,_5c,ne,se,sw,nw));
CGContextClosePath(_5a);
CGContextFillPath(_5a);
};
CGContextStrokeRoundedRectangleInRect=function(_5d,_5e,_5f,ne,se,sw,nw){
CGContextBeginPath(_5d);
CGContextAddPath(_5d,CGPathWithRoundedRectangleInRect(_5e,_5f,_5f,ne,se,sw,nw));
CGContextClosePath(_5d);
CGContextStrokePath(_5d);
};
if(CPFeatureIsCompatible(CPHTMLCanvasFeature)){
var _60=["butt","round","square"],_61=["miter","round","bevel"],_62=["source-over","source-over","source-over","source-over","darker","lighter","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","source-over","copy","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","xor","source-over","source-over"];
CGContextSaveGState=function(_63){
_63.save();
};
CGContextRestoreGState=function(_64){
_64.restore();
};
CGContextSetLineCap=function(_65,_66){
_65.lineCap=_60[_66];
};
CGContextSetLineJoin=function(_67,_68){
_67.lineJoin=_61[_68];
};
CGContextSetLineWidth=function(_69,_6a){
_69.lineWidth=_6a;
};
CGContextSetMiterLimit=function(_6b,_6c){
_6b.miterLimit=_6c;
};
CGContextSetBlendMode=function(_6d,_6e){
_6d.globalCompositeOperation=_62[_6e];
};
CGContextAddArc=function(_6f,x,y,_70,_71,_72,_73){
_6f.arc(x,y,_70,_71,_72,!_73);
};
CGContextAddArcToPoint=function(_74,x1,y1,x2,y2,_75){
_74.arcTo(x1,y1,x2,y2,_75);
};
CGContextAddCurveToPoint=function(_76,_77,_78,_79,_7a,x,y){
_76.bezierCurveTo(_77,_78,_79,_7a,x,y);
};
CGContextAddLineToPoint=function(_7b,x,y){
_7b.lineTo(x,y);
};
CGContextAddPath=function(_7c,_7d){
if(!_7c||CGPathIsEmpty(_7d)){
return;
}
var _7e=_7d.elements,i=0,_7f=_7d.count;
for(;i<_7f;++i){
var _80=_7e[i],_81=_80.type;
switch(_81){
case kCGPathElementMoveToPoint:
_7c.moveTo(_80.x,_80.y);
break;
case kCGPathElementAddLineToPoint:
_7c.lineTo(_80.x,_80.y);
break;
case kCGPathElementAddQuadCurveToPoint:
_7c.quadraticCurveTo(_80.cpx,_80.cpy,_80.x,_80.y);
break;
case kCGPathElementAddCurveToPoint:
_7c.bezierCurveTo(_80.cp1x,_80.cp1y,_80.cp2x,_80.cp2y,_80.x,_80.y);
break;
case kCGPathElementCloseSubpath:
_7c.closePath();
break;
case kCGPathElementAddArc:
_7c.arc(_80.x,_80.y,_80.radius,_80.startAngle,_80.endAngle,_80.clockwise);
break;
case kCGPathElementAddArcTo:
break;
}
}
};
CGContextAddRect=function(_82,_83){
_82.rect((_83.origin.x),(_83.origin.y),(_83.size.width),(_83.size.height));
};
CGContextAddRects=function(_84,_85,_86){
var i=0;
if(_86===NULL){
var _86=_85.length;
}
for(;i<_86;++i){
var _87=_85[i];
_84.rect((_87.origin.x),(_87.origin.y),(_87.size.width),(_87.size.height));
}
};
CGContextBeginPath=function(_88){
_88.beginPath();
};
CGContextClosePath=function(_89){
_89.closePath();
};
CGContextMoveToPoint=function(_8a,x,y){
_8a.moveTo(x,y);
};
CGContextClearRect=function(_8b,_8c){
_8b.clearRect((_8c.origin.x),(_8c.origin.y),(_8c.size.width),(_8c.size.height));
};
CGContextDrawPath=function(_8d,_8e){
if(_8e==kCGPathFill||_8e==kCGPathFillStroke){
_8d.fill();
}else{
if(_8e==kCGPathEOFill||_8e==kCGPathEOFillStroke){
alert("not implemented!!!");
}
}
if(_8e==kCGPathStroke||_8e==kCGPathFillStroke||_8e==kCGPathEOFillStroke){
_8d.stroke();
}
};
CGContextFillRect=function(_8f,_90){
_8f.fillRect((_90.origin.x),(_90.origin.y),(_90.size.width),(_90.size.height));
};
CGContextFillRects=function(_91,_92,_93){
var i=0;
if(_93===NULL){
var _93=_92.length;
}
for(;i<_93;++i){
var _94=_92[i];
_91.fillRect((_94.origin.x),(_94.origin.y),(_94.size.width),(_94.size.height));
}
};
CGContextStrokeRect=function(_95,_96){
_95.strokeRect((_96.origin.x),(_96.origin.y),(_96.size.width),(_96.size.height));
};
CGContextClip=function(_97){
_97.clip();
};
CGContextClipToRect=function(_98,_99){
_98.beginPath();
_98.rect((_99.origin.x),(_99.origin.y),(_99.size.width),(_99.size.height));
_98.closePath();
_98.clip();
};
CGContextClipToRects=function(_9a,_9b,_9c){
if(_9c===NULL){
var _9c=_9b.length;
}
_9a.beginPath();
CGContextAddRects(_9a,_9b,_9c);
_9a.clip();
};
CGContextSetAlpha=function(_9d,_9e){
_9d.globalAlpha=_9e;
};
CGContextSetFillColor=function(_9f,_a0){
if(objj_msgSend(_a0,"patternImage")){
var _a1=objj_msgSend(_a0,"patternImage"),_a2=objj_msgSend(_a1,"size"),img;
if(_a2){
img=new Image(_a2.width,_a2.height);
}else{
img=new Image();
}
img.src=objj_msgSend(_a1,"filename");
var _a3=_9f.createPattern(img,"repeat");
_9f.fillStyle=_a3;
}else{
_9f.fillStyle=objj_msgSend(_a0,"cssString");
}
};
CGContextSetStrokeColor=function(_a4,_a5){
_a4.strokeStyle=objj_msgSend(_a5,"cssString");
};
CGContextSetShadow=function(_a6,_a7,_a8){
_a6.shadowOffsetX=_a7.width;
_a6.shadowOffsetY=_a7.height;
_a6.shadowBlur=_a8;
};
CGContextSetShadowWithColor=function(_a9,_aa,_ab,_ac){
_a9.shadowOffsetX=_aa.width;
_a9.shadowOffsetY=_aa.height;
_a9.shadowBlur=_ab;
_a9.shadowColor=objj_msgSend(_ac,"cssString");
};
CGContextRotateCTM=function(_ad,_ae){
_ad.rotate(_ae);
};
CGContextScaleCTM=function(_af,sx,sy){
_af.scale(sx,sy);
};
CGContextTranslateCTM=function(_b0,tx,ty){
_b0.translate(tx,ty);
};
eigen=function(_b1){
alert("IMPLEMENT ME!");
};
if(CPFeatureIsCompatible(CPJavaScriptCanvasTransformFeature)){
CGContextConcatCTM=function(_b2,_b3){
_b2.transform(_b3.a,_b3.b,_b3.c,_b3.d,_b3.tx,_b3.ty);
};
}else{
CGContextConcatCTM=function(_b4,_b5){
var a=_b5.a,b=_b5.b,c=_b5.c,d=_b5.d,tx=_b5.tx,ty=_b5.ty,sx=1,sy=1,a1=0,a2=0;
if(b==0&&c==0){
sx=a;
sy=d;
}else{
if(a*b==-c*d){
var _b6=(a*d<0||b*c>0)?-1:1,a2=(ATAN2(b,d)+ATAN2(-_b6*c,_b6*a))/2,cos=COS(a2),sin=SIN(a2);
if(cos==0){
sx=-c/sin;
sy=b/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
}
}
}else{
if(a*c==-b*d){
var _b6=(a*d<0||b*c>0)?-1:1;
a1=(ATAN2(_b6*b,_b6*a)+ATAN2(-c,d))/2,cos=COS(a1),sin=SIN(a1);
if(cos==0){
sx=b/sin;
sy=-c/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
}
}
}else{
var _b7=CGAffineTransformMake(a,c,b,d,0,0),u=eigen(CGAffineTransformConcat(_b5,_b7)),v=eigen(CGAffineTransformConcat(_b7,_b5)),U=CGAffineTransformMake(u.vector_1.x,u.vector_2.x,u.vector_1.y,u.vector_2.y,0,0),VT=CGAffineTransformMake(v.vector_1.x,v.vector_1.y,v.vector_2.x,v.vector_2.y,0,0),S=CGAffineTransformConcat(CGAffineTransformConcat(CGAffineTransformInvert(U),_b5),CGAffineTransformInvert(VT));
a=VT.a;
b=VT.b;
c=VT.c;
d=VT.d;
var _b6=(a*d<0||b*c>0)?-1:1,a2=(ATAN2(b,d)+ATAN2(-_b6*c,_b6*a))/2,cos=COS(a2),sin=SIN(a2);
if(cos==0){
sx=-c/sin;
sy=b/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
}
}
S.a*=sx;
S.d*=sy;
a=U.a;
b=U.b;
c=U.c;
d=U.d;
var _b6=(a*d<0||b*c>0)?-1:1;
a1=(ATAN2(_b6*b,_b6*a)+ATAN2(-c,d))/2,cos=COS(a1),sin=SIN(a1);
if(cos==0){
sx=b/sin;
sy=-c/sin;
}else{
if(sin==0){
sx=a/cos;
sy=d/cos;
}else{
abs_cos=ABS(cos);
abs_sin=ABS(sin);
sx=(abs_cos*a/cos+abs_sin*b/sin)/(abs_cos+abs_sin);
sy=(abs_cos*d/cos+abs_sin*-c/sin)/(abs_cos+abs_sin);
}
}
sx=S.a*sx;
sy=S.d*sy;
}
}
}
if(tx!=0||ty!=0){
CGContextTranslateCTM(_b4,tx,ty);
}
if(a1!=0){
CGContextRotateCTM(_b4,a1);
}
if(sx!=1||sy!=1){
CGContextScaleCTM(_b4,sx,sy);
}
if(a2!=0){
CGContextRotateCTM(_b4,a2);
}
};
}
CGContextDrawImage=function(_b8,_b9,_ba){
_b8.drawImage(_ba._image,(_b9.origin.x),(_b9.origin.y),(_b9.size.width),(_b9.size.height));
};
to_string=function(_bb){
return "rgba("+ROUND(_bb.components[0]*255)+", "+ROUND(_bb.components[1]*255)+", "+ROUND(255*_bb.components[2])+", "+_bb.components[3]+")";
};
CGContextDrawLinearGradient=function(_bc,_bd,_be,_bf,_c0){
var _c1=_bd.colors,_c2=_c1.length,_c3=_bc.createLinearGradient(_be.x,_be.y,_bf.x,_bf.y);
while(_c2--){
_c3.addColorStop(_bd.locations[_c2],to_string(_c1[_c2]));
}
_bc.fillStyle=_c3;
_bc.fill();
};
CGBitmapGraphicsContextCreate=function(){
var _c4=document.createElement("canvas"),_c5=_c4.getContext("2d");
_c5.DOMElement=_c4;
return _c5;
};
}else{
if(CPFeatureIsCompatible(CPVMLFeature)){
var _c6=["f","t"],_c7=["flat","round","square"],_c8=["miter","round","bevel"],_c9=[" m "," l ","qb"," c "," x ",[" at "," wa "]];
var _ca=CGBitmapGraphicsContextCreate;
CGBitmapGraphicsContextCreate=function(){
document.namespaces.add("cg_vml_","urn:schemas-microsoft-com:vml");
document.createStyleSheet().cssText="cg_vml_\\:*{behavior:url(#default#VML)}";
CGBitmapGraphicsContextCreate=_ca;
return _ca();
};
CGContextSetFillColor=function(_cb,_cc){
if(objj_msgSend(_cc,"patternImage")){
_cb.gState.fillStyle="!"+objj_msgSend(objj_msgSend(_cc,"patternImage"),"filename");
}else{
_cb.gState.fillStyle=objj_msgSend(_cc,"cssString");
}
};
CGContextClearRect=function(_cd,_ce){
if(_cd.buffer!=nil){
_cd.buffer="";
}else{
_cd.DOMElement.innerHTML="";
}
_cd.path=NULL;
};
var W=10,H=10,Z=10,Z_2=Z/2;
CGContextDrawImage=function(_cf,_d0,_d1){
var _d2="";
if(_d1.buffer!=nil){
_d2=_d1.buffer;
}else{
var ctm=_cf.gState.CTM,_d3=CGPointApplyAffineTransform(_d0.origin,ctm),_d4=ctm.a==ctm.d&&ctm.b==-ctm.c,vml=["<cg_vml_:group coordsize=\"1,1\" coordorigin=\"0,0\" style=\"width:1;height:1;position:absolute"];
var _d5=CGRectApplyAffineTransform(_d0,ctm);
vml.push(";padding:0 ",ROUND((_d5.origin.x+_d5.size.width)),"px ",ROUND((_d5.origin.y+_d5.size.height)),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(","M11='",ctm.a,"',M12='",ctm.c,"',M21='",ctm.b,"',M22='",ctm.d,"',","Dx='",ROUND(_d3.x),"', Dy='",ROUND(_d3.y),"', sizingmethod='clip');");
vml.push("\"><cg_vml_:image src=\"",_d1._image.src,"\" style=\"width:",(_d0.size.width),"px;height:",(_d0.size.height),"px;\"/></g_vml_:group>");
_d2=vml.join("");
}
if(_cf.buffer!=nil){
_cf.buffer+=_d2;
}else{
_cf.DOMElement.insertAdjacentHTML("BeforeEnd",_d2);
}
};
CGContextDrawPath=function(_d6,_d7){
if(!_d6||CGPathIsEmpty(_d6.path)){
return;
}
var _d8=_d6.path.elements,i=0,_d9=_d6.path.count,_da=_d6.gState,_db=(_d7==kCGPathFill||_d7==kCGPathFillStroke)?1:0,_dc=(_d7==kCGPathStroke||_d7==kCGPathFillStroke)?1:0,_dd=_da.alpha,vml=["<cg_vml_:shape"];
if(_da.fillStyle.charAt(0)!=="!"){
vml.push(" fillcolor=\"",_da.fillStyle,"\"");
}
vml.push(" filled=\"",_c6[_db],"\" style=\"position:absolute;width:",W,";height:",H,";\" coordorigin=\"0 0\" coordsize=\"",Z*W," ",Z*H,"\" stroked=\"",_c6[_dc],"\" strokeweight=\"",_da.lineWidth,"\" strokecolor=\"",_da.strokeStyle,"\" path=\"");
for(;i<_d9;++i){
var _de=_d8[i],_df=_de.type;
switch(_df){
case kCGPathElementMoveToPoint:
case kCGPathElementAddLineToPoint:
vml.push(_c9[_df],(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementAddQuadCurveToPoint:
vml.push(_c9[_df],(_de.cpx===0?0:ROUND(Z*(_de.cpx)-Z_2)),",",(_de.cpy===0?0:ROUND(Z*(_de.cpy)-Z_2)),",",(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementAddCurveToPoint:
vml.push(_c9[_df],(_de.cp1x===0?0:ROUND(Z*(_de.cp1x)-Z_2)),",",(_de.cp1y===0?0:ROUND(Z*(_de.cp1y)-Z_2)),",",(_de.cp2x===0?0:ROUND(Z*(_de.cp2x)-Z_2)),",",(_de.cp2y===0?0:ROUND(Z*(_de.cp2y)-Z_2)),",",(_de.x===0?0:ROUND(Z*(_de.x)-Z_2)),",",(_de.y===0?0:ROUND(Z*(_de.y)-Z_2)));
break;
case kCGPathElementCloseSubpath:
vml.push(_c9[_df]);
break;
case kCGPathElementAddArc:
var x=_de.x,y=_de.y,_e0=_de.radius,_e1=_de.clockwise?1:0,_e2=_de.endAngle,_e3=_de.startAngle,_e4={x:x+_e0*COS(_e3),y:y+_e0*SIN(_e3)};
if(_e3==_e2&&!_e1){
vml.push(_c9[kCGPathElementMoveToPoint],(_e4.x===0?0:ROUND(Z*(_e4.x)-Z_2)),",",(_e4.y===0?0:ROUND(Z*(_e4.y)-Z_2)));
continue;
}
var end={x:x+_e0*COS(_e2),y:y+_e0*SIN(_e2)};
if(_e1&&_e3!=_e2&&(_e4.x==end.x&&_e4.y==end.y)){
if(_e4.x>=x){
if(_e4.y<y){
_e4.x+=0.125;
}else{
_e4.y+=0.125;
}
}else{
if(end.y<=y){
end.x+=0.125;
}else{
end.y+=0.125;
}
}
}
vml.push(_c9[_df][_e1],(x-_e0===0?0:ROUND(Z*(x-_e0)-Z_2)),",",(y-_e0===0?0:ROUND(Z*(y-_e0)-Z_2))," ",(x+_e0===0?0:ROUND(Z*(x+_e0)-Z_2)),",",(y+_e0===0?0:ROUND(Z*(y+_e0)-Z_2))," ",(_e4.x===0?0:ROUND(Z*(_e4.x)-Z_2)),",",(_e4.y===0?0:ROUND(Z*(_e4.y)-Z_2))," ",(end.x===0?0:ROUND(Z*(end.x)-Z_2)),",",(end.y===0?0:ROUND(Z*(end.y)-Z_2)));
break;
case kCGPathElementAddArcTo:
break;
}
}
vml.push("\">");
if(_da.gradient){
vml.push(_da.gradient);
}else{
if(_db){
if(_da.fillStyle.charAt(0)==="!"){
vml.push("<cg_vml_:fill type=\"tile\" src=\"",_da.fillStyle.substring(1),"\" opacity=\"",_dd,"\" />");
}else{
vml.push("<cg_vml_:fill color=\"",_da.fillStyle,"\" opacity=\"",_dd,"\" />");
}
}
}
if(_dc){
vml.push("<cg_vml_:stroke opacity=\"",_dd,"\" joinstyle=\"",_c8[_da.lineJoin],"\" miterlimit=\"",_da.miterLimit,"\" endcap=\"",_c7[_da.lineCap],"\" weight=\"",_da.lineWidth,"","px\" color=\"",_da.strokeStyle,"\" />");
}
var _e5=_da.shadowColor;
if(_e5){
var _e6=_da.shadowOffset;
vml.push("<cg_vml_:shadow on=\"t\" offset=\"",_e6.width,"pt ",_e6.height,"pt\" opacity=\"",objj_msgSend(_e5,"alphaComponent"),"\" color=black />");
}
vml.push("</cg_vml_:shape>");
if(_d6.buffer!=nil){
_d6.buffer+=vml.join("");
}else{
_d6.DOMElement.insertAdjacentHTML("BeforeEnd",vml.join(""));
}
};
to_string=function(_e7){
return "rgb("+ROUND(_e7.components[0]*255)+", "+ROUND(_e7.components[1]*255)+", "+ROUND(255*_e7.components[2])+")";
};
CGContextDrawLinearGradient=function(_e8,_e9,_ea,_eb,_ec){
if(!_e8||!_e9){
return;
}
var vml=nil;
if(_e9.vml_gradient){
var _ed=objj_msgSend(objj_msgSend(_e9.vml_gradient,"stops"),"sortedArrayUsingSelector:",sel_getUid("comparePosition:")),_ee=objj_msgSend(_ed,"count");
vml=["<cg_vml_:fill type=\"gradient\" method=\"linear sigma\" "];
vml.push("angle=\""+(objj_msgSend(_e9.vml_gradient,"angle")+90)+"\" ");
vml.push("colors=\"");
for(var i=0;i<_ee;i++){
vml.push((objj_msgSend(_ed[i],"position")*100).toFixed(0)+"% ");
vml.push(objj_msgSend(objj_msgSend(objj_msgSend(_ed[i],"color"),"colorForSlideBase:",nil),"cssString"));
if(i<_ee-1){
vml.push(",");
}
}
vml.push("\" />");
}else{
var _ef=_e9.colors,_ee=_ef.length;
vml=["<cg_vml_:fill type=\"gradient\" "];
vml.push("colors=\"");
for(var i=0;i<_ee;i++){
vml.push((_e9.locations[i]*100).toFixed(0)+"% "+to_string(_ef[i])+(i<_ee-1?",":""));
}
vml.push("\" />");
}
_e8.gState.gradient=vml.join("");
};
}
}
p;12;CGGeometry.jt;7071;@STATIC;1.0;t;7052;
CGPointMake=function(x,y){
return {x:x,y:y};
};
CGPointMakeZero=function(){
return {x:0,y:0};
};
CGPointMakeCopy=function(_1){
return {x:_1.x,y:_1.y};
};
CGPointCreateCopy=function(_2){
return {x:_2.x,y:_2.y};
};
CGPointEqualToPoint=function(_3,_4){
return (_3.x==_4.x&&_3.y==_4.y);
};
CGStringFromPoint=function(_5){
return ("{"+_5.x+", "+_5.y+"}");
};
CGSizeMake=function(_6,_7){
return {width:_6,height:_7};
};
CGSizeMakeZero=function(){
return {width:0,height:0};
};
CGSizeMakeCopy=function(_8){
return {width:_8.width,height:_8.height};
};
CGSizeCreateCopy=function(_9){
return {width:_9.width,height:_9.height};
};
CGSizeEqualToSize=function(_a,_b){
return (_a.width==_b.width&&_a.height==_b.height);
};
CGStringFromSize=function(_c){
return ("{"+_c.width+", "+_c.height+"}");
};
CGRectMake=function(x,y,_d,_e){
return {origin:{x:x,y:y},size:{width:_d,height:_e}};
};
CGRectMakeZero=function(){
return {origin:{x:0,y:0},size:{width:0,height:0}};
};
CGRectMakeCopy=function(_f){
return {origin:{x:_f.origin.x,y:_f.origin.y},size:{width:_f.size.width,height:_f.size.height}};
};
CGRectCreateCopy=function(_10){
return {origin:{x:_10.origin.x,y:_10.origin.y},size:{width:_10.size.width,height:_10.size.height}};
};
CGRectEqualToRect=function(_11,_12){
return ((_11.origin.x==_12.origin.x&&_11.origin.y==_12.origin.y)&&(_11.size.width==_12.size.width&&_11.size.height==_12.size.height));
};
CGStringFromRect=function(_13){
return ("{"+("{"+_13.origin.x+", "+_13.origin.y+"}")+", "+("{"+_13.size.width+", "+_13.size.height+"}")+"}");
};
CGRectOffset=function(_14,dX,dY){
return {origin:{x:_14.origin.x+dX,y:_14.origin.y+dY},size:{width:_14.size.width,height:_14.size.height}};
};
CGRectInset=function(_15,dX,dY){
return {origin:{x:_15.origin.x+dX,y:_15.origin.y+dY},size:{width:_15.size.width-2*dX,height:_15.size.height-2*dY}};
};
CGRectGetHeight=function(_16){
return (_16.size.height);
};
CGRectGetMaxX=function(_17){
return (_17.origin.x+_17.size.width);
};
CGRectGetMaxY=function(_18){
return (_18.origin.y+_18.size.height);
};
CGRectGetMidX=function(_19){
return (_19.origin.x+(_19.size.width)/2);
};
CGRectGetMidY=function(_1a){
return (_1a.origin.y+(_1a.size.height)/2);
};
CGRectGetMinX=function(_1b){
return (_1b.origin.x);
};
CGRectGetMinY=function(_1c){
return (_1c.origin.y);
};
CGRectGetWidth=function(_1d){
return (_1d.size.width);
};
CGRectIsEmpty=function(_1e){
return (_1e.size.width<=0||_1e.size.height<=0);
};
CGRectIsNull=function(_1f){
return (_1f.size.width<=0||_1f.size.height<=0);
};
CGRectContainsPoint=function(_20,_21){
return (_21.x>=(_20.origin.x)&&_21.y>=(_20.origin.y)&&_21.x<(_20.origin.x+_20.size.width)&&_21.y<(_20.origin.y+_20.size.height));
};
CGInsetMake=function(top,_22,_23,_24){
return {top:(top),right:(_22),bottom:(_23),left:(_24)};
};
CGInsetMakeZero=function(){
return {top:(0),right:(0),bottom:(0),left:(0)};
};
CGInsetMakeCopy=function(_25){
return {top:(_25.top),right:(_25.right),bottom:(_25.bottom),left:(_25.left)};
};
CGInsetIsEmpty=function(_26){
return ((_26).top===0&&(_26).right===0&&(_26).bottom===0&&(_26).left===0);
};
CGInsetEqualToInset=function(_27,_28){
return ((_27).top===(_28).top&&(_27).right===(_28).right&&(_27).bottom===(_28).bottom&&(_27).left===(_28).left);
};
CGMinXEdge=0;
CGMinYEdge=1;
CGMaxXEdge=2;
CGMaxYEdge=3;
CGRectNull={origin:{x:Infinity,y:Infinity},size:{width:0,height:0}};
CGRectDivide=function(_29,_2a,rem,_2b,_2c){
_2a.origin={x:_29.origin.x,y:_29.origin.y};
_2a.size={width:_29.size.width,height:_29.size.height};
rem.origin={x:_29.origin.x,y:_29.origin.y};
rem.size={width:_29.size.width,height:_29.size.height};
switch(_2c){
case CGMinXEdge:
_2a.size.width=_2b;
rem.origin.x+=_2b;
rem.size.width-=_2b;
break;
case CGMaxXEdge:
_2a.origin.x=(_2a.origin.x+_2a.size.width)-_2b;
_2a.size.width=_2b;
rem.size.width-=_2b;
break;
case CGMinYEdge:
_2a.size.height=_2b;
rem.origin.y+=_2b;
rem.size.height-=_2b;
break;
case CGMaxYEdge:
_2a.origin.y=(_2a.origin.y+_2a.size.height)-_2b;
_2a.size.height=_2b;
rem.size.height-=_2b;
}
};
CGRectContainsRect=function(_2d,_2e){
var _2f=CGRectUnion(_2d,_2e);
return ((_2f.origin.x==_2d.origin.x&&_2f.origin.y==_2d.origin.y)&&(_2f.size.width==_2d.size.width&&_2f.size.height==_2d.size.height));
};
CGRectIntersectsRect=function(_30,_31){
var _32=CGRectIntersection(_30,_31);
return !(_32.size.width<=0||_32.size.height<=0);
};
CGRectIntegral=function(_33){
_33=CGRectStandardize(_33);
var x=FLOOR((_33.origin.x)),y=FLOOR((_33.origin.y));
_33.size.width=CEIL((_33.origin.x+_33.size.width))-x;
_33.size.height=CEIL((_33.origin.y+_33.size.height))-y;
_33.origin.x=x;
_33.origin.y=y;
return _33;
};
CGRectIntersection=function(_34,_35){
var _36={origin:{x:MAX((_34.origin.x),(_35.origin.x)),y:MAX((_34.origin.y),(_35.origin.y))},size:{width:0,height:0}};
_36.size.width=MIN((_34.origin.x+_34.size.width),(_35.origin.x+_35.size.width))-(_36.origin.x);
_36.size.height=MIN((_34.origin.y+_34.size.height),(_35.origin.y+_35.size.height))-(_36.origin.y);
return (_36.size.width<=0||_36.size.height<=0)?{origin:{x:0,y:0},size:{width:0,height:0}}:_36;
};
CGRectStandardize=function(_37){
var _38=(_37.size.width),_39=(_37.size.height),_3a={origin:{x:_37.origin.x,y:_37.origin.y},size:{width:_37.size.width,height:_37.size.height}};
if(_38<0){
_3a.origin.x+=_38;
_3a.size.width=-_38;
}
if(_39<0){
_3a.origin.y+=_39;
_3a.size.height=-_39;
}
return _3a;
};
CGRectUnion=function(_3b,_3c){
var _3d=!_3b||_3b===CGRectNull,_3e=!_3c||_3c===CGRectNull;
if(_3d){
return _3e?CGRectNull:_3c;
}
if(_3e){
return _3d?CGRectNull:_3b;
}
var _3f=MIN((_3b.origin.x),(_3c.origin.x)),_40=MIN((_3b.origin.y),(_3c.origin.y)),_41=MAX((_3b.origin.x+_3b.size.width),(_3c.origin.x+_3c.size.width)),_42=MAX((_3b.origin.y+_3b.size.height),(_3c.origin.y+_3c.size.height));
return {origin:{x:_3f,y:_40},size:{width:_41-_3f,height:_42-_40}};
};
CGPointFromString=function(_43){
var _44=_43.indexOf(",");
return {x:parseFloat(_43.substr(1,_44-1)),y:parseFloat(_43.substring(_44+1,_43.length))};
};
CGSizeFromString=function(_45){
var _46=_45.indexOf(",");
return {width:parseFloat(_45.substr(1,_46-1)),height:parseFloat(_45.substring(_46+1,_45.length))};
};
CGRectFromString=function(_47){
var _48=_47.indexOf(",",_47.indexOf(",")+1);
return {origin:CGPointFromString(_47.substr(1,_48-1)),size:CGSizeFromString(_47.substring(_48+2,_47.length))};
};
CGPointFromEvent=function(_49){
return {x:_49.clientX,y:_49.clientY};
};
CGInsetUnion=function(_4a,_4b){
return {top:(_4a.top+_4b.top),right:(_4a.right+_4b.right),bottom:(_4a.bottom+_4b.bottom),left:(_4a.left+_4b.left)};
};
CGInsetDifference=function(_4c,_4d){
return {top:(_4c.top-_4d.top),right:(_4c.right-_4d.right),bottom:(_4c.bottom-_4d.bottom),left:(_4c.left-_4d.left)};
};
CGInsetFromString=function(_4e){
var _4f=_4e.substr(1,_4e.length-2).split(",");
return {top:(parseFloat(_4f[0])),right:(parseFloat(_4f[1])),bottom:(parseFloat(_4f[2])),left:(parseFloat(_4f[3]))};
};
CGInsetFromCPString=CGInsetFromString;
CPStringFromCGInset=function(_50){
return "{"+_50.top+", "+_50.left+", "+_50.bottom+", "+_50.right+"}";
};
p;12;CGGradient.jt;726;@STATIC;1.0;i;9;CGColor.ji;14;CGColorSpace.jt;676;
objj_executeFile("CGColor.j",YES);
objj_executeFile("CGColorSpace.j",YES);
kCGGradientDrawsBeforeStartLocation=1<<0;
kCGGradientDrawsAfterEndLocation=1<<1;
CGGradientCreateWithColorComponents=function(_1,_2,_3,_4){
if(_3===undefined||_3===NULL){
var _5=_2.length/4,_3=[];
for(var _6=0;_6<_5;_6++){
_3.push(_6/(_5-1));
}
}
if(_4===undefined||_4===NULL){
_4=_3.length;
}
var _7=[];
while(_4--){
var _8=_4*4;
_7[_4]=CGColorCreate(_1,_2.slice(_8,_8+4));
}
return CGGradientCreateWithColors(_1,_7,_3);
};
CGGradientCreateWithColors=function(_9,_a,_b){
return {colorspace:_9,colors:_a,locations:_b};
};
CGGradientRelease=function(){
};
CGGradientRetain=function(_c){
return _c;
};
p;8;CGPath.jt;7438;@STATIC;1.0;i;12;CGGeometry.ji;19;CGAffineTransform.jt;7378;
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CGAffineTransform.j",YES);
kCGPathElementMoveToPoint=0;
kCGPathElementAddLineToPoint=1;
kCGPathElementAddQuadCurveToPoint=2;
kCGPathElementAddCurveToPoint=3;
kCGPathElementCloseSubpath=4;
kCGPathElementAddArc=5;
kCGPathElementAddArcToPoint=6;
CGPathCreateMutable=function(){
return {count:0,start:NULL,current:NULL,elements:[]};
};
CGPathCreateMutableCopy=function(_1){
var _2=CGPathCreateMutable();
CGPathAddPath(_2,_1);
return _2;
};
CGPathCreateCopy=function(_3){
return CGPathCreateMutableCopy(_3);
};
CGPathRelease=function(_4){
};
CGPathRetain=function(_5){
return _5;
};
CGPathAddArc=function(_6,_7,x,y,_8,_9,_a,_b){
if(_7&&!(_7.a==1&&_7.b==0&&_7.c==0&&_7.d==1&&_7.tx==0&&_7.ty==0)){
var _c={x:x,y:y},_d={x:COS(_a),y:SIN(_a)},_e={x:COS(_9),y:SIN(_9)};
_d={x:_d.x*_7.a+_d.y*_7.c+_7.tx,y:_d.x*_7.b+_d.y*_7.d+_7.ty};
_e={x:_e.x*_7.a+_e.y*_7.c+_7.tx,y:_e.x*_7.b+_e.y*_7.d+_7.ty};
_c={x:_c.x*_7.a+_c.y*_7.c+_7.tx,y:_c.x*_7.b+_c.y*_7.d+_7.ty};
x=_c.x;
y=_c.y;
var _f=_a,_10=_9;
_a=ATAN2(_d.y-_7.ty,_d.x-_7.tx);
_9=ATAN2(_e.y-_7.ty,_e.x-_7.tx);
if(_a==_9&&_f!=_10){
if(_10>_f){
_a=_a-PI2;
}else{
_9=_9-PI2;
}
}
_8={width:_8,height:0};
_8={width:_8.width*_7.a+_8.height*_7.c,height:_8.width*_7.b+_8.height*_7.d};
_8=SQRT(_8.width*_8.width+_8.height*_8.height);
}
_6.current={x:x+_8*COS(_a),y:y+_8*SIN(_a)};
_6.elements[_6.count++]={type:kCGPathElementAddArc,x:x,y:y,radius:_8,startAngle:_9,endAngle:_a};
};
CGPathAddArcToPoint=function(_11,_12,x1,y1,x2,y2,_13){
};
CGPathAddCurveToPoint=function(_14,_15,_16,_17,_18,_19,x,y){
var cp1={x:_16,y:_17},cp2={x:_18,y:_19},end={x:x,y:y};
if(_15){
cp1={x:cp1.x*_15.a+cp1.y*_15.c+_15.tx,y:cp1.x*_15.b+cp1.y*_15.d+_15.ty};
cp2={x:cp2.x*_15.a+cp2.y*_15.c+_15.tx,y:cp2.x*_15.b+cp2.y*_15.d+_15.ty};
end={x:end.x*_15.a+end.y*_15.c+_15.tx,y:end.x*_15.b+end.y*_15.d+_15.ty};
}
_14.current=end;
_14.elements[_14.count++]={type:kCGPathElementAddCurveToPoint,cp1x:cp1.x,cp1y:cp1.y,cp2x:cp2.x,cp2y:cp2.y,x:end.x,y:end.y};
};
CGPathAddLines=function(_1a,_1b,_1c,_1d){
var i=1;
if(_1d===NULL){
var _1d=_1c.length;
}
if(!_1a||_1d<2){
return;
}
CGPathMoveToPoint(_1a,_1b,_1c[0].x,_1c[0].y);
for(;i<_1d;++i){
CGPathAddLineToPoint(_1a,_1b,_1c[i].x,_1c[i].y);
}
};
CGPathAddLineToPoint=function(_1e,_1f,x,y){
var _20={x:x,y:y};
if(_1f!=NULL){
_20={x:_20.x*_1f.a+_20.y*_1f.c+_1f.tx,y:_20.x*_1f.b+_20.y*_1f.d+_1f.ty};
}
_1e.elements[_1e.count++]={type:kCGPathElementAddLineToPoint,x:_20.x,y:_20.y};
_1e.current=_20;
};
CGPathAddPath=function(_21,_22,_23){
for(var i=0,_24=_23.count;i<_24;++i){
var _25=_23.elements[i];
switch(_25.type){
case kCGPathElementAddLineToPoint:
CGPathAddLineToPoint(_21,_22,_25.x,_25.y);
break;
case kCGPathElementAddCurveToPoint:
CGPathAddCurveToPoint(_21,_22,_25.cp1x,_25.cp1y,_25.cp2x,_25.cp2y,_25.x,_25.y);
break;
case kCGPathElementAddArc:
CGPathAddArc(_21,_22,_25.x,_25.y,_25.radius,_25.startAngle,_25.endAngle,_25.isClockwise);
break;
case kCGPathElementAddQuadCurveToPoint:
CGPathAddQuadCurveToPoint(_21,_22,_25.cpx,_25.cpy,_25.x,_25.y);
break;
case kCGPathElementMoveToPoint:
CGPathMoveToPoint(_21,_22,_25.x,_25.y);
break;
case kCGPathElementCloseSubpath:
CGPathCloseSubpath(_21);
break;
}
}
};
CGPathAddQuadCurveToPoint=function(_26,_27,cpx,cpy,x,y){
var cp={x:cpx,y:cpy},end={x:x,y:y};
if(_27){
cp={x:cp.x*_27.a+cp.y*_27.c+_27.tx,y:cp.x*_27.b+cp.y*_27.d+_27.ty};
end={x:end.x*_27.a+end.y*_27.c+_27.tx,y:end.x*_27.b+end.y*_27.d+_27.ty};
}
_26.elements[_26.count++]={type:kCGPathElementAddQuadCurveToPoint,cpx:cp.x,cpy:cp.y,x:end.x,y:end.y};
_26.current=end;
};
CGPathAddRect=function(_28,_29,_2a){
CGPathAddRects(_28,_29,[_2a],1);
};
CGPathAddRects=function(_2b,_2c,_2d,_2e){
var i=0;
if(_2e===NULL){
var _2e=_2d.length;
}
for(;i<_2e;++i){
var _2f=_2d[i];
CGPathMoveToPoint(_2b,_2c,(_2f.origin.x),(_2f.origin.y));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x+_2f.size.width),(_2f.origin.y));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x+_2f.size.width),(_2f.origin.y+_2f.size.height));
CGPathAddLineToPoint(_2b,_2c,(_2f.origin.x),(_2f.origin.y+_2f.size.height));
CGPathCloseSubpath(_2b);
}
};
CGPathMoveToPoint=function(_30,_31,x,y){
var _32={x:x,y:y},_33=_30.count;
if(_31!=NULL){
_32={x:_32.x*_31.a+_32.y*_31.c+_31.tx,y:_32.x*_31.b+_32.y*_31.d+_31.ty};
}
_30.start=_32;
_30.current=_32;
var _34=_30.elements[_33-1];
if(_33!=0&&_34.type==kCGPathElementMoveToPoint){
_34.x=_32.x;
_34.y=_32.y;
}else{
_30.elements[_30.count++]={type:kCGPathElementMoveToPoint,x:_32.x,y:_32.y};
}
};
var _35=4*((SQRT2-1)/3);
CGPathWithEllipseInRect=function(_36){
var _37=CGPathCreateMutable();
if((_36.size.width)==(_36.size.height)){
CGPathAddArc(_37,nil,(_36.origin.x+(_36.size.width)/2),(_36.origin.y+(_36.size.height)/2),(_36.size.width)/2,0,2*PI,YES);
}else{
var _38={width:(_36.size.width)/2,height:(_36.size.height)/2},_39={x:(_36.origin.x)+_38.width,y:(_36.origin.y)+_38.height};
CGPathMoveToPoint(_37,nil,_39.x,_39.y-_38.height);
CGPathAddCurveToPoint(_37,nil,_39.x+(_35*_38.width),_39.y-_38.height,_39.x+_38.width,_39.y-(_35*_38.height),_39.x+_38.width,_39.y);
CGPathAddCurveToPoint(_37,nil,_39.x+_38.width,_39.y+(_35*_38.height),_39.x+(_35*_38.width),_39.y+_38.height,_39.x,_39.y+_38.height);
CGPathAddCurveToPoint(_37,nil,_39.x-(_35*_38.width),_39.y+_38.height,_39.x-_38.width,_39.y+(_35*_38.height),_39.x-_38.width,_39.y);
CGPathAddCurveToPoint(_37,nil,_39.x-_38.width,_39.y-(_35*_38.height),_39.x-(_35*_38.width),_39.y-_38.height,_39.x,_39.y-_38.height);
}
CGPathCloseSubpath(_37);
return _37;
};
CGPathWithRoundedRectangleInRect=function(_3a,_3b,_3c,ne,se,sw,nw){
var _3d=CGPathCreateMutable(),_3e=(_3a.origin.x),_3f=(_3a.origin.x+_3a.size.width),_40=(_3a.origin.y),_41=(_3a.origin.y+_3a.size.height);
CGPathMoveToPoint(_3d,nil,_3e+_3b,_40);
if(ne){
CGPathAddLineToPoint(_3d,nil,_3f-_3b,_40);
CGPathAddCurveToPoint(_3d,nil,_3f-_3b,_40,_3f,_40,_3f,_40+_3b);
}else{
CGPathAddLineToPoint(_3d,nil,_3f,_40);
}
if(se){
CGPathAddLineToPoint(_3d,nil,_3f,_41-_3b);
CGPathAddCurveToPoint(_3d,nil,_3f,_41-_3b,_3f,_41,_3f-_3b,_41);
}else{
CGPathAddLineToPoint(_3d,nil,_3f,_41);
}
if(sw){
CGPathAddLineToPoint(_3d,nil,_3e+_3b,_41);
CGPathAddCurveToPoint(_3d,nil,_3e+_3b,_41,_3e,_41,_3e,_41-_3b);
}else{
CGPathAddLineToPoint(_3d,nil,_3e,_41);
}
if(nw){
CGPathAddLineToPoint(_3d,nil,_3e,_40+_3b);
CGPathAddCurveToPoint(_3d,nil,_3e,_40+_3b,_3e,_40,_3e+_3b,_40);
}else{
CGPathAddLineToPoint(_3d,nil,_3e,_40);
}
CGPathCloseSubpath(_3d);
return _3d;
};
CGPathCloseSubpath=function(_42){
var _43=_42.count;
if(_43==0||_42.elements[_43-1].type==kCGPathElementCloseSubpath){
return;
}
_42.elements[_42.count++]={type:kCGPathElementCloseSubpath,points:[_42.start]};
};
CGPathEqualToPath=function(_44,_45){
if(_44==_45){
return YES;
}
if(_44.count!=_45.count||!(_44.start.x==_45.start.x&&_44.start.y==_45.start.y)||!(_44.current.x==_45.current.x&&_44.current.y==_45.current.y)){
return NO;
}
var i=0,_46=_44.count;
for(;i<_46;++i){
var _47=_44[i],_48=_45[i];
if(_47.type!=_48.type){
return NO;
}
if((_47.type==kCGPathElementAddArc||_47.type==kCGPathElementAddArcToPoint)&&_47.radius!=_48.radius){
return NO;
}
var j=_47.points.length;
while(j--){
if(!(_47.points[j].x==_48.points[j].x&&_47.points[j].y==_48.points[j].y)){
return NO;
}
}
}
return YES;
};
CGPathGetCurrentPoint=function(_49){
return {x:_49.current.x,y:_49.current.y};
};
CGPathIsEmpty=function(_4a){
return !_4a||_4a.count==0;
};
p;18;_CPMenuBarWindow.jt;13275;@STATIC;1.0;i;9;CPPanel.ji;15;_CPMenuWindow.jt;13222;
objj_executeFile("CPPanel.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
var _1=28,_2=10,_3=10,_4=10;
var _5=nil,_6=nil;
var _7=objj_allocateClassPair(CPPanel,"_CPMenuBarWindow"),_8=_7.isa;
class_addIvars(_7,[new objj_ivar("_menu"),new objj_ivar("_highlightView"),new objj_ivar("_menuItemViews"),new objj_ivar("_trackingMenuItem"),new objj_ivar("_iconImageView"),new objj_ivar("_titleField"),new objj_ivar("_textColor"),new objj_ivar("_titleColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_titleShadowColor"),new objj_ivar("_highlightColor"),new objj_ivar("_highlightTextColor"),new objj_ivar("_highlightTextShadowColor")]);
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("init"),function(_9,_a){
with(_9){
var _b=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"contentBounds");
_b.size.height=_1;
_9=objj_msgSendSuper({receiver:_9,super_class:objj_getClass("_CPMenuBarWindow").super_class},"initWithContentRect:styleMask:",_b,CPBorderlessWindowMask);
if(_9){
objj_msgSend(_9,"setLevel:",CPMainMenuWindowLevel);
objj_msgSend(_9,"setAutoresizingMask:",CPWindowWidthSizable);
var _c=objj_msgSend(_9,"contentView");
objj_msgSend(_c,"setAutoresizesSubviews:",NO);
objj_msgSend(_9,"setBecomesKeyOnlyIfNeeded:",YES);
_iconImageView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(0,0,16,16));
objj_msgSend(_c,"addSubview:",_iconImageView);
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",13));
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_c,"addSubview:",_titleField);
}
return _9;
}
}),new objj_method(sel_getUid("setTitle:"),function(_d,_e,_f){
with(_d){
var _10=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"objectForInfoDictionaryKey:","CPBundleName");
if(!objj_msgSend(_10,"length")){
document.title=_f;
}else{
if(objj_msgSend(_f,"length")){
document.title=_f+" - "+_10;
}else{
document.title=_10;
}
}
objj_msgSend(_titleField,"setStringValue:",_f);
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_d,"tile");
}
}),new objj_method(sel_getUid("setIconImage:"),function(_11,_12,_13){
with(_11){
objj_msgSend(_iconImageView,"setImage:",_13);
objj_msgSend(_iconImageView,"setHidden:",_13==nil);
objj_msgSend(_11,"tile");
}
}),new objj_method(sel_getUid("setIconImageAlphaValue:"),function(_14,_15,_16){
with(_14){
objj_msgSend(_iconImageView,"setAlphaValue:",_16);
}
}),new objj_method(sel_getUid("setColor:"),function(_17,_18,_19){
with(_17){
if(!_19){
if(!_5){
_5=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPMenuBarWindow,"class")),"pathForResource:","_CPMenuBarWindow/_CPMenuBarWindowBackground.png"),CGSizeMake(1,28)));
}
objj_msgSend(objj_msgSend(_17,"contentView"),"setBackgroundColor:",_5);
}else{
objj_msgSend(objj_msgSend(_17,"contentView"),"setBackgroundColor:",_19);
}
}
}),new objj_method(sel_getUid("setTextColor:"),function(_1a,_1b,_1c){
with(_1a){
if(_textColor==_1c){
return;
}
_textColor=_1c;
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setTextColor:"),_textColor);
}
}),new objj_method(sel_getUid("setTitleColor:"),function(_1d,_1e,_1f){
with(_1d){
if(_titleColor==_1f){
return;
}
_titleColor=_1f;
objj_msgSend(_titleField,"setTextColor:",_1f?_1f:objj_msgSend(CPColor,"blackColor"));
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_20,_21,_22){
with(_20){
if(_textShadowColor==_22){
return;
}
_textShadowColor=_22;
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setTextShadowColor:"),_textShadowColor);
}
}),new objj_method(sel_getUid("setTitleShadowColor:"),function(_23,_24,_25){
with(_23){
if(_titleShadowColor==_25){
return;
}
_titleShadowColor=_25;
objj_msgSend(_titleField,"setTextShadowColor:",_25?_25:objj_msgSend(CPColor,"whiteColor"));
}
}),new objj_method(sel_getUid("setHighlightColor:"),function(_26,_27,_28){
with(_26){
if(_highlightColor==_28){
return;
}
_highlightColor=_28;
}
}),new objj_method(sel_getUid("setHighlightTextColor:"),function(_29,_2a,_2b){
with(_29){
if(_highlightTextColor==_2b){
return;
}
_highlightTextColor=_2b;
}
}),new objj_method(sel_getUid("setHighlightTextShadowColor:"),function(_2c,_2d,_2e){
with(_2c){
if(_highlightTextShadowColor==_2e){
return;
}
_highlightTextShadowColor=_2e;
}
}),new objj_method(sel_getUid("setMenu:"),function(_2f,_30,_31){
with(_2f){
if(_menu==_31){
return;
}
var _32=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_menu){
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidAddItemNotification,_menu);
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidChangeItemNotification,_menu);
objj_msgSend(_32,"removeObserver:name:object:",_2f,CPMenuDidRemoveItemNotification,_menu);
var _33=objj_msgSend(_menu,"itemArray"),_34=_33.length;
while(_34--){
objj_msgSend(objj_msgSend(_33[_34],"_menuItemView"),"removeFromSuperview");
}
}
_menu=_31;
if(_menu){
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidAddItem:"),CPMenuDidAddItemNotification,_menu);
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidChangeItem:"),CPMenuDidChangeItemNotification,_menu);
objj_msgSend(_32,"addObserver:selector:name:object:",_2f,sel_getUid("menuDidRemoveItem:"),CPMenuDidRemoveItemNotification,_menu);
}
_menuItemViews=[];
var _35=objj_msgSend(_2f,"contentView"),_33=objj_msgSend(_menu,"itemArray"),_34=_33.length;
for(var _36=0;_36<_34;++_36){
var _37=_33[_36],_38=objj_msgSend(_37,"_menuItemView");
_menuItemViews.push(_38);
objj_msgSend(_38,"setTextColor:",_textColor);
objj_msgSend(_38,"setHidden:",objj_msgSend(_37,"isHidden"));
objj_msgSend(_38,"synchronizeWithMenuItem");
objj_msgSend(_35,"addSubview:",_38);
}
objj_msgSend(_2f,"tile");
}
}),new objj_method(sel_getUid("menuDidChangeItem:"),function(_39,_3a,_3b){
with(_39){
var _3c=objj_msgSend(_menu,"itemAtIndex:",objj_msgSend(objj_msgSend(_3b,"userInfo"),"objectForKey:","CPMenuItemIndex")),_3d=objj_msgSend(_3c,"_menuItemView");
objj_msgSend(_3d,"setHidden:",objj_msgSend(_3c,"isHidden"));
objj_msgSend(_3d,"synchronizeWithMenuItem");
objj_msgSend(_39,"tile");
}
}),new objj_method(sel_getUid("menuDidAddItem:"),function(_3e,_3f,_40){
with(_3e){
var _41=objj_msgSend(objj_msgSend(_40,"userInfo"),"objectForKey:","CPMenuItemIndex"),_42=objj_msgSend(_menu,"itemAtIndex:",_41),_43=objj_msgSend(_42,"_menuItemView");
objj_msgSend(_menuItemViews,"insertObject:atIndex:",_43,_41);
objj_msgSend(_43,"setTextColor:",_textColor);
objj_msgSend(_43,"setHidden:",objj_msgSend(_42,"isHidden"));
objj_msgSend(_43,"synchronizeWithMenuItem");
objj_msgSend(objj_msgSend(_3e,"contentView"),"addSubview:",_43);
objj_msgSend(_3e,"tile");
}
}),new objj_method(sel_getUid("menuDidRemoveItem:"),function(_44,_45,_46){
with(_44){
var _47=objj_msgSend(objj_msgSend(_46,"userInfo"),"objectForKey:","CPMenuItemIndex"),_48=objj_msgSend(_menuItemViews,"objectAtIndex:",_47);
objj_msgSend(_menuItemViews,"removeObjectAtIndex:",_47);
objj_msgSend(_48,"removeFromSuperview");
objj_msgSend(_44,"tile");
}
}),new objj_method(sel_getUid("mouseDown:"),function(_49,_4a,_4b){
with(_49){
var _4c=CGRectInset(objj_msgSend(objj_msgSend(_49,"platformWindow"),"visibleFrame"),5,0);
_4c.size.height-=5;
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",_4b,_49,_4c,function(_4d,_4e){
objj_msgSend(_4e,"_performActionOfHighlightedItemChain");
objj_msgSend(_4e,"_highlightItemAtIndex:",CPNotFound);
});
}
}),new objj_method(sel_getUid("font"),function(_4f,_50){
with(_4f){
objj_msgSend(CPFont,"systemFontOfSize:",12);
}
}),new objj_method(sel_getUid("tile"),function(_51,_52){
with(_51){
var _53=objj_msgSend(_menu,"itemArray"),_54=0,_55=_53.length,x=_3,y=0,_56=YES;
for(;_54<_55;++_54){
var _57=_53[_54];
if(objj_msgSend(_57,"isSeparatorItem")){
x=CGRectGetWidth(objj_msgSend(_51,"frame"))-_4;
_56=NO;
continue;
}
if(objj_msgSend(_57,"isHidden")){
continue;
}
var _58=objj_msgSend(_57,"_menuItemView"),_59=objj_msgSend(_58,"frame");
if(_56){
objj_msgSend(_58,"setFrame:",CGRectMake(x,0,CGRectGetWidth(_59),_1));
x+=CGRectGetWidth(objj_msgSend(_58,"frame"));
}else{
objj_msgSend(_58,"setFrame:",CGRectMake(x-CGRectGetWidth(_59),0,CGRectGetWidth(_59),_1));
x=CGRectGetMinX(objj_msgSend(_58,"frame"));
}
}
var _5a=objj_msgSend(objj_msgSend(_51,"contentView"),"bounds"),_5b=objj_msgSend(_titleField,"frame");
if(objj_msgSend(_iconImageView,"isHidden")){
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_5a)-CGRectGetWidth(_5b))/2,(CGRectGetHeight(_5a)-CGRectGetHeight(_5b))/2));
}else{
var _5c=objj_msgSend(_iconImageView,"frame"),_5d=CGRectGetWidth(_5c),_5e=_5d+CGRectGetWidth(_5b);
objj_msgSend(_iconImageView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_5a)-_5e)/2,(CGRectGetHeight(_5a)-CGRectGetHeight(_5c))/2));
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_5a)-_5e)/2+_5d,(CGRectGetHeight(_5a)-CGRectGetHeight(_5b))/2));
}
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_5f,_60,_61,_62,_63){
with(_5f){
var _64=objj_msgSend(_5f,"frame").size;
objj_msgSendSuper({receiver:_5f,super_class:objj_getClass("_CPMenuBarWindow").super_class},"setFrame:display:animate:",_61,_62,_63);
if(!(_64.width==_61.size.width&&_64.height==_61.size.height)){
objj_msgSend(_5f,"tile");
}
}
})]);
class_addMethods(_8,[new objj_method(sel_getUid("initialize"),function(_65,_66){
with(_65){
if(_65!=objj_msgSend(_CPMenuBarWindow,"class")){
return;
}
var _67=objj_msgSend(CPBundle,"bundleForClass:",_65);
_6=objj_msgSend(CPFont,"boldSystemFontOfSize:",12);
}
}),new objj_method(sel_getUid("font"),function(_68,_69){
with(_68){
return _6;
}
})]);
var _7=objj_getClass("_CPMenuBarWindow");
if(!_7){
throw new SyntaxError("*** Could not find definition for class \"_CPMenuBarWindow\"");
}
var _8=_7.isa;
class_addMethods(_7,[new objj_method(sel_getUid("isMenuBar"),function(_6a,_6b){
with(_6a){
return YES;
}
}),new objj_method(sel_getUid("globalFrame"),function(_6c,_6d){
with(_6c){
return objj_msgSend(_6c,"frame");
}
}),new objj_method(sel_getUid("scrollingStateForPoint:"),function(_6e,_6f,_70){
with(_6e){
return _CPMenuManagerScrollingStateNone;
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_71,_72,_73){
with(_71){
var _74=objj_msgSend(_menu,"itemArray"),_75=_74.length;
while(_75--){
var _76=_74[_75];
if(objj_msgSend(_76,"isHidden")||objj_msgSend(_76,"isSeparatorItem")){
continue;
}
if(CGRectContainsPoint(objj_msgSend(_71,"rectForItemAtIndex:",_75),_73)){
return _75;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_77,_78,_79){
with(_77){
var _7a=objj_msgSend(_menu,"itemAtIndex:",_79===CPNotFound?0:_79);
return objj_msgSend(objj_msgSend(_7a,"_menuItemView"),"frame");
}
})]);
var _7=objj_allocateClassPair(_CPMenuView,"_CPMenuBarView"),_8=_7.isa;
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("rectForItemAtIndex:"),function(_7b,_7c,_7d){
with(_7b){
return objj_msgSend(_menuItemViews[_7d===CPNotFound?0:_7d],"frame");
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_7e,_7f,_80){
with(_7e){
var _81=objj_msgSend(_7e,"bounds");
if(!CGRectContainsPoint(_81,_80)){
return CPNotFound;
}
var x=_80.x,low=0,_82=_visibleMenuItemInfos.length-1;
while(low<=_82){
var _83=FLOOR(low+(_82-low)/2),_84=_visibleMenuItemInfos[_83],_85=objj_msgSend(_84.view,"frame");
if(x<CGRectGetMinX(_85)){
_82=_83-1;
}else{
if(x>CGRectGetMaxX(_85)){
low=_83+1;
}else{
return _84.index;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tile"),function(_86,_87){
with(_86){
var _88=objj_msgSend(_menu,"itemArray"),_89=0,_8a=_88.length,x=_3,y=0,_8b=YES;
for(;_89<_8a;++_89){
var _8c=_88[_89];
if(objj_msgSend(_8c,"isSeparatorItem")){
x=CGRectGetWidth(objj_msgSend(_86,"frame"))-_4;
_8b=NO;
continue;
}
if(objj_msgSend(_8c,"isHidden")){
continue;
}
var _8d=objj_msgSend(_8c,"_menuItemView"),_8e=objj_msgSend(_8d,"frame");
if(_8b){
objj_msgSend(_8d,"setFrameOrigin:",CGPointMake(x,(_1-1-CGRectGetHeight(_8e))/2));
x+=CGRectGetWidth(objj_msgSend(_8d,"frame"))+_2;
}else{
objj_msgSend(_8d,"setFrameOrigin:",CGPointMake(x-CGRectGetWidth(_8e),(_1-1-CGRectGetHeight(_8e))/2));
x=CGRectGetMinX(objj_msgSend(_8d,"frame"))-_2;
}
}
var _8f=objj_msgSend(objj_msgSend(_86,"contentView"),"bounds"),_90=objj_msgSend(_titleField,"frame");
if(objj_msgSend(_iconImageView,"isHidden")){
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8f)-CGRectGetWidth(_90))/2,(CGRectGetHeight(_8f)-CGRectGetHeight(_90))/2));
}else{
var _91=objj_msgSend(_iconImageView,"frame"),_92=CGRectGetWidth(_91),_93=_92+CGRectGetWidth(_90);
objj_msgSend(_iconImageView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8f)-_93)/2,(CGRectGetHeight(_8f)-CGRectGetHeight(_91))/2));
objj_msgSend(_titleField,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_8f)-_93)/2+_92,(CGRectGetHeight(_8f)-CGRectGetHeight(_90))/2));
}
}
})]);
p;16;_CPMenuManager.jt;17050;@STATIC;1.0;I;21;Foundation/CPObject.jt;17004;
objj_executeFile("Foundation/CPObject.j",NO);
_CPMenuManagerScrollingStateUp=-1;
_CPMenuManagerScrollingStateDown=1;
_CPMenuManagerScrollingStateNone=0;
var _1=0.5,_2=nil;
var _3=objj_allocateClassPair(CPObject,"_CPMenuManager"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_startTime"),new objj_ivar("_mouseWasDragged"),new objj_ivar("_scrollingState"),new objj_ivar("_lastGlobalLocation"),new objj_ivar("_lastMouseOverMenuView"),new objj_ivar("_constraintRect"),new objj_ivar("_menuContainerStack"),new objj_ivar("_trackingCallback"),new objj_ivar("_keyBuffer"),new objj_ivar("_previousActiveItem"),new objj_ivar("_showTimerID")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("init"),function(_5,_6){
with(_5){
if(_2){
return _2;
}
return objj_msgSendSuper({receiver:_5,super_class:objj_getClass("_CPMenuManager").super_class},"init");
}
}),new objj_method(sel_getUid("trackingMenuContainer"),function(_7,_8){
with(_7){
return _menuContainerStack[0];
}
}),new objj_method(sel_getUid("trackingMenu"),function(_9,_a){
with(_9){
return objj_msgSend(objj_msgSend(_9,"trackingMenuContainer"),"menu");
}
}),new objj_method(sel_getUid("beginTracking:menuContainer:constraintRect:callback:"),function(_b,_c,_d,_e,_f,_10){
with(_b){
var _11=objj_msgSend(_e,"menu");
if(objj_msgSend(_11,"numberOfItems")<=0){
return;
}
CPApp._activeMenu=_11;
_startTime=objj_msgSend(_d,"timestamp");
_scrollingState=_CPMenuManagerScrollingStateNone;
_constraintRect=_f;
_menuContainerStack=[_e];
_trackingCallback=_10;
if(_11===objj_msgSend(CPApp,"mainMenu")){
var _12=objj_msgSend(_d,"globalLocation"),_13=objj_msgSend(_e,"convertGlobalToBase:",_12),_14=objj_msgSend(_e,"itemIndexAtPoint:",_13),_15=_14!==CPNotFound?objj_msgSend(_11,"itemAtIndex:",_14):nil;
_menuBarButtonItemIndex=_14;
_menuBarButtonMenuContainer=_e;
if(objj_msgSend(_15,"_isMenuBarButton")){
return objj_msgSend(_b,"trackMenuBarButtonEvent:",_d);
}
}
_mouseWasDragged=NO;
objj_msgSend(_b,"trackEvent:",_d);
}
}),new objj_method(sel_getUid("trackEvent:"),function(_16,_17,_18){
with(_16){
var _19=objj_msgSend(_18,"type"),_1a=objj_msgSend(_16,"trackingMenu");
if(_19===CPAppKitDefined){
return objj_msgSend(_16,"completeTracking");
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_16,sel_getUid("trackEvent:"),CPKeyDownMask|CPPeriodicMask|CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPRightMouseUpMask|CPAppKitDefinedMask|CPScrollWheelMask,nil,nil,YES);
if(_19===CPKeyDown){
var _1b=_1a,_1c=objj_msgSend(objj_msgSend(_1b,"highlightedItem"),"submenu");
while(_1c&&objj_msgSend(_1c._menuWindow,"isVisible")){
_1b=_1c;
_1c=objj_msgSend(objj_msgSend(_1b,"highlightedItem"),"submenu");
}
if(objj_msgSend(_1b,"numberOfItems")){
objj_msgSend(_16,"interpretKeyEvent:forMenu:",_18,_1b);
}
return;
}
if(_keyBuffer){
if((objj_msgSend(_18,"timestamp")-_startTime)>(_1+objj_msgSend(_1d,"numberOfItems")/2)){
objj_msgSend(_16,"selectNextItemBeginningWith:inMenu:clearBuffer:",_keyBuffer,_1b,YES);
}
if(_19===CPPeriodic){
return;
}
}
var _1e=_19===CPPeriodic?_lastGlobalLocation:objj_msgSend(_18,"globalLocation");
if(!_1e){
return;
}
var _1f=objj_msgSend(_16,"menuContainerForPoint:",_1e),_1d=objj_msgSend(_1f,"menu"),_20=objj_msgSend(_1f,"convertGlobalToBase:",_1e),_21=_1f?objj_msgSend(_1f,"itemIndexAtPoint:",_20):CPNotFound,_22=_21!==CPNotFound?objj_msgSend(_1d,"itemAtIndex:",_21):nil;
if(_lastGlobalLocation&&CGRectContainsPoint(objj_msgSend(_1f,"globalFrame"),_lastGlobalLocation)&&!CGRectContainsPoint(objj_msgSend(_1f,"globalFrame"),_1e)){
objj_msgSend(_1d,"_highlightItemAtIndex:",CPNotFound);
}
_lastGlobalLocation=_1e;
if(!objj_msgSend(_22,"isEnabled")||objj_msgSend(_22,"_isMenuBarButton")){
_21=CPNotFound;
_22=nil;
}
var _23=objj_msgSend(_22,"view");
if(_19===CPScrollWheel&&!objj_msgSend(_1f,"isMenuBar")){
objj_msgSend(_1f,"scrollByDelta:",objj_msgSend(_18,"deltaY"));
}
if(_19===CPPeriodic){
if(_scrollingState===_CPMenuManagerScrollingStateUp){
objj_msgSend(_1f,"scrollUp");
}else{
if(_scrollingState===_CPMenuManagerScrollingStateDown){
objj_msgSend(_1f,"scrollDown");
}
}
}
if(_23){
if(!_lastMouseOverMenuView){
objj_msgSend(_1d,"_highlightItemAtIndex:",CPNotFound);
}
if(_lastMouseOverMenuView!=_23){
objj_msgSend(_23,"mouseExited:",_18);
objj_msgSend(_lastMouseOverMenuView,"mouseEntered:",_18);
_lastMouseOverMenuView=_23;
}
var _24=_1f;
if(!objj_msgSend(_24,"isKindOfClass:",CPWindow)){
_24=objj_msgSend(_24,"window");
}
objj_msgSend(_24,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_19,_20,objj_msgSend(_18,"modifierFlags"),objj_msgSend(_18,"timestamp"),_24,nil,0,objj_msgSend(_18,"clickCount"),objj_msgSend(_18,"pressure")));
}else{
if(_lastMouseOverMenuView){
objj_msgSend(_lastMouseOverMenuView,"mouseExited:",_18);
_lastMouseOverMenuView=nil;
}
if(_21!=CPNotFound){
objj_msgSend(_1d,"_highlightItemAtIndex:",_21);
}
if(_19===CPMouseMoved||_19===CPLeftMouseDragged||_19===CPLeftMouseDown||_19===CPPeriodic){
if(_19===CPLeftMouseDragged){
_mouseWasDragged=YES;
}
var _25=_scrollingState;
_scrollingState=objj_msgSend(_1f,"scrollingStateForPoint:",_1e);
if(_scrollingState!==_25){
if(_scrollingState===_CPMenuManagerScrollingStateNone){
objj_msgSend(CPEvent,"stopPeriodicEvents");
}else{
if(_25===_CPMenuManagerScrollingStateNone){
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0,0.04);
}
}
}
}else{
if(_19===CPLeftMouseUp||_19===CPRightMouseUp){
if(_mouseWasDragged||(objj_msgSend(_18,"timestamp")-_startTime>_1)){
if(_mouseWasDragged||objj_msgSend(_1f,"isMenuBar")||objj_msgSend(_22,"action")!==sel_getUid("submenuAction:")){
objj_msgSend(_1a,"cancelTracking");
}
}
}
}
}
if(_previousActiveItem!==_22){
clearTimeout(_showTimerID);
_showTimerID=undefined;
}
if(objj_msgSend(_22,"hasSubmenu")){
var _26=objj_msgSend(_1f,"rectForItemAtIndex:",_21),_27;
if(objj_msgSend(_1f,"isMenuBar")){
_27=CGPointMake(CGRectGetMinX(_26),CGRectGetMaxY(_26));
}else{
_27=CGPointMake(CGRectGetMaxX(_26),CGRectGetMinY(_26));
}
_27=objj_msgSend(_1f,"convertBaseToGlobal:",_27);
if(_showTimerID===undefined){
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",nil,_1d,CGPointMakeZero());
if(!objj_msgSend(_1f,"isMenuBar")){
_showTimerID=setTimeout(function(){
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",objj_msgSend(_22,"submenu"),objj_msgSend(_22,"menu"),_27);
},250);
}else{
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",objj_msgSend(_22,"submenu"),objj_msgSend(_22,"menu"),_27);
}
}
}else{
objj_msgSend(_16,"showMenu:fromMenu:atPoint:",nil,_1d,CGPointMakeZero());
}
_previousActiveItem=_22;
}
}),new objj_method(sel_getUid("trackMenuBarButtonEvent:"),function(_28,_29,_2a){
with(_28){
var _2b=objj_msgSend(_2a,"type");
if(_2b===CPAppKitDefined){
return objj_msgSend(_28,"completeTracking");
}
var _2c=objj_msgSend(_2a,"globalLocation"),_2d=objj_msgSend(_28,"trackingMenu"),_2e=objj_msgSend(_28,"trackingMenuContainer"),_2f=objj_msgSend(_2e,"convertGlobalToBase:",_2c);
if(objj_msgSend(_2e,"itemIndexAtPoint:",_2f)===_menuBarButtonItemIndex){
objj_msgSend(_2d,"_highlightItemAtIndex:",_menuBarButtonItemIndex);
}else{
objj_msgSend(_2d,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_28,sel_getUid("trackMenuBarButtonEvent:"),CPPeriodicMask|CPMouseMovedMask|CPLeftMouseDraggedMask|CPLeftMouseUpMask|CPAppKitDefinedMask,nil,nil,YES);
if(_2b===CPLeftMouseUp){
objj_msgSend(_2d,"cancelTracking");
}
}
}),new objj_method(sel_getUid("completeTracking"),function(_30,_31){
with(_30){
var _32=objj_msgSend(_30,"trackingMenu");
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(_30,"showMenu:fromMenu:atPoint:",nil,_32,nil);
objj_msgSend(_32,"_menuDidClose");
if(_trackingCallback){
_trackingCallback(objj_msgSend(_30,"trackingMenuContainer"),_32);
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPMenuDidEndTrackingNotification,_32);
CPApp._activeMenu=nil;
}
}),new objj_method(sel_getUid("menuContainerForPoint:"),function(_33,_34,_35){
with(_33){
var _36=objj_msgSend(_menuContainerStack,"count"),_37=_menuContainerStack[0];
if(_36===1){
return _37;
}
var _38=0,_39=_36-1;
if(objj_msgSend(_37,"isMenuBar")){
if(CGRectContainsPoint(objj_msgSend(_37,"globalFrame"),_35)){
return _37;
}
_38=1;
}
var _3a=_36,x=_35.x,_3b=Infinity,_3c=nil;
while(_3a-->_38){
var _3d=_menuContainerStack[_3a],_3e=objj_msgSend(_3d,"globalFrame"),_3f=(_3e.origin.x),_40=(_3e.origin.x+_3e.size.width);
if(x<_40&&x>=_3f){
return _3d;
}
if(_3a===_38||_3a===_39){
var _41=ABS(x<_3f?_3f-x:_40-x);
if(_41<_3b){
_3c=_3d;
_3b=_41;
}
}
}
return _3c;
}
}),new objj_method(sel_getUid("showMenu:fromMenu:atPoint:"),function(_42,_43,_44,_45,_46){
with(_42){
var _47=_menuContainerStack.length,_48=_47;
objj_msgSend(_44,"_menuWillOpen");
while(_48--){
var _49=_menuContainerStack[_48],_4a=objj_msgSend(_49,"menu");
if(_4a===_45){
break;
}
if(_4a===_44){
return objj_msgSend(_44,"_highlightItemAtIndex:",CPNotFound);
}
objj_msgSend(_49,"orderOut:",_42);
objj_msgSend(_49,"setMenu:",nil);
objj_msgSend(_CPMenuWindow,"poolMenuWindow:",_49);
objj_msgSend(_menuContainerStack,"removeObjectAtIndex:",_48);
objj_msgSend(_4a,"_menuDidClose");
}
if(!_44){
return;
}
objj_msgSend(_44,"_highlightItemAtIndex:",CPNotFound);
var _4b=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_44,objj_msgSend(_menuContainerStack[0],"font"));
objj_msgSend(_menuContainerStack,"addObject:",_4b);
objj_msgSend(_4b,"setConstraintRect:",_constraintRect);
if(_45===objj_msgSend(_42,"trackingMenu")&&objj_msgSend(objj_msgSend(_42,"trackingMenuContainer"),"isMenuBar")){
objj_msgSend(_4b,"setBackgroundStyle:",_CPMenuWindowMenuBarBackgroundStyle);
}else{
objj_msgSend(_4b,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
}
objj_msgSend(_4b,"setFrameOrigin:",_46);
objj_msgSend(_4b,"orderFront:",_42);
}
}),new objj_method(sel_getUid("interpretKeyEvent:forMenu:"),function(_4c,_4d,_4e,_4f){
with(_4c){
var _50=objj_msgSend(_4e,"modifierFlags"),_51=objj_msgSend(_4e,"charactersIgnoringModifiers"),_52=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_51,_50);
if(_52){
var _53=objj_msgSend(_52,"objectEnumerator"),obj;
while((obj=objj_msgSend(_53,"nextObject"))!==nil){
var _54=CPSelectorFromString(obj);
if(objj_msgSend(_4c,"respondsToSelector:",_54)){
objj_msgSend(_4c,"performSelector:withObject:",_54,_4f);
}
}
}else{
if(!(_50&(CPCommandKeyMask|CPControlKeyMask))){
if(!_keyBuffer){
_startTime=objj_msgSend(_4e,"timestamp");
_keyBuffer=_51;
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(CPEvent,"startPeriodicEventsAfterDelay:withPeriod:",0.1,0.1);
}else{
_keyBuffer+=_51;
}
objj_msgSend(_4c,"selectNextItemBeginningWith:inMenu:clearBuffer:",_keyBuffer,_4f,NO);
_lastGlobalLocation=Nil;
}
}
}
}),new objj_method(sel_getUid("selectNextItemBeginningWith:inMenu:clearBuffer:"),function(_55,_56,_57,_58,_59){
with(_55){
var _5a=objj_msgSend(objj_msgSend(_58,"itemArray"),"objectEnumerator"),obj;
while((obj=objj_msgSend(_5a,"nextObject"))!==nil){
if(objj_msgSend(obj,"isHidden")||!objj_msgSend(obj,"isEnabled")){
continue;
}
if(objj_msgSend(objj_msgSend(objj_msgSend(obj,"title"),"commonPrefixWithString:options:",_57,CPCaseInsensitiveSearch),"length")==objj_msgSend(_57,"length")){
objj_msgSend(_58,"_highlightItemAtIndex:",_5a._index);
break;
}
}
if(_59){
objj_msgSend(CPEvent,"stopPeriodicEvents");
_keyBuffer=Nil;
}else{
_startTime=objj_msgSend(CPEvent,"currentTimestamp");
}
}
}),new objj_method(sel_getUid("scrollToBeginningOfDocument:"),function(_5b,_5c,_5d){
with(_5b){
objj_msgSend(_5d,"_highlightItemAtIndex:",0);
}
}),new objj_method(sel_getUid("scrollToEndOfDocument:"),function(_5e,_5f,_60){
with(_5e){
objj_msgSend(_60,"_highlightItemAtIndex:",objj_msgSend(_60,"numberOfItems")-1);
}
}),new objj_method(sel_getUid("scrollPageDown:"),function(_61,_62,_63){
with(_61){
var _64=_63._menuWindow,_65=_64._menuClipView,_66=objj_msgSend(_65,"bounds").size.height,_67=objj_msgSend(_64,"itemIndexAtPoint:",CGPointMake(1,10)),_68=objj_msgSend(_64,"itemIndexAtPoint:",CGPointMake(1,_66)),_69=objj_msgSend(_63,"indexOfItem:",objj_msgSend(_63,"highlightedItem"));
if(_69==CPNotFound){
objj_msgSend(_63,"_highlightItemAtIndex:",0);
return;
}
next=_69+(_68-_67);
if(next<objj_msgSend(_63,"numberOfItems")){
objj_msgSend(_63,"_highlightItemAtIndex:",next);
}else{
objj_msgSend(_63,"_highlightItemAtIndex:",objj_msgSend(_63,"numberOfItems")-1);
}
var _6a=objj_msgSend(_63,"highlightedItem");
if(objj_msgSend(_6a,"isSeparatorItem")||objj_msgSend(_6a,"isHidden")||!objj_msgSend(_6a,"isEnabled")){
objj_msgSend(_61,"moveDown:",_63);
}
}
}),new objj_method(sel_getUid("scrollPageUp:"),function(_6b,_6c,_6d){
with(_6b){
var _6e=_6d._menuWindow,_6f=_6e._menuClipView,_70=objj_msgSend(_6f,"bounds").size.height,_71=objj_msgSend(_6e,"itemIndexAtPoint:",CGPointMake(1,10)),_72=objj_msgSend(_6e,"itemIndexAtPoint:",CGPointMake(1,_70)),_73=objj_msgSend(_6d,"indexOfItem:",objj_msgSend(_6d,"highlightedItem"));
if(_73==CPNotFound){
objj_msgSend(_6d,"_highlightItemAtIndex:",0);
return;
}
next=_73-(_72-_71);
if(next<0){
objj_msgSend(_6d,"_highlightItemAtIndex:",0);
}else{
objj_msgSend(_6d,"_highlightItemAtIndex:",next);
}
var _74=objj_msgSend(_6d,"highlightedItem");
if(objj_msgSend(_74,"isSeparatorItem")||objj_msgSend(_74,"isHidden")||!objj_msgSend(_74,"isEnabled")){
objj_msgSend(_6b,"moveUp:",_6d);
}
}
}),new objj_method(sel_getUid("moveLeft:"),function(_75,_76,_77){
with(_75){
if(objj_msgSend(_77,"supermenu")){
if(objj_msgSend(_77,"supermenu")==objj_msgSend(CPApp,"mainMenu")){
objj_msgSend(_75,"showMenu:fromMenu:atPoint:",nil,objj_msgSend(_77,"supermenu"),CGPointMakeZero());
objj_msgSend(_75,"moveUp:",objj_msgSend(CPApp,"mainMenu"));
var _78=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"highlightedItem"),_79=CGPointMake(objj_msgSend(objj_msgSend(_78,"_menuItemView"),"frameOrigin").x,objj_msgSend(objj_msgSend(_78,"_menuItemView"),"frameSize").height);
objj_msgSend(_75,"showMenu:fromMenu:atPoint:",objj_msgSend(_78,"submenu"),objj_msgSend(_78,"menu"),_79);
}else{
objj_msgSend(_75,"showMenu:fromMenu:atPoint:",nil,objj_msgSend(_77,"supermenu"),CGPointMakeZero());
}
}
}
}),new objj_method(sel_getUid("moveRight:"),function(_7a,_7b,_7c){
with(_7a){
var _7d=objj_msgSend(_7c,"highlightedItem");
if(objj_msgSend(_7d,"hasSubmenu")){
if(objj_msgSend(objj_msgSend(_7d,"submenu"),"numberOfItems")){
var _7e=objj_msgSend(_7c,"indexOfItem:",_7d),_7f=_7c._menuWindow,_80=objj_msgSend(_7f,"rectForItemAtIndex:",_7e),_81;
if(objj_msgSend(_7f,"isMenuBar")){
_81=CGPointMake(CGRectGetMinX(_80),CGRectGetMaxY(_80));
}else{
_81=CGPointMake(CGRectGetMaxX(_80),CGRectGetMinY(_80));
}
_81=objj_msgSend(_7f,"convertBaseToGlobal:",_81);
objj_msgSend(_7a,"showMenu:fromMenu:atPoint:",objj_msgSend(_7d,"submenu"),objj_msgSend(_7d,"menu"),_81);
objj_msgSend(_7a,"moveDown:",objj_msgSend(_7d,"submenu"));
}
}else{
if(objj_msgSend(_7a,"trackingMenu")==objj_msgSend(CPApp,"mainMenu")){
objj_msgSend(_7a,"showMenu:fromMenu:atPoint:",nil,_7c,CGPointMakeZero());
objj_msgSend(_7a,"moveDown:",objj_msgSend(CPApp,"mainMenu"));
var _7d=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"highlightedItem"),_82=CGPointMake(objj_msgSend(objj_msgSend(_7d,"_menuItemView"),"frameOrigin").x,objj_msgSend(objj_msgSend(_7d,"_menuItemView"),"frameSize").height);
objj_msgSend(_7a,"showMenu:fromMenu:atPoint:",objj_msgSend(_7d,"submenu"),objj_msgSend(_7d,"menu"),_82);
}
}
}
}),new objj_method(sel_getUid("moveDown:"),function(_83,_84,_85){
with(_83){
var _86=_85._highlightedIndex+1;
if(_86<objj_msgSend(_85,"numberOfItems")){
objj_msgSend(_85,"_highlightItemAtIndex:",_86);
var _87=objj_msgSend(_85,"highlightedItem");
if(objj_msgSend(_87,"isSeparatorItem")||objj_msgSend(_87,"isHidden")||!objj_msgSend(_87,"isEnabled")){
objj_msgSend(_83,"moveDown:",_85);
}
}
}
}),new objj_method(sel_getUid("moveUp:"),function(_88,_89,_8a){
with(_88){
var _8b=_8a._highlightedIndex-1;
if(_8b<0){
if(_8b!=CPNotFound){
objj_msgSend(_8a,"_highlightItemAtIndex:",objj_msgSend(_8a,"numberOfItems")-1);
}
return;
}
objj_msgSend(_8a,"_highlightItemAtIndex:",_8b);
var _8c=objj_msgSend(_8a,"highlightedItem");
if(objj_msgSend(_8c,"isSeparatorItem")||objj_msgSend(_8c,"isHidden")||!objj_msgSend(_8c,"isEnabled")){
objj_msgSend(_88,"moveUp:",_8a);
}
}
}),new objj_method(sel_getUid("insertNewline:"),function(_8d,_8e,_8f){
with(_8d){
if(objj_msgSend(objj_msgSend(_8f,"highlightedItem"),"hasSubmenu")){
objj_msgSend(_8d,"moveRight:",_8f);
}else{
objj_msgSend(_8f,"cancelTracking");
}
}
}),new objj_method(sel_getUid("cancelOperation:"),function(_90,_91,_92){
with(_90){
objj_msgSend(_92,"_highlightItemAtIndex:",CPNotFound);
objj_msgSend(CPEvent,"stopPeriodicEvents");
objj_msgSend(objj_msgSend(_90,"trackingMenu"),"cancelTracking");
}
})]);
class_addMethods(_4,[new objj_method(sel_getUid("sharedMenuManager"),function(_93,_94){
with(_93){
if(!_2){
_2=objj_msgSend(objj_msgSend(_CPMenuManager,"alloc"),"init");
}
return _2;
}
})]);
p;15;_CPMenuWindow.jt;17481;@STATIC;1.0;i;10;CPWindow.jt;17446;
objj_executeFile("CPWindow.j",YES);
var _1=[],_2=5,_3=[];
_CPMenuWindowMenuBarBackgroundStyle=0;
_CPMenuWindowPopUpBackgroundStyle=1;
_CPMenuWindowAttachedMenuBackgroundStyle=2;
var _4=500,_5=5,_6=1,_7=1,_8=5,_9=16;
var _a=objj_allocateClassPair(CPWindow,"_CPMenuWindow"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuView"),new objj_ivar("_menuClipView"),new objj_ivar("_moreAboveView"),new objj_ivar("_moreBelowView"),new objj_ivar("_unconstrainedFrame"),new objj_ivar("_constraintRect")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithContentRect:styleMask:"),function(_c,_d,_e,_f){
with(_c){
_constraintRect={origin:{x:0,y:0},size:{width:0,height:0}};
_unconstrainedFrame={origin:{x:0,y:0},size:{width:0,height:0}};
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPMenuWindow").super_class},"initWithContentRect:styleMask:",_e,CPBorderlessWindowMask);
if(_c){
objj_msgSend(_c,"setLevel:",CPPopUpMenuWindowLevel);
objj_msgSend(_c,"setHasShadow:",YES);
objj_msgSend(_c,"setShadowStyle:",CPMenuWindowShadowStyle);
objj_msgSend(_c,"setAcceptsMouseMovedEvents:",YES);
var _10=objj_msgSend(_c,"contentView");
_menuView=objj_msgSend(objj_msgSend(_CPMenuView,"alloc"),"initWithFrame:",CGRectMakeZero());
_menuClipView=objj_msgSend(objj_msgSend(CPClipView,"alloc"),"initWithFrame:",CGRectMake(_6,_5,0,0));
objj_msgSend(_menuClipView,"setDocumentView:",_menuView);
objj_msgSend(_10,"addSubview:",_menuClipView);
_moreAboveView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_moreAboveView,"setImage:",_CPMenuWindowMoreAboveImage);
objj_msgSend(_moreAboveView,"setFrameSize:",objj_msgSend(_CPMenuWindowMoreAboveImage,"size"));
objj_msgSend(_10,"addSubview:",_moreAboveView);
_moreBelowView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_moreBelowView,"setImage:",_CPMenuWindowMoreBelowImage);
objj_msgSend(_moreBelowView,"setFrameSize:",objj_msgSend(_CPMenuWindowMoreBelowImage,"size"));
objj_msgSend(_10,"addSubview:",_moreBelowView);
}
return _c;
}
}),new objj_method(sel_getUid("setFont:"),function(_11,_12,_13){
with(_11){
objj_msgSend(_menuView,"setFont:",_13);
}
}),new objj_method(sel_getUid("font"),function(_14,_15){
with(_14){
return objj_msgSend(_menuView,"font");
}
}),new objj_method(sel_getUid("setBackgroundStyle:"),function(_16,_17,_18){
with(_16){
objj_msgSend(_16,"setBackgroundColor:",objj_msgSend(objj_msgSend(_16,"class"),"backgroundColorForBackgroundStyle:",_18));
}
}),new objj_method(sel_getUid("setMenu:"),function(_19,_1a,_1b){
with(_19){
objj_msgSend(_1b,"_setMenuWindow:",_19);
objj_msgSend(_menuView,"setMenu:",_1b);
var _1c=objj_msgSend(_menuView,"frame").size;
objj_msgSend(_19,"setFrameSize:",CGSizeMake(_6+_1c.width+_7,_5+_1c.height+_8));
objj_msgSend(_menuView,"scrollPoint:",CGPointMake(0,0));
objj_msgSend(_menuClipView,"setFrame:",CGRectMake(_6,_5,_1c.width,_1c.height));
}
}),new objj_method(sel_getUid("setMinWidth:"),function(_1d,_1e,_1f){
with(_1d){
var _20=objj_msgSend(_1d,"unconstrainedFrame").size;
objj_msgSend(_1d,"setFrameSize:",CGSizeMake(MAX(_20.width,_1f),_20.height));
}
}),new objj_method(sel_getUid("menu"),function(_21,_22){
with(_21){
return objj_msgSend(_menuView,"menu");
}
}),new objj_method(sel_getUid("_menuView"),function(_23,_24){
with(_23){
return _menuView;
}
}),new objj_method(sel_getUid("orderFront:"),function(_25,_26,_27){
with(_25){
objj_msgSend(objj_msgSend(_25,"menu"),"update");
objj_msgSend(_25,"setFrame:",_unconstrainedFrame);
objj_msgSendSuper({receiver:_25,super_class:objj_getClass("_CPMenuWindow").super_class},"orderFront:",_27);
}
}),new objj_method(sel_getUid("setConstraintRect:"),function(_28,_29,_2a){
with(_28){
_constraintRect=_2a;
objj_msgSend(_28,"setFrame:",_unconstrainedFrame);
}
}),new objj_method(sel_getUid("unconstrainedFrame"),function(_2b,_2c){
with(_2b){
return {origin:{x:_unconstrainedFrame.origin.x,y:_unconstrainedFrame.origin.y},size:{width:_unconstrainedFrame.size.width,height:_unconstrainedFrame.size.height}};
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_2d,_2e,_2f){
with(_2d){
objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:",{origin:{x:_2f.x,y:_2f.y},size:{width:(_unconstrainedFrame.size.width),height:(_unconstrainedFrame.size.height)}});
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_30,_31,_32){
with(_30){
objj_msgSendSuper({receiver:_30,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:",{origin:{x:(_unconstrainedFrame.origin.x),y:(_unconstrainedFrame.origin.y)},size:{width:_32.width,height:_32.height}});
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_33,_34,_35,_36,_37){
with(_33){
_unconstrainedFrame={origin:{x:_35.origin.x,y:_35.origin.y},size:{width:_35.size.width,height:_35.size.height}};
var _38=CGRectIntersection(_unconstrainedFrame,_constraintRect);
_38.origin.x=CGRectGetMinX(_unconstrainedFrame);
_38.size.width=CGRectGetWidth(_unconstrainedFrame);
if(CGRectGetWidth(_38)>CGRectGetWidth(_constraintRect)){
_38.size.width=CGRectGetWidth(_constraintRect);
}
if(CGRectGetMaxX(_38)>CGRectGetMaxX(_constraintRect)){
_38.origin.x-=CGRectGetMaxX(_38)-CGRectGetMaxX(_constraintRect);
}
if(CGRectGetMinX(_38)<CGRectGetMinX(_constraintRect)){
_38.origin.x=CGRectGetMinX(_constraintRect);
}
objj_msgSendSuper({receiver:_33,super_class:objj_getClass("_CPMenuWindow").super_class},"setFrame:display:animate:",_38,_36,_37);
var _39=CGPointMake(CGRectGetMinX(_35)+_6,CGRectGetMinY(_35)+_5),_3a=_39.y<CGRectGetMinY(_38)+_5,_3b=_39.y+CGRectGetHeight(objj_msgSend(_menuView,"frame"))>CGRectGetMaxY(_38)-_8,_3c=_5,_3d=_8,_3e=objj_msgSend(_33,"contentView"),_3f=objj_msgSend(_3e,"bounds");
if(_3a){
_3c+=_9;
var _40=objj_msgSend(_moreAboveView,"frame");
objj_msgSend(_moreAboveView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_3f)-CGRectGetWidth(_40))/2,(_5+_9-CGRectGetHeight(_40))/2));
}
objj_msgSend(_moreAboveView,"setHidden:",!_3a);
if(_3b){
_3d+=_9;
objj_msgSend(_moreBelowView,"setFrameOrigin:",CGPointMake((CGRectGetWidth(_3f)-CGRectGetWidth(objj_msgSend(_moreBelowView,"frame")))/2,CGRectGetHeight(_3f)-_9-_8));
}
objj_msgSend(_moreBelowView,"setHidden:",!_3b);
var _41=CGRectMakeZero();
_41.origin.x=_6;
_41.origin.y=_3c;
_41.size.width=CGRectGetWidth(_38)-_6-_7;
_41.size.height=CGRectGetHeight(_38)-_3c-_3d;
objj_msgSend(_menuClipView,"setFrame:",_41);
objj_msgSend(_menuView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_41),CGRectGetHeight(objj_msgSend(_menuView,"frame"))));
objj_msgSend(_menuView,"scrollPoint:",CGPointMake(0,objj_msgSend(_33,"convertBaseToGlobal:",_41.origin).y-_39.y));
}
}),new objj_method(sel_getUid("hasMinimumNumberOfVisibleItems"),function(_42,_43){
with(_42){
var _44=objj_msgSend(_menuView,"visibleRect");
if(CGRectIsEmpty(_44)){
return NO;
}
var _45=objj_msgSend(_menuView,"numberOfUnhiddenItems"),_46=MIN(_45,3),_47=0,_48=objj_msgSend(_menuView,"itemIndexAtPoint:",objj_msgSend(_menuView,"convertPoint:fromView:",objj_msgSend(_menuClipView,"frame").origin,nil));
for(;_48<_45&&_47<_46;++_48){
var _49=objj_msgSend(_menuView,"rectForUnhiddenItemAtIndex:",_48),_4a=CGRectIntersection(_44,_49);
if(CGRectIsEmpty(_4a)){
break;
}
if(CGRectEqualToRect(_4a,_49)){
++_47;
}
}
return _47>=_46;
}
}),new objj_method(sel_getUid("canScrollUp"),function(_4b,_4c){
with(_4b){
return !objj_msgSend(_moreAboveView,"isHidden");
}
}),new objj_method(sel_getUid("canScrollDown"),function(_4d,_4e){
with(_4d){
return !objj_msgSend(_moreBelowView,"isHidden");
}
}),new objj_method(sel_getUid("canScroll"),function(_4f,_50){
with(_4f){
return objj_msgSend(_4f,"canScrollUp")||objj_msgSend(_4f,"canScrollDown");
}
}),new objj_method(sel_getUid("scrollByDelta:"),function(_51,_52,_53){
with(_51){
if(_53===0){
return;
}
if(_53>0&&!objj_msgSend(_51,"canScrollDown")){
return;
}
if(_53<0&&!objj_msgSend(_51,"canScrollUp")){
return;
}
_unconstrainedFrame.origin.y-=_53;
objj_msgSend(_51,"setFrame:",_unconstrainedFrame);
}
}),new objj_method(sel_getUid("scrollUp"),function(_54,_55){
with(_54){
objj_msgSend(_54,"scrollByDelta:",-10);
}
}),new objj_method(sel_getUid("scrollDown"),function(_56,_57){
with(_56){
objj_msgSend(_56,"scrollByDelta:",10);
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("menuWindowWithMenu:font:"),function(_58,_59,_5a,_5b){
with(_58){
var _5c=nil;
if(_1.length){
_5c=_1.pop();
objj_msgSend(_5c,"setFrameOrigin:",CGPointMakeZero());
}else{
_5c=objj_msgSend(objj_msgSend(_CPMenuWindow,"alloc"),"init");
}
objj_msgSend(_5c,"setFont:",_5b);
objj_msgSend(_5c,"setMenu:",_5a);
objj_msgSend(_5c,"setMinWidth:",objj_msgSend(_5a,"minimumWidth"));
return _5c;
}
}),new objj_method(sel_getUid("poolMenuWindow:"),function(_5d,_5e,_5f){
with(_5d){
if(!_5f||_1.length>=_2){
return;
}
_1.push(_5f);
}
}),new objj_method(sel_getUid("initialize"),function(_60,_61){
with(_60){
if(_60!=objj_msgSend(_CPMenuWindow,"class")){
return;
}
var _62=objj_msgSend(CPBundle,"bundleForClass:",_60);
_CPMenuWindowMoreAboveImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_62,"pathForResource:","_CPMenuWindow/_CPMenuWindowMoreAbove.png"),CGSizeMake(38,18));
_CPMenuWindowMoreBelowImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_62,"pathForResource:","_CPMenuWindow/_CPMenuWindowMoreBelow.png"),CGSizeMake(38,18));
}
}),new objj_method(sel_getUid("_standardLeftMargin"),function(_63,_64){
with(_63){
return _6;
}
}),new objj_method(sel_getUid("backgroundColorForBackgroundStyle:"),function(_65,_66,_67){
with(_65){
var _68=_3[_67];
if(!_68){
var _69=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_65,"class"));
if(_67==_CPMenuWindowPopUpBackgroundStyle){
_68=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded0.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow1.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded2.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded6.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow7.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded8.png"),CGSizeMake(4,4))]));
}else{
if(_67==_CPMenuWindowMenuBarBackgroundStyle){
_68=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,0)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow3.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow5.png"),CGSizeMake(4,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded6.png"),CGSizeMake(4,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindow7.png"),CGSizeMake(1,4)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_69,"pathForResource:","_CPMenuWindow/_CPMenuWindowRounded8.png"),CGSizeMake(4,4))]));
}
}
_3[_67]=_68;
}
return _68;
}
})]);
var _a=objj_getClass("_CPMenuWindow");
if(!_a){
throw new SyntaxError("*** Could not find definition for class \"_CPMenuWindow\"");
}
var _b=_a.isa;
class_addMethods(_a,[new objj_method(sel_getUid("globalFrame"),function(_6a,_6b){
with(_6a){
return objj_msgSend(_6a,"frame");
}
}),new objj_method(sel_getUid("isMenuBar"),function(_6c,_6d){
with(_6c){
return NO;
}
}),new objj_method(sel_getUid("scrollingStateForPoint:"),function(_6e,_6f,_70){
with(_6e){
var _71=objj_msgSend(_6e,"frame");
if(!CPRectContainsPoint(_71,_70)||!objj_msgSend(_6e,"canScroll")){
return _CPMenuManagerScrollingStateNone;
}
if(_70.y<CGRectGetMinY(_71)+_5+_9&&!objj_msgSend(_moreAboveView,"isHidden")){
return _CPMenuManagerScrollingStateUp;
}
if(_70.y>CGRectGetMaxY(_71)-_8-_9&&!objj_msgSend(_moreBelowView,"isHidden")){
return _CPMenuManagerScrollingStateDown;
}
return _CPMenuManagerScrollingStateNone;
}
}),new objj_method(sel_getUid("deltaYForItemAtIndex:"),function(_72,_73,_74){
with(_72){
return _5+CGRectGetMinY(objj_msgSend(_menuView,"rectForItemAtIndex:",_74));
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_75,_76,_77){
with(_75){
return objj_msgSend(_menuView,"convertRect:toView:",objj_msgSend(_menuView,"rectForItemAtIndex:",_77),nil);
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_78,_79,_7a){
with(_78){
if(!CGRectContainsPoint(objj_msgSend(_menuClipView,"bounds"),objj_msgSend(_menuClipView,"convertPoint:fromView:",_7a,nil))){
return NO;
}
return objj_msgSend(_menuView,"itemIndexAtPoint:",objj_msgSend(_menuView,"convertPoint:fromView:",_7a,nil));
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItemViews"),new objj_ivar("_visibleMenuItemInfos"),new objj_ivar("_font")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("font"),function(_7b,_7c){
with(_7b){
return _font;
}
}),new objj_method(sel_getUid("setFont:"),function(_7d,_7e,_7f){
with(_7d){
_font=_7f;
}
}),new objj_method(sel_getUid("numberOfUnhiddenItems"),function(_80,_81){
with(_80){
return _visibleMenuItemInfos.length;
}
}),new objj_method(sel_getUid("rectForUnhiddenItemAtIndex:"),function(_82,_83,_84){
with(_82){
return objj_msgSend(_82,"rectForItemAtIndex:",_visibleMenuItemInfos[_84].index);
}
}),new objj_method(sel_getUid("rectForItemAtIndex:"),function(_85,_86,_87){
with(_85){
return objj_msgSend(_menuItemViews[_87===CPNotFound?0:_87],"frame");
}
}),new objj_method(sel_getUid("itemIndexAtPoint:"),function(_88,_89,_8a){
with(_88){
var x=_8a.x,_8b=objj_msgSend(_88,"bounds");
if(x<CGRectGetMinX(_8b)||x>CGRectGetMaxX(_8b)){
return CPNotFound;
}
var y=_8a.y,low=0,_8c=_visibleMenuItemInfos.length-1;
while(low<=_8c){
var _8d=FLOOR(low+(_8c-low)/2),_8e=_visibleMenuItemInfos[_8d],_8f=objj_msgSend(_8e.view,"frame");
if(y<CGRectGetMinY(_8f)){
_8c=_8d-1;
}else{
if(y>CGRectGetMaxY(_8f)){
low=_8d+1;
}else{
return _8e.index;
}
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("tile"),function(_90,_91){
with(_90){
objj_msgSend(_menuItemViews,"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
_menuItemViews=[];
_visibleMenuItemInfos=[];
var _92=objj_msgSend(_90,"menu");
if(!_92){
return;
}
var _93=objj_msgSend(_92,"itemArray"),_94=0,_95=objj_msgSend(_93,"count"),_96=0,y=0,_97=objj_msgSend(_92,"showsStateColumn");
for(;_94<_95;++_94){
var _98=_93[_94],_99=objj_msgSend(_98,"_menuItemView");
_menuItemViews.push(_99);
if(objj_msgSend(_98,"isHidden")){
continue;
}
_visibleMenuItemInfos.push({view:_99,index:_94});
objj_msgSend(_99,"setFont:",_font);
objj_msgSend(_99,"setShowsStateColumn:",_97);
objj_msgSend(_99,"synchronizeWithMenuItem");
objj_msgSend(_99,"setFrameOrigin:",CGPointMake(0,y));
objj_msgSend(_90,"addSubview:",_99);
var _9a=objj_msgSend(_99,"minSize"),_9b=_9a.width;
if(_96<_9b){
_96=_9b;
}
y+=_9a.height;
}
for(_94=0;_94<_95;++_94){
var _99=_menuItemViews[_94];
objj_msgSend(_99,"setFrameSize:",CGSizeMake(_96,CGRectGetHeight(objj_msgSend(_99,"frame"))));
}
objj_msgSend(_90,"setAutoresizesSubviews:",NO);
objj_msgSend(_90,"setFrameSize:",CGSizeMake(_96,y));
objj_msgSend(_90,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("setMenu:"),function(_9c,_9d,_9e){
with(_9c){
objj_msgSendSuper({receiver:_9c,super_class:objj_getClass("_CPMenuView").super_class},"setMenu:",_9e);
objj_msgSend(_9c,"tile");
}
})]);
p;8;CPMenu.jt;26188;@STATIC;1.0;I;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPString.ji;16;_CPMenuManager.ji;15;CPApplication.ji;12;CPClipView.ji;12;CPMenuItem.ji;9;CPPanel.ji;18;_CPMenuBarWindow.ji;15;_CPMenuWindow.jt;25918;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("_CPMenuManager.j",YES);
objj_executeFile("CPApplication.j",YES);
objj_executeFile("CPClipView.j",YES);
objj_executeFile("CPMenuItem.j",YES);
objj_executeFile("CPPanel.j",YES);
CPMenuDidAddItemNotification="CPMenuDidAddItemNotification";
CPMenuDidChangeItemNotification="CPMenuDidChangeItemNotification";
CPMenuDidRemoveItemNotification="CPMenuDidRemoveItemNotification";
CPMenuDidEndTrackingNotification="CPMenuDidEndTrackingNotification";
var _1=28;
var _2=NO,_3="",_4=nil,_5=1,_6=nil,_7=nil;
var _8=objj_allocateClassPair(CPObject,"CPMenu"),_9=_8.isa;
class_addIvars(_8,[new objj_ivar("_supermenu"),new objj_ivar("_title"),new objj_ivar("_name"),new objj_ivar("_font"),new objj_ivar("_minimumWidth"),new objj_ivar("_items"),new objj_ivar("_autoenablesItems"),new objj_ivar("_showsStateColumn"),new objj_ivar("_delegate"),new objj_ivar("_highlightedIndex"),new objj_ivar("_menuWindow")]);
objj_registerClassPair(_8);
class_addMethods(_8,[new objj_method(sel_getUid("menuBarHeight"),function(_a,_b){
with(_a){
if(_a===objj_msgSend(CPApp,"mainMenu")){
return _1;
}
return 0;
}
}),new objj_method(sel_getUid("initWithTitle:"),function(_c,_d,_e){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("CPMenu").super_class},"init");
if(_c){
_title=_e;
_items=[];
_autoenablesItems=YES;
_showsStateColumn=YES;
objj_msgSend(_c,"setMinimumWidth:",0);
}
return _c;
}
}),new objj_method(sel_getUid("init"),function(_f,_10){
with(_f){
return objj_msgSend(_f,"initWithTitle:","");
}
}),new objj_method(sel_getUid("insertItem:atIndex:"),function(_11,_12,_13,_14){
with(_11){
objj_msgSend(_11,"insertObject:inItemsAtIndex:",_13,_14);
}
}),new objj_method(sel_getUid("insertItemWithTitle:action:keyEquivalent:atIndex:"),function(_15,_16,_17,_18,_19,_1a){
with(_15){
var _1b=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_17,_18,_19);
objj_msgSend(_15,"insertItem:atIndex:",_1b,_1a);
return _1b;
}
}),new objj_method(sel_getUid("addItem:"),function(_1c,_1d,_1e){
with(_1c){
objj_msgSend(_1c,"insertItem:atIndex:",_1e,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("addItemWithTitle:action:keyEquivalent:"),function(_1f,_20,_21,_22,_23){
with(_1f){
return objj_msgSend(_1f,"insertItemWithTitle:action:keyEquivalent:atIndex:",_21,_22,_23,objj_msgSend(_items,"count"));
}
}),new objj_method(sel_getUid("removeItem:"),function(_24,_25,_26){
with(_24){
objj_msgSend(_24,"removeItemAtIndex:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_26));
}
}),new objj_method(sel_getUid("removeItemAtIndex:"),function(_27,_28,_29){
with(_27){
objj_msgSend(_27,"removeObjectFromItemsAtIndex:",_29);
}
}),new objj_method(sel_getUid("removeAllItems"),function(_2a,_2b){
with(_2a){
var _2c=objj_msgSend(_items,"count");
while(_2c--){
objj_msgSend(_items[_2c],"setMenu:",nil);
}
_highlightedIndex=CPNotFound;
objj_msgSend(_2a,"willChangeValueForKey:","items");
_items=objj_msgSend(CPMutableArray,"array");
objj_msgSend(_2a,"didChangeValueForKey:","items");
}
}),new objj_method(sel_getUid("itemChanged:"),function(_2d,_2e,_2f){
with(_2d){
if(objj_msgSend(_2f,"menu")!==_2d){
return;
}
objj_msgSend(_2f,"setValue:forKey:",objj_msgSend(_2f,"valueForKey:","changeCount")+1,"changeCount");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidChangeItemNotification,_2d,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",objj_msgSend(_items,"indexOfObjectIdenticalTo:",_2f),"CPMenuItemIndex"));
}
}),new objj_method(sel_getUid("itemWithTag:"),function(_30,_31,_32){
with(_30){
var _33=objj_msgSend(_30,"indexOfItemWithTag:",_32);
if(_33==CPNotFound){
return nil;
}
return _items[_33];
}
}),new objj_method(sel_getUid("itemWithTitle:"),function(_34,_35,_36){
with(_34){
var _37=objj_msgSend(_34,"indexOfItemWithTitle:",_36);
if(_37==CPNotFound){
return nil;
}
return _items[_37];
}
}),new objj_method(sel_getUid("itemAtIndex:"),function(_38,_39,_3a){
with(_38){
return objj_msgSend(_items,"objectAtIndex:",_3a);
}
}),new objj_method(sel_getUid("numberOfItems"),function(_3b,_3c){
with(_3b){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("itemArray"),function(_3d,_3e){
with(_3d){
return _items;
}
}),new objj_method(sel_getUid("indexOfItem:"),function(_3f,_40,_41){
with(_3f){
if(objj_msgSend(_41,"menu")!==_3f){
return CPNotFound;
}
return objj_msgSend(_items,"indexOfObjectIdenticalTo:",_41);
}
}),new objj_method(sel_getUid("indexOfItemWithTitle:"),function(_42,_43,_44){
with(_42){
var _45=0,_46=_items.length;
for(;_45<_46;++_45){
if(objj_msgSend(_items[_45],"title")===_44){
return _45;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithTag:"),function(_47,_48,_49){
with(_47){
var _4a=0,_4b=_items.length;
for(;_4a<_4b;++_4a){
if(objj_msgSend(_items[_4a],"tag")==_49){
return _4a;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithTarget:andAction:"),function(_4c,_4d,_4e,_4f){
with(_4c){
var _50=0,_51=_items.length;
for(;_50<_51;++_50){
var _52=_items[_50];
if(objj_msgSend(_52,"target")==_4e&&(!_4f||objj_msgSend(_52,"action")==_4f)){
return _50;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"),function(_53,_54,_55){
with(_53){
var _56=0,_57=_items.length;
for(;_56<_57;++_56){
if(objj_msgSend(objj_msgSend(_items[_56],"representedObject"),"isEqual:",_55)){
return _56;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("indexOfItemWithSubmenu:"),function(_58,_59,_5a){
with(_58){
var _5b=0,_5c=_items.length;
for(;_5b<_5c;++_5b){
if(objj_msgSend(_items[_5b],"submenu")==_5a){
return _5b;
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("setSubmenu:forItem:"),function(_5d,_5e,_5f,_60){
with(_5d){
objj_msgSend(_60,"setTarget:",_60);
objj_msgSend(_60,"setAction:",sel_getUid("submenuAction:"));
objj_msgSend(_60,"setSubmenu:",_5f);
}
}),new objj_method(sel_getUid("submenuAction:"),function(_61,_62,_63){
with(_61){
}
}),new objj_method(sel_getUid("supermenu"),function(_64,_65){
with(_64){
return _supermenu;
}
}),new objj_method(sel_getUid("setSupermenu:"),function(_66,_67,_68){
with(_66){
_supermenu=_68;
}
}),new objj_method(sel_getUid("isTornOff"),function(_69,_6a){
with(_69){
return !_supermenu||_69==objj_msgSend(CPApp,"mainMenu");
}
}),new objj_method(sel_getUid("setAutoenablesItems:"),function(_6b,_6c,_6d){
with(_6b){
_autoenablesItems=_6d;
}
}),new objj_method(sel_getUid("autoenablesItems"),function(_6e,_6f){
with(_6e){
return _autoenablesItems;
}
}),new objj_method(sel_getUid("update"),function(_70,_71){
with(_70){
if(!objj_msgSend(_70,"autoenablesItems")){
return;
}
var _72=objj_msgSend(_70,"itemArray");
for(var i=0;i<objj_msgSend(_72,"count");i++){
var _73=objj_msgSend(_72,"objectAtIndex:",i);
if(objj_msgSend(_73,"hasSubmenu")){
continue;
}
var _74=objj_msgSend(CPApp,"targetForAction:to:from:",objj_msgSend(_73,"action"),objj_msgSend(_73,"target"),_73);
if(!_74||!objj_msgSend(_74,"respondsToSelector:",objj_msgSend(_73,"action"))){
objj_msgSend(_73,"setEnabled:",NO);
}else{
if(objj_msgSend(_74,"respondsToSelector:",sel_getUid("validateMenuItem:"))){
objj_msgSend(_73,"setEnabled:",objj_msgSend(_74,"validateMenuItem:",_73));
}else{
if(objj_msgSend(_74,"respondsToSelector:",sel_getUid("validateUserInterfaceItem:"))){
objj_msgSend(_73,"setEnabled:",objj_msgSend(_74,"validateUserInterfaceItem:",_73));
}
}
}
}
objj_msgSend(objj_msgSend(_menuWindow,"_menuView"),"tile");
}
}),new objj_method(sel_getUid("setTitle:"),function(_75,_76,_77){
with(_75){
_title=_77;
}
}),new objj_method(sel_getUid("title"),function(_78,_79){
with(_78){
return _title;
}
}),new objj_method(sel_getUid("setMinimumWidth:"),function(_7a,_7b,_7c){
with(_7a){
_minimumWidth=_7c;
}
}),new objj_method(sel_getUid("minimumWidth"),function(_7d,_7e){
with(_7d){
return _minimumWidth;
}
}),new objj_method(sel_getUid("_performActionOfHighlightedItemChain"),function(_7f,_80){
with(_7f){
var _81=objj_msgSend(_7f,"highlightedItem");
while(objj_msgSend(_81,"submenu")&&objj_msgSend(_81,"action")===sel_getUid("submenuAction:")){
_81=objj_msgSend(objj_msgSend(_81,"submenu"),"highlightedItem");
}
if(_81&&objj_msgSend(_81,"isEnabled")){
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_81,"action"),objj_msgSend(_81,"target"),_81);
}
}
}),new objj_method(sel_getUid("popUpMenuPositioningItem:atLocation:inView:callback:"),function(_82,_83,_84,_85,_86,_87){
with(_82){
objj_msgSend(_82,"_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:",_84,_85,_85.y,_85.y,_86,_87);
}
}),new objj_method(sel_getUid("_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:"),function(_88,_89,_8a,_8b,_8c,_8d,_8e,_8f){
with(_88){
var _90=0;
if(_8a){
_90=objj_msgSend(_88,"indexOfItem:",_8a);
if(_90===CPNotFound){
throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, menu item "+_8a+" is not present in menu "+_88;
}
}
var _91=objj_msgSend(_8e,"window");
if(_8e&&!_91){
throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, view is not in any window.";
}
objj_msgSend(_88,"_menuWillOpen");
if(_8e){
_8b=objj_msgSend(_91,"convertBaseToGlobal:",objj_msgSend(_8e,"convertPoint:toView:",_8b,nil));
}
var _92=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_88,objj_msgSend(_88,"font"));
objj_msgSend(_92,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
if(_8a){
_8b.y-=objj_msgSend(_92,"deltaYForItemAtIndex:",_90);
}
var _93=objj_msgSend(CPMenu,"_constraintRectForView:",_8e);
objj_msgSend(_92,"setFrameOrigin:",_8b);
objj_msgSend(_92,"setConstraintRect:",_93);
if(!objj_msgSend(_92,"hasMinimumNumberOfVisibleItems")){
var _94=objj_msgSend(_92,"unconstrainedFrame"),_95=CGRectGetMinY(_94);
if(_95>=CGRectGetMaxY(_93)||objj_msgSend(_92,"canScrollDown")){
if(_8e){
_8c=objj_msgSend(_91,"convertBaseToGlobal:",objj_msgSend(_8e,"convertPoint:toView:",CGPointMake(0,_8c),nil)).y;
}
_94.origin.y=MIN(CGRectGetMaxY(_93),_8c)-CGRectGetHeight(_94);
}else{
if(_95<CGRectGetMinY(_93)||objj_msgSend(_92,"canScrollUp")){
if(_8e){
_8d=objj_msgSend(_91,"convertBaseToGlobal:",objj_msgSend(_8e,"convertPoint:toView:",CGPointMake(0,_8d),nil)).y;
}
_94.origin.y=MAX(CGRectGetMinY(_93),_8d);
}
}
objj_msgSend(_92,"setFrameOrigin:",CGRectIntersection(_94,_93).origin);
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_92,"setPlatformWindow:",objj_msgSend(objj_msgSend(_8e,"window"),"platformWindow"));
}
objj_msgSend(_92,"orderFront:",_88);
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",objj_msgSend(CPApp,"currentEvent"),_92,_93,objj_msgSend(CPMenu,"trackingCallbackWithCallback:",_8f));
}
}),new objj_method(sel_getUid("setShowsStateColumn:"),function(_96,_97,_98){
with(_96){
_showsStateColumn=_98;
}
}),new objj_method(sel_getUid("showsStateColumn"),function(_99,_9a){
with(_99){
return _showsStateColumn;
}
}),new objj_method(sel_getUid("highlightedItem"),function(_9b,_9c){
with(_9b){
if(_highlightedIndex<0){
return nil;
}
var _9d=_items[_highlightedIndex];
if(objj_msgSend(_9d,"isSeparatorItem")){
return nil;
}
return _9d;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_9e,_9f,_a0){
with(_9e){
_delegate=_a0;
}
}),new objj_method(sel_getUid("delegate"),function(_a1,_a2){
with(_a1){
return _delegate;
}
}),new objj_method(sel_getUid("_menuWillOpen"),function(_a3,_a4){
with(_a3){
var _a5=objj_msgSend(_a3,"delegate");
if(objj_msgSend(_a5,"respondsToSelector:",sel_getUid("menuWillOpen:"))){
objj_msgSend(_a5,"menuWillOpen:",_a3);
}
}
}),new objj_method(sel_getUid("_menuDidClose"),function(_a6,_a7){
with(_a6){
var _a8=objj_msgSend(_a6,"delegate");
if(objj_msgSend(_a8,"respondsToSelector:",sel_getUid("menuDidClose:"))){
objj_msgSend(_a8,"menuDidClose:",_a6);
}
}
}),new objj_method(sel_getUid("cancelTracking"),function(_a9,_aa){
with(_a9){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"performSelector:target:argument:order:modes:",sel_getUid("_fireCancelTrackingEvent"),_a9,nil,0,[CPDefaultRunLoopMode]);
}
}),new objj_method(sel_getUid("_fireCancelTrackingEvent"),function(_ab,_ac){
with(_ab){
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:",CPAppKitDefined,{x:0,y:0},0,0,0,0,0,0,0));
objj_msgSend(_CPDisplayServer,"run");
}
}),new objj_method(sel_getUid("_setMenuWindow:"),function(_ad,_ae,_af){
with(_ad){
_menuWindow=_af;
}
}),new objj_method(sel_getUid("setFont:"),function(_b0,_b1,_b2){
with(_b0){
_font=_b2;
}
}),new objj_method(sel_getUid("font"),function(_b3,_b4){
with(_b3){
return _font;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(_b5,_b6,_b7){
with(_b5){
if(_autoenablesItems){
objj_msgSend(_b5,"update");
}
var _b8=0,_b9=_items.length,_ba=objj_msgSend(_b7,"charactersIgnoringModifiers"),_bb=objj_msgSend(_b7,"modifierFlags");
for(;_b8<_b9;++_b8){
var _bc=_items[_b8],_bd=objj_msgSend(_bc,"keyEquivalentModifierMask");
if(objj_msgSend(_b7,"_triggersKeyEquivalent:withModifierMask:",objj_msgSend(_bc,"keyEquivalent"),objj_msgSend(_bc,"keyEquivalentModifierMask"))){
if(objj_msgSend(_bc,"isEnabled")){
objj_msgSend(_b5,"performActionForItemAtIndex:",_b8);
}else{
}
return YES;
}
if(objj_msgSend(objj_msgSend(_bc,"submenu"),"performKeyEquivalent:",_b7)){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("performActionForItemAtIndex:"),function(_be,_bf,_c0){
with(_be){
var _c1=_items[_c0];
objj_msgSend(CPApp,"sendAction:to:from:",objj_msgSend(_c1,"action"),objj_msgSend(_c1,"target"),_c1);
}
}),new objj_method(sel_getUid("_highlightItemAtIndex:"),function(_c2,_c3,_c4){
with(_c2){
if(_highlightedIndex===_c4){
return;
}
if(_highlightedIndex!==CPNotFound){
objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"highlight:",NO);
}
_highlightedIndex=_c4;
if(_highlightedIndex!==CPNotFound){
objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"highlight:",YES);
}
if(_highlightedIndex!==CPNotFound&&_menuWindow){
objj_msgSend(_menuWindow._menuView,"scrollRectToVisible:",objj_msgSend(objj_msgSend(_items[_highlightedIndex],"_menuItemView"),"frame"));
}
}
}),new objj_method(sel_getUid("_setMenuName:"),function(_c5,_c6,_c7){
with(_c5){
if(_name===_c7){
return;
}
_name=_c7;
if(_name==="CPMainMenu"){
objj_msgSend(CPApp,"setMainMenu:",_c5);
}
}
}),new objj_method(sel_getUid("_menuName"),function(_c8,_c9){
with(_c8){
return _name;
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_ca,_cb){
with(_ca){
if(_name==="_CPMainMenu"){
objj_msgSend(_ca,"_setMenuName:","CPMainMenu");
objj_msgSend(CPMenu,"setMenuBarVisible:",YES);
}
}
}),new objj_method(sel_getUid("_menuWithName:"),function(_cc,_cd,_ce){
with(_cc){
if(_ce===_name){
return _cc;
}
for(var i=0,_cf=objj_msgSend(_items,"count");i<_cf;i++){
var _d0=objj_msgSend(objj_msgSend(_items[i],"submenu"),"_menuWithName:",_ce);
if(_d0){
return _d0;
}
}
return nil;
}
})]);
class_addMethods(_9,[new objj_method(sel_getUid("initialize"),function(_d1,_d2){
with(_d1){
if(_d1!==CPMenu){
return;
}
objj_msgSend(objj_msgSend(_d1,"class"),"setMenuBarAttributes:",objj_msgSend(CPDictionary,"dictionary"));
}
}),new objj_method(sel_getUid("menuBarVisible"),function(_d3,_d4){
with(_d3){
return _2;
}
}),new objj_method(sel_getUid("setMenuBarVisible:"),function(_d5,_d6,_d7){
with(_d5){
if(_2===_d7){
return;
}
_2=_d7;
if(objj_msgSend(CPPlatform,"supportsNativeMainMenu")){
return;
}
if(_d7){
if(!_7){
_7=objj_msgSend(objj_msgSend(_CPMenuBarWindow,"alloc"),"init");
}
objj_msgSend(_7,"setMenu:",objj_msgSend(CPApp,"mainMenu"));
objj_msgSend(_7,"setTitle:",_3);
objj_msgSend(_7,"setIconImage:",_4);
objj_msgSend(_7,"setIconImageAlphaValue:",_5);
objj_msgSend(_7,"setColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarBackgroundColor"));
objj_msgSend(_7,"setTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextColor"));
objj_msgSend(_7,"setTitleColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleColor"));
objj_msgSend(_7,"setTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextShadowColor"));
objj_msgSend(_7,"setTitleShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleShadowColor"));
objj_msgSend(_7,"setHighlightColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightColor"));
objj_msgSend(_7,"setHighlightTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextColor"));
objj_msgSend(_7,"setHighlightTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextShadowColor"));
objj_msgSend(_7,"orderFront:",_d5);
}else{
objj_msgSend(_7,"orderOut:",_d5);
}
objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"resizeEvent:",nil);
}
}),new objj_method(sel_getUid("setMenuBarTitle:"),function(_d8,_d9,_da){
with(_d8){
_3=_da;
objj_msgSend(_7,"setTitle:",_3);
}
}),new objj_method(sel_getUid("menuBarTitle"),function(_db,_dc){
with(_db){
return _3;
}
}),new objj_method(sel_getUid("setMenuBarIconImage:"),function(_dd,_de,_df){
with(_dd){
_CPMenuBarImage=_df;
objj_msgSend(_7,"setIconImage:",_df);
}
}),new objj_method(sel_getUid("menuBarIconImage"),function(_e0,_e1){
with(_e0){
return _CPMenuBarImage;
}
}),new objj_method(sel_getUid("setMenuBarAttributes:"),function(_e2,_e3,_e4){
with(_e2){
if(_6==_e4){
return;
}
_6=objj_msgSend(_e4,"copy");
var _e5=objj_msgSend(_e4,"objectForKey:","CPMenuBarTextColor"),_e6=objj_msgSend(_e4,"objectForKey:","CPMenuBarTitleColor"),_e7=objj_msgSend(_e4,"objectForKey:","CPMenuBarTextShadowColor"),_e8=objj_msgSend(_e4,"objectForKey:","CPMenuBarTitleShadowColor"),_e9=objj_msgSend(_e4,"objectForKey:","CPMenuBarHighlightColor"),_ea=objj_msgSend(_e4,"objectForKey:","CPMenuBarHighlightTextColor"),_eb=objj_msgSend(_e4,"objectForKey:","CPMenuBarHighlightTextShadowColor");
if(!_e5&&_e6){
objj_msgSend(_6,"setObject:forKey:",_e6,"CPMenuBarTextColor");
}else{
if(_e5&&!_e6){
objj_msgSend(_6,"setObject:forKey:",_e5,"CPMenuBarTitleColor");
}else{
if(!_e5&&!_e6){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",0.051,0.2,0.275,1),"CPMenuBarTextColor");
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithRed:green:blue:alpha:",0.051,0.2,0.275,1),"CPMenuBarTitleColor");
}
}
}
if(!_e7&&_e8){
objj_msgSend(_6,"setObject:forKey:",_e8,"CPMenuBarTextShadowColor");
}else{
if(_e7&&!_e8){
objj_msgSend(_6,"setObject:forKey:",_e7,"CPMenuBarTitleShadowColor");
}else{
if(!_e7&&!_e8){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarTextShadowColor");
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarTitleShadowColor");
}
}
}
if(!_e9){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",94/255,130/255,186/255,1),"CPMenuBarHighlightColor");
}
if(!_ea){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"whiteColor"),"CPMenuBarHighlightTextColor");
}
if(!_eb){
objj_msgSend(_6,"setObject:forKey:",objj_msgSend(CPColor,"blackColor"),"CPMenuBarHighlightTextShadowColor");
}
if(_7){
objj_msgSend(_7,"setColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarBackgroundColor"));
objj_msgSend(_7,"setTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextColor"));
objj_msgSend(_7,"setTitleColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleColor"));
objj_msgSend(_7,"setTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTextShadowColor"));
objj_msgSend(_7,"setTitleShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarTitleShadowColor"));
objj_msgSend(_7,"setHighlightColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightColor"));
objj_msgSend(_7,"setHighlightTextColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextColor"));
objj_msgSend(_7,"setHighlightTextShadowColor:",objj_msgSend(_6,"objectForKey:","CPMenuBarHighlightTextShadowColor"));
}
}
}),new objj_method(sel_getUid("menuBarAttributes"),function(_ec,_ed){
with(_ec){
return _6;
}
}),new objj_method(sel_getUid("_setMenuBarIconImageAlphaValue:"),function(_ee,_ef,_f0){
with(_ee){
_5=_f0;
objj_msgSend(_7,"setIconImageAlphaValue:",_f0);
}
}),new objj_method(sel_getUid("menuBarHeight"),function(_f1,_f2){
with(_f1){
return _1;
}
}),new objj_method(sel_getUid("_constraintRectForView:"),function(_f3,_f4,_f5){
with(_f3){
if(objj_msgSend(CPPlatform,"isBrowser")){
return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(_f5,"window"),"platformWindow"),"contentBounds"),5,5);
}
return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(_f5,"window"),"screen"),"visibleFrame"),5,5);
}
}),new objj_method(sel_getUid("trackingCallbackWithCallback:"),function(_f6,_f7,_f8){
with(_f6){
return function(_f9,_fa){
objj_msgSend(_f9,"setMenu:",nil);
objj_msgSend(_f9,"orderOut:",_f6);
objj_msgSend(_CPMenuWindow,"poolMenuWindow:",_f9);
if(_f8){
_f8(_fa);
}
objj_msgSend(_fa,"_performActionOfHighlightedItemChain");
};
}
}),new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:"),function(_fb,_fc,_fd,_fe,_ff){
with(_fb){
objj_msgSend(_fb,"popUpContextMenu:withEvent:forView:withFont:",_fd,_fe,_ff,nil);
}
}),new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:withFont:"),function(self,_100,_101,_102,_103,_104){
with(self){
objj_msgSend(_101,"_menuWillOpen");
if(!_104){
_104=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
var _105=objj_msgSend(_103,"window"),_106=objj_msgSend(_CPMenuWindow,"menuWindowWithMenu:font:",_101,_104);
objj_msgSend(_106,"setBackgroundStyle:",_CPMenuWindowPopUpBackgroundStyle);
var _107=objj_msgSend(CPMenu,"_constraintRectForView:",_103),_108=objj_msgSend(objj_msgSend(_102,"window"),"convertBaseToGlobal:",objj_msgSend(_102,"locationInWindow"));
objj_msgSend(_106,"setConstraintRect:",_107);
objj_msgSend(_106,"setFrameOrigin:",_108);
if(!objj_msgSend(_106,"hasMinimumNumberOfVisibleItems")){
var _109=objj_msgSend(_106,"unconstrainedFrame"),_10a=CGRectGetMinY(_109);
if(_10a>=CGRectGetMaxY(_107)||objj_msgSend(_106,"canScrollDown")){
_109.origin.y=MIN(CGRectGetMaxY(_107),_108.y)-CGRectGetHeight(_109);
}else{
if(_10a<CGRectGetMinY(_107)||objj_msgSend(_106,"canScrollUp")){
_109.origin.y=MAX(CGRectGetMinY(_107),_108.y);
}
}
objj_msgSend(_106,"setFrameOrigin:",CGRectIntersection(_109,_107).origin);
}
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_106,"setPlatformWindow:",objj_msgSend(objj_msgSend(_103,"window"),"platformWindow"));
}
objj_msgSend(_106,"orderFront:",self);
objj_msgSend(objj_msgSend(_CPMenuManager,"sharedMenuManager"),"beginTracking:menuContainer:constraintRect:callback:",_102,_106,objj_msgSend(CPMenu,"_constraintRectForView:",_103),objj_msgSend(CPMenu,"trackingCallbackWithCallback:",nil));
}
})]);
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("countOfItems"),function(self,_10b){
with(self){
return objj_msgSend(_items,"count");
}
}),new objj_method(sel_getUid("objectInItemsAtIndex:"),function(self,_10c,_10d){
with(self){
return objj_msgSend(_items,"objectAtIndex:",_10d);
}
}),new objj_method(sel_getUid("itemsAtIndexes:"),function(self,_10e,_10f){
with(self){
return objj_msgSend(_items,"objectsAtIndexes:",_10f);
}
})]);
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("insertObject:inItemsAtIndex:"),function(self,_110,_111,_112){
with(self){
var menu=objj_msgSend(_111,"menu");
if(menu){
if(menu!==self){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Attempted to insert item into menu that was already in another menu.");
}else{
return;
}
}
objj_msgSend(_111,"setMenu:",self);
objj_msgSend(_items,"insertObject:atIndex:",_111,_112);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidAddItemNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_112,"CPMenuItemIndex"));
}
}),new objj_method(sel_getUid("removeObjectFromItemsAtIndex:"),function(self,_113,_114){
with(self){
if(_114<0||_114>=objj_msgSend(_items,"count")){
return;
}
objj_msgSend(objj_msgSend(_items,"objectAtIndex:",_114),"setMenu:",nil);
objj_msgSend(_items,"removeObjectAtIndex:",_114);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",CPMenuDidRemoveItemNotification,self,objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_114,"CPMenuItemIndex"));
}
})]);
var _115="CPMenuTitleKey",_116="CPMenuNameKey",_117="CPMenuItemsKey",_118="CPMenuShowsStateColumnKey";
var _8=objj_getClass("CPMenu");
if(!_8){
throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
}
var _9=_8.isa;
class_addMethods(_8,[new objj_method(sel_getUid("initWithCoder:"),function(self,_119,_11a){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPMenu").super_class},"init");
if(self){
_title=objj_msgSend(_11a,"decodeObjectForKey:",_115);
_items=objj_msgSend(_11a,"decodeObjectForKey:",_117);
objj_msgSend(self,"_setMenuName:",objj_msgSend(_11a,"decodeObjectForKey:",_116));
_showsStateColumn=!objj_msgSend(_11a,"containsValueForKey:",_118)||objj_msgSend(_11a,"decodeBoolForKey:",_118);
_autoenablesItems=YES;
objj_msgSend(self,"setMinimumWidth:",0);
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_11b,_11c){
with(self){
objj_msgSend(_11c,"encodeObject:forKey:",_title,_115);
if(_name){
objj_msgSend(_11c,"encodeObject:forKey:",_name,_116);
}
objj_msgSend(_11c,"encodeObject:forKey:",_items,_117);
if(!_showsStateColumn){
objj_msgSend(_11c,"encodeBool:forKey:",_showsStateColumn,_118);
}
}
})]);
objj_executeFile("_CPMenuBarWindow.j",YES);
objj_executeFile("_CPMenuWindow.j",YES);
p;24;_CPMenuItemMenuBarView.jt;7673;@STATIC;1.0;i;8;CPView.jt;7642;
objj_executeFile("CPView.j",YES);
var _1=8,_2=3,_3=4;
var _4=nil,_5=nil,_6=nil,_7=nil,_8=[],_9=[];
var _a=objj_allocateClassPair(CPView,"_CPMenuItemMenuBarView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItem"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_isDirty"),new objj_ivar("_imageAndTextView"),new objj_ivar("_submenuIndicatorView")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("menuItem"),function(_c,_d){
with(_c){
return _menuItem;
}
}),new objj_method(sel_getUid("setMenuItem:"),function(_e,_f,_10){
with(_e){
_menuItem=_10;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_11,_12,_13){
with(_11){
_11=objj_msgSendSuper({receiver:_11,super_class:objj_getClass("_CPMenuItemMenuBarView").super_class},"initWithFrame:",_13);
if(_11){
_imageAndTextView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(_1,0,0,0));
objj_msgSend(_imageAndTextView,"setImagePosition:",CPImageLeft);
objj_msgSend(_imageAndTextView,"setImageOffset:",3);
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"setAutoresizingMask:",CPViewMinYMargin|CPViewMaxYMargin);
objj_msgSend(_11,"addSubview:",_imageAndTextView);
_submenuIndicatorView=objj_msgSend(objj_msgSend(_CPMenuItemMenuBarSubmenuIndicatorView,"alloc"),"initWithFrame:",CGRectMake(0,0,9,6));
objj_msgSend(_submenuIndicatorView,"setAutoresizingMask:",CPViewMinYMargin|CPViewMaxYMargin);
objj_msgSend(_11,"addSubview:",_submenuIndicatorView);
objj_msgSend(_11,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
}
return _11;
}
}),new objj_method(sel_getUid("textColor"),function(_14,_15){
with(_14){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"lightGrayColor");
}
return _textColor||objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",70/255,69/255,69/255,1);
}
}),new objj_method(sel_getUid("textShadowColor"),function(_16,_17){
with(_16){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,0.8);
}
return _textShadowColor||objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8);
}
}),new objj_method(sel_getUid("update"),function(_18,_19){
with(_18){
var x=_1,_1a=0;
objj_msgSend(_imageAndTextView,"setFont:",objj_msgSend(_menuItem,"font")||objj_msgSend(_CPMenuBarWindow,"font"));
objj_msgSend(_imageAndTextView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setText:",objj_msgSend(_menuItem,"title"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_18,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_18,"textShadowColor"));
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"sizeToFit");
var _1b=objj_msgSend(_imageAndTextView,"frame");
_1b.origin.x=x;
x+=CGRectGetWidth(_1b);
_1a=MAX(_1a,CGRectGetHeight(_1b));
var _1c=objj_msgSend(_menuItem,"hasSubmenu")&&objj_msgSend(_menuItem,"action");
if(_1c){
objj_msgSend(_submenuIndicatorView,"setHidden:",NO);
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(_18,"textColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(_18,"textShadowColor"));
var _1d=objj_msgSend(_submenuIndicatorView,"frame");
_1d.origin.x=x+_2;
x=CGRectGetMaxX(_1d);
_1a=MAX(_1a,CGRectGetHeight(_1d));
}else{
objj_msgSend(_submenuIndicatorView,"setHidden:",YES);
}
_1a+=2*_3;
_1b.origin.y=FLOOR((_1a-CGRectGetHeight(_1b))/2);
objj_msgSend(_imageAndTextView,"setFrame:",_1b);
if(_1c){
_1d.origin.y=FLOOR((_1a-CGRectGetHeight(_1d))/2)+1;
objj_msgSend(_submenuIndicatorView,"setFrame:",_1d);
}
objj_msgSend(_18,"setAutoresizesSubviews:",NO);
objj_msgSend(_18,"setFrameSize:",CGSizeMake(x+_1,_1a));
objj_msgSend(_18,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("highlight:"),function(_1e,_1f,_20){
with(_1e){
if(!objj_msgSend(_menuItem,"isEnabled")){
_20=NO;
}
if(_20){
if(!objj_msgSend(_menuItem,"_isMenuBarButton")){
objj_msgSend(_1e,"setBackgroundColor:",_4);
}
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"alternateImage")||objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",_7);
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",0.1,0.7));
}else{
objj_msgSend(_1e,"setBackgroundColor:",nil);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_1e,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_1e,"textShadowColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(_1e,"textColor"));
objj_msgSend(_submenuIndicatorView,"setShadowColor:",objj_msgSend(_1e,"textShadowColor"));
}
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("initialize"),function(_21,_22){
with(_21){
if(_21!==objj_msgSend(_CPMenuItemMenuBarView,"class")){
return;
}
var _23=objj_msgSend(CPBundle,"bundleForClass:",_21);
_4=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","_CPMenuBarWindow/_CPMenuBarWindowBackgroundSelected.png"),CGSizeMake(1,28)));
_5=objj_msgSend(CPColor,"grayColor");
_6=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_7=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
_8[CPOffState]=nil;
_9[CPOffState]=nil;
_8[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_9[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_23,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_8[CPMixedState]=nil;
_9[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("view"),function(_24,_25){
with(_24){
return objj_msgSend(objj_msgSend(_24,"alloc"),"init");
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuItemMenuBarSubmenuIndicatorView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_color"),new objj_ivar("_shadowColor")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("setColor:"),function(_26,_27,_28){
with(_26){
if(_color===_28){
return;
}
_color=_28;
objj_msgSend(_26,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setShadowColor:"),function(_29,_2a,_2b){
with(_29){
if(_shadowColor===_2b){
return;
}
_shadowColor=_2b;
objj_msgSend(_29,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_2c,_2d,_2e){
with(_2c){
var _2f=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_30=objj_msgSend(_2c,"bounds");
_30.size.height-=1;
_30.size.width-=2;
_30.origin.x+=1;
CGContextBeginPath(_2f);
CGContextMoveToPoint(_2f,CGRectGetMinX(_30),CGRectGetMinY(_30));
CGContextAddLineToPoint(_2f,CGRectGetMaxX(_30),CGRectGetMinY(_30));
CGContextAddLineToPoint(_2f,CGRectGetMidX(_30),CGRectGetMaxY(_30));
CGContextClosePath(_2f);
CGContextSetShadowWithColor(_2f,CGSizeMake(0,1),1.1,_shadowColor||objj_msgSend(CPColor,"whiteColor"));
CGContextSetFillColor(_2f,_color||objj_msgSend(CPColor,"blackColor"));
CGContextFillPath(_2f);
}
})]);
p;26;_CPMenuItemSeparatorView.jt;1110;@STATIC;1.0;i;8;CPView.jt;1079;
objj_executeFile("CPView.j",YES);
var _1=objj_allocateClassPair(CPView,"_CPMenuItemSeparatorView"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithFrame:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("_CPMenuItemSeparatorView").super_class},"initWithFrame:",_5);
if(_3){
objj_msgSend(_3,"setAutoresizingMask:",CPViewWidthSizable);
}
return _3;
}
}),new objj_method(sel_getUid("drawRect:"),function(_6,_7,_8){
with(_6){
var _9=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_a=objj_msgSend(_6,"bounds");
CGContextBeginPath(_9);
CGContextMoveToPoint(_9,CGRectGetMinX(_a),FLOOR(CGRectGetMidY(_a))-0.5);
CGContextAddLineToPoint(_9,CGRectGetMaxX(_a),FLOOR(CGRectGetMidY(_a))-0.5);
CGContextSetStrokeColor(_9,objj_msgSend(CPColor,"lightGrayColor"));
CGContextStrokePath(_9);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("view"),function(_b,_c){
with(_b){
return objj_msgSend(objj_msgSend(_b,"alloc"),"initWithFrame:",CGRectMake(0,0,0,10));
}
})]);
p;25;_CPMenuItemStandardView.jt;9367;@STATIC;1.0;i;11;CPControl.jt;9332;
objj_executeFile("CPControl.j",YES);
var _1=3,_2=14+3,_3=14,_4=17,_5=4,_6=30,_7=10;
var _8=nil,_9=nil,_a=nil,_b=[],_c=[];
var _d=objj_allocateClassPair(CPView,"_CPMenuItemStandardView"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_menuItem"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_minSize"),new objj_ivar("_isDirty"),new objj_ivar("_stateView"),new objj_ivar("_imageAndTextView"),new objj_ivar("_keyEquivalentView"),new objj_ivar("_submenuIndicatorView")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("menuItem"),function(_f,_10){
with(_f){
return _menuItem;
}
}),new objj_method(sel_getUid("setMenuItem:"),function(_11,_12,_13){
with(_11){
_menuItem=_13;
}
}),new objj_method(sel_getUid("minSize"),function(_14,_15){
with(_14){
return _minSize;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_16,_17,_18){
with(_16){
_16=objj_msgSendSuper({receiver:_16,super_class:objj_getClass("_CPMenuItemStandardView").super_class},"initWithFrame:",_18);
if(_16){
_stateView=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_stateView,"setImageScaling:",CPImageScaleNone);
objj_msgSend(_16,"addSubview:",_stateView);
_imageAndTextView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_imageAndTextView,"setImagePosition:",CPImageLeft);
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_16,"addSubview:",_imageAndTextView);
_keyEquivalentView=objj_msgSend(objj_msgSend(_CPImageAndTextView,"alloc"),"initWithFrame:",CGRectMake(0,0,0,0));
objj_msgSend(_keyEquivalentView,"setImagePosition:",CPNoImage);
objj_msgSend(_keyEquivalentView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_keyEquivalentView,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_16,"addSubview:",_keyEquivalentView);
_submenuIndicatorView=objj_msgSend(objj_msgSend(_CPMenuItemSubmenuIndicatorView,"alloc"),"initWithFrame:",CGRectMake(0,0,8,10));
objj_msgSend(_submenuIndicatorView,"setColor:",_8);
objj_msgSend(_submenuIndicatorView,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_16,"addSubview:",_submenuIndicatorView);
objj_msgSend(_16,"setAutoresizingMask:",CPViewWidthSizable);
}
return _16;
}
}),new objj_method(sel_getUid("textColor"),function(_19,_1a){
with(_19){
if(!objj_msgSend(_menuItem,"isEnabled")){
return objj_msgSend(CPColor,"lightGrayColor");
}
return _textColor||objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",70/255,69/255,69/255,1);
}
}),new objj_method(sel_getUid("textShadowColor"),function(_1b,_1c){
with(_1b){
if(!objj_msgSend(_menuItem,"isEnabled")){
return nil;
}
return _textShadowColor||objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8);
}
}),new objj_method(sel_getUid("setFont:"),function(_1d,_1e,_1f){
with(_1d){
_font=_1f;
}
}),new objj_method(sel_getUid("update"),function(_20,_21){
with(_20){
var x=_1+objj_msgSend(_menuItem,"indentationLevel")*_4,_22=0,_23=objj_msgSend(objj_msgSend(_menuItem,"menu"),"showsStateColumn");
if(_23){
objj_msgSend(_stateView,"setHidden:",NO);
objj_msgSend(_stateView,"setImage:",_b[objj_msgSend(_menuItem,"state")]||nil);
x+=_3;
}else{
objj_msgSend(_stateView,"setHidden:",YES);
}
objj_msgSend(_imageAndTextView,"setFont:",objj_msgSend(_menuItem,"font")||_font);
objj_msgSend(_imageAndTextView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setText:",objj_msgSend(_menuItem,"title"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_20,"textColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_20,"textShadowColor"));
objj_msgSend(_imageAndTextView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_imageAndTextView,"sizeToFit");
var _24=objj_msgSend(_imageAndTextView,"frame");
_24.origin.x=x;
x+=CGRectGetWidth(_24);
_22=MAX(_22,CGRectGetHeight(_24));
var _25=!!objj_msgSend(_menuItem,"keyEquivalent"),_26=objj_msgSend(_menuItem,"hasSubmenu");
if(_25||_26){
x+=_6;
}
if(_25){
objj_msgSend(_keyEquivalentView,"setFont:",objj_msgSend(_menuItem,"font")||_font);
objj_msgSend(_keyEquivalentView,"setVerticalAlignment:",CPCenterVerticalTextAlignment);
objj_msgSend(_keyEquivalentView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_keyEquivalentView,"setText:",objj_msgSend(_menuItem,"keyEquivalentStringRepresentation"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(_20,"textColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",objj_msgSend(_20,"textShadowColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_keyEquivalentView,"setFrameOrigin:",CGPointMake(x,_5));
objj_msgSend(_keyEquivalentView,"sizeToFit");
var _27=objj_msgSend(_keyEquivalentView,"frame");
_27.origin.x=x;
x+=CGRectGetWidth(_27);
_22=MAX(_22,CGRectGetHeight(_27));
if(_26){
x+=_6;
}
}else{
objj_msgSend(_keyEquivalentView,"setHidden:",YES);
}
if(_26){
objj_msgSend(_submenuIndicatorView,"setHidden:",NO);
var _28=objj_msgSend(_submenuIndicatorView,"frame");
_28.origin.x=x;
x+=CGRectGetWidth(_28);
_22=MAX(_22,CGRectGetHeight(_28));
}else{
objj_msgSend(_submenuIndicatorView,"setHidden:",YES);
}
_22+=2*_5;
_24.origin.y=FLOOR((_22-CGRectGetHeight(_24))/2);
objj_msgSend(_imageAndTextView,"setFrame:",_24);
if(_23){
objj_msgSend(_stateView,"setFrameSize:",CGSizeMake(_3,_22));
}
if(_25){
_27.origin.y=FLOOR((_22-CGRectGetHeight(_27))/2);
objj_msgSend(_keyEquivalentView,"setFrame:",_27);
}
if(_26){
_28.origin.y=FLOOR((_22-CGRectGetHeight(_28))/2);
objj_msgSend(_submenuIndicatorView,"setFrame:",_28);
}
_minSize=CGSizeMake(x+_2,_22);
objj_msgSend(_20,"setAutoresizesSubviews:",NO);
objj_msgSend(_20,"setFrameSize:",_minSize);
objj_msgSend(_20,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("highlight:"),function(_29,_2a,_2b){
with(_29){
if(!objj_msgSend(_menuItem,"isEnabled")){
return;
}
if(_2b){
objj_msgSend(_29,"setBackgroundColor:",_9);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"alternateImage")||objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_imageAndTextView,"setTextShadowColor:",_a);
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",_a);
}else{
objj_msgSend(_29,"setBackgroundColor:",nil);
objj_msgSend(_imageAndTextView,"setImage:",objj_msgSend(_menuItem,"image"));
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_29,"textColor"));
objj_msgSend(_keyEquivalentView,"setTextColor:",objj_msgSend(_29,"textColor"));
objj_msgSend(_submenuIndicatorView,"setColor:",_8);
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_29,"textShadowColor"));
objj_msgSend(_keyEquivalentView,"setTextShadowColor:",objj_msgSend(_29,"textShadowColor"));
}
if(objj_msgSend(objj_msgSend(_menuItem,"menu"),"showsStateColumn")){
if(_2b){
objj_msgSend(_stateView,"setImage:",_c[objj_msgSend(_menuItem,"state")]||nil);
}else{
objj_msgSend(_stateView,"setImage:",_b[objj_msgSend(_menuItem,"state")]||nil);
}
}
}
})]);
class_addMethods(_e,[new objj_method(sel_getUid("initialize"),function(_2c,_2d){
with(_2c){
if(_2c!==objj_msgSend(_CPMenuItemStandardView,"class")){
return;
}
_8=objj_msgSend(CPColor,"grayColor");
_9=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_a=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
var _2e=objj_msgSend(CPBundle,"bundleForClass:",_2c);
_b[CPOffState]=nil;
_c[CPOffState]=nil;
_b[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2e,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_c[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2e,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_b[CPMixedState]=nil;
_c[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("view"),function(_2f,_30){
with(_2f){
return objj_msgSend(objj_msgSend(_2f,"alloc"),"init");
}
}),new objj_method(sel_getUid("_standardLeftMargin"),function(_31,_32){
with(_31){
return _1+_3;
}
})]);
var _d=objj_allocateClassPair(CPView,"_CPMenuItemSubmenuIndicatorView"),_e=_d.isa;
class_addIvars(_d,[new objj_ivar("_color")]);
objj_registerClassPair(_d);
class_addMethods(_d,[new objj_method(sel_getUid("setColor:"),function(_33,_34,_35){
with(_33){
if(_color===_35){
return;
}
_color=_35;
objj_msgSend(_33,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_36,_37,_38){
with(_36){
var _39=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_3a=objj_msgSend(_36,"bounds");
CGContextBeginPath(_39);
CGContextMoveToPoint(_39,CGRectGetMinX(_3a),CGRectGetMinY(_3a));
CGContextAddLineToPoint(_39,CGRectGetMaxX(_3a),CGRectGetMidY(_3a));
CGContextAddLineToPoint(_39,CGRectGetMinX(_3a),CGRectGetMaxY(_3a));
CGContextClosePath(_39);
CGContextSetFillColor(_39,_color);
CGContextFillPath(_39);
}
})]);
p;17;_CPMenuItemView.jt;6366;@STATIC;1.0;I;18;AppKit/CPControl.ji;26;_CPMenuItemSeparatorView.ji;25;_CPMenuItemStandardView.ji;24;_CPMenuItemMenuBarView.jt;6234;
objj_executeFile("AppKit/CPControl.j",NO);
objj_executeFile("_CPMenuItemSeparatorView.j",YES);
objj_executeFile("_CPMenuItemStandardView.j",YES);
objj_executeFile("_CPMenuItemMenuBarView.j",YES);
var _1=3,_2=16,_3=14,_4=17,_5=4;
var _6=nil,_7=nil,_8=[],_9=[];
var _a=objj_allocateClassPair(CPView,"_CPMenuItemView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_menuItem"),new objj_ivar("_view"),new objj_ivar("_font"),new objj_ivar("_textColor"),new objj_ivar("_textShadowColor"),new objj_ivar("_minSize"),new objj_ivar("_isDirty"),new objj_ivar("_showsStateColumn"),new objj_ivar("_imageAndTextView"),new objj_ivar("_submenuView")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("initWithFrame:forMenuItem:"),function(_c,_d,_e,_f){
with(_c){
_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPMenuItemView").super_class},"initWithFrame:",_e);
if(_c){
_menuItem=_f;
_showsStateColumn=YES;
_isDirty=YES;
objj_msgSend(_c,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_c,"synchronizeWithMenuItem");
}
return _c;
}
}),new objj_method(sel_getUid("minSize"),function(_10,_11){
with(_10){
return _minSize;
}
}),new objj_method(sel_getUid("setDirty"),function(_12,_13){
with(_12){
_isDirty=YES;
}
}),new objj_method(sel_getUid("synchronizeWithMenuItem"),function(_14,_15){
with(_14){
var _16=objj_msgSend(_menuItem,"view");
if(objj_msgSend(_menuItem,"isSeparatorItem")){
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemSeparatorView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemSeparatorView,"view");
}
}else{
if(_16){
if(_view!==_16){
objj_msgSend(_view,"removeFromSuperview");
_view=_16;
}
}else{
if(objj_msgSend(_menuItem,"menu")==objj_msgSend(CPApp,"mainMenu")){
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemMenuBarView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemMenuBarView,"view");
}
objj_msgSend(_view,"setMenuItem:",_menuItem);
}else{
if(!objj_msgSend(_view,"isKindOfClass:",objj_msgSend(_CPMenuItemStandardView,"class"))){
objj_msgSend(_view,"removeFromSuperview");
_view=objj_msgSend(_CPMenuItemStandardView,"view");
}
objj_msgSend(_view,"setMenuItem:",_menuItem);
}
}
}
if(objj_msgSend(_view,"superview")!==_14){
objj_msgSend(_14,"addSubview:",_view);
}
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("update"))){
objj_msgSend(_view,"update");
}
_minSize=objj_msgSend(_view,"frame").size;
objj_msgSend(_14,"setAutoresizesSubviews:",NO);
objj_msgSend(_14,"setFrameSize:",_minSize);
objj_msgSend(_14,"setAutoresizesSubviews:",YES);
}
}),new objj_method(sel_getUid("setShowsStateColumn:"),function(_17,_18,_19){
with(_17){
_showsStateColumn=_19;
}
}),new objj_method(sel_getUid("highlight:"),function(_1a,_1b,_1c){
with(_1a){
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("highlight:"))){
objj_msgSend(_view,"highlight:",_1c);
}
}
}),new objj_method(sel_getUid("eventOnSubmenu:"),function(_1d,_1e,_1f){
with(_1d){
if(!objj_msgSend(_menuItem,"hasSubmenu")){
return NO;
}
return CGRectContainsPoint(objj_msgSend(_submenuView,"frame"),objj_msgSend(_1d,"convertPoint:fromView:",objj_msgSend(_1f,"locationInWindow"),nil));
}
}),new objj_method(sel_getUid("isHidden"),function(_20,_21){
with(_20){
return objj_msgSend(_menuItem,"isHidden");
}
}),new objj_method(sel_getUid("menuItem"),function(_22,_23){
with(_22){
return _menuItem;
}
}),new objj_method(sel_getUid("setFont:"),function(_24,_25,_26){
with(_24){
if(_font===_26){
return;
}
_font=_26;
if(objj_msgSend(_view,"respondsToSelector:",sel_getUid("setFont:"))){
objj_msgSend(_view,"setFont:",_26);
}
objj_msgSend(_24,"setDirty");
}
}),new objj_method(sel_getUid("setTextColor:"),function(_27,_28,_29){
with(_27){
if(_textColor==_29){
return;
}
_textColor=_29;
objj_msgSend(_imageAndTextView,"setTextColor:",objj_msgSend(_27,"textColor"));
objj_msgSend(_submenuView,"setColor:",objj_msgSend(_27,"textColor"));
}
}),new objj_method(sel_getUid("textColor"),function(_2a,_2b){
with(_2a){
return nil;
}
}),new objj_method(sel_getUid("setTextShadowColor:"),function(_2c,_2d,_2e){
with(_2c){
if(_textShadowColor==_2e){
return;
}
_textShadowColor=_2e;
objj_msgSend(_imageAndTextView,"setTextShadowColor:",objj_msgSend(_2c,"textShadowColor"));
}
}),new objj_method(sel_getUid("textShadowColor"),function(_2f,_30){
with(_2f){
return objj_msgSend(_menuItem,"isEnabled")?(_textShadowColor?_textShadowColor:objj_msgSend(CPColor,"colorWithWhite:alpha:",1,0.8)):objj_msgSend(CPColor,"colorWithWhite:alpha:",0.8,0.8);
}
})]);
class_addMethods(_b,[new objj_method(sel_getUid("initialize"),function(_31,_32){
with(_31){
if(_31!=objj_msgSend(_CPMenuItemView,"class")){
return;
}
_6=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",95/255,131/255,185/255,1);
_7=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",26/255,73/255,109/255,1);
var _33=objj_msgSend(CPBundle,"bundleForClass:",_31);
_8[CPOffState]=nil;
_9[CPOffState]=nil;
_8[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_33,"pathForResource:","CPMenuItem/CPMenuItemOnState.png"),CGSizeMake(14,14));
_9[CPOnState]=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_33,"pathForResource:","CPMenuItem/CPMenuItemOnStateHighlighted.png"),CGSizeMake(14,14));
_8[CPMixedState]=nil;
_9[CPMixedState]=nil;
}
}),new objj_method(sel_getUid("leftMargin"),function(_34,_35){
with(_34){
return _1+_3;
}
})]);
var _a=objj_allocateClassPair(CPView,"_CPMenuItemArrowView"),_b=_a.isa;
class_addIvars(_a,[new objj_ivar("_color")]);
objj_registerClassPair(_a);
class_addMethods(_a,[new objj_method(sel_getUid("setColor:"),function(_36,_37,_38){
with(_36){
if(_color==_38){
return;
}
_color=_38;
objj_msgSend(_36,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_39,_3a,_3b){
with(_39){
var _3c=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextBeginPath(_3c);
CGContextMoveToPoint(_3c,1,4);
CGContextAddLineToPoint(_3c,9,4);
CGContextAddLineToPoint(_3c,5,8);
CGContextAddLineToPoint(_3c,1,4);
CGContextClosePath(_3c);
CGContextSetFillColor(_3c,_color);
CGContextFillPath(_3c);
}
})]);
p;12;CPMenuItem.jt;17540;@STATIC;1.0;I;20;Foundation/CPCoder.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPMenu.ji;8;CPView.ji;17;_CPMenuItemView.jt;17384;
objj_executeFile("Foundation/CPCoder.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
objj_executeFile("CPImage.j",YES);
objj_executeFile("CPMenu.j",YES);
objj_executeFile("CPView.j",YES);
objj_executeFile("_CPMenuItemView.j",YES);
var _1=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_1,"setObject:forKey:","⎋",CPEscapeFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⇥",CPTabCharacter);
objj_msgSend(_1,"setObject:forKey:","⇤",CPBackTabCharacter);
objj_msgSend(_1,"setObject:forKey:","␣",CPSpaceFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⏎",CPCarriageReturnCharacter);
objj_msgSend(_1,"setObject:forKey:","⌫",CPBackspaceCharacter);
objj_msgSend(_1,"setObject:forKey:","⌫",CPDeleteFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⌦",CPDeleteCharacter);
objj_msgSend(_1,"setObject:forKey:","⇱",CPHomeFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⇲",CPEndFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⇞",CPPageUpFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⇟",CPPageDownFunctionKey);
objj_msgSend(_1,"setObject:forKey:","↑",CPUpArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","↓",CPDownArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","←",CPLeftArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","→",CPRightArrowFunctionKey);
objj_msgSend(_1,"setObject:forKey:","⌧",CPClearDisplayFunctionKey);
var _2=objj_allocateClassPair(CPObject,"CPMenuItem"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_isSeparator"),new objj_ivar("_title"),new objj_ivar("_font"),new objj_ivar("_target"),new objj_ivar("_action"),new objj_ivar("_isEnabled"),new objj_ivar("_isHidden"),new objj_ivar("_tag"),new objj_ivar("_state"),new objj_ivar("_image"),new objj_ivar("_alternateImage"),new objj_ivar("_onStateImage"),new objj_ivar("_offStateImage"),new objj_ivar("_mixedStateImage"),new objj_ivar("_submenu"),new objj_ivar("_menu"),new objj_ivar("_keyEquivalent"),new objj_ivar("_keyEquivalentModifierMask"),new objj_ivar("_mnemonicLocation"),new objj_ivar("_isAlternate"),new objj_ivar("_indentationLevel"),new objj_ivar("_toolTip"),new objj_ivar("_representedObject"),new objj_ivar("_view"),new objj_ivar("_changeCount"),new objj_ivar("_menuItemView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("init"),function(_4,_5){
with(_4){
return objj_msgSend(_4,"initWithTitle:action:keyEquivalent:","",nil,nil);
}
}),new objj_method(sel_getUid("initWithTitle:action:keyEquivalent:"),function(_6,_7,_8,_9,_a){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("CPMenuItem").super_class},"init");
if(_6){
_changeCount=0;
_isSeparator=NO;
_title=_8;
_action=_9;
_isEnabled=YES;
_isHidden=NO;
_tag=0;
_state=CPOffState;
_keyEquivalent=_a||"";
_keyEquivalentModifierMask=CPPlatformActionKeyMask;
_indentationLevel=0;
_mnemonicLocation=CPNotFound;
}
return _6;
}
}),new objj_method(sel_getUid("setEnabled:"),function(_b,_c,_d){
with(_b){
if(_isEnabled===_d){
return;
}
_isEnabled=!!_d;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_b);
}
}),new objj_method(sel_getUid("isEnabled"),function(_e,_f){
with(_e){
return _isEnabled;
}
}),new objj_method(sel_getUid("setHidden:"),function(_10,_11,_12){
with(_10){
if(_isHidden==_12){
return;
}
_isHidden=_12;
objj_msgSend(_menu,"itemChanged:",_10);
}
}),new objj_method(sel_getUid("isHidden"),function(_13,_14){
with(_13){
return _isHidden;
}
}),new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"),function(_15,_16){
with(_15){
if(_isHidden){
return YES;
}
var _17=objj_msgSend(_menu,"supermenu");
if(objj_msgSend(objj_msgSend(_17,"itemAtIndex:",objj_msgSend(_17,"indexOfItemWithSubmenu:",_menu)),"isHiddenOrHasHiddenAncestor")){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("setTarget:"),function(_18,_19,_1a){
with(_18){
_target=_1a;
}
}),new objj_method(sel_getUid("target"),function(_1b,_1c){
with(_1b){
return _target;
}
}),new objj_method(sel_getUid("setAction:"),function(_1d,_1e,_1f){
with(_1d){
_action=_1f;
}
}),new objj_method(sel_getUid("action"),function(_20,_21){
with(_20){
return _action;
}
}),new objj_method(sel_getUid("setTitle:"),function(_22,_23,_24){
with(_22){
_mnemonicLocation=CPNotFound;
if(_title==_24){
return;
}
_title=_24;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_22);
}
}),new objj_method(sel_getUid("title"),function(_25,_26){
with(_25){
return _title;
}
}),new objj_method(sel_getUid("setTextColor:"),function(_27,_28,_29){
with(_27){
}
}),new objj_method(sel_getUid("setFont:"),function(_2a,_2b,_2c){
with(_2a){
if(_font==_2c){
return;
}
_font=_2c;
objj_msgSend(_menu,"itemChanged:",_2a);
objj_msgSend(_menuItemView,"setDirty");
}
}),new objj_method(sel_getUid("font"),function(_2d,_2e){
with(_2d){
return _font;
}
}),new objj_method(sel_getUid("setTag:"),function(_2f,_30,_31){
with(_2f){
_tag=_31;
}
}),new objj_method(sel_getUid("tag"),function(_32,_33){
with(_32){
return _tag;
}
}),new objj_method(sel_getUid("setState:"),function(_34,_35,_36){
with(_34){
if(_state==_36){
return;
}
_state=_36;
objj_msgSend(_menu,"itemChanged:",_34);
objj_msgSend(_menuItemView,"setDirty");
}
}),new objj_method(sel_getUid("state"),function(_37,_38){
with(_37){
return _state;
}
}),new objj_method(sel_getUid("setImage:"),function(_39,_3a,_3b){
with(_39){
if(_image==_3b){
return;
}
_image=_3b;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_39);
}
}),new objj_method(sel_getUid("image"),function(_3c,_3d){
with(_3c){
return _image;
}
}),new objj_method(sel_getUid("setAlternateImage:"),function(_3e,_3f,_40){
with(_3e){
_alternateImage=_40;
}
}),new objj_method(sel_getUid("alternateImage"),function(_41,_42){
with(_41){
return _alternateImage;
}
}),new objj_method(sel_getUid("setOnStateImage:"),function(_43,_44,_45){
with(_43){
if(_onStateImage==_45){
return;
}
_onStateImage=_45;
objj_msgSend(_menu,"itemChanged:",_43);
}
}),new objj_method(sel_getUid("onStateImage"),function(_46,_47){
with(_46){
return _onStateImage;
}
}),new objj_method(sel_getUid("setOffStateImage:"),function(_48,_49,_4a){
with(_48){
if(_offStateImage==_4a){
return;
}
_offStateImage=_4a;
objj_msgSend(_menu,"itemChanged:",_48);
}
}),new objj_method(sel_getUid("offStateImage"),function(_4b,_4c){
with(_4b){
return _offStateImage;
}
}),new objj_method(sel_getUid("setMixedStateImage:"),function(_4d,_4e,_4f){
with(_4d){
if(_mixedStateImage==_4f){
return;
}
_mixedStateImage=_4f;
objj_msgSend(_menu,"itemChanged:",_4d);
}
}),new objj_method(sel_getUid("mixedStateImage"),function(_50,_51){
with(_50){
return _mixedStateImage;
}
}),new objj_method(sel_getUid("setSubmenu:"),function(_52,_53,_54){
with(_52){
if(_submenu===_54){
return;
}
var _55=objj_msgSend(_submenu,"supermenu");
if(_55){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Can't add submenu \""+objj_msgSend(_54,"title")+"\" to item \""+objj_msgSend(_52,"title")+"\", because it is already submenu of \""+objj_msgSend(objj_msgSend(_54,"supermenu"),"title")+"\"");
}
_submenu=_54;
if(_submenu){
objj_msgSend(_submenu,"setSupermenu:",_menu);
objj_msgSend(_submenu,"setTitle:",objj_msgSend(_52,"title"));
objj_msgSend(_52,"setTarget:",_menu);
objj_msgSend(_52,"setAction:",sel_getUid("submenuAction:"));
}else{
objj_msgSend(_52,"setTarget:",nil);
objj_msgSend(_52,"setAction:",NULL);
}
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_52);
}
}),new objj_method(sel_getUid("submenu"),function(_56,_57){
with(_56){
return _submenu;
}
}),new objj_method(sel_getUid("hasSubmenu"),function(_58,_59){
with(_58){
return _submenu?YES:NO;
}
}),new objj_method(sel_getUid("isSeparatorItem"),function(_5a,_5b){
with(_5a){
return _isSeparator;
}
}),new objj_method(sel_getUid("setMenu:"),function(_5c,_5d,_5e){
with(_5c){
_menu=_5e;
}
}),new objj_method(sel_getUid("menu"),function(_5f,_60){
with(_5f){
return _menu;
}
}),new objj_method(sel_getUid("setKeyEquivalent:"),function(_61,_62,_63){
with(_61){
_keyEquivalent=_63||"";
}
}),new objj_method(sel_getUid("keyEquivalent"),function(_64,_65){
with(_64){
return _keyEquivalent;
}
}),new objj_method(sel_getUid("setKeyEquivalentModifierMask:"),function(_66,_67,_68){
with(_66){
_keyEquivalentModifierMask=_68;
}
}),new objj_method(sel_getUid("keyEquivalentModifierMask"),function(_69,_6a){
with(_69){
return _keyEquivalentModifierMask;
}
}),new objj_method(sel_getUid("keyEquivalentStringRepresentation"),function(_6b,_6c){
with(_6b){
if(!objj_msgSend(_keyEquivalent,"length")){
return "";
}
var _6d=_keyEquivalent.toUpperCase(),_6e=_keyEquivalentModifierMask&CPShiftKeyMask||(_6d===_keyEquivalent&&_keyEquivalent.toLowerCase()!==_keyEquivalent.toUpperCase());
if(objj_msgSend(_1,"objectForKey:",_6d)){
_6d=objj_msgSend(_1,"objectForKey:",_6d);
}
if(CPBrowserIsOperatingSystem(CPMacOperatingSystem)){
if(_keyEquivalentModifierMask&CPCommandKeyMask){
_6d="⌘"+_6d;
}
if(_6e){
_6d="⇧"+_6d;
}
if(_keyEquivalentModifierMask&CPAlternateKeyMask){
_6d="⌥"+_6d;
}
if(_keyEquivalentModifierMask&CPControlKeyMask){
_6d="⌃"+_6d;
}
}else{
if(_6e){
_6d="Shift-"+_6d;
}
if(_keyEquivalentModifierMask&CPAlternateKeyMask){
_6d="Alt-"+_6d;
}
if(_keyEquivalentModifierMask&CPControlKeyMask||_keyEquivalentModifierMask&CPCommandKeyMask){
_6d="Ctrl-"+_6d;
}
}
return _6d;
}
}),new objj_method(sel_getUid("setMnemonicLocation:"),function(_6f,_70,_71){
with(_6f){
_mnemonicLocation=_71;
}
}),new objj_method(sel_getUid("mnemonicLocation"),function(_72,_73){
with(_72){
return _mnemonicLocation;
}
}),new objj_method(sel_getUid("setTitleWithMnemonicLocation:"),function(_74,_75,_76){
with(_74){
var _77=objj_msgSend(_76,"rangeOfString:","&").location;
if(_77==CPNotFound){
objj_msgSend(_74,"setTitle:",_76);
}else{
objj_msgSend(_74,"setTitle:",objj_msgSend(_76,"substringToIndex:",_77)+objj_msgSend(_76,"substringFromIndex:",_77+1));
objj_msgSend(_74,"setMnemonicLocation:",_77);
}
}
}),new objj_method(sel_getUid("mnemonic"),function(_78,_79){
with(_78){
return _mnemonicLocation==CPNotFound?"":objj_msgSend(_title,"characterAtIndex:",_mnemonicLocation);
}
}),new objj_method(sel_getUid("setAlternate:"),function(_7a,_7b,_7c){
with(_7a){
_isAlternate=_7c;
}
}),new objj_method(sel_getUid("isAlternate"),function(_7d,_7e){
with(_7d){
return _isAlternate;
}
}),new objj_method(sel_getUid("setIndentationLevel:"),function(_7f,_80,_81){
with(_7f){
if(_81<0){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"setIndentationLevel: argument must be greater than or equal to 0.");
}
_indentationLevel=MIN(15,_81);
}
}),new objj_method(sel_getUid("indentationLevel"),function(_82,_83){
with(_82){
return _indentationLevel;
}
}),new objj_method(sel_getUid("setToolTip:"),function(_84,_85,_86){
with(_84){
_toolTip=_86;
}
}),new objj_method(sel_getUid("toolTip"),function(_87,_88){
with(_87){
return _toolTip;
}
}),new objj_method(sel_getUid("setRepresentedObject:"),function(_89,_8a,_8b){
with(_89){
_representedObject=_8b;
}
}),new objj_method(sel_getUid("representedObject"),function(_8c,_8d){
with(_8c){
return _representedObject;
}
}),new objj_method(sel_getUid("setView:"),function(_8e,_8f,_90){
with(_8e){
if(_view===_90){
return;
}
_view=_90;
objj_msgSend(_menuItemView,"setDirty");
objj_msgSend(_menu,"itemChanged:",_8e);
}
}),new objj_method(sel_getUid("view"),function(_91,_92){
with(_91){
return _view;
}
}),new objj_method(sel_getUid("isHighlighted"),function(_93,_94){
with(_93){
return objj_msgSend(objj_msgSend(_93,"menu"),"highlightedItem")==_93;
}
}),new objj_method(sel_getUid("copy"),function(_95,_96){
with(_95){
var _97=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"init");
_97._isSeparator=_isSeparator;
objj_msgSend(_97,"setTitle:",_title);
objj_msgSend(_97,"setFont:",_font);
objj_msgSend(_97,"setTarget:",_target);
objj_msgSend(_97,"setAction:",_action);
objj_msgSend(_97,"setEnabled:",_isEnabled);
objj_msgSend(_97,"setHidden:",_isHidden);
objj_msgSend(_97,"setTag:",_tag);
objj_msgSend(_97,"setState:",_state);
objj_msgSend(_97,"setImage:",_image);
objj_msgSend(_97,"setAlternateImage:",_alternateImage);
objj_msgSend(_97,"setOnStateImage:",_onStateImage);
objj_msgSend(_97,"setOffStateImage:",_offStateImage);
objj_msgSend(_97,"setMixedStateImage:",_mixedStateImage);
objj_msgSend(_97,"setKeyEquivalent:",_keyEquivalent);
objj_msgSend(_97,"setKeyEquivalentModifierMask:",_keyEquivalentModifierMask);
objj_msgSend(_97,"setMnemonicLocation:",_mnemonicLocation);
objj_msgSend(_97,"setAlternate:",_isAlternate);
objj_msgSend(_97,"setIndentationLevel:",_indentationLevel);
objj_msgSend(_97,"setToolTip:",_toolTip);
objj_msgSend(_97,"setRepresentedObject:",_representedObject);
return _97;
}
}),new objj_method(sel_getUid("mutableCopy"),function(_98,_99){
with(_98){
return objj_msgSend(_98,"copy");
}
}),new objj_method(sel_getUid("_menuItemView"),function(_9a,_9b){
with(_9a){
if(!_menuItemView){
_menuItemView=objj_msgSend(objj_msgSend(_CPMenuItemView,"alloc"),"initWithFrame:forMenuItem:",CGRectMakeZero(),_9a);
}
return _menuItemView;
}
}),new objj_method(sel_getUid("_isSelectable"),function(_9c,_9d){
with(_9c){
return !objj_msgSend(_9c,"submenu")||objj_msgSend(_9c,"action")!==sel_getUid("submenuAction:")||objj_msgSend(_9c,"target")!==objj_msgSend(_9c,"menu");
}
}),new objj_method(sel_getUid("_isMenuBarButton"),function(_9e,_9f){
with(_9e){
return !objj_msgSend(_9e,"submenu")&&objj_msgSend(_9e,"menu")===objj_msgSend(CPApp,"mainMenu");
}
}),new objj_method(sel_getUid("description"),function(_a0,_a1){
with(_a0){
return objj_msgSendSuper({receiver:_a0,super_class:objj_getClass("CPMenuItem").super_class},"description")+" target: "+objj_msgSend(_a0,"target")+" action: "+CPStringFromSelector(objj_msgSend(_a0,"action"));
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("separatorItem"),function(_a2,_a3){
with(_a2){
var _a4=objj_msgSend(objj_msgSend(_a2,"alloc"),"initWithTitle:action:keyEquivalent:","",nil,nil);
_a4._isSeparator=YES;
return _a4;
}
})]);
var _a5="CPMenuItemIsSeparatorKey",_a6="CPMenuItemTitleKey",_a7="CPMenuItemTargetKey",_a8="CPMenuItemActionKey",_a9="CPMenuItemIsEnabledKey",_aa="CPMenuItemIsHiddenKey",_ab="CPMenuItemTagKey",_ac="CPMenuItemStateKey",_ad="CPMenuItemImageKey",_ae="CPMenuItemAlternateImageKey",_af="CPMenuItemSubmenuKey",_b0="CPMenuItemMenuKey",_b1="CPMenuItemKeyEquivalentKey",_b2="CPMenuItemKeyEquivalentModifierMaskKey",_b3="CPMenuItemIndentationLevelKey",_b4="CPMenuItemRepresentedObjectKey",_b5="CPMenuItemViewKey";
var _2=objj_getClass("CPMenuItem");
if(!_2){
throw new SyntaxError("*** Could not find definition for class \"CPMenuItem\"");
}
var _3=_2.isa;
class_addMethods(_2,[new objj_method(sel_getUid("initWithCoder:"),function(_b6,_b7,_b8){
with(_b6){
_b6=objj_msgSendSuper({receiver:_b6,super_class:objj_getClass("CPMenuItem").super_class},"init");
if(_b6){
_changeCount=0;
_isSeparator=objj_msgSend(_b8,"containsValueForKey:",_a5)&&objj_msgSend(_b8,"decodeBoolForKey:",_a5);
_title=objj_msgSend(_b8,"decodeObjectForKey:",_a6);
_target=objj_msgSend(_b8,"decodeObjectForKey:",_a7);
_action=objj_msgSend(_b8,"decodeObjectForKey:",_a8);
_isEnabled=objj_msgSend(_b8,"containsValueForKey:",(_a9))?objj_msgSend(_b8,"decodeObjectForKey:",(_a9)):(YES);
_isHidden=objj_msgSend(_b8,"decodeBoolForKey:",_aa);
_tag=objj_msgSend(_b8,"decodeIntForKey:",_ab);
_state=objj_msgSend(_b8,"decodeIntForKey:",_ac);
_image=objj_msgSend(_b8,"decodeObjectForKey:",_ad);
_alternateImage=objj_msgSend(_b8,"decodeObjectForKey:",_ae);
_menu=objj_msgSend(_b8,"decodeObjectForKey:",_b0);
objj_msgSend(_b6,"setSubmenu:",objj_msgSend(_b8,"decodeObjectForKey:",_af));
_keyEquivalent=objj_msgSend(_b8,"decodeObjectForKey:",_b1)||"";
_keyEquivalentModifierMask=objj_msgSend(_b8,"decodeIntForKey:",_b2);
objj_msgSend(_b6,"setIndentationLevel:",objj_msgSend(_b8,"decodeIntForKey:",_b3));
_representedObject=objj_msgSend(_b8,"decodeObjectForKey:",_b4);
_view=objj_msgSend(_b8,"decodeObjectForKey:",_b5);
}
return _b6;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_b9,_ba,_bb){
with(_b9){
if(_isSeparator){
objj_msgSend(_bb,"encodeBool:forKey:",_isSeparator,_a5);
}
objj_msgSend(_bb,"encodeObject:forKey:",_title,_a6);
objj_msgSend(_bb,"encodeObject:forKey:",_target,_a7);
objj_msgSend(_bb,"encodeObject:forKey:",_action,_a8);
if((_isEnabled)!==(YES)){
objj_msgSend(_bb,"encodeObject:forKey:",(_isEnabled),(_a9));
}
if((_isHidden)!==(NO)){
objj_msgSend(_bb,"encodeObject:forKey:",(_isHidden),(_aa));
}
if((_tag)!==(0)){
objj_msgSend(_bb,"encodeObject:forKey:",(_tag),(_ab));
}
if((_state)!==(CPOffState)){
objj_msgSend(_bb,"encodeObject:forKey:",(_state),(_ac));
}
if((_image)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_image),(_ad));
}
if((_alternateImage)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_alternateImage),(_ae));
}
if((_submenu)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_submenu),(_af));
}
if((_menu)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_menu),(_b0));
}
if(_keyEquivalent&&_keyEquivalent.length){
objj_msgSend(_bb,"encodeObject:forKey:",_keyEquivalent,_b1);
}
if(_keyEquivalentModifierMask){
objj_msgSend(_bb,"encodeObject:forKey:",_keyEquivalentModifierMask,_b2);
}
if(_indentationLevel>0){
objj_msgSend(_bb,"encodeInt:forKey:",_indentationLevel,_b3);
}
if((_representedObject)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_representedObject),(_b4));
}
if((_view)!==(nil)){
objj_msgSend(_bb,"encodeObject:forKey:",(_view),(_b5));
}
}
})]);
p;27;_CPPredicateEditorRowNode.jt;4301;@STATIC;1.0;t;4282;
var _1=objj_allocateClassPair(CPObject,"_CPPredicateEditorRowNode"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("tree"),new objj_ivar("templateViews"),new objj_ivar("copiedTemplateContainer"),new objj_ivar("children")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("tree"),function(_3,_4){
with(_3){
return tree;
}
}),new objj_method(sel_getUid("setTree:"),function(_5,_6,_7){
with(_5){
tree=_7;
}
}),new objj_method(sel_getUid("templateViews"),function(_8,_9){
with(_8){
return templateViews;
}
}),new objj_method(sel_getUid("setTemplateViews:"),function(_a,_b,_c){
with(_a){
templateViews=_c;
}
}),new objj_method(sel_getUid("copiedTemplateContainer"),function(_d,_e){
with(_d){
return copiedTemplateContainer;
}
}),new objj_method(sel_getUid("setCopiedTemplateContainer:"),function(_f,_10,_11){
with(_f){
copiedTemplateContainer=_11;
}
}),new objj_method(sel_getUid("children"),function(_12,_13){
with(_12){
return children;
}
}),new objj_method(sel_getUid("setChildren:"),function(_14,_15,_16){
with(_14){
if(children!==_16){
children=objj_msgSend(_16,"copy");
}
}
}),new objj_method(sel_getUid("applyTemplate:withViews:forOriginalTemplate:"),function(_17,_18,_19,_1a,_1b){
with(_17){
var t=objj_msgSend(tree,"template"),_1c=objj_msgSend(children,"count");
if(t!==_19){
objj_msgSend(templateViews,"setArray:",_1a);
objj_msgSend(copiedTemplateContainer,"removeAllObjects");
objj_msgSend(copiedTemplateContainer,"addObject:",_19);
}
for(var i=0;i<_1c;i++){
objj_msgSend(children[i],"applyTemplate:withViews:forOriginalTemplate:",_19,_1a,_1b);
}
}
}),new objj_method(sel_getUid("isEqual:"),function(_1d,_1e,_1f){
with(_1d){
if(!objj_msgSend(_1f,"isKindOfClass:",objj_msgSend(_CPPredicateEditorRowNode,"class"))){
return NO;
}
return (tree===objj_msgSend(_1f,"tree"));
}
}),new objj_method(sel_getUid("copyTemplateIfNecessary"),function(_20,_21){
with(_20){
if(objj_msgSend(copiedTemplateContainer,"count")===0){
var _22=objj_msgSend(objj_msgSend(tree,"template"),"copy");
objj_msgSend(copiedTemplateContainer,"addObject:",_22);
objj_msgSend(templateViews,"addObjectsFromArray:",objj_msgSend(_22,"templateViews"));
}
}
}),new objj_method(sel_getUid("templateView"),function(_23,_24){
with(_23){
objj_msgSend(_23,"copyTemplateIfNecessary");
return objj_msgSend(templateViews,"objectAtIndex:",objj_msgSend(tree,"indexIntoTemplate"));
}
}),new objj_method(sel_getUid("templateForRow"),function(_25,_26){
with(_25){
objj_msgSend(_25,"copyTemplateIfNecessary");
return objj_msgSend(copiedTemplateContainer,"lastObject");
}
}),new objj_method(sel_getUid("title"),function(_27,_28){
with(_27){
return objj_msgSend(tree,"title");
}
}),new objj_method(sel_getUid("displayValue"),function(_29,_2a){
with(_29){
var _2b=objj_msgSend(_29,"title");
if(_2b!==nil){
return _2b;
}
return objj_msgSend(_29,"templateView");
}
}),new objj_method(sel_getUid("description"),function(_2c,_2d){
with(_2c){
return objj_msgSend(CPString,"stringWithFormat:","<%@ %@ %@ tree:%@ tviews:%@",objj_msgSend(_2c,"className"),objj_msgSend(_2c,"UID"),objj_msgSend(_2c,"title"),objj_msgSend(tree,"UID"),objj_msgSend(templateViews,"description"));
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("rowNodeFromTree:"),function(_2e,_2f,_30){
with(_2e){
return objj_msgSend(_CPPredicateEditorRowNode,"_rowNodeFromTree:withTemplateTable:",_30,{});
}
}),new objj_method(sel_getUid("_rowNodeFromTree:withTemplateTable:"),function(_31,_32,_33,_34){
with(_31){
var _35,_36;
var _37=objj_msgSend(objj_msgSend(_33,"template"),"UID"),_38=_34[_37],_39=objj_msgSend(objj_msgSend(_CPPredicateEditorRowNode,"alloc"),"init");
objj_msgSend(_39,"setTree:",_33);
if(!_38){
_35=objj_msgSend(CPMutableArray,"array");
_36=objj_msgSend(CPMutableArray,"array");
_34[_37]=_39;
}else{
_35=objj_msgSend(_38,"templateViews");
_36=objj_msgSend(_38,"copiedTemplateContainer");
}
objj_msgSend(_39,"setTemplateViews:",_35);
objj_msgSend(_39,"setCopiedTemplateContainer:",_36);
var _3a=objj_msgSend(CPMutableArray,"array"),_3b=objj_msgSend(_33,"children"),_3c=objj_msgSend(_3b,"count");
for(var i=0;i<_3c;i++){
var _3d=_3b[i],_3e=objj_msgSend(_CPPredicateEditorRowNode,"_rowNodeFromTree:withTemplateTable:",_3d,_34);
objj_msgSend(_3a,"addObject:",_3e);
}
objj_msgSend(_39,"setChildren:",_3a);
return _39;
}
})]);
p;24;_CPPredicateEditorTree.jt;2061;@STATIC;1.0;t;2042;
var _1=objj_allocateClassPair(CPObject,"_CPPredicateEditorTree"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("template"),new objj_ivar("title"),new objj_ivar("children"),new objj_ivar("indexIntoTemplate"),new objj_ivar("menuItemIndex")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("template"),function(_3,_4){
with(_3){
return template;
}
}),new objj_method(sel_getUid("setTemplate:"),function(_5,_6,_7){
with(_5){
template=_7;
}
}),new objj_method(sel_getUid("title"),function(_8,_9){
with(_8){
return title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_a,_b,_c){
with(_a){
if(title!==_c){
title=objj_msgSend(_c,"copy");
}
}
}),new objj_method(sel_getUid("children"),function(_d,_e){
with(_d){
return children;
}
}),new objj_method(sel_getUid("setChildren:"),function(_f,_10,_11){
with(_f){
if(children!==_11){
children=objj_msgSend(_11,"copy");
}
}
}),new objj_method(sel_getUid("indexIntoTemplate"),function(_12,_13){
with(_12){
return indexIntoTemplate;
}
}),new objj_method(sel_getUid("setIndexIntoTemplate:"),function(_14,_15,_16){
with(_14){
indexIntoTemplate=_16;
}
}),new objj_method(sel_getUid("menuItemIndex"),function(_17,_18){
with(_17){
return menuItemIndex;
}
}),new objj_method(sel_getUid("setMenuItemIndex:"),function(_19,_1a,_1b){
with(_19){
menuItemIndex=_1b;
}
}),new objj_method(sel_getUid("copy"),function(_1c,_1d){
with(_1c){
var _1e=objj_msgSend(objj_msgSend(_CPPredicateEditorTree,"alloc"),"init");
objj_msgSend(_1e,"setTemplate:",template);
objj_msgSend(_1e,"setTitle:",title);
objj_msgSend(_1e,"setMenuItemIndex:",menuItemIndex);
objj_msgSend(_1e,"setIndexIntoTemplate:",indexIntoTemplate);
objj_msgSend(_1e,"setChildren:",children);
return _1e;
}
}),new objj_method(sel_getUid("description"),function(_1f,_20){
with(_1f){
return objj_msgSend(CPString,"stringWithFormat:","<%@: %p (%@) [%d-%d] T:%p at:%d> [\r%@\r]",objj_msgSend(_1f,"className"),_1f,title,indexIntoTemplate,menuItemIndex,template,objj_msgSend(template,"rightExpressionAttributeType"),children);
}
})]);
p;24;_CPRuleEditorLocalizer.jt;2153;@STATIC;1.0;I;21;Foundation/CPObject.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;2052;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPString.j",NO);
var _1=new RegExp("\"(.+)\"\\s*=\\s*\"(.+)\"\\s*;\\s*(//.+)?");
var _2=objj_allocateClassPair(CPObject,"_CPRuleEditorLocalizer"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_dictionary"),new objj_ivar("connection"),new objj_ivar("resquest")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("dictionary"),function(_4,_5){
with(_4){
return _dictionary;
}
}),new objj_method(sel_getUid("setDictionary:"),function(_6,_7,_8){
with(_6){
_dictionary=_8;
}
}),new objj_method(sel_getUid("loadContentOfURL:"),function(_9,_a,_b){
with(_9){
request=objj_msgSend(CPURLRequest,"requestWithURL:",_b);
connection=objj_msgSend(CPURLConnection,"connectionWithRequest:delegate:",request,_9);
}
}),new objj_method(sel_getUid("reloadIfNeeded"),function(_c,_d){
with(_c){
if(connection!=nil){
connection=nil;
var _e=objj_msgSend(CPURLConnection,"sendSynchronousRequest:returningResponse:",request,NULL);
objj_msgSend(_c,"loadContent:",objj_msgSend(_e,"rawString"));
}
}
}),new objj_method(sel_getUid("connection:didReceiveData:"),function(_f,_10,_11,_12){
with(_f){
if(connection!=nil&&_12!=nil){
objj_msgSend(_f,"loadContent:",_12);
}
connection=nil;
}
}),new objj_method(sel_getUid("loadContent:"),function(_13,_14,_15){
with(_13){
var _16=objj_msgSend(CPDictionary,"dictionary"),_17=objj_msgSend(_15,"componentsSeparatedByString:","\n"),_18=objj_msgSend(_17,"count");
for(var i=0;i<_18;i++){
var _19=objj_msgSend(_17,"objectAtIndex:",i);
if(_19.length>1){
var _1a=_1.exec(_19);
if(_1a.length>=3){
objj_msgSend(_16,"setObject:forKey:",_1a[2],_1a[1]);
}
}
}
_dictionary=objj_msgSend(CPDictionary,"dictionaryWithDictionary:",_16);
}
}),new objj_method(sel_getUid("localizedStringForString:"),function(_1b,_1c,_1d){
with(_1b){
objj_msgSend(_1b,"reloadIfNeeded");
if(_dictionary!=nil&&_1d!=nil){
var _1e=objj_msgSend(_dictionary,"objectForKey:",_1d);
if(_1e!=nil){
return _1e;
}
}
return _1d;
}
})]);
p;26;_CPRuleEditorPopUpButton.jt;4875;@STATIC;1.0;t;4856;
var _1="#fcfcfc",_2="#dfdfdf",_3="#BDBDBD";
var _4,_5,_6;
if(CPBrowserIsEngine(CPWebKitBrowserEngine)){
_4="-webkit-gradient(linear, left top, left bottom, from("+_1+"), to("+_2+"))",_5="-webkit-gradient(linear, left top, left bottom, from("+_2+"), to("+_1+"))";
_6="background";
}else{
if(CPBrowserIsEngine(CPGeckoBrowserEngine)){
_4="-moz-linear-gradient(top, "+_1+", "+_2+")",_5="-moz-linear-gradient(top, "+_2+", "+_1+")";
_6="background";
}else{
if(CPBrowserIsEngine(CPInternetExplorerBrowserEngine)){
_4="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+_1+"', endColorstr='"+_2+"')";
_5="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+_2+"', endColorstr='"+_1+"')";
_6="filter";
}else{
_4=_1;
_5=_2;
_6="background";
}
}
}
var _7=objj_allocateClassPair(CPPopUpButton,"_CPRuleEditorPopUpButton"),_8=_7.isa;
class_addIvars(_7,[new objj_ivar("radius")]);
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("_sharedInit"),function(_9,_a){
with(_9){
objj_msgSend(_9,"setBordered:",NO);
var _b=_DOMElement.style;
_b.border="1px solid "+_3;
_b[_6]=_4;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_c,_d,_e){
with(_c){
if(_c=objj_msgSendSuper({receiver:_c,super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class},"initWithFrame:",_e)){
objj_msgSend(_c,"_sharedInit");
}
return _c;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_f,_10,_11){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class},"initWithCoder:",_11);
objj_msgSend(_f,"_sharedInit");
return _f;
}
}),new objj_method(sel_getUid("hitTest:"),function(_12,_13,_14){
with(_12){
if(!CPRectContainsPoint(objj_msgSend(_12,"frame"),_14)||!objj_msgSend(_12,"sliceIsEditable")){
return nil;
}
return _12;
}
}),new objj_method(sel_getUid("sliceIsEditable"),function(_15,_16){
with(_15){
var _17=objj_msgSend(_15,"superview");
return !objj_msgSend(_17,"isKindOfClass:",[_CPRuleEditorViewSlice])||objj_msgSend(_17,"isEditable");
}
}),new objj_method(sel_getUid("trackMouse:"),function(_18,_19,_1a){
with(_18){
if(!objj_msgSend(_18,"sliceIsEditable")){
return NO;
}
return objj_msgSendSuper({receiver:_18,super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class},"trackMouse:",_1a);
}
}),new objj_method(sel_getUid("contentRectForBounds:"),function(_1b,_1c,_1d){
with(_1b){
var _1e=objj_msgSendSuper({receiver:_1b,super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class},"contentRectForBounds:",_1d);
_1e.origin.x+=radius;
_1e.size.width-=2*radius;
return _1e;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_1f,_20){
with(_1f){
radius=FLOOR(CGRectGetHeight(objj_msgSend(_1f,"bounds"))/2);
var _21=_DOMElement.style,_22=radius+"px";
_21.borderRadius=_22;
objj_msgSendSuper({receiver:_1f,super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class},"layoutSubviews");
}
}),new objj_method(sel_getUid("drawRect:"),function(_23,_24,_25){
with(_23){
var _26=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_27=objj_msgSend(_23,"bounds"),_28=FLOOR(CGRectGetHeight(_27)/3.5);
CGContextTranslateCTM(_26,CGRectGetWidth(_27)-radius-_28,CGRectGetHeight(_27)/2);
var _29=objj_msgSend(CPBezierPath,"bezierPath");
objj_msgSend(_29,"moveToPoint:",CGPointMake(0,1));
objj_msgSend(_29,"lineToPoint:",CGPointMake(_28,1));
objj_msgSend(_29,"lineToPoint:",CGPointMake(_28/2,_28+1));
objj_msgSend(_29,"closePath");
CGContextSetFillColor(_26,objj_msgSend(CPColor,"colorWithWhite:alpha:",101/255,1));
objj_msgSend(_29,"fill");
CGContextScaleCTM(_26,1,-1);
objj_msgSend(_29,"fill");
}
})]);
var _7=objj_allocateClassPair(CPButton,"_CPRuleEditorButton"),_8=_7.isa;
class_addIvars(_7,[new objj_ivar("radius")]);
objj_registerClassPair(_7);
class_addMethods(_7,[new objj_method(sel_getUid("_sharedInit"),function(_2a,_2b){
with(_2a){
objj_msgSend(_2a,"setBordered:",NO);
var _2c=_DOMElement.style;
_2c.border="1px solid "+_3;
_2c[_6]=_4;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_2d,_2e,_2f){
with(_2d){
if(_2d=objj_msgSendSuper({receiver:_2d,super_class:objj_getClass("_CPRuleEditorButton").super_class},"initWithFrame:",_2f)){
objj_msgSend(_2d,"_sharedInit");
}
return _2d;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(_30,_31,_32){
with(_30){
_30=objj_msgSendSuper({receiver:_30,super_class:objj_getClass("_CPRuleEditorButton").super_class},"initWithCoder:",_32);
objj_msgSend(_30,"_sharedInit");
return _30;
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_33,_34){
with(_33){
radius=FLOOR(CGRectGetHeight(objj_msgSend(_33,"bounds"))/2);
var _35=_DOMElement.style,_36=radius+"px";
_35.borderRadius=_36;
_35[_6]=(objj_msgSend(_33,"isHighlighted"))?_5:_4;
objj_msgSendSuper({receiver:_33,super_class:objj_getClass("_CPRuleEditorButton").super_class},"layoutSubviews");
}
})]);
p;24;_CPRuleEditorViewSlice.jt;4164;@STATIC;1.0;t;4145;
var _1=objj_allocateClassPair(CPView,"_CPRuleEditorViewSlice"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_ruleEditor"),new objj_ivar("_indentation"),new objj_ivar("_rowIndex"),new objj_ivar("_animationTargetRect"),new objj_ivar("_selected"),new objj_ivar("_lastSelected"),new objj_ivar("_backgroundColor")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("indentation"),function(_3,_4){
with(_3){
return _indentation;
}
}),new objj_method(sel_getUid("setIndentation:"),function(_5,_6,_7){
with(_5){
_indentation=_7;
}
}),new objj_method(sel_getUid("rowIndex"),function(_8,_9){
with(_8){
return _rowIndex;
}
}),new objj_method(sel_getUid("setRowIndex:"),function(_a,_b,_c){
with(_a){
_rowIndex=_c;
}
}),new objj_method(sel_getUid("_animationTargetRect"),function(_d,_e){
with(_d){
return _animationTargetRect;
}
}),new objj_method(sel_getUid("_setAnimationTargetRect:"),function(_f,_10,_11){
with(_f){
_animationTargetRect=_11;
}
}),new objj_method(sel_getUid("_isSelected"),function(_12,_13){
with(_12){
return _selected;
}
}),new objj_method(sel_getUid("_setSelected:"),function(_14,_15,_16){
with(_14){
_selected=_16;
}
}),new objj_method(sel_getUid("_isLastSelected"),function(_17,_18){
with(_17){
return _lastSelected;
}
}),new objj_method(sel_getUid("_setLastSelected:"),function(_19,_1a,_1b){
with(_19){
_lastSelected=_1b;
}
}),new objj_method(sel_getUid("backgroundColor"),function(_1c,_1d){
with(_1c){
return _backgroundColor;
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_1e,_1f,_20){
with(_1e){
_backgroundColor=_20;
}
}),new objj_method(sel_getUid("removeFromSuperview"),function(_21,_22){
with(_21){
objj_msgSendSuper({receiver:_21,super_class:objj_getClass("_CPRuleEditorViewSlice").super_class},"removeFromSuperview");
}
}),new objj_method(sel_getUid("initWithFrame:ruleEditorView:"),function(_23,_24,_25,_26){
with(_23){
if(_23=objj_msgSendSuper({receiver:_23,super_class:objj_getClass("_CPRuleEditorViewSlice").super_class},"initWithFrame:",_25)){
_ruleEditor=_26;
_selected=NO;
_lastSelected=NO;
}
return _23;
}
}),new objj_method(sel_getUid("_setSelected:"),function(_27,_28,_29){
with(_27){
if(_29==_selected){
return;
}
var _2a=_29?"setThemeState:":"unsetThemeState:";
objj_msgSend(objj_msgSend(_27,"subviews"),"makeObjectsPerformSelector:withObject:",CPSelectorFromString(_2a),CPThemeStateSelectedDataView);
_selected=_29;
}
}),new objj_method(sel_getUid("drawRect:"),function(_2b,_2c,_2d){
with(_2b){
var _2e=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_2f=objj_msgSend(_2b,"bounds"),_30=CGRectGetWidth(_2f)-2,_31=CGRectGetHeight(_2f);
if(objj_msgSend(_2b,"_isSelected")){
_backgroundColor=objj_msgSend(_ruleEditor,"_selectedRowColor");
}else{
var _32=objj_msgSend(_ruleEditor,"_backgroundColors"),_33=objj_msgSend(_32,"count");
_backgroundColor=objj_msgSend(_32,"objectAtIndex:",(_rowIndex%_33));
}
CGContextSetFillColor(_2e,_backgroundColor);
CGContextFillRect(_2e,_2d);
CGContextBeginPath(_2e);
CGContextMoveToPoint(_2e,1,0);
CGContextAddLineToPoint(_2e,_30,0);
CGContextClosePath(_2e);
CGContextSetStrokeColor(_2e,objj_msgSend(_ruleEditor,"_sliceTopBorderColor"));
CGContextStrokePath(_2e);
CGContextBeginPath(_2e);
CGContextMoveToPoint(_2e,1,_31-0.5);
CGContextAddLineToPoint(_2e,_30,_31-0.5);
CGContextClosePath(_2e);
var _34=(_rowIndex==objj_msgSend(_ruleEditor,"_lastRow"))?objj_msgSend(_ruleEditor,"_sliceLastBottomBorderColor"):objj_msgSend(_ruleEditor,"_sliceBottomBorderColor");
CGContextSetStrokeColor(_2e,_34);
CGContextStrokePath(_2e);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_35,_36,_37){
with(_35){
if(editable){
objj_msgSend(_ruleEditor,"_mouseDownOnSlice:withEvent:",_35,_37);
}
}
}),new objj_method(sel_getUid("mouseUp:"),function(_38,_39,_3a){
with(_38){
if(editable){
objj_msgSend(_ruleEditor,"_mouseUpOnSlice:withEvent:",_38,_3a);
}
}
}),new objj_method(sel_getUid("description"),function(_3b,_3c){
with(_3b){
return objj_msgSend(CPString,"stringWithFormat:","<%@ %p index:%d indentation:%d>",objj_msgSend(_3b,"className"),_3b,objj_msgSend(_3b,"rowIndex"),objj_msgSend(_3b,"indentation"));
}
})]);
p;27;_CPRuleEditorViewSliceRow.jt;15959;@STATIC;1.0;i;24;_CPRuleEditorViewSlice.ji;26;_CPRuleEditorPopUpButton.ji;14;CPRuleEditor.jt;15860;
objj_executeFile("_CPRuleEditorViewSlice.j",YES);
objj_executeFile("_CPRuleEditorPopUpButton.j",YES);
objj_executeFile("CPRuleEditor.j",YES);
var _1=16,_2=16;
var _3=objj_allocateClassPair(_CPRuleEditorViewSlice,"_CPRuleEditorViewSliceRow"),_4=_3.isa;
class_addIvars(_3,[new objj_ivar("_ruleOptionViews"),new objj_ivar("_ruleOptionFrames"),new objj_ivar("_correspondingRuleItems"),new objj_ivar("_ruleOptionInitialViewFrames"),new objj_ivar("_addButton"),new objj_ivar("_subtractButton"),new objj_ivar("editable"),new objj_ivar("_rowType"),new objj_ivar("_plusButtonRowType")]);
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("_rowType"),function(_5,_6){
with(_5){
return _rowType;
}
}),new objj_method(sel_getUid("_setRowType:"),function(_7,_8,_9){
with(_7){
_rowType=_9;
}
}),new objj_method(sel_getUid("initWithFrame:ruleEditorView:"),function(_a,_b,_c,_d){
with(_a){
if(_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class},"initWithFrame:ruleEditorView:",_c,_d)){
objj_msgSend(_a,"_initShared");
}
return _a;
}
}),new objj_method(sel_getUid("_initShared"),function(_e,_f){
with(_e){
_correspondingRuleItems=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
_ruleOptionFrames=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
_ruleOptionInitialViewFrames=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
_ruleOptionViews=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
editable=objj_msgSend(_ruleEditor,"isEditable");
_addButton=objj_msgSend(_e,"_createAddRowButton");
_subtractButton=objj_msgSend(_e,"_createDeleteRowButton");
objj_msgSend(_addButton,"setToolTip:",objj_msgSend(_ruleEditor,"_toolTipForAddSimpleRowButton"));
objj_msgSend(_subtractButton,"setToolTip:",objj_msgSend(_ruleEditor,"_toolTipForDeleteRowButton"));
objj_msgSend(_addButton,"setHidden:",!editable);
objj_msgSend(_subtractButton,"setHidden:",!editable);
objj_msgSend(_e,"addSubview:",_addButton);
objj_msgSend(_e,"addSubview:",_subtractButton);
objj_msgSend(_e,"setAutoresizingMask:",CPViewWidthSizable);
var _10=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_10,"addObserver:selector:name:object:",_e,sel_getUid("_textDidChange:"),CPControlTextDidChangeNotification,nil);
}
}),new objj_method(sel_getUid("_createRowButton"),function(_11,_12){
with(_11){
var _13=objj_msgSend(objj_msgSend(_CPRuleEditorButton,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_13,"setFont:",objj_msgSend(CPFont,"boldFontWithName:size:","Apple Symbol",12));
objj_msgSend(_13,"setTextColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",150/255,1));
objj_msgSend(_13,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_13,"setAutoresizingMask:",CPViewMinXMargin);
objj_msgSend(_13,"setImagePosition:",CPImageOnly);
return _13;
}
}),new objj_method(sel_getUid("_createAddRowButton"),function(_14,_15){
with(_14){
var _16=objj_msgSend(_14,"_createRowButton");
objj_msgSend(_16,"setImage:",objj_msgSend(_ruleEditor,"_addImage"));
objj_msgSend(_16,"setAction:",sel_getUid("_addOption:"));
objj_msgSend(_16,"setTarget:",_14);
return _16;
}
}),new objj_method(sel_getUid("_createDeleteRowButton"),function(_17,_18){
with(_17){
var _19=objj_msgSend(_17,"_createRowButton");
objj_msgSend(_19,"setImage:",objj_msgSend(_ruleEditor,"_removeImage"));
objj_msgSend(_19,"setAction:",sel_getUid("_deleteOption:"));
objj_msgSend(_19,"setTarget:",_17);
return _19;
}
}),new objj_method(sel_getUid("_createMenuItemWithTitle:"),function(_1a,_1b,_1c){
with(_1a){
_1c=objj_msgSend(objj_msgSend(_ruleEditor,"standardLocalizer"),"localizedStringForString:",_1c);
var _1d=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_1c,nil,"");
return _1d;
}
}),new objj_method(sel_getUid("_createPopUpButtonWithItems:selectedItemIndex:"),function(_1e,_1f,_20,_21){
with(_1e){
var _22=objj_msgSend(objj_msgSend(_20,"objectAtIndex:",_21),"title"),_23=objj_msgSend(_ruleEditor,"font"),_24=objj_msgSend(_22,"sizeWithFont:",_23).width+20,_25=CGRectMake(0,0,(_24-_24%40)+80,_1),_26=objj_msgSend(objj_msgSend(_CPRuleEditorPopUpButton,"alloc"),"initWithFrame:",_25);
objj_msgSend(_26,"setTextColor:",objj_msgSend(CPColor,"colorWithWhite:alpha:",101/255,1));
objj_msgSend(_26,"setValue:forThemeAttribute:",_23,"font");
var _27=objj_msgSend(_20,"count");
for(var i=0;i<_27;i++){
objj_msgSend(_26,"addItem:",objj_msgSend(_20,"objectAtIndex:",i));
}
objj_msgSend(_26,"selectItemAtIndex:",_21);
return _26;
}
}),new objj_method(sel_getUid("_createMenuSeparatorItem"),function(_28,_29){
with(_28){
return objj_msgSend(CPMenuItem,"separatorItem");
}
}),new objj_method(sel_getUid("_createStaticTextFieldWithStringValue:"),function(_2a,_2b,_2c){
with(_2a){
var _2d=objj_msgSend(objj_msgSend(_CPRuleEditorTextField,"alloc"),"initWithFrame:",CPMakeRect(0,0,200,_1)),_2e=objj_msgSend(_ruleEditor,"font"),_2f=objj_msgSend(CPFont,"fontWithName:size:",objj_msgSend(_2e,"familyName"),objj_msgSend(_2e,"size")+2),_30=objj_msgSend(objj_msgSend(_ruleEditor,"standardLocalizer"),"localizedStringForString:",_2c);
objj_msgSend(_2d,"setValue:forThemeAttribute:",_2f,"font");
objj_msgSend(_2d,"setStringValue:",_30);
objj_msgSend(_2d,"sizeToFit");
return _2d;
}
}),new objj_method(sel_getUid("_addOption:"),function(_31,_32,_33){
with(_31){
if(_rowIndex==objj_msgSend(_ruleEditor,"numberOfRows")-1){
objj_msgSend(_31,"setNeedsDisplay:",YES);
}
var _34=_plusButtonRowType;
if(objj_msgSend(_ruleEditor,"nestingMode")==CPRuleEditorNestingModeCompound&&(objj_msgSend(objj_msgSend(CPApp,"currentEvent"),"modifierFlags")&CPAlternateKeyMask)){
_34=CPRuleEditorRowTypeCompound;
}
objj_msgSend(_ruleEditor,"_addOptionFromSlice:ofRowType:",_31,_34);
}
}),new objj_method(sel_getUid("_deleteOption:"),function(_35,_36,_37){
with(_35){
objj_msgSend(_ruleEditor,"_deleteSlice:",_35);
}
}),new objj_method(sel_getUid("_ruleOptionPopupChangedAction:"),function(_38,_39,_3a){
with(_38){
var _3b=objj_msgSend(_3a,"representedObject"),_3c=objj_msgSend(_3b,"objectForKey:","item"),_3d=objj_msgSend(_3b,"objectForKey:","indexInCriteria"),_3e=objj_msgSend(_correspondingRuleItems,"objectAtIndex:",_3d);
if(!objj_msgSend(_3c,"isEqual:",_3e)){
objj_msgSend(_correspondingRuleItems,"replaceObjectAtIndex:withObject:",_3d,_3c);
objj_msgSend(_ruleEditor,"_changedItem:toItem:inRow:atCriteriaIndex:",_3e,_3c,_rowIndex,_3d);
}
}
}),new objj_method(sel_getUid("validateMenuItem:"),function(_3f,_40,_41){
with(_3f){
return objj_msgSend(_ruleEditor,"_validateItem:value:inRow:",_41,objj_msgSend(objj_msgSend(_41,"representedObject"),"valueForKey:","item"),_rowIndex);
}
}),new objj_method(sel_getUid("_emptyRulePartSubviews"),function(_42,_43){
with(_42){
var _44=objj_msgSend(_ruleOptionViews,"count");
while(_44--){
objj_msgSend(_ruleOptionViews[_44],"removeFromSuperview");
}
objj_msgSend(_ruleOptionViews,"removeAllObjects");
objj_msgSend(_ruleOptionFrames,"removeAllObjects");
objj_msgSend(_ruleOptionInitialViewFrames,"removeAllObjects");
}
}),new objj_method(sel_getUid("_reconfigureSubviews"),function(_45,_46){
with(_45){
var _47,_48,_49,_4a,_4b,_4c,_4d,_4e,_4f,_50,_47=objj_msgSend(CPMutableArray,"array"),_51=objj_msgSend(objj_msgSend(_45,"window"),"firstResponder");
objj_msgSend(_45,"_emptyRulePartSubviews");
_48=objj_msgSend(_ruleEditor,"criteriaForRow:",_rowIndex);
_4e=objj_msgSend(_48,"count");
_50=_4e-1;
if(_51){
_50=objj_msgSend(_ruleOptionViews,"indexOfObjectIdenticalTo:",_51);
}
for(var i=0;i<_4e;i++){
_4b=nil;
_4d=nil;
_4c=objj_msgSend(_48,"objectAtIndex:",i);
if(i>0){
_4d=objj_msgSend(_48,"objectAtIndex:",i-1);
}
var _52=[],_53=[];
objj_msgSend(_ruleEditor,"_getAllAvailableItems:values:asChildrenOfItem:inRow:",_52,_53,_4d,_rowIndex);
_4f=objj_msgSend(_52,"count");
if(_4f>1){
var _54=objj_msgSend(CPMutableArray,"arrayWithCapacity:",_4f),_55=objj_msgSend(_52,"indexOfObject:",_4c);
if(_55==CPNotFound){
break;
}
for(var j=0;j<_4f;++j){
var _56=objj_msgSend(_52,"objectAtIndex:",j),_57=objj_msgSend(_53,"objectAtIndex:",j);
if(objj_msgSend(_57,"isKindOfClass:",objj_msgSend(CPMenuItem,"class"))){
objj_msgSend(objj_msgSend(_57,"menu"),"removeItem:",_57);
_4a=_57;
}else{
if(objj_msgSend(_57,"isEqualToString:","")){
_4a=objj_msgSend(_45,"_createMenuSeparatorItem");
}else{
_4a=objj_msgSend(_45,"_createMenuItemWithTitle:",_57);
objj_msgSend(_4a,"setTarget:",_45);
objj_msgSend(_4a,"setAction:",sel_getUid("_ruleOptionPopupChangedAction:"));
}
}
_49=objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_56,"item",_57,"value",i,"indexInCriteria");
objj_msgSend(_4a,"setRepresentedObject:",_49);
objj_msgSend(_54,"addObject:",_4a);
}
_4b=objj_msgSend(_45,"_createPopUpButtonWithItems:selectedItemIndex:",_54,_55);
}else{
var _58=objj_msgSend(_53,"objectAtIndex:",0),_59=objj_msgSend(_58,"valueType");
if(_59===0){
_4b=objj_msgSend(_45,"_createStaticTextFieldWithStringValue:",_58);
}else{
if(_59!==1){
objj_msgSend(CPException,"raise:reason:",CPInternalInconsistencyException,"Display value must be a string or a menu item");
continue;
}
_4b=_58;
objj_msgSend(_4b,"setTarget:",_45);
objj_msgSend(_4b,"setAction:",sel_getUid("_sendRuleAction:"));
if(objj_msgSend(_4b,"respondsToSelector:",sel_getUid("setDelegate:"))){
objj_msgSend(_4b,"setDelegate:",_45);
}
}
}
if(_4b!=nil){
objj_msgSend(_ruleOptionViews,"addObject:",_4b);
var _5a=objj_msgSend(_4b,"frame");
objj_msgSend(_ruleOptionInitialViewFrames,"addObject:",_5a);
objj_msgSend(_ruleOptionFrames,"addObject:",_5a);
if(!_4c){
_4c=objj_msgSend(CPNull,"null");
}
objj_msgSend(_47,"addObject:",_4c);
}
}
objj_msgSend(_correspondingRuleItems,"setArray:",_47);
if(!editable){
objj_msgSend(_45,"_updateEnabledStateForSubviews");
}
objj_msgSend(_45,"_relayoutSubviewsWidthChanged:",YES);
if(_50!=CPNotFound){
var _5b=objj_msgSend(_ruleOptionViews,"objectAtIndex:",_50);
objj_msgSend(objj_msgSend(_45,"window"),"makeFirstResponder:",_5b);
}
}
}),new objj_method(sel_getUid("_updateEnabledStateForSubviews"),function(_5c,_5d){
with(_5c){
objj_msgSend(_ruleOptionViews,"makeObjectsPerformSelector:withObject:",sel_getUid("setEnabled:"),NO);
}
}),new objj_method(sel_getUid("layoutSubviews"),function(_5e,_5f){
with(_5e){
objj_msgSend(_5e,"_relayoutSubviewsWidthChanged:",YES);
}
}),new objj_method(sel_getUid("_relayoutSubviewsWidthChanged:"),function(_60,_61,_62){
with(_60){
var _63,_64,_65,_66=objj_msgSend(_ruleEditor,"rowHeight"),_67=objj_msgSend(_ruleOptionViews,"count"),_68=objj_msgSend(_60,"frame"),_69=CGRectMake(CGRectGetWidth(_68)-_2-objj_msgSend(_60,"_rowButtonsRightHorizontalPadding"),(objj_msgSend(_ruleEditor,"rowHeight")-_2)/2-2,_2,_2);
objj_msgSend(_addButton,"setFrame:",_69);
_69.origin.x-=_2+objj_msgSend(_60,"_rowButtonsInterviewHorizontalPadding");
objj_msgSend(_subtractButton,"setFrame:",_69);
if(_62){
_63=objj_msgSend(_60,"_leftmostViewFixedHorizontalPadding")+objj_msgSend(_60,"_indentationHorizontalPadding")*_indentation;
_64=objj_msgSend(_60,"_rowButtonsLeftHorizontalPadding");
_65=CGRectGetMinX(_69);
}
for(var i=0;i<_67;i++){
var _6a=_ruleOptionViews[i],_6b=_ruleOptionFrames[i];
_6b.origin.y=(_66-CGRectGetHeight(_6b))/2-2;
if(_62){
_6b.origin.x=_63;
if(i==_67-1&&!objj_msgSend(_60,"_isRulePopup:",_6a)){
var _6c=_ruleOptionInitialViewFrames[i];
_6b.size.width=MIN(CGRectGetWidth(_6c),_65-_64-_63);
}
}
objj_msgSend(_6a,"setFrame:",_6b);
objj_msgSend(_60,"addSubview:",_6a);
if(_62){
_63+=CGRectGetWidth(_6b)+objj_msgSend(_60,"_interviewHorizontalPadding");
}
}
}
}),new objj_method(sel_getUid("_updateButtonVisibilities"),function(_6d,_6e){
with(_6d){
objj_msgSend(_addButton,"setHidden:",objj_msgSend(_ruleEditor,"_shouldHideAddButtonForSlice:",_6d));
objj_msgSend(_subtractButton,"setHidden:",objj_msgSend(_ruleEditor,"_shouldHideSubtractButtonForSlice:",_6d));
}
}),new objj_method(sel_getUid("_configurePlusButtonByRowType:"),function(_6f,_70,_71){
with(_6f){
objj_msgSend(_6f,"_setRowTypeToAddFromPlusButton:",_71);
}
}),new objj_method(sel_getUid("isEditable"),function(_72,_73){
with(_72){
return editable;
}
}),new objj_method(sel_getUid("setEditable:"),function(_74,_75,_76){
with(_74){
editable=_76;
objj_msgSend(_74,"_updateButtonVisibilities");
}
}),new objj_method(sel_getUid("_alignmentGridWidth"),function(_77,_78){
with(_77){
return objj_msgSend(_ruleEditor,"_alignmentGridWidth");
}
}),new objj_method(sel_getUid("_indentationHorizontalPadding"),function(_79,_7a){
with(_79){
return 30;
}
}),new objj_method(sel_getUid("_interviewHorizontalPadding"),function(_7b,_7c){
with(_7b){
return 6;
}
}),new objj_method(sel_getUid("_leftmostViewFixedHorizontalPadding"),function(_7d,_7e){
with(_7d){
return 7;
}
}),new objj_method(sel_getUid("_minimumVerticalPopupPadding"),function(_7f,_80){
with(_7f){
return 2;
}
}),new objj_method(sel_getUid("_rowButtonsInterviewHorizontalPadding"),function(_81,_82){
with(_81){
return 6;
}
}),new objj_method(sel_getUid("_rowButtonsLeftHorizontalPadding"),function(_83,_84){
with(_83){
return 10;
}
}),new objj_method(sel_getUid("_rowButtonsRightHorizontalPadding"),function(_85,_86){
with(_85){
return (objj_msgSend(objj_msgSend(_ruleEditor,"superview"),"isKindOfClass:",objj_msgSend(CPClipView,"class")))?18:10;
}
}),new objj_method(sel_getUid("_setRowTypeToAddFromPlusButton:"),function(_87,_88,_89){
with(_87){
_plusButtonRowType=_89;
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(_8a,_8b,_8c){
with(_8a){
objj_msgSendSuper({receiver:_8a,super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class},"setNeedsDisplay:",_8c);
}
}),new objj_method(sel_getUid("_nestingModeShouldHideAddButton"),function(_8d,_8e){
with(_8d){
return objj_msgSend(_ruleEditor,"_applicableNestingMode")==CPRuleEditorNestingModeSingle;
}
}),new objj_method(sel_getUid("_nestingModeShouldHideSubtractButton"),function(_8f,_90){
with(_8f){
return objj_msgSend(_ruleEditor,"_applicableNestingMode")==CPRuleEditorNestingModeSingle;
}
}),new objj_method(sel_getUid("containsDisplayValue:"),function(_91,_92,_93){
with(_91){
return objj_msgSend(objj_msgSend(_ruleEditor,"displayValuesForRow:",_rowIndex),"containsObject:",_93);
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_94,_95){
with(_94){
objj_msgSend(_94,"layoutSubviews");
}
}),new objj_method(sel_getUid("drawRect:"),function(_96,_97,_98){
with(_96){
objj_msgSendSuper({receiver:_96,super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class},"drawRect:",_98);
}
}),new objj_method(sel_getUid("_isRulePopup:"),function(_99,_9a,_9b){
with(_99){
if(objj_msgSend(_9b,"isKindOfClass:",objj_msgSend(_CPRuleEditorPopUpButton,"class"))){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_isRuleStaticTextField:"),function(_9c,_9d,_9e){
with(_9c){
if(objj_msgSend(_9e,"isKindOfClass:",objj_msgSend(_CPRuleEditorTextField,"class"))){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("_sendRuleAction:"),function(_9f,_a0,_a1){
with(_9f){
objj_msgSend(_ruleEditor,"_updatePredicate");
objj_msgSend(_ruleEditor,"_sendRuleAction");
}
}),new objj_method(sel_getUid("_textDidChange:"),function(_a2,_a3,_a4){
with(_a2){
if(objj_msgSend(objj_msgSend(_a4,"object"),"superview")==_a2&&objj_msgSend(_ruleEditor,"_sendsActionOnIncompleteTextChange")){
objj_msgSend(_a2,"_sendRuleAction:",nil);
}
}
})]);
var _3=objj_allocateClassPair(CPTextField,"_CPRuleEditorTextField"),_4=_3.isa;
objj_registerClassPair(_3);
class_addMethods(_3,[new objj_method(sel_getUid("initWithFrame:"),function(_a5,_a6,_a7){
with(_a5){
_a5=objj_msgSendSuper({receiver:_a5,super_class:objj_getClass("_CPRuleEditorTextField").super_class},"initWithFrame:",_a7);
if(_a5!=nil){
objj_msgSend(_a5,"setBordered:",NO);
objj_msgSend(_a5,"setEditable:",NO);
objj_msgSend(_a5,"setDrawsBackground:",NO);
}
return _a5;
}
}),new objj_method(sel_getUid("hitTest:"),function(_a8,_a9,_aa){
with(_a8){
if(!CPRectContainsPoint(objj_msgSend(_a8,"frame"),_aa)){
return nil;
}
return objj_msgSend(_a8,"superview");
}
})]);
p;19;CPPredicateEditor.jt;13832;@STATIC;1.0;i;14;CPRuleEditor.ji;24;_CPPredicateEditorTree.ji;27;_CPPredicateEditorRowNode.ji;30;CPPredicateEditorRowTemplate.jt;13697;
objj_executeFile("CPRuleEditor.j",YES);
objj_executeFile("_CPPredicateEditorTree.j",YES);
objj_executeFile("_CPPredicateEditorRowNode.j",YES);
objj_executeFile("CPPredicateEditorRowTemplate.j",YES);
var _1=objj_allocateClassPair(CPRuleEditor,"CPPredicateEditor"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_allTemplates"),new objj_ivar("_rootTrees"),new objj_ivar("_rootHeaderTrees"),new objj_ivar("_predicateTarget"),new objj_ivar("_predicateAction")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("target"),function(_3,_4){
with(_3){
return _predicateTarget;
}
}),new objj_method(sel_getUid("setTarget:"),function(_5,_6,_7){
with(_5){
_predicateTarget=_7;
}
}),new objj_method(sel_getUid("action"),function(_8,_9){
with(_8){
return _predicateAction;
}
}),new objj_method(sel_getUid("setAction:"),function(_a,_b,_c){
with(_a){
_predicateAction=_c;
}
}),new objj_method(sel_getUid("rowTemplates"),function(_d,_e){
with(_d){
return _allTemplates;
}
}),new objj_method(sel_getUid("setRowTemplates:"),function(_f,_10,_11){
with(_f){
if(_allTemplates==_11){
return;
}
_allTemplates=_11;
objj_msgSend(_f,"_updateItemsByCompoundTemplates");
objj_msgSend(_f,"_updateItemsBySimpleTemplates");
if(objj_msgSend(_f,"numberOfRows")>0){
var _12=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("CPPredicateEditor").super_class},"predicate");
objj_msgSend(_f,"_reflectPredicate:",_12);
}
}
}),new objj_method(sel_getUid("_replacementKeyPathForBinding:"),function(_13,_14,_15){
with(_13){
if(_15==CPValueBinding){
return "predicate";
}
return objj_msgSendSuper({receiver:_13,super_class:objj_getClass("CPPredicateEditor").super_class},"_replacementKeyPathForBinding:",_15);
}
}),new objj_method(sel_getUid("_initRuleEditorShared"),function(_16,_17){
with(_16){
objj_msgSendSuper({receiver:_16,super_class:objj_getClass("CPPredicateEditor").super_class},"_initRuleEditorShared");
_rootTrees=objj_msgSend(CPArray,"array");
_rootHeaderTrees=objj_msgSend(CPArray,"array");
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_18,_19,_1a){
with(_18){
_18=objj_msgSendSuper({receiver:_18,super_class:objj_getClass("CPPredicateEditor").super_class},"initWithFrame:",_1a);
if(_18!=nil){
var _1b=objj_msgSend(objj_msgSend(CPPredicateEditorRowTemplate,"alloc"),"initWithCompoundTypes:",[CPAndPredicateType,CPOrPredicateType]);
_allTemplates=objj_msgSend(CPArray,"arrayWithObject:",_1b);
}
return _18;
}
}),new objj_method(sel_getUid("objectValue"),function(_1c,_1d){
with(_1c){
return objj_msgSendSuper({receiver:_1c,super_class:objj_getClass("CPPredicateEditor").super_class},"predicate");
}
}),new objj_method(sel_getUid("_updateItemsBySimpleTemplates"),function(_1e,_1f){
with(_1e){
var _20=objj_msgSend(CPMutableArray,"array"),_21=objj_msgSend(_allTemplates,"count"),t;
while(_21--){
var t=_allTemplates[_21];
if(objj_msgSend(t,"_rowType")==CPRuleEditorRowTypeSimple){
objj_msgSend(_20,"insertObject:atIndex:",t,0);
}
}
var _22=objj_msgSend(_1e,"_constructTreesForTemplates:",_20);
if(objj_msgSend(_22,"count")>0){
_rootTrees=objj_msgSend(_1e,"_mergeTree:",_22);
}
}
}),new objj_method(sel_getUid("_updateItemsByCompoundTemplates"),function(_23,_24){
with(_23){
var _25=objj_msgSend(CPMutableArray,"array"),_26=objj_msgSend(_allTemplates,"count"),t;
while(_26--){
var t=_allTemplates[_26];
if(objj_msgSend(t,"_rowType")==CPRuleEditorRowTypeCompound){
objj_msgSend(_25,"insertObject:atIndex:",t,0);
}
}
var _27=objj_msgSend(_23,"_constructTreesForTemplates:",_25);
if(objj_msgSend(_27,"count")>0){
_rootHeaderTrees=objj_msgSend(_23,"_mergeTree:",_27);
}
}
}),new objj_method(sel_getUid("_constructTreesForTemplates:"),function(_28,_29,_2a){
with(_28){
var _2b=objj_msgSend(CPMutableArray,"array"),_2c=objj_msgSend(_2a,"count");
for(var i=0;i<_2c;i++){
var _2d=objj_msgSend(_28,"_constructTreeForTemplate:",_2a[i]);
objj_msgSend(_2b,"addObjectsFromArray:",_2d);
}
return _2b;
}
}),new objj_method(sel_getUid("_mergeTree:"),function(_2e,_2f,_30){
with(_2e){
var _31=objj_msgSend(CPMutableArray,"array");
if(_30==nil){
return _31;
}
var _32=objj_msgSend(_30,"count");
for(var i=0;i<_32;i++){
var _33=objj_msgSend(_30,"objectAtIndex:",i),_34=objj_msgSend(_31,"count"),_35=NO;
for(var j=0;j<_34;j++){
var _36=objj_msgSend(_31,"objectAtIndex:",j);
if(objj_msgSend(objj_msgSend(_36,"title"),"isEqualToString:",objj_msgSend(_33,"title"))){
var _37=objj_msgSend(_36,"children"),_38=objj_msgSend(_33,"children"),_39=objj_msgSend(_37,"arrayByAddingObjectsFromArray:",_38),_3a=objj_msgSend(_2e,"_mergeTree:",_39);
objj_msgSend(_36,"setChildren:",_3a);
_35=YES;
}
}
if(!_35){
objj_msgSend(_31,"addObject:",_33);
}
}
return _31;
}
}),new objj_method(sel_getUid("_constructTreeForTemplate:"),function(_3b,_3c,_3d){
with(_3b){
var _3e=objj_msgSend(CPArray,"array"),_3f=objj_msgSend(_3d,"templateViews"),_40=objj_msgSend(_3f,"count");
while(_40--){
var _41=objj_msgSend(CPArray,"array"),_42=0,_43=-1,_44,_45=objj_msgSend(_3f,"objectAtIndex:",_40),_46=objj_msgSend(_45,"isKindOfClass:",objj_msgSend(CPPopUpButton,"class"));
if(_46){
itemArray=objj_msgSend(objj_msgSend(_45,"itemArray"),"valueForKey:","title");
_42=objj_msgSend(itemArray,"count");
_43=0;
}
for(;_43<_42;_43++){
var _47=objj_msgSend(_CPPredicateEditorTree,"new");
objj_msgSend(_47,"setIndexIntoTemplate:",_40);
objj_msgSend(_47,"setTemplate:",_3d);
objj_msgSend(_47,"setMenuItemIndex:",_43);
if(_46){
objj_msgSend(_47,"setTitle:",objj_msgSend(itemArray,"objectAtIndex:",_43));
}
objj_msgSend(_41,"addObject:",_47);
}
objj_msgSend(_41,"makeObjectsPerformSelector:withObject:",sel_getUid("setChildren:"),_3e);
_3e=_41;
}
return _3e;
}
}),new objj_method(sel_getUid("setObjectValue:"),function(_48,_49,_4a){
with(_48){
var ov=objj_msgSend(_48,"objectValue");
if((ov==nil)!=(_4a==nil)||!objj_msgSend(ov,"isEqual:",_4a)){
objj_msgSend(_48,"_setPredicate:",_4a);
objj_msgSend(_48,"_reflectPredicate:",_4a);
}
}
}),new objj_method(sel_getUid("_reflectPredicate:"),function(_4b,_4c,_4d){
with(_4b){
var _4e=_currentAnimation;
_currentAnimation=nil;
_sendAction=NO;
if(_4d!=nil){
if((_nestingMode==CPRuleEditorNestingModeSimple||_nestingMode==CPRuleEditorNestingModeCompound)&&objj_msgSend(_4d,"isKindOfClass:",objj_msgSend(CPComparisonPredicate,"class"))){
_4d=objj_msgSend(objj_msgSend(CPCompoundPredicate,"alloc"),"initWithType:subpredicates:",objj_msgSend(_4b,"_compoundPredicateTypeForRootRows"),objj_msgSend(CPArray,"arrayWithObject:",_4d));
}
var row=objj_msgSend(_4b,"_rowObjectFromPredicate:",_4d);
if(row!=nil){
objj_msgSend(_boundArrayOwner,"setValue:forKey:",objj_msgSend(CPArray,"arrayWithObject:",row),_boundArrayKeyPath);
}
}
objj_msgSend(_4b,"setAnimation:",_4e);
}
}),new objj_method(sel_getUid("_rowObjectFromPredicate:"),function(_4f,_50,_51){
with(_4f){
var _52,_53,_54=objj_msgSend(CPPredicateEditorRowTemplate,"_bestMatchForPredicate:inTemplates:quality:",_51,objj_msgSend(_4f,"rowTemplates"),_52);
if(_54==nil){
return nil;
}
var _55=objj_msgSend(_54,"copy"),_56=objj_msgSend(_54,"displayableSubpredicatesOfPredicate:",_51);
if(_56==nil){
objj_msgSend(_55,"_setComparisonPredicate:",_51);
_53=CPRuleEditorRowTypeSimple;
}else{
objj_msgSend(_55,"_setCompoundPredicate:",_51);
_53=CPRuleEditorRowTypeCompound;
}
var row=objj_msgSend(_4f,"_rowFromTemplate:originalTemplate:withRowType:",_55,_54,_53);
if(_56==nil){
return row;
}
var _57=objj_msgSend(_56,"count"),_58=objj_msgSend(CPMutableArray,"array");
for(var i=0;i<_57;i++){
var _59=objj_msgSend(_4f,"_rowObjectFromPredicate:",_56[i]);
if(_59!=nil){
objj_msgSend(_58,"addObject:",_59);
}
}
objj_msgSend(row,"setValue:forKey:",_58,objj_msgSendSuper({receiver:_4f,super_class:objj_getClass("CPPredicateEditor").super_class},"subrowsKeyPath"));
return row;
}
}),new objj_method(sel_getUid("_rowFromTemplate:originalTemplate:withRowType:"),function(_5a,_5b,_5c,_5d,_5e){
with(_5a){
var _5f=objj_msgSend(CPArray,"array"),_60=objj_msgSend(CPArray,"array"),_61=objj_msgSend(_5c,"templateViews"),_62,_63;
_62=(_5e==CPRuleEditorRowTypeSimple)?_rootTrees:_rootHeaderTrees;
while((_63=objj_msgSend(_62,"count"))>0){
var _64;
for(var i=0;i<_63;i++){
_64=objj_msgSend(_62,"objectAtIndex:",i);
var _65=objj_msgSend(_61,"objectAtIndex:",objj_msgSend(_64,"indexIntoTemplate")),_66=objj_msgSend(_64,"title");
if(_66==nil||objj_msgSend(_66,"isEqual:",objj_msgSend(_65,"titleOfSelectedItem"))){
var _67=objj_msgSend(_CPPredicateEditorRowNode,"rowNodeFromTree:",_64);
objj_msgSend(_67,"applyTemplate:withViews:forOriginalTemplate:",_5c,_61,_5d);
objj_msgSend(_5f,"addObject:",_67);
objj_msgSend(_60,"addObject:",objj_msgSend(_67,"displayValue"));
break;
}
}
_62=objj_msgSend(_64,"children");
}
var row=objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_5f,"criteria",_60,"displayValues",_5e,"rowType");
return row;
}
}),new objj_method(sel_getUid("_updatePredicate"),function(_68,_69){
with(_68){
objj_msgSend(_68,"_updatePredicateFromRows");
}
}),new objj_method(sel_getUid("_updatePredicateFromRows"),function(_6a,_6b){
with(_6a){
var _6c=objj_msgSendSuper({receiver:_6a,super_class:objj_getClass("CPPredicateEditor").super_class},"_rootRowsArray"),_6d=objj_msgSend(CPMutableArray,"array"),_6e,_6f=_6e=objj_msgSend(_6c,"count"),_70;
while(_6e--){
var _71=objj_msgSend(_6c,"objectAtIndex:",_6e),_72=objj_msgSend(_6a,"_predicateFromRowItem:",_71);
if(_72!=nil){
objj_msgSend(_6d,"insertObject:atIndex:",_72,0);
}
}
if(_nestingMode!=CPRuleEditorNestingModeList&&_6f==1){
_70=objj_msgSend(_6d,"lastObject");
}else{
_70=objj_msgSend(objj_msgSend(CPCompoundPredicate,"alloc"),"initWithType:subpredicates:",objj_msgSend(_6a,"_compoundPredicateTypeForRootRows"),_6d);
}
objj_msgSend(_6a,"_setPredicate:",_70);
}
}),new objj_method(sel_getUid("_predicateFromRowItem:"),function(_73,_74,_75){
with(_73){
var _76=objj_msgSend(CPArray,"array"),_77=objj_msgSend(_75,"valueForKey:",_typeKeyPath);
if(_77==CPRuleEditorRowTypeCompound){
var _78=objj_msgSend(_75,"valueForKey:",_subrowsArrayKeyPath),_79=objj_msgSend(_78,"count");
for(var i=0;i<_79;i++){
var _7a=objj_msgSend(_78,"objectAtIndex:",i),_7b=objj_msgSend(_73,"_predicateFromRowItem:",_7a);
objj_msgSend(_76,"addObject:",_7b);
}
}
var _7c=objj_msgSend(_75,"valueForKey:",_itemsKeyPath),_7d=objj_msgSend(_75,"valueForKey:",_valuesKeyPath),_79=objj_msgSend(_7c,"count"),_7e=objj_msgSend(_7c,"lastObject"),_7f=objj_msgSend(_7e,"templateForRow"),_80=objj_msgSend(_7f,"templateViews");
for(var j=0;j<_79;j++){
var _81=objj_msgSend(_80,"objectAtIndex:",j),_82=objj_msgSend(_7d,"objectAtIndex:",j);
objj_msgSend(objj_msgSend(_7c,"objectAtIndex:",j),"setTemplateViews:",_80);
if(objj_msgSend(_81,"isKindOfClass:",objj_msgSend(CPPopUpButton,"class"))){
objj_msgSend(_81,"selectItemWithTitle:",_82);
}else{
if(objj_msgSend(_81,"respondsToSelector:",sel_getUid("setObjectValue:"))){
objj_msgSend(_81,"setObjectValue:",objj_msgSend(_82,"objectValue"));
}
}
}
return objj_msgSend(_7f,"predicateWithSubpredicates:",_76);
}
}),new objj_method(sel_getUid("_compoundPredicateTypeForRootRows"),function(_83,_84){
with(_83){
return CPAndPredicateType;
}
}),new objj_method(sel_getUid("_sendRuleAction"),function(_85,_86){
with(_85){
objj_msgSendSuper({receiver:_85,super_class:objj_getClass("CPPredicateEditor").super_class},"_sendRuleAction");
}
}),new objj_method(sel_getUid("_sendsActionOnIncompleteTextChange"),function(_87,_88){
with(_87){
return NO;
}
}),new objj_method(sel_getUid("_queryNumberOfChildrenOfItem:withRowType:"),function(_89,_8a,_8b,_8c){
with(_89){
if(_8b==nil){
var _8d=(_8c==CPRuleEditorRowTypeSimple)?_rootTrees:_rootHeaderTrees;
return objj_msgSend(_8d,"count");
}
return objj_msgSend(objj_msgSend(_8b,"children"),"count");
}
}),new objj_method(sel_getUid("_queryChild:ofItem:withRowType:"),function(_8e,_8f,_90,_91,_92){
with(_8e){
if(_91==nil){
var _93=(_92==CPRuleEditorRowTypeSimple)?_rootTrees:_rootHeaderTrees;
return objj_msgSend(_CPPredicateEditorRowNode,"rowNodeFromTree:",_93[_90]);
}
return objj_msgSend(objj_msgSend(_91,"children"),"objectAtIndex:",_90);
}
}),new objj_method(sel_getUid("_queryValueForItem:inRow:"),function(_94,_95,_96,_97){
with(_94){
return objj_msgSend(_96,"displayValue");
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("_binderClassForBinding:"),function(_98,_99,_9a){
with(_98){
if(_9a==CPValueBinding){
return objj_msgSend(CPPredicateEditorValueBinder,"class");
}
return objj_msgSendSuper({receiver:_98,super_class:objj_getMetaClass("CPPredicateEditor").super_class},"_binderClassForBinding:",_9a);
}
})]);
var _9b="CPPredicateTemplates";
var _1=objj_getClass("CPPredicateEditor");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPPredicateEditor\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_9c,_9d,_9e){
with(_9c){
_9c=objj_msgSendSuper({receiver:_9c,super_class:objj_getClass("CPPredicateEditor").super_class},"initWithCoder:",_9e);
if(_9c!=nil){
var _9f=objj_msgSend(_9e,"decodeObjectForKey:",_9b);
if(_9f!=nil){
objj_msgSend(_9c,"setRowTemplates:",_9f);
}
}
return _9c;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_a0,_a1,_a2){
with(_a0){
objj_msgSendSuper({receiver:_a0,super_class:objj_getClass("CPPredicateEditor").super_class},"encodeWithCoder:",_a2);
objj_msgSend(_a2,"encodeObject:forKey:",_allTemplates,_9b);
}
})]);
var _1=objj_allocateClassPair(CPBinder,"CPPredicateEditorValueBinder"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"),function(_a3,_a4,_a5,_a6,_a7){
with(_a3){
objj_msgSend(_source,"_reflectPredicate:",nil);
}
}),new objj_method(sel_getUid("setValue:forBinding:"),function(_a8,_a9,_aa,_ab){
with(_a8){
objj_msgSend(_source,"_reflectPredicate:",_aa);
}
})]);
p;30;CPPredicateEditorRowTemplate.jt;20284;@STATIC;1.0;t;20264;
CPUndefinedAttributeType=0;
CPInteger16AttributeType=100;
CPInteger32AttributeType=200;
CPInteger64AttributeType=300;
CPDecimalAttributeType=400;
CPDoubleAttributeType=500;
CPFloatAttributeType=600;
CPStringAttributeType=700;
CPBooleanAttributeType=800;
CPDateAttributeType=900;
CPBinaryDataAttributeType=1000;
CPTransformableAttributeType=1800;
var _1=objj_allocateClassPair(CPObject,"CPPredicateEditorRowTemplate"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_templateType"),new objj_ivar("_predicateOptions"),new objj_ivar("_predicateModifier"),new objj_ivar("_leftAttributeType"),new objj_ivar("_rightAttributeType"),new objj_ivar("_leftIsWildcard"),new objj_ivar("_rightIsWildcard"),new objj_ivar("_views")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("_templateType"),function(_3,_4){
with(_3){
return _templateType;
}
}),new objj_method(sel_getUid("_setTemplateType:"),function(_5,_6,_7){
with(_5){
_templateType=_7;
}
}),new objj_method(sel_getUid("_predicateOptions"),function(_8,_9){
with(_8){
return _predicateOptions;
}
}),new objj_method(sel_getUid("_setOptions:"),function(_a,_b,_c){
with(_a){
_predicateOptions=_c;
}
}),new objj_method(sel_getUid("_predicateModifier"),function(_d,_e){
with(_d){
return _predicateModifier;
}
}),new objj_method(sel_getUid("_setModifier:"),function(_f,_10,_11){
with(_f){
_predicateModifier=_11;
}
}),new objj_method(sel_getUid("leftAttributeType"),function(_12,_13){
with(_12){
return _leftAttributeType;
}
}),new objj_method(sel_getUid("_setLeftAttributeType:"),function(_14,_15,_16){
with(_14){
_leftAttributeType=_16;
}
}),new objj_method(sel_getUid("rightAttributeType"),function(_17,_18){
with(_17){
return _rightAttributeType;
}
}),new objj_method(sel_getUid("_setRightAttributeType:"),function(_19,_1a,_1b){
with(_19){
_rightAttributeType=_1b;
}
}),new objj_method(sel_getUid("leftIsWildcard"),function(_1c,_1d){
with(_1c){
return _leftIsWildcard;
}
}),new objj_method(sel_getUid("setLeftIsWildcard:"),function(_1e,_1f,_20){
with(_1e){
_leftIsWildcard=_20;
}
}),new objj_method(sel_getUid("rightIsWildcard"),function(_21,_22){
with(_21){
return _rightIsWildcard;
}
}),new objj_method(sel_getUid("setRightIsWildcard:"),function(_23,_24,_25){
with(_23){
_rightIsWildcard=_25;
}
}),new objj_method(sel_getUid("_views"),function(_26,_27){
with(_26){
return _views;
}
}),new objj_method(sel_getUid("setTemplateViews:"),function(_28,_29,_2a){
with(_28){
_views=_2a;
}
}),new objj_method(sel_getUid("initWithLeftExpressions:rightExpressions:modifier:operators:options:"),function(_2b,_2c,_2d,_2e,_2f,_30,_31){
with(_2b){
_2b=objj_msgSendSuper({receiver:_2b,super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class},"init");
if(_2b!=nil){
_templateType=1;
_leftIsWildcard=NO;
_rightIsWildcard=NO;
_leftAttributeType=0;
_rightAttributeType=0;
_predicateModifier=_2f;
_predicateOptions=_31;
var _32=objj_msgSend(_2b,"_viewFromExpressions:",_2d),_33=objj_msgSend(_2b,"_viewFromExpressions:",_2e),_34=objj_msgSend(_2b,"_viewFromOperatorTypes:",_30);
_views=objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithObjects:",_32,_34,_33);
}
return _2b;
}
}),new objj_method(sel_getUid("initWithLeftExpressions:rightExpressionAttributeType:modifier:operators:options:"),function(_35,_36,_37,_38,_39,_3a,_3b){
with(_35){
_35=objj_msgSendSuper({receiver:_35,super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class},"init");
if(_35!=nil){
var _3c=objj_msgSend(_35,"_viewFromExpressions:",_37),_3d=objj_msgSend(_35,"_viewFromOperatorTypes:",_3a),_3e=objj_msgSend(_35,"_viewFromAttributeType:",_38);
_templateType=1;
_leftIsWildcard=NO;
_rightIsWildcard=YES;
_leftAttributeType=0;
_rightAttributeType=_38;
_predicateModifier=_39;
_predicateOptions=_3b;
_views=objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithObjects:",_3c,_3d,_3e);
}
return _35;
}
}),new objj_method(sel_getUid("initWithCompoundTypes:"),function(_3f,_40,_41){
with(_3f){
_3f=objj_msgSendSuper({receiver:_3f,super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class},"init");
if(_3f!=nil){
var _42=objj_msgSend(_3f,"_viewFromCompoundTypes:",_41),_43=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"init");
objj_msgSend(_43,"addItemWithTitle:","of the following are true");
_templateType=2;
_leftIsWildcard=NO;
_rightIsWildcard=NO;
_rightAttributeType=0;
_views=objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithObjects:",_42,_43);
}
return _3f;
}
}),new objj_method(sel_getUid("matchForPredicate:"),function(_44,_45,_46){
with(_44){
if(objj_msgSend(_44,"_templateType")==2&&objj_msgSend(_46,"isKindOfClass:",objj_msgSend(CPCompoundPredicate,"class"))){
if(objj_msgSend(objj_msgSend(_44,"compoundTypes"),"containsObject:",objj_msgSend(_46,"compoundPredicateType"))){
return 1;
}
}else{
if(objj_msgSend(_44,"_templateType")==1&&objj_msgSend(_46,"isKindOfClass:",objj_msgSend(CPComparisonPredicate,"class"))){
if(!_leftIsWildcard&&!objj_msgSend(objj_msgSend(_44,"leftExpressions"),"containsObject:",objj_msgSend(_46,"leftExpression"))){
return 0;
}
if(!objj_msgSend(objj_msgSend(_44,"operators"),"containsObject:",objj_msgSend(_46,"predicateOperatorType"))){
return 0;
}
if(!_rightIsWildcard&&!objj_msgSend(objj_msgSend(_44,"rightExpressions"),"containsObject:",objj_msgSend(_46,"rightExpression"))){
return 0;
}
return 1;
}
}
return 0;
}
}),new objj_method(sel_getUid("templateViews"),function(_47,_48){
with(_47){
return _views;
}
}),new objj_method(sel_getUid("setPredicate:"),function(_49,_4a,_4b){
with(_49){
if(_templateType==2){
objj_msgSend(_49,"_setCompoundPredicate:",_4b);
}else{
objj_msgSend(_49,"_setComparisonPredicate:",_4b);
}
}
}),new objj_method(sel_getUid("displayableSubpredicatesOfPredicate:"),function(_4c,_4d,_4e){
with(_4c){
if(objj_msgSend(_4e,"isKindOfClass:",objj_msgSend(CPCompoundPredicate,"class"))){
var _4f=objj_msgSend(_4e,"subpredicates");
if(objj_msgSend(_4f,"count")==0){
return nil;
}
return _4f;
}
return nil;
}
}),new objj_method(sel_getUid("predicateWithSubpredicates:"),function(_50,_51,_52){
with(_50){
if(_templateType==2){
var _53=objj_msgSend(objj_msgSend(_views[0],"selectedItem"),"representedObject");
return objj_msgSend(objj_msgSend(CPCompoundPredicate,"alloc"),"initWithType:subpredicates:",_53,_52);
}
if(_templateType==1){
var lhs=objj_msgSend(_50,"_leftExpression"),rhs=objj_msgSend(_50,"_rightExpression"),_54=objj_msgSend(objj_msgSend(_views[1],"selectedItem"),"representedObject");
return objj_msgSend(CPComparisonPredicate,"predicateWithLeftExpression:rightExpression:modifier:type:options:",lhs,rhs,objj_msgSend(_50,"modifier"),_54,objj_msgSend(_50,"options"));
}
return nil;
}
}),new objj_method(sel_getUid("leftExpressions"),function(_55,_56){
with(_55){
if(_templateType==1&&!_leftIsWildcard){
var _57=objj_msgSend(_views,"objectAtIndex:",0);
return objj_msgSend(objj_msgSend(_57,"itemArray"),"valueForKey:","representedObject");
}
return nil;
}
}),new objj_method(sel_getUid("rightExpressions"),function(_58,_59){
with(_58){
if(_templateType==1&&!_rightIsWildcard){
var _5a=objj_msgSend(_views,"objectAtIndex:",2);
return objj_msgSend(objj_msgSend(_5a,"itemArray"),"valueForKey:","representedObject");
}
return nil;
}
}),new objj_method(sel_getUid("compoundTypes"),function(_5b,_5c){
with(_5b){
if(_templateType==2){
var _5d=objj_msgSend(_views,"objectAtIndex:",0);
return objj_msgSend(objj_msgSend(_5d,"itemArray"),"valueForKey:","representedObject");
}
return nil;
}
}),new objj_method(sel_getUid("modifier"),function(_5e,_5f){
with(_5e){
if(_templateType==1){
return _predicateModifier;
}
return nil;
}
}),new objj_method(sel_getUid("operators"),function(_60,_61){
with(_60){
if(_templateType==1){
var _62=objj_msgSend(_views,"objectAtIndex:",1);
return objj_msgSend(objj_msgSend(_62,"itemArray"),"valueForKey:","representedObject");
}
return nil;
}
}),new objj_method(sel_getUid("options"),function(_63,_64){
with(_63){
if(_templateType==1){
return _predicateOptions;
}
return nil;
}
}),new objj_method(sel_getUid("rightExpressionAttributeType"),function(_65,_66){
with(_65){
return _rightAttributeType;
}
}),new objj_method(sel_getUid("leftExpressionAttributeType"),function(_67,_68){
with(_67){
return _leftAttributeType;
}
}),new objj_method(sel_getUid("_setCompoundPredicate:"),function(_69,_6a,_6b){
with(_69){
var _6c=objj_msgSend(_views,"objectAtIndex:",0),_6d=objj_msgSend(_6b,"compoundPredicateType"),_6e=objj_msgSend(_6c,"indexOfItemWithRepresentedObject:",_6d);
objj_msgSend(_6c,"selectItemAtIndex:",_6e);
}
}),new objj_method(sel_getUid("_setComparisonPredicate:"),function(_6f,_70,_71){
with(_6f){
var _72=objj_msgSend(_views,"objectAtIndex:",0),_73=objj_msgSend(_views,"objectAtIndex:",1),_74=objj_msgSend(_views,"objectAtIndex:",2),_75=objj_msgSend(_71,"leftExpression"),_76=objj_msgSend(_71,"rightExpression"),_77=objj_msgSend(_71,"predicateOperatorType");
if(_leftIsWildcard){
objj_msgSend(_72,"setObjectValue:",objj_msgSend(_75,"constantValue"));
}else{
var _78=objj_msgSend(_72,"indexOfItemWithRepresentedObject:",_75);
objj_msgSend(_72,"selectItemAtIndex:",_78);
}
var _79=objj_msgSend(_73,"indexOfItemWithRepresentedObject:",_77);
objj_msgSend(_73,"selectItemAtIndex:",_79);
if(_rightIsWildcard){
objj_msgSend(_74,"setObjectValue:",objj_msgSend(_76,"constantValue"));
}else{
var _78=objj_msgSend(_74,"indexOfItemWithRepresentedObject:",_76);
objj_msgSend(_74,"selectItemAtIndex:",_78);
}
}
}),new objj_method(sel_getUid("_leftExpression"),function(_7a,_7b){
with(_7a){
return objj_msgSend(_7a,"_expressionFromView:forAttributeType:",_views[0],_leftAttributeType);
}
}),new objj_method(sel_getUid("_rightExpression"),function(_7c,_7d){
with(_7c){
return objj_msgSend(_7c,"_expressionFromView:forAttributeType:",_views[2],_rightAttributeType);
}
}),new objj_method(sel_getUid("_expressionFromView:forAttributeType:"),function(_7e,_7f,_80,_81){
with(_7e){
if(_81==0){
return objj_msgSend(objj_msgSend(_80,"selectedItem"),"representedObject");
}
var _82;
if(_81>=CPInteger16AttributeType&&_81<=CPFloatAttributeType){
_82=objj_msgSend(_80,"intValue");
}else{
if(_81==CPBooleanAttributeType){
_82=objj_msgSend(_80,"state");
}else{
_82=objj_msgSend(_80,"stringValue");
}
}
return objj_msgSend(CPExpression,"expressionForConstantValue:",_82);
}
}),new objj_method(sel_getUid("_rowType"),function(_83,_84){
with(_83){
return (_templateType-1);
}
}),new objj_method(sel_getUid("copy"),function(_85,_86){
with(_85){
return objj_msgSend(CPKeyedUnarchiver,"unarchiveObjectWithData:",objj_msgSend(CPKeyedArchiver,"archivedDataWithRootObject:",_85));
}
}),new objj_method(sel_getUid("_templateType"),function(_87,_88){
with(_87){
return _templateType;
}
}),new objj_method(sel_getUid("_displayValueForPredicateOperator:"),function(_89,_8a,_8b){
with(_89){
var _8c;
switch(_8b){
case CPLessThanPredicateOperatorType:
_8c="is less than";
break;
case CPLessThanOrEqualToPredicateOperatorType:
_8c="is less than or equal to";
break;
case CPGreaterThanPredicateOperatorType:
_8c="is greater than";
break;
case CPGreaterThanOrEqualToPredicateOperatorType:
_8c="is greater than or equal to";
break;
case CPEqualToPredicateOperatorType:
_8c="is";
break;
case CPNotEqualToPredicateOperatorType:
_8c="is not";
break;
case CPMatchesPredicateOperatorType:
_8c="matches";
break;
case CPLikePredicateOperatorType:
_8c="is like";
break;
case CPBeginsWithPredicateOperatorType:
_8c="begins with";
break;
case CPEndsWithPredicateOperatorType:
_8c="ends with";
break;
case CPInPredicateOperatorType:
_8c="in";
break;
case CPContainsPredicateOperatorType:
_8c="contains";
break;
case CPBetweenPredicateOperatorType:
_8c="between";
break;
default:
CPLogConsole("unknown predicate operator %d"+_8b);
}
return _8c;
}
}),new objj_method(sel_getUid("_displayValueForCompoundPredicateType:"),function(_8d,_8e,_8f){
with(_8d){
var _90;
switch(_8f){
case CPNotPredicateType:
_90="None";
break;
case CPAndPredicateType:
_90="All";
break;
case CPOrPredicateType:
_90="Any";
break;
default:
_90=objj_msgSend(CPString,"stringWithFormat:","unknown compound predicate type %d",_8f);
}
return _90;
}
}),new objj_method(sel_getUid("_displayValueForConstantValue:"),function(_91,_92,_93){
with(_91){
return objj_msgSend(_93,"description");
}
}),new objj_method(sel_getUid("_displayValueForKeyPath:"),function(_94,_95,_96){
with(_94){
return _96;
}
}),new objj_method(sel_getUid("_viewFromExpressions:"),function(_97,_98,_99){
with(_97){
var _9a=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:",CPMakeRect(0,0,100,18)),_9b=objj_msgSend(_99,"count");
for(var i=0;i<_9b;i++){
var exp=_99[i],_9c=objj_msgSend(exp,"expressionType"),_9d;
switch(_9c){
case CPKeyPathExpressionType:
_9d=objj_msgSend(_97,"_displayValueForKeyPath:",objj_msgSend(exp,"keyPath"));
break;
case CPConstantValueExpressionType:
_9d=objj_msgSend(_97,"_displayValueForConstantValue:",objj_msgSend(exp,"constantValue"));
break;
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Invalid Expression type "+_9c);
break;
}
var _9e=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_9d,nil,"");
objj_msgSend(_9e,"setRepresentedObject:",exp);
objj_msgSend(_9a,"addItem:",_9e);
}
objj_msgSend(_9a,"sizeToFit");
return _9a;
}
}),new objj_method(sel_getUid("_viewFromOperatorTypes:"),function(_9f,_a0,_a1){
with(_9f){
var _a2=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:",CGRectMake(0,0,100,18)),_a3=objj_msgSend(_a1,"count");
for(var i=0;i<_a3;i++){
var op=_a1[i],_a4=objj_msgSend(_9f,"_displayValueForPredicateOperator:",op),_a5=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_a4,nil,"");
objj_msgSend(_a5,"setRepresentedObject:",op);
objj_msgSend(_a2,"addItem:",_a5);
}
objj_msgSend(_a2,"sizeToFit");
return _a2;
}
}),new objj_method(sel_getUid("_viewFromCompoundTypes:"),function(_a6,_a7,_a8){
with(_a6){
var _a9=objj_msgSend(objj_msgSend(CPPopUpButton,"alloc"),"initWithFrame:",CGRectMake(0,0,100,18)),_aa=objj_msgSend(_a8,"count");
for(var i=0;i<_aa;i++){
var _ab=_a8[i],_ac=objj_msgSend(_a6,"_displayValueForCompoundPredicateType:",_ab),_ad=objj_msgSend(objj_msgSend(CPMenuItem,"alloc"),"initWithTitle:action:keyEquivalent:",_ac,nil,"");
objj_msgSend(_ad,"setRepresentedObject:",_ab);
objj_msgSend(_a9,"addItem:",_ad);
}
objj_msgSend(_a9,"sizeToFit");
return _a9;
}
}),new objj_method(sel_getUid("_viewFromAttributeType:"),function(_ae,_af,_b0){
with(_ae){
var _b1;
if(_b0>=CPInteger16AttributeType&&_b0<=CPFloatAttributeType){
_b1=objj_msgSend(_ae,"_textFieldWithFrame:",CGRectMake(0,0,50,26));
}else{
if(_b0==CPStringAttributeType){
_b1=objj_msgSend(_ae,"_textFieldWithFrame:",CGRectMake(0,0,150,26));
}else{
if(_b0==CPBooleanAttributeType){
_b1=objj_msgSend(objj_msgSend(CPCheckBox,"alloc"),"initWithFrame:",CGRectMake(0,0,50,26));
}else{
if(_b0==CPDateAttributeType){
_b1=objj_msgSend(objj_msgSend(CPDatePicker,"alloc"),"initWithFrame:",CGRectMake(0,0,150,26));
}else{
return nil;
}
}
}
}
objj_msgSend(_b1,"setTag:",_b0);
return _b1;
}
}),new objj_method(sel_getUid("_textFieldWithFrame:"),function(_b2,_b3,_b4){
with(_b2){
var _b5=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",_b4);
objj_msgSend(_b5,"setBezeled:",YES);
objj_msgSend(_b5,"setBezelStyle:",CPTextFieldSquareBezel);
objj_msgSend(_b5,"setBordered:",YES);
objj_msgSend(_b5,"setEditable:",YES);
objj_msgSend(_b5,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",10));
return _b5;
}
}),new objj_method(sel_getUid("_setOptions:"),function(_b6,_b7,_b8){
with(_b6){
_predicateOptions=_b8;
}
}),new objj_method(sel_getUid("_setModifier:"),function(_b9,_ba,_bb){
with(_b9){
_predicateModifier=_bb;
}
}),new objj_method(sel_getUid("description"),function(_bc,_bd){
with(_bc){
if(_templateType==2){
return objj_msgSend(CPString,"stringWithFormat:","<%@ %p %@>",objj_msgSend(_bc,"className"),_bc,objj_msgSend(objj_msgSend(_bc,"compoundTypes"),"componentsJoinedByString:",", "));
}else{
if(_templateType==1&&_rightIsWildcard){
return objj_msgSend(CPString,"stringWithFormat:","<%@ %p [%@] [%@] %d>",objj_msgSend(_bc,"className"),_bc,objj_msgSend(objj_msgSend(_bc,"leftExpressions"),"componentsJoinedByString:",", "),objj_msgSend(objj_msgSend(_bc,"operators"),"componentsJoinedByString:",", "),objj_msgSend(_bc,"rightExpressionAttributeType"));
}else{
return objj_msgSend(CPString,"stringWithFormat:","<%@ %p [%@] [%@] [%@]>",objj_msgSend(_bc,"className"),_bc,objj_msgSend(objj_msgSend(_bc,"leftExpressions"),"componentsJoinedByString:",", "),objj_msgSend(objj_msgSend(_bc,"operators"),"componentsJoinedByString:",", "),objj_msgSend(objj_msgSend(_bc,"rightExpressions"),"componentsJoinedByString:",", "));
}
}
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("_bestMatchForPredicate:inTemplates:quality:"),function(_be,_bf,_c0,_c1,_c2){
with(_be){
var _c3=objj_msgSend(_c1,"count"),_c4=0,_c5=CPNotFound,i;
for(i=0;i<_c3;i++){
var _c6=objj_msgSend(_c1,"objectAtIndex:",i),_c7=objj_msgSend(_c6,"matchForPredicate:",_c0);
if(_c7>_c4){
_c5=i;
_c4=_c7;
}
}
if(_c5==CPNotFound){
objj_msgSend(CPException,"raise:reason:",CPRangeException,"Unable to find template matching predicate: "+objj_msgSend(_c0,"predicateFormat"));
return nil;
}
return objj_msgSend(_c1,"objectAtIndex:",_c5);
}
}),new objj_method(sel_getUid("_operatorsForAttributeType:"),function(_c8,_c9,_ca){
with(_c8){
var _cb=objj_msgSend(CPMutableArray,"array");
switch(_ca){
case CPInteger16AttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPInteger32AttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPInteger64AttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPDecimalAttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPDoubleAttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPFloatAttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
case CPStringAttributeType:
objj_msgSend(_cb,"addObjects:",99,4,5,8,9);
break;
case CPBooleanAttributeType:
objj_msgSend(_cb,"addObjects:",4,5);
break;
case CPDateAttributeType:
objj_msgSend(_cb,"addObjects:",4,5,0,2,1,3);
break;
default:
CPLogConsole("Cannot create operators for an CPAttributeType "+_ca);
break;
}
return _cb;
}
})]);
var _cc="CPPredicateTemplateType",_cd="CPPredicateTemplateOptions",_ce="CPPredicateTemplateModifier",_cf="CPPredicateTemplateLeftAttributeType",_d0="CPPredicateTemplateRightAttributeType",_d1="CPPredicateTemplateLeftIsWildcard",_d2="CPPredicateTemplateRightIsWildcard",_d3="CPPredicateTemplateViews";
var _1=objj_getClass("CPPredicateEditorRowTemplate");
if(!_1){
throw new SyntaxError("*** Could not find definition for class \"CPPredicateEditorRowTemplate\"");
}
var _2=_1.isa;
class_addMethods(_1,[new objj_method(sel_getUid("initWithCoder:"),function(_d4,_d5,_d6){
with(_d4){
_d4=objj_msgSendSuper({receiver:_d4,super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class},"init");
if(_d4!=nil){
_templateType=objj_msgSend(_d6,"decodeIntForKey:",_cc);
_predicateOptions=objj_msgSend(_d6,"decodeIntForKey:",_cd);
_predicateModifier=objj_msgSend(_d6,"decodeIntForKey:",_ce);
_leftAttributeType=objj_msgSend(_d6,"decodeIntForKey:",_cf);
_rightAttributeType=objj_msgSend(_d6,"decodeIntForKey:",_d0);
_leftIsWildcard=objj_msgSend(_d6,"decodeBoolForKey:",_d1);
_rightIsWildcard=objj_msgSend(_d6,"decodeBoolForKey:",_d2);
_views=objj_msgSend(_d6,"decodeObjectForKey:",_d3);
if(_templateType==1&&_leftIsWildcard==NO){
var _d7=objj_msgSend(_views[0],"itemArray"),_d8=objj_msgSend(_d7,"count");
for(var i=0;i<_d8;i++){
var _d9=_d7[i];
if(objj_msgSend(_d9,"representedObject")==nil){
var exp=objj_msgSend(CPExpression,"expressionForKeyPath:",objj_msgSend(_d9,"title"));
objj_msgSend(_d9,"setRepresentedObject:",exp);
}
}
}
}
return _d4;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(_da,_db,_dc){
with(_da){
objj_msgSend(_dc,"encodeInt:forKey:",_templateType,_cc);
objj_msgSend(_dc,"encodeInt:forKey:",_predicateOptions,_cd);
objj_msgSend(_dc,"encodeInt:forKey:",_predicateModifier,_ce);
objj_msgSend(_dc,"encodeInt:forKey:",_leftAttributeType,_cf);
objj_msgSend(_dc,"encodeInt:forKey:",_rightAttributeType,_d0);
objj_msgSend(_dc,"encodeBool:forKey:",_leftIsWildcard,_d1);
objj_msgSend(_dc,"encodeBool:forKey:",_rightIsWildcard,_d2);
objj_msgSend(_dc,"encodeObject:forKey:",_views,_d3);
}
})]);
p;14;CPRuleEditor.jt;67587;@STATIC;1.0;I;20;AppKit/CPTextField.jI;24;AppKit/CPViewAnimation.jI;15;AppKit/CPView.jI;24;Foundation/CPPredicate.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;23;Foundation/CPIndexSet.ji;27;_CPRuleEditorViewSliceRow.ji;24;_CPRuleEditorLocalizer.jt;67320;
objj_executeFile("AppKit/CPTextField.j",NO);
objj_executeFile("AppKit/CPViewAnimation.j",NO);
objj_executeFile("AppKit/CPView.j",NO);
objj_executeFile("Foundation/CPPredicate.j",NO);
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPDictionary.j",NO);
objj_executeFile("Foundation/CPIndexSet.j",NO);
objj_executeFile("_CPRuleEditorViewSliceRow.j",YES);
objj_executeFile("_CPRuleEditorLocalizer.j",YES);
CPRuleEditorPredicateLeftExpression="CPRuleEditorPredicateLeftExpression";
CPRuleEditorPredicateRightExpression="CPRuleEditorPredicateRightExpression";
CPRuleEditorPredicateComparisonModifier="CPRuleEditorPredicateComparisonModifier";
CPRuleEditorPredicateOptions="CPRuleEditorPredicateOptions";
CPRuleEditorPredicateOperatorType="CPRuleEditorPredicateOperatorType";
CPRuleEditorPredicateCustomSelector="CPRuleEditorPredicateCustomSelector";
CPRuleEditorPredicateCompoundType="CPRuleEditorPredicateCompoundType";
CPRuleEditorRowsDidChangeNotification="CPRuleEditorRowsDidChangeNotification";
CPRuleEditorRulesDidChangeNotification="CPRuleEditorRulesDidChangeNotification";
CPRuleEditorNestingModeSingle=0;
CPRuleEditorNestingModeList=1;
CPRuleEditorNestingModeCompound=2;
CPRuleEditorNestingModeSimple=3;
CPRuleEditorRowTypeSimple=0;
CPRuleEditorRowTypeCompound=1;
var _1="CPRuleEditorItemPBoardType",_2="items",_3="values",_4="subrows_array",_5="bound_array";
var _6=objj_allocateClassPair(CPControl,"CPRuleEditor"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_suppressKeyDownHandling"),new objj_ivar("_allowsEmptyCompoundRows"),new objj_ivar("_disallowEmpty"),new objj_ivar("_delegateWantsValidation"),new objj_ivar("_editable"),new objj_ivar("_sendAction"),new objj_ivar("_rowClass"),new objj_ivar("_draggingRows"),new objj_ivar("_subviewIndexOfDropLine"),new objj_ivar("_dropLineView"),new objj_ivar("_rowCache"),new objj_ivar("_slices"),new objj_ivar("_predicate"),new objj_ivar("_itemsKeyPath"),new objj_ivar("_subrowsArrayKeyPath"),new objj_ivar("_typeKeyPath"),new objj_ivar("_valuesKeyPath"),new objj_ivar("_boundArrayKeyPath"),new objj_ivar("_slicesHolder"),new objj_ivar("_currentAnimation"),new objj_ivar("_lastRow"),new objj_ivar("_nestingMode"),new objj_ivar("_alignmentGridWidth"),new objj_ivar("_sliceHeight"),new objj_ivar("_ruleDataSource"),new objj_ivar("_ruleDelegate"),new objj_ivar("_boundArrayOwner"),new objj_ivar("_stringsFilename"),new objj_ivar("_isKeyDown"),new objj_ivar("_nestingModeDidChange"),new objj_ivar("_standardLocalizer"),new objj_ivar("_itemsAndValuesToAddForRowType")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("boundArrayKeyPath"),function(_8,_9){
with(_8){
return _boundArrayKeyPath;
}
}),new objj_method(sel_getUid("setBoundArrayKeyPath:"),function(_a,_b,_c){
with(_a){
_boundArrayKeyPath=_c;
}
}),new objj_method(sel_getUid("standardLocalizer"),function(_d,_e){
with(_d){
return _standardLocalizer;
}
}),new objj_method(sel_getUid("setStandardLocalizer:"),function(_f,_10,_11){
with(_f){
_standardLocalizer=_11;
}
}),new objj_method(sel_getUid("initWithFrame:"),function(_12,_13,_14){
with(_12){
_12=objj_msgSendSuper({receiver:_12,super_class:objj_getClass("CPRuleEditor").super_class},"initWithFrame:",_14);
if(_12!==nil){
_slices=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
_sliceHeight=26;
_nestingMode=CPRuleEditorNestingModeSimple;
_editable=YES;
_allowsEmptyCompoundRows=NO;
_disallowEmpty=NO;
objj_msgSend(_12,"setFormattingStringsFilename:",nil);
objj_msgSend(_12,"setCriteriaKeyPath:","criteria");
objj_msgSend(_12,"setSubrowsKeyPath:","subrows");
objj_msgSend(_12,"setRowTypeKeyPath:","rowType");
objj_msgSend(_12,"setDisplayValuesKeyPath:","displayValues");
objj_msgSend(_12,"setBoundArrayKeyPath:","boundArray");
_slicesHolder=objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceHolder,"alloc"),"initWithFrame:",objj_msgSend(_12,"bounds"));
objj_msgSend(_12,"addSubview:",_slicesHolder);
_boundArrayOwner=objj_msgSend(objj_msgSend(_CPRuleEditorViewUnboundRowHolder,"alloc"),"init");
objj_msgSend(_12,"_initRuleEditorShared");
}
return _12;
}
}),new objj_method(sel_getUid("_initRuleEditorShared"),function(_15,_16){
with(_15){
_rowCache=objj_msgSend(objj_msgSend(CPMutableArray,"alloc"),"init");
_rowClass=objj_msgSend(_CPRuleEditorRowObject,"class");
_isKeyDown=NO;
_subviewIndexOfDropLine=CPNotFound;
_lastRow=0;
_delegateWantsValidation=YES;
_suppressKeyDownHandling=NO;
_nestingModeDidChange=NO;
_sendAction=YES;
_itemsAndValuesToAddForRowType={};
var _17=objj_msgSend(objj_msgSend(CPViewAnimation,"alloc"),"initWithDuration:animationCurve:",0.5,CPAnimationEaseInOut);
objj_msgSend(_15,"setAnimation:",_17);
objj_msgSend(_slicesHolder,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_dropLineView=objj_msgSend(_15,"_createSliceDropSeparator");
objj_msgSend(_slicesHolder,"addSubview:",_dropLineView);
objj_msgSend(_15,"registerForDraggedTypes:",objj_msgSend(CPArray,"arrayWithObjects:",_1,nil));
objj_msgSend(_boundArrayOwner,"addObserver:forKeyPath:options:context:",_15,_boundArrayKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_5);
}
}),new objj_method(sel_getUid("delegate"),function(_18,_19){
with(_18){
return _ruleDelegate;
}
}),new objj_method(sel_getUid("setDelegate:"),function(_1a,_1b,_1c){
with(_1a){
if(_ruleDelegate===_1c){
return;
}
var nc=objj_msgSend(CPNotificationCenter,"defaultCenter");
if(_ruleDelegate){
objj_msgSend(nc,"removeObserver:name:object:",_ruleDelegate,nil,_1a);
}
_ruleDelegate=_1c;
if(objj_msgSend(_ruleDelegate,"respondsToSelector:",sel_getUid("ruleEditorRowsDidChange:"))){
objj_msgSend(nc,"addObserver:selector:name:object:",_ruleDelegate,sel_getUid("ruleEditorRowsDidChange:"),CPRuleEditorRowsDidChangeNotification,nil);
}
}
}),new objj_method(sel_getUid("isEditable"),function(_1d,_1e){
with(_1d){
return _editable;
}
}),new objj_method(sel_getUid("setEditable:"),function(_1f,_20,_21){
with(_1f){
if(_21===_editable){
return;
}
_editable=_21;
if(!_editable){
objj_msgSend(_1f,"_deselectAll");
}
objj_msgSend(_slices,"makeObjectsPerformSelector:withObject:",sel_getUid("setEditable:"),_editable);
}
}),new objj_method(sel_getUid("nestingMode"),function(_22,_23){
with(_22){
return _nestingMode;
}
}),new objj_method(sel_getUid("setNestingMode:"),function(_24,_25,_26){
with(_24){
if(_26!==_nestingMode){
_nestingMode=_26;
if(objj_msgSend(_24,"numberOfRows")>0){
_nestingModeDidChange=YES;
}
}
}
}),new objj_method(sel_getUid("canRemoveAllRows"),function(_27,_28){
with(_27){
return !_disallowEmpty;
}
}),new objj_method(sel_getUid("setCanRemoveAllRows:"),function(_29,_2a,_2b){
with(_29){
_disallowEmpty=!_2b;
objj_msgSend(_29,"_updateButtonVisibilities");
}
}),new objj_method(sel_getUid("allowsEmptyCompoundRows"),function(_2c,_2d){
with(_2c){
return _allowsEmptyCompoundRows;
}
}),new objj_method(sel_getUid("setAllowsEmptyCompoundRows:"),function(_2e,_2f,_30){
with(_2e){
_allowsEmptyCompoundRows=_30;
objj_msgSend(_2e,"_updateButtonVisibilities");
}
}),new objj_method(sel_getUid("rowHeight"),function(_31,_32){
with(_31){
return _sliceHeight;
}
}),new objj_method(sel_getUid("setRowHeight:"),function(_33,_34,_35){
with(_33){
if(_35===_sliceHeight){
return;
}
_sliceHeight=MAX(objj_msgSend(_33,"_minimumFrameHeight"),_35);
objj_msgSend(_33,"_reconfigureSubviewsAnimate:",NO);
}
}),new objj_method(sel_getUid("formattingDictionary"),function(_36,_37){
with(_36){
return objj_msgSend(_standardLocalizer,"dictionary");
}
}),new objj_method(sel_getUid("setFormattingDictionary:"),function(_38,_39,_3a){
with(_38){
objj_msgSend(_standardLocalizer,"setDictionary:",_3a);
_stringsFilename=nil;
}
}),new objj_method(sel_getUid("formattingStringsFilename"),function(_3b,_3c){
with(_3b){
return _stringsFilename;
}
}),new objj_method(sel_getUid("setFormattingStringsFilename:"),function(_3d,_3e,_3f){
with(_3d){
if(_standardLocalizer===nil){
_standardLocalizer=objj_msgSend(_CPRuleEditorLocalizer,"new");
}
if(_stringsFilename!==_3f){
_stringsFilename=_3f;
if(_3f!==nil){
if(!objj_msgSend(_3f,"hasSuffix:",".strings")){
_3f=_3f+".strings";
}
var _40=objj_msgSend(objj_msgSend(CPBundle,"mainBundle"),"pathForResource:",_3f);
if(_40!==nil){
objj_msgSend(_standardLocalizer,"loadContentOfURL:",objj_msgSend(CPURL,"URLWithString:",_40));
}
}
}
}
}),new objj_method(sel_getUid("reloadCriteria"),function(_41,_42){
with(_41){
var _43=objj_msgSend(_boundArrayOwner,"valueForKey:",_boundArrayKeyPath);
objj_msgSend(_41,"_stopObservingRowObjectsRecursively:",_43);
objj_msgSend(_boundArrayOwner,"setValue:forKey:",objj_msgSend(CPArray,"arrayWithArray:",_43),_boundArrayKeyPath);
}
}),new objj_method(sel_getUid("setCriteria:andDisplayValues:forRowAtIndex:"),function(_44,_45,_46,_47,_48){
with(_44){
if(_46===nil||_47===nil){
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,_45+". criteria and values parameters must not be nil.");
}
if(_48<0||_48>=objj_msgSend(_44,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,_45+". rowIndex is out of bounds.");
}
var _49=objj_msgSend(objj_msgSend(_44,"_rowCacheForIndex:",_48),"rowObject");
objj_msgSend(_49,"setValue:forKey:",_46,_itemsKeyPath);
objj_msgSend(_49,"setValue:forKey:",_47,_valuesKeyPath);
objj_msgSend(_44,"reloadCriteria");
}
}),new objj_method(sel_getUid("criteriaForRow:"),function(_4a,_4b,row){
with(_4a){
var _4c=objj_msgSend(_4a,"_rowCacheForIndex:",row);
if(_4c){
return objj_msgSend(objj_msgSend(_4c,"rowObject"),"valueForKey:",_itemsKeyPath);
}
return nil;
}
}),new objj_method(sel_getUid("displayValuesForRow:"),function(_4d,_4e,row){
with(_4d){
var _4f=objj_msgSend(_4d,"_rowCacheForIndex:",row);
if(_4f){
return objj_msgSend(objj_msgSend(_4f,"rowObject"),"valueForKey:",_valuesKeyPath);
}
return nil;
}
}),new objj_method(sel_getUid("numberOfRows"),function(_50,_51){
with(_50){
return objj_msgSend(_slices,"count");
}
}),new objj_method(sel_getUid("parentRowForRow:"),function(_52,_53,_54){
with(_52){
if(_54<0||_54>=objj_msgSend(_52,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,_53+" row "+_54+" is out of range");
}
var _55=objj_msgSend(objj_msgSend(_52,"_rowCacheForIndex:",_54),"rowObject");
for(var _56=0;_56<_54;_56++){
if(objj_msgSend(_52,"rowTypeForRow:",_56)===CPRuleEditorRowTypeCompound){
var _57=objj_msgSend(objj_msgSend(_52,"_rowCacheForIndex:",_56),"rowObject"),_58=objj_msgSend(objj_msgSend(_52,"_subrowObjectsOfObject:",_57),"_representedObject");
if(objj_msgSend(_58,"indexOfObjectIdenticalTo:",_55)!==CPNotFound){
return _56;
}
}
}
return -1;
}
}),new objj_method(sel_getUid("rowTypeForRow:"),function(_59,_5a,_5b){
with(_59){
if(_5b<0||_5b>objj_msgSend(_59,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,_5a+"row "+_5b+" is out of range");
}
var _5c=objj_msgSend(_59,"_rowCacheForIndex:",_5b);
if(_5c){
var _5d=objj_msgSend(_5c,"rowObject");
return objj_msgSend(_5d,"valueForKey:",_typeKeyPath);
}
return CPNotFound;
}
}),new objj_method(sel_getUid("subrowIndexesForRow:"),function(_5e,_5f,_60){
with(_5e){
var _61;
if(_60===-1){
_61=_boundArrayOwner;
}else{
_61=objj_msgSend(objj_msgSend(_5e,"_rowCacheForIndex:",_60),"rowObject");
}
var _62=objj_msgSend(_5e,"_subrowObjectsOfObject:",_61),_63=objj_msgSend(_62,"count"),_64=objj_msgSend(CPMutableIndexSet,"indexSet"),_65=objj_msgSend(_5e,"numberOfRows");
for(var i=_60+1;i<_65;i++){
var _66=objj_msgSend(objj_msgSend(_5e,"_rowCacheForIndex:",i),"rowObject"),_67=objj_msgSend(objj_msgSend(_62,"_representedObject"),"indexOfObjectIdenticalTo:",_66);
if(_67!==CPNotFound){
objj_msgSend(_64,"addIndex:",i);
_63--;
if(objj_msgSend(_5e,"rowTypeForRow:",i)===CPRuleEditorRowTypeCompound){
i+=objj_msgSend(objj_msgSend(_5e,"subrowIndexesForRow:",i),"count");
}
}
if(_63===0){
break;
}
}
return _64;
}
}),new objj_method(sel_getUid("selectedRowIndexes"),function(_68,_69){
with(_68){
return objj_msgSend(_68,"_selectedSliceIndices");
}
}),new objj_method(sel_getUid("selectRowIndexes:byExtendingSelection:"),function(_6a,_6b,_6c,_6d){
with(_6a){
var _6e=objj_msgSend(_slices,"count"),_6f=objj_msgSend(_6c,"lastIndex");
if(_6f>=objj_msgSend(_6a,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,"row indexes "+_6c+" are out of range");
}
if(!_6d){
objj_msgSend(_6a,"_deselectAll");
}
while(_6e--){
var _70=_slices[_6e],_71=objj_msgSend(_70,"rowIndex"),_72=objj_msgSend(_6c,"containsIndex:",_71),_73=(_72&&!(_6d&&objj_msgSend(_70,"_isSelected")));
if(_72){
objj_msgSend(_70,"_setSelected:",_73);
}
objj_msgSend(_70,"_setLastSelected:",(_71===_6f));
objj_msgSend(_70,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("addRow:"),function(_74,_75,_76){
with(_74){
var _77=-1,_78,_79=objj_msgSend(_74,"numberOfRows"),_7a=(_79>0),_7b=objj_msgSend(_74,"_applicableNestingMode");
switch(_7b){
case CPRuleEditorNestingModeSimple:
_78=_7a?CPRuleEditorRowTypeSimple:CPRuleEditorRowTypeCompound;
if(_7a){
_77=0;
}
break;
case CPRuleEditorNestingModeSingle:
if(_7a){
return;
}
case CPRuleEditorNestingModeList:
_78=CPRuleEditorRowTypeSimple;
break;
case CPRuleEditorNestingModeCompound:
_78=CPRuleEditorRowTypeCompound;
if(_7a){
_77=0;
}
break;
default:
objj_msgSend(CPException,"raise:reason:",CPInvalidArgumentException,"Not supported CPRuleEditorNestingMode "+_7b);
}
objj_msgSend(_74,"insertRowAtIndex:withType:asSubrowOfRow:animate:",_79,_78,_77,YES);
}
}),new objj_method(sel_getUid("insertRowAtIndex:withType:asSubrowOfRow:animate:"),function(_7c,_7d,_7e,_7f,_80,_81){
with(_7c){
var _82=objj_msgSend(_7c,"_insertNewRowAtIndex:ofType:withParentRow:",_7e,_7f,_80);
if(_7f===CPRuleEditorRowTypeCompound&&!_allowsEmptyCompoundRows){
var _83=objj_msgSend(_7c,"_insertNewRowAtIndex:ofType:withParentRow:",(_7e+1),CPRuleEditorRowTypeSimple,_7e);
}
}
}),new objj_method(sel_getUid("removeRowAtIndex:"),function(_84,_85,_86){
with(_84){
if(_86<0||_86>=objj_msgSend(_84,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,"row "+_86+" is out of range");
}
objj_msgSend(_84,"removeRowsAtIndexes:includeSubrows:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_86),NO);
}
}),new objj_method(sel_getUid("removeRowsAtIndexes:includeSubrows:"),function(_87,_88,_89,_8a){
with(_87){
if(objj_msgSend(_89,"count")===0){
return;
}
if(objj_msgSend(_89,"lastIndex")>=objj_msgSend(_87,"numberOfRows")){
objj_msgSend(CPException,"raise:reason:",CPRangeException,"rows indexes "+_89+" are out of range");
}
var _8b=objj_msgSend(_89,"firstIndex"),_8c=objj_msgSend(_87,"parentRowForRow:",_8b),_8d=objj_msgSend(CPMutableIndexSet,"indexSet"),_8e;
if(_8c===-1){
_8e=objj_msgSend(_87,"_rootRowsArray");
}else{
var _8f=objj_msgSend(objj_msgSend(_87,"_rowCacheForIndex:",_8c),"rowObject");
_8e=objj_msgSend(_87,"_subrowObjectsOfObject:",_8f);
}
while(_8b!==CPNotFound){
var _90=objj_msgSend(objj_msgSend(_87,"_rowCacheForIndex:",_8b),"rowObject"),_91=objj_msgSend(objj_msgSend(_8e,"_representedObject"),"indexOfObjectIdenticalTo:",_90);
if(_91!==CPNotFound){
objj_msgSend(_8d,"addIndex:",_91);
}
if(_8a&&objj_msgSend(_87,"rowTypeForRow:",_8b)===CPRuleEditorRowTypeCompound){
var _92=objj_msgSend(_87,"subrowIndexesForRow:",_8b);
objj_msgSend(_87,"removeRowsAtIndexes:includeSubrows:",_92,_8a);
}
_8b=objj_msgSend(_89,"indexGreaterThanIndex:",_8b);
}
objj_msgSend(_8e,"removeObjectsAtIndexes:",_8d);
}
}),new objj_method(sel_getUid("predicate"),function(_93,_94){
with(_93){
return _predicate;
}
}),new objj_method(sel_getUid("reloadPredicate"),function(_95,_96){
with(_95){
objj_msgSend(_95,"_updatePredicate");
}
}),new objj_method(sel_getUid("predicateForRow:"),function(_97,_98,_99){
with(_97){
var _9a=objj_msgSend(CPDictionary,"dictionary"),_9b=objj_msgSend(_97,"criteriaForRow:",_99),_9c=objj_msgSend(_9b,"count"),_9d,i;
for(i=0;i<_9c;i++){
var _9e=objj_msgSend(_9b,"objectAtIndex:",i),_9f=objj_msgSend(objj_msgSend(_97,"displayValuesForRow:",_99),"objectAtIndex:",i),_a0=objj_msgSend(_ruleDelegate,"ruleEditor:predicatePartsForCriterion:withDisplayValue:inRow:",_97,_9e,_9f,_99);
if(_a0){
objj_msgSend(_9a,"addEntriesFromDictionary:",_a0);
}
}
if(objj_msgSend(_97,"rowTypeForRow:",_99)===CPRuleEditorRowTypeCompound){
var _a1,_a2=objj_msgSend(CPMutableArray,"array"),_a3=objj_msgSend(_97,"subrowIndexesForRow:",_99);
if(objj_msgSend(_a3,"count")===0){
return nil;
}
var _a4=objj_msgSend(_a3,"firstIndex");
while(_a4!==CPNotFound){
var _a5=objj_msgSend(_97,"predicateForRow:",_a4);
if(_a5!==nil){
objj_msgSend(_a2,"addObject:",_a5);
}
_a4=objj_msgSend(_a3,"indexGreaterThanIndex:",_a4);
}
var _a6=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateCompoundType);
if(objj_msgSend(_a2,"count")===0){
return nil;
}else{
try{
_a1=objj_msgSend(objj_msgSend(CPCompoundPredicate,"alloc"),"initWithType:subpredicates:",_a6,_a2);
}
catch(error){
CPLogConsole("Compound predicate error: [%@]\npredicateType:%i",objj_msgSend(error,"description"),_a6);
_a1=nil;
}
finally{
return _a1;
}
}
}
var lhs=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateLeftExpression),rhs=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateRightExpression),_a7=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateOperatorType),_a8=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateOptions),_a9=objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateComparisonModifier),_aa=CPSelectorFromString(objj_msgSend(_9a,"objectForKey:",CPRuleEditorPredicateCustomSelector));
if(lhs===nil){
CPLogConsole("missing left expression in predicate parts dictionary");
return NULL;
}
if(rhs===nil){
CPLogConsole("missing right expression in predicate parts dictionary");
return NULL;
}
if(_aa===nil&&_a7===nil){
CPLogConsole("missing operator and selector in predicate parts dictionary");
return NULL;
}
if(_a9===nil){
CPLogConsole("missing modifier in predicate parts dictionary. Setting default: CPDirectPredicateModifier");
}
if(_a8===nil){
CPLogConsole("missing options in predicate parts dictionary. Setting default: CPCaseInsensitivePredicateOption");
}
try{
if(_aa!==nil){
_9d=objj_msgSend(CPComparisonPredicate,"predicateWithLeftExpression:rightExpression:customSelector:",lhs,rhs,_aa);
}else{
_9d=objj_msgSend(CPComparisonPredicate,"predicateWithLeftExpression:rightExpression:modifier:type:options:",lhs,rhs,(_a9||CPDirectPredicateModifier),_a7,(_a8||CPCaseInsensitivePredicateOption));
}
}
catch(error){
CPLogConsole("Row predicate error: ["+objj_msgSend(error,"description")+"] for row "+_99);
_9d=nil;
}
finally{
return _9d;
}
}
}),new objj_method(sel_getUid("rowClass"),function(_ab,_ac){
with(_ab){
return _rowClass;
}
}),new objj_method(sel_getUid("setRowClass:"),function(_ad,_ae,_af){
with(_ad){
if(_af===objj_msgSend(CPMutableDictionary,"class")){
_af=objj_msgSend(_CPRuleEditorRowObject,"class");
}
_rowClass=_af;
}
}),new objj_method(sel_getUid("rowTypeKeyPath"),function(_b0,_b1){
with(_b0){
return _typeKeyPath;
}
}),new objj_method(sel_getUid("setRowTypeKeyPath:"),function(_b2,_b3,_b4){
with(_b2){
if(_typeKeyPath!==_b4){
_typeKeyPath=_b4;
}
}
}),new objj_method(sel_getUid("subrowsKeyPath"),function(_b5,_b6){
with(_b5){
return _subrowsArrayKeyPath;
}
}),new objj_method(sel_getUid("setSubrowsKeyPath:"),function(_b7,_b8,_b9){
with(_b7){
if(_subrowsArrayKeyPath!==_b9){
_subrowsArrayKeyPath=_b9;
}
}
}),new objj_method(sel_getUid("criteriaKeyPath"),function(_ba,_bb){
with(_ba){
return _itemsKeyPath;
}
}),new objj_method(sel_getUid("setCriteriaKeyPath:"),function(_bc,_bd,_be){
with(_bc){
if(_itemsKeyPath!==_be){
_itemsKeyPath=_be;
}
}
}),new objj_method(sel_getUid("displayValuesKeyPath"),function(_bf,_c0){
with(_bf){
return _valuesKeyPath;
}
}),new objj_method(sel_getUid("setDisplayValuesKeyPath:"),function(_c1,_c2,_c3){
with(_c1){
if(_valuesKeyPath!==_c3){
_valuesKeyPath=_c3;
}
}
}),new objj_method(sel_getUid("animation"),function(_c4,_c5){
with(_c4){
return _currentAnimation;
}
}),new objj_method(sel_getUid("setAnimation:"),function(_c6,_c7,_c8){
with(_c6){
_currentAnimation=_c8;
objj_msgSend(_currentAnimation,"setDelegate:",_c6);
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_c9,_ca){
with(_c9){
return YES;
}
}),new objj_method(sel_getUid("keyDown:"),function(_cb,_cc,_cd){
with(_cb){
if(!_suppressKeyDownHandling&&objj_msgSend(_cb,"_applicableNestingMode")===CPRuleEditorNestingModeCompound&&!_isKeyDown&&(objj_msgSend(_cd,"modifierFlags")&CPAlternateKeyMask)){
objj_msgSend(_slices,"makeObjectsPerformSelector:withObject:",sel_getUid("_configurePlusButtonByRowType:"),CPRuleEditorRowTypeCompound);
}
_isKeyDown=YES;
}
}),new objj_method(sel_getUid("keyUp:"),function(_ce,_cf,_d0){
with(_ce){
if(!_suppressKeyDownHandling){
objj_msgSend(_slices,"makeObjectsPerformSelector:withObject:",sel_getUid("_configurePlusButtonByRowType:"),CPRuleEditorRowTypeSimple);
}
_isKeyDown=NO;
}
}),new objj_method(sel_getUid("_createSliceDropSeparator"),function(_d1,_d2){
with(_d1){
var _d3=objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceDropSeparator,"alloc"),"initWithFrame:",CGRectMake(0,-10,objj_msgSend(_d1,"frame").size.width,2));
objj_msgSend(_d3,"setAutoresizingMask:",CPViewWidthSizable);
return _d3;
}
}),new objj_method(sel_getUid("_suppressKeyDownHandling"),function(_d4,_d5){
with(_d4){
return _suppressKeyDownHandling;
}
}),new objj_method(sel_getUid("_wantsRowAnimations"),function(_d6,_d7){
with(_d6){
return (_currentAnimation!==nil);
}
}),new objj_method(sel_getUid("_updateButtonVisibilities"),function(_d8,_d9){
with(_d8){
objj_msgSend(_slices,"makeObjectsPerformSelector:",sel_getUid("_updateButtonVisibilities"));
}
}),new objj_method(sel_getUid("_alignmentGridWidth"),function(_da,_db){
with(_da){
return _alignmentGridWidth;
}
}),new objj_method(sel_getUid("_minimumFrameHeight"),function(_dc,_dd){
with(_dc){
return 26;
}
}),new objj_method(sel_getUid("_applicableNestingMode"),function(_de,_df){
with(_de){
if(!_nestingModeDidChange){
return _nestingMode;
}
var a=(_nestingMode===CPRuleEditorNestingModeCompound||_nestingMode===CPRuleEditorNestingModeSimple),b=(objj_msgSend(_de,"rowTypeForRow:",0)===CPRuleEditorRowTypeCompound);
if(a===b){
return _nestingMode;
}
return a?CPRuleEditorNestingModeList:CPRuleEditorNestingModeSimple;
}
}),new objj_method(sel_getUid("_shouldHideAddButtonForSlice:"),function(_e0,_e1,_e2){
with(_e0){
return (!_editable||objj_msgSend(_e0,"_applicableNestingMode")===CPRuleEditorNestingModeSingle);
}
}),new objj_method(sel_getUid("_shouldHideSubtractButtonForSlice:"),function(_e3,_e4,_e5){
with(_e3){
if(!_editable){
return YES;
}
if(!_disallowEmpty){
return NO;
}
var _e6,_e7=objj_msgSend(_e5,"rowIndex"),_e8=objj_msgSend(_e3,"parentRowForRow:",_e7),_e9=objj_msgSend(_e3,"subrowIndexesForRow:",_e8),_ea=objj_msgSend(_e3,"_applicableNestingMode");
switch(_ea){
case CPRuleEditorNestingModeCompound:
case CPRuleEditorNestingModeSimple:
_e6=(objj_msgSend(_e9,"count")===1&&!_allowsEmptyCompoundRows)||_e8===-1;
break;
case CPRuleEditorNestingModeList:
_e6=(objj_msgSend(_e3,"numberOfRows")===1);
break;
case CPRuleEditorNestingModeSingle:
_e6=YES;
break;
default:
_e6=NO;
}
return _e6;
}
}),new objj_method(sel_getUid("_rowCacheForIndex:"),function(_eb,_ec,_ed){
with(_eb){
return objj_msgSend(_rowCache,"objectAtIndex:",_ed);
}
}),new objj_method(sel_getUid("_searchCacheForRowObject:"),function(_ee,_ef,_f0){
with(_ee){
var _f1=objj_msgSend(_rowCache,"count"),i;
for(i=0;i<_f1;i++){
var _f2=_rowCache[i];
if(objj_msgSend(_f2,"rowObject")===_f0){
return _f2;
}
}
return nil;
}
}),new objj_method(sel_getUid("_rowIndexForRowObject:"),function(_f3,_f4,_f5){
with(_f3){
if(_f5===_boundArrayOwner){
return -1;
}
return objj_msgSend(objj_msgSend(_f3,"_searchCacheForRowObject:",_f5),"rowIndex");
}
}),new objj_method(sel_getUid("_subrowObjectsOfObject:"),function(_f6,_f7,_f8){
with(_f6){
if(_f8===_boundArrayOwner){
return objj_msgSend(_f6,"_rootRowsArray");
}
return objj_msgSend(_f8,"mutableArrayValueForKey:",_subrowsArrayKeyPath);
}
}),new objj_method(sel_getUid("_childlessParentsIfSlicesWereDeletedAtIndexes:"),function(_f9,_fa,_fb){
with(_f9){
var _fc=objj_msgSend(CPIndexSet,"indexSet"),_fd=objj_msgSend(_fb,"firstIndex");
while(_fd!==CPNotFound){
var _fe=objj_msgSend(_f9,"parentRowForRow:",_fd),_ff=objj_msgSend(_f9,"subrowIndexesForRow:",_fe);
if(objj_msgSend(_ff,"count")===1){
if(_fe!==-1){
return objj_msgSend(CPIndexSet,"indexSetWithIndex:",0);
}
var _100=objj_msgSend(_f9,"_childlessParentsIfSlicesWereDeletedAtIndexes:",objj_msgSend(CPIndexSet,"indexSetWithIndex:",_fe));
objj_msgSend(_fc,"addIndexes:",_100);
}
_fd=objj_msgSend(_fb,"indexGreaterThanIndex:",_fd);
}
return _fc;
}
}),new objj_method(sel_getUid("_includeSubslicesForSlicesAtIndexes:"),function(self,_101,_102){
with(self){
var _103=objj_msgSend(_102,"copy"),_104=objj_msgSend(_102,"firstIndex");
while(_104!==CPNotFound){
var sub=objj_msgSend(self,"subrowIndexesForRow:",_104);
objj_msgSend(_103,"addIndexes:",objj_msgSend(self,"_includeSubslicesForSlicesAtIndexes:",sub));
_104=objj_msgSend(_102,"indexGreaterThanIndex:",_104);
}
return _103;
}
}),new objj_method(sel_getUid("_deleteSlice:"),function(self,_105,_106){
with(self){
var _107=objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_106,"rowIndex"));
if(!_allowsEmptyCompoundRows){
var _108=objj_msgSend(self,"_childlessParentsIfSlicesWereDeletedAtIndexes:",_107);
if(objj_msgSend(_108,"count")>0){
_107=_108;
}
}
objj_msgSend(self,"removeRowsAtIndexes:includeSubrows:",_107,YES);
objj_msgSend(self,"_updatePredicate");
objj_msgSend(self,"_sendRuleAction");
objj_msgSend(self,"_postRuleOptionChangedNotification");
objj_msgSend(self,"_postRowCountChangedNotificationOfType:indexes:",CPRuleEditorRowsDidChangeNotification,_107);
}
}),new objj_method(sel_getUid("_rootRowsArray"),function(self,_109){
with(self){
return objj_msgSend(_boundArrayOwner,"mutableArrayValueForKey:",_boundArrayKeyPath);
}
}),new objj_method(sel_getUid("_nextUnusedItems:andValues:forRow:forRowType:"),function(self,_10a,_10b,_10c,_10d,type){
with(self){
var _10e=objj_msgSend(_10b,"lastObject"),_10f=objj_msgSend(self,"_queryNumberOfChildrenOfItem:withRowType:",_10e,type),_110=CPNotFound;
if(_10f===0){
return NO;
}
var _111=objj_msgSend(CPMutableArray,"array"),_112=objj_msgSend(self,"numberOfRows"),row;
for(row=0;row<_112;row++){
var _113=objj_msgSend(self,"criteriaForRow:",row),_114=objj_msgSend(_10b,"count");
if(objj_msgSend(self,"rowTypeForRow:",row)===type&&_114<objj_msgSend(_113,"count")){
var crit=objj_msgSend(_113,"objectAtIndex:",_114);
objj_msgSend(_111,"addObject:",crit);
}
}
while(_110===CPNotFound){
var _115=objj_msgSend(CPMutableArray,"arrayWithArray:",_111),i;
for(i=0;i<_10f;i++){
var _116=objj_msgSend(self,"_queryChild:ofItem:withRowType:",i,_10e,type);
if(objj_msgSend(_111,"indexOfObject:",_116)===CPNotFound){
_110=i;
break;
}
}
if(_110===CPNotFound){
for(var k=0;k<_10f;k++){
var _117=objj_msgSend(self,"_queryChild:ofItem:withRowType:",k,_10e,type),_118=objj_msgSend(_115,"indexOfObject:",_117);
if(_118!==CPNotFound){
objj_msgSend(_115,"removeObjectAtIndex:",_118);
}
}
_111=_115;
}
}
var _119=objj_msgSend(self,"_queryChild:ofItem:withRowType:",_110,_10e,type),_11a=objj_msgSend(self,"_queryValueForItem:inRow:",_119,_10d);
objj_msgSend(_10b,"addObject:",_119);
objj_msgSend(_10c,"addObject:",_11a);
return YES;
}
}),new objj_method(sel_getUid("_getItemsAndValuesToAddForRow:ofType:"),function(self,_11b,_11c,type){
with(self){
var _11d=objj_msgSend(CPMutableArray,"array"),_11e=objj_msgSend(CPMutableArray,"array"),_11f=objj_msgSend(CPMutableArray,"array"),_120=YES;
while(_120){
_120=objj_msgSend(self,"_nextUnusedItems:andValues:forRow:forRowType:",_11e,_11f,_11c,type);
}
var _121=objj_msgSend(_11e,"count");
for(var i=0;i<_121;i++){
var item=objj_msgSend(_11e,"objectAtIndex:",i),_122=objj_msgSend(_11f,"objectAtIndex:",i),_123=objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[item,_122],["item","value"]);
objj_msgSend(_11d,"addObject:",_123);
}
return _11d;
}
}),new objj_method(sel_getUid("_addOptionFromSlice:ofRowType:"),function(self,_124,_125,type){
with(self){
var _126=objj_msgSend(_125,"rowIndex"),_127=objj_msgSend(self,"rowTypeForRow:",_126),_128=_126+1,_129=(_127===CPRuleEditorRowTypeCompound)?_126:objj_msgSend(self,"parentRowForRow:",_126);
objj_msgSend(self,"insertRowAtIndex:withType:asSubrowOfRow:animate:",_128,type,_129,YES);
}
}),new objj_method(sel_getUid("_insertNewRowAtIndex:ofType:withParentRow:"),function(self,_12a,_12b,_12c,_12d){
with(self){
var row=objj_msgSend(objj_msgSend(objj_msgSend(self,"rowClass"),"alloc"),"init"),_12e=objj_msgSend(self,"_getItemsAndValuesToAddForRow:ofType:",_12b,_12c),_12f=objj_msgSend(_12e,"valueForKey:","item"),_130=objj_msgSend(_12e,"valueForKey:","value");
objj_msgSend(row,"setValue:forKey:",_12f,_itemsKeyPath);
objj_msgSend(row,"setValue:forKey:",_130,_valuesKeyPath);
objj_msgSend(row,"setValue:forKey:",_12c,_typeKeyPath);
objj_msgSend(row,"setValue:forKey:",objj_msgSend(CPMutableArray,"array"),_subrowsArrayKeyPath);
var _131;
if(_12d===-1||objj_msgSend(self,"_applicableNestingMode")===CPRuleEditorNestingModeList){
_131=objj_msgSend(self,"_rootRowsArray");
}else{
var _132=objj_msgSend(objj_msgSend(self,"_rowCacheForIndex:",_12d),"rowObject");
_131=objj_msgSend(self,"_subrowObjectsOfObject:",_132);
}
var _133=_12b-_12d-1;
objj_msgSend(_131,"insertObject:atIndex:",row,_133);
objj_msgSend(self,"_updatePredicate");
objj_msgSend(self,"_sendRuleAction");
objj_msgSend(self,"_postRuleOptionChangedNotification");
objj_msgSend(self,"_postRowCountChangedNotificationOfType:indexes:",CPRuleEditorRowsDidChangeNotification,objj_msgSend(CPIndexSet,"indexSetWithIndex:",_12b));
return row;
}
}),new objj_method(sel_getUid("_startObservingRowObjectsRecursively:"),function(self,_134,_135){
with(self){
objj_msgSend(_boundArrayOwner,"addObserver:forKeyPath:options:context:",self,_boundArrayKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_5);
var _136=objj_msgSend(_135,"count");
for(var i=0;i<_136;i++){
var _137=objj_msgSend(_135,"objectAtIndex:",i);
objj_msgSend(_137,"addObserver:forKeyPath:options:context:",self,_itemsKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_2);
objj_msgSend(_137,"addObserver:forKeyPath:options:context:",self,_valuesKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_3);
objj_msgSend(_137,"addObserver:forKeyPath:options:context:",self,_subrowsArrayKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_4);
var _138=objj_msgSend(self,"_subrowObjectsOfObject:",_137);
if(objj_msgSend(_138,"count")>0){
objj_msgSend(self,"_startObservingRowObjectsRecursively:",_138);
}
}
}
}),new objj_method(sel_getUid("_stopObservingRowObjectsRecursively:"),function(self,_139,_13a){
with(self){
objj_msgSend(_boundArrayOwner,"removeObserver:forKeyPath:",self,_boundArrayKeyPath);
var _13b=objj_msgSend(_13a,"count");
for(var i=0;i<_13b;i++){
var _13c=objj_msgSend(_13a,"objectAtIndex:",i);
objj_msgSend(_13c,"removeObserver:forKeyPath:",self,_itemsKeyPath);
objj_msgSend(_13c,"removeObserver:forKeyPath:",self,_valuesKeyPath);
objj_msgSend(_13c,"removeObserver:forKeyPath:",self,_subrowsArrayKeyPath);
var _13d=objj_msgSend(_13c,"valueForKey:",_subrowsArrayKeyPath);
if(objj_msgSend(_13d,"count")>0){
objj_msgSend(self,"_stopObservingRowObjectsRecursively:",_13d);
}
}
}
}),new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"),function(self,_13e,_13f,_140,_141,_142){
with(self){
var _143=objj_msgSend(_141,"objectForKey:",CPKeyValueChangeKindKey),_144=objj_msgSend(_141,"objectForKey:",CPKeyValueChangeNewKey),_145=objj_msgSend(_141,"objectForKey:",CPKeyValueChangeOldKey),_146,_147;
if(_142===_5||_142===_4){
if(_143===CPKeyValueChangeSetting){
_146=_144;
_147=_145;
}else{
if(_143===CPKeyValueChangeInsertion){
_146=objj_msgSend(self,"_subrowObjectsOfObject:",_140);
_147=objj_msgSend(CPArray,"arrayWithArray:",_146);
objj_msgSend(_147,"removeObjectsInArray:",_144);
}else{
if(_143===CPKeyValueChangeRemoval){
_146=objj_msgSend(self,"_subrowObjectsOfObject:",_140);
_147=objj_msgSend(CPArray,"arrayWithArray:",_146);
var _148=objj_msgSend(_141,"objectForKey:",CPKeyValueChangeIndexesKey);
objj_msgSend(_147,"insertObjects:atIndexes:",delObjects,_145);
}
}
}
objj_msgSend(self,"_changedRowArray:withOldRowArray:forParent:",_146,_147,_140);
objj_msgSend(self,"_reconfigureSubviewsAnimate:",objj_msgSend(self,"_wantsRowAnimations"));
}else{
if(_142===_2){
}else{
if(_142===_3){
}
}
}
}
}),new objj_method(sel_getUid("_changedItem:toItem:inRow:atCriteriaIndex:"),function(self,_149,_14a,_14b,aRow,_14c){
with(self){
var _14d=objj_msgSend(self,"criteriaForRow:",aRow),_14e=objj_msgSend(self,"displayValuesForRow:",aRow),_14f=objj_msgSend(self,"rowTypeForRow:",aRow),_150=_14b,_151=objj_msgSend(_14d,"subarrayWithRange:",CPMakeRange(0,_14c)),_152=objj_msgSend(_14e,"subarrayWithRange:",CPMakeRange(0,_14c));
_lastRow=aRow;
while(YES){
objj_msgSend(_151,"addObject:",_150);
var _153=objj_msgSend(self,"_queryValueForItem:inRow:",_150,aRow);
objj_msgSend(_152,"addObject:",_153);
if(!objj_msgSend(self,"_queryNumberOfChildrenOfItem:withRowType:",_150,_14f)){
break;
}
_150=objj_msgSend(self,"_queryChild:ofItem:withRowType:",0,_150,_14f);
}
var _154=objj_msgSend(objj_msgSend(self,"_rowCacheForIndex:",aRow),"rowObject");
objj_msgSend(_154,"setValue:forKey:",_151,_itemsKeyPath);
objj_msgSend(_154,"setValue:forKey:",_152,_valuesKeyPath);
var _155=objj_msgSend(_slices,"objectAtIndex:",aRow);
objj_msgSend(_155,"_reconfigureSubviews");
objj_msgSend(self,"_updatePredicate");
objj_msgSend(self,"_sendRuleAction");
objj_msgSend(self,"_postRuleOptionChangedNotification");
}
}),new objj_method(sel_getUid("_changedRowArray:withOldRowArray:forParent:"),function(self,_156,_157,_158,_159){
with(self){
var _15a=objj_msgSend(_157,"count"),_15b=objj_msgSend(_158,"count"),_15c=_15a-_15b,_15d=MIN(_15a,_15b),_15e=MAX(_15a,_15b),_15f=objj_msgSend(CPIndexSet,"indexSet"),_160=objj_msgSend(CPArray,"array"),_161,_162=objj_msgSend(self,"_rowIndexForRowObject:",_159),_163=0,_164=0;
objj_msgSend(self,"_stopObservingRowObjectsRecursively:",_158);
objj_msgSend(self,"_startObservingRowObjectsRecursively:",_157);
if(_162===-1){
_161=-1;
}else{
_161=objj_msgSend(objj_msgSend(self,"_rowCacheForIndex:",_162),"indentation");
}
for(;_163<_15a;_163++){
var _165=(_162+1)+_163,obj=objj_msgSend(_157,"objectAtIndex:",_163),_166=objj_msgSend(obj,"valueForKey:",_typeKeyPath),_167=objj_msgSend(objj_msgSend(_CPRuleEditorCache,"alloc"),"init");
objj_msgSend(_167,"setRowObject:",obj);
objj_msgSend(_167,"setRowIndex:",_165);
objj_msgSend(_167,"setIndentation:",_161+1);
objj_msgSend(_15f,"addIndex:",_165);
objj_msgSend(_160,"addObject:",_167);
}
objj_msgSend(_rowCache,"removeObjectsInRange:",CPMakeRange(_162+1,objj_msgSend(_158,"count")));
objj_msgSend(_rowCache,"insertObjects:atIndexes:",_160,_15f);
for(;_164<_15d;_164++){
var _168=objj_msgSend(_158,"objectAtIndex:",_164),_169=objj_msgSend(_157,"objectAtIndex:",_164);
if(_169!==_168){
break;
}
}
var _16a=(_15c===0)?_15e:_15e-_15d,_16b=_162+_164+1;
if(_15c<=0){
var _16c=objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(_16b,_16a)),_16d=objj_msgSend(_slices,"objectsAtIndexes:",_16c);
objj_msgSend(_16d,"makeObjectsPerformSelector:",sel_getUid("removeFromSuperview"));
objj_msgSend(_slices,"removeObjectsAtIndexes:",_16c);
}
if(_15c>=0){
var _16e=_161+1,_16f=_16b;
for(;_16f<_16b+_16a;_16f++){
var _170=objj_msgSend(self,"_newSlice"),_171=objj_msgSend(self,"rowTypeForRow:",_16f);
objj_msgSend(_170,"setRowIndex:",_16f);
objj_msgSend(_170,"setIndentation:",_16e);
objj_msgSend(_170,"_setRowType:",_171);
objj_msgSend(_170,"_configurePlusButtonByRowType:",CPRuleEditorRowTypeSimple);
objj_msgSend(_slices,"insertObject:atIndex:",_170,_16f);
}
}
var _172=objj_msgSend(CPArray,"array"),_173=objj_msgSend(_158,"count"),n;
for(n=0;n<_173;n++){
var _174=objj_msgSend(_158,"objectAtIndex:",n),_175=objj_msgSend(self,"_subrowObjectsOfObject:",_174);
if(objj_msgSend(_175,"count")>0){
objj_msgSend(self,"_changedRowArray:withOldRowArray:forParent:",_172,_175,_174);
}
}
_173=objj_msgSend(_157,"count");
for(n=0;n<_173;n++){
var _176=objj_msgSend(_157,"objectAtIndex:",n),_177=objj_msgSend(self,"_subrowObjectsOfObject:",_176);
if(objj_msgSend(_177,"count")>0){
objj_msgSend(self,"_changedRowArray:withOldRowArray:forParent:",_177,_172,_176);
}
}
}
}),new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"),function(self,_178,_179,_17a,_17b,_17c){
with(self){
if(objj_msgSend(_179,"isEqualToString:","rows")){
objj_msgSend(self,"unbind:",_179);
objj_msgSend(self,"_setBoundDataSource:withKeyPath:options:",_17a,_17b,_17c);
objj_msgSend(_rowCache,"removeAllObjects");
objj_msgSend(_slices,"removeAllObjects");
var _17d=objj_msgSend(CPArray,"array"),_17e=objj_msgSend(self,"_rootRowsArray");
objj_msgSend(self,"_changedRowArray:withOldRowArray:forParent:",_17d,_17e,_boundArrayOwner);
}else{
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"bind:toObject:withKeyPath:options:",_179,_17a,_17b,_17c);
}
}
}),new objj_method(sel_getUid("unbind:"),function(self,_17f,_180){
with(self){
_rowClass=objj_msgSend(_CPRuleEditorRowObject,"class");
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"unbind:",_180);
}
}),new objj_method(sel_getUid("_setBoundDataSource:withKeyPath:options:"),function(self,_181,_182,_183,_184){
with(self){
if(objj_msgSend(observableController,"respondsToSelector:",sel_getUid("objectClass"))){
_rowClass=objj_msgSend(observableController,"objectClass");
}
_boundArrayKeyPath=_183;
_boundArrayOwner=_182;
objj_msgSend(_boundArrayOwner,"addObserver:forKeyPath:options:context:",self,_boundArrayKeyPath,CPKeyValueObservingOptionOld|CPKeyValueObservingOptionNew,_5);
}
}),new objj_method(sel_getUid("_setPredicate:"),function(self,_185,_186){
with(self){
if(_predicate!==_186){
_predicate=_186;
}
}
}),new objj_method(sel_getUid("_updatePredicate"),function(self,_187){
with(self){
if(_delegateWantsValidation){
var _188=sel_getUid("ruleEditor:predicatePartsForCriterion:withDisplayValue:inRow:");
if(!objj_msgSend(_ruleDelegate,"respondsToSelector:",_188)){
return;
}
_delegateWantsValidation=NO;
}
var _189=objj_msgSend(CPMutableArray,"array"),_18a=objj_msgSend(self,"subrowIndexesForRow:",-1),_18b=objj_msgSend(_18a,"firstIndex");
while(_18b!==CPNotFound){
var _18c=objj_msgSend(self,"predicateForRow:",_18b);
if(_18c!==nil){
objj_msgSend(_189,"addObject:",_18c);
}
_18b=objj_msgSend(_18a,"indexGreaterThanIndex:",_18b);
}
var _18d=objj_msgSend(objj_msgSend(CPCompoundPredicate,"alloc"),"initWithType:subpredicates:",CPOrPredicateType,_189);
objj_msgSend(self,"_setPredicate:",_18d);
}
}),new objj_method(sel_getUid("_newSlice"),function(self,_18e){
with(self){
var _18f=CGRectMake(0,0,CGRectGetWidth(objj_msgSend(self,"frame")),0),_190=objj_msgSend(self,"_createNewSliceWithFrame:ruleEditorView:",_18f,self);
return _190;
}
}),new objj_method(sel_getUid("_createNewSliceWithFrame:ruleEditorView:"),function(self,_191,_192,_193){
with(self){
return objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceRow,"alloc"),"initWithFrame:ruleEditorView:",_192,_193);
}
}),new objj_method(sel_getUid("_reconfigureSubviewsAnimate:"),function(self,_194,_195){
with(self){
var _196=objj_msgSend(CPMutableArray,"array"),_197=objj_msgSend(CPMutableArray,"array"),_198=objj_msgSend(_slices,"count");
objj_msgSend(self,"_updateSliceRows");
if(objj_msgSend(objj_msgSend(self,"superview"),"isKindOfClass:",objj_msgSend(CPClipView,"class"))){
objj_msgSend(self,"setFrameSize:",CGSizeMake(CGRectGetWidth(objj_msgSend(self,"frame")),_198*_sliceHeight));
}
for(var i=0;i<_198;i++){
var _199=objj_msgSend(_slices,"objectAtIndex:",i),_19a=objj_msgSend(_199,"_animationTargetRect"),_19b=objj_msgSend(_199,"frame"),_19c=objj_msgSend(_199,"rowIndex")-1;
if(objj_msgSend(_199,"superview")===nil){
_19b=CGRectMake(0,_19c*_sliceHeight,CGRectGetWidth(_19b),_sliceHeight);
objj_msgSend(_199,"_reconfigureSubviews");
objj_msgSend(_197,"addObject:",_199);
}
if(_195){
var _19d=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_19d,"setObject:forKey:",_199,CPViewAnimationTargetKey);
objj_msgSend(_19d,"setObject:forKey:",_19b,CPViewAnimationStartFrameKey);
objj_msgSend(_19d,"setObject:forKey:",_19a,CPViewAnimationEndFrameKey);
objj_msgSend(_196,"insertObject:atIndex:",_19d,0);
}else{
objj_msgSend(_199,"setFrame:",_19a);
}
}
var _19e=objj_msgSend(_197,"count");
for(var i=0;i<_19e;i++){
objj_msgSend(_slicesHolder,"addSubview:positioned:relativeTo:",_197[i],CPWindowBelow,nil);
}
if(_195){
objj_msgSend(_currentAnimation,"setViewAnimations:",_196);
objj_msgSend(_currentAnimation,"startAnimation");
}
_lastRow=objj_msgSend(self,"numberOfRows")-1;
if(_lastRow===-1){
_nestingModeDidChange=NO;
}
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSend(_slices,"makeObjectsPerformSelector:",sel_getUid("_updateButtonVisibilities"));
}
}),new objj_method(sel_getUid("animationDidEnd:"),function(self,_19f,_1a0){
with(self){
}
}),new objj_method(sel_getUid("_updateSliceRows"),function(self,_1a1){
with(self){
var _1a2=objj_msgSend(self,"frame").size.width,_1a3=objj_msgSend(_slices,"count");
for(var i=0;i<_1a3;i++){
var _1a4=objj_msgSend(_slices,"objectAtIndex:",i),_1a5=CGRectMake(0,i*_sliceHeight,_1a2,_sliceHeight);
objj_msgSend(_1a4,"setRowIndex:",i);
objj_msgSend(_1a4,"_setAnimationTargetRect:",_1a5);
}
}
}),new objj_method(sel_getUid("_backgroundColors"),function(self,_1a6){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","alternating-row-colors");
}
}),new objj_method(sel_getUid("_selectedRowColor"),function(self,_1a7){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","selected-color");
}
}),new objj_method(sel_getUid("_sliceTopBorderColor"),function(self,_1a8){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","slice-top-border-color");
}
}),new objj_method(sel_getUid("_sliceBottomBorderColor"),function(self,_1a9){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","slice-bottom-border-color");
}
}),new objj_method(sel_getUid("_sliceLastBottomBorderColor"),function(self,_1aa){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","slice-last-bottom-border-color");
}
}),new objj_method(sel_getUid("font"),function(self,_1ab){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","font");
}
}),new objj_method(sel_getUid("_addImage"),function(self,_1ac){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","add-image");
}
}),new objj_method(sel_getUid("_removeImage"),function(self,_1ad){
with(self){
return objj_msgSend(self,"valueForThemeAttribute:","remove-image");
}
}),new objj_method(sel_getUid("_toolTipForAddCompoundRowButton"),function(self,_1ae){
with(self){
return "Add Compound row";
}
}),new objj_method(sel_getUid("_toolTipForAddSimpleRowButton"),function(self,_1af){
with(self){
return "Add row";
}
}),new objj_method(sel_getUid("_toolTipForDeleteRowButton"),function(self,_1b0){
with(self){
return "Delete row";
}
}),new objj_method(sel_getUid("_updateSliceIndentations"),function(self,_1b1){
with(self){
objj_msgSend(self,"_updateSliceIndentationAtIndex:toIndentation:withIndexSet:",0,0,objj_msgSend(self,"subrowIndexesForRow:",0));
}
}),new objj_method(sel_getUid("_updateSliceIndentationAtIndex:toIndentation:withIndexSet:"),function(self,_1b2,_1b3,_1b4,_1b5){
with(self){
var _1b6=objj_msgSend(_1b5,"firstIndex");
while(_1b6!==CPNotFound){
var _1b7=objj_msgSend(self,"subrowIndexesForRow:",_1b3);
objj_msgSend(self,"_updateSliceIndentationAtIndex:toIndentation:withIndexSet:",_1b6,_1b4+1,_1b7);
_1b6=objj_msgSend(_1b5,"indexGreaterThanIndex:",_1b6);
}
objj_msgSend(objj_msgSend(_slices,"objectAtIndex:",_1b3),"setIndentation:",_1b4);
}
}),new objj_method(sel_getUid("_selectedSlices"),function(self,_1b8){
with(self){
var _1b9=objj_msgSend(CPMutableArray,"array"),_1ba=objj_msgSend(_slices,"count"),i;
for(i=0;i<_1ba;i++){
var _1bb=_slices[i];
if(objj_msgSend(_1bb,"_isSelected")){
objj_msgSend(_1b9,"addObject:",_1bb);
}
}
return _1b9;
}
}),new objj_method(sel_getUid("_lastSelectedSliceIndex"),function(self,_1bc){
with(self){
var _1bd=-1,_1be=objj_msgSend(_slices,"count"),i;
for(i=0;i<_1be;i++){
var _1bf=_slices[i];
if(objj_msgSend(_1bf,"_isLastSelected")){
return objj_msgSend(_1bf,"rowIndex");
}
}
return CPNotFound;
}
}),new objj_method(sel_getUid("_mouseUpOnSlice:withEvent:"),function(self,_1c0,_1c1,_1c2){
with(self){
if(objj_msgSend(_1c1,"_rowType")!==CPRuleEditorRowTypeSimple){
return;
}
var _1c3=objj_msgSend(_1c2,"modifierFlags"),_1c4=(_1c3&CPCommandKeyMask)||(_1c3&CPShiftKeyMask),_1c5=objj_msgSend(CPIndexSet,"indexSetWithIndex:",objj_msgSend(_1c1,"rowIndex"));
objj_msgSend(self,"selectRowIndexes:byExtendingSelection:",_1c5,_1c4);
}
}),new objj_method(sel_getUid("_mouseDownOnSlice:withEvent:"),function(self,_1c6,_1c7,_1c8){
with(self){
}
}),new objj_method(sel_getUid("_rightMouseDownOnSlice:withEvent:"),function(self,_1c9,_1ca,_1cb){
with(self){
}
}),new objj_method(sel_getUid("_performClickOnSlice:withEvent:"),function(self,_1cc,_1cd,_1ce){
with(self){
}
}),new objj_method(sel_getUid("_setSuppressKeyDownHandling:"),function(self,_1cf,flag){
with(self){
_suppressKeyDownHandling=flag;
}
}),new objj_method(sel_getUid("selectAll:"),function(self,_1d0,_1d1){
with(self){
var _1d2=objj_msgSend(_slices,"count");
while(_1d2--){
var _1d3=_slices[_1d2];
objj_msgSend(_1d3,"_setSelected:",YES);
objj_msgSend(_1d3,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("_deselectAll"),function(self,_1d4){
with(self){
var _1d5=objj_msgSend(_slices,"count");
while(_1d5--){
var _1d6=_slices[_1d5];
objj_msgSend(_1d6,"_setSelected:",NO);
objj_msgSend(_1d6,"_setLastSelected:",NO);
objj_msgSend(_1d6,"setNeedsDisplay:",YES);
}
}
}),new objj_method(sel_getUid("_queryNumberOfChildrenOfItem:withRowType:"),function(self,_1d7,item,type){
with(self){
return objj_msgSend(_ruleDelegate,"ruleEditor:numberOfChildrenForCriterion:withRowType:",self,item,type);
}
}),new objj_method(sel_getUid("_queryChild:ofItem:withRowType:"),function(self,_1d8,_1d9,item,type){
with(self){
return objj_msgSend(_ruleDelegate,"ruleEditor:child:forCriterion:withRowType:",self,_1d9,item,type);
}
}),new objj_method(sel_getUid("_queryValueForItem:inRow:"),function(self,_1da,item,row){
with(self){
return objj_msgSend(_ruleDelegate,"ruleEditor:displayValueForCriterion:inRow:",self,item,row);
}
}),new objj_method(sel_getUid("_lastRow"),function(self,_1db){
with(self){
return _lastRow;
}
}),new objj_method(sel_getUid("_countOfRowsStartingAtObject:"),function(self,_1dc,_1dd){
with(self){
var _1de=objj_msgSend(self,"_rowIndexForRowObject:",_1dd);
return (objj_msgSend(self,"numberOfRows")-_1de);
}
}),new objj_method(sel_getUid("_setAlignmentGridWidth:"),function(self,_1df,_1e0){
with(self){
_alignmentGridWidth=_1e0;
}
}),new objj_method(sel_getUid("_validateItem:value:inRow:"),function(self,_1e1,item,_1e2,row){
with(self){
return objj_msgSend(self,"_queryCanSelectItem:displayValue:inRow:",item,_1e2,row);
}
}),new objj_method(sel_getUid("_queryCanSelectItem:displayValue:inRow:"),function(self,_1e3,item,_1e4,row){
with(self){
return YES;
}
}),new objj_method(sel_getUid("_windowChangedKeyState"),function(self,_1e5){
with(self){
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("setNeedsDisplay:"),function(self,_1e6,flag){
with(self){
objj_msgSend(_slices,"makeObjectsPerformSelector:withObject:",sel_getUid("setNeedsDisplay:"),flag);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"setNeedsDisplay:",flag);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(self,_1e7,size){
with(self){
objj_msgSend(self,"setNeedsDisplay:",YES);
if(CGRectGetWidth(objj_msgSend(self,"frame"))!==size.width){
objj_msgSend(_slices,"makeObjectsPerformSelector:",sel_getUid("setNeedsLayout"));
}
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"setFrameSize:",size);
}
}),new objj_method(sel_getUid("_selectedSliceIndices"),function(self,_1e8){
with(self){
var _1e9=objj_msgSend(CPMutableIndexSet,"indexSet"),_1ea=objj_msgSend(_slices,"count"),i;
for(i=0;i<_1ea;i++){
var _1eb=_slices[i];
if(objj_msgSend(_1eb,"_isSelected")){
objj_msgSend(_1e9,"addIndex:",objj_msgSend(_1eb,"rowIndex"));
}
}
return _1e9;
}
}),new objj_method(sel_getUid("mouseDragged:"),function(self,_1ec,_1ed){
with(self){
if(!_editable){
return;
}
var _1ee=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_1ed,"locationInWindow"),nil),view=objj_msgSend(_slices,"objectAtIndex:",FLOOR(_1ee.y/_sliceHeight));
if(objj_msgSend(self,"_dragShouldBeginFromMouseDown:",view)){
objj_msgSend(self,"_performDragForSlice:withEvent:",view,_1ed);
}
}
}),new objj_method(sel_getUid("_dragShouldBeginFromMouseDown:"),function(self,_1ef,view){
with(self){
return ((objj_msgSend(self,"nestingMode")===CPRuleEditorNestingModeList||objj_msgSend(view,"rowIndex")!==0)&&_editable&&objj_msgSend(view,"isKindOfClass:",objj_msgSend(_CPRuleEditorViewSliceRow,"class"))&&_draggingRows===nil);
}
}),new objj_method(sel_getUid("_performDragForSlice:withEvent:"),function(self,_1f0,_1f1,_1f2){
with(self){
var _1f3,_1f4=objj_msgSend(_1f1,"rowIndex"),_1f5=objj_msgSend(CPIndexSet,"indexSetWithIndex:",_1f4),_1f6=objj_msgSend(self,"_selectedSliceIndices"),_1f7=objj_msgSend(CPPasteboard,"pasteboardWithName:",CPDragPboard);
objj_msgSend(_1f7,"declareTypes:owner:",objj_msgSend(CPArray,"arrayWithObjects:",_1,nil),self);
if(objj_msgSend(_1f6,"containsIndex:",_1f4)){
objj_msgSend(_1f5,"addIndexes:",_1f6);
}
_draggingRows=objj_msgSend(self,"_includeSubslicesForSlicesAtIndexes:",_1f5);
var _1f8=objj_msgSend(_draggingRows,"firstIndex"),_1f9=objj_msgSend(_slices,"objectAtIndex:",_1f8),_1fa=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",objj_msgSend(_1f9,"frame"));
var html=_1f9._DOMElement.innerHTML;
_1fa._DOMElement.innerHTML=objj_msgSend(html,"copy");
objj_msgSend(_1fa,"setBackgroundColor:",objj_msgSend(_1f9,"backgroundColor"));
objj_msgSend(_1fa,"setAlphaValue:",0.7);
_1f3=CPMakePoint(0,_1f8*_sliceHeight);
objj_msgSend(self,"dragView:at:offset:event:pasteboard:source:slideBack:",_1fa,_1f3,CGSizeMake(0,_sliceHeight),_1f2,_1f7,self,YES);
return YES;
}
}),new objj_method(sel_getUid("draggingEntered:"),function(self,_1fb,_1fc){
with(self){
if(objj_msgSend(_1fc,"draggingSource")===self){
objj_msgSend(self,"_clearDropLine");
return CPDragOperationMove;
}
return CPDragOperationNone;
}
}),new objj_method(sel_getUid("draggingExited:"),function(self,_1fd,_1fe){
with(self){
objj_msgSend(self,"_clearDropLine");
objj_msgSend(self,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("_clearDropLine"),function(self,_1ff){
with(self){
objj_msgSend(_dropLineView,"setAlphaValue:",0);
if(_subviewIndexOfDropLine!==CPNotFound&&_subviewIndexOfDropLine<_lastRow){
var _200=objj_msgSend(_slices,"objectAtIndex:",_subviewIndexOfDropLine);
objj_msgSend(_200,"setFrameOrigin:",CGPointMake(0,objj_msgSend(_200,"rowIndex")*_sliceHeight));
}
_subviewIndexOfDropLine=CPNotFound;
}
}),new objj_method(sel_getUid("draggingUpdated:"),function(self,_201,_202){
with(self){
var _203=objj_msgSend(self,"convertPoint:fromView:",objj_msgSend(_202,"draggingLocation"),nil),y=_203.y+_sliceHeight/2,_204=FLOOR(y/_sliceHeight),_205=objj_msgSend(self,"numberOfRows");
if(_204<0||_204>_205||(_204>=objj_msgSend(_draggingRows,"firstIndex")&&_204<=objj_msgSend(_draggingRows,"lastIndex")+1)){
if(_subviewIndexOfDropLine!==CPNotFound&&_204!==_subviewIndexOfDropLine){
objj_msgSend(self,"_clearDropLine");
}
return CPDragOperationNone;
}
if(_subviewIndexOfDropLine!==_204){
if(_subviewIndexOfDropLine!==CPNotFound&&_subviewIndexOfDropLine<_205){
var _206=objj_msgSend(_slices,"objectAtIndex:",_subviewIndexOfDropLine);
objj_msgSend(_206,"setFrameOrigin:",CPMakePoint(0,objj_msgSend(_206,"rowIndex")*_sliceHeight));
}
if(_204<=_lastRow&&_204<_205){
var _207=objj_msgSend(_slices,"objectAtIndex:",_204);
objj_msgSend(_207,"setFrameOrigin:",CGPointMake(0,objj_msgSend(_207,"rowIndex")*_sliceHeight+2));
}
objj_msgSend(_dropLineView,"setAlphaValue:",1);
objj_msgSend(_dropLineView,"setFrameOrigin:",CGPointMake(CGRectGetMinX(objj_msgSend(_dropLineView,"frame")),_204*_sliceHeight));
_subviewIndexOfDropLine=_204;
}
return CPDragOperationMove;
}
}),new objj_method(sel_getUid("prepareForDragOperation:"),function(self,_208,_209){
with(self){
return (_subviewIndexOfDropLine!==CPNotFound);
}
}),new objj_method(sel_getUid("performDragOperation:"),function(self,_20a,info){
with(self){
var _20b=0,_20c,_20d;
var _20e=objj_msgSend(_rowCache,"valueForKey:","rowObject"),_20f=objj_msgSend(_draggingRows,"lastIndex");
var _210=objj_msgSend(self,"parentRowForRow:",_20f),_211=(_210===-1)?_boundArrayOwner:objj_msgSend(objj_msgSend(self,"_rowCacheForIndex:",_210),"rowObject"),_212=_subviewIndexOfDropLine;
while(_20f!==CPNotFound){
if(_20f>=_212){
_20d=_20f+_20b;
_20b+=1;
}else{
_20d=_20f;
_212-=1;
}
_20c=objj_msgSend(_20e,"objectAtIndex:",_20d);
objj_msgSend(self,"removeRowAtIndex:",_20d);
objj_msgSend(objj_msgSend(self,"_subrowObjectsOfObject:",_211),"insertObject:atIndex:",_20c,_212-_210-1);
_20f=objj_msgSend(_draggingRows,"indexLessThanIndex:",_20f);
}
objj_msgSend(self,"_clearDropLine");
_draggingRows=nil;
return YES;
}
}),new objj_method(sel_getUid("_draggingTypes"),function(self,_213){
with(self){
return objj_msgSend(CPIndexSet,"indexSetWithIndex:",CPDragOperationMove);
}
}),new objj_method(sel_getUid("draggedView:endedAt:operation:"),function(self,_214,_215,_216,_217){
with(self){
_draggingRows=nil;
objj_msgSend(self,"_updatePredicate");
objj_msgSend(self,"_sendRuleAction");
objj_msgSend(self,"_postRuleOptionChangedNotification");
objj_msgSend(self,"_postRowCountChangedNotificationOfType:indexes:",CPRuleEditorRowsDidChangeNotification,nil);
}
}),new objj_method(sel_getUid("wantsPeriodicDraggingUpdates"),function(self,_218){
with(self){
return NO;
}
}),new objj_method(sel_getUid("pasteboard:provideDataForType:"),function(self,_219,_21a,type){
with(self){
}
}),new objj_method(sel_getUid("_setWindow:"),function(self,_21b,_21c){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"_setWindow:",_21c);
}
}),new objj_method(sel_getUid("_windowUpdate:"),function(self,_21d,_21e){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"_windowUpdate:",_21e);
}
}),new objj_method(sel_getUid("_postRuleOptionChangedNotification"),function(self,_21f){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPRuleEditorRulesDidChangeNotification,self);
}
}),new objj_method(sel_getUid("_postRowCountChangedNotificationOfType:indexes:"),function(self,_220,_221,_222){
with(self){
var _223=objj_msgSend(CPDictionary,"dictionaryWithObject:forKey:",_222,"indexes");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:userInfo:",_221,self,_223);
}
}),new objj_method(sel_getUid("_globalIndexesForSubrowIndexes:ofParentObject:"),function(self,_224,_225,_226){
with(self){
var _227=objj_msgSend(self,"_subrowObjectsOfObject:",_226),_228=objj_msgSend(self,"_rowIndexForRowObject:",_226),_229=objj_msgSend(CPMutableIndexSet,"indexSet"),_22a=objj_msgSend(_225,"firstIndex"),_22b=0;
while(_22a!==CPNotFound){
var _22c=_22a+_228+1+_22b;
objj_msgSend(_229,"addIndex:",_22c);
if(objj_msgSend(self,"rowTypeForRow:",_22c)===CPRuleEditorRowTypeCompound){
var _22d=objj_msgSend(objj_msgSend(self,"_rowCacheForIndex:",_22a),"rowObject"),_22e=objj_msgSend(self,"_subrowObjectsOfObject:",_22d),_22f=objj_msgSend(self,"_globalIndexesForSubrowIndexes:ofParentObject:",objj_msgSend(CPIndexSet,"indexSetWithIndexesInRange:",CPMakeRange(0,objj_msgSend(_22e,"count"))),_22d);
_22b=objj_msgSend(_22f,"count");
}
_22a=objj_msgSend(_225,"indexGreaterThanIndex:",_22a);
}
return _229;
}
}),new objj_method(sel_getUid("_sendRuleAction"),function(self,_230){
with(self){
var _231=objj_msgSend(self,"action"),_232=objj_msgSend(self,"target");
objj_msgSend(self,"sendAction:to:",_231,_232);
}
}),new objj_method(sel_getUid("_sendsActionOnIncompleteTextChange"),function(self,_233){
with(self){
return YES;
}
}),new objj_method(sel_getUid("_getAllAvailableItems:values:asChildrenOfItem:inRow:"),function(self,_234,_235,_236,_237,aRow){
with(self){
var type,_238,_239;
var _23a=objj_msgSend(CPMutableArray,"array"),_23b=objj_msgSend(CPMutableArray,"array");
var _23c=nil,_23d=nil;
_lastRow=aRow;
type=objj_msgSend(self,"rowTypeForRow:",aRow);
_239=objj_msgSend(self,"_queryNumberOfChildrenOfItem:withRowType:",_237,type);
var _23e=objj_msgSend(self,"criteriaForRow:",aRow);
_238=objj_msgSend(_23e,"indexOfObject:",_23c);
if(_237!==nil&&_238!==CPNotFound&&_238<objj_msgSend(_23e,"count")-1){
var next=_238+1;
_23c=objj_msgSend(_23e,"objectAtIndex:",next);
var _236=objj_msgSend(self,"displayValuesForRow:",aRow);
_23d=objj_msgSend(_236,"objectAtIndex:",next);
}
for(var i=0;i<_239;++i){
var _23f=objj_msgSend(self,"_queryChild:ofItem:withRowType:",i,_237,type),_240=_23f,_241=_23d;
if(_23c!==_23f){
_241=objj_msgSend(self,"_queryValueForItem:inRow:",_23f,aRow);
}
if(!_241){
_241=objj_msgSend(self,"_queryValueForItem:inRow:",_240,aRow);
}
objj_msgSend(_23a,"addObject:",_240);
objj_msgSend(_23b,"addObject:",_241);
}
objj_msgSend(_235,"addObjectsFromArray:",_23a);
objj_msgSend(_236,"addObjectsFromArray:",_23b);
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("defaultThemeClass"),function(self,_242){
with(self){
return "rule-editor";
}
}),new objj_method(sel_getUid("themeAttributes"),function(self,_243){
with(self){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null"),objj_msgSend(CPNull,"null")],["alternating-row-colors","selected-color","slice-top-border-color","slice-bottom-border-color","slice-last-bottom-border-color","font","add-image","remove-image"]);
}
})]);
var _244="CPRuleEditorAlignmentGridWidth",_245="CPRuleEditorSliceHeight",_246="CPRuleEditorStringsFilename",_247="CPRuleEditorEditable",_248="CPRuleEditorAllowsEmptyCompoundRows",_249="CPRuleEditorDisallowEmpty",_24a="CPRuleEditorNestingMode",_24b="CPRuleEditorRowTypeKeyPath",_24c="CPRuleEditorItemsKeyPath",_24d="CPRuleEditorValuesKeyPath",_24e="CPRuleEditorSubrowsArrayKeyPath",_24f="CPRuleEditorBoundArrayKeyPath",_250="CPRuleEditorRowClass",_251="CPRuleEditorSlicesHolder",_252="CPRuleEditorSlices",_253="CPRuleEditorDelegate",_254="CPRuleEditorBoundArrayOwner";
var _6=objj_getClass("CPRuleEditor");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPRuleEditor\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("initWithCoder:"),function(self,_255,_256){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"initWithCoder:",_256);
if(self!==nil){
objj_msgSend(self,"setFormattingStringsFilename:",objj_msgSend(_256,"decodeObjectForKey:",_246));
_alignmentGridWidth=objj_msgSend(_256,"decodeFloatForKey:",_244);
_sliceHeight=objj_msgSend(_256,"decodeDoubleForKey:",_245);
_editable=objj_msgSend(_256,"decodeBoolForKey:",_247);
_allowsEmptyCompoundRows=objj_msgSend(_256,"decodeBoolForKey:",_248);
_disallowEmpty=objj_msgSend(_256,"decodeBoolForKey:",_249);
_nestingMode=objj_msgSend(_256,"decodeIntForKey:",_24a);
_typeKeyPath=objj_msgSend(_256,"decodeObjectForKey:",_24b);
_itemsKeyPath=objj_msgSend(_256,"decodeObjectForKey:",_24c);
_valuesKeyPath=objj_msgSend(_256,"decodeObjectForKey:",_24d);
_subrowsArrayKeyPath=objj_msgSend(_256,"decodeObjectForKey:",_24e);
_boundArrayKeyPath=objj_msgSend(_256,"decodeObjectForKey:",_24f);
_slicesHolder=objj_msgSend(objj_msgSend(self,"subviews"),"objectAtIndex:",0);
_boundArrayOwner=objj_msgSend(_256,"decodeObjectForKey:",_254);
_slices=objj_msgSend(_256,"decodeObjectForKey:",_252);
_ruleDelegate=objj_msgSend(_256,"decodeObjectForKey:",_253);
objj_msgSend(self,"_initRuleEditorShared");
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_257,_258){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPRuleEditor").super_class},"encodeWithCoder:",_258);
objj_msgSend(_258,"encodeBool:forKey:",_editable,_247);
objj_msgSend(_258,"encodeBool:forKey:",_allowsEmptyCompoundRows,_248);
objj_msgSend(_258,"encodeBool:forKey:",_disallowEmpty,_249);
objj_msgSend(_258,"encodeFloat:forKey:",_alignmentGridWidth,_244);
objj_msgSend(_258,"encodeDouble:forKey:",_sliceHeight,_245);
objj_msgSend(_258,"encodeInt:forKey:",_nestingMode,_24a);
objj_msgSend(_258,"encodeObject:forKey:",_stringsFilename,_246);
objj_msgSend(_258,"encodeObject:forKey:",_typeKeyPath,_24b);
objj_msgSend(_258,"encodeObject:forKey:",_itemsKeyPath,_24c);
objj_msgSend(_258,"encodeObject:forKey:",_valuesKeyPath,_24d);
objj_msgSend(_258,"encodeObject:forKey:",_boundArrayKeyPath,_24f);
objj_msgSend(_258,"encodeObject:forKey:",_subrowsArrayKeyPath,_24e);
objj_msgSend(_258,"encodeConditionalObject:forKey:",_slicesHolder,_251);
objj_msgSend(_258,"encodeObject:forKey:",_slices,_252);
objj_msgSend(_258,"encodeObject:forKey:",_boundArrayOwner,_254);
}
})]);
var _259="criteria",_25a="subrows",_25b="displayValues",_25c="rowType";
var _6=objj_allocateClassPair(CPObject,"_CPRuleEditorRowObject"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("subrows"),new objj_ivar("criteria"),new objj_ivar("displayValues"),new objj_ivar("rowType")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("subrows"),function(self,_25d){
with(self){
return subrows;
}
}),new objj_method(sel_getUid("setSubrows:"),function(self,_25e,_25f){
with(self){
subrows=_25f;
}
}),new objj_method(sel_getUid("criteria"),function(self,_260){
with(self){
return criteria;
}
}),new objj_method(sel_getUid("setCriteria:"),function(self,_261,_262){
with(self){
criteria=_262;
}
}),new objj_method(sel_getUid("displayValues"),function(self,_263){
with(self){
return displayValues;
}
}),new objj_method(sel_getUid("setDisplayValues:"),function(self,_264,_265){
with(self){
displayValues=_265;
}
}),new objj_method(sel_getUid("rowType"),function(self,_266){
with(self){
return rowType;
}
}),new objj_method(sel_getUid("setRowType:"),function(self,_267,_268){
with(self){
rowType=_268;
}
}),new objj_method(sel_getUid("copy"),function(self,_269){
with(self){
var copy=objj_msgSend(objj_msgSend(_CPRuleEditorRowObject,"alloc"),"init");
objj_msgSend(copy,"setSubrows:",objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithArray:copyItems:",subrows,YES));
objj_msgSend(copy,"setCriteria:",objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithArray:copyItems:",criteria,YES));
objj_msgSend(copy,"setDisplayValues:",objj_msgSend(objj_msgSend(CPArray,"alloc"),"initWithArray:copyItems:",displayValues,YES));
objj_msgSend(copy,"setRowType:",rowType);
return copy;
}
}),new objj_method(sel_getUid("description"),function(self,_26a){
with(self){
return "<"+objj_msgSend(self,"className")+">\nsubrows = "+objj_msgSend(subrows,"description")+"\ncriteria = "+objj_msgSend(criteria,"description")+"\ndisplayValues = "+objj_msgSend(displayValues,"description");
}
}),new objj_method(sel_getUid("initWithCoder:"),function(self,_26b,_26c){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPRuleEditorRowObject").super_class},"init");
if(self!==nil){
subrows=objj_msgSend(_26c,"decodeObjectForKey:",_25a);
criteria=objj_msgSend(_26c,"decodeObjectForKey:",_259);
displayValues=objj_msgSend(_26c,"decodeObjectForKey:",_25b);
rowType=objj_msgSend(_26c,"decodeIntForKey:",_25c);
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_26d,_26e){
with(self){
objj_msgSend(_26e,"encodeObject:forKey:",subrows,_25a);
objj_msgSend(_26e,"encodeObject:forKey:",criteria,_259);
objj_msgSend(_26e,"encodeObject:forKey:",displayValues,_25b);
objj_msgSend(_26e,"encodeInt:forKey:",rowType,_25c);
}
})]);
var _6=objj_allocateClassPair(CPObject,"_CPRuleEditorCache"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("rowObject"),new objj_ivar("rowIndex"),new objj_ivar("indentation")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("rowObject"),function(self,_26f){
with(self){
return rowObject;
}
}),new objj_method(sel_getUid("setRowObject:"),function(self,_270,_271){
with(self){
rowObject=_271;
}
}),new objj_method(sel_getUid("rowIndex"),function(self,_272){
with(self){
return rowIndex;
}
}),new objj_method(sel_getUid("setRowIndex:"),function(self,_273,_274){
with(self){
rowIndex=_274;
}
}),new objj_method(sel_getUid("indentation"),function(self,_275){
with(self){
return indentation;
}
}),new objj_method(sel_getUid("setIndentation:"),function(self,_276,_277){
with(self){
indentation=_277;
}
}),new objj_method(sel_getUid("description"),function(self,_278){
with(self){
return objj_msgSend(CPString,"stringWithFormat:","<%d object:%d rowIndex:%d indentation:%d>",objj_msgSend(self,"hash"),objj_msgSend(rowObject,"hash"),rowIndex,indentation);
}
})]);
var _279="CPBoundArray";
var _6=objj_allocateClassPair(CPObject,"_CPRuleEditorViewUnboundRowHolder"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("boundArray")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("init"),function(self,_27a){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPRuleEditorViewUnboundRowHolder").super_class},"init")){
boundArray=objj_msgSend(objj_msgSend(CPArray,"alloc"),"init");
}
return self;
}
}),new objj_method(sel_getUid("initWithCoder:"),function(self,_27b,_27c){
with(self){
if(self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPRuleEditorViewUnboundRowHolder").super_class},"init")){
boundArray=objj_msgSend(_27c,"decodeObjectForKey:",_279);
}
return self;
}
}),new objj_method(sel_getUid("encodeWithCoder:"),function(self,_27d,_27e){
with(self){
objj_msgSend(_27e,"encodeObject:forKey:",boundArray,_279);
}
})]);
var _6=objj_allocateClassPair(CPView,"_CPRuleEditorViewSliceHolder"),_7=_6.isa;
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("addSubview:"),function(self,_27f,_280){
with(self){
objj_msgSend(self,"setNeedsDisplay:",YES);
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPRuleEditorViewSliceHolder").super_class},"addSubview:",_280);
}
})]);
var _281=objj_msgSend(CPColor,"colorWithHexString:","4886ca");
var _6=objj_allocateClassPair(CPView,"_CPRuleEditorViewSliceDropSeparator"),_7=_6.isa;
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("drawRect:"),function(self,_282,rect){
with(self){
var _283=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort");
CGContextSetFillColor(_283,_281);
CGContextFillRect(_283,objj_msgSend(self,"bounds"));
}
})]);
var _6=objj_getClass("CPObject");
if(!_6){
throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
}
var _7=_6.isa;
class_addMethods(_6,[new objj_method(sel_getUid("valueType"),function(self,_284){
with(self){
var _285=0,_286=objj_msgSend(self,"isKindOfClass:",CPString);
if(!_286){
var _287=objj_msgSend(self,"isKindOfClass:",CPView);
_285=1;
if(!_287){
var _288=objj_msgSend(self,"isKindOfClass:",CPMenuItem);
_285=2;
if(!_288){
objj_msgSend(CPException,"raise:reason:",CPGenericException,"Unknown type for "+self);
_285=-1;
}
}
}
return _285;
}
})]);
p;23;_CPAttachedWindowView.jt;7652;@STATIC;1.0;i;15;_CPWindowView.jt;7613;
objj_executeFile("_CPWindowView.j",YES);
var _1=CGSizeMake(16,10),_2=5,_3=1,_4=CGSizeMake(0,6),_5=15;
var _6=objj_allocateClassPair(_CPWindowView,"_CPAttachedWindowView"),_7=_6.isa;
class_addIvars(_6,[new objj_ivar("_arrowOffsetX"),new objj_ivar("_arrowOffsetY"),new objj_ivar("_appearance"),new objj_ivar("_preferredEdge"),new objj_ivar("_cursorSize")]);
objj_registerClassPair(_6);
class_addMethods(_6,[new objj_method(sel_getUid("arrowOffsetX"),function(_8,_9){
with(_8){
return _arrowOffsetX;
}
}),new objj_method(sel_getUid("setArrowOffsetX:"),function(_a,_b,_c){
with(_a){
_arrowOffsetX=_c;
}
}),new objj_method(sel_getUid("arrowOffsetY"),function(_d,_e){
with(_d){
return _arrowOffsetY;
}
}),new objj_method(sel_getUid("setArrowOffsetY:"),function(_f,_10,_11){
with(_f){
_arrowOffsetY=_11;
}
}),new objj_method(sel_getUid("appearance"),function(_12,_13){
with(_12){
return _appearance;
}
}),new objj_method(sel_getUid("setAppearance:"),function(_14,_15,_16){
with(_14){
_appearance=_16;
}
}),new objj_method(sel_getUid("preferredEdge"),function(_17,_18){
with(_17){
return _preferredEdge;
}
}),new objj_method(sel_getUid("setPreferredEdge:"),function(_19,_1a,_1b){
with(_19){
_preferredEdge=_1b;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_1c,_1d,_1e){
with(_1c){
var _1f=CGRectMakeCopy(_1e);
_1f.origin.x+=18;
_1f.origin.y+=17;
_1f.size.width-=35;
_1f.size.height-=37;
return _1f;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_20,_21,_22,_23){
with(_20){
if(_20=objj_msgSendSuper({receiver:_20,super_class:objj_getClass("_CPAttachedWindowView").super_class},"initWithFrame:styleMask:",_22,_23)){
_arrowOffsetX=0;
_arrowOffsetY=0;
_appearance=CPPopoverAppearanceMinimal;
_cursorSize=CGSizeMakeCopy(_1);
}
return _20;
}
}),new objj_method(sel_getUid("hideCursor"),function(_24,_25){
with(_24){
_cursorSize=CGSizeMakeZero();
objj_msgSend(_24,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("showCursor"),function(_26,_27){
with(_26){
_cursorSize=CGSizeMakeCopy(_1);
objj_msgSend(_26,"setNeedsDisplay:",YES);
}
}),new objj_method(sel_getUid("drawRect:"),function(_28,_29,_2a){
with(_28){
objj_msgSendSuper({receiver:_28,super_class:objj_getClass("_CPAttachedWindowView").super_class},"drawRect:",_2a);
var _2b=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_2c=_2,_2d=_cursorSize.width,_2e=_cursorSize.height,_2f=_3,_30=_2f/2,_31,_32=objj_msgSend(objj_msgSend(CPColor,"blackColor"),"colorWithAlphaComponent:",0.2),_33=_4,_34=_5,_35,_36=objj_msgSend(_28,"bounds");
if(_appearance==CPPopoverAppearanceMinimal){
_35=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[(254/255),(254/255),(254/255),0.93,(231/255),(231/255),(231/255),0.93],[0,1],2);
_31=objj_msgSend(CPColor,"colorWithHexString:","B8B8B8");
}else{
_35=CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(),[(38/255),(38/255),(38/255),0.93,(18/255),(18/255),(18/255),0.93],[0,1],2);
_31=objj_msgSend(CPColor,"colorWithHexString:","222222");
}
_36.origin.x+=_30+_34;
_36.origin.y+=_30+(_34+_33.height/2);
_36.size.width-=_2f+(_34*2);
_36.size.height-=_2f+(_34*2+_33.height);
CGContextSetStrokeColor(_2b,_31);
CGContextSetLineWidth(_2b,_2f);
CGContextBeginPath(_2b);
CGContextSetShadowWithColor(_2b,_33,_34,_32);
CGContextDrawLinearGradient(_2b,_35,CGPointMake(CGRectGetMidX(_36),0),CGPointMake(CGRectGetMidX(_36),_36.size.height),0);
var _37=(_36.origin.x),_38=(_36.origin.x+_36.size.width),_39=(_36.origin.y),_3a=(_36.origin.y+_36.size.height),_3b=(FLOOR(_37+_2c+_2f)),_3c=(FLOOR(_38-_2c-_2f)),_3d=(FLOOR(_39+_2c+_2f)),_3e=(FLOOR(_3a-_2c+_2f)),_3f=CGPointMakeZero(),_40=CGPointMakeZero(),pt=CGPointMakeZero();
switch(_preferredEdge){
case CPMinXEdge:
case CPMaxXEdge:
pt.x=(FLOOR(_37+_2c));
pt.y=_39;
CGContextMoveToPoint(_2b,pt.x,pt.y);
pt.x=(FLOOR(_38-_2c));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,_38,_39,_38,(FLOOR(_39+_2c)));
if(_preferredEdge===CPMinXEdge){
_3f.x=(FLOOR(_38)===(_38)?(_38)+_30:(_38));
_3f.y=(FLOOR((_36.size.height/2)+_39+_arrowOffsetY));
pt.y=(FLOOR(_3f.y-(_2d/2)));
if(pt.y<=_3d){
pt.y=_3d;
}else{
if((pt.y+_2d)>_3e){
pt.y=_3e-_2d;
}
}
pt.x=_3f.x;
_40=CGPointMakeCopy(pt);
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=(FLOOR(_3f.x+_2e)===(_3f.x+_2e)?(_3f.x+_2e)+_30:(_3f.x+_2e));
pt.y=_3f.y;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=_3f.x;
pt.y=(FLOOR(_40.y+_2d));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
}
pt.x=_38;
pt.y=(FLOOR(_3a-_2c));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,pt.x,_3a,(FLOOR(_38-_2c)),_3a);
pt.x=(FLOOR(_37+_2c));
pt.y=_3a;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,_37,pt.y,_37,(FLOOR(_3a-_2c)));
if(_preferredEdge===CPMaxXEdge){
_3f.x=(FLOOR(_37)===(_37)?(_37)+_30:(_37));
_3f.y=(FLOOR((_36.size.height/2)+_39+_arrowOffsetY));
pt.y=(FLOOR(_3f.y+(_2d/2)));
if((pt.y-_2d)<_3d){
pt.y=_3d+_2d;
}else{
if(pt.y>_3e){
pt.y=_3e;
}
}
pt.x=_3f.x;
_40=CGPointMakeCopy(pt);
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=(FLOOR(_3f.x-_2e)===(_3f.x-_2e)?(_3f.x-_2e)+_30:(_3f.x-_2e));
pt.y=_3f.y;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=_3f.x;
pt.y=(FLOOR(_40.y-_2d));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
}
pt.x=_37;
pt.y=(FLOOR(_39+_2c));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,pt.x,_39,(FLOOR(_37+_2c)),_39);
break;
case CPMaxYEdge:
case CPMinYEdge:
pt.x=_37;
pt.y=(FLOOR(_3a-_2c));
CGContextMoveToPoint(_2b,pt.x,pt.y);
pt.y=(FLOOR(_39+_2c));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,pt.x,_39,(FLOOR(_37+_2c)),_39);
if(_preferredEdge===CPMaxYEdge){
_3f.x=(FLOOR((_36.size.width/2)+_37+_arrowOffsetX));
_3f.y=(FLOOR(_39+_arrowOffsetY)===(_39+_arrowOffsetY)?(_39+_arrowOffsetY)+_30:(_39+_arrowOffsetY));
pt.x=(FLOOR(_3f.x-(_2d/2)));
if(pt.x<_3b){
pt.x=_3b;
}else{
if((pt.x+_2d)>_3c){
pt.x=_3c-_2d;
}
}
pt.y=_3f.y;
_40=CGPointMakeCopy(pt);
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=_3f.x;
pt.y=(FLOOR(_3f.y-_2e)===(_3f.y-_2e)?(_3f.y-_2e)+_30:(_3f.y-_2e));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=(FLOOR(_40.x+_2d));
pt.y=_3f.y;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
}
pt.x=(FLOOR(_38-_2c));
pt.y=_39;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,_38,pt.y,_38,(FLOOR(_39+_2c)));
pt.x=_38;
pt.y=(FLOOR(_3a-_2c));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,pt.x,_3a,(FLOOR(_38-_2c)),_3a);
if(_preferredEdge===CPMinYEdge){
_3f.x=(FLOOR((_36.size.width/2)+_37+_arrowOffsetX));
_3f.y=(FLOOR(_3a+_arrowOffsetY)===(_3a+_arrowOffsetY)?(_3a+_arrowOffsetY)+_30:(_3a+_arrowOffsetY));
pt.x=(FLOOR(_3f.x+(_2d/2)));
if((pt.x-_2d)<_3b){
pt.x=_3b+_2d;
}else{
if(pt.x>_3c){
pt.x=_3c;
}
}
pt.y=_3f.y;
_40=CGPointMakeCopy(pt);
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=_3f.x;
pt.y=(FLOOR(_3f.y+_2e)===(_3f.y+_2e)?(_3f.y+_2e)+_30:(_3f.y+_2e));
CGContextAddLineToPoint(_2b,pt.x,pt.y);
pt.x=(FLOOR(_40.x-_2d));
pt.y=_3f.y;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
}
pt.x=(FLOOR(_37+_2c));
pt.y=_3a;
CGContextAddLineToPoint(_2b,pt.x,pt.y);
CGContextAddCurveToPoint(_2b,pt.x,pt.y,_37,pt.y,_37,(FLOOR(_3a-_2c)));
break;
default:
CGContextAddPath(_2b,CGPathWithRoundedRectangleInRect(_36,_2c,_2c,YES,YES,YES,YES));
}
CGContextClosePath(_2b);
CGContextStrokePath(_2b);
CGContextFillPath(_2b);
}
})]);
class_addMethods(_7,[new objj_method(sel_getUid("frameRectForContentRect:"),function(_41,_42,_43){
with(_41){
var _44=CGRectMakeCopy(_43);
_44.origin.x-=18;
_44.origin.y-=17;
_44.size.width+=35;
_44.size.height+=37;
return _44;
}
})]);
p;31;_CPBorderlessBridgeWindowView.jt;2043;@STATIC;1.0;i;15;_CPWindowView.jt;2004;
objj_executeFile("_CPWindowView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(_CPWindowView,"_CPBorderlessBridgeWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_toolbarBackgroundView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_4,_5,_6){
with(_4){
}
}),new objj_method(sel_getUid("tile"),function(_7,_8){
with(_7){
objj_msgSendSuper({receiver:_7,super_class:objj_getClass("_CPBorderlessBridgeWindowView").super_class},"tile");
var _9=objj_msgSend(_7,"window"),_a=objj_msgSend(_7,"bounds");
objj_msgSend(objj_msgSend(_9,"contentView"),"setFrame:",CGRectMake(0,objj_msgSend(_7,"toolbarMaxY"),CGRectGetWidth(_a),CGRectGetHeight(_a)-objj_msgSend(_7,"toolbarMaxY")));
if(!objj_msgSend(objj_msgSend(_9,"toolbar"),"isVisible")){
objj_msgSend(_toolbarBackgroundView,"removeFromSuperview");
_toolbarBackgroundView=nil;
return;
}
if(!_toolbarBackgroundView){
_toolbarBackgroundView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_toolbarBackgroundView,"setBackgroundColor:",objj_msgSend(objj_msgSend(_7,"class"),"toolbarBackgroundColor"));
objj_msgSend(_toolbarBackgroundView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_7,"addSubview:positioned:relativeTo:",_toolbarBackgroundView,CPWindowBelow,nil);
}
var _b=CGRectMakeZero(),_c=objj_msgSend(_7,"toolbarOffset");
_b.origin=CGPointMake(_c.width,_c.height);
_b.size=objj_msgSend(_toolbarView,"frame").size;
objj_msgSend(_toolbarBackgroundView,"setFrame:",_b);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("toolbarBackgroundColor"),function(_d,_e){
with(_d){
if(!_1){
var _f=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPBorderlessBridgeWindowView,"class"));
_1=CPColorWithImages([["_CPToolbarView/toolbar-background-top.png",1,1,_f],["_CPToolbarView/toolbar-background-center.png",1,57,_f],["_CPToolbarView/toolbar-background-bottom.png",1,1,_f],],CPColorPatternIsVertical);
}
return _1;
}
})]);
p;25;_CPBorderlessWindowView.jt;190;@STATIC;1.0;i;15;_CPWindowView.jt;152;
objj_executeFile("_CPWindowView.j",YES);
var _1=objj_allocateClassPair(_CPWindowView,"_CPBorderlessWindowView"),_2=_1.isa;
objj_registerClassPair(_1);
p;23;_CPDocModalWindowView.jt;1973;@STATIC;1.0;i;15;_CPWindowView.jt;1934;
objj_executeFile("_CPWindowView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(_CPWindowView,"_CPDocModalWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_bodyView"),new objj_ivar("_shadowView")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_4,_5,_6,_7){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("_CPDocModalWindowView").super_class},"initWithFrame:styleMask:",_6,_7);
if(_4){
var _8=objj_msgSend(_4,"class"),_9=objj_msgSend(_4,"bounds");
_bodyView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",{origin:{x:0,y:0},size:{width:(_9.size.width),height:(_9.size.height)}});
objj_msgSend(_bodyView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_bodyView,"setBackgroundColor:",objj_msgSend(_8,"bodyBackgroundColor"));
objj_msgSend(_bodyView,"setHitTests:",NO);
objj_msgSend(_4,"addSubview:",_bodyView);
var _a=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_shadowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,(_9.size.width),8));
objj_msgSend(_shadowView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_shadowView,"setBackgroundColor:",objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_a,"pathForResource:","CPWindow/CPWindowAttachedSheetShadow.png"),CGSizeMake(9,8))));
objj_msgSend(_4,"addSubview:",_shadowView);
}
return _4;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_b,_c,_d){
with(_b){
return _d;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_e,_f,_10){
with(_e){
return _10;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("bodyBackgroundColor"),function(_11,_12){
with(_11){
if(!_1){
_1=objj_msgSend(CPColor,"colorWithWhite:alpha:",0.96,0.9);
}
return _1;
}
})]);
p;18;_CPHUDWindowView.jt;6973;@STATIC;1.0;i;13;CPTextField.jt;6936;
objj_executeFile("CPTextField.j",YES);
var _1=nil,_2=nil;
var _3=26;
var _4=objj_allocateClassPair(_CPWindowView,"_CPHUDWindowView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_toolbarView"),new objj_ivar("_titleField"),new objj_ivar("_closeButton")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_6,_7,_8){
with(_6){
var _9=objj_msgSend(objj_msgSend(_6,"class"),"contentRectForFrameRect:",_8);
if(objj_msgSend(objj_msgSend(objj_msgSend(_6,"window"),"toolbar"),"isVisible")){
var _a=CGRectGetHeight(objj_msgSend(objj_msgSend(_6,"toolbarView"),"frame"));
_9.origin.y+=_a;
_9.size.height-=_a;
}
return _9;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_b,_c,_d){
with(_b){
var _e=objj_msgSend(objj_msgSend(_b,"class"),"frameRectForContentRect:",_d);
if(objj_msgSend(objj_msgSend(objj_msgSend(_b,"window"),"toolbar"),"isVisible")){
var _f=CGRectGetHeight(objj_msgSend(objj_msgSend(_b,"toolbarView"),"frame"));
_e.origin.y-=_f;
_e.size.height+=_f;
}
return _e;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_10,_11,_12,_13){
with(_10){
_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("_CPHUDWindowView").super_class},"initWithFrame:styleMask:",_12,_13);
if(_10){
var _14=objj_msgSend(_10,"bounds");
objj_msgSend(_10,"setBackgroundColor:",_1);
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setHitTests:",NO);
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"systemFontOfSize:",11));
objj_msgSend(_titleField,"setTextColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_titleField,"setTextShadowColor:",objj_msgSend(CPColor,"blackColor"));
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setStringValue:","Untitled");
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setStringValue:","");
objj_msgSend(_titleField,"setFrame:",CGRectMake(20,3,CGRectGetWidth(objj_msgSend(_10,"bounds"))-40,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
objj_msgSend(_10,"addSubview:",_titleField);
if(_styleMask&CPClosableWindowMask){
var _15=objj_msgSend(_CPHUDWindowViewCloseImage,"size");
_closeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(8,5,_15.width,_15.height));
objj_msgSend(_closeButton,"setBordered:",NO);
objj_msgSend(_closeButton,"setImage:",_CPHUDWindowViewCloseImage);
objj_msgSend(_closeButton,"setAlternateImage:",_CPHUDWindowViewCloseActiveImage);
objj_msgSend(_10,"addSubview:",_closeButton);
}
objj_msgSend(_10,"setResizeIndicatorOffset:",CGSizeMake(5,5));
}
return _10;
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_16,_17){
with(_16){
objj_msgSend(_closeButton,"setTarget:",objj_msgSend(_16,"window"));
objj_msgSend(_closeButton,"setAction:",sel_getUid("performClose:"));
}
}),new objj_method(sel_getUid("setTitle:"),function(_18,_19,_1a){
with(_18){
objj_msgSend(_titleField,"setStringValue:",_1a);
}
}),new objj_method(sel_getUid("toolbarView"),function(_1b,_1c){
with(_1b){
return _toolbarView;
}
}),new objj_method(sel_getUid("toolbarLabelColor"),function(_1d,_1e){
with(_1d){
return objj_msgSend(CPColor,"whiteColor");
}
}),new objj_method(sel_getUid("toolbarLabelShadowColor"),function(_1f,_20){
with(_1f){
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_21,_22){
with(_21){
return CGSizeMake(0,_3);
}
}),new objj_method(sel_getUid("tile"),function(_23,_24){
with(_23){
objj_msgSendSuper({receiver:_23,super_class:objj_getClass("_CPHUDWindowView").super_class},"tile");
var _25=objj_msgSend(_23,"window"),_26=objj_msgSend(_23,"bounds"),_27=CGRectGetWidth(_26);
objj_msgSend(_titleField,"setFrame:",CGRectMake(20,3,_27-40,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
var _28=objj_msgSend(_23,"toolbarMaxY");
objj_msgSend(objj_msgSend(_25,"contentView"),"setFrameOrigin:",CGPointMake(0,_28,_27,CGRectGetHeight(_26)-_28));
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("initialize"),function(_29,_2a){
with(_29){
if(_29!=objj_msgSend(_CPHUDWindowView,"class")){
return;
}
var _2b=objj_msgSend(CPBundle,"bundleForClass:",_29);
_1=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground0.png"),CPSizeMake(7,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground1.png"),CPSizeMake(1,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground2.png"),CPSizeMake(7,37)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground3.png"),CPSizeMake(7,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground4.png"),CPSizeMake(2,2)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground5.png"),CPSizeMake(7,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground6.png"),CPSizeMake(7,3)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground7.png"),CPSizeMake(1,3)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","CPWindow/HUD/CPWindowHUDBackground8.png"),CPSizeMake(7,3))]));
_CPHUDWindowViewCloseImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","HUDTheme/WindowClose.png"),CPSizeMake(18,18));
_CPHUDWindowViewCloseActiveImage=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_2b,"pathForResource:","HUDTheme/WindowCloseActive.png"),CPSizeMake(18,18));
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_2c,_2d,_2e){
with(_2c){
var _2f=CGRectMakeCopy(_2e),_30=_3;
_2f.origin.y+=_30;
_2f.size.height-=_30;
return _2f;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_31,_32,_33){
with(_31){
var _34=CGRectMakeCopy(_33),_35=_3;
_34.origin.y-=_35;
_34.size.height+=_35;
return _34;
}
})]);
p;23;_CPStandardWindowView.jt;11824;@STATIC;1.0;i;13;CPTextField.ji;15;_CPWindowView.jt;11766;
objj_executeFile("CPTextField.j",YES);
objj_executeFile("_CPWindowView.j",YES);
var _1=41;
var _2=nil,_3=nil;
var _4=objj_allocateClassPair(CPView,"_CPTexturedWindowHeadView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_gradientView"),new objj_ivar("_solidView"),new objj_ivar("_dividerView")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("initWithFrame:"),function(_6,_7,_8){
with(_6){
_6=objj_msgSendSuper({receiver:_6,super_class:objj_getClass("_CPTexturedWindowHeadView").super_class},"initWithFrame:",_8);
if(_6){
var _9=objj_msgSend(_6,"class"),_a=objj_msgSend(_6,"bounds");
_gradientView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,0,CGRectGetWidth(_a),_1));
objj_msgSend(_gradientView,"setBackgroundColor:",objj_msgSend(_9,"gradientColor"));
objj_msgSend(_6,"addSubview:",_gradientView);
_solidView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,_1,CGRectGetWidth(_a),CGRectGetHeight(_a)-_1));
objj_msgSend(_solidView,"setBackgroundColor:",objj_msgSend(_9,"solidColor"));
objj_msgSend(_6,"addSubview:",_solidView);
}
return _6;
}
}),new objj_method(sel_getUid("resizeSubviewsWithOldSize:"),function(_b,_c,_d){
with(_b){
var _e=objj_msgSend(_b,"bounds");
objj_msgSend(_gradientView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_e),_1));
objj_msgSend(_solidView,"setFrameSize:",CGSizeMake(CGRectGetWidth(_e),CGRectGetHeight(_e)-_1));
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("gradientColor"),function(_f,_10){
with(_f){
if(!_2){
var _11=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(_CPWindowView,"class"));
_2=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPThreePartImage,"alloc"),"initWithImageSlices:isVertical:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop0.png"),CGSizeMake(6,41)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop1.png"),CGSizeMake(1,41)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_11,"pathForResource:","CPWindow/Standard/CPWindowStandardTop2.png"),CGSizeMake(6,41))],NO));
}
return _2;
}
}),new objj_method(sel_getUid("solidColor"),function(_12,_13){
with(_12){
if(!_3){
_3=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",195/255,195/255,195/255,1);
}
return _3;
}
})]);
var _14=nil,_15=nil,_16=nil,_17=nil,_18=nil,_19=nil,_1a=nil,_1b=nil,_1c=nil;
var _1d=41,_1e=25;
var _4=objj_allocateClassPair(_CPWindowView,"_CPStandardWindowView"),_5=_4.isa;
class_addIvars(_4,[new objj_ivar("_headView"),new objj_ivar("_dividerView"),new objj_ivar("_bodyView"),new objj_ivar("_toolbarView"),new objj_ivar("_titleField"),new objj_ivar("_closeButton"),new objj_ivar("_minimizeButton"),new objj_ivar("_isDocumentEdited")]);
objj_registerClassPair(_4);
class_addMethods(_4,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_1f,_20,_21){
with(_1f){
var _22=objj_msgSend(objj_msgSend(_1f,"class"),"contentRectForFrameRect:",_21),_23=objj_msgSend(objj_msgSend(_1f,"window"),"toolbar");
if(objj_msgSend(_23,"isVisible")){
var _24=CGRectGetHeight(objj_msgSend(objj_msgSend(_23,"_toolbarView"),"frame"));
_22.origin.y+=_24;
_22.size.height-=_24;
}
return _22;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_25,_26,_27){
with(_25){
var _28=objj_msgSend(objj_msgSend(_25,"class"),"frameRectForContentRect:",_27),_29=objj_msgSend(objj_msgSend(_25,"window"),"toolbar");
if(objj_msgSend(_29,"isVisible")){
var _2a=CGRectGetHeight(objj_msgSend(objj_msgSend(_29,"_toolbarView"),"frame"));
_28.origin.y-=_2a;
_28.size.height+=_2a;
}
return _28;
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_2b,_2c,_2d,_2e){
with(_2b){
_2b=objj_msgSendSuper({receiver:_2b,super_class:objj_getClass("_CPStandardWindowView").super_class},"initWithFrame:styleMask:",_2d,_2e);
if(_2b){
var _2f=objj_msgSend(_2b,"class"),_30=objj_msgSend(_2b,"bounds");
_headView=objj_msgSend(objj_msgSend(_CPTexturedWindowHeadView,"alloc"),"initWithFrame:",CGRectMake(0,0,CGRectGetWidth(_30),objj_msgSend(objj_msgSend(_2b,"class"),"titleBarHeight")));
objj_msgSend(_headView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_headView,"setHitTests:",NO);
objj_msgSend(_2b,"addSubview:",_headView);
_dividerView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,CGRectGetMaxY(objj_msgSend(_headView,"frame")),CGRectGetWidth(_30),1));
objj_msgSend(_dividerView,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_dividerView,"setBackgroundColor:",objj_msgSend(_2f,"dividerBackgroundColor"));
objj_msgSend(_dividerView,"setHitTests:",NO);
objj_msgSend(_2b,"addSubview:",_dividerView);
var y=CGRectGetMaxY(objj_msgSend(_dividerView,"frame"));
_bodyView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(0,y,CGRectGetWidth(_30),CGRectGetHeight(_30)-y));
objj_msgSend(_bodyView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_bodyView,"setBackgroundColor:",objj_msgSend(_2f,"bodyBackgroundColor"));
objj_msgSend(_bodyView,"setHitTests:",NO);
objj_msgSend(_2b,"addSubview:",_bodyView);
objj_msgSend(_2b,"setResizeIndicatorOffset:",CGSizeMake(2,2));
_titleField=objj_msgSend(objj_msgSend(CPTextField,"alloc"),"initWithFrame:",CGRectMakeZero());
objj_msgSend(_titleField,"setFont:",objj_msgSend(CPFont,"boldSystemFontOfSize:",12));
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setLineBreakMode:",CPLineBreakByTruncatingTail);
objj_msgSend(_titleField,"setAlignment:",CPCenterTextAlignment);
objj_msgSend(_titleField,"setTextShadowColor:",objj_msgSend(CPColor,"whiteColor"));
objj_msgSend(_titleField,"setTextShadowOffset:",CGSizeMake(0,1));
objj_msgSend(_titleField,"setStringValue:","Untitled");
objj_msgSend(_titleField,"sizeToFit");
objj_msgSend(_titleField,"setAutoresizingMask:",CPViewWidthSizable);
objj_msgSend(_titleField,"setStringValue:","");
objj_msgSend(_2b,"addSubview:",_titleField);
if(_styleMask&CPClosableWindowMask){
if(!_17){
var _31=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_17=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButton.png"),CGSizeMake(16,16));
_18=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonHighlighted.png"),CGSizeMake(16,16));
_19=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonUnsaved.png"),CGSizeMake(16,16));
_1a=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardCloseButtonUnsavedHighlighted.png"),CGSizeMake(16,16));
}
_closeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(8,7,16,16));
objj_msgSend(_closeButton,"setBordered:",NO);
objj_msgSend(_2b,"_updateCloseButton");
objj_msgSend(_2b,"addSubview:",_closeButton);
}
if(_styleMask&CPMiniaturizableWindowMask&&!objj_msgSend(CPPlatform,"isBrowser")){
if(!_1b){
var _31=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_1b=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardMinimizeButton.png"),CGSizeMake(16,16));
_1c=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_31,"pathForResource:","CPWindow/Standard/CPWindowStandardMinimizeButtonHighlighted.png"),CGSizeMake(16,16));
}
_minimizeButton=objj_msgSend(objj_msgSend(CPButton,"alloc"),"initWithFrame:",CGRectMake(27,7,16,16));
objj_msgSend(_minimizeButton,"setBordered:",NO);
objj_msgSend(_minimizeButton,"setImage:",_1b);
objj_msgSend(_minimizeButton,"setAlternateImage:",_1c);
objj_msgSend(_2b,"addSubview:",_minimizeButton);
}
objj_msgSend(_2b,"tile");
}
return _2b;
}
}),new objj_method(sel_getUid("viewDidMoveToWindow"),function(_32,_33){
with(_32){
objj_msgSend(_closeButton,"setTarget:",objj_msgSend(_32,"window"));
objj_msgSend(_closeButton,"setAction:",sel_getUid("performClose:"));
objj_msgSend(_minimizeButton,"setTarget:",objj_msgSend(_32,"window"));
objj_msgSend(_minimizeButton,"setAction:",sel_getUid("performMiniaturize:"));
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_34,_35){
with(_34){
return CGSizeMake(0,objj_msgSend(objj_msgSend(_34,"class"),"titleBarHeight"));
}
}),new objj_method(sel_getUid("tile"),function(_36,_37){
with(_36){
objj_msgSendSuper({receiver:_36,super_class:objj_getClass("_CPStandardWindowView").super_class},"tile");
var _38=objj_msgSend(_36,"window"),_39=objj_msgSend(_36,"bounds"),_3a=CGRectGetWidth(_39);
objj_msgSend(_headView,"setFrameSize:",CGSizeMake(_3a,objj_msgSend(_36,"toolbarMaxY")));
objj_msgSend(_dividerView,"setFrame:",CGRectMake(0,CGRectGetMaxY(objj_msgSend(_headView,"frame")),_3a,1));
var _3b=CGRectGetMaxY(objj_msgSend(_dividerView,"frame"));
objj_msgSend(_bodyView,"setFrame:",CGRectMake(0,_3b,_3a,CGRectGetHeight(_39)-_3b));
var _3c=8;
if(_closeButton){
_3c+=19;
}
if(_minimizeButton){
_3c+=19;
}
objj_msgSend(_titleField,"setFrame:",CGRectMake(_3c,5,_3a-_3c*2,CGRectGetHeight(objj_msgSend(_titleField,"frame"))));
objj_msgSend(objj_msgSend(_38,"contentView"),"setFrameOrigin:",CGPointMake(0,CGRectGetMaxY(objj_msgSend(_dividerView,"frame"))));
}
}),new objj_method(sel_getUid("_updateCloseButton"),function(_3d,_3e){
with(_3d){
if(_isDocumentEdited){
objj_msgSend(_closeButton,"setImage:",_19);
objj_msgSend(_closeButton,"setAlternateImage:",_1a);
}else{
objj_msgSend(_closeButton,"setImage:",_17);
objj_msgSend(_closeButton,"setAlternateImage:",_18);
}
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_3f,_40,_41){
with(_3f){
_isDocumentEdited=_41;
objj_msgSend(_3f,"_updateCloseButton");
}
}),new objj_method(sel_getUid("setTitle:"),function(_42,_43,_44){
with(_42){
objj_msgSend(_titleField,"setStringValue:",_44);
}
}),new objj_method(sel_getUid("mouseDown:"),function(_45,_46,_47){
with(_45){
if(CGRectContainsPoint(objj_msgSend(_headView,"frame"),objj_msgSend(_45,"convertPoint:fromView:",objj_msgSend(_47,"locationInWindow"),nil))){
return objj_msgSend(_45,"trackMoveWithEvent:",_47);
}
objj_msgSendSuper({receiver:_45,super_class:objj_getClass("_CPStandardWindowView").super_class},"mouseDown:",_47);
}
})]);
class_addMethods(_5,[new objj_method(sel_getUid("bodyBackgroundColor"),function(_48,_49){
with(_48){
if(!_14){
_14=objj_msgSend(CPColor,"colorWithWhite:alpha:",0.96,1);
}
return _14;
}
}),new objj_method(sel_getUid("dividerBackgroundColor"),function(_4a,_4b){
with(_4a){
if(!_15){
_15=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",125/255,125/255,125/255,1);
}
return _15;
}
}),new objj_method(sel_getUid("titleColor"),function(_4c,_4d){
with(_4c){
if(!_16){
_16=objj_msgSend(CPColor,"colorWithCalibratedRed:green:blue:alpha:",44/255,44/255,44/255,1);
}
return _16;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_4e,_4f,_50){
with(_4e){
var _51=CGRectMakeCopy(_50),_52=objj_msgSend(_4e,"titleBarHeight")+1;
_51.origin.y+=_52;
_51.size.height-=_52;
return _51;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_53,_54,_55){
with(_53){
var _56=CGRectMakeCopy(_55),_57=objj_msgSend(_53,"titleBarHeight")+1;
_56.origin.y-=_57;
_56.size.height+=_57;
return _56;
}
}),new objj_method(sel_getUid("titleBarHeight"),function(_58,_59){
with(_58){
return _1e;
}
})]);
p;22;_CPToolTipWindowView.jt;2516;@STATIC;1.0;i;15;_CPWindowView.jt;2477;
objj_executeFile("_CPWindowView.j",YES);
var _1=objj_allocateClassPair(_CPWindowView,"_CPToolTipWindowView"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_mouseDownPressed"),new objj_ivar("_gravity")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("isMouseDownPressed"),function(_3,_4){
with(_3){
return _mouseDownPressed;
}
}),new objj_method(sel_getUid("setMouseDownPressed:"),function(_5,_6,_7){
with(_5){
_mouseDownPressed=_7;
}
}),new objj_method(sel_getUid("gravity"),function(_8,_9){
with(_8){
return _gravity;
}
}),new objj_method(sel_getUid("setGravity:"),function(_a,_b,_c){
with(_a){
_gravity=_c;
}
}),new objj_method(sel_getUid("drawRect:"),function(_d,_e,_f){
with(_d){
objj_msgSendSuper({receiver:_d,super_class:objj_getClass("_CPToolTipWindowView").super_class},"drawRect:",_f);
var _10=objj_msgSend(objj_msgSend(CPGraphicsContext,"currentContext"),"graphicsPort"),_11=objj_msgSend(_d,"currentValueForThemeAttribute:","border-radius"),_12=objj_msgSend(_d,"currentValueForThemeAttribute:","stroke-width"),_13=objj_msgSend(_d,"currentValueForThemeAttribute:","stroke-color"),_14=objj_msgSend(_d,"currentValueForThemeAttribute:","background-color");
CGContextSetStrokeColor(_10,_13);
CGContextSetFillColor(_10,_14);
CGContextSetLineWidth(_10,_12);
CGContextBeginPath(_10);
_f.origin.x+=_12;
_f.origin.y+=_12;
_f.size.width-=_12*2;
_f.size.height-=_12*2;
CGContextAddPath(_10,CGPathWithRoundedRectangleInRect(_f,_11,_11,YES,YES,YES,YES));
CGContextClosePath(_10);
CGContextStrokePath(_10);
CGContextFillPath(_10);
}
})]);
class_addMethods(_2,[new objj_method(sel_getUid("defaultThemeClass"),function(_15,_16){
with(_15){
return "tooltip";
}
}),new objj_method(sel_getUid("themeAttributes"),function(_17,_18){
with(_17){
return objj_msgSend(CPDictionary,"dictionaryWithObjects:forKeys:",[objj_msgSend(CPColor,"colorWithHexString:","E3E3E3"),objj_msgSend(CPColor,"colorWithHexString:","FFFFCA"),2,1,objj_msgSend(CPColor,"blackColor")],["stroke-color","background-color","border-radius","stroke-width","color"]);
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_19,_1a,_1b){
with(_19){
var _1c=CGRectMakeCopy(_1b);
_1c.origin.x+=3;
_1c.origin.y+=3;
_1c.size.width-=6;
_1c.size.height-=6;
return _1c;
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_1d,_1e,_1f){
with(_1d){
var _20=CGRectMakeCopy(_1f);
_20.origin.x-=3;
_20.origin.y-=3;
_20.size.width+=6;
_20.size.height+=6;
return _20;
}
})]);
p;15;_CPWindowView.jt;9375;@STATIC;1.0;i;13;CPImageView.ji;8;CPView.jt;9326;
objj_executeFile("CPImageView.j",YES);
objj_executeFile("CPView.j",YES);
var _1=nil;
var _2=objj_allocateClassPair(CPView,"_CPWindowView"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_styleMask"),new objj_ivar("_resizeIndicator"),new objj_ivar("_resizeIndicatorOffset"),new objj_ivar("_toolbarView"),new objj_ivar("_toolbarOffset"),new objj_ivar("_resizeFrame"),new objj_ivar("_mouseDraggedPoint"),new objj_ivar("_cachedScreenFrame")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("contentRectForFrameRect:"),function(_4,_5,_6){
with(_4){
return objj_msgSend(objj_msgSend(_4,"class"),"contentRectForFrameRect:",_6);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_7,_8,_9){
with(_7){
return objj_msgSend(objj_msgSend(_7,"class"),"frameRectForContentRect:",_9);
}
}),new objj_method(sel_getUid("initWithFrame:styleMask:"),function(_a,_b,_c,_d){
with(_a){
_a=objj_msgSendSuper({receiver:_a,super_class:objj_getClass("_CPWindowView").super_class},"initWithFrame:",_c);
if(_a){
_styleMask=_d;
_resizeIndicatorOffset=CGSizeMakeZero();
_toolbarOffset=CGSizeMakeZero();
}
return _a;
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(_e,_f,_10){
with(_e){
}
}),new objj_method(sel_getUid("setTitle:"),function(_11,_12,_13){
with(_11){
}
}),new objj_method(sel_getUid("acceptsFirstMouse:"),function(_14,_15,_16){
with(_14){
return YES;
}
}),new objj_method(sel_getUid("mouseDown:"),function(_17,_18,_19){
with(_17){
var _1a=objj_msgSend(_17,"window");
if((_styleMask&CPResizableWindowMask)&&_resizeIndicator){
var _1b=objj_msgSend(_resizeIndicator,"frame");
if(CGRectContainsPoint(_1b,objj_msgSend(_17,"convertPoint:fromView:",objj_msgSend(_19,"locationInWindow"),nil))){
return objj_msgSend(_17,"trackResizeWithEvent:",_19);
}
}
if(objj_msgSend(_1a,"isMovable")&&objj_msgSend(_1a,"isMovableByWindowBackground")){
objj_msgSend(_17,"trackMoveWithEvent:",_19);
}else{
objj_msgSendSuper({receiver:_17,super_class:objj_getClass("_CPWindowView").super_class},"mouseDown:",_19);
}
}
}),new objj_method(sel_getUid("trackResizeWithEvent:"),function(_1c,_1d,_1e){
with(_1c){
var _1f=objj_msgSend(_1e,"locationInWindow"),_20=objj_msgSend(_1e,"type");
if(_20===CPLeftMouseUp){
return;
}
var _21=objj_msgSend(_1c,"window");
if(_20===CPLeftMouseDown){
var _22=objj_msgSend(_21,"frame");
_resizeFrame=CGRectMake(_1f.x,_1f.y,CGRectGetWidth(_22),CGRectGetHeight(_22));
}else{
if(_20===CPLeftMouseDragged){
var _23=CGSizeMake(CGRectGetWidth(_resizeFrame)+_1f.x-CGRectGetMinX(_resizeFrame),CGRectGetHeight(_resizeFrame)+_1f.y-CGRectGetMinY(_resizeFrame));
if(_21._isSheet&&_21._parentView&&(_21._frame.size.width!==_23.width)){
objj_msgSend(_21._parentView,"_setAttachedSheetFrameOrigin");
}
objj_msgSend(_21,"setFrameSize:",_23);
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_1c,sel_getUid("trackResizeWithEvent:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("_pointWithinScreenFrame:"),function(_24,_25,_26){
with(_24){
if(!objj_msgSend(CPPlatform,"isBrowser")){
return _26;
}
var _27=_cachedScreenFrame;
if(!_27){
_27=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"visibleFrame");
}
var _28=0;
if(objj_msgSend(CPMenu,"menuBarVisible")){
_28=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"menuBarHeight");
}
var _29=CGPointMake(0,0);
_29.x=MIN(MAX(_26.x,-_frame.size.width+4),CGRectGetMaxX(_27)-4);
_29.y=MIN(MAX(_26.y,_28),CGRectGetMaxY(_27)-8);
return _29;
}
}),new objj_method(sel_getUid("trackMoveWithEvent:"),function(_2a,_2b,_2c){
with(_2a){
if(!objj_msgSend(objj_msgSend(_2a,"window"),"isMovable")){
return;
}
var _2d=objj_msgSend(_2c,"type");
if(_2d===CPLeftMouseUp){
_cachedScreenFrame=nil;
return;
}else{
if(_2d===CPLeftMouseDown){
_mouseDraggedPoint=objj_msgSend(objj_msgSend(_2a,"window"),"convertBaseToGlobal:",objj_msgSend(_2c,"locationInWindow"));
_cachedScreenFrame=objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"visibleFrame");
}else{
if(_2d===CPLeftMouseDragged){
var _2e=objj_msgSend(_2a,"window"),_2f=objj_msgSend(_2e,"frame"),_30=objj_msgSend(_2e,"convertBaseToGlobal:",objj_msgSend(_2c,"locationInWindow")),_31=objj_msgSend(_2a,"_pointWithinScreenFrame:",CGPointMake((_2f.origin.x)+(_30.x-_mouseDraggedPoint.x),(_2f.origin.y)+(_30.y-_mouseDraggedPoint.y)));
objj_msgSend(_2e,"setFrameOrigin:",_31);
_mouseDraggedPoint=objj_msgSend(_2a,"_pointWithinScreenFrame:",_30);
}
}
}
objj_msgSend(CPApp,"setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:",_2a,sel_getUid("trackMoveWithEvent:"),CPLeftMouseDraggedMask|CPLeftMouseUpMask,nil,nil,YES);
}
}),new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_32,_33,_34){
with(_32){
if(_34){
var _35=objj_msgSend(_1,"size"),_36=objj_msgSend(_32,"frame").size;
_resizeIndicator=objj_msgSend(objj_msgSend(CPImageView,"alloc"),"initWithFrame:",CGRectMake(_36.width-_35.width-_resizeIndicatorOffset.width,_36.height-_35.height-_resizeIndicatorOffset.height,_35.width,_35.height));
objj_msgSend(_resizeIndicator,"setImage:",_1);
objj_msgSend(_resizeIndicator,"setAutoresizingMask:",CPViewMinXMargin|CPViewMinYMargin);
objj_msgSend(_32,"addSubview:",_resizeIndicator);
}else{
objj_msgSend(_resizeIndicator,"removeFromSuperview");
_resizeIndicator=nil;
}
}
}),new objj_method(sel_getUid("showsResizeIndicator"),function(_37,_38){
with(_37){
return _resizeIndicator!==nil;
}
}),new objj_method(sel_getUid("setResizeIndicatorOffset:"),function(_39,_3a,_3b){
with(_39){
if(CGSizeEqualToSize(_resizeIndicatorOffset,_3b)){
return;
}
_resizeIndicatorOffset=_3b;
if(!_resizeIndicator){
return;
}
var _3c=objj_msgSend(_resizeIndicator,"frame").size,_3d=objj_msgSend(_39,"frame").size;
objj_msgSend(_resizeIndicator,"setFrameOrigin:",CGPointMake(_3d.width-_3c.width-_3b.width,_3d.height-_3c.height-_3b.height));
}
}),new objj_method(sel_getUid("resizeIndicatorOffset"),function(_3e,_3f){
with(_3e){
return _resizeIndicatorOffset;
}
}),new objj_method(sel_getUid("windowDidChangeDocumentEdited"),function(_40,_41){
with(_40){
}
}),new objj_method(sel_getUid("windowDidChangeDocumentSaving"),function(_42,_43){
with(_42){
}
}),new objj_method(sel_getUid("showsToolbar"),function(_44,_45){
with(_44){
return YES;
}
}),new objj_method(sel_getUid("toolbarOffset"),function(_46,_47){
with(_46){
return _toolbarOffset;
}
}),new objj_method(sel_getUid("toolbarLabelColor"),function(_48,_49){
with(_48){
return objj_msgSend(CPColor,"blackColor");
}
}),new objj_method(sel_getUid("toolbarMaxY"),function(_4a,_4b){
with(_4a){
if(!_toolbarView||objj_msgSend(_toolbarView,"isHidden")){
return objj_msgSend(_4a,"toolbarOffset").height;
}
return CGRectGetMaxY(objj_msgSend(_toolbarView,"frame"));
}
}),new objj_method(sel_getUid("toolbarView"),function(_4c,_4d){
with(_4c){
return _toolbarView;
}
}),new objj_method(sel_getUid("tile"),function(_4e,_4f){
with(_4e){
var _50=objj_msgSend(_4e,"window"),_51=objj_msgSend(_4e,"bounds"),_52=CGRectGetWidth(_51);
if(objj_msgSend(objj_msgSend(_50,"toolbar"),"isVisible")){
var _53=objj_msgSend(_4e,"toolbarView"),_54=objj_msgSend(_4e,"toolbarOffset");
objj_msgSend(_53,"setFrame:",CGRectMake(_54.width,_54.height,_52,CGRectGetHeight(objj_msgSend(_53,"frame"))));
}
if(objj_msgSend(_4e,"showsResizeIndicator")){
var _55=objj_msgSend(_resizeIndicator,"frame").size,_56=objj_msgSend(_4e,"bounds").size;
objj_msgSend(_resizeIndicator,"setFrameOrigin:",CGPointMake(_56.width-_55.width-_resizeIndicatorOffset.width,_56.height-_55.height-_resizeIndicatorOffset.height));
}
}
}),new objj_method(sel_getUid("noteToolbarChanged"),function(_57,_58){
with(_57){
var _59=objj_msgSend(_57,"window"),_5a=objj_msgSend(_59,"toolbar"),_5b=objj_msgSend(_5a,"_toolbarView");
if(_toolbarView!==_5b){
objj_msgSend(_toolbarView,"removeFromSuperview");
if(_5b){
objj_msgSend(_5b,"removeFromSuperview");
objj_msgSend(_5b,"FIXME_setIsHUD:",_styleMask&CPHUDBackgroundWindowMask);
objj_msgSend(_57,"addSubview:",_5b);
}
_toolbarView=_5b;
}
objj_msgSend(_5b,"setHidden:",!objj_msgSend(_57,"showsToolbar")||!objj_msgSend(_5a,"isVisible"));
if(_59){
var _5c=objj_msgSend(_57,"convertRect:toView:",objj_msgSend(objj_msgSend(_59,"contentView"),"frame"),nil);
_5c.origin=objj_msgSend(_59,"convertBaseToGlobal:",_5c.origin);
objj_msgSend(_57,"setAutoresizesSubviews:",NO);
objj_msgSend(_59,"setFrame:",objj_msgSend(_59,"frameRectForContentRect:",_5c));
objj_msgSend(_57,"setAutoresizesSubviews:",YES);
}
objj_msgSend(_57,"tile");
}
}),new objj_method(sel_getUid("didAddSubview:"),function(_5d,_5e,_5f){
with(_5d){
if(!_resizeIndicator||_5f===_resizeIndicator){
return;
}
objj_msgSend(_5d,"addSubview:",_resizeIndicator);
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("initialize"),function(_60,_61){
with(_60){
if(_60!=objj_msgSend(_CPWindowView,"class")){
return;
}
_1=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class")),"pathForResource:","_CPWindowView/_CPWindowViewResizeIndicator.png"),CGSizeMake(12,12));
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_62,_63,_64){
with(_62){
return CGRectMakeCopy(_64);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_65,_66,_67){
with(_65){
return CGRectMakeCopy(_67);
}
})]);
p;10;CPWindow.jt;65584;@STATIC;1.0;I;25;Foundation/CPCountedSet.jI;33;Foundation/CPNotificationCenter.jI;26;Foundation/CPUndoManager.ji;12;CGGeometry.ji;13;CPAnimation.ji;18;CPPlatformWindow.ji;13;CPResponder.ji;10;CPScreen.ji;15;_CPWindowView.ji;23;_CPStandardWindowView.ji;23;_CPDocModalWindowView.ji;22;_CPToolTipWindowView.ji;18;_CPHUDWindowView.ji;25;_CPBorderlessWindowView.ji;31;_CPBorderlessBridgeWindowView.ji;23;_CPAttachedWindowView.ji;14;CPDragServer.ji;8;CPView.jt;65123;
objj_executeFile("Foundation/CPCountedSet.j",NO);
objj_executeFile("Foundation/CPNotificationCenter.j",NO);
objj_executeFile("Foundation/CPUndoManager.j",NO);
objj_executeFile("CGGeometry.j",YES);
objj_executeFile("CPAnimation.j",YES);
objj_executeFile("CPPlatformWindow.j",YES);
objj_executeFile("CPResponder.j",YES);
objj_executeFile("CPScreen.j",YES);
CPBorderlessWindowMask=0;
CPTitledWindowMask=1<<0;
CPClosableWindowMask=1<<1;
CPMiniaturizableWindowMask=1<<2;
CPResizableWindowMask=1<<3;
CPTexturedBackgroundWindowMask=1<<8;
CPBorderlessBridgeWindowMask=1<<20;
CPHUDBackgroundWindowMask=1<<21;
CPWindowNotSizable=0;
CPWindowMinXMargin=1;
CPWindowWidthSizable=2;
CPWindowMaxXMargin=4;
CPWindowMinYMargin=8;
CPWindowHeightSizable=16;
CPWindowMaxYMargin=32;
CPBackgroundWindowLevel=-1;
CPNormalWindowLevel=0;
CPFloatingWindowLevel=3;
CPSubmenuWindowLevel=3;
CPTornOffMenuWindowLevel=3;
CPMainMenuWindowLevel=24;
CPStatusWindowLevel=25;
CPModalPanelWindowLevel=8;
CPPopUpMenuWindowLevel=101;
CPDraggingWindowLevel=500;
CPScreenSaverWindowLevel=1000;
CPWindowOut=0;
CPWindowAbove=1;
CPWindowBelow=2;
CPWindowWillCloseNotification="CPWindowWillCloseNotification";
CPWindowDidBecomeMainNotification="CPWindowDidBecomeMainNotification";
CPWindowDidResignMainNotification="CPWindowDidResignMainNotification";
CPWindowDidBecomeKeyNotification="CPWindowDidBecomeKeyNotification";
CPWindowDidResignKeyNotification="CPWindowDidResignKeyNotification";
CPWindowDidResizeNotification="CPWindowDidResizeNotification";
CPWindowDidMoveNotification="CPWindowDidMoveNotification";
CPWindowWillBeginSheetNotification="CPWindowWillBeginSheetNotification";
CPWindowDidEndSheetNotification="CPWindowDidEndSheetNotification";
CPWindowDidMiniaturizeNotification="CPWindowDidMiniaturizeNotification";
CPWindowWillMiniaturizeNotification="CPWindowWillMiniaturizeNotification";
CPWindowDidDeminiaturizeNotification="CPWindowDidDeminiaturizeNotification";
CPWindowShadowStyleStandard=0;
CPWindowShadowStyleMenu=1;
CPWindowShadowStylePanel=2;
var _1=20,_2=19,_3=10,_4=10,_5=5,_6=nil;
var _7=nil,_8=nil,_9=0.2;
var _a=[CPLeftArrowFunctionKey,CPRightArrowFunctionKey,CPUpArrowFunctionKey,CPDownArrowFunctionKey,CPPageUpFunctionKey,CPPageDownFunctionKey,CPHomeFunctionKey,CPEndFunctionKey,CPEscapeFunctionKey];
var _b=objj_allocateClassPair(CPResponder,"CPWindow"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_platformWindow"),new objj_ivar("_windowNumber"),new objj_ivar("_styleMask"),new objj_ivar("_frame"),new objj_ivar("_level"),new objj_ivar("_isVisible"),new objj_ivar("_isMiniaturized"),new objj_ivar("_isAnimating"),new objj_ivar("_hasShadow"),new objj_ivar("_isMovableByWindowBackground"),new objj_ivar("_isMovable"),new objj_ivar("_shadowStyle"),new objj_ivar("_showsResizeIndicator"),new objj_ivar("_isDocumentEdited"),new objj_ivar("_isDocumentSaving"),new objj_ivar("_shadowView"),new objj_ivar("_windowView"),new objj_ivar("_contentView"),new objj_ivar("_toolbarView"),new objj_ivar("_mouseEnteredStack"),new objj_ivar("_leftMouseDownView"),new objj_ivar("_rightMouseDownView"),new objj_ivar("_toolbar"),new objj_ivar("_firstResponder"),new objj_ivar("_initialFirstResponder"),new objj_ivar("_delegate"),new objj_ivar("_title"),new objj_ivar("_acceptsMouseMovedEvents"),new objj_ivar("_ignoresMouseEvents"),new objj_ivar("_windowController"),new objj_ivar("_minSize"),new objj_ivar("_maxSize"),new objj_ivar("_undoManager"),new objj_ivar("_representedURL"),new objj_ivar("_registeredDraggedTypes"),new objj_ivar("_registeredDraggedTypesArray"),new objj_ivar("_inclusiveRegisteredDraggedTypes"),new objj_ivar("_defaultButton"),new objj_ivar("_defaultButtonEnabled"),new objj_ivar("_autorecalculatesKeyViewLoop"),new objj_ivar("_keyViewLoopIsDirty"),new objj_ivar("_sharesChromeWithPlatformWindow"),new objj_ivar("_DOMElement"),new objj_ivar("_autoresizingMask"),new objj_ivar("_delegateRespondsToWindowWillReturnUndoManagerSelector"),new objj_ivar("_isFullPlatformWindow"),new objj_ivar("_fullPlatformWindowSession"),new objj_ivar("_sheetContext"),new objj_ivar("_parentView"),new objj_ivar("_isSheet"),new objj_ivar("_frameAnimation")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("init"),function(_d,_e){
with(_d){
return objj_msgSend(_d,"initWithContentRect:styleMask:",{origin:{x:0,y:0},size:{width:0,height:0}},CPTitledWindowMask);
}
}),new objj_method(sel_getUid("initWithContentRect:styleMask:"),function(_f,_10,_11,_12){
with(_f){
_f=objj_msgSendSuper({receiver:_f,super_class:objj_getClass("CPWindow").super_class},"init");
if(_f){
var _13=objj_msgSend(objj_msgSend(_f,"class"),"_windowViewClassForStyleMask:",_12);
_frame=objj_msgSend(_13,"frameRectForContentRect:",_11);
objj_msgSend(_f,"_setSharesChromeWithPlatformWindow:",!objj_msgSend(CPPlatform,"isBrowser"));
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(_f,"setPlatformWindow:",objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"));
}else{
if((_12&CPBorderlessBridgeWindowMask)&&_11.size.width===0&&_11.size.height===0){
var _14=objj_msgSend(objj_msgSend(objj_msgSend(CPScreen,"alloc"),"init"),"visibleFrame");
_frame.size.height=MIN(768,_14.size.height);
_frame.size.width=MIN(1024,_14.size.width);
_frame.origin.x=(_14.size.width-_frame.size.width)/2;
_frame.origin.y=(_14.size.height-_frame.size.height)/2;
}
objj_msgSend(_f,"setPlatformWindow:",objj_msgSend(objj_msgSend(CPPlatformWindow,"alloc"),"initWithContentRect:",_frame));
objj_msgSend(_f,"platformWindow")._only=_f;
}
_isFullPlatformWindow=NO;
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
_isSheet=NO;
_acceptsMouseMovedEvents=YES;
_isMovable=YES;
_windowNumber=objj_msgSend(CPApp._windows,"count");
CPApp._windows[_windowNumber]=_f;
_styleMask=_12;
objj_msgSend(_f,"setLevel:",CPNormalWindowLevel);
_minSize=CGSizeMake(0,0);
_maxSize=CGSizeMake(1000000,1000000);
_windowView=objj_msgSend(objj_msgSend(_13,"alloc"),"initWithFrame:styleMask:",CGRectMake(0,0,CGRectGetWidth(_frame),CGRectGetHeight(_frame)),_12);
objj_msgSend(_windowView,"_setWindow:",_f);
objj_msgSend(_windowView,"setNextResponder:",_f);
objj_msgSend(_f,"setMovableByWindowBackground:",_12&CPHUDBackgroundWindowMask);
objj_msgSend(_f,"setContentView:",objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMakeZero()));
objj_msgSend(_f,"setInitialFirstResponder:",objj_msgSend(_f,"contentView"));
_firstResponder=_f;
_DOMElement=document.createElement("div");
_DOMElement.style.position="absolute";
_DOMElement.style.visibility="visible";
_DOMElement.style.zIndex=0;
if(!objj_msgSend(_f,"_sharesChromeWithPlatformWindow")){
if(NULL){
var _15={x:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.a+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.c+NULL.tx,y:CGPointMake((_frame.origin.x),(_frame.origin.y)).x*NULL.b+CGPointMake((_frame.origin.x),(_frame.origin.y)).y*NULL.d+NULL.ty};
}else{
var _15={x:(_frame.origin.x),y:(_frame.origin.y)};
}
_DOMElement.style.left=ROUND(_15.x)+"px";
_DOMElement.style.top=ROUND(_15.y)+"px";
}
_DOMElement.style.width=MAX(0,ROUND(1))+"px";
_DOMElement.style.height=MAX(0,ROUND(1))+"px";
_DOMElement.appendChild(_windowView._DOMElement);
objj_msgSend(_f,"setNextResponder:",CPApp);
objj_msgSend(_f,"setHasShadow:",_12!==CPBorderlessWindowMask);
if(_12&CPBorderlessBridgeWindowMask){
objj_msgSend(_f,"setFullPlatformWindow:",YES);
}
_autorecalculatesKeyViewLoop=NO;
_defaultButtonEnabled=YES;
_keyViewLoopIsDirty=YES;
objj_msgSend(_f,"setShowsResizeIndicator:",_styleMask&CPResizableWindowMask);
}
return _f;
}
}),new objj_method(sel_getUid("platformWindow"),function(_16,_17){
with(_16){
return _platformWindow;
}
}),new objj_method(sel_getUid("setPlatformWindow:"),function(_18,_19,_1a){
with(_18){
var _1b=objj_msgSend(_18,"isVisible");
if(_1b){
objj_msgSend(_18,"close");
}
_platformWindow=_1a;
objj_msgSend(_platformWindow,"_setTitle:window:",_title,_18);
if(_1b){
objj_msgSend(_18,"orderFront:",_18);
}
}
}),new objj_method(sel_getUid("awakeFromCib"),function(_1c,_1d){
with(_1c){
_keyViewLoopIsDirty=!objj_msgSend(_1c,"_hasKeyViewLoop");
if(_keyViewLoopIsDirty&&!objj_msgSend(_1c,"autorecalculatesKeyViewLoop")){
objj_msgSend(_1c,"recalculateKeyViewLoop");
}
}
}),new objj_method(sel_getUid("_setWindowView:"),function(_1e,_1f,_20){
with(_1e){
if(_windowView===_20){
return;
}
var _21=_windowView;
_windowView=_20;
if(_21){
objj_msgSend(_21,"_setWindow:",nil);
objj_msgSend(_21,"noteToolbarChanged");
_DOMElement.removeChild(_21._DOMElement);
}
if(_windowView){
_DOMElement.appendChild(_windowView._DOMElement);
var _22=objj_msgSend(_contentView,"convertRect:toView:",objj_msgSend(_contentView,"bounds"),nil);
_22.origin=objj_msgSend(_1e,"convertBaseToGlobal:",_22.origin);
objj_msgSend(_windowView,"_setWindow:",_1e);
objj_msgSend(_windowView,"setNextResponder:",_1e);
objj_msgSend(_windowView,"addSubview:",_contentView);
objj_msgSend(_windowView,"setTitle:",_title);
objj_msgSend(_windowView,"noteToolbarChanged");
objj_msgSend(_windowView,"setShowsResizeIndicator:",objj_msgSend(_1e,"showsResizeIndicator"));
objj_msgSend(_1e,"setFrame:",objj_msgSend(_1e,"frameRectForContentRect:",_22));
}
}
}),new objj_method(sel_getUid("setFullPlatformWindow:"),function(_23,_24,_25){
with(_23){
if(!objj_msgSend(_platformWindow,"supportsFullPlatformWindows")){
return;
}
_25=!!_25;
if(_isFullPlatformWindow===_25){
return;
}
_isFullPlatformWindow=_25;
if(_isFullPlatformWindow){
_fullPlatformWindowSession=_CPWindowFullPlatformWindowSessionMake(_windowView,objj_msgSend(_23,"contentRectForFrameRect:",objj_msgSend(_23,"frame")),objj_msgSend(_23,"hasShadow"),objj_msgSend(_23,"level"));
var _26=objj_msgSend(objj_msgSend(_23,"class"),"_windowViewClassForFullPlatformWindowStyleMask:",_styleMask),_27=objj_msgSend(objj_msgSend(_26,"alloc"),"initWithFrame:styleMask:",CGRectMakeZero(),_styleMask);
objj_msgSend(_23,"_setWindowView:",_27);
objj_msgSend(_23,"setLevel:",CPBackgroundWindowLevel);
objj_msgSend(_23,"setHasShadow:",NO);
objj_msgSend(_23,"setAutoresizingMask:",CPWindowWidthSizable|CPWindowHeightSizable);
objj_msgSend(_23,"setFrame:",objj_msgSend(_platformWindow,"visibleFrame"));
}else{
var _27=_fullPlatformWindowSession.windowView;
objj_msgSend(_23,"_setWindowView:",_27);
objj_msgSend(_23,"setLevel:",_fullPlatformWindowSession.level);
objj_msgSend(_23,"setHasShadow:",_fullPlatformWindowSession.hasShadow);
objj_msgSend(_23,"setAutoresizingMask:",CPWindowNotSizable);
objj_msgSend(_23,"setFrame:",objj_msgSend(_27,"frameRectForContentRect:",_fullPlatformWindowSession.contentRect));
}
}
}),new objj_method(sel_getUid("isFullPlatformWindow"),function(_28,_29){
with(_28){
return _isFullPlatformWindow;
}
}),new objj_method(sel_getUid("styleMask"),function(_2a,_2b){
with(_2a){
return _styleMask;
}
}),new objj_method(sel_getUid("contentRectForFrameRect:"),function(_2c,_2d,_2e){
with(_2c){
return objj_msgSend(_windowView,"contentRectForFrameRect:",_2e);
}
}),new objj_method(sel_getUid("frameRectForContentRect:"),function(_2f,_30,_31){
with(_2f){
return objj_msgSend(_windowView,"frameRectForContentRect:",_31);
}
}),new objj_method(sel_getUid("frame"),function(_32,_33){
with(_32){
return {origin:{x:_frame.origin.x,y:_frame.origin.y},size:{width:_frame.size.width,height:_frame.size.height}};
}
}),new objj_method(sel_getUid("_setClippedFrame:display:animate:"),function(_34,_35,_36,_37,_38){
with(_34){
_36.size.width=MIN(MAX(_36.size.width,_minSize.width),_maxSize.width);
_36.size.height=MIN(MAX(_36.size.height,_minSize.height),_maxSize.height);
objj_msgSend(_34,"setFrame:display:animate:",_36,_37,_38);
}
}),new objj_method(sel_getUid("setFrame:display:animate:"),function(_39,_3a,_3b,_3c,_3d){
with(_39){
_3b={origin:{x:_3b.origin.x,y:_3b.origin.y},size:{width:_3b.size.width,height:_3b.size.height}};
var _3e=_3b.origin.x,_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.origin.x=_3e>0.879?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.origin.y;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.origin.y=_3e>0.879?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.size.width;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.size.width=_3e>0.15?CEIL(_3e):FLOOR(_3e);
}
_3e=_3b.size.height;
_3f=_3e-FLOOR(_3e);
if(_3f){
_3b.size.height=_3e>0.15?CEIL(_3e):FLOOR(_3e);
}
if(_3d){
objj_msgSend(_frameAnimation,"stopAnimation");
_frameAnimation=objj_msgSend(objj_msgSend(_CPWindowFrameAnimation,"alloc"),"initWithWindow:targetFrame:",_39,_3b);
objj_msgSend(_frameAnimation,"startAnimation");
}else{
var _40=_frame.origin,_41=_3b.origin;
if(!(_40.x==_41.x&&_40.y==_41.y)){
_40.x=_41.x;
_40.y=_41.y;
if(!objj_msgSend(_39,"_sharesChromeWithPlatformWindow")){
if(NULL){
var _42={x:CGPointMake(_40.x,_40.y).x*NULL.a+CGPointMake(_40.x,_40.y).y*NULL.c+NULL.tx,y:CGPointMake(_40.x,_40.y).x*NULL.b+CGPointMake(_40.x,_40.y).y*NULL.d+NULL.ty};
}else{
var _42={x:_40.x,y:_40.y};
}
_DOMElement.style.left=ROUND(_42.x)+"px";
_DOMElement.style.top=ROUND(_42.y)+"px";
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidMoveNotification,_39);
}
var _43=_frame.size,_44=_3b.size;
if(!(_43.width==_44.width&&_43.height==_44.height)){
_43.width=_44.width;
_43.height=_44.height;
objj_msgSend(_windowView,"setFrameSize:",_43);
if(_hasShadow){
objj_msgSend(_shadowView,"setFrameSize:",{width:_1+_43.width+_2,height:_4+_43.height+_3+_5});
}
if(!_isAnimating){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResizeNotification,_39);
}
}
if(objj_msgSend(_39,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"setContentRect:",_frame);
}
}
}
}),new objj_method(sel_getUid("setFrame:display:"),function(_45,_46,_47,_48){
with(_45){
objj_msgSend(_45,"_setClippedFrame:display:animate:",_47,_48,NO);
}
}),new objj_method(sel_getUid("setFrame:"),function(_49,_4a,_4b){
with(_49){
objj_msgSend(_49,"_setClippedFrame:display:animate:",_4b,YES,NO);
}
}),new objj_method(sel_getUid("setFrameOrigin:"),function(_4c,_4d,_4e){
with(_4c){
objj_msgSend(_4c,"_setClippedFrame:display:animate:",{origin:{x:_4e.x,y:_4e.y},size:{width:(_frame.size.width),height:(_frame.size.height)}},YES,NO);
}
}),new objj_method(sel_getUid("setFrameSize:"),function(_4f,_50,_51){
with(_4f){
objj_msgSend(_4f,"_setClippedFrame:display:animate:",{origin:{x:(_frame.origin.x),y:(_frame.origin.y)},size:{width:_51.width,height:_51.height}},YES,NO);
}
}),new objj_method(sel_getUid("orderFront:"),function(_52,_53,_54){
with(_52){
objj_msgSend(_platformWindow,"orderFront:",_52);
objj_msgSend(_platformWindow,"order:window:relativeTo:",CPWindowAbove,_52,nil);
if(_firstResponder===_52||!_firstResponder){
objj_msgSend(_52,"makeFirstResponder:",objj_msgSend(_52,"initialFirstResponder"));
}
if(!CPApp._keyWindow){
objj_msgSend(_52,"makeKeyWindow");
}
if(!CPApp._mainWindow){
objj_msgSend(_52,"makeMainWindow");
}
}
}),new objj_method(sel_getUid("orderBack:"),function(_55,_56,_57){
with(_55){
}
}),new objj_method(sel_getUid("orderOut:"),function(_58,_59,_5a){
with(_58){
if(objj_msgSend(_58,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"orderOut:",_58);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowWillClose:"))){
objj_msgSend(_delegate,"windowWillClose:",_58);
}
objj_msgSend(_platformWindow,"order:window:relativeTo:",CPWindowOut,_58,nil);
objj_msgSend(_58,"_updateMainAndKeyWindows");
}
}),new objj_method(sel_getUid("orderWindow:relativeTo:"),function(_5b,_5c,_5d,_5e){
with(_5b){
objj_msgSend(_platformWindow,"order:window:relativeTo:",_5d,_5b,CPApp._windows[_5e]);
}
}),new objj_method(sel_getUid("setLevel:"),function(_5f,_60,_61){
with(_5f){
if(_61===_level){
return;
}
objj_msgSend(_platformWindow,"moveWindow:fromLevel:toLevel:",_5f,_level,_61);
_level=_61;
if(objj_msgSend(_5f,"_sharesChromeWithPlatformWindow")){
objj_msgSend(_platformWindow,"setLevel:",_61);
}
}
}),new objj_method(sel_getUid("level"),function(_62,_63){
with(_62){
return _level;
}
}),new objj_method(sel_getUid("isVisible"),function(_64,_65){
with(_64){
return _isVisible;
}
}),new objj_method(sel_getUid("showsResizeIndicator"),function(_66,_67){
with(_66){
return _showsResizeIndicator;
}
}),new objj_method(sel_getUid("setShowsResizeIndicator:"),function(_68,_69,_6a){
with(_68){
_6a=!!_6a;
if(_showsResizeIndicator===_6a){
return;
}
_showsResizeIndicator=_6a;
objj_msgSend(_windowView,"setShowsResizeIndicator:",objj_msgSend(_68,"showsResizeIndicator"));
}
}),new objj_method(sel_getUid("resizeIndicatorOffset"),function(_6b,_6c){
with(_6b){
return objj_msgSend(_windowView,"resizeIndicatorOffset");
}
}),new objj_method(sel_getUid("setResizeIndicatorOffset:"),function(_6d,_6e,_6f){
with(_6d){
objj_msgSend(_windowView,"setResizeIndicatorOffset:",_6f);
}
}),new objj_method(sel_getUid("setContentView:"),function(_70,_71,_72){
with(_70){
if(_contentView){
objj_msgSend(_contentView,"removeFromSuperview");
}
var _73=CGRectMake(0,0,CGRectGetWidth(_frame),CGRectGetHeight(_frame));
if(objj_msgSend(_70,"initialFirstResponder")===_contentView){
objj_msgSend(_70,"setInitialFirstResponder:",_72);
}
_contentView=_72;
objj_msgSend(_contentView,"setFrame:",objj_msgSend(_70,"contentRectForFrameRect:",_73));
objj_msgSend(_contentView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
objj_msgSend(_windowView,"addSubview:",_contentView);
}
}),new objj_method(sel_getUid("contentView"),function(_74,_75){
with(_74){
return _contentView;
}
}),new objj_method(sel_getUid("setAlphaValue:"),function(_76,_77,_78){
with(_76){
objj_msgSend(_windowView,"setAlphaValue:",_78);
}
}),new objj_method(sel_getUid("alphaValue"),function(_79,_7a){
with(_79){
return objj_msgSend(_windowView,"alphaValue");
}
}),new objj_method(sel_getUid("setBackgroundColor:"),function(_7b,_7c,_7d){
with(_7b){
objj_msgSend(_windowView,"setBackgroundColor:",_7d);
}
}),new objj_method(sel_getUid("backgroundColor"),function(_7e,_7f){
with(_7e){
return objj_msgSend(_windowView,"backgroundColor");
}
}),new objj_method(sel_getUid("setMinSize:"),function(_80,_81,_82){
with(_80){
if(CGSizeEqualToSize(_minSize,_82)){
return;
}
_minSize=CGSizeCreateCopy(_82);
var _83=CGSizeMakeCopy(objj_msgSend(_80,"frame").size),_84=NO;
if(_83.width<_minSize.width){
_83.width=_minSize.width;
_84=YES;
}
if(_83.height<_minSize.height){
_83.height=_minSize.height;
_84=YES;
}
if(_84){
objj_msgSend(_80,"setFrameSize:",_83);
}
}
}),new objj_method(sel_getUid("minSize"),function(_85,_86){
with(_85){
return _minSize;
}
}),new objj_method(sel_getUid("setMaxSize:"),function(_87,_88,_89){
with(_87){
if(CGSizeEqualToSize(_maxSize,_89)){
return;
}
_maxSize=CGSizeCreateCopy(_89);
var _8a=CGSizeMakeCopy(objj_msgSend(_87,"frame").size),_8b=NO;
if(_8a.width>_maxSize.width){
_8a.width=_maxSize.width;
_8b=YES;
}
if(_8a.height>_maxSize.height){
_8a.height=_maxSize.height;
_8b=YES;
}
if(_8b){
objj_msgSend(_87,"setFrameSize:",_8a);
}
}
}),new objj_method(sel_getUid("maxSize"),function(_8c,_8d){
with(_8c){
return _maxSize;
}
}),new objj_method(sel_getUid("hasShadow"),function(_8e,_8f){
with(_8e){
return _hasShadow;
}
}),new objj_method(sel_getUid("_updateShadow"),function(_90,_91){
with(_90){
if(objj_msgSend(_90,"_sharesChromeWithPlatformWindow")){
if(_shadowView){
_DOMElement.removeChild(_shadowView._DOMElement);
_shadowView=nil;
}
objj_msgSend(_platformWindow,"setHasShadow:",_hasShadow);
return;
}
if(_hasShadow&&!_shadowView){
var _92=objj_msgSend(_windowView,"bounds");
_shadowView=objj_msgSend(objj_msgSend(CPView,"alloc"),"initWithFrame:",CGRectMake(-_1,-_3+_5,_1+CGRectGetWidth(_92)+_2,_3+CGRectGetHeight(_92)+_4));
if(!_6){
var _93=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_6=objj_msgSend(CPColor,"colorWithPatternImage:",objj_msgSend(objj_msgSend(CPNinePartImage,"alloc"),"initWithImageSlices:",[objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow0.png"),CGSizeMake(20,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow1.png"),CGSizeMake(1,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow2.png"),CGSizeMake(19,19)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow3.png"),CGSizeMake(20,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow4.png"),CGSizeMake(1,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow5.png"),CGSizeMake(19,1)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow6.png"),CGSizeMake(20,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow7.png"),CGSizeMake(1,18)),objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_93,"pathForResource:","CPWindow/CPWindowShadow8.png"),CGSizeMake(19,18))]));
}
objj_msgSend(_shadowView,"setBackgroundColor:",_6);
objj_msgSend(_shadowView,"setAutoresizingMask:",CPViewWidthSizable|CPViewHeightSizable);
_DOMElement.insertBefore(_shadowView._DOMElement,_windowView._DOMElement);
}else{
if(!_hasShadow&&_shadowView){
_DOMElement.removeChild(_shadowView._DOMElement);
_shadowView=nil;
}
}
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_94,_95,_96){
with(_94){
if(_hasShadow===_96){
return;
}
_hasShadow=_96;
objj_msgSend(_94,"_updateShadow");
}
}),new objj_method(sel_getUid("setShadowStyle:"),function(_97,_98,_99){
with(_97){
_shadowStyle=_99;
objj_msgSend(objj_msgSend(_97,"platformWindow"),"setShadowStyle:",_shadowStyle);
}
}),new objj_method(sel_getUid("setDelegate:"),function(_9a,_9b,_9c){
with(_9a){
var _9d=objj_msgSend(CPNotificationCenter,"defaultCenter");
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResignKeyNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidBecomeKeyNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidBecomeMainNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResignMainNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidMoveNotification,_9a);
objj_msgSend(_9d,"removeObserver:name:object:",_delegate,CPWindowDidResizeNotification,_9a);
_delegate=_9c;
_delegateRespondsToWindowWillReturnUndoManagerSelector=objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowWillReturnUndoManager:"));
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResignKey:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResignKey:"),CPWindowDidResignKeyNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidBecomeKey:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidBecomeKey:"),CPWindowDidBecomeKeyNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidBecomeMain:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidBecomeMain:"),CPWindowDidBecomeMainNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResignMain:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResignMain:"),CPWindowDidResignMainNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidMove:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidMove:"),CPWindowDidMoveNotification,_9a);
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowDidResize:"))){
objj_msgSend(_9d,"addObserver:selector:name:object:",_delegate,sel_getUid("windowDidResize:"),CPWindowDidResizeNotification,_9a);
}
}
}),new objj_method(sel_getUid("delegate"),function(_9e,_9f){
with(_9e){
return _delegate;
}
}),new objj_method(sel_getUid("setWindowController:"),function(_a0,_a1,_a2){
with(_a0){
_windowController=_a2;
}
}),new objj_method(sel_getUid("windowController"),function(_a3,_a4){
with(_a3){
return _windowController;
}
}),new objj_method(sel_getUid("doCommandBySelector:"),function(_a5,_a6,_a7){
with(_a5){
if(objj_msgSend(_delegate,"respondsToSelector:",_a7)){
objj_msgSend(_delegate,"performSelector:",_a7);
}else{
objj_msgSendSuper({receiver:_a5,super_class:objj_getClass("CPWindow").super_class},"doCommandBySelector:",_a7);
}
}
}),new objj_method(sel_getUid("acceptsFirstResponder"),function(_a8,_a9){
with(_a8){
return NO;
}
}),new objj_method(sel_getUid("initialFirstResponder"),function(_aa,_ab){
with(_aa){
return _initialFirstResponder;
}
}),new objj_method(sel_getUid("setInitialFirstResponder:"),function(_ac,_ad,_ae){
with(_ac){
_initialFirstResponder=_ae;
}
}),new objj_method(sel_getUid("_setupFirstResponder"),function(_af,_b0){
with(_af){
if(_keyViewLoopIsDirty&&!_autorecalculatesKeyViewLoop&&_firstResponder===_af&&_initialFirstResponder===objj_msgSend(_af,"contentView")){
objj_msgSend(_af,"recalculateKeyViewLoop");
var _b1=objj_msgSend(objj_msgSend(_af,"contentView"),"nextValidKeyView");
objj_msgSend(_af,"makeFirstResponder:",_b1);
}
}
}),new objj_method(sel_getUid("makeFirstResponder:"),function(_b2,_b3,_b4){
with(_b2){
if(_firstResponder===_b4){
return YES;
}
if(!objj_msgSend(_firstResponder,"resignFirstResponder")){
return NO;
}
if(!_b4||!objj_msgSend(_b4,"acceptsFirstResponder")||!objj_msgSend(_b4,"becomeFirstResponder")){
_firstResponder=_b2;
return NO;
}
_firstResponder=_b4;
return YES;
}
}),new objj_method(sel_getUid("firstResponder"),function(_b5,_b6){
with(_b5){
return _firstResponder;
}
}),new objj_method(sel_getUid("acceptsMouseMovedEvents"),function(_b7,_b8){
with(_b7){
return _acceptsMouseMovedEvents;
}
}),new objj_method(sel_getUid("setAcceptsMouseMovedEvents:"),function(_b9,_ba,_bb){
with(_b9){
_acceptsMouseMovedEvents=_bb;
}
}),new objj_method(sel_getUid("ignoresMouseEvents"),function(_bc,_bd){
with(_bc){
return _ignoresMouseEvents;
}
}),new objj_method(sel_getUid("setIgnoresMouseEvents:"),function(_be,_bf,_c0){
with(_be){
_ignoresMouseEvents=_c0;
}
}),new objj_method(sel_getUid("title"),function(_c1,_c2){
with(_c1){
return _title;
}
}),new objj_method(sel_getUid("setTitle:"),function(_c3,_c4,_c5){
with(_c3){
_title=_c5;
objj_msgSend(_windowView,"setTitle:",_c5);
objj_msgSend(_platformWindow,"_setTitle:window:",_title,_c3);
objj_msgSend(_c3,"_synchronizeMenuBarTitleWithWindowTitle");
}
}),new objj_method(sel_getUid("setTitleWithRepresentedFilename:"),function(_c6,_c7,_c8){
with(_c6){
objj_msgSend(_c6,"setRepresentedFilename:",_c8);
objj_msgSend(_c6,"setTitle:",objj_msgSend(_c8,"lastPathComponent"));
}
}),new objj_method(sel_getUid("setRepresentedFilename:"),function(_c9,_ca,_cb){
with(_c9){
objj_msgSend(_c9,"setRepresentedURL:",_cb);
}
}),new objj_method(sel_getUid("representedFilename"),function(_cc,_cd){
with(_cc){
return _representedURL;
}
}),new objj_method(sel_getUid("setRepresentedURL:"),function(_ce,_cf,_d0){
with(_ce){
_representedURL=_d0;
}
}),new objj_method(sel_getUid("representedURL"),function(_d1,_d2){
with(_d1){
return _representedURL;
}
}),new objj_method(sel_getUid("screen"),function(_d3,_d4){
with(_d3){
return objj_msgSend(objj_msgSend(CPScreen,"alloc"),"init");
}
}),new objj_method(sel_getUid("setMovableByWindowBackground:"),function(_d5,_d6,_d7){
with(_d5){
_isMovableByWindowBackground=_d7;
}
}),new objj_method(sel_getUid("isMovableByWindowBackground"),function(_d8,_d9){
with(_d8){
return _isMovableByWindowBackground;
}
}),new objj_method(sel_getUid("setMovable:"),function(_da,_db,_dc){
with(_da){
_isMovable=_dc;
}
}),new objj_method(sel_getUid("isMovable"),function(_dd,_de){
with(_dd){
return _isMovable;
}
}),new objj_method(sel_getUid("center"),function(_df,_e0){
with(_df){
if(_isFullPlatformWindow){
return;
}
var _e1=objj_msgSend(_df,"frame").size,_e2=objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(_platformWindow,"contentBounds").size:objj_msgSend(objj_msgSend(_df,"screen"),"visibleFrame").size;
var _e3=CGPointMake((_e2.width-_e1.width)/2,(_e2.height-_e1.height)/2);
if(_e3.x<0){
_e3.x=0;
}
if(_e3.y<0){
_e3.y=0;
}
objj_msgSend(_df,"setFrameOrigin:",_e3);
}
}),new objj_method(sel_getUid("sendEvent:"),function(_e4,_e5,_e6){
with(_e4){
var _e7=objj_msgSend(_e6,"type"),_e8=objj_msgSend(_e6,"locationInWindow");
switch(_e7){
case CPFlagsChanged:
return objj_msgSend(objj_msgSend(_e4,"firstResponder"),"flagsChanged:",_e6);
case CPKeyUp:
return objj_msgSend(objj_msgSend(_e4,"firstResponder"),"keyUp:",_e6);
case CPKeyDown:
if(objj_msgSend(_e6,"charactersIgnoringModifiers")===CPTabCharacter){
if(objj_msgSend(_e6,"modifierFlags")&CPShiftKeyMask){
objj_msgSend(_e4,"selectPreviousKeyView:",_e4);
}else{
objj_msgSend(_e4,"selectNextKeyView:",_e4);
}
return;
}else{
if(objj_msgSend(_e6,"charactersIgnoringModifiers")===CPBackTabCharacter){
return objj_msgSend(_e4,"selectPreviousKeyView:",_e4);
}
}
objj_msgSend(objj_msgSend(_e4,"firstResponder"),"keyDown:",_e6);
if(!objj_msgSend(_e4,"disableKeyEquivalentForDefaultButton")){
var _e9=objj_msgSend(_e4,"defaultButton"),_ea=objj_msgSend(_e9,"keyEquivalent"),_eb=objj_msgSend(_e9,"keyEquivalentModifierMask");
if(objj_msgSend(_e6,"_triggersKeyEquivalent:withModifierMask:",_ea,_eb)){
objj_msgSend(objj_msgSend(_e4,"defaultButton"),"performClick:",_e4);
}
}
return;
case CPScrollWheel:
return objj_msgSend(objj_msgSend(_windowView,"hitTest:",_e8),"scrollWheel:",_e6);
case CPLeftMouseUp:
case CPRightMouseUp:
var _ec=_leftMouseDownView,_ed=_e7==CPRightMouseUp?sel_getUid("rightMouseUp:"):sel_getUid("mouseUp:");
if(!_ec){
_ec=objj_msgSend(_windowView,"hitTest:",_e8);
}
objj_msgSend(_ec,"performSelector:withObject:",_ed,_e6);
_leftMouseDownView=nil;
return;
case CPLeftMouseDown:
case CPRightMouseDown:
_leftMouseDownView=objj_msgSend(_windowView,"hitTest:",_e8);
if(_leftMouseDownView!=_firstResponder&&objj_msgSend(_leftMouseDownView,"acceptsFirstResponder")){
objj_msgSend(_e4,"makeFirstResponder:",_leftMouseDownView);
}
objj_msgSend(CPApp,"activateIgnoringOtherApps:",YES);
var _ee=objj_msgSend(_e6,"window"),_ed=_e7==CPRightMouseDown?sel_getUid("rightMouseDown:"):sel_getUid("mouseDown:");
if(objj_msgSend(_ee,"isKeyWindow")||objj_msgSend(_ee,"becomesKeyOnlyIfNeeded")&&!objj_msgSend(_leftMouseDownView,"needsPanelToBecomeKey")){
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_ed,_e6);
}else{
objj_msgSend(_e4,"makeKeyAndOrderFront:",_e4);
if(objj_msgSend(_leftMouseDownView,"acceptsFirstMouse:",_e6)){
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_ed,_e6);
}
}
break;
case CPLeftMouseDragged:
case CPRightMouseDragged:
if(!_leftMouseDownView){
return objj_msgSend(objj_msgSend(_windowView,"hitTest:",_e8),"mouseDragged:",_e6);
}
var _ed;
if(_e7==CPRightMouseDragged){
_ed=sel_getUid("rightMouseDragged:");
if(!objj_msgSend(_leftMouseDownView,"respondsToSelector:",_ed)){
_ed=nil;
}
}
if(!_ed){
_ed=sel_getUid("mouseDragged:");
}
return objj_msgSend(_leftMouseDownView,"performSelector:withObject:",_ed,_e6);
case CPMouseMoved:
if(!_acceptsMouseMovedEvents){
return;
}
if(!_mouseEnteredStack){
_mouseEnteredStack=[];
}
var _ef=objj_msgSend(_windowView,"hitTest:",_e8);
if(objj_msgSend(_mouseEnteredStack,"count")&&objj_msgSend(_mouseEnteredStack,"lastObject")===_ef){
return objj_msgSend(_ef,"mouseMoved:",_e6);
}
var _f0=_ef,_f1=[];
while(_f0){
_f1.unshift(_f0);
_f0=objj_msgSend(_f0,"superview");
}
var _f2=MIN(_mouseEnteredStack.length,_f1.length);
while(_f2--){
if(_mouseEnteredStack[_f2]===_f1[_f2]){
break;
}
}
var _f3=_f2+1,_f4=_mouseEnteredStack.length;
if(_f3<_f4){
var _f5=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPMouseExited,_e8,objj_msgSend(_e6,"modifierFlags"),objj_msgSend(_e6,"timestamp"),_windowNumber,nil,-1,1,0);
for(;_f3<_f4;++_f3){
objj_msgSend(_mouseEnteredStack[_f3],"mouseExited:",_f5);
}
}
_f3=_f2+1;
_f4=_f1.length;
if(_f3<_f4){
var _f5=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPMouseEntered,_e8,objj_msgSend(_e6,"modifierFlags"),objj_msgSend(_e6,"timestamp"),_windowNumber,nil,-1,1,0);
for(;_f3<_f4;++_f3){
objj_msgSend(_f1[_f3],"mouseEntered:",_f5);
}
}
_mouseEnteredStack=_f1;
objj_msgSend(_ef,"mouseMoved:",_e6);
}
}
}),new objj_method(sel_getUid("windowNumber"),function(_f6,_f7){
with(_f6){
return _windowNumber;
}
}),new objj_method(sel_getUid("becomeKeyWindow"),function(_f8,_f9){
with(_f8){
CPApp._keyWindow=_f8;
if(_firstResponder!==_f8&&objj_msgSend(_firstResponder,"respondsToSelector:",sel_getUid("becomeKeyWindow"))){
objj_msgSend(_firstResponder,"becomeKeyWindow");
}
objj_msgSend(_f8,"_setupFirstResponder");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidBecomeKeyNotification,_f8);
}
}),new objj_method(sel_getUid("canBecomeKeyWindow"),function(_fa,_fb){
with(_fa){
return YES;
}
}),new objj_method(sel_getUid("isKeyWindow"),function(_fc,_fd){
with(_fc){
return objj_msgSend(CPApp,"keyWindow")==_fc;
}
}),new objj_method(sel_getUid("makeKeyAndOrderFront:"),function(_fe,_ff,_100){
with(_fe){
objj_msgSend(_fe,"orderFront:",_fe);
objj_msgSend(_fe,"makeKeyWindow");
objj_msgSend(_fe,"makeMainWindow");
}
}),new objj_method(sel_getUid("makeKeyWindow"),function(self,_101){
with(self){
if(objj_msgSend(CPApp,"keyWindow")===self||!objj_msgSend(self,"canBecomeKeyWindow")){
return;
}
objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"resignKeyWindow");
objj_msgSend(self,"becomeKeyWindow");
}
}),new objj_method(sel_getUid("resignKeyWindow"),function(self,_102){
with(self){
if(_firstResponder!==self&&objj_msgSend(_firstResponder,"respondsToSelector:",sel_getUid("resignKeyWindow"))){
objj_msgSend(_firstResponder,"resignKeyWindow");
}
if(CPApp._keyWindow===self){
CPApp._keyWindow=nil;
}
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResignKeyNotification,self);
}
}),new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"),function(self,_103,_104,_105,_106,_107,_108,_109,_10a){
with(self){
objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:",_104,self,objj_msgSend(self,"convertBaseToGlobal:",_105),_106,_107,_108,_109,_10a);
}
}),new objj_method(sel_getUid("_noteRegisteredDraggedTypes:"),function(self,_10b,_10c){
with(self){
if(!_10c){
return;
}
if(!_inclusiveRegisteredDraggedTypes){
_inclusiveRegisteredDraggedTypes=objj_msgSend(CPCountedSet,"set");
}
objj_msgSend(_inclusiveRegisteredDraggedTypes,"unionSet:",_10c);
}
}),new objj_method(sel_getUid("_noteUnregisteredDraggedTypes:"),function(self,_10d,_10e){
with(self){
if(!_10e){
return;
}
objj_msgSend(_inclusiveRegisteredDraggedTypes,"minusSet:",_10e);
if(objj_msgSend(_inclusiveRegisteredDraggedTypes,"count")===0){
_inclusiveRegisteredDraggedTypes=nil;
}
}
}),new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"),function(self,_10f,_110,_111,_112,_113,_114,_115,_116){
with(self){
objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:",_110,self,objj_msgSend(self,"convertBaseToGlobal:",_111),_112,_113,_114,_115,_116);
}
}),new objj_method(sel_getUid("registerForDraggedTypes:"),function(self,_117,_118){
with(self){
if(!_118){
return;
}
objj_msgSend(self,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
objj_msgSend(_registeredDraggedTypes,"addObjectsFromArray:",_118);
objj_msgSend(self,"_noteRegisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypesArray=nil;
}
}),new objj_method(sel_getUid("registeredDraggedTypes"),function(self,_119){
with(self){
if(!_registeredDraggedTypesArray){
_registeredDraggedTypesArray=objj_msgSend(_registeredDraggedTypes,"allObjects");
}
return _registeredDraggedTypesArray;
}
}),new objj_method(sel_getUid("unregisterDraggedTypes"),function(self,_11a){
with(self){
objj_msgSend(self,"_noteUnregisteredDraggedTypes:",_registeredDraggedTypes);
_registeredDraggedTypes=objj_msgSend(CPSet,"set");
_registeredDraggedTypesArray=[];
}
}),new objj_method(sel_getUid("setDocumentEdited:"),function(self,_11b,_11c){
with(self){
if(_isDocumentEdited==_11c){
return;
}
_isDocumentEdited=_11c;
objj_msgSend(CPMenu,"_setMenuBarIconImageAlphaValue:",_isDocumentEdited?0.5:1);
objj_msgSend(_windowView,"setDocumentEdited:",_11c);
}
}),new objj_method(sel_getUid("isDocumentEdited"),function(self,_11d){
with(self){
return _isDocumentEdited;
}
}),new objj_method(sel_getUid("setDocumentSaving:"),function(self,_11e,_11f){
with(self){
if(_isDocumentSaving==_11f){
return;
}
_isDocumentSaving=_11f;
objj_msgSend(self,"_synchronizeSaveMenuWithDocumentSaving");
objj_msgSend(_windowView,"windowDidChangeDocumentSaving");
}
}),new objj_method(sel_getUid("isDocumentSaving"),function(self,_120){
with(self){
return _isDocumentSaving;
}
}),new objj_method(sel_getUid("_synchronizeSaveMenuWithDocumentSaving"),function(self,_121){
with(self){
if(!objj_msgSend(self,"isMainWindow")){
return;
}
var _122=objj_msgSend(CPApp,"mainMenu"),_123=objj_msgSend(_122,"indexOfItemWithTitle:",_isDocumentSaving?"Save":"Saving...");
if(_123==CPNotFound){
return;
}
var item=objj_msgSend(_122,"itemAtIndex:",_123);
if(_isDocumentSaving){
_7=objj_msgSend(item,"image");
objj_msgSend(item,"setTitle:","Saving...");
objj_msgSend(item,"setImage:",_8);
objj_msgSend(item,"setEnabled:",NO);
}else{
objj_msgSend(item,"setTitle:","Save");
objj_msgSend(item,"setImage:",_7);
objj_msgSend(item,"setEnabled:",YES);
}
}
}),new objj_method(sel_getUid("performMiniaturize:"),function(self,_124,_125){
with(self){
objj_msgSend(self,"miniaturize:",_125);
}
}),new objj_method(sel_getUid("miniaturize:"),function(self,_126,_127){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillMiniaturizeNotification,self);
objj_msgSend(objj_msgSend(self,"platformWindow"),"miniaturize:",_127);
objj_msgSend(self,"_updateMainAndKeyWindows");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidMiniaturizeNotification,self);
_isMiniaturized=YES;
}
}),new objj_method(sel_getUid("deminiaturize:"),function(self,_128,_129){
with(self){
objj_msgSend(objj_msgSend(self,"platformWindow"),"deminiaturize:",_129);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidDeminiaturizeNotification,self);
_isMiniaturized=NO;
}
}),new objj_method(sel_getUid("isMiniaturized"),function(self,_12a){
with(self){
return _isMiniaturized;
}
}),new objj_method(sel_getUid("performClose:"),function(self,_12b,_12c){
with(self){
if(!(_styleMask&CPClosableWindowMask)){
return;
}
if(objj_msgSend(self,"isFullBridge")){
var _12d=objj_msgSend(CPApp,"currentEvent");
if(objj_msgSend(_12d,"type")===CPKeyDown&&objj_msgSend(_12d,"characters")==="w"&&(objj_msgSend(_12d,"modifierFlags")&CPPlatformActionKeyMask)){
objj_msgSend(objj_msgSend(self,"platformWindow"),"_propagateCurrentDOMEvent:",YES);
return;
}
}
if(objj_msgSend(_delegate,"respondsToSelector:",sel_getUid("windowShouldClose:"))){
if(!objj_msgSend(_delegate,"windowShouldClose:",self)){
return;
}
}else{
if(objj_msgSend(self,"respondsToSelector:",sel_getUid("windowShouldClose:"))&&!objj_msgSend(self,"windowShouldClose:",self)){
return;
}
}
var _12e=objj_msgSend(_windowController,"documents");
if(objj_msgSend(_12e,"count")){
var _12f=objj_msgSend(_12e,"indexOfObject:",objj_msgSend(_windowController,"document"));
objj_msgSend(_12e[_12f],"shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:",_windowController,self,sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),{documents:objj_msgSend(_12e,"copy"),visited:0,index:_12f});
}else{
objj_msgSend(self,"close");
}
}
}),new objj_method(sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),function(self,_130,_131,_132,_133){
with(self){
if(_132){
var _134=objj_msgSend(self,"windowController"),_135=_133.documents,_136=objj_msgSend(_135,"count"),_137=++_133.visited,_138=++_133.index%_136;
objj_msgSend(_131,"removeWindowController:",_134);
if(_137<_136){
objj_msgSend(_134,"setDocument:",_135[_138]);
objj_msgSend(_135[_138],"shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:",_windowController,self,sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"),_133);
}else{
objj_msgSend(self,"close");
}
}
}
}),new objj_method(sel_getUid("close"),function(self,_139){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillCloseNotification,self);
objj_msgSend(self,"orderOut:",nil);
}
}),new objj_method(sel_getUid("isMainWindow"),function(self,_13a){
with(self){
return objj_msgSend(CPApp,"mainWindow")===self;
}
}),new objj_method(sel_getUid("canBecomeMainWindow"),function(self,_13b){
with(self){
if(objj_msgSend(self,"isVisible")){
return YES;
}
return NO;
}
}),new objj_method(sel_getUid("makeMainWindow"),function(self,_13c){
with(self){
if(objj_msgSend(CPApp,"mainWindow")===self||!objj_msgSend(self,"canBecomeMainWindow")){
return;
}
objj_msgSend(objj_msgSend(CPApp,"mainWindow"),"resignMainWindow");
objj_msgSend(self,"becomeMainWindow");
}
}),new objj_method(sel_getUid("becomeMainWindow"),function(self,_13d){
with(self){
CPApp._mainWindow=self;
objj_msgSend(self,"_synchronizeMenuBarTitleWithWindowTitle");
objj_msgSend(self,"_synchronizeSaveMenuWithDocumentSaving");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidBecomeMainNotification,self);
}
}),new objj_method(sel_getUid("resignMainWindow"),function(self,_13e){
with(self){
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidResignMainNotification,self);
if(CPApp._mainWindow===self){
CPApp._mainWindow=nil;
}
}
}),new objj_method(sel_getUid("_updateMainAndKeyWindows"),function(self,_13f){
with(self){
var _140=objj_msgSend(CPApp,"orderedWindows"),_141=objj_msgSend(_140,"count");
if(objj_msgSend(self,"isKeyWindow")){
var _142=objj_msgSend(CPApp,"keyWindow");
objj_msgSend(self,"resignKeyWindow");
if(_142&&_142!==self&&objj_msgSend(_142,"canBecomeKeyWindow")){
objj_msgSend(_142,"makeKeyWindow");
}else{
var _143=objj_msgSend(CPApp,"mainMenu"),_144=objj_getClass("_CPMenuBarWindow"),_145;
for(var i=0;i<_141;i++){
var _146=_140[i];
if(objj_msgSend(_146,"isKindOfClass:",_144)){
_145=_146;
}
if(_146===self||_146===_145){
continue;
}
if(objj_msgSend(_146,"isVisible")&&objj_msgSend(_146,"canBecomeKeyWindow")){
objj_msgSend(_146,"makeKeyWindow");
break;
}
}
if(!objj_msgSend(CPApp,"keyWindow")){
objj_msgSend(_145,"makeKeyWindow");
}
}
}
if(objj_msgSend(self,"isMainWindow")){
var _147=objj_msgSend(CPApp,"mainWindow");
objj_msgSend(self,"resignMainWindow");
if(_147&&_147!==self&&objj_msgSend(_147,"canBecomeMainWindow")){
objj_msgSend(_147,"makeMainWindow");
}else{
var _143=objj_msgSend(CPApp,"mainMenu"),_144=objj_getClass("_CPMenuBarWindow"),_145;
for(var i=0;i<_141;i++){
var _146=_140[i];
if(objj_msgSend(_146,"isKindOfClass:",_144)){
_145=_146;
}
if(_146===self||_146===_145){
continue;
}
if(objj_msgSend(_146,"isVisible")&&objj_msgSend(_146,"canBecomeMainWindow")){
objj_msgSend(_146,"makeMainWindow");
break;
}
}
}
}
}
}),new objj_method(sel_getUid("toolbar"),function(self,_148){
with(self){
return _toolbar;
}
}),new objj_method(sel_getUid("setToolbar:"),function(self,_149,_14a){
with(self){
if(_toolbar===_14a){
return;
}
objj_msgSend(objj_msgSend(_14a,"_window"),"setToolbar:",nil);
objj_msgSend(_toolbar,"_setWindow:",nil);
_toolbar=_14a;
objj_msgSend(_toolbar,"_setWindow:",self);
objj_msgSend(self,"_noteToolbarChanged");
}
}),new objj_method(sel_getUid("toggleToolbarShown:"),function(self,_14b,_14c){
with(self){
var _14d=objj_msgSend(self,"toolbar");
objj_msgSend(_14d,"setVisible:",!objj_msgSend(_14d,"isVisible"));
}
}),new objj_method(sel_getUid("_noteToolbarChanged"),function(self,_14e){
with(self){
var _14f=CGRectMakeCopy(objj_msgSend(self,"frame")),_150;
objj_msgSend(_windowView,"noteToolbarChanged");
if(_isFullPlatformWindow){
_150=objj_msgSend(_platformWindow,"visibleFrame");
}else{
_150=CGRectMakeCopy(objj_msgSend(self,"frame"));
_150.origin=_14f.origin;
}
objj_msgSend(self,"setFrame:",_150);
}
}),new objj_method(sel_getUid("_setFrame:delegate:duration:curve:"),function(self,_151,_152,_153,_154,_155){
with(self){
objj_msgSend(_frameAnimation,"stopAnimation");
_frameAnimation=objj_msgSend(objj_msgSend(_CPWindowFrameAnimation,"alloc"),"initWithWindow:targetFrame:",self,_152);
objj_msgSend(_frameAnimation,"setDelegate:",_153);
objj_msgSend(_frameAnimation,"setAnimationCurve:",_155);
objj_msgSend(_frameAnimation,"setDuration:",_154);
objj_msgSend(_frameAnimation,"startAnimation");
}
}),new objj_method(sel_getUid("animationResizeTime:"),function(self,_156,_157){
with(self){
return _9;
}
}),new objj_method(sel_getUid("_setAttachedSheetFrameOrigin"),function(self,_158){
with(self){
var _159=objj_msgSend(self,"attachedSheet");
var _15a=objj_msgSend(objj_msgSend(self,"contentView"),"frame"),_15b=CGRectMakeCopy(objj_msgSend(_159,"frame"));
_15b.origin.y=CGRectGetMinY(_frame)+CGRectGetMinY(_15a);
_15b.origin.x=CGRectGetMinX(_frame)+FLOOR((CGRectGetWidth(_frame)-CGRectGetWidth(_15b))/2);
objj_msgSend(_159,"setFrame:display:animate:",_15b,YES,NO);
}
}),new objj_method(sel_getUid("_attachSheet:modalDelegate:didEndSelector:contextInfo:"),function(self,_15c,_15d,_15e,_15f,_160){
with(self){
var _161=objj_msgSend(_15d,"frame");
_sheetContext={"sheet":_15d,"modalDelegate":_15e,"endSelector":_15f,"contextInfo":_160,"frame":CGRectMakeCopy(_161),"returnCode":-1,"opened":NO};
objj_msgSend(self,"_attachSheetWindow:",_15d);
}
}),new objj_method(sel_getUid("_attachSheetWindow:"),function(self,_162,_163){
with(self){
var _164=objj_msgSend(_163,"frame"),_165=objj_msgSend(self,"frame"),_166=objj_msgSend(_163,"contentView");
objj_msgSend(self,"_setUpMasksForView:",_166);
_163._isSheet=YES;
_163._parentView=self;
var _167=_165.origin.x+FLOOR((_165.size.width-_164.size.width)/2),_168=_165.origin.y+objj_msgSend(objj_msgSend(self,"contentView"),"frame").origin.y,_169=CGRectMake(_167,_168,_164.size.width,0),_16a=CGRectMake(_167,_168,_164.size.width,_164.size.height);
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowWillBeginSheetNotification,self);
objj_msgSend(CPApp,"runModalForWindow:",_163);
objj_msgSend(_163,"orderFront:",self);
objj_msgSend(_163,"setFrame:display:animate:",_169,YES,NO);
_sheetContext["opened"]=YES;
objj_msgSend(_163,"_setFrame:delegate:duration:curve:",_16a,self,objj_msgSend(self,"animationResizeTime:",_16a),CPAnimationEaseOut);
objj_msgSend(_163,"becomeKeyWindow");
}
}),new objj_method(sel_getUid("_detachSheetWindow"),function(self,_16b){
with(self){
var _16c=objj_msgSend(self,"attachedSheet"),_16d=objj_msgSend(_16c,"frame"),_16e=CGRectMakeCopy(_16d);
_16e.size.height=0;
_sheetContext["frame"]=_16d;
var _16f=objj_msgSend(_16c,"contentView");
objj_msgSend(self,"_setUpMasksForView:",_16f);
_sheetContext["opened"]=NO;
objj_msgSend(_16c,"_setFrame:delegate:duration:curve:",_16e,self,objj_msgSend(self,"animationResizeTime:",_16e),CPAnimationEaseIn);
}
}),new objj_method(sel_getUid("animationDidEnd:"),function(self,_170,anim){
with(self){
var _171=_sheetContext["sheet"];
if(anim._window!=_171){
return;
}
var _172=objj_msgSend(_171,"contentView");
if(_sheetContext["opened"]===YES){
objj_msgSend(self,"_restoreMasksForView:",_172);
return;
}
objj_msgSend(CPApp,"stopModal");
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPWindowDidEndSheetNotification,self);
objj_msgSend(_171,"orderOut:",self);
var _173=_sheetContext["frame"];
objj_msgSend(_171,"setFrame:",_173);
objj_msgSend(self,"_restoreMasksForView:",_172);
var _174=_sheetContext["modalDelegate"],_175=_sheetContext["endSelector"],_176=_sheetContext["returnCode"],_177=_sheetContext["contextInfo"];
_sheetContext=nil;
_171._parentView=nil;
if(_174!=nil&&_175!=nil){
objj_msgSend(_174,_175,_171,_176,_177);
}
}
}),new objj_method(sel_getUid("_setUpMasksForView:"),function(self,_178,_179){
with(self){
var _17a=objj_msgSend(_179,"subviews");
objj_msgSend(_17a,"addObject:",_179);
for(var i=0,_17b=objj_msgSend(_17a,"count");i<_17b;i++){
var view=objj_msgSend(_17a,"objectAtIndex:",i),mask=objj_msgSend(view,"autoresizingMask"),_17c=(mask&CPViewMinYMargin)?128:CPViewMinYMargin;
objj_msgSend(view,"setAutoresizingMask:",(mask|_17c));
}
}
}),new objj_method(sel_getUid("_restoreMasksForView:"),function(self,_17d,_17e){
with(self){
var _17f=objj_msgSend(_17e,"subviews");
objj_msgSend(_17f,"addObject:",_17e);
for(var i=0,_180=objj_msgSend(_17f,"count");i<_180;i++){
var view=objj_msgSend(_17f,"objectAtIndex:",i),mask=objj_msgSend(view,"autoresizingMask"),_181=(mask&128)?128:CPViewMinYMargin;
objj_msgSend(view,"setAutoresizingMask:",(mask&(~_181)));
}
}
}),new objj_method(sel_getUid("attachedSheet"),function(self,_182){
with(self){
if(_sheetContext===nil){
return nil;
}
return _sheetContext["sheet"];
}
}),new objj_method(sel_getUid("isSheet"),function(self,_183){
with(self){
return _isSheet;
}
}),new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"),function(self,_184){
with(self){
return NO;
}
}),new objj_method(sel_getUid("worksWhenModal"),function(self,_185){
with(self){
return NO;
}
}),new objj_method(sel_getUid("performKeyEquivalent:"),function(self,_186,_187){
with(self){
return objj_msgSend(objj_msgSend(self,"contentView"),"performKeyEquivalent:",_187);
}
}),new objj_method(sel_getUid("keyDown:"),function(self,_188,_189){
with(self){
if(objj_msgSend(_189,"_couldBeKeyEquivalent")&&objj_msgSend(self,"performKeyEquivalent:",_189)){
return;
}
if(!objj_msgSend(self,"_processKeyboardUIKey:",_189)){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("CPWindow").super_class},"keyDown:",_189);
}
}
}),new objj_method(sel_getUid("_processKeyboardUIKey:"),function(self,_18a,_18b){
with(self){
var _18c=objj_msgSend(_18b,"charactersIgnoringModifiers");
if(!objj_msgSend(_a,"containsObject:",_18c)){
return NO;
}
var _18d=objj_msgSend(CPKeyBinding,"selectorsForKey:modifierFlags:",_18c,0);
if(objj_msgSend(_18d,"count")<=0){
return NO;
}
if(_18c!==CPEscapeFunctionKey){
var _18e=objj_msgSend(_18d,"objectAtIndex:",0);
return objj_msgSend(objj_msgSend(self,"firstResponder"),"tryToPerform:with:",_18e,self);
}else{
objj_msgSend(objj_msgSend(self,"firstResponder"),"doCommandBySelector:",sel_getUid("complete:"));
}
return NO;
}
}),new objj_method(sel_getUid("_dirtyKeyViewLoop"),function(self,_18f){
with(self){
if(_autorecalculatesKeyViewLoop){
_keyViewLoopIsDirty=YES;
}
}
}),new objj_method(sel_getUid("_hasKeyViewLoop"),function(self,_190){
with(self){
var _191=_192(self),_193=objj_msgSend(_191,"count");
while(_193--){
if(objj_msgSend(_191[_193],"nextKeyView")){
return YES;
}
}
return NO;
}
}),new objj_method(sel_getUid("recalculateKeyViewLoop"),function(self,_194){
with(self){
var _195=_192(self);
objj_msgSend(_195,"sortUsingFunction:context:",_196,nil);
for(var _197=0,_198=objj_msgSend(_195,"count");_197<_198;++_197){
objj_msgSend(_195[_197],"setNextKeyView:",_195[(_197+1)%_198]);
}
_keyViewLoopIsDirty=NO;
}
}),new objj_method(sel_getUid("setAutorecalculatesKeyViewLoop:"),function(self,_199,_19a){
with(self){
if(_autorecalculatesKeyViewLoop===_19a){
return;
}
_autorecalculatesKeyViewLoop=_19a;
if(_autorecalculatesKeyViewLoop){
objj_msgSend(self,"_dirtyKeyViewLoop");
}
}
}),new objj_method(sel_getUid("autorecalculatesKeyViewLoop"),function(self,_19b){
with(self){
return _autorecalculatesKeyViewLoop;
}
}),new objj_method(sel_getUid("selectNextKeyView:"),function(self,_19c,_19d){
with(self){
if(_keyViewLoopIsDirty&&objj_msgSend(self,"autorecalculatesKeyViewLoop")){
objj_msgSend(self,"recalculateKeyViewLoop");
}
var _19e=nil;
if(objj_msgSend(_firstResponder,"isKindOfClass:",objj_msgSend(CPView,"class"))){
_19e=objj_msgSend(_firstResponder,"nextValidKeyView");
}
if(!_19e){
var _19f=objj_msgSend(self,"initialFirstResponder");
if(objj_msgSend(_19f,"acceptsFirstResponder")){
_19e=_19f;
}else{
_19e=objj_msgSend(_19f,"nextValidKeyView");
}
}
objj_msgSend(self,"makeFirstResponder:",_19e);
}
}),new objj_method(sel_getUid("selectPreviousKeyView:"),function(self,_1a0,_1a1){
with(self){
if(_keyViewLoopIsDirty&&objj_msgSend(self,"autorecalculatesKeyViewLoop")){
objj_msgSend(self,"recalculateKeyViewLoop");
}
var _1a2=nil;
if(objj_msgSend(_firstResponder,"isKindOfClass:",objj_msgSend(CPView,"class"))){
_1a2=objj_msgSend(_firstResponder,"previousValidKeyView");
}
if(!_1a2){
var _1a3=objj_msgSend(self,"initialFirstResponder");
if(objj_msgSend(_1a3,"acceptsFirstResponder")){
_1a2=_1a3;
}else{
_1a2=objj_msgSend(_1a3,"previousValidKeyView");
}
}
objj_msgSend(self,"makeFirstResponder:",_1a2);
}
}),new objj_method(sel_getUid("selectKeyViewFollowingView:"),function(self,_1a4,_1a5){
with(self){
if(_keyViewLoopIsDirty&&objj_msgSend(self,"autorecalculatesKeyViewLoop")){
objj_msgSend(self,"recalculateKeyViewLoop");
}
var _1a6=objj_msgSend(_1a5,"nextValidKeyView");
if(objj_msgSend(_1a6,"isKindOfClass:",objj_msgSend(CPView,"class"))){
objj_msgSend(self,"makeFirstResponder:",_1a6);
}
}
}),new objj_method(sel_getUid("selectKeyViewPrecedingView:"),function(self,_1a7,_1a8){
with(self){
if(_keyViewLoopIsDirty&&objj_msgSend(self,"autorecalculatesKeyViewLoop")){
objj_msgSend(self,"recalculateKeyViewLoop");
}
var _1a9=objj_msgSend(_1a8,"previousValidKeyView");
if(objj_msgSend(_1a9,"isKindOfClass:",objj_msgSend(CPView,"class"))){
objj_msgSend(self,"makeFirstResponder:",_1a9);
}
}
}),new objj_method(sel_getUid("setDefaultButtonCell:"),function(self,_1aa,_1ab){
with(self){
objj_msgSend(self,"setDefaultButton:",_1ab);
}
}),new objj_method(sel_getUid("defaultButtonCell"),function(self,_1ac){
with(self){
return objj_msgSend(self,"defaultButton");
}
}),new objj_method(sel_getUid("setDefaultButton:"),function(self,_1ad,_1ae){
with(self){
if(_defaultButton===_1ae){
return;
}
if(objj_msgSend(_defaultButton,"keyEquivalent")===CPCarriageReturnCharacter){
objj_msgSend(_defaultButton,"setKeyEquivalent:",nil);
}
_defaultButton=_1ae;
if(objj_msgSend(_defaultButton,"keyEquivalent")!==CPCarriageReturnCharacter){
objj_msgSend(_defaultButton,"setKeyEquivalent:",CPCarriageReturnCharacter);
}
}
}),new objj_method(sel_getUid("defaultButton"),function(self,_1af){
with(self){
return _defaultButton;
}
}),new objj_method(sel_getUid("enableKeyEquivalentForDefaultButton"),function(self,_1b0){
with(self){
_defaultButtonEnabled=YES;
}
}),new objj_method(sel_getUid("enableKeyEquivalentForDefaultButtonCell"),function(self,_1b1){
with(self){
objj_msgSend(self,"enableKeyEquivalentForDefaultButton");
}
}),new objj_method(sel_getUid("disableKeyEquivalentForDefaultButton"),function(self,_1b2){
with(self){
_defaultButtonEnabled=NO;
}
}),new objj_method(sel_getUid("disableKeyEquivalentForDefaultButtonCell"),function(self,_1b3){
with(self){
objj_msgSend(self,"disableKeyEquivalentForDefaultButton");
}
})]);
class_addMethods(_c,[new objj_method(sel_getUid("initialize"),function(self,_1b4){
with(self){
if(self!=objj_msgSend(CPWindow,"class")){
return;
}
var _1b5=objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPWindow,"class"));
_8=objj_msgSend(objj_msgSend(CPImage,"alloc"),"initWithContentsOfFile:size:",objj_msgSend(_1b5,"pathForResource:","CPProgressIndicator/CPProgressIndicatorSpinningStyleRegular.gif"),CGSizeMake(16,16));
}
}),new objj_method(sel_getUid("_windowViewClassForStyleMask:"),function(self,_1b6,_1b7){
with(self){
if(_1b7&CPHUDBackgroundWindowMask){
return _CPHUDWindowView;
}else{
if(_1b7===CPBorderlessWindowMask){
return _CPBorderlessWindowView;
}else{
if(_1b7&CPDocModalWindowMask){
return _CPDocModalWindowView;
}
}
}
return _CPStandardWindowView;
}
}),new objj_method(sel_getUid("_windowViewClassForFullPlatformWindowStyleMask:"),function(self,_1b8,_1b9){
with(self){
return _CPBorderlessBridgeWindowView;
}
}),new objj_method(sel_getUid("frameRectForContentRect:styleMask:"),function(self,_1ba,_1bb,_1bc){
with(self){
return objj_msgSend(objj_msgSend(objj_msgSend(self,"class"),"_windowViewClassForStyleMask:",_1bc),"frameRectForContentRect:",_1bb);
}
})]);
var _192=function(_1bd){
var _1be=objj_msgSend(CPArray,"arrayWithObject:",objj_msgSend(_1bd,"contentView"));
objj_msgSend(_1be,"addObjectsFromArray:",objj_msgSend(objj_msgSend(_1bd,"contentView"),"subviews"));
for(var _1bf=0;_1bf<_1be.length;++_1bf){
_1be=_1be.concat(objj_msgSend(_1be[_1bf],"subviews"));
}
return _1be;
};
var _196=function(lhs,rhs,_1c0){
var _1c1=objj_msgSend(lhs,"convertRect:toView:",objj_msgSend(lhs,"bounds"),nil),_1c2=objj_msgSend(rhs,"convertRect:toView:",objj_msgSend(rhs,"bounds"),nil),lhsY=(_1c1.origin.y),rhsY=(_1c2.origin.y),lhsX=(_1c1.origin.x),rhsX=(_1c2.origin.x),_1c3=MIN((_1c1.origin.y+_1c1.size.height),(_1c2.origin.y+_1c2.size.height))-MAX(lhsY,rhsY);
if(_1c3>0){
if(lhsX<rhsX){
return CPOrderedAscending;
}
if(lhsX===rhsX){
return CPOrderedSame;
}
return CPOrderedDescending;
}
if(lhsY<rhsY){
return CPOrderedAscending;
}
if(lhsY===rhsY){
return CPOrderedSame;
}
return CPOrderedDescending;
};
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("_synchronizeMenuBarTitleWithWindowTitle"),function(self,_1c4){
with(self){
if(!objj_msgSend(_windowController,"document")||!objj_msgSend(self,"isMainWindow")){
return;
}
objj_msgSend(CPMenu,"setMenuBarTitle:",_title);
}
})]);
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("resizeWithOldPlatformWindowSize:"),function(self,_1c5,_1c6){
with(self){
if(objj_msgSend(self,"isFullPlatformWindow")){
return objj_msgSend(self,"setFrame:",objj_msgSend(_platformWindow,"visibleFrame"));
}
if(_autoresizingMask==CPWindowNotSizable){
return;
}
var _1c7=objj_msgSend(_platformWindow,"contentBounds"),_1c8=CGRectMakeCopy(_frame),dX=(CGRectGetWidth(_1c7)-_1c6.width)/(((_autoresizingMask&CPWindowMinXMargin)?1:0)+(_autoresizingMask&CPWindowWidthSizable?1:0)+(_autoresizingMask&CPWindowMaxXMargin?1:0)),dY=(CGRectGetHeight(_1c7)-_1c6.height)/((_autoresizingMask&CPWindowMinYMargin?1:0)+(_autoresizingMask&CPWindowHeightSizable?1:0)+(_autoresizingMask&CPWindowMaxYMargin?1:0));
if(_autoresizingMask&CPWindowMinXMargin){
_1c8.origin.x+=dX;
}
if(_autoresizingMask&CPWindowWidthSizable){
_1c8.size.width+=dX;
}
if(_autoresizingMask&CPWindowMinYMargin){
_1c8.origin.y+=dY;
}
if(_autoresizingMask&CPWindowHeightSizable){
_1c8.size.height+=dY;
}
objj_msgSend(self,"setFrame:",_1c8);
}
}),new objj_method(sel_getUid("setAutoresizingMask:"),function(self,_1c9,_1ca){
with(self){
_autoresizingMask=_1ca;
}
}),new objj_method(sel_getUid("autoresizingMask"),function(self,_1cb){
with(self){
return _autoresizingMask;
}
}),new objj_method(sel_getUid("convertBaseToGlobal:"),function(self,_1cc,_1cd){
with(self){
return objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(self,"convertBaseToPlatformWindow:",_1cd):objj_msgSend(self,"convertBaseToScreen:",_1cd);
}
}),new objj_method(sel_getUid("convertGlobalToBase:"),function(self,_1ce,_1cf){
with(self){
return objj_msgSend(CPPlatform,"isBrowser")?objj_msgSend(self,"convertPlatformWindowToBase:",_1cf):objj_msgSend(self,"convertScreenToBase:",_1cf);
}
}),new objj_method(sel_getUid("convertBaseToPlatformWindow:"),function(self,_1d0,_1d1){
with(self){
if(objj_msgSend(self,"_sharesChromeWithPlatformWindow")){
return {x:_1d1.x,y:_1d1.y};
}
var _1d2=objj_msgSend(self,"frame").origin;
return {x:_1d1.x+_1d2.x,y:_1d1.y+_1d2.y};
}
}),new objj_method(sel_getUid("convertPlatformWindowToBase:"),function(self,_1d3,_1d4){
with(self){
if(objj_msgSend(self,"_sharesChromeWithPlatformWindow")){
return {x:_1d4.x,y:_1d4.y};
}
var _1d5=objj_msgSend(self,"frame").origin;
return {x:_1d4.x-_1d5.x,y:_1d4.y-_1d5.y};
}
}),new objj_method(sel_getUid("convertScreenToBase:"),function(self,_1d6,_1d7){
with(self){
return objj_msgSend(self,"convertPlatformWindowToBase:",objj_msgSend(_platformWindow,"convertScreenToBase:",_1d7));
}
}),new objj_method(sel_getUid("convertBaseToScreen:"),function(self,_1d8,_1d9){
with(self){
return objj_msgSend(_platformWindow,"convertBaseToScreen:",objj_msgSend(self,"convertBaseToPlatformWindow:",_1d9));
}
}),new objj_method(sel_getUid("_setSharesChromeWithPlatformWindow:"),function(self,_1da,_1db){
with(self){
if(_1db&&objj_msgSend(CPPlatform,"isBrowser")){
return;
}
_sharesChromeWithPlatformWindow=_1db;
objj_msgSend(self,"_updateShadow");
}
}),new objj_method(sel_getUid("_sharesChromeWithPlatformWindow"),function(self,_1dc){
with(self){
return _sharesChromeWithPlatformWindow;
}
}),new objj_method(sel_getUid("undoManager"),function(self,_1dd){
with(self){
if(_undoManager){
return _undoManager;
}
var _1de=objj_msgSend(objj_msgSend(_windowController,"document"),"undoManager");
if(_1de){
return _1de;
}
if(_delegateRespondsToWindowWillReturnUndoManagerSelector){
return objj_msgSend(_delegate,"windowWillReturnUndoManager:",self);
}
if(!_undoManager){
_undoManager=objj_msgSend(objj_msgSend(CPUndoManager,"alloc"),"init");
}
return _undoManager;
}
}),new objj_method(sel_getUid("undo:"),function(self,_1df,_1e0){
with(self){
objj_msgSend(objj_msgSend(self,"undoManager"),"undo");
}
}),new objj_method(sel_getUid("redo:"),function(self,_1e1,_1e2){
with(self){
objj_msgSend(objj_msgSend(self,"undoManager"),"redo");
}
}),new objj_method(sel_getUid("containsPoint:"),function(self,_1e3,_1e4){
with(self){
return CGRectContainsPoint(_frame,_1e4);
}
})]);
var _b=objj_getClass("CPWindow");
if(!_b){
throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
}
var _c=_b.isa;
class_addMethods(_b,[new objj_method(sel_getUid("setFullBridge:"),function(self,_1e5,_1e6){
with(self){
objj_msgSend(self,"setFullPlatformWindow:",_1e6);
}
}),new objj_method(sel_getUid("isFullBridge"),function(self,_1e7){
with(self){
return objj_msgSend(self,"isFullPlatformWindow");
}
}),new objj_method(sel_getUid("convertBaseToBridge:"),function(self,_1e8,_1e9){
with(self){
return objj_msgSend(self,"convertBaseToPlatformWindow:",_1e9);
}
}),new objj_method(sel_getUid("convertBridgeToBase:"),function(self,_1ea,_1eb){
with(self){
return objj_msgSend(self,"convertPlatformWindowToBase:",_1eb);
}
})]);
var _1ec=function(_1ed,_1ee,_1ef){
return _1ed+(_1ee-_1ed)*_1ef;
};
var _b=objj_allocateClassPair(CPAnimation,"_CPWindowFrameAnimation"),_c=_b.isa;
class_addIvars(_b,[new objj_ivar("_window"),new objj_ivar("_startFrame"),new objj_ivar("_targetFrame")]);
objj_registerClassPair(_b);
class_addMethods(_b,[new objj_method(sel_getUid("initWithWindow:targetFrame:"),function(self,_1f0,_1f1,_1f2){
with(self){
self=objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"initWithDuration:animationCurve:",objj_msgSend(_1f1,"animationResizeTime:",_1f2),CPAnimationLinear);
if(self){
_window=_1f1;
_targetFrame=CGRectMakeCopy(_1f2);
_startFrame=CGRectMakeCopy(objj_msgSend(_window,"frame"));
}
return self;
}
}),new objj_method(sel_getUid("startAnimation"),function(self,_1f3){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"startAnimation");
_window._isAnimating=YES;
}
}),new objj_method(sel_getUid("setCurrentProgress:"),function(self,_1f4,_1f5){
with(self){
objj_msgSendSuper({receiver:self,super_class:objj_getClass("_CPWindowFrameAnimation").super_class},"setCurrentProgress:",_1f5);
var _1f6=objj_msgSend(self,"currentValue");
if(_1f6==1){
_window._isAnimating=NO;
}
var _1f7=CGRectMake(_1ec(CGRectGetMinX(_startFrame),CGRectGetMinX(_targetFrame),_1f6),_1ec(CGRectGetMinY(_startFrame),CGRectGetMinY(_targetFrame),_1f6),_1ec(CGRectGetWidth(_startFrame),CGRectGetWidth(_targetFrame),_1f6),_1ec(CGRectGetHeight(_startFrame),CGRectGetHeight(_targetFrame),_1f6));
objj_msgSend(_window,"setFrame:display:animate:",_1f7,YES,NO);
}
})]);
_CPWindowFullPlatformWindowSessionMake=function(_1f8,_1f9,_1fa,_1fb){
return {windowView:_1f8,contentRect:_1f9,hasShadow:_1fa,level:_1fb};
};
CPStandardWindowShadowStyle=0;
CPMenuWindowShadowStyle=1;
CPPanelWindowShadowStyle=2;
CPCustomWindowShadowStyle=3;
objj_executeFile("_CPWindowView.j",YES);
objj_executeFile("_CPStandardWindowView.j",YES);
objj_executeFile("_CPDocModalWindowView.j",YES);
objj_executeFile("_CPToolTipWindowView.j",YES);
objj_executeFile("_CPHUDWindowView.j",YES);
objj_executeFile("_CPBorderlessWindowView.j",YES);
objj_executeFile("_CPBorderlessBridgeWindowView.j",YES);
objj_executeFile("_CPAttachedWindowView.j",YES);
objj_executeFile("CPDragServer.j",YES);
objj_executeFile("CPView.j",YES);
p;12;CPPlatform.jt;4077;@STATIC;1.0;I;21;Foundation/CPObject.jt;4032;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPBasePlatform"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_3,_4){
with(_3){
objj_msgSend(CPPlatformString,"bootstrap");
objj_msgSend(CPPlatformWindow,"setPrimaryPlatformWindow:",objj_msgSend(objj_msgSend(CPPlatformWindow,"alloc"),"_init"));
}
}),new objj_method(sel_getUid("isBrowser"),function(_5,_6){
with(_5){
return NO;
}
}),new objj_method(sel_getUid("supportsDragAndDrop"),function(_7,_8){
with(_7){
return NO;
}
}),new objj_method(sel_getUid("supportsNativeMainMenu"),function(_9,_a){
with(_9){
return NO;
}
}),new objj_method(sel_getUid("terminateApplication"),function(_b,_c){
with(_b){
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_d,_e,_f){
with(_d){
}
}),new objj_method(sel_getUid("deactivate"),function(_10,_11){
with(_10){
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_12,_13,_14){
with(_12){
}
}),new objj_method(sel_getUid("hide:"),function(_15,_16,_17){
with(_15){
}
})]);
if(typeof window["CPPlatformEnableHTMLDragAndDrop"]==="undefined"){
CPPlatformEnableHTMLDragAndDrop=NO;
}
CPPlatformDidClearBodyElementNotification="CPPlatformDidClearBodyElementNotification";
CPPlatformWillClearBodyElementNotification="CPPlatformWillClearBodyElementNotification";
var _18=NO,_19=nil,_1a=new RegExp("\\bcpdontremove\\b","g");
var _1=objj_allocateClassPair(CPBasePlatform,"CPPlatform"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("initialize"),function(_1b,_1c){
with(_1b){
if(_1b!==objj_msgSend(CPPlatform,"class")){
return;
}
_18=objj_msgSend(CPPlatform,"isBrowser");
if(document.documentElement){
document.documentElement.style.overflow="hidden";
}
if(objj_msgSend(CPPlatform,"isBrowser")){
window.onunload=function(){
objj_msgSend(CPApp,"terminate:",nil);
};
}
}
}),new objj_method(sel_getUid("isBrowser"),function(_1d,_1e){
with(_1d){
return typeof window.cpIsDesktop==="undefined";
}
}),new objj_method(sel_getUid("supportsDragAndDrop"),function(_1f,_20){
with(_1f){
return CPFeatureIsCompatible(CPHTMLDragAndDropFeature)&&(CPPlatformEnableHTMLDragAndDrop||!objj_msgSend(_1f,"isBrowser"));
}
}),new objj_method(sel_getUid("supportsNativeMainMenu"),function(_21,_22){
with(_21){
return (typeof window["cpSetMainMenu"]==="function");
}
}),new objj_method(sel_getUid("terminateApplication"),function(_23,_24){
with(_23){
if(typeof window["cpTerminate"]==="function"){
window.cpTerminate();
}
}
}),new objj_method(sel_getUid("activateIgnoringOtherApps:"),function(_25,_26,_27){
with(_25){
if(typeof window["cpActivateIgnoringOtherApps"]==="function"){
window.cpActivateIgnoringOtherApps(!!_27);
}
}
}),new objj_method(sel_getUid("deactivate"),function(_28,_29){
with(_28){
if(typeof window["cpDeactivate"]==="function"){
window.cpDeactivate();
}
}
}),new objj_method(sel_getUid("hideOtherApplications:"),function(_2a,_2b,_2c){
with(_2a){
if(typeof window["cpHideOtherApplications"]==="function"){
window.cpHideOtherApplications();
}
}
}),new objj_method(sel_getUid("hide:"),function(_2d,_2e,_2f){
with(_2d){
if(typeof window["cpHide"]==="function"){
window.cpHide();
}
}
}),new objj_method(sel_getUid("mainBodyElement"),function(_30,_31){
with(_30){
if(!_19){
_19=document.getElementById("cappuccino-body")||document.body;
}
return _19;
}
}),new objj_method(sel_getUid("initializeScreenIfNecessary"),function(_32,_33){
with(_32){
if(!_18){
return;
}
_18=NO;
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPPlatformWillClearBodyElementNotification,_32);
var _34=objj_msgSend(_32,"mainBodyElement");
var _35=_34.childNodes,_36=_35.length;
while(_36--){
var _37=_35[_36];
if(!_37.className||_37.className.match(_1a)===null){
_34.removeChild(_37);
}
}
_34.style.overflow="hidden";
objj_msgSend(objj_msgSend(CPNotificationCenter,"defaultCenter"),"postNotificationName:object:",CPPlatformDidClearBodyElementNotification,_32);
}
})]);
p;18;CPPlatformString.jt;4112;@STATIC;1.0;I;21;Foundation/CPObject.jt;4067;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPBasePlatformString"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_3,_4){
with(_3){
}
}),new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"),function(_5,_6,_7,_8,_9){
with(_5){
return {width:0,height:0};
}
})]);
var _a=nil,_b=nil,_c=nil,_d=nil,_e=nil,_f=nil,_10=nil,_11=nil;
var _1=objj_allocateClassPair(CPBasePlatformString,"CPPlatformString"),_2=_1.isa;
objj_registerClassPair(_1);
class_addMethods(_2,[new objj_method(sel_getUid("bootstrap"),function(_12,_13){
with(_12){
objj_msgSend(_12,"createDOMElements");
}
}),new objj_method(sel_getUid("createDOMElements"),function(_14,_15){
with(_14){
var _16;
_f=document.createElement("iframe");
_f.name="iframe_"+FLOOR(RAND()*10000);
_f.className="cpdontremove";
_16=_f.style;
_16.position="absolute";
_16.left="-100px";
_16.top="-100px";
_16.width="1px";
_16.height="1px";
_16.borderWidth="0px";
_16.overflow="hidden";
_16.zIndex=100000000000;
var _17=objj_msgSend(CPPlatform,"mainBodyElement");
_17.appendChild(_f);
_10=(_f.contentDocument||_f.contentWindow.document);
_10.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">"+"<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"><head></head><body></body></html>");
_10.close();
var _18=_10.createElement("div");
_18.style.position="absolute";
_18.style.width="100000px";
_10.body.appendChild(_18);
_b=_10.createElement("span");
_16=_b.style;
_16.position="absolute";
_16.visibility="visible";
_16.padding="0px";
_16.margin="0px";
_16.whiteSpace="pre";
_a=_10.createElement("span");
_16=_a.style;
_16.display="block";
_16.position="absolute";
_16.visibility="visible";
_16.padding="0px";
_16.margin="0px";
_16.width="1px";
_16.wordWrap="break-word";
try{
_16.whiteSpace="pre";
_16.whiteSpace="-o-pre-wrap";
_16.whiteSpace="-pre-wrap";
_16.whiteSpace="-moz-pre-wrap";
_16.whiteSpace="pre-wrap";
}
catch(e){
_16.whiteSpace="pre";
}
_18.appendChild(_b);
_18.appendChild(_a);
}
}),new objj_method(sel_getUid("createDOMMetricsElements"),function(_19,_1a){
with(_19){
if(!_f){
objj_msgSend(_19,"createDOMElements");
}
var _1b;
_c=_10.createElement("div");
_c.style.position="absolute";
_c.style.width="100000px";
_10.body.appendChild(_c);
_d=_10.createElement("span");
_d.innerHTML="x";
_1b=_d.style;
_1b.position="absolute";
_1b.visibility="visible";
_1b.padding="0px";
_1b.margin="0px";
_1b.whiteSpace="pre";
var _1c=objj_msgSend(objj_msgSend(CPBundle,"bundleForClass:",objj_msgSend(CPView,"class")),"pathForResource:","empty.png");
_e=_10.createElement("img");
_e.setAttribute("src",_1c);
_e.setAttribute("width","1");
_e.setAttribute("height","1");
_e.setAttribute("alt","");
_1b=_e.style;
_1b.visibility="visible";
_1b.padding="0px";
_1b.margin="0px";
_1b.border="none";
_1b.verticalAlign="baseline";
_c.appendChild(_d);
_c.appendChild(_e);
}
}),new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"),function(_1d,_1e,_1f,_20,_21){
with(_1d){
if(!_20){
if(!_11){
_11=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
_20=_11;
}
if(!_f){
objj_msgSend(_1d,"createDOMElements");
}
var _22;
if(!_21){
_22=_b;
}else{
_22=_a;
_22.style.width=ROUND(_21)+"px";
}
_22.style.font=objj_msgSend(_20,"cssString");
if(CPFeatureIsCompatible(CPJavaScriptInnerTextFeature)){
_22.innerText=_1f;
}else{
if(CPFeatureIsCompatible(CPJavaScriptTextContentFeature)){
_22.textContent=_1f;
}
}
return {width:_22.clientWidth,height:_22.clientHeight};
}
}),new objj_method(sel_getUid("metricsOfFont:"),function(_23,_24,_25){
with(_23){
if(!_25){
if(!_11){
_11=objj_msgSend(CPFont,"systemFontOfSize:",12);
}
_25=_11;
}
if(!_c){
objj_msgSend(_23,"createDOMMetricsElements");
}
_c.style.font=objj_msgSend(_25,"cssString");
var _26=_e.offsetTop-_d.offsetTop+_e.offsetHeight,_27=_26-_d.offsetHeight,_28=_d.offsetHeight;
return objj_msgSend(CPDictionary,"dictionaryWithObjectsAndKeys:",_26,"ascender",_27,"descender",_28,"lineHeight");
}
})]);
p;18;CPPlatformWindow.jt;6039;@STATIC;1.0;I;21;Foundation/CPObject.ji;22;CPPlatformWindow+DOM.jt;5967;
objj_executeFile("Foundation/CPObject.j",NO);
var _1=NULL;
var _2=objj_allocateClassPair(CPObject,"CPPlatformWindow"),_3=_2.isa;
class_addIvars(_2,[new objj_ivar("_contentRect"),new objj_ivar("_level"),new objj_ivar("_hasShadow"),new objj_ivar("_shadowStyle"),new objj_ivar("_title"),new objj_ivar("_DOMWindow"),new objj_ivar("_DOMBodyElement"),new objj_ivar("_DOMFocusElement"),new objj_ivar("_DOMEventGuard"),new objj_ivar("_DOMScrollingElement"),new objj_ivar("_hideDOMScrollingElementTimeout"),new objj_ivar("_windowLevels"),new objj_ivar("_windowLayers"),new objj_ivar("_mouseIsDown"),new objj_ivar("_mouseDownIsRightClick"),new objj_ivar("_lastMouseEventLocation"),new objj_ivar("_mouseDownWindow"),new objj_ivar("_lastMouseUp"),new objj_ivar("_lastMouseDown"),new objj_ivar("_charCodes"),new objj_ivar("_keyCode"),new objj_ivar("_lastKey"),new objj_ivar("_capsLockActive"),new objj_ivar("_ignoreNativeCopyOrCutEvent"),new objj_ivar("_ignoreNativePastePreparation"),new objj_ivar("_DOMEventMode"),new objj_ivar("_DOMPasteboardElement"),new objj_ivar("_pasteboardKeyDownEvent"),new objj_ivar("_overriddenEventType")]);
objj_registerClassPair(_2);
class_addMethods(_2,[new objj_method(sel_getUid("initWithContentRect:"),function(_4,_5,_6){
with(_4){
_4=objj_msgSendSuper({receiver:_4,super_class:objj_getClass("CPPlatformWindow").super_class},"init");
if(_4){
_contentRect={origin:{x:_6.origin.x,y:_6.origin.y},size:{width:_6.size.width,height:_6.size.height}};
_windowLevels=[];
_windowLayers=objj_msgSend(CPDictionary,"dictionary");
_charCodes={};
}
return _4;
}
}),new objj_method(sel_getUid("init"),function(_7,_8){
with(_7){
return objj_msgSend(_7,"initWithContentRect:",{origin:{x:0,y:0},size:{width:400,height:500}});
}
}),new objj_method(sel_getUid("contentRect"),function(_9,_a){
with(_9){
return {origin:{x:_contentRect.origin.x,y:_contentRect.origin.y},size:{width:_contentRect.size.width,height:_contentRect.size.height}};
}
}),new objj_method(sel_getUid("contentBounds"),function(_b,_c){
with(_b){
var _d=objj_msgSend(_b,"contentRect");
_d.origin={x:0,y:0};
return _d;
}
}),new objj_method(sel_getUid("visibleFrame"),function(_e,_f){
with(_e){
var _10=objj_msgSend(_e,"contentBounds");
_10.origin=CGPointMakeZero();
if(objj_msgSend(CPMenu,"menuBarVisible")&&objj_msgSend(CPPlatformWindow,"primaryPlatformWindow")===_e){
var _11=objj_msgSend(objj_msgSend(CPApp,"mainMenu"),"menuBarHeight");
_10.origin.y+=_11;
_10.size.height-=_11;
}
return _10;
}
}),new objj_method(sel_getUid("usableContentFrame"),function(_12,_13){
with(_12){
return objj_msgSend(_12,"visibleFrame");
}
}),new objj_method(sel_getUid("setContentRect:"),function(_14,_15,_16){
with(_14){
if(!_16||((_contentRect.origin.x==_16.origin.x&&_contentRect.origin.y==_16.origin.y)&&(_contentRect.size.width==_16.size.width&&_contentRect.size.height==_16.size.height))){
return;
}
_contentRect={origin:{x:_16.origin.x,y:_16.origin.y},size:{width:_16.size.width,height:_16.size.height}};
objj_msgSend(_14,"updateNativeContentRect");
}
}),new objj_method(sel_getUid("updateFromNativeContentRect"),function(_17,_18){
with(_17){
objj_msgSend(_17,"setContentRect:",objj_msgSend(_17,"nativeContentRect"));
}
}),new objj_method(sel_getUid("convertBaseToScreen:"),function(_19,_1a,_1b){
with(_19){
var _1c=objj_msgSend(_19,"contentRect");
return {x:_1b.x+(_1c.origin.x),y:_1b.y+(_1c.origin.y)};
}
}),new objj_method(sel_getUid("convertScreenToBase:"),function(_1d,_1e,_1f){
with(_1d){
var _20=objj_msgSend(_1d,"contentRect");
return {x:_1f.x-(_20.origin.x),y:_1f.y-(_20.origin.y)};
}
}),new objj_method(sel_getUid("isVisible"),function(_21,_22){
with(_21){
return _DOMWindow!==NULL;
}
}),new objj_method(sel_getUid("deminiaturize:"),function(_23,_24,_25){
with(_23){
if(_DOMWindow&&typeof _DOMWindow["cpDeminiaturize"]==="function"){
_DOMWindow.cpDeminiaturize();
}
}
}),new objj_method(sel_getUid("miniaturize:"),function(_26,_27,_28){
with(_26){
if(_DOMWindow&&typeof _DOMWindow["cpMiniaturize"]==="function"){
_DOMWindow.cpMiniaturize();
}
}
}),new objj_method(sel_getUid("moveWindow:fromLevel:toLevel:"),function(_29,_2a,_2b,_2c,_2d){
with(_29){
if(!_2b._isVisible){
return;
}
var _2e=objj_msgSend(_29,"layerAtLevel:create:",_2c,NO),_2f=objj_msgSend(_29,"layerAtLevel:create:",_2d,YES);
objj_msgSend(_2e,"removeWindow:",_2b);
objj_msgSend(_2f,"insertWindow:atIndex:",_2b,CPNotFound);
}
}),new objj_method(sel_getUid("setLevel:"),function(_30,_31,_32){
with(_30){
_level=_32;
if(_DOMWindow&&_DOMWindow.cpSetLevel){
_DOMWindow.cpSetLevel(_32);
}
}
}),new objj_method(sel_getUid("setHasShadow:"),function(_33,_34,_35){
with(_33){
_hasShadow=_35;
if(_DOMWindow&&_DOMWindow.cpSetHasShadow){
_DOMWindow.cpSetHasShadow(_35);
}
}
}),new objj_method(sel_getUid("setShadowStyle:"),function(_36,_37,_38){
with(_36){
_shadowStyle=_38;
if(_DOMWindow&&_DOMWindow.cpSetShadowStyle){
_shadowStyle.cpSetShadowStyle(_38);
}
}
}),new objj_method(sel_getUid("supportsFullPlatformWindows"),function(_39,_3a){
with(_39){
return objj_msgSend(CPPlatform,"isBrowser");
}
}),new objj_method(sel_getUid("_setTitle:window:"),function(_3b,_3c,_3d,_3e){
with(_3b){
_title=_3d;
if(_DOMWindow&&_DOMWindow.document&&(_3e===objj_msgSend(CPApp,"mainWindow")||objj_msgSend(_3e,"platformWindow")!==objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"))){
_DOMWindow.document.title=_title;
}
}
}),new objj_method(sel_getUid("title"),function(_3f,_40){
with(_3f){
return _title;
}
})]);
class_addMethods(_3,[new objj_method(sel_getUid("visiblePlatformWindows"),function(_41,_42){
with(_41){
return objj_msgSend(CPSet,"set");
}
}),new objj_method(sel_getUid("supportsMultipleInstances"),function(_43,_44){
with(_43){
return !CPBrowserIsEngine(CPInternetExplorerBrowserEngine);
}
}),new objj_method(sel_getUid("primaryPlatformWindow"),function(_45,_46){
with(_45){
return _1;
}
}),new objj_method(sel_getUid("setPrimaryPlatformWindow:"),function(_47,_48,_49){
with(_47){
_1=_49;
}
})]);
objj_executeFile("CPPlatformWindow+DOM.j",YES);
p;18;CPDOMWindowLayer.jt;2089;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jt;2019;
objj_executeFile("Foundation/CPArray.j",NO);
objj_executeFile("Foundation/CPObject.j",NO);
var _1=objj_allocateClassPair(CPObject,"CPDOMWindowLayer"),_2=_1.isa;
class_addIvars(_1,[new objj_ivar("_level"),new objj_ivar("_windows"),new objj_ivar("_DOMElement")]);
objj_registerClassPair(_1);
class_addMethods(_1,[new objj_method(sel_getUid("initWithLevel:"),function(_3,_4,_5){
with(_3){
_3=objj_msgSendSuper({receiver:_3,super_class:objj_getClass("CPDOMWindowLayer").super_class},"init");
if(_3){
_level=_5;
_windows=[];
_DOMElement=document.createElement("div");
_DOMElement.style.position="absolute";
_DOMElement.style.top="0px";
_DOMElement.style.left="0px";
_DOMElement.style.width="1px";
_DOMElement.style.height="1px";
}
return _3;
}
}),new objj_method(sel_getUid("level"),function(_6,_7){
with(_6){
return _level;
}
}),new objj_method(sel_getUid("removeWindow:"),function(_8,_9,_a){
with(_8){
if(!_a._isVisible){
return;
}
var _b=_a._index,_c=_windows.length-1;
_DOMElement.removeChild(_a._DOMElement);
objj_msgSend(_windows,"removeObjectAtIndex:",_a._index);
for(;_b<_c;++_b){
_windows[_b]._index=_b;
_windows[_b]._DOMElement.style.zIndex=_b;
}
_a._isVisible=NO;
}
}),new objj_method(sel_getUid("insertWindow:atIndex:"),function(_d,_e,_f,_10){
with(_d){
var _11=objj_msgSend(_windows,"count"),_12=(_10==CPNotFound?_11:_10),_13=_f._isVisible;
if(_13){
_12=MIN(_12,_f._index);
objj_msgSend(_windows,"removeObjectAtIndex:",_f._index);
}else{
++_11;
}
if(_10==CPNotFound||_10>=_11){
objj_msgSend(_windows,"addObject:",_f);
}else{
objj_msgSend(_windows,"insertObject:atIndex:",_f,_10);
}
for(;_12<_11;++_12){
_windows[_12]._index=_12;
_windows[_12]._DOMElement.style.zIndex=_12;
}
if(_f._DOMElement.parentNode!==_DOMElement){
_DOMElement.appendChild(_f._DOMElement);
_f._isVisible=YES;
if(objj_msgSend(_f,"isFullBridge")){
objj_msgSend(_f,"setFrame:",objj_msgSend(_f._platformWindow,"usableContentFrame"));
}
}
}
}),new objj_method(sel_getUid("orderedWindows"),function(_14,_15){
with(_14){
return _windows;
}
})]);
p;22;CPPlatformWindow+DOM.jt;34049;@STATIC;1.0;I;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.ji;9;CPEvent.ji;8;CPText.ji;17;CPCompatibility.ji;18;CPDOMWindowLayer.ji;12;CPPlatform.ji;18;CPPlatformWindow.ji;26;CPPlatformWindow+DOMKeys.jt;33835;
objj_executeFile("Foundation/CPObject.j",NO);
objj_executeFile("Foundation/CPRunLoop.j",NO);
objj_executeFile("CPEvent.j",YES);
objj_executeFile("CPText.j",YES);
objj_executeFile("CPCompatibility.j",YES);
objj_executeFile("CPDOMWindowLayer.j",YES);
objj_executeFile("CPPlatform.j",YES);
objj_executeFile("CPPlatformWindow.j",YES);
objj_executeFile("CPPlatformWindow+DOMKeys.j",YES);
var _1=objj_msgSend(CPSet,"set");
var _2,_3,_4,_5;
var _6={},_7={},_8={},_9={61:187,59:186},_a={};
_6[CPKeyCodes.A]=YES;
_8[CPKeyCodes.F1]=YES;
_8[CPKeyCodes.F2]=YES;
_8[CPKeyCodes.F3]=YES;
_8[CPKeyCodes.F4]=YES;
_8[CPKeyCodes.F5]=YES;
_8[CPKeyCodes.F6]=YES;
_8[CPKeyCodes.F7]=YES;
_8[CPKeyCodes.F8]=YES;
_8[CPKeyCodes.F9]=YES;
_8[CPKeyCodes.F10]=YES;
_8[CPKeyCodes.F11]=YES;
_8[CPKeyCodes.F12]=YES;
_a[CPKeyCodes.BACKSPACE]=CPDeleteCharacter;
_a[CPKeyCodes.DELETE]=CPDeleteFunctionKey;
_a[CPKeyCodes.TAB]=CPTabCharacter;
_a[CPKeyCodes.ENTER]=CPCarriageReturnCharacter;
_a[CPKeyCodes.ESC]=CPEscapeFunctionKey;
_a[CPKeyCodes.PAGE_UP]=CPPageUpFunctionKey;
_a[CPKeyCodes.PAGE_DOWN]=CPPageDownFunctionKey;
_a[CPKeyCodes.LEFT]=CPLeftArrowFunctionKey;
_a[CPKeyCodes.UP]=CPUpArrowFunctionKey;
_a[CPKeyCodes.RIGHT]=CPRightArrowFunctionKey;
_a[CPKeyCodes.DOWN]=CPDownArrowFunctionKey;
_a[CPKeyCodes.HOME]=CPHomeFunctionKey;
_a[CPKeyCodes.END]=CPEndFunctionKey;
_a[CPKeyCodes.SEMICOLON]=";";
_a[CPKeyCodes.DASH]="-";
_a[CPKeyCodes.EQUALS]="=";
_a[CPKeyCodes.COMMA]=",";
_a[CPKeyCodes.PERIOD]=".";
_a[CPKeyCodes.SLASH]="/";
_a[CPKeyCodes.APOSTROPHE]="`";
_a[CPKeyCodes.SINGLE_QUOTE]="'";
_a[CPKeyCodes.OPEN_SQUARE_BRACKET]="[";
_a[CPKeyCodes.BACKSLASH]="\\";
_a[CPKeyCodes.CLOSE_SQUARE_BRACKET]="]";
var _b=[CPKeyCodes.META,CPKeyCodes.WEBKIT_RIGHT_META,CPKeyCodes.MAC_FF_META,CPKeyCodes.CTRL,CPKeyCodes.ALT,CPKeyCodes.SHIFT],_c=objj_msgSend(CPPlatform,"supportsDragAndDrop");
var _d=nil;
var _e=objj_getClass("CPPlatformWindow");
if(!_e){
throw new SyntaxError("*** Could not find definition for class \"CPPlatformWindow\"");
}
var _f=_e.isa;
class_addMethods(_e,[new objj_method(sel_getUid("_init"),function(_10,_11){
with(_10){
_10=objj_msgSendSuper({receiver:_10,super_class:objj_getClass("CPPlatformWindow").super_class},"init");
if(_10){
_DOMWindow=window;
_contentRect={origin:{x:0,y:0},size:{width:0,height:0}};
_windowLevels=[];
_windowLayers=objj_msgSend(CPDictionary,"dictionary");
objj_msgSend(_10,"registerDOMWindow");
objj_msgSend(_10,"updateFromNativeContentRect");
_charCodes={};
}
return _10;
}
}),new objj_method(sel_getUid("nativeContentRect"),function(_12,_13){
with(_12){
if(!_DOMWindow){
return objj_msgSend(_12,"contentRect");
}
if(_DOMWindow.cpFrame){
return _DOMWindow.cpFrame();
}
var _14={origin:{x:0,y:0},size:{width:0,height:0}};
if(window.screenTop){
_14.origin={x:_DOMWindow.screenLeft,y:_DOMWindow.screenTop};
}else{
if(window.screenX){
_14.origin={x:_DOMWindow.screenX,y:_DOMWindow.screenY};
}
}
if(_DOMWindow.innerWidth){
_14.size={width:_DOMWindow.innerWidth,height:_DOMWindow.innerHeight};
}else{
if(document.documentElement&&document.documentElement.clientWidth){
_14.size={width:_DOMWindow.document.documentElement.clientWidth,height:_DOMWindow.document.documentElement.clientHeight};
}else{
_14.size={width:_DOMWindow.document.body.clientWidth,height:_DOMWindow.document.body.clientHeight};
}
}
return _14;
}
}),new objj_method(sel_getUid("updateNativeContentRect"),function(_15,_16){
with(_15){
if(!_DOMWindow){
return;
}
if(typeof _DOMWindow["cpSetFrame"]==="function"){
return _DOMWindow.cpSetFrame(objj_msgSend(_15,"contentRect"));
}
var _17=objj_msgSend(_15,"contentRect").origin,_18=objj_msgSend(_15,"nativeContentRect").origin;
if(_17.x!==_18.x||_17.y!==_18.y){
_DOMWindow.moveBy(_17.x-_18.x,_17.y-_18.y);
}
var _19=objj_msgSend(_15,"contentRect").size,_1a=objj_msgSend(_15,"nativeContentRect").size;
if(_19.width!==_1a.width||_19.height!==_1a.height){
_DOMWindow.resizeBy(_19.width-_1a.width,_19.height-_1a.height);
}
}
}),new objj_method(sel_getUid("orderBack:"),function(_1b,_1c,_1d){
with(_1b){
if(_DOMWindow){
_DOMWindow.blur();
}
}
}),new objj_method(sel_getUid("createDOMElements"),function(_1e,_1f){
with(_1e){
var _20=_DOMWindow.document;
_DOMFocusElement=_20.createElement("input");
_DOMFocusElement.style.position="absolute";
_DOMFocusElement.style.zIndex="-1000";
_DOMFocusElement.style.opacity="0";
_DOMFocusElement.style.filter="alpha(opacity=0)";
_DOMFocusElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMFocusElement);
_DOMPasteboardElement=_20.createElement("textarea");
_DOMPasteboardElement.style.position="absolute";
_DOMPasteboardElement.style.top="-10000px";
_DOMPasteboardElement.style.zIndex="999";
_DOMPasteboardElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMPasteboardElement);
_DOMPasteboardElement.blur();
_DOMEventGuard=_20.createElement("div");
_DOMEventGuard.style.position="absolute";
_DOMEventGuard.style.top="0px";
_DOMEventGuard.style.left="0px";
_DOMEventGuard.style.width="100%";
_DOMEventGuard.style.height="100%";
_DOMEventGuard.style.zIndex="999";
_DOMEventGuard.style.display="none";
_DOMEventGuard.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMEventGuard);
_DOMScrollingElement=_20.createElement("div");
_DOMScrollingElement.style.position="absolute";
_DOMScrollingElement.style.visibility="hidden";
_DOMScrollingElement.style.zIndex="999";
_DOMScrollingElement.style.height="60px";
_DOMScrollingElement.style.width="60px";
_DOMScrollingElement.style.overflow="scroll";
_DOMScrollingElement.style.opacity="0";
_DOMScrollingElement.style.filter="alpha(opacity=0)";
_DOMScrollingElement.className="cpdontremove";
_DOMBodyElement.appendChild(_DOMScrollingElement);
var _21=_20.createElement("div");
_21.style.width="400px";
_21.style.height="400px";
_DOMScrollingElement.appendChild(_21);
_DOMScrollingElement.scrollTop=150;
_DOMScrollingElement.scrollLeft=150;
}
}),new objj_method(sel_getUid("registerDOMWindow"),function(_22,_23){
with(_22){
var _24=_DOMWindow.document;
_DOMBodyElement=_24.getElementById("cappuccino-body")||_24.body;
if(_c){
_DOMBodyElement.style["-khtml-user-select"]="none";
}
_DOMBodyElement.webkitTouchCallout="none";
objj_msgSend(_22,"createDOMElements");
objj_msgSend(_22,"_addLayers");
var _25=objj_msgSend(_22,"class"),_26=class_getMethodImplementation(_25,sel_getUid("dragEvent:")),_27=function(_28){
_26(_22,nil,_28);
},_29=sel_getUid("resizeEvent:"),_2a=class_getMethodImplementation(_25,_29),_2b=function(_2c){
_2a(_22,nil,_2c);
},_2d=sel_getUid("copyEvent:"),_2e=class_getMethodImplementation(_25,_2d),_2f=function(_30){
_2e(_22,nil,_30);
},_31=sel_getUid("pasteEvent:"),_32=class_getMethodImplementation(_25,_31),_33=function(_34){
_32(_22,nil,_34);
},_35=sel_getUid("keyEvent:"),_36=class_getMethodImplementation(_25,_35),_37=function(_38){
_36(_22,nil,_38);
},_39=sel_getUid("mouseEvent:"),_3a=class_getMethodImplementation(_25,_39),_3b=function(_3c){
_3a(_22,nil,_3c);
},_3d=sel_getUid("contextMenuEvent:"),_3e=class_getMethodImplementation(_25,_3d),_3f=function(_40){
return _3e(_22,nil,_40);
},_41=sel_getUid("scrollEvent:"),_42=class_getMethodImplementation(_25,_41),_43=function(_44){
_42(_22,nil,_44);
},_45=sel_getUid("touchEvent:"),_46=class_getMethodImplementation(_25,_45),_47=function(_48){
_46(_22,nil,_48);
};
if(_24.addEventListener){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_24.addEventListener("dragstart",_27,NO);
_24.addEventListener("drag",_27,NO);
_24.addEventListener("dragend",_27,NO);
_24.addEventListener("dragover",_27,NO);
_24.addEventListener("dragleave",_27,NO);
_24.addEventListener("drop",_27,NO);
}
_24.addEventListener("mouseup",_3b,NO);
_24.addEventListener("mousedown",_3b,NO);
_24.addEventListener("mousemove",_3b,NO);
_24.addEventListener("contextmenu",_3f,NO);
_24.addEventListener("beforecopy",_2f,NO);
_24.addEventListener("beforecut",_2f,NO);
_24.addEventListener("beforepaste",_33,NO);
_24.addEventListener("keyup",_37,NO);
_24.addEventListener("keydown",_37,NO);
_24.addEventListener("keypress",_37,NO);
_24.addEventListener("touchstart",_47,NO);
_24.addEventListener("touchend",_47,NO);
_24.addEventListener("touchmove",_47,NO);
_24.addEventListener("touchcancel",_47,NO);
_DOMWindow.addEventListener("DOMMouseScroll",_43,NO);
_DOMWindow.addEventListener("mousewheel",_43,NO);
_DOMWindow.addEventListener("resize",_2b,NO);
_DOMWindow.addEventListener("unload",function(){
objj_msgSend(_22,"updateFromNativeContentRect");
objj_msgSend(_22,"_removeLayers");
_24.removeEventListener("mouseup",_3b,NO);
_24.removeEventListener("mousedown",_3b,NO);
_24.removeEventListener("mousemove",_3b,NO);
_24.removeEventListener("contextmenu",_3f,NO);
_24.removeEventListener("keyup",_37,NO);
_24.removeEventListener("keydown",_37,NO);
_24.removeEventListener("keypress",_37,NO);
_24.removeEventListener("beforecopy",_2f,NO);
_24.removeEventListener("beforecut",_2f,NO);
_24.removeEventListener("beforepaste",_33,NO);
_24.removeEventListener("touchstart",_47,NO);
_24.removeEventListener("touchend",_47,NO);
_24.removeEventListener("touchmove",_47,NO);
_DOMWindow.removeEventListener("resize",_2b,NO);
_DOMWindow.removeEventListener("DOMMouseScroll",_43,NO);
_DOMWindow.removeEventListener("mousewheel",_43,NO);
objj_msgSend(_1,"removeObject:",_22);
_22._DOMWindow=nil;
},NO);
}else{
_24.attachEvent("onmouseup",_3b);
_24.attachEvent("onmousedown",_3b);
_24.attachEvent("onmousemove",_3b);
_24.attachEvent("ondblclick",_3b);
_24.attachEvent("oncontextmenu",_3f);
_24.attachEvent("onkeyup",_37);
_24.attachEvent("onkeydown",_37);
_24.attachEvent("onkeypress",_37);
_DOMWindow.attachEvent("onresize",_2b);
_DOMWindow.onmousewheel=_43;
_24.onmousewheel=_43;
_DOMBodyElement.ondrag=function(){
return NO;
};
_DOMBodyElement.onselectstart=function(){
return _DOMWindow.event.srcElement===_DOMPasteboardElement;
};
_DOMWindow.attachEvent("onunload",function(){
objj_msgSend(_22,"updateFromNativeContentRect");
objj_msgSend(_22,"_removeLayers");
_24.detachEvent("onmouseup",_3b);
_24.detachEvent("onmousedown",_3b);
_24.detachEvent("onmousemove",_3b);
_24.detachEvent("ondblclick",_3b);
_24.detachEvent("oncontextmenu",_3f);
_24.detachEvent("onkeyup",_37);
_24.detachEvent("onkeydown",_37);
_24.detachEvent("onkeypress",_37);
_DOMWindow.detachEvent("onresize",_2b);
_DOMWindow.onmousewheel=NULL;
_24.onmousewheel=NULL;
_DOMBodyElement.ondrag=NULL;
_DOMBodyElement.onselectstart=NULL;
objj_msgSend(_1,"removeObject:",_22);
_22._DOMWindow=nil;
},NO);
}
}
}),new objj_method(sel_getUid("orderFront:"),function(_49,_4a,_4b){
with(_49){
if(_DOMWindow){
return _DOMWindow.focus();
}
_DOMWindow=window.open("about:blank","_blank","menubar=no,location=no,resizable=yes,scrollbars=no,status=no,left="+(_contentRect.origin.x)+",top="+(_contentRect.origin.y)+",width="+(_contentRect.size.width)+",height="+(_contentRect.size.height));
objj_msgSend(_1,"addObject:",_49);
_DOMWindow.document.write("<!DOCTYPE html><html lang='en'><head></head><body style='background-color:transparent;'></body></html>");
_DOMWindow.document.close();
if(_49!=objj_msgSend(CPPlatformWindow,"primaryPlatformWindow")){
_DOMWindow.document.title=_title;
}
if(!objj_msgSend(CPPlatform,"isBrowser")){
_DOMWindow.cpWindowNumber=objj_msgSend(_49._only,"windowNumber");
_DOMWindow.cpSetFrame(_contentRect);
_DOMWindow.cpSetLevel(_level);
_DOMWindow.cpSetHasShadow(_hasShadow);
_DOMWindow.cpSetShadowStyle(_shadowStyle);
}
objj_msgSend(_49,"registerDOMWindow");
_DOMBodyElement.style.cursor=objj_msgSend(objj_msgSend(CPCursor,"currentCursor"),"_cssString");
}
}),new objj_method(sel_getUid("orderOut:"),function(_4c,_4d,_4e){
with(_4c){
if(!_DOMWindow){
return;
}
_DOMWindow.close();
}
}),new objj_method(sel_getUid("dragEvent:"),function(_4f,_50,_51){
with(_4f){
var _52=_51.type,_53=objj_msgSend(CPDragServer,"sharedDragServer"),_54={x:_51.clientX,y:_51.clientY},_55=objj_msgSend(_CPDOMDataTransferPasteboard,"DOMDataTransferPasteboard");
objj_msgSend(_55,"_setDataTransfer:",_51.dataTransfer);
if(_51.type==="dragstart"){
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
objj_msgSend(_55,"_setPasteboard:",objj_msgSend(_53,"draggingPasteboard"));
var _56=objj_msgSend(_53,"draggedWindow"),_57=objj_msgSend(_56,"frame"),_58=_56._DOMElement;
_58.style.left=-(_57.size.width)+"px";
_58.style.top=-(_57.size.height)+"px";
var _59=_58.parentNode;
if(_59){
_59.removeChild(_58);
}
_DOMBodyElement.appendChild(_58);
var _5a=objj_msgSend(_53,"draggingOffset");
_51.dataTransfer.setDragImage(_58,_5a.width,_5a.height);
_51.dataTransfer.effectAllowed="all";
objj_msgSend(_53,"draggingStartedInPlatformWindow:globalLocation:",_4f,objj_msgSend(CPPlatform,"isBrowser")?_54:{x:_51.screenX,y:_51.screenY});
}else{
if(_52==="drag"){
var y=_51.screenY;
if(CPFeatureIsCompatible(CPHTML5DragAndDropSourceYOffBy1)){
y-=1;
}
objj_msgSend(_53,"draggingSourceUpdatedWithGlobalLocation:",objj_msgSend(CPPlatform,"isBrowser")?_54:{x:_51.screenX,y:y});
}else{
if(_52==="dragover"||_52==="dragleave"){
if(_51.preventDefault){
_51.preventDefault();
}
var _5b="none",_5c=objj_msgSend(_53,"draggingUpdatedInPlatformWindow:location:",_4f,_54);
if(_5c===CPDragOperationMove||_5c===CPDragOperationGeneric||_5c===CPDragOperationPrivate){
_5b="move";
}else{
if(_5c===CPDragOperationCopy){
_5b="copy";
}else{
if(_5c===CPDragOperationLink){
_5b="link";
}
}
}
_51.dataTransfer.dropEffect=_5b;
}else{
if(_52==="dragend"){
var _5b=_51.dataTransfer.dropEffect;
if(_5b==="move"){
_5c=CPDragOperationMove;
}else{
if(_5b==="copy"){
_5c=CPDragOperationCopy;
}else{
if(_5b==="link"){
_5c=CPDragOperationLink;
}else{
_5c=CPDragOperationNone;
}
}
}
objj_msgSend(_53,"draggingEndedInPlatformWindow:globalLocation:operation:",_4f,objj_msgSend(CPPlatform,"isBrowser")?_54:{x:_51.screenX,y:_51.screenY},_5c);
}else{
objj_msgSend(_53,"performDragOperationInPlatformWindow:",_4f);
if(_51.preventDefault){
_51.preventDefault();
}
if(_51.stopPropagation){
_51.stopPropagation();
}
}
}
}
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("keyEvent:"),function(_5d,_5e,_5f){
with(_5d){
var _60,_61=objj_msgSend(CPEvent,"currentTimestamp"),_62=_5f.target||_5f.srcElement,_63=objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"windowNumber"),_64=(_5f.shiftKey?CPShiftKeyMask:0)|(_5f.ctrlKey?CPControlKeyMask:0)|(_5f.altKey?CPAlternateKeyMask:0)|(_5f.metaKey?CPCommandKeyMask:0);
_4=YES;
if(!(_7[String.fromCharCode(_5f.keyCode||_5f.charCode).toLowerCase()]||_6[_5f.keyCode])){
if((_64&(CPControlKeyMask|CPCommandKeyMask))||_8[_5f.keyCode]){
_4=NO;
}
}
var _65=NO,_66=NO,_67=nil;
switch(_5f.type){
case "keydown":
if(_5f.keyCode in _9){
_keyCode=_9[_5f.keyCode];
}else{
_keyCode=_5f.keyCode;
}
var _68;
if(_5f.which===0||_5f.charCode===0||(_5f.which===undefined&&_5f.charCode===undefined)){
_68=_a[_keyCode];
}
if(!_68){
_68=String.fromCharCode(_keyCode).toLowerCase();
}
_67=(_64&CPShiftKeyMask||_capsLockActive)?_68.toUpperCase():_68;
if(_keyCode===CPKeyCodes.CAPS_LOCK){
_capsLockActive=YES;
}
if(objj_msgSend(_b,"containsObject:",_keyCode)){
_60=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPFlagsChanged,location,_64,_61,_63,nil,nil,nil,NO,_keyCode);
break;
}else{
if(_64&(CPControlKeyMask|CPCommandKeyMask)){
var _69=objj_msgSend(_5d,"_validateCopyCutOrPasteEvent:flags:",_5f,_64);
if(_68==="v"&&_69){
if(!_ignoreNativePastePreparation){
_DOMPasteboardElement.select();
_DOMPasteboardElement.value="";
}
_65=YES;
}else{
if((_68=="c"||_68=="x")&&_69){
_66=YES;
if(_ignoreNativeCopyOrCutEvent){
break;
}
}
}
}else{
if(CPKeyCodes.firesKeyPressEvent(_keyCode,_lastKey,_5f.shiftKey,_5f.ctrlKey,_5f.altKey)){
_4=NO;
break;
}else{
}
}
}
case "keypress":
if(_5f.type==="keypress"&&(_64&(CPControlKeyMask|CPCommandKeyMask))){
break;
}
var _6a=_keyCode,_6b=_5f.keyCode||_5f.charCode,_6c=(_charCodes[_6a]!=nil);
_lastKey=_6a;
_charCodes[_6a]=_6b;
var _68=_67;
if(!_68&&(_5f.which===0||_5f.charCode===0)){
_68=_a[_6b];
}
if(!_68){
_68=String.fromCharCode(_6b);
}
_6d=_68.toLowerCase();
if(!_67&&(_64&CPCommandKeyMask)&&((_64&CPShiftKeyMask)||_capsLockActive)){
_68=_68.toUpperCase();
}
_60=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyDown,location,_64,_61,_63,nil,_68,_6d,_6c,_6b);
if(_65){
_pasteboardKeyDownEvent=_60;
window.setNativeTimeout(function(){
objj_msgSend(_5d,"_checkPasteboardElement");
},0);
}
break;
case "keyup":
var _6a=_5f.keyCode,_6b=_charCodes[_6a];
_keyCode=-1;
_lastKey=-1;
_charCodes[_6a]=nil;
_ignoreNativeCopyOrCutEvent=NO;
_ignoreNativePastePreparation=NO;
if(_6a===CPKeyCodes.CAPS_LOCK){
_capsLockActive=NO;
}
if(objj_msgSend(_b,"containsObject:",_6a)){
_60=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPFlagsChanged,location,_64,_61,_63,nil,nil,nil,NO,_keyCode);
break;
}
var _68=_a[_6b]||String.fromCharCode(_6b),_6d=_68.toLowerCase();
if(!(_64&CPShiftKeyMask)&&(_64&CPCommandKeyMask)&&!_capsLockActive){
_68=_6d;
}
_60=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyUp,location,_64,_61,_63,nil,_68,_6d,NO,_6a);
break;
}
if(_60&&!_65){
_60._DOMEvent=_5f;
objj_msgSend(CPApp,"sendEvent:",_60);
if(_66){
objj_msgSend(_5d,"_primePasteboardElement");
}
}
if(_4){
_3(_5f,_5d);
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("copyEvent:"),function(_6e,_6f,_70){
with(_6e){
if(objj_msgSend(_6e,"_validateCopyCutOrPasteEvent:flags:",_70,CPPlatformActionKeyMask)&&!_ignoreNativeCopyOrCutEvent){
var cut=_70.type==="beforecut",_71=cut?CPKeyCodes.X:CPKeyCodes.C,_72=cut?"x":"c",_73=objj_msgSend(CPEvent,"currentTimestamp"),_74=objj_msgSend(objj_msgSend(CPApp,"keyWindow"),"windowNumber"),_75=CPPlatformActionKeyMask;
event=objj_msgSend(CPEvent,"keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:",CPKeyDown,location,_75,_73,_74,nil,_72,_72,NO,_71);
event._DOMEvent=_70;
objj_msgSend(CPApp,"sendEvent:",event);
objj_msgSend(_6e,"_primePasteboardElement");
_ignoreNativeCopyOrCutEvent=YES;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("pasteEvent:"),function(_76,_77,_78){
with(_76){
if(objj_msgSend(_76,"_validateCopyCutOrPasteEvent:flags:",_78,CPPlatformActionKeyMask)){
_DOMPasteboardElement.focus();
_DOMPasteboardElement.select();
_DOMPasteboardElement.value="";
_ignoreNativePastePreparation=YES;
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("_validateCopyCutOrPasteEvent:flags:"),function(_79,_7a,_7b,_7c){
with(_79){
return (((_7b.target||_7b.srcElement).nodeName.toUpperCase()!=="INPUT"&&(_7b.target||_7b.srcElement).nodeName.toUpperCase()!=="TEXTAREA")||_7b.target===_DOMPasteboardElement)&&(_7c&CPPlatformActionKeyMask);
}
}),new objj_method(sel_getUid("_primePasteboardElement"),function(_7d,_7e){
with(_7d){
var _7f=objj_msgSend(CPPasteboard,"generalPasteboard"),_80=objj_msgSend(_7f,"types");
if(_80.length){
if(objj_msgSend(_80,"indexOfObjectIdenticalTo:",CPStringPboardType)!=CPNotFound){
_DOMPasteboardElement.value=objj_msgSend(_7f,"stringForType:",CPStringPboardType);
}else{
_DOMPasteboardElement.value=objj_msgSend(_7f,"_generateStateUID");
}
_DOMPasteboardElement.focus();
_DOMPasteboardElement.select();
window.setNativeTimeout(function(){
objj_msgSend(_7d,"_clearPasteboardElement");
},0);
}
}
}),new objj_method(sel_getUid("_checkPasteboardElement"),function(_81,_82){
with(_81){
var _83=_DOMPasteboardElement.value;
if(objj_msgSend(_83,"length")){
var _84=objj_msgSend(CPPasteboard,"generalPasteboard");
if(objj_msgSend(_84,"_stateUID")!=_83){
objj_msgSend(_84,"declareTypes:owner:",[CPStringPboardType],_81);
objj_msgSend(_84,"setString:forType:",_83,CPStringPboardType);
}
}
objj_msgSend(_81,"_clearPasteboardElement");
objj_msgSend(CPApp,"sendEvent:",_pasteboardKeyDownEvent);
_pasteboardKeyDownEvent=nil;
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("_clearPasteboardElement"),function(_85,_86){
with(_85){
_DOMPasteboardElement.value="";
_DOMPasteboardElement.blur();
}
}),new objj_method(sel_getUid("scrollEvent:"),function(_87,_88,_89){
with(_87){
if(_hideDOMScrollingElementTimeout){
clearTimeout(_hideDOMScrollingElementTimeout);
_hideDOMScrollingElementTimeout=nil;
}
if(!_89){
_89=window.event;
}
var _8a=nil;
if(CPFeatureIsCompatible(CPJavaScriptMouseWheelValues_8_15)){
var x=_89._offsetX||0,y=_89._offsetY||0,_8b=_89.target;
while(_8b.nodeType!==1){
_8b=_8b.parentNode;
}
if(_8b.offsetParent){
do{
x+=_8b.offsetLeft;
y+=_8b.offsetTop;
}while(_8b=_8b.offsetParent);
}
_8a={x:(x+((_89.clientX-8)/15)),y:(y+((_89.clientY-8)/15))};
}else{
if(_89._overrideLocation){
_8a=_89._overrideLocation;
}else{
_8a={x:_89.clientX,y:_89.clientY};
}
}
var _8c=0,_8d=0,_8e=0,_8f=objj_msgSend(CPEvent,"currentTimestamp"),_90=(_89.shiftKey?CPShiftKeyMask:0)|(_89.ctrlKey?CPControlKeyMask:0)|(_89.altKey?CPAlternateKeyMask:0)|(_89.metaKey?CPCommandKeyMask:0);
_DOMScrollingElement.style.visibility="visible";
_DOMScrollingElement.style.top=(_8a.y-15)+"px";
_DOMScrollingElement.style.left=(_8a.x-15)+"px";
_4=NO;
var _91=objj_msgSend(_87,"hitTest:",_8a);
if(!_91){
return;
}
var _8e=objj_msgSend(_91,"windowNumber");
_8a=objj_msgSend(_91,"convertBridgeToBase:",_8a);
var _92=objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",CPScrollWheel,_8a,_90,_8f,_8e,nil,-1,1,0);
_92._DOMEvent=_89;
setTimeout(function(){
var _93=_DOMScrollingElement.scrollLeft-150,_8d=_DOMScrollingElement.scrollTop-150;
if(_93||_8d){
_92._deltaX=_93;
_92._deltaY=_8d;
objj_msgSend(CPApp,"sendEvent:",_92);
}
_DOMScrollingElement.scrollLeft=150;
_DOMScrollingElement.scrollTop=150;
},0);
_hideDOMScrollingElementTimeout=setTimeout(function(){
_DOMScrollingElement.style.visibility="hidden";
},300);
}
}),new objj_method(sel_getUid("resizeEvent:"),function(_94,_95,_96){
with(_94){
objj_msgSend(_d,"invalidate");
_d=objj_msgSend(CPTimer,"scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:",0.2,_94,sel_getUid("_actualResizeEvent"),nil,NO);
}
}),new objj_method(sel_getUid("_actualResizeEvent"),function(_97,_98){
with(_97){
_d=nil;
if(objj_msgSend(CPPlatform,"isBrowser")){
objj_msgSend(CPApp._activeMenu,"cancelTracking");
}
var _99=objj_msgSend(_97,"contentRect").size;
objj_msgSend(_97,"updateFromNativeContentRect");
var _9a=_windowLevels,_9b=_windowLayers,_9c=_9a.length;
while(_9c--){
var _9d=objj_msgSend(_9b,"objectForKey:",_9a[_9c])._windows,_9e=_9d.length;
while(_9e--){
objj_msgSend(_9d[_9e],"resizeWithOldPlatformWindowSize:",_99);
}
}
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("touchEvent:"),function(_9f,_a0,_a1){
with(_9f){
if(_a1.touches&&(_a1.touches.length==1||(_a1.touches.length==0&&_a1.changedTouches.length==1))){
var _a2={};
switch(_a1.type){
case CPDOMEventTouchStart:
_a2.type=CPDOMEventMouseDown;
break;
case CPDOMEventTouchEnd:
_a2.type=CPDOMEventMouseUp;
break;
case CPDOMEventTouchMove:
_a2.type=CPDOMEventMouseMoved;
break;
case CPDOMEventTouchCancel:
_a2.type=CPDOMEventMouseUp;
break;
}
var _a3=_a1.touches.length?_a1.touches[0]:_a1.changedTouches[0];
_a2.clientX=_a3.clientX;
_a2.clientY=_a3.clientY;
_a2.timestamp=objj_msgSend(CPEvent,"currentTimestamp");
_a2.target=_a1.target;
_a2.shiftKey=_a2.ctrlKey=_a2.altKey=_a2.metaKey=false;
_a2.preventDefault=function(){
if(_a1.preventDefault){
_a1.preventDefault();
}
};
_a2.stopPropagation=function(){
if(_a1.stopPropagation){
_a1.stopPropagation();
}
};
objj_msgSend(_9f,"mouseEvent:",_a2);
return;
}else{
if(_a1.preventDefault){
_a1.preventDefault();
}
if(_a1.stopPropagation){
_a1.stopPropagation();
}
}
}
}),new objj_method(sel_getUid("mouseEvent:"),function(_a4,_a5,_a6){
with(_a4){
var _a7=_overriddenEventType||_a6.type;
if(_a7==="dblclick"){
_overriddenEventType=CPDOMEventMouseDown;
objj_msgSend(_a4,"mouseEvent:",_a6);
_overriddenEventType=CPDOMEventMouseUp;
objj_msgSend(_a4,"mouseEvent:",_a6);
_overriddenEventType=nil;
return;
}
var _a8,_a9={x:_a6.clientX,y:_a6.clientY},_aa=objj_msgSend(CPEvent,"currentTimestamp"),_ab=(_a6.target||_a6.srcElement),_ac=0,_ad=(_a6.shiftKey?CPShiftKeyMask:0)|(_a6.ctrlKey?CPControlKeyMask:0)|(_a6.altKey?CPAlternateKeyMask:0)|(_a6.metaKey?CPCommandKeyMask:0);
_4=YES;
if(_mouseDownWindow){
_ac=objj_msgSend(_mouseDownWindow,"windowNumber");
}else{
var _ae=objj_msgSend(_a4,"hitTest:",_a9);
if((_a6.type===CPDOMEventMouseDown)&&_ae){
_mouseDownWindow=_ae;
}
_ac=objj_msgSend(_ae,"windowNumber");
}
if(_ac){
_a9=objj_msgSend(CPApp._windows[_ac],"convertPlatformWindowToBase:",_a9);
}
if(_a7==="mouseup"){
if(_mouseIsDown){
_a8=_af(_a6,_mouseDownIsRightClick?CPRightMouseUp:CPLeftMouseUp,_a9,_ad,_aa,_ac,nil,-1,_2(_lastMouseUp,_aa,_a9),0,nil);
_mouseIsDown=NO;
_lastMouseUp=_a8;
_mouseDownWindow=nil;
_mouseDownIsRightClick=NO;
}
if(_DOMEventMode){
_DOMEventMode=NO;
return;
}
}else{
if(_a7==="mousedown"){
var _b0=_a6.button;
_mouseDownIsRightClick=_b0==2||(CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&_b0==0&&_ad&CPControlKeyMask);
if(_ab.tagName==="INPUT"&&_ab!=_DOMFocusElement){
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMBodyElement.setAttribute("draggable","false");
_DOMBodyElement.style["-khtml-user-drag"]="none";
}
_DOMEventMode=YES;
_mouseIsDown=YES;
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_mouseDownIsRightClick?CPRightMouseDown:CPLeftMouseDown,_a9,_ad,_aa,_ac,nil,-1,_2(_lastMouseDown,_aa,_a9),0));
objj_msgSend(CPApp,"sendEvent:",objj_msgSend(CPEvent,"mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:",_mouseDownIsRightClick?CPRightMouseUp:CPLeftMouseUp,_a9,_ad,_aa,_ac,nil,-1,_2(_lastMouseDown,_aa,_a9),0));
return;
}else{
if(objj_msgSend(CPPlatform,"supportsDragAndDrop")){
_DOMBodyElement.setAttribute("draggable","true");
_DOMBodyElement.style["-khtml-user-drag"]="element";
}
}
_5=YES;
_a8=_af(_a6,_mouseDownIsRightClick?CPRightMouseDown:CPLeftMouseDown,_a9,_ad,_aa,_ac,nil,-1,_2(_lastMouseDown,_aa,_a9),0,nil);
_mouseIsDown=YES;
_lastMouseDown=_a8;
}else{
if(_DOMEventMode){
return;
}
_a8=_af(_a6,_mouseIsDown?(_mouseDownIsRightClick?CPRightMouseDragged:CPLeftMouseDragged):CPMouseMoved,_a9,_ad,_aa,_ac,nil,-1,1,0,_lastMouseEventLocation||_a9);
}
}
var _b1=objj_msgSend(objj_msgSend(CPDragServer,"sharedDragServer"),"isDragging");
if(_a8&&(!_b1||!_c)){
_a8._DOMEvent=_a6;
objj_msgSend(CPApp,"sendEvent:",_a8);
}
if(_4&&(!_c||_a7!=="mousedown"&&!_b1)){
_3(_a6,_a4);
}
var _b2=NO;
for(var i=0;i<CPApp._eventListeners.length;i++){
if(CPApp._eventListeners[i]._callback!==_CPRunModalLoop){
_b2=YES;
break;
}
}
_lastMouseEventLocation=_a9;
_DOMEventGuard.style.display=_b2?"":"none";
objj_msgSend(objj_msgSend(CPRunLoop,"currentRunLoop"),"limitDateForMode:",CPDefaultRunLoopMode);
}
}),new objj_method(sel_getUid("contextMenuEvent:"),function(_b3,_b4,_b5){
with(_b3){
if(_5){
_3(_b5,_b3);
}
return !_5;
}
}),new objj_method(sel_getUid("orderedWindowsAtLevel:"),function(_b6,_b7,_b8){
with(_b6){
var _b9=objj_msgSend(_b6,"layerAtLevel:create:",_b8,NO);
if(!_b9){
return [];
}
return objj_msgSend(_b9,"orderedWindows");
}
}),new objj_method(sel_getUid("layerAtLevel:create:"),function(_ba,_bb,_bc,_bd){
with(_ba){
var _be=objj_msgSend(_windowLayers,"objectForKey:",_bc);
if(!_be&&_bd){
_be=objj_msgSend(objj_msgSend(CPDOMWindowLayer,"alloc"),"initWithLevel:",_bc);
objj_msgSend(_windowLayers,"setObject:forKey:",_be,_bc);
var low=0,_bf=_windowLevels.length-1,_c0;
while(low<=_bf){
_c0=FLOOR((low+_bf)/2);
if(_windowLevels[_c0]>_bc){
_bf=_c0-1;
}else{
low=_c0+1;
}
}
var _c1=0;
if(_c0!==undefined){
_c1=_windowLevels[_c0]>_bc?_c0:_c0+1;
}
objj_msgSend(_windowLevels,"insertObject:atIndex:",_bc,_c1);
_be._DOMElement.style.zIndex=_bc;
_DOMBodyElement.appendChild(_be._DOMElement);
}
return _be;
}
}),new objj_method(sel_getUid("order:window:relativeTo:"),function(_c2,_c3,_c4,_c5,_c6){
with(_c2){
objj_msgSend(CPPlatform,"initializeScreenIfNecessary");
var _c7=objj_msgSend(_c2,"layerAtLevel:create:",objj_msgSend(_c5,"level"),_c4!==CPWindowOut);
if(_c4===CPWindowOut){
return objj_msgSend(_c7,"removeWindow:",_c5);
}
var _c8=CPNotFound;
if(_c6){
_c8=_c4===CPWindowAbove?_c6._index+1:_c6._index;
}
objj_msgSend(_c7,"insertWindow:atIndex:",_c5,_c8);
}
}),new objj_method(sel_getUid("_removeLayers"),function(_c9,_ca){
with(_c9){
var _cb=_windowLevels,_cc=_windowLayers,_cd=_cb.length;
while(_cd--){
var _ce=objj_msgSend(_cc,"objectForKey:",_cb[_cd]);
_DOMBodyElement.removeChild(_ce._DOMElement);
}
}
}),new objj_method(sel_getUid("_addLayers"),function(_cf,_d0){
with(_cf){
var _d1=_windowLevels,_d2=_windowLayers,_d3=_d1.length;
while(_d3--){
var _d4=objj_msgSend(_d2,"objectForKey:",_d1[_d3]);
_DOMBodyElement.appendChild(_d4._DOMElement);
}
}
}),new objj_method(sel_getUid("_dragHitTest:pasteboard:"),function(_d5,_d6,_d7,_d8){
with(_d5){
var _d9=_windowLevels,_da=_windowLayers,_db=_d9.length;
while(_db--){
if(_d9[_db]>=CPDraggingWindowLevel){
continue;
}
var _dc=objj_msgSend(_da,"objectForKey:",_d9[_db])._windows,_dd=_dc.length;
while(_dd--){
var _de=_dc[_dd];
if(objj_msgSend(_de,"_sharesChromeWithPlatformWindow")){
return objj_msgSend(_de,"_dragHitTest:pasteboard:",_d7,_d8);
}
if(objj_msgSend(_de,"containsPoint:",_d7)){
return objj_msgSend(_de,"_dragHitTest:pasteboard:",_d7,_d8);
}
}
}
return nil;
}
}),new objj_method(sel_getUid("_propagateCurrentDOMEvent:"),function(_df,_e0,_e1){
with(_df){
_4=!_e1;
}
}),new objj_method(sel_getUid("_willPropagateCurrentDOMEvent"),function(_e2,_e3){
with(_e2){
return !_4;
}
}),new objj_method(sel_getUid("_propagateContextMenuDOMEvent:"),function(_e4,_e5,_e6){
with(_e4){
if(_e6&&CPBrowserIsEngine(CPGeckoBrowserEngine)){
_4=!_e6;
}
_5=!_e6;
}
}),new objj_method(sel_getUid("_willPropagateContextMenuDOMEvent"),function(_e7,_e8){
with(_e7){
return _5;
}
}),new objj_method(sel_getUid("hitTest:"),function(_e9,_ea,_eb){
with(_e9){
if(_e9._only){
return _e9._only;
}
var _ec=_windowLevels,_ed=_windowLayers,_ee=_ec.length,_ef=nil;
while(_ee--&&!_ef){
var _f0=objj_msgSend(_ed,"objectForKey:",_ec[_ee])._windows,_f1=_f0.length;
while(_f1--&&!_ef){
var _f2=_f0[_f1];
if(!_f2._ignoresMouseEvents&&objj_msgSend(_f2,"containsPoint:",_eb)){
_ef=_f2;
}
}
}
return _ef;
}
})]);
class_addMethods(_f,[new objj_method(sel_getUid("visiblePlatformWindows"),function(_f3,_f4){
with(_f3){
if(objj_msgSend(objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"),"isVisible")){
var set=objj_msgSend(CPSet,"setWithSet:",_1);
objj_msgSend(set,"addObject:",objj_msgSend(CPPlatformWindow,"primaryPlatformWindow"));
return set;
}else{
return _1;
}
}
}),new objj_method(sel_getUid("preventCharacterKeysFromPropagating:"),function(_f5,_f6,_f7){
with(_f5){
for(var i=_f7.length;i>0;i--){
_7[""+_f7[i-1].toLowerCase()]=YES;
}
}
}),new objj_method(sel_getUid("preventCharacterKeyFromPropagating:"),function(_f8,_f9,_fa){
with(_f8){
_7[_fa.toLowerCase()]=YES;
}
}),new objj_method(sel_getUid("clearCharacterKeysToPreventFromPropagating"),function(_fb,_fc){
with(_fb){
_7={};
}
}),new objj_method(sel_getUid("preventKeyCodesFromPropagating:"),function(_fd,_fe,_ff){
with(_fd){
for(var i=_ff.length;i>0;i--){
_6[_ff[i-1]]=YES;
}
}
}),new objj_method(sel_getUid("preventKeyCodeFromPropagating:"),function(self,_100,_101){
with(self){
_6[_101]=YES;
}
}),new objj_method(sel_getUid("clearKeyCodesToPreventFromPropagating"),function(self,_102){
with(self){
_6={};
}
})]);
var _103=objj_msgSend(CPEvent,"class");
var _af=function(_104,_105,_106,_107,_108,_109,_10a,_10b,_10c,_10d,_10e){
_104.isa=_103;
_104._type=_105;
_104._location=_106;
_104._modifierFlags=_107;
_104._timestamp=_108;
_104._windowNumber=_109;
_104._window=nil;
_104._context=_10a;
_104._eventNumber=_10b;
_104._clickCount=_10c;
_104._pressure=_10d;
if((_105==CPLeftMouseDragged)||(_105==CPRightMouseDragged)||(_105==CPMouseMoved)){
_104._deltaX=_106.x-_10e.x;
_104._deltaY=_106.y-_10e.y;
}else{
_104._deltaX=0;
_104._deltaY=0;
}
return _104;
};
var _10f=5,_110=(typeof document!="undefined"&&document.addEventListener)?350:1000;
var _2=function(_111,_112,_113){
if(!_111){
return 1;
}
var _114=objj_msgSend(_111,"locationInWindow");
return (_112-objj_msgSend(_111,"timestamp")<_110&&ABS(_114.x-_113.x)<_10f&&ABS(_114.y-_113.y)<_10f)?objj_msgSend(_111,"clickCount")+1:1;
};
var _3=function(_115,_116){
_115.cancelBubble=true;
_115.returnValue=false;
if(_115.preventDefault){
_115.preventDefault();
}
if(_115.stopPropagation){
_115.stopPropagation();
}
if(_115.type===CPDOMEventMouseDown){
_116._DOMFocusElement.focus();
_116._DOMFocusElement.blur();
}
};
CPWindowObjectList=function(){
var _117=objj_msgSend(CPPlatformWindow,"visiblePlatformWindows"),_118=objj_msgSend(_117,"objectEnumerator"),_119=nil,_11a=[];
while((_119=objj_msgSend(_118,"nextObject"))!==nil){
var _11b=_119._windowLevels,_11c=_119._windowLayers,_11d=_11b.length;
while(_11d--){
var _11e=objj_msgSend(_11c,"objectForKey:",_11b[_11d])._windows,_11f=_11e.length;
while(_11f--){
_11a.push(_11e[_11f]);
}
}
}
return _11a;
};
CPWindowList=function(){
var _120=CPWindowObjectList(),_121=[];
for(var i=0,_122=objj_msgSend(_120,"count");i<_122;i++){
_121.push(objj_msgSend(_120[i],"windowNumber"));
}
return _121;
};
p;26;CPPlatformWindow+DOMKeys.jt;2357;@STATIC;1.0;t;2338;
CPKeyCodes={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WEBKIT_RIGHT_META:93,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229};
CPKeyCodes.firesKeyPressEvent=function(_1,_2,_3,_4,_5){
if(!CPFeatureIsCompatible(CPJavaScriptRemedialKeySupport)){
return true;
}
if(CPBrowserIsOperatingSystem(CPMacOperatingSystem)&&_5){
return CPKeyCodes.isCharacterKey(_1);
}
if(_5&&!_4){
return false;
}
if(CPBrowserIsEngine(CPInternetExplorerBrowserEngine)&&!_3&&(_4||_5)){
return false;
}
if(CPBrowserIsEngine(CPInternetExplorerBrowserEngine)&&_4&&_2==_1){
return false;
}
switch(_1){
case CPKeyCodes.ENTER:
return true;
case CPKeyCodes.ESC:
return !CPBrowserIsEngine(CPWebKitBrowserEngine);
}
return CPKeyCodes.isCharacterKey(_1);
};
CPKeyCodes.isCharacterKey=function(_6){
if(_6>=CPKeyCodes.ZERO&&_6<=CPKeyCodes.NINE){
return true;
}
if(_6>=CPKeyCodes.NUM_ZERO&&_6<=CPKeyCodes.NUM_MULTIPLY){
return true;
}
if(_6>=CPKeyCodes.A&&_6<=CPKeyCodes.Z){
return true;
}
switch(_6){
case CPKeyCodes.SPACE:
case CPKeyCodes.QUESTION_MARK:
case CPKeyCodes.NUM_PLUS:
case CPKeyCodes.NUM_MINUS:
case CPKeyCodes.NUM_PERIOD:
case CPKeyCodes.NUM_DIVISION:
case CPKeyCodes.SEMICOLON:
case CPKeyCodes.DASH:
case CPKeyCodes.EQUALS:
case CPKeyCodes.COMMA:
case CPKeyCodes.PERIOD:
case CPKeyCodes.SLASH:
case CPKeyCodes.APOSTROPHE:
case CPKeyCodes.SINGLE_QUOTE:
case CPKeyCodes.OPEN_SQUARE_BRACKET:
case CPKeyCodes.BACKSLASH:
case CPKeyCodes.CLOSE_SQUARE_BRACKET:
return true;
default:
return false;
}
};
e;